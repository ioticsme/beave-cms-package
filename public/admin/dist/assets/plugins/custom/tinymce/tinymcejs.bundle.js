!function(){function o(e){var t;return null===e?"null":void 0===e?"undefined":"object"==(t=typeof e)&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"==t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t}function f(o){return g(function(e,t){if(e.length!==t.length)return!1;for(var n=e.length,r=0;r<n;r++)if(!o.eq(e[r],t[r]))return!1;return!0})}function d(l){return g(function(e,t){var n,r=Object.keys(e),o=Object.keys(t),i=f(p),u=function(e){return t=n,Array.prototype.slice.call(e).sort(t);var t};if(!g(function(e,t){return i.eq(u(e),u(t))}).eq(r,o))return!1;for(var a=r.length,c=0;c<a;c++){var s=r[c];if(!l.eq(e[s],t[s]))return!1}return!0})}function i(n){return function(e){return t=typeof(e=e),(null===e?"null":"object"==t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"==t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t)===n;var t}}function u(t){return function(e){return typeof e===t}}function a(t){return function(e){return t===e}}function Y(e){return null==e}function ne(e){return!Y(e)}function le(){}function c(n,r){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n(r.apply(null,e))}}function s(t,n){return function(e){return t(n(e))}}function fe(e){return function(){return e}}function m(e){return e}function l(e,t){return e===t}function g(e){return{eq:e}}var p=g(function(e,t){return e===t}),h=g(function(e,t){var n;return e===t||(n=o(e))===o(t)&&(-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(n)?e===t:"array"===n?f(h).eq(e,t):"object"===n&&d(h).eq(e,t))}),de=i("string"),Oe=i("object"),x=i("array"),v=a(null),b=u("boolean"),y=a(void 0),O=u("function"),T=u("number");function me(r){for(var o=[],e=1;e<arguments.length;e++)o[e-1]=arguments[e];return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=o.concat(e);return r.apply(null,n)}}function E(t){return function(e){return!t(e)}}function M(e){return e()}function N(e){e()}function R(){return P}var ge=fe(!1),C=fe(!0),P={fold:function(e,t){return e()},isSome:ge,isNone:C,getOr:m,getOrThunk:I,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:fe(null),getOrUndefined:fe(void 0),or:m,orThunk:I,map:R,each:le,bind:R,exists:ge,forall:C,filter:function(){return P},toArray:function(){return[]},toString:fe("none()")};function I(e){return e()}function L(e,t){return Ve.call(e,t)}function Ee(e,t){return-1<L(e,t)}function F(e,t){for(var n=0,r=e.length;n<r;n++)if(t(e[n],n))return!0;return!1}function S(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o)}return r}function pe(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)}function H(e,t){for(var n=e.length-1;0<=n;n--)t(e[n],n)}function V(e,t){for(var n=[],r=[],o=0,i=e.length;o<i;o++){var u=e[o];(t(u,o)?n:r).push(u)}return{pass:n,fail:r}}function z(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r)&&n.push(i)}return n}function j(e,n,r){return H(e,function(e,t){r=n(r,e,t)}),r}function U(e,n,r){return pe(e,function(e,t){r=n(r,e,t)}),r}function W(e,t,n){for(var r=0,o=e.length;r<o;r++){var i=e[r];if(t(i,r))return ve.some(i);if(n(i,r))break}return ve.none()}function $(e,t){return W(e,t,ge)}function J(e,t){for(var n=0,r=e.length;n<r;n++)if(t(e[n],n))return ve.some(n);return ve.none()}function Z(e,t){for(var n=S(e,t),r=[],o=0,i=n.length;o<i;++o){if(!x(n[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+n);je.apply(r,n[o])}return r}function Q(e,t){for(var n=0,r=e.length;n<r;++n)if(!0!==t(e[n],n))return!1;return!0}function ee(e){e=He.call(e,0);return e.reverse(),e}function te(e,t){return z(e,function(e){return!Ee(t,e)})}function oe(e,t){e=He.call(e,0);return e.sort(t),e}function ie(e,t){return 0<=t&&t<e.length?ve.some(e[t]):ve.none()}function ue(e){return ie(e,0)}function ae(e){return ie(e,e.length-1)}function ce(e,t){for(var n=0;n<e.length;n++){var r=t(e[n],n);if(r.isSome())return r}return ve.none()}function q(e,t){for(var n=We(e),r=0,o=n.length;r<o;r++){var i=n[r];t(e[i],i)}}function se(e,n){return r=function(e,t){return{k:t,v:n(e,t)}},o={},q(e,function(e,t){e=r(e,t);o[e.k]=e.v}),o;var r,o}function _e(n){return function(e,t){n[t]=e}}function Ae(e,n,r,o){q(e,function(e,t){(n(e,t)?r:o)(e,t)})}function De(e,t){var n={};return Ae(e,t,_e(n),le),n}function he(e,t){return re(e,t)?ve.from(e[t]):ve.none()}function Me(e,t){return re(e,t)&&void 0!==e[t]&&null!==e[t]}function Ne(e,t,n){var r,o;if(!e)return!1;if(n=n||e,void 0!==e.length){for(r=0,o=e.length;r<o;r++)if(!1===t.call(n,e[r],r,e))return!1}else for(r in e)if(re(e,r)&&!1===t.call(n,e[r],r,e))return!1;return!0}function Re(n,r){var o=[];return Ne(n,function(e,t){o.push(r(e,t,n))}),o}function ze(n,r){var o=[];return Ne(n,function(e,t){r&&!r(e,t,n)||o.push(e)}),o}function Be(e,t){if(e)for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}function Pe(e,t,n,r){for(var o=y(n)?e[0]:n,i=0;i<e.length;i++)o=t.call(r,o,e[i],i);return o}function Ie(e,t,n){for(var r=0,o=e.length;r<o;r++)if(t.call(n,e[r],r,e))return r;return-1}function Le(e){return e[e.length-1]}function Fe(n){function e(){return o}function t(e){return e(n)}var r=fe(n),o={fold:function(e,t){return t(n)},isSome:C,isNone:ge,getOr:r,getOrThunk:r,getOrDie:r,getOrNull:r,getOrUndefined:r,or:e,orThunk:e,map:function(e){return Fe(e(n))},each:function(e){e(n)},bind:t,exists:t,forall:t,filter:function(e){return e(n)?o:P},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return o}var ve={some:Fe,none:R,from:function(e){return null==e?P:Fe(e)}},He=Array.prototype.slice,Ve=Array.prototype.indexOf,je=Array.prototype.push,Ue=O(Array.from)?Array.from:function(e){return He.call(e)},We=Object.keys,$e=Object.hasOwnProperty,re=function(e,t){return $e.call(e,t)},qe=Array.isArray,be=function(){return(be=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function Ge(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||((r=r||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}function Ke(n){var r,o=!1;return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o||(o=!0,r=n.apply(null,e)),r}}function Xe(e,t){var n=String(t).toLowerCase();return $(e,function(e){return e.search(n)})}function Ye(e,t){return-1!==e.indexOf(t)}function Je(t){return function(e){return e.replace(t,"")}}function Ze(e){return 0<e.length}function Qe(e){return!Ze(e)}function et(t){return function(e){return Ye(e,t)}}function tt(e){return window.matchMedia(e).matches}function nt(e){return null==e?"":(""+e).replace(Bt,"")}function rt(e,t){return t?!("array"!==t||!qe(e))||typeof e===t:void 0!==e}function ot(e,t){for(var n=[],r=function(e){return n.push(e),t(e)},o=t(e);(o=o.bind(r)).isSome(););return n}function it(e,t){e=e.dom;if(1!==e.nodeType)return!1;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}function ut(e){return 1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount}function _(e,t){return e.dom===t.dom}function at(e,t){return Mt().browser.isIE()?(r=e.dom,o=t.dom,n=Node.DOCUMENT_POSITION_CONTAINED_BY,0!=(r.compareDocumentPosition(o)&n)):(r=e.dom)!==(o=t.dom)&&r.contains(o);var n,r,o}function ct(){return dt(0,0)}function st(e){function t(e){return function(){return n===e}}var n=e.current,e=e.version;return{current:n,version:e,isEdge:t("Edge"),isChrome:t("Chrome"),isIE:t("IE"),isOpera:t("Opera"),isFirefox:t(St),isSafari:t("Safari")}}function lt(e){function t(e){return function(){return n===e}}var n=e.current,e=e.version;return{current:n,version:e,isWindows:t(Tt),isiOS:t("iOS"),isAndroid:t(Ot),isOSX:t("OSX"),isLinux:t("Linux"),isSolaris:t(Et),isFreeBSD:t(_t),isChromeOS:t(At)}}function ft(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}}function dt(e,t){return{major:e,minor:t}}function mt(){return st({current:void 0,version:ht.unknown()})}function gt(){return lt({current:void 0,version:ht.unknown()})}function pt(e,n,r,o){o=o||this,e&&Ne(e=r?e[r]:e,function(e,t){return!1!==n.call(o,e,t,r)&&void pt(e,n,r,o)})}var ht={nu:dt,detect:function(e,t){var n,r,t=String(t).toLowerCase();return 0===e.length?ct():(r=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t))return r}}(e,n=t))?dt(o(1),o(2)):{major:0,minor:0};function o(e){return Number(n.replace(r,"$"+e))}},unknown:ct},vt=function(e,t){return""===(t=t)||e.length>=t.length&&e.substr(0,0+t.length)===t},bt=Je(/^\s+|\s+$/g),yt=Je(/^\s+/g),wt=Je(/\s+$/g),xt=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Ct={browsers:fe([{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return Ye(e,"edge/")&&Ye(e,"chrome")&&Ye(e,"safari")&&Ye(e,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,xt],search:function(e){return Ye(e,"chrome")&&!Ye(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return Ye(e,"msie")||Ye(e,"trident")}},{name:"Opera",versionRegexes:[xt,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:et("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:et("firefox")},{name:"Safari",versionRegexes:[xt,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(Ye(e,"safari")||Ye(e,"mobile/"))&&Ye(e,"applewebkit")}}]),oses:fe([{name:"Windows",search:et("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return Ye(e,"iphone")||Ye(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:et("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:et("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:et("linux"),versionRegexes:[]},{name:"Solaris",search:et("sunos"),versionRegexes:[]},{name:"FreeBSD",search:et("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:et("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}])},St="Firefox",kt=st,Tt=(fe("Edge"),fe("Chrome"),fe("IE"),fe("Opera"),fe(St),fe("Safari"),"Windows"),Ot="Android",Et="Solaris",_t="FreeBSD",At="ChromeOS",Dt=lt,Mt=(fe(Tt),fe("iOS"),fe(Ot),fe("Linux"),fe("OSX"),fe(Et),fe(_t),fe(At),Ke(function(){return e=navigator.userAgent,s=ve.from(navigator.userAgentData),u=tt,c=Ct.browsers(),l=Ct.oses(),{browser:s=s.bind(function(e){return r=c,ce(e.brands,function(t){var n=t.brand.toLowerCase();return $(r,function(e){return n===(null==(e=e.brand)?void 0:e.toLowerCase())}).map(function(e){return{current:e.name,version:ht.nu(parseInt(t.version,10),0)}})});var r}).orThunk(function(){return Xe(c,n=e).map(function(e){var t=ht.detect(e.versionRegexes,n);return{current:e.name,version:t}});var n}).fold(mt,kt),os:l=Xe(l,n=e).map(function(e){var t=ht.detect(e.versionRegexes,n);return{current:e.name,version:t}}).fold(gt,Dt),deviceType:(s=s,t=e,u=u,r=(l=l).isiOS()&&!0===/ipad/i.test(t),o=l.isiOS()&&!r,i=(a=l.isiOS()||l.isAndroid())||u("(pointer:coarse)"),u=r||!o&&a&&u("(min-device-width:768px)"),a=o||a&&!u,s=s.isSafari()&&l.isiOS()&&!1===/safari/i.test(t),{isiPad:fe(r),isiPhone:fe(o),isTablet:fe(u),isPhone:fe(a),isTouch:fe(i),isAndroid:l.isAndroid,isiOS:l.isiOS,isWebView:fe(s),isDesktop:fe(!a&&!u&&!s)})};var e,n,t,r,o,i,u,a,c,s,l})),xt=navigator.userAgent,e=Mt(),t=e.browser,Nt=e.os,e=e.deviceType,Rt=/WebKit/.test(xt)&&!t.isEdge(),zt="FormData"in window&&"FileReader"in window&&"URL"in window&&!!URL.createObjectURL,xt=-1!==xt.indexOf("Windows Phone"),ye={opera:t.isOpera(),webkit:Rt,ie:!(!t.isIE()&&!t.isEdge())&&t.version.major,gecko:t.isFirefox(),mac:Nt.isOSX()||Nt.isiOS(),iOS:e.isiPad()||e.isiPhone(),android:Nt.isAndroid(),contentEditable:!0,transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:!0,range:window.getSelection&&"Range"in window,documentMode:t.isIE()?document.documentMode||7:10,fileApi:zt,ceFalse:!0,cacheSuffix:null,container:null,experimentalShadowDom:!1,canHaveCSP:!t.isIE(),desktop:e.isDesktop(),windowsPhone:xt,browser:{current:t.current,version:t.version,isChrome:t.isChrome,isEdge:t.isEdge,isFirefox:t.isFirefox,isIE:t.isIE,isOpera:t.isOpera,isSafari:t.isSafari},os:{current:Nt.current,version:Nt.version,isAndroid:Nt.isAndroid,isChromeOS:Nt.isChromeOS,isFreeBSD:Nt.isFreeBSD,isiOS:Nt.isiOS,isLinux:Nt.isLinux,isOSX:Nt.isOSX,isSolaris:Nt.isSolaris,isWindows:Nt.isWindows},deviceType:{isDesktop:e.isDesktop,isiPad:e.isiPad,isiPhone:e.isiPhone,isPhone:e.isPhone,isTablet:e.isTablet,isTouch:e.isTouch,isWebView:e.isWebView}},Bt=/^\s*|\s*$/g,we={trim:nt,isArray:qe,is:rt,toArray:function(e){if(qe(e))return e;for(var t=[],n=0,r=e.length;n<r;n++)t[n]=e[n];return t},makeMap:function(e,t,n){var r;for(t=t||",",n=n||{},r=(e="string"==typeof(e=e||[])?e.split(t):e).length;r--;)n[e[r]]={};return n},each:Ne,map:Re,grep:ze,inArray:Be,hasOwn:re,extend:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r++){var o,i,u=t[r];for(o in u)re(u,o)&&void 0!==(i=u[o])&&(e[o]=i)}return e},create:function(e,t,n){var r,o,i,u=this,a=0,c=(e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e))[3].match(/(^|\.)(\w+)$/i)[2],s=u.createNS(e[3].replace(/\.\w+$/,""),n);s[c]||("static"===e[2]?(s[c]=t,this.onCreate&&this.onCreate(e[2],e[3],s[c])):(t[c]||(t[c]=function(){},a=1),s[c]=t[c],u.extend(s[c].prototype,t),e[5]&&(r=u.resolve(e[5]).prototype,o=e[5].match(/\.(\w+)$/i)[1],i=s[c],s[c]=a?function(){return r[o].apply(this,arguments)}:function(){return this.parent=r[o],i.apply(this,arguments)},s[c].prototype[c]=s[c],u.each(r,function(e,t){s[c].prototype[t]=r[t]}),u.each(t,function(e,t){r[t]?s[c].prototype[t]=function(){return this.parent=r[t],e.apply(this,arguments)}:t!==c&&(s[c].prototype[t]=e)})),u.each(t.static,function(e,t){s[c][t]=e})))},walk:pt,createNS:function(e,t){var n,r;for(t=t||window,e=e.split("."),n=0;n<e.length;n++)t[r=e[n]]||(t[r]={}),t=t[r];return t},resolve:function(e,t){var n,r;for(t=t||window,n=0,r=(e=e.split(".")).length;n<r&&(t=t[e[n]]);n++);return t},explode:function(e,t){return!e||rt(e,"array")?e:Re(e.split(t||","),nt)},_addCacheSuffix:function(e){var t=ye.cacheSuffix;return t&&(e+=(-1===e.indexOf("?")?"?":"&")+t),e}},xe={fromHtml:function(e,t){t=(t||document).createElement("div");if(t.innerHTML=e,!t.hasChildNodes()||1<t.childNodes.length)throw console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node");return ft(t.childNodes[0])},fromTag:function(e,t){return ft((t||document).createElement(e))},fromText:function(e,t){return ft((t||document).createTextNode(e))},fromDom:ft,fromPoint:function(e,t,n){return ve.from(e.dom.elementFromPoint(t,n)).map(ft)}};function Pt(e){return e.dom.nodeName.toLowerCase()}function It(e){return e.dom.nodeType}function Lt(t){return function(e){return It(e)===t}}function Ft(e){return xe.fromDom(e.dom.ownerDocument)}function Ht(e){return Hn(e)?e:Ft(e)}function Vt(e){return xe.fromDom(Ht(e).dom.defaultView)}function jt(e){return ve.from(e.dom.parentNode).map(xe.fromDom)}function Ut(e){return ve.from(e.dom.previousSibling).map(xe.fromDom)}function Wt(e){return ve.from(e.dom.nextSibling).map(xe.fromDom)}function $t(e){return ee(ot(e,Ut))}function qt(e){return ot(e,Wt)}function Gt(e,t){e=e.dom.childNodes;return ve.from(e[t]).map(xe.fromDom)}function Kt(e){return Gt(e,0)}function Xt(e){return Gt(e,e.dom.childNodes.length-1)}function Yt(e){return e.dom.childNodes.length}function Jt(e){return Vn(e)&&ne(e.dom.host)}function Zt(e){if(Jt(e))return e;e=Ht(e).dom.head;if(null==e)throw new Error("Head is not available yet");return xe.fromDom(e)}function Qt(e){return xe.fromDom(e.dom.host)}function en(t,n){jt(t).each(function(e){e.dom.insertBefore(n.dom,t.dom)})}function tn(e,t){Wt(e).fold(function(){jt(e).each(function(e){$n(e,t)})},function(e){en(e,t)})}function nn(t,n){Kt(t).fold(function(){$n(t,n)},function(e){t.dom.insertBefore(n.dom,e.dom)})}function rn(t,e){pe(e,function(e){$n(t,e)})}function on(e){e.dom.textContent="",pe(jn(e),function(e){qn(e)})}function un(e){var t,n=jn(e);0<n.length&&(t=e,pe(n,function(e){en(t,e)})),qn(e)}function an(e,t){return void 0!==e?e:void 0!==t?t:0}function cn(e){var e=void 0!==e?e.dom:document,t=e.body.scrollLeft||e.documentElement.scrollLeft,e=e.body.scrollTop||e.documentElement.scrollTop;return Kn(t,e)}function sn(e,t,n){n=(void 0!==n?n.dom:document).defaultView;n&&n.scrollTo(e,t)}function ln(e,t){Mt().browser.isSafari()&&O(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(t)}function fn(e,t,n,r){return{x:e,y:t,width:n,height:r,right:e+n,bottom:t+r}}function dn(e){var n=void 0===e?window:e,e=n.document,r=cn(xe.fromDom(e)),e=void 0===n?window:n;return(Mt().browser.isFirefox()?ve.none():ve.from(e.visualViewport)).fold(function(){var e=n.document.documentElement,t=e.clientWidth,e=e.clientHeight;return fn(r.left,r.top,t,e)},function(e){return fn(Math.max(e.pageLeft,r.left),Math.max(e.pageTop,r.top),e.width,e.height)})}function mn(t){return function(e){return!!e&&e.nodeType===t}}function gn(e){return e&&!Object.getPrototypeOf(e)}function pn(e){var t=e.map(function(e){return e.toLowerCase()});return function(e){return!(!e||!e.nodeName)&&(e=e.nodeName.toLowerCase(),Ee(t,e))}}function hn(r,e){var o=e.toLowerCase().split(" ");return function(e){if(G(e))for(var t=0;t<o.length;t++){var n=e.ownerDocument.defaultView.getComputedStyle(e,null);if((n?n.getPropertyValue(r):null)===o[t])return!0}return!1}}function vn(t){return function(e){return G(e)&&e.hasAttribute(t)}}function bn(e){return G(e)&&e.hasAttribute("data-mce-bogus")}function yn(e){return G(e)&&"TABLE"===e.tagName}function wn(t){return function(e){if(G(e)){if(e.contentEditable===t)return!0;if(e.getAttribute("data-mce-contenteditable")===t)return!0}return!1}}function xn(e,t,n){return void 0===n&&(n=l),e.exists(function(e){return n(e,t)})}function Cn(e,t,n){return e.isSome()&&t.isSome()?ve.some(n(e.getOrDie(),t.getOrDie())):ve.none()}function Sn(e){return void 0!==e.style&&O(e.style.getPropertyValue)}function kn(e,t,n){if(!(de(n)||b(n)||T(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")}function Tn(e,t,n){kn(e.dom,t,n)}function On(e,t){var n=e.dom;q(t,function(e,t){kn(n,t,e)})}function En(e,t){e=e.dom.getAttribute(t);return null===e?void 0:e}function _n(e,t){return ve.from(En(e,t))}function An(e,t){e=e.dom;return e&&e.hasAttribute&&e.hasAttribute(t)}function Dn(e,t){e.dom.removeAttribute(t)}function Mn(e,t){var r=e.dom;q(t,function(e,t){var n=r;if(!de(e))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",e,":: Element ",n),new Error("CSS value must be a string: "+e);Sn(n)&&n.style.setProperty(t,e)})}function Nn(e,t){var n=e.dom,r=window.getComputedStyle(n).getPropertyValue(t);return""!==r||Gn(e)?r:or(n,t)}function Rn(e,t){e=e.dom,e=or(e,t);return ve.from(e).filter(function(e){return 0<e.length})}function zn(e){var t={},n=e.dom;if(Sn(n))for(var r=0;r<n.style.length;r++){var o=n.style.item(r);t[o]=n.style[o]}return t}function Bn(e){return $(e,Ln)}function Pn(e,t){return e.children&&Ee(e.children,t)}"undefined"==typeof window&&Function("return this;")();function In(n,r){return{left:n,top:r,translate:function(e,t){return In(n+e,r+t)}}}var Ln=Lt(1),Fn=Lt(3),Hn=Lt(9),Vn=Lt(11),jn=function(e){return S(e.dom.childNodes,xe.fromDom)},Rt=O(Element.prototype.attachShadow)&&O(Node.prototype.getRootNode),Un=fe(Rt),Wn=Rt?function(e){return xe.fromDom(e.dom.getRootNode())}:Ht,$n=function(e,t){e.dom.appendChild(t.dom)},qn=function(e){e=e.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},Gn=function(e){var t,n=Fn(e)?e.dom.parentNode:e.dom;return null!=n&&null!==n.ownerDocument&&(t=n.ownerDocument,e=xe.fromDom(n),(Jt(e=Wn(e))?ve.some(e):ve.none()).fold(function(){return t.body.contains(n)},s(Gn,Qt)))},Kn=In,Xn=function(e){var t=e.dom,n=t.ownerDocument.body;return n===t?Kn(n.offsetLeft,n.offsetTop):Gn(e)?(n=t.getBoundingClientRect(),Kn(n.left,n.top)):Kn(0,0)},G=mn(1),Yn=pn(["textarea","input"]),B=mn(3),Jn=mn(8),Zn=mn(9),Qn=mn(11),A=pn(["br"]),er=pn(["img"]),tr=wn("true"),D=wn("false"),nr=pn(["td","th"]),rr=pn(["video","audio","object","embed"]),or=function(e,t){return Sn(e)?e.style.getPropertyValue(t):""},ir=Mt().browser,ur={},ar={exports:ur};function cr(e){setTimeout(function(){throw e},0)}function sr(e){return hr(function(){return new gr(e)})}function lr(u){if(!x(u))throw new Error("cases must be an array");if(0===u.length)throw new Error("there must be at least one case");var a=[],n={};return pe(u,function(e,r){var t=We(e);if(1!==t.length)throw new Error("one and only one name per case");var o=t[0],i=e[o];if(void 0!==n[o])throw new Error("duplicate key detected:"+o);if("cata"===o)throw new Error("cannot have a case named cata (sorry)");if(!x(i))throw new Error("case arguments must be an array");a.push(o),n[o]=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=n.length;if(t!==i.length)throw new Error("Wrong number of arguments to case "+o+". Expected "+i.length+" ("+i+"), got "+t);return{fold:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(e.length!==u.length)throw new Error("Wrong number of arguments to fold. Expected "+u.length+", got "+e.length);return e[r].apply(null,n)},match:function(e){var t=We(e);if(a.length!==t.length)throw new Error("Wrong number of arguments to match. Expected: "+a.join(",")+"\nActual: "+t.join(","));if(Q(a,function(e){return Ee(t,e)}))return e[o].apply(null,n);throw new Error("Not all branches were specified when using match. Specified: "+t.join(", ")+"\nRequired: "+a.join(", "))},log:function(e){console.log(e,{constructors:a,constructor:o,params:n})}}}}),n}!function(){function e(){var e,t,n={exports:{}};function r(){}function i(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],l(e,this)}function o(n,r){for(;3===n._state;)n=n._value;0!==n._state?(n._handled=!0,i._immediateFn(function(){var e,t=1===n._state?r.onFulfilled:r.onRejected;if(null!==t){try{e=t(n._value)}catch(e){return void a(r.promise,e)}u(r.promise,e)}else(1===n._state?u:a)(r.promise,n._value)})):n._deferreds.push(r)}function u(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof i)return e._state=3,e._value=t,c(e);if("function"==typeof n)return l((r=n,o=t,function(){r.apply(o,arguments)}),e)}e._state=1,e._value=t,c(e)}catch(t){a(e,t)}var r,o}function a(e,t){e._state=2,e._value=t,c(e)}function c(e){2===e._state&&0===e._deferreds.length&&i._immediateFn(function(){e._handled||i._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)o(e,e._deferreds[t]);e._deferreds=null}function s(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function l(e,t){var n=!1;try{e(function(e){n||(n=!0,u(t,e))},function(e){n||(n=!0,a(t,e))})}catch(e){n||(n=!0,a(t,e))}}f=n,e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=setTimeout,i.prototype.catch=function(e){return this.then(null,e)},i.prototype.then=function(e,t){var n=new this.constructor(r);return o(this,new s(e,t,n)),n},i.all=function(e){var a=Array.prototype.slice.call(e);return new i(function(o,i){if(0===a.length)return o([]);for(var u=a.length,e=0;e<a.length;e++)!function t(n,e){try{if(e&&("object"==typeof e||"function"==typeof e)){var r=e.then;if("function"==typeof r)return r.call(e,function(e){t(n,e)},i),0}a[n]=e,0==--u&&o(a)}catch(e){i(e)}}(e,a[e])})},i.resolve=function(t){return t&&"object"==typeof t&&t.constructor===i?t:new i(function(e){e(t)})},i.reject=function(n){return new i(function(e,t){t(n)})},i.race=function(o){return new i(function(e,t){for(var n=0,r=o.length;n<r;n++)o[n].then(e,t)})},i._immediateFn="function"==typeof setImmediate?function(e){setImmediate(e)}:function(e){t(e,0)},i._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},i._setImmediateFn=function(e){i._immediateFn=e},i._setUnhandledRejectionFn=function(e){i._unhandledRejectionFn=e},f.exports?f.exports=i:e.Promise||(e.Promise=i);var f=n.exports;return{boltExport:("undefined"!=typeof window?window:Function("return this;")()).Promise||f}}var t=this;"object"==typeof ur&&void 0!==ar?ar.exports=e():(t="undefined"!=typeof globalThis?globalThis:t||self).EphoxContactWrapper=e()}();function fr(e){function r(e){t()?n(e):i.push(e)}function t(){return o.isSome()}function n(t){o.each(function(e){setTimeout(function(){t(e)},0)})}var o=ve.none(),i=[];return e(function(e){t()||(o=ve.some(e),pe(i,n),i=[])}),{get:r,map:function(n){return fr(function(t){r(function(e){t(n(e))})})},isReady:t}}function dr(n){return{isValue:C,isError:ge,getOr:fe(n),getOrThunk:fe(n),getOrDie:fe(n),or:function(e){return dr(n)},orThunk:function(e){return dr(n)},fold:function(e,t){return t(n)},map:function(e){return dr(e(n))},mapError:function(e){return dr(n)},each:function(e){e(n)},bind:function(e){return e(n)},exists:function(e){return e(n)},forall:function(e){return e(n)},toOptional:function(){return ve.some(n)}}}function mr(n){return{isValue:ge,isError:C,getOr:m,getOrThunk:function(e){return e()},getOrDie:function(){throw e=String(n),new Error(e);var e},or:m,orThunk:function(e){return e()},fold:function(e,t){return e(n)},map:function(e){return mr(n)},mapError:function(e){return mr(e(n))},each:le,bind:function(e){return mr(n)},exists:ge,forall:C,toOptional:ve.none}}var gr=ar.exports.boltExport,pr={nu:fr,pure:function(t){return fr(function(e){e(t)})}},hr=function(n){function e(e){n().then(e,cr)}return{map:function(e){return hr(function(){return n().then(e)})},bind:function(t){return hr(function(){return n().then(function(e){return t(e).toPromise()})})},anonBind:function(e){return hr(function(){return n().then(function(){return e.toPromise()})})},toLazy:function(){return pr.nu(e)},toCached:function(){var e=null;return hr(function(){return e=null===e?n():e})},toPromise:n,get:e}},vr=dr,br=mr;function yr(e){return e.fold(m,m)}function wr(e,t,n,r,o){return e(n,r)?ve.some(n):O(o)&&o(n)?ve.none():t(n,r,o)}function xr(e,t,n){for(var r=e.dom,o=O(n)?n:ge;r.parentNode;){var r=r.parentNode,i=xe.fromDom(r);if(t(i))return ve.some(i);if(o(i))break}return ve.none()}function Cr(e,t,n){return wr(function(e,t){return t(e)},xr,e,t,n)}function Sr(e,t,n){return xr(e,function(e){return it(e,t)},n)}function kr(e,t){return t=t,ut(e=void 0===e?document:e.dom)?ve.none():ve.from(e.querySelector(t)).map(xe.fromDom)}function Tr(e,t,n){return wr(it,Sr,e,t,n)}function Or(e,t){return"number"!=typeof t&&(t=0),setTimeout(e,t)}function Er(e,t){return"number"!=typeof t&&(t=1),setInterval(e,t)}function _r(n,r){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];clearTimeout(o),o=Or(function(){n.apply(this,e)},r)}var o;return e.stop=function(){clearTimeout(o)},e}function Ar(l,f){function n(e,t,n){var r,e=we._addCacheSuffix(e),o=he(m,e).getOrThunk(function(){return{id:"mce-u"+d++,passed:[],failed:[],count:0}});function i(e,t){for(var n=e.length;n--;)e[n]();o.status=t,o.passed=[],o.failed=[],r&&(r.onload=null,r.onerror=null,r=null)}function u(){i(o.passed,2)}function a(){return i(o.failed,3)}(m[e]=o).count++;function c(){var e=c;!function(){for(var e=l.styleSheets,t=e.length;t--;){var n=e[t].ownerNode;if(n&&n.id===r.id)return u(),1}}()&&(Date.now()-s<h?zr.setTimeout(e):a())}var s;t&&o.passed.push(t),n&&o.failed.push(n),1!==o.status&&(2!==o.status?3!==o.status?(o.status=1,On(t=xe.fromTag("link",p.dom),{rel:"stylesheet",type:"text/css",id:o.id}),s=Date.now(),f.contentCssCors&&Tn(t,"crossOrigin","anonymous"),f.referrerPolicy&&Tn(t,"referrerpolicy",f.referrerPolicy),(r=t.dom).onload=c,r.onerror=a,n=t,$n(Zt(g),n),Tn(t,"href",e)):a():u())}function r(t){return sr(function(e){n(t,c(e,fe(vr(t))),c(e,fe(br(t))))})}function t(e){var t=we._addCacheSuffix(e);he(m,t).each(function(e){0==--e.count&&(delete m[t],e=e.id,kr(Zt(g),"#"+e).each(qn))})}void 0===f&&(f={});var d=0,m={},g=xe.fromDom(l),p=Ht(g),h=f.maxLoadTime||5e3;return{load:n,loadAll:function(e,t,n){var u=S(e,r);sr(function(r){var o=[],i=0;0===u.length?r([]):pe(u,function(e,t){var n;e.get((n=t,function(e){o[n]=e,++i>=u.length&&r(o)}))})}).get(function(e){e=V(e,function(e){return e.isValue()});0<e.fail.length?n(e.fail.map(yr)):t(e.pass.map(yr))})},unload:t,unloadAll:function(e){pe(e,function(e){t(e)})},_setReferrerPolicy:function(e){f.referrerPolicy=e}}}lr([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);var Dr,Mr,Nr=function(e,t){return $(e.dom.childNodes,function(e){return t(xe.fromDom(e))}).map(xe.fromDom)},Rr=window.Promise||gr,zr={requestAnimationFrame:function(e,i){Dr?Dr.then(e):Dr=new Rr(function(e){for(var t=i=i||document.body,n=window.requestAnimationFrame,r=["ms","moz","webkit"],o=0;o<r.length&&!n;o++)n=window[r[o]+"RequestAnimationFrame"];(n=n||function(e){window.setTimeout(e,0)})(e,t)}).then(e)},setTimeout:Or,setInterval:Er,setEditorTimeout:function(e,t,n){return Or(function(){e.removed||t()},n)},setEditorInterval:function(e,t,n){var r=Er(function(){e.removed?clearInterval(r):t()},n);return r},debounce:_r,throttle:_r,clearInterval:function(e){return clearInterval(e)},clearTimeout:function(e){return clearTimeout(e)}},Br=(Mr=new WeakMap,{forElement:function(e,t){var n=Wn(e).dom;return ve.from(Mr.get(n)).getOrThunk(function(){var e=Ar(n,t);return Mr.set(n,e),e})}}),Pr=(Ir.prototype.current=function(){return this.node},Ir.prototype.next=function(e){return this.node=this.findSibling(this.node,"firstChild","nextSibling",e),this.node},Ir.prototype.prev=function(e){return this.node=this.findSibling(this.node,"lastChild","previousSibling",e),this.node},Ir.prototype.prev2=function(e){return this.node=this.findPreviousNode(this.node,"lastChild","previousSibling",e),this.node},Ir.prototype.findSibling=function(e,t,n,r){var o,i;if(e){if(!r&&e[t])return e[t];if(e!==this.rootNode){if(o=e[n])return o;for(i=e.parentNode;i&&i!==this.rootNode;i=i.parentNode)if(o=i[n])return o}}},Ir.prototype.findPreviousNode=function(e,t,n,r){var o;if(e&&(n=e[n],!this.rootNode||n!==this.rootNode)){if(n){if(!r)for(o=n[t];o;o=o[t])if(!o[t])return o;return n}return(r=e.parentNode)&&r!==this.rootNode?r:void 0}},Ir);function Ir(e,t){this.node=e,this.rootNode=t,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}function Lr(t){var n;return function(e){return n=n||function(e,t){for(var n={},r=0,o=e.length;r<o;r++){var i=e[r];n[String(i)]=t(i,r)}return n}(t,C),re(n,Pt(e))}}function Fr(e){return Ln(e)&&!wo(e)}function Hr(e){return Ln(e)&&"br"===Pt(e)}function Vr(e){return Ro(e)&&(e=e.parentNode),No(e)&&e.hasAttribute("data-mce-caret")}function jr(e){return Ro(e)&&Do(e.data)}function Ur(e){return Vr(e)||jr(e)}function Wr(e){return e.firstChild!==e.lastChild||!A(e.firstChild)}function $r(e){var t=e.container();return!!B(t)&&(t.data.charAt(e.offset())===Ao||e.isAtStart()&&jr(t.previousSibling))}function qr(e){var t=e.container();return!!B(t)&&(t.data.charAt(e.offset()-1)===Ao||e.isAtEnd()&&jr(t.nextSibling))}function Gr(e){return e&&e.hasAttribute("data-mce-caret")?(bn(t=(t=e.getElementsByTagName("br"))[t.length-1])&&t.parentNode.removeChild(t),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("_moz_abspos"),e):null;var t}function Kr(e){return Vr(e.startContainer)}function Xr(e){return!Uo(e)&&(Fo(e)?!Ho(e.parentNode):Vo(e)||Lo(e)||jo(e)||Wo(e))}function Yr(e,t){return Xr(e)&&function(e,t){for(e=e.parentNode;e&&e!==t;e=e.parentNode){if(Wo(e))return!1;if(Po(e))return!0}return!0}(e,t)}function Jr(e){return $o.test(e)}function Zr(e,t){return Xr(e)&&!1===(t=t,B(n=e)&&Jr(n.data)&&!1===(n=n,t=xe.fromDom(t),Sr(xe.fromDom(n),"pre,code",me(_,t)).isSome()))||G(n=e)&&"A"===n.nodeName&&!n.hasAttribute("href")&&(n.hasAttribute("name")||n.hasAttribute("id"))||qo(e);var n}function Qr(e,t){var n=e.dom,r=t=void 0===t||t,o=0;if(Zr(n,n))return!1;var i=n.firstChild;if(!i)return!0;var u=new Pr(i,n);do{if(r){if(Ko(i)){i=u.next(!0);continue}if(Go(i)){i=u.next();continue}}if(A(i))o++;else if(Zr(i,n))return!1;i=u.next()}while(i);return o<=1}function eo(e,t){return ne(e)&&(Zr(e,t)||Fr(xe.fromDom(e)))}function to(e){return"span"===e.nodeName.toLowerCase()&&"bookmark"===e.getAttribute("data-mce-type")}function no(e,t){var n,r,o,i={};if(e){for(e=e.split(","),t=t||10,n=0;n<e.length;n+=2)r=String.fromCharCode(parseInt(e[n],t)),ni[r]||(o="&"+e[n+1]+";",i[r]=o,i[o]=r);return i}}function ro(e,t){return e.replace(t?Jo:Zo,function(e){return ni[e]||e})}function oo(e,t){return e.replace(t?Jo:Zo,function(e){return 1<e.length?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":ni[e]||"&#"+e.charCodeAt(0)+";"})}function io(e,t,n){return n=n||oi,e.replace(t?Jo:Zo,function(e){return ni[e]||n[e]||e})}function uo(e,t){return(e=we.trim(e))?e.split(t||" "):[]}function ao(e,t){e=ci(e," ",ci(e.toUpperCase()," "));return li(e,t)}function co(e){return ao("td th li dt dd figcaption caption details summary",e.getTextBlockElements())}function so(e,n){var r;return e&&(r={},si(e="string"==typeof e?{"*":e}:e,function(e,t){r[t]=r[t.toUpperCase()]=("map"===n?ci:fi)(e,/[, ]/)})),r}function lo(o){function e(e,t,n){var r=o[e];return r?r=ci(r,/[, ]/,ci(r.toUpperCase(),/[, ]/)):(r=ui[e])||(r=ao(t,n),ui[e]=r),r}var a,t,n,c,S={},i={},k=[],u={},r={},s=(m=(o=o||{}).schema,c={},ui[m]||(a="id accesskey class dir lang style tabindex title role",d="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",t="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==m&&(a+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",d+=" article aside details dialog figure main header footer hgroup section nav",t+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==m&&(a+=" xml:lang",t=[t,"acronym applet basefont big font strike tt"].join(" "),si(uo("acronym applet basefont big font strike tt"),function(e){l(e,"",t)}),d=[d,"center dir isindex noframes"].join(" "),n=[d,t].join(" "),si(uo("center dir isindex noframes"),function(e){l(e,"",n)})),n=n||[d,t].join(" "),l("html","manifest","head body"),l("head","","base command link meta noscript script style title"),l("title hr noscript br"),l("base","href target"),l("link","href rel media hreflang type sizes hreflang"),l("meta","name http-equiv content charset"),l("style","media type scoped"),l("script","src async defer type charset"),l("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",n),l("address dt dd div caption","",n),l("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",t),l("blockquote","cite",n),l("ol","reversed start type","li"),l("ul","","li"),l("li","value",n),l("dl","","dt dd"),l("a","href target rel media hreflang type",t),l("q","cite",t),l("ins del","cite datetime",n),l("img","src sizes srcset alt usemap ismap width height"),l("iframe","src name width height",n),l("embed","src type width height"),l("object","data type typemustmatch name usemap form width height",[n,"param"].join(" ")),l("param","name value"),l("map","name",[n,"area"].join(" ")),l("area","alt coords shape href target rel media hreflang type"),l("table","border","caption colgroup thead tfoot tbody tr"+("html4"===m?" col":"")),l("colgroup","span","col"),l("col","span"),l("tbody thead tfoot","","tr"),l("tr","","td th"),l("td","colspan rowspan headers",n),l("th","colspan rowspan headers scope abbr",n),l("form","accept-charset action autocomplete enctype method name novalidate target",n),l("fieldset","disabled form name",[n,"legend"].join(" ")),l("label","form for",t),l("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),l("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===m?n:t),l("select","disabled form multiple name required size","option optgroup"),l("optgroup","disabled label","option"),l("option","disabled label selected value"),l("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),l("menu","type label",[n,"li"].join(" ")),l("noscript","",n),"html4"!==m&&(l("wbr"),l("ruby","",[t,"rt rp"].join(" ")),l("figcaption","",n),l("mark rt rp summary bdi","",t),l("canvas","width height",n),l("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[n,"track source"].join(" ")),l("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[n,"track source"].join(" ")),l("picture","","img source"),l("source","src srcset type media sizes"),l("track","kind src srclang label default"),l("datalist","",[t,"option"].join(" ")),l("article section nav aside main header footer","",n),l("hgroup","","h1 h2 h3 h4 h5 h6"),l("figure","",[n,"figcaption"].join(" ")),l("time","datetime",t),l("dialog","open",n),l("command","type label icon disabled checked radiogroup command"),l("output","for form name",t),l("progress","value max",t),l("meter","value min max low high optimum",t),l("details","open",[n,"summary"].join(" ")),l("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==m&&(f("script","language xml:space"),f("style","xml:space"),f("object","declare classid code codebase codetype archive standby align border hspace vspace"),f("embed","align name hspace vspace"),f("param","valuetype type"),f("a","charset name rev shape coords"),f("br","clear"),f("applet","codebase archive code object alt name width height align hspace vspace"),f("img","name longdesc align border hspace vspace"),f("iframe","longdesc frameborder marginwidth marginheight scrolling align"),f("font basefont","size color face"),f("input","usemap align"),f("select"),f("textarea"),f("h1 h2 h3 h4 h5 h6 div p legend caption","align"),f("ul","type compact"),f("li","type"),f("ol dl menu dir","compact"),f("pre","width xml:space"),f("hr","align noshade size width"),f("isindex","prompt"),f("table","summary width frame rules cellspacing cellpadding align bgcolor"),f("col","width align char charoff valign"),f("colgroup","width align char charoff valign"),f("thead","align char charoff valign"),f("tr","align char charoff valign bgcolor"),f("th","axis align char charoff valign nowrap bgcolor width height"),f("form","accept"),f("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),f("tfoot","align char charoff valign"),f("tbody","align char charoff valign"),f("area","nohref"),f("body","background bgcolor text link vlink alink")),"html4"!==m&&(f("input button select textarea","autofocus"),f("input textarea","placeholder"),f("a","download"),f("link script img","crossorigin"),f("img","loading"),f("iframe","sandbox seamless allowfullscreen loading")),si(uo("a form meter progress dfn"),function(e){c[e]&&delete c[e].children[e]}),delete c.caption.children.table,delete c.script,ui[m]=c));function l(e,t,n){function r(e,t){for(var n={},r=0,o=e.length;r<o;r++)n[e[r]]=t||{};return n}var o;t=t||"","string"==typeof(n=n||[])&&(n=uo(n));for(var i=uo(e),u=i.length;u--;)o={attributes:r(o=uo([a,t].join(" "))),attributesOrder:o,children:r(n,ai)},c[i[u]]=o}function f(e,t){for(var n,r,o,i=uo(e),u=i.length,a=uo(t);u--;)for(n=c[i[u]],r=0,o=a.length;r<o;r++)n.attributes[a[r]]={},n.attributesOrder.push(a[r])}!1===o.verify_html&&(o.valid_elements="*[*]");var d=so(o.valid_styles),m=so(o.invalid_styles,"map"),g=so(o.valid_classes,"map"),p=e("whitespace_elements","pre script noscript style textarea video audio iframe object code"),h=e("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),v=e("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),b=e("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),y="td th iframe video audio object script code",w=e("non_empty_elements",y+" pre",v),y=e("move_caret_before_on_enter_elements",y+" table",v),x=e("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),C=e("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",x),T=e("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp");function O(e){return new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$")}function E(e){var t,n,r,o,i,u,a,c,s,l,f,d,m,g,p,h,v,b,y=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/,w=/^([!\-])?(\w+[\\:]:\w+|[^=:<]+)?(?:([=:<])(.*))?$/,x=/[*?+]/;if(e){var C=uo(e,",");for(S["@"]&&(h=S["@"].attributes,v=S["@"].attributesOrder),t=0,n=C.length;t<n;t++)if(i=y.exec(C[t])){if(g=i[1],s=i[2],p=i[3],c=i[5],u={attributes:d={},attributesOrder:m=[]},"#"===g&&(u.paddEmpty=!0),"-"===g&&(u.removeEmpty=!0),"!"===i[4]&&(u.removeEmptyAttrs=!0),h&&(q(h,function(e,t){d[t]=e}),m.push.apply(m,v)),c)for(r=0,o=(c=uo(c,"|")).length;r<o;r++)(i=w.exec(c[r]))&&(a={},f=i[1],l=i[2].replace(/[\\:]:/g,":"),g=i[3],b=i[4],"!"===f&&(u.attributesRequired=u.attributesRequired||[],u.attributesRequired.push(l),a.required=!0),"-"!==f?(g&&("="===g&&(u.attributesDefault=u.attributesDefault||[],u.attributesDefault.push({name:l,value:b}),a.defaultValue=b),":"===g&&(u.attributesForced=u.attributesForced||[],u.attributesForced.push({name:l,value:b}),a.forcedValue=b),"<"===g)&&(a.validValues=ci(b,"?")),x.test(l)?(u.attributePatterns=u.attributePatterns||[],a.pattern=O(l),u.attributePatterns.push(a)):(d[l]||m.push(l),d[l]=a)):(delete d[l],m.splice(di(m,l),1)));h||"@"!==s||(h=d,v=m),p&&(u.outputName=s,S[p]=u),x.test(s)?(u.pattern=O(s),k.push(u)):S[s]=u}}}function _(e){S={},k=[],E(e),si(s,function(e,t){i[t]=e.children})}function A(e){var o=/^(~)?(.+)$/;e&&(ui.text_block_elements=ui.block_elements=null,si(uo(e,","),function(e){var e=o.exec(e),t="~"===e[1],n=t?"span":"div",r=e[2];i[r]=i[n],u[r]=n,t||(C[r.toUpperCase()]={},C[r]={}),S[r]||(e=S[n],delete(e=li({},e)).removeEmptyAttrs,delete e.removeEmpty,S[r]=e),si(i,function(e,t){e[n]&&(i[t]=e=li({},i[t]),e[r]=e[n])})}))}function D(e){var r=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;ui[o.schema]=null,e&&si(uo(e,","),function(e){var t,n,e=r.exec(e);e&&(n=e[1],t=n?i[e[2]]:i[e[2]]={"#comment":{}},t=i[e[2]],si(uo(e[3],"|"),function(e){"-"===n?delete t[e]:t[e]={}}))})}function M(e){var t,n=S[e];if(n)return n;for(t=k.length;t--;)if((n=k[t]).pattern.test(e))return n}si((o.special||"script noscript iframe noframes noembed title style textarea xmp").split(" "),function(e){r[e]=new RegExp("</"+e+"[^>]*>","gi")}),o.valid_elements?_(o.valid_elements):(si(s,function(e,t){S[t]={attributes:e.attributes,attributesOrder:e.attributesOrder},i[t]=e.children}),"html5"!==o.schema&&si(uo("strong/b em/i"),function(e){e=uo(e,"/");S[e[1]].outputName=e[0]}),si(T,function(e,t){S[t]&&(o.padd_empty_block_inline_children&&(S[t].paddInEmptyBlock=!0),S[t].removeEmpty=!0)}),si(uo("ol ul blockquote a table tbody"),function(e){S[e]&&(S[e].removeEmpty=!0)}),si(uo("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),function(e){S[e].paddEmpty=!0}),si(uo("span"),function(e){S[e].removeEmptyAttrs=!0})),A(o.custom_elements),D(o.valid_children),E(o.extended_valid_elements),D("+ol[ul|ol],+ul[ul|ol]"),si({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},function(e,t){S[t]&&(S[t].parentsRequired=uo(e))}),o.invalid_elements&&si(fi(o.invalid_elements),function(e){S[e]&&delete S[e]}),M("span")||E("span[!data-mce-type|*]");var d=fe(d),m=fe(m),g=fe(g),b=fe(b),N=fe(C),x=fe(x),T=fe(T),v=fe(v),h=fe(h),w=fe(w),y=fe(y),p=fe(p),R=fe(r),z=fe(u);return{children:i,elements:S,getValidStyles:d,getValidClasses:g,getBlockElements:N,getInvalidStyles:m,getShortEndedElements:v,getTextBlockElements:x,getTextInlineElements:T,getBoolAttrs:b,getElementRule:M,getSelfClosingElements:h,getNonEmptyElements:w,getMoveCaretBeforeOnEnterElements:y,getWhiteSpaceElements:p,getSpecialElements:R,isValidChild:function(e,t){e=i[e.toLowerCase()];return!(!e||!e[t.toLowerCase()])},isValid:function(e,t){var n,r,o=M(e);if(o){if(!t)return!0;if(o.attributes[t])return!0;if(n=o.attributePatterns)for(r=n.length;r--;)if(n[r].pattern.test(e))return!0}return!1},getCustomElements:z,addValidElements:E,setValidElements:_,addCustomElements:A,addValidChildren:D}}function fo(e,t,n,r){function o(e){return 1<(e=parseInt(e,10).toString(16)).length?e:"0"+e}return"#"+o(t)+o(n)+o(r)}function mo(v,e){var a,o,b=this,y=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,w=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,x=/\s*([^:]+):\s*([^;]+);?/g,C=/\s+$/,S={},k=Eo;v=v||{},e&&(a=e.getValidStyles(),o=e.getInvalidStyles());for(var t=("\\\" \\' \\; \\: ; : "+k).split(" "),T=0;T<t.length;T++)S[t[T]]=k+T,S[k+T]=t[T];return{toHex:function(e){return e.replace(y,fo)},parse:function(e){function t(e,t,n){var r=g[e+"-top"+t];if(r){var o=g[e+"-right"+t];if(o){var i=g[e+"-bottom"+t];if(i){var u=g[e+"-left"+t];if(u){var a=[r,o,i,u];for(T=a.length-1;T--&&a[T]===a[T+1];);-1<T&&n||(g[e+t]=-1===T?a[0]:a.join(" "),delete g[e+"-top"+t],delete g[e+"-right"+t],delete g[e+"-bottom"+t],delete g[e+"-left"+t])}}}}}function n(e){var t,n=g[e];if(n){for(t=(n=n.split(" ")).length;t--;)if(n[t]!==n[0])return;return g[e]=n[0],1}}function r(e){return l=!0,S[e]}function u(e,t){return l&&(e=e.replace(/\uFEFF[0-9]/g,function(e){return S[e]})),t?e:e.replace(/\\([\'\";:])/g,"$1")}function o(e){return String.fromCharCode(parseInt(e.slice(1),16))}function i(e){return e.replace(/\\[0-9a-f]+/gi,o)}function a(e,t,n,r,o,i){if(o=o||i)return"'"+(o=u(o)).replace(/\'/g,"\\'")+"'";if(t=u(t||n||r),!v.allow_script_urls){i=t.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(i))return"";if(!v.allow_svg_data_urls&&/^data:image\/svg/i.test(i))return""}return"url('"+(t=p?p.call(h,t,"style"):t).replace(/\'/g,"\\'")+"')"}var c,s,l,f,d,m,g={},p=v.url_converter,h=v.url_converter_scope||b;if(e){for(e=(e=e.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,r).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(e){return e.replace(/[;:]/g,r)});s=x.exec(e);)x.lastIndex=s.index+s[0].length,c=s[1].replace(C,"").toLowerCase(),s=s[2].replace(C,""),c&&s&&(c=i(c),s=i(s),-1===c.indexOf(k))&&-1===c.indexOf('"')&&(v.allow_script_urls||"behavior"!==c&&!/expression\s*\(|\/\*|\*\//.test(s))&&("font-weight"===c&&"700"===s?s="bold":"color"!==c&&"background-color"!==c||(s=s.toLowerCase()),s=(s=s.replace(y,fo)).replace(w,a),g[c]=l?u(s,!0):s);t("border","",!0),t("border","-width"),t("border","-color"),t("border","-style"),t("padding",""),t("margin",""),d="border-style",m="border-color",n(f="border-width")&&n(d)&&n(m)&&(g.border=g[f]+" "+g[d]+" "+g[m],delete g[f],delete g[d],delete g[m]),"medium none"===g.border&&delete g.border,"none"===g["border-image"]&&delete g["border-image"]}return g},serialize:function(i,r){function e(e){var t,n=a[e];if(n)for(var r=0,o=n.length;r<o;r++)e=n[r],(t=i[e])&&(u+=(0<u.length?" ":"")+e+": "+t+";")}var u="";return r&&a?(e("*"),e(r)):q(i,function(e,t){var n;!e||o&&((n=o["*"])&&n[t]||(n=o[r])&&n[t])||(u+=(0<u.length?" ":"")+t+": "+e+";")}),u}}}function go(e){return e instanceof Event||O(e.initEvent)}function po(e,t,n,r){var o=function(e){var t,n=null!=r?r:{};for(t in e)re(mi,t)||(n[t]=e[t]);return ne(n.composedPath)&&(n.composedPath=function(){return e.composedPath()}),n}(t);return o.type=e,Y(o.target)&&(o.target=null!=(e=o.srcElement)?e:n),(Y((e=t).preventDefault)||go(e))&&(o.preventDefault=function(){o.defaultPrevented=!0,o.isDefaultPrevented=C,O(t.preventDefault)?t.preventDefault():go(t)&&(t.returnValue=!1)},o.stopPropagation=function(){o.cancelBubble=!0,o.isPropagationStopped=C,O(t.stopPropagation)?t.stopPropagation():go(t)&&(t.cancelBubble=!0)},o.stopImmediatePropagation=function(){o.isImmediatePropagationStopped=C,o.stopPropagation()},o.isDefaultPrevented!==C)&&o.isDefaultPrevented!==ge&&(o.isDefaultPrevented=!0===o.defaultPrevented?C:ge,o.isPropagationStopped=!0===o.cancelBubble?C:ge,o.isImmediatePropagationStopped=ge),o}function ho(e,t,n,r){e.addEventListener?e.addEventListener(t,n,r||!1):e.attachEvent&&e.attachEvent("on"+t,n)}function vo(e,t,n,r){e.removeEventListener?e.removeEventListener(t,n,r||!1):e.detachEvent&&e.detachEvent("on"+t,n)}function bo(e,t){var n,r,t=po(e.type,e,document,t);return ne(r=e)&&gi.test(r.type)&&y(e.pageX)&&!y(e.clientX)&&(n=(r=t.target.ownerDocument||document).documentElement,r=r.body,t.pageX=e.clientX+(n&&n.scrollLeft||r&&r.scrollLeft||0)-(n&&n.clientLeft||r&&r.clientLeft||0),t.pageY=e.clientY+(n&&n.scrollTop||r&&r.scrollTop||0)-(n&&n.clientTop||r&&r.clientTop||0)),y(t.metaKey)&&(t.metaKey=!1),t}var yo=Lr(["h1","h2","h3","h4","h5","h6"]),wo=Lr(["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"]),xo=Lr(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),Co=Lr(["ul","ol","dl"]),So=Lr(["li","dd","dt"]),ko=Lr(["thead","tbody","tfoot"]),To=Lr(["td","th"]),Oo=Lr(["pre","script","textarea","style"]),Eo="\ufeff",_o="",Ao=Eo,Do=function(e){return e===Eo},Mo=function(e){return e.replace(/\uFEFF/g,"")},No=G,Ro=B,zo=function(e){return Ro(e)&&e.data[0]===Ao},Bo=function(e){return Ro(e)&&e.data[e.data.length-1]===Ao},Po=tr,Io=D,Lo=A,Fo=B,Ho=pn(["script","style","textarea"]),Vo=pn(["img","input","textarea","hr","iframe","video","audio","object","embed"]),jo=pn(["table"]),Uo=Ur,Wo=function(e){return!1===(G(t=e)&&"true"===t.getAttribute("unselectable"))&&Io(e);var t},$o=/^[ \t\r\n]*$/,qo=vn("data-mce-bookmark"),Go=vn("data-mce-bogus"),Ko=function(e){return G(e)&&"all"===e.getAttribute("data-mce-bogus")},Xo=function(e,t,n){var r=n||t;if(!G(t)||!to(t)){for(var o,i,u=t.childNodes,a=u.length-1;0<=a;a--)Xo(e,u[a],r);G(t)&&1===(n=t.childNodes).length&&to(n[0])&&t.parentNode.insertBefore(n[0],t),Qn(n=t)||Zn(n)||Zr(t,r)||G(n=t)&&0<n.childNodes.length||(n=r,B(i=t)&&0<i.data.length&&(o=new Pr(i=i,n=n).prev(!1),i=new Pr(i,n).next(!1),o=y(o)||eo(o,n),i=y(i)||eo(i,n),o)&&i)||e.remove(t)}return t},Yo=we.makeMap,Jo=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Zo=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Qo=/[<>&\"\']/g,ei=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,ti={128:"",130:"",131:"",132:"",133:"",134:"",135:"",136:"",137:"",138:"",139:"",140:"",142:"",145:"",146:"",147:"",148:"",149:"",150:"",151:"",152:"",153:"",154:"",155:"",156:"",158:"",159:""},ni={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},ri={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},oi=no("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),ii={encodeRaw:ro,encodeAllRaw:function(e){return(""+e).replace(Qo,function(e){return ni[e]||e})},encodeNumeric:oo,encodeNamed:io,getEncodeFunc:function(e,t){var n=no(t)||oi,e=Yo(e.replace(/\+/g,","));return e.named&&e.numeric?function(e,t){return e.replace(t?Jo:Zo,function(e){return void 0!==ni[e]?ni[e]:void 0!==n[e]?n[e]:1<e.length?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":"&#"+e.charCodeAt(0)+";"})}:e.named?t?function(e,t){return io(e,t,n)}:io:e.numeric?oo:ro},decode:function(e){return e.replace(ei,function(e,t){return t?65535<(t="x"===t.charAt(0).toLowerCase()?parseInt(t.substr(1),16):parseInt(t,10))?(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t))):ti[t]||String.fromCharCode(t):ri[e]||oi[e]||(t=e,(e=xe.fromTag("div").dom).innerHTML=t,e.textContent)||e.innerText||t})}},ui={},ai={},ci=we.makeMap,si=we.each,li=we.extend,fi=we.explode,di=we.inArray,mi={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},gi=/^(?:mouse|contextmenu)|click/,pi=(hi.prototype.bind=function(e,t,n,r){function o(e){f.executeHandlers(bo(e||d.event),i)}var i,u,a,c,s,l,f=this,d=window;if(e&&3!==e.nodeType&&8!==e.nodeType){e[f.expando]?i=e[f.expando]:(i=f.count++,e[f.expando]=i,f.events[i]={}),r=r||e;for(var m=t.split(" "),g=m.length;g--;)s=o,c=l=!1,"DOMContentLoaded"===(a=m[g])&&(a="ready"),f.domLoaded&&"ready"===a&&"complete"===e.readyState?n.call(r,bo({type:a})):(f.hasMouseEnterLeave||(c=f.mouseEnterLeave[a])&&(s=function(e){var t=e.currentTarget,n=e.relatedTarget;if(n&&t.contains)n=t.contains(n);else for(;n&&n!==t;)n=n.parentNode;n||((e=bo(e||d.event)).type="mouseout"===e.type?"mouseleave":"mouseenter",e.target=t,f.executeHandlers(e,i))}),f.hasFocusIn||"focusin"!==a&&"focusout"!==a||(l=!0,c="focusin"===a?"focus":"blur",s=function(e){(e=bo(e||d.event)).type="focus"===e.type?"focusin":"focusout",f.executeHandlers(e,i)}),(u=f.events[i][a])?"ready"===a&&f.domLoaded?n(bo({type:a})):u.push({func:n,scope:r}):(f.events[i][a]=u=[{func:n,scope:r}],u.fakeName=c,u.capture=l,u.nativeHandler=s,"ready"===a?function(e,t,n){var r,o=e.document,i={type:"ready"};n.domLoaded?t(i):(r=function(){vo(e,"DOMContentLoaded",r),vo(e,"load",r),n.domLoaded||(n.domLoaded=!0,t(i)),e=null},"complete"===o.readyState||"interactive"===o.readyState&&o.body?r():ho(e,"DOMContentLoaded",r),n.domLoaded||ho(e,"load",r))}(e,s,f):ho(e,c||a,s,l)));return e=u=null,n}},hi.prototype.unbind=function(n,e,t){var r,o,i;if(n&&3!==n.nodeType&&8!==n.nodeType){var u=n[this.expando];if(u){if(i=this.events[u],e){for(var a,c,s,l,f=e.split(" "),d=f.length;d--;)if(l=i[o=f[d]]){if(t)for(r=l.length;r--;)l[r].func===t&&(a=l.nativeHandler,c=l.fakeName,s=l.capture,(l=l.slice(0,r).concat(l.slice(r+1))).nativeHandler=a,l.fakeName=c,l.capture=s,i[o]=l);t&&0!==l.length||(delete i[o],vo(n,l.fakeName||o,l.nativeHandler,l.capture))}}else q(i,function(e,t){vo(n,e.fakeName||t,e.nativeHandler,e.capture)}),i={};for(o in i)if(re(i,o))return this;delete this.events[u];try{delete n[this.expando]}catch(e){n[this.expando]=null}}}return this},hi.prototype.fire=function(e,t,n){var r;if(e&&3!==e.nodeType&&8!==e.nodeType)for(var o=bo({type:t,target:e},n);(r=e[this.expando])&&this.executeHandlers(o,r),(e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow)&&!o.isPropagationStopped(););return this},hi.prototype.clean=function(e){var t,n;if(e&&3!==e.nodeType&&8!==e.nodeType&&(e[this.expando]&&this.unbind(e),e=e.getElementsByTagName?e:e.document)&&e.getElementsByTagName)for(this.unbind(e),t=(n=e.getElementsByTagName("*")).length;t--;)(e=n[t])[this.expando]&&this.unbind(e);return this},hi.prototype.destroy=function(){this.events={}},hi.prototype.cancel=function(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1},hi.prototype.executeHandlers=function(e,t){var t=this.events[t],n=t&&t[e.type];if(n)for(var r=0,o=n.length;r<o;r++){var i=n[r];if(i&&!1===i.func.call(i.scope,e)&&e.preventDefault(),e.isImmediatePropagationStopped())return}},hi.Event=new hi,hi);function hi(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasMouseEnterLeave="onmouseenter"in document.documentElement,this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}function vi(e,t,n){var r="0x"+t-65536;return r!=r||n?t:r<0?String.fromCharCode(65536+r):String.fromCharCode(r>>10|55296,1023&r|56320)}var bi,w,yi,wi,xi,Ci,Si,ki,Ti,Oi,Ei,_i,Ai,Di,Mi,Ni,Ri,zi="sizzle"+-new Date,Bi=window.document,Pi=0,Ii=0,Li=su(),Fi=su(),Hi=su(),Vi=function(e,t){return e===t&&(Oi=!0),0},ji="undefined",Ui={}.hasOwnProperty,zt=[],Wi=zt.pop,$i=zt.push,qi=zt.push,Gi=zt.slice,Ki=zt.indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(this[t]===e)return t;return-1},n="[\\x20\\t\\r\\n\\f]",xt="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",t="\\["+n+"*("+xt+")(?:"+n+"*([*^$|!~]?=)"+n+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+xt+"))|)"+n+"*\\]",Nt=":("+xt+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+t+")*)|.*)\\)|)",Xi=new RegExp("^"+n+"+|((?:^|[^\\\\])(?:\\\\.)*)"+n+"+$","g"),Yi=new RegExp("^"+n+"*,"+n+"*"),Ji=new RegExp("^"+n+"*([>+~]|"+n+")"+n+"*"),Zi=new RegExp("="+n+"*([^\\]'\"]*?)"+n+"*\\]","g"),Qi=new RegExp(Nt),eu=new RegExp("^"+xt+"$"),tu={ID:new RegExp("^#("+xt+")"),CLASS:new RegExp("^\\.("+xt+")"),TAG:new RegExp("^("+xt+"|[*])"),ATTR:new RegExp("^"+t),PSEUDO:new RegExp("^"+Nt),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+n+"*(even|odd|(([+-]|)(\\d*)n|)"+n+"*(?:([+-]|)"+n+"*(\\d+)|))"+n+"*\\)|)","i"),bool:new RegExp("^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$","i"),needsContext:new RegExp("^"+n+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+n+"*((?:-\\d)?\\d*)"+n+"*\\)|)(?=[^-]|$)","i")},nu=/^(?:input|select|textarea|button)$/i,ru=/^h\d$/i,ou=/^[^{]+\{\s*\[native \w/,iu=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,uu=/[+~]/,au=/'|\\/g,cu=new RegExp("\\\\([\\da-f]{1,6}"+n+"?|("+n+")|.)","ig");try{qi.apply(zt=Gi.call(Bi.childNodes),Bi.childNodes),zt[Bi.childNodes.length].nodeType}catch(i){qi={apply:zt.length?function(e,t){$i.apply(e,Gi.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function K(e,t,n,r){var o,i,u,a,c,s,l;if((t?t.ownerDocument||t:Bi)!==_i&&Ei(t),n=n||[],!e||"string"!=typeof e)return n;if(1!==(o=(t=t||_i).nodeType)&&9!==o)return[];if(Di&&!r){if(s=iu.exec(e))if(l=s[1]){if(9===o){if(!(a=t.getElementById(l))||!a.parentNode)return n;if(a.id===l)return n.push(a),n}else if(t.ownerDocument&&(a=t.ownerDocument.getElementById(l))&&Ri(t,a)&&a.id===l)return n.push(a),n}else{if(s[2])return qi.apply(n,t.getElementsByTagName(e)),n;if((l=s[3])&&bi.getElementsByClassName)return qi.apply(n,t.getElementsByClassName(l)),n}if(bi.qsa&&(!Mi||!Mi.test(e))){if(c=a=zi,s=t,l=9===o&&e,1===o&&"object"!==t.nodeName.toLowerCase()){for(u=xi(e),(a=t.getAttribute("id"))?c=a.replace(au,"\\$&"):t.setAttribute("id",c),c="[id='"+c+"'] ",i=u.length;i--;)u[i]=c+pu(u[i]);s=uu.test(e)&&mu(t.parentNode)||t,l=u.join(",")}if(l)try{return qi.apply(n,s.querySelectorAll(l)),n}catch(e){}finally{a||t.removeAttribute("id")}}}return Si(e.replace(Xi,"$1"),t,n,r)}function su(){var n=[];function r(e,t){return n.push(e+" ")>w.cacheLength&&delete r[n.shift()],r[e+" "]=t}return r}function lu(e){return e[zi]=!0,e}function fu(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||1<<31)-(~e.sourceIndex||1<<31);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function du(u){return lu(function(i){return i=+i,lu(function(e,t){for(var n,r=u([],e.length,i),o=r.length;o--;)e[n=r[o]]&&(e[n]=!(t[n]=e[n]))})})}function mu(e){return e&&typeof e.getElementsByTagName!=ji&&e}function gu(){}function pu(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function hu(u,e,t){var a=e.dir,c=t&&"parentNode"===a,s=Ii++;return e.first?function(e,t,n){for(;e=e[a];)if(1===e.nodeType||c)return u(e,t,n)}:function(e,t,n){var r,o,i=[Pi,s];if(n){for(;e=e[a];)if((1===e.nodeType||c)&&u(e,t,n))return!0}else for(;e=e[a];)if(1===e.nodeType||c){if((r=(o=e[zi]||(e[zi]={}))[a])&&r[0]===Pi&&r[1]===s)return i[2]=r[2];if((o[a]=i)[2]=u(e,t,n))return!0}}}function vu(o){return 1<o.length?function(e,t,n){for(var r=o.length;r--;)if(!o[r](e,t,n))return!1;return!0}:o[0]}function bu(e,t,n,r,o){for(var i,u=[],a=0,c=e.length,s=null!=t;a<c;a++)!(i=e[a])||n&&!n(i,r,o)||(u.push(i),s&&t.push(a));return u}function yu(e){return void 0!==e}function wu(e){return"string"==typeof e}function xu(e,t){var n,r=(t=t||Du).createElement("div"),o=t.createDocumentFragment();for(r.innerHTML=e;n=r.firstChild;)o.appendChild(n);return o}function Cu(e,t){return e&&t&&-1!==(" "+e.className+" ").indexOf(" "+t+" ")}function Su(e,t,n){var r,o;return t=X(t)[0],e.each(function(){n&&r===this.parentNode||(r=this.parentNode,o=t.cloneNode(!1),this.parentNode.insertBefore(o,this)),o.appendChild(this)}),e}function ku(e,t){return new X.fn.init(e,t)}function Tu(e){return null==e?"":(""+e).replace(ju,"")}function Ou(e,t){var n,r,o,i;if(e)if(void 0===(n=e.length)){for(r in e)if(e.hasOwnProperty(r)&&(i=e[r],!1===t.call(i,r,i)))break}else for(o=0;o<n&&(i=e[o],!1!==t.call(i,o,i));o++);return e}function Eu(e,n){var r=[];return Ou(e,function(e,t){n(t,e)&&r.push(t)}),r}bi=K.support={},wi=K.isXML=function(e){e=e&&(e.ownerDocument||e).documentElement;return!!e&&"HTML"!==e.nodeName},Ei=K.setDocument=function(e){var c=e?e.ownerDocument||e:Bi,e=c.defaultView;return c!==_i&&9===c.nodeType&&c.documentElement?(Ai=(_i=c).documentElement,Di=!wi(c),e&&e!==function(e){try{return e.top}catch(e){}return null}(e)&&(e.addEventListener?e.addEventListener("unload",function(){Ei()},!1):e.attachEvent&&e.attachEvent("onunload",function(){Ei()})),bi.attributes=!0,bi.getElementsByTagName=!0,bi.getElementsByClassName=ou.test(c.getElementsByClassName),bi.getById=!0,w.find.ID=function(e,t){if(typeof t.getElementById!=ji&&Di)return(t=t.getElementById(e))&&t.parentNode?[t]:[]},w.filter.ID=function(e){var t=e.replace(cu,vi);return function(e){return e.getAttribute("id")===t}},w.find.TAG=bi.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!=ji)return t.getElementsByTagName(e)}:function(e,t){var n,r=[],o=0,i=t.getElementsByTagName(e);if("*"!==e)return i;for(;n=i[o++];)1===n.nodeType&&r.push(n);return r},w.find.CLASS=bi.getElementsByClassName&&function(e,t){if(Di)return t.getElementsByClassName(e)},Ni=[],Mi=[],bi.disconnectedMatch=!0,Mi=Mi.length&&new RegExp(Mi.join("|")),Ni=Ni.length&&new RegExp(Ni.join("|")),e=ou.test(Ai.compareDocumentPosition),Ri=e||ou.test(Ai.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,t=t&&t.parentNode;return e===t||!(!t||1!==t.nodeType||!(n.contains?n.contains(t):e.compareDocumentPosition&&16&e.compareDocumentPosition(t)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},Vi=e?function(e,t){return e===t?(Oi=!0,0):!e.compareDocumentPosition-!t.compareDocumentPosition||(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!bi.sortDetached&&t.compareDocumentPosition(e)===n?e===c||e.ownerDocument===Bi&&Ri(Bi,e)?-1:t===c||t.ownerDocument===Bi&&Ri(Bi,t)?1:Ti?Ki.call(Ti,e)-Ki.call(Ti,t):0:4&n?-1:1);var n}:function(e,t){if(e===t)return Oi=!0,0;var n,r=0,o=e.parentNode,i=t.parentNode,u=[e],a=[t];if(!o||!i)return e===c?-1:t===c?1:o?-1:i?1:Ti?Ki.call(Ti,e)-Ki.call(Ti,t):0;if(o===i)return fu(e,t);for(n=e;n=n.parentNode;)u.unshift(n);for(n=t;n=n.parentNode;)a.unshift(n);for(;u[r]===a[r];)r++;return r?fu(u[r],a[r]):u[r]===Bi?-1:a[r]===Bi?1:0},c):_i},K.matches=function(e,t){return K(e,null,null,t)},K.matchesSelector=function(e,t){if((e.ownerDocument||e)!==_i&&Ei(e),t=t.replace(Zi,"='$1']"),bi.matchesSelector&&Di&&(!Ni||!Ni.test(t))&&(!Mi||!Mi.test(t)))try{var n=(void 0).call(e,t);if(n||bi.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){}return 0<K(t,_i,null,[e]).length},K.contains=function(e,t){return(e.ownerDocument||e)!==_i&&Ei(e),Ri(e,t)},K.attr=function(e,t){(e.ownerDocument||e)!==_i&&Ei(e);var n=w.attrHandle[t.toLowerCase()],n=n&&Ui.call(w.attrHandle,t.toLowerCase())?n(e,t,!Di):void 0;return void 0!==n?n:bi.attributes||!Di?e.getAttribute(t):(n=e.getAttributeNode(t))&&n.specified?n.value:null},K.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},K.uniqueSort=function(e){var t,n=[],r=0,o=0;if(Oi=!bi.detectDuplicates,Ti=!bi.sortStable&&e.slice(0),e.sort(Vi),Oi){for(;t=e[o++];)t===e[o]&&(r=n.push(o));for(;r--;)e.splice(n[r],1)}return Ti=null,e},yi=K.getText=function(e){var t,n="",r=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=yi(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[r++];)n+=yi(t);return n},(w=K.selectors={cacheLength:50,createPseudo:lu,match:tu,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(cu,vi),e[3]=(e[3]||e[4]||e[5]||"").replace(cu,vi),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||K.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&K.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return tu.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&Qi.test(n)&&(t=(t=xi(n,!0))&&n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(cu,vi).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=Li[e+" "];return t||(t=new RegExp("(^|"+n+")"+e+"("+n+"|$)"))&&Li(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!=ji&&e.getAttribute("class")||"")})},ATTR:function(t,n,r){return function(e){e=K.attr(e,t);return null==e?"!="===n:!n||(e+="","="===n?e===r:"!="===n?e!==r:"^="===n?r&&0===e.indexOf(r):"*="===n?r&&-1<e.indexOf(r):"$="===n?r&&e.slice(-r.length)===r:"~="===n?-1<(" "+e+" ").indexOf(r):"|="===n&&(e===r||e.slice(0,r.length+1)===r+"-"))}},CHILD:function(m,e,t,g,p){var h="nth"!==m.slice(0,3),v="last"!==m.slice(-4),b="of-type"===e;return 1===g&&0===p?function(e){return!!e.parentNode}:function(e,t,n){var r,o,i,u,a,c,s=h!=v?"nextSibling":"previousSibling",l=e.parentNode,f=b&&e.nodeName.toLowerCase(),d=!n&&!b;if(l){if(h){for(;s;){for(i=e;i=i[s];)if(b?i.nodeName.toLowerCase()===f:1===i.nodeType)return!1;c=s="only"===m&&!c&&"nextSibling"}return!0}if(c=[v?l.firstChild:l.lastChild],v&&d){for(a=(r=(o=l[zi]||(l[zi]={}))[m]||[])[0]===Pi&&r[1],u=r[0]===Pi&&r[2],i=a&&l.childNodes[a];i=++a&&i&&i[s]||(u=a=0,c.pop());)if(1===i.nodeType&&++u&&i===e){o[m]=[Pi,a,u];break}}else if(d&&(r=(e[zi]||(e[zi]={}))[m])&&r[0]===Pi)u=r[1];else for(;(i=++a&&i&&i[s]||(u=a=0,c.pop()))&&((b?i.nodeName.toLowerCase()!==f:1!==i.nodeType)||!++u||(d&&((i[zi]||(i[zi]={}))[m]=[Pi,u]),i!==e)););return(u-=p)===g||u%g==0&&0<=u/g}}},PSEUDO:function(e,i){var t,u=w.pseudos[e]||w.setFilters[e.toLowerCase()]||K.error("unsupported pseudo: "+e);return u[zi]?u(i):1<u.length?(t=[e,e,"",i],w.setFilters.hasOwnProperty(e.toLowerCase())?lu(function(e,t){for(var n,r=u(e,i),o=r.length;o--;)e[n=Ki.call(e,r[o])]=!(t[n]=r[o])}):function(e){return u(e,0,t)}):u}},pseudos:{not:lu(function(e){var r=[],o=[],a=Ci(e.replace(Xi,"$1"));return a[zi]?lu(function(e,t,n,r){for(var o,i=a(e,null,r,[]),u=e.length;u--;)(o=i[u])&&(e[u]=!(t[u]=o))}):function(e,t,n){return r[0]=e,a(r,null,n,o),r[0]=null,!o.pop()}}),has:lu(function(t){return function(e){return 0<K(t,e).length}}),contains:lu(function(t){return t=t.replace(cu,vi),function(e){return-1<(e.textContent||e.innerText||yi(e)).indexOf(t)}}),lang:lu(function(n){return eu.test(n||"")||K.error("unsupported lang: "+n),n=n.replace(cu,vi).toLowerCase(),function(e){var t;do{if(t=Di?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=window.location&&window.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===Ai},focus:function(e){return e===_i.activeElement&&(!_i.hasFocus||_i.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!w.pseudos.empty(e)},header:function(e){return ru.test(e.nodeName)},input:function(e){return nu.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(e=e.getAttribute("type"))||"text"===e.toLowerCase())},first:du(function(){return[0]}),last:du(function(e,t){return[t-1]}),eq:du(function(e,t,n){return[n<0?n+t:n]}),even:du(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:du(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:du(function(e,t,n){for(var r=n<0?n+t:n;0<=--r;)e.push(r);return e}),gt:du(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=w.pseudos.eq,pe(["radio","checkbox","file","password","image"],function(e){var t;w.pseudos[e]=(t=e,function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t})}),pe(["submit","reset"],function(e){var n;w.pseudos[e]=(n=e,function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n})}),gu.prototype=w.filters=w.pseudos,w.setFilters=new gu,xi=K.tokenize=function(e,t){var n,r,o,i,u,a,c,s=Fi[e+" "];if(s)return t?0:s.slice(0);for(u=e,a=[],c=w.preFilter;u;){for(i in n&&!(r=Yi.exec(u))||(r&&(u=u.slice(r[0].length)||u),a.push(o=[])),n=!1,(r=Ji.exec(u))&&(n=r.shift(),o.push({value:n,type:r[0].replace(Xi," ")}),u=u.slice(n.length)),w.filter)!w.filter.hasOwnProperty(i)||!(r=tu[i].exec(u))||c[i]&&!(r=c[i](r))||(n=r.shift(),o.push({value:n,type:i,matches:r}),u=u.slice(n.length));if(!n)break}return t?u.length:u?K.error(e):Fi(e,a).slice(0)},Ci=K.compile=function(e,t){var n,h,v,b,y,r=[],o=[],i=Hi[e+" "];if(!i){for(n=(t=t||xi(e)).length;n--;)((i=function e(t){for(var r,n,o,i=t.length,u=w.relative[t[0].type],a=u||w.relative[" "],c=u?1:0,s=hu(function(e){return e===r},a,!0),l=hu(function(e){return-1<Ki.call(r,e)},a,!0),f=[function(e,t,n){e=!u&&(n||t!==ki)||((r=t).nodeType?s:l)(e,t,n);return r=null,e}];c<i;c++)if(n=w.relative[t[c].type])f=[hu(vu(f),n)];else{if((n=w.filter[t[c].type].apply(null,t[c].matches))[zi]){for(o=++c;o<i&&!w.relative[t[o].type];o++);return function e(m,g,p,h,v,t){return h&&!h[zi]&&(h=e(h)),v&&!v[zi]&&(v=e(v,t)),lu(function(e,t,n,r){var o,i,u,a=[],c=[],s=t.length,l=e||function(e,t,n){for(var r=0,o=t.length;r<o;r++)K(e,t[r],n);return n}(g||"*",n.nodeType?[n]:n,[]),f=!m||!e&&g?l:bu(l,a,m,n,r),d=p?v||(e?m:s||h)?[]:t:f;if(p&&p(f,d,n,r),h)for(o=bu(d,c),h(o,[],n,r),i=o.length;i--;)(u=o[i])&&(d[c[i]]=!(f[c[i]]=u));if(e){if(v||m){if(v){for(o=[],i=d.length;i--;)(u=d[i])&&o.push(f[i]=u);v(null,d=[],o,r)}for(i=d.length;i--;)(u=d[i])&&-1<(o=v?Ki.call(e,u):a[i])&&(e[o]=!(t[o]=u))}}else d=bu(d===t?d.splice(s,d.length):d),v?v(null,t,d,r):qi.apply(t,d)})}(1<c&&vu(f),1<c&&pu(t.slice(0,c-1).concat({value:" "===t[c-2].type?"*":""})).replace(Xi,"$1"),n,c<o&&e(t.slice(c,o)),o<i&&e(t=t.slice(o)),o<i&&pu(t))}f.push(n)}return vu(f)}(t[n]))[zi]?r:o).push(i);(i=Hi(e,(b=0<(v=r).length,y=0<(h=o).length,b?lu(u):u))).selector=e}function u(e,t,n,r,o){var i,u,a,c=0,s="0",l=e&&[],f=[],d=ki,m=e||y&&w.find.TAG("*",o),g=Pi+=null==d?1:Math.random()||.1,p=m.length;for(o&&(ki=t!==_i&&t);s!==p&&null!=(i=m[s]);s++){if(y&&i){for(u=0;a=h[u++];)if(a(i,t,n)){r.push(i);break}o&&(Pi=g)}b&&((i=!a&&i)&&c--,e)&&l.push(i)}if(c+=s,b&&s!==c){for(u=0;a=v[u++];)a(l,f,t,n);if(e){if(0<c)for(;s--;)l[s]||f[s]||(f[s]=Wi.call(r));f=bu(f)}qi.apply(r,f),o&&!e&&0<f.length&&1<c+v.length&&K.uniqueSort(r)}return o&&(Pi=g,ki=d),l}return i},Si=K.select=function(e,t,n,r){var o,i,u,a,c,s="function"==typeof e&&e,l=!r&&xi(e=s.selector||e);if(n=n||[],1===l.length){if(2<(i=l[0]=l[0].slice(0)).length&&"ID"===(u=i[0]).type&&bi.getById&&9===t.nodeType&&Di&&w.relative[i[1].type]){if(!(t=(w.find.ID(u.matches[0].replace(cu,vi),t)||[])[0]))return n;s&&(t=t.parentNode),e=e.slice(i.shift().value.length)}for(o=tu.needsContext.test(e)?0:i.length;o--&&(u=i[o],!w.relative[a=u.type]);)if((c=w.find[a])&&(r=c(u.matches[0].replace(cu,vi),uu.test(i[0].type)&&mu(t.parentNode)||t))){if(i.splice(o,1),e=r.length&&pu(i))break;return qi.apply(n,r),n}}return(s||Ci(e,l))(r,t,!Di,n,uu.test(e)&&mu(t.parentNode)||t),n},bi.sortStable=zi.split("").sort(Vi).join("")===zi,bi.detectDuplicates=!!Oi,Ei(),bi.sortDetached=!0;function _u(e,t,n,r){var o;if(wu(t))t=xu(t,Au(e[0]));else if(t.length&&!t.nodeType){if(t=X.makeArray(t),r)for(o=t.length-1;0<=o;o--)_u(e,t[o],n,r);else for(o=0;o<t.length;o++)_u(e,t[o],n,r);return e}if(t.nodeType)for(o=e.length;o--;)n.call(e[o],t);return e}function Au(e){return e?9===e.nodeType?e:e.ownerDocument:Du}var Du=document,Mu=Array.prototype.push,Nu=Array.prototype.slice,Ru=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,zu=pi.Event,Bu=we.makeMap("children,contents,next,prev"),Pu=we.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),Iu=we.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),Lu={for:"htmlFor",class:"className",readonly:"readOnly"},Fu={float:"cssFloat"},Hu={},Vu={},ju=/^\s*|\s*$/g;function Uu(e,t,n){var r=[],o=e[t];for("string"!=typeof n&&n instanceof X&&(n=n[0]);o&&9!==o.nodeType;){if(void 0!==n){if(o===n)break;if("string"==typeof n&&X(o).is(n))break}1===o.nodeType&&r.push(o),o=o[t]}return r}function Wu(e,t,n,r){var o=[];for(r instanceof X&&(r=r[0]);e;e=e[t])if(!n||e.nodeType===n){if(void 0!==r){if(e===r)break;if("string"==typeof r&&X(e).is(r))break}o.push(e)}return o}function $u(e,t,n){for(e=e[t];e;e=e[t])if(e.nodeType===n)return e;return null}function qu(e,t){var n=t.attr("style"),e=e.serialize(e.parse(n),t[0].nodeName)||null;t.attr("data-mce-style",e)}function Gu(e,t){var n,r,o=0;if(e)for(n=e.nodeType,e=e.previousSibling;e;e=e.previousSibling)r=e.nodeType,(!t||3!==r||r!==n&&e.nodeValue.length)&&(o++,n=r);return o}ku.fn=ku.prototype={constructor:ku,selector:"",context:null,length:0,init:function(e,t){var n,r,o=this;if(e)if(e.nodeType)o.context=o[0]=e,o.length=1;else{if(t&&t.nodeType)o.context=t;else{if(t)return X(e).attr(t);o.context=t=document}if(wu(e)){if(!(n="<"===(o.selector=e).charAt(0)&&">"===e.charAt(e.length-1)&&3<=e.length?[null,e,null]:Ru.exec(e)))return X(t).find(e);if(n[1])for(r=xu(e,Au(t)).firstChild;r;)Mu.call(o,r),r=r.nextSibling;else{if(!(r=Au(t).getElementById(n[2])))return o;if(r.id!==n[2])return o.find(e);o.length=1,o[0]=r}}else this.add(e,!1)}return o},toArray:function(){return we.toArray(this)},add:function(e,t){var n,r;if(wu(e))return this.add(X(e));if(!1!==t)for(n=X.unique(this.toArray().concat(X.makeArray(e))),this.length=n.length,r=0;r<n.length;r++)this[r]=n[r];else Mu.apply(this,X.makeArray(e));return this},attr:function(t,n){var e,r=this;if("object"==typeof t)Ou(t,function(e,t){r.attr(e,t)});else{if(!yu(n)){if(r[0]&&1===r[0].nodeType){if((e=Hu[t])&&e.get)return e.get(r[0],t);if(Iu[t])return r.prop(t)?t:void 0;null===(n=r[0].getAttribute(t,2))&&(n=void 0)}return n}this.each(function(){var e;1===this.nodeType&&((e=Hu[t])&&e.set?e.set(this,n):null===n?this.removeAttribute(t,2):this.setAttribute(t,n,2))})}return r},removeAttr:function(e){return this.attr(e,null)},prop:function(e,t){var n=this;if("object"==typeof(e=Lu[e]||e))Ou(e,function(e,t){n.prop(e,t)});else{if(!yu(t))return n[0]&&n[0].nodeType&&e in n[0]?n[0][e]:t;this.each(function(){1===this.nodeType&&(this[e]=t)})}return n},css:function(t,n){function e(e){return e.replace(/-(\D)/g,function(e,t){return t.toUpperCase()})}function r(e){return e.replace(/[A-Z]/g,function(e){return"-"+e})}var o,i,u=this;if("object"==typeof t)Ou(t,function(e,t){u.css(e,t)});else if(yu(n))t=e(t),"number"!=typeof n||Pu[t]||(n=n.toString()+"px"),u.each(function(){var e=this.style;if((i=Vu[t])&&i.set)i.set(this,n);else{try{this.style[Fu[t]||t]=n}catch(e){}null!==n&&""!==n||(e.removeProperty?e.removeProperty(r(t)):e.removeAttribute(t))}});else{if(o=u[0],(i=Vu[t])&&i.get)return i.get(o);if(!o.ownerDocument.defaultView)return o.currentStyle?o.currentStyle[e(t)]:"";try{return o.ownerDocument.defaultView.getComputedStyle(o,null).getPropertyValue(r(t))}catch(e){return}}return u},remove:function(){for(var e,t=this.length;t--;)e=this[t],zu.clean(e),e.parentNode&&e.parentNode.removeChild(e);return this},empty:function(){for(var e,t=this.length;t--;)for(e=this[t];e.firstChild;)e.removeChild(e.firstChild);return this},html:function(t){var n;if(yu(t)){n=this.length;try{for(;n--;)this[n].innerHTML=t}catch(e){X(this[n]).empty().append(t)}return this}return this[0]?this[0].innerHTML:""},text:function(e){var t;if(yu(e)){for(t=this.length;t--;)"innerText"in this[t]?this[t].innerText=e:this[0].textContent=e;return this}return this[0]?this[0].innerText||this[0].textContent:""},append:function(){return _u(this,arguments,function(e){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.appendChild(e)})},prepend:function(){return _u(this,arguments,function(e){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.insertBefore(e,this.firstChild)},!0)},before:function(){return this[0]&&this[0].parentNode?_u(this,arguments,function(e){this.parentNode.insertBefore(e,this)}):this},after:function(){return this[0]&&this[0].parentNode?_u(this,arguments,function(e){this.parentNode.insertBefore(e,this.nextSibling)},!0):this},appendTo:function(e){return X(e).append(this),this},prependTo:function(e){return X(e).prepend(this),this},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){return Su(this,e)},wrapAll:function(e){return Su(this,e,!0)},wrapInner:function(e){return this.each(function(){X(this).contents().wrapAll(e)}),this},unwrap:function(){return this.parent().each(function(){X(this).replaceWith(this.childNodes)})},clone:function(){var e=[];return this.each(function(){e.push(this.cloneNode(!0))}),X(e)},addClass:function(e){return this.toggleClass(e,!0)},removeClass:function(e){return this.toggleClass(e,!1)},toggleClass:function(o,i){var e=this;return"string"==typeof o&&(-1!==o.indexOf(" ")?Ou(o.split(" "),function(){e.toggleClass(this,i)}):e.each(function(e,t){var n,r=Cu(t,o);r!==i&&(n=t.className,r?t.className=Tu((" "+n+" ").replace(" "+o+" "," ")):t.className+=n?" "+o:o)})),e},hasClass:function(e){return Cu(this[0],e)},each:function(e){return Ou(this,e)},on:function(e,t){return this.each(function(){zu.bind(this,e,t)})},off:function(e,t){return this.each(function(){zu.unbind(this,e,t)})},trigger:function(e){return this.each(function(){"object"==typeof e?zu.fire(this,e.type,e):zu.fire(this,e)})},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return X(Nu.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(e){for(var t=[],n=0,r=this.length;n<r;n++)X.find(e,this[n],t);return X(t)},filter:function(n){return X("function"==typeof n?Eu(this.toArray(),function(e,t){return n(t,e)}):X.filter(n,this.toArray()))},closest:function(n){var r=[];return n instanceof X&&(n=n[0]),this.each(function(e,t){for(;t;){if("string"==typeof n&&X(t).is(n)){r.push(t);break}if(t===n){r.push(t);break}t=t.parentNode}}),X(r)},offset:function(e){var t,n,r=0,o=0;return e?this.css(e):((e=this[0])&&(n=(t=e.ownerDocument).documentElement,e.getBoundingClientRect)&&(r=(e=e.getBoundingClientRect()).left+(n.scrollLeft||t.body.scrollLeft)-n.clientLeft,o=e.top+(n.scrollTop||t.body.scrollTop)-n.clientTop),{left:r,top:o})},push:Mu,sort:Array.prototype.sort,splice:Array.prototype.splice},we.extend(ku,{extend:we.extend,makeArray:function(e){return e&&e===e.window||e.nodeType?[e]:we.toArray(e)},inArray:function(e,t){var n;if(t.indexOf)return t.indexOf(e);for(n=t.length;n--;)if(t[n]===e)return n;return-1},isArray:we.isArray,each:Ou,trim:Tu,grep:Eu,find:K,expr:K.selectors,unique:K.uniqueSort,text:K.getText,contains:K.contains,filter:function(e,t,n){var r=t.length;for(n&&(e=":not("+e+")");r--;)1!==t[r].nodeType&&t.splice(r,1);return 1===t.length?X.find.matchesSelector(t[0],e)?[t[0]]:[]:X.find.matches(e,t)}}),Ou({parent:function(e){e=e.parentNode;return e&&11!==e.nodeType?e:null},parents:function(e){return Uu(e,"parentNode")},next:function(e){return $u(e,"nextSibling",1)},prev:function(e){return $u(e,"previousSibling",1)},children:function(e){return Wu(e.firstChild,"nextSibling",1)},contents:function(e){return we.toArray(("iframe"===e.nodeName?e.contentDocument||e.contentWindow.document:e).childNodes)}},function(r,o){ku.fn[r]=function(t){var n=[],e=(this.each(function(){var e=o.call(n,this,t,n);e&&(X.isArray(e)?n.push.apply(n,e):n.push(e))}),1<this.length&&(Bu[r]||(n=X.unique(n)),0===r.indexOf("parents"))&&(n=n.reverse()),X(n));return t?e.filter(t):e}}),Ou({parentsUntil:function(e,t){return Uu(e,"parentNode",t)},nextUntil:function(e,t){return Wu(e,"nextSibling",1,t).slice(1)},prevUntil:function(e,t){return Wu(e,"previousSibling",1,t).slice(1)}},function(o,i){ku.fn[o]=function(t,e){var n=[],r=(this.each(function(){var e=i.call(n,this,t,n);e&&(X.isArray(e)?n.push.apply(n,e):n.push(e))}),1<this.length&&(n=X.unique(n),0!==o.indexOf("parents")&&"prevUntil"!==o||(n=n.reverse())),X(n));return e?r.filter(e):r}}),ku.fn.is=function(e){return!!e&&0<this.filter(e).length},ku.fn.init.prototype=ku.fn,ku.overrideDefaults=function(n){function r(e,t){return o=o||n(),0===arguments.length&&(e=o.element),t=t||o.context,new r.fn.init(e,t)}var o;return X.extend(r,this),r},ku.attrHooks=Hu,ku.cssHooks=Vu;var X=ku,Ku=we.each,Xu=we.grep,Yu=ye.ie,Ju=/^([a-z0-9],?)+$/i,Ce=function(l,u){function f(e){return e&&l&&de(e)?l.getElementById(e):e}function i(e){return U("string"==typeof e?f(e):e)}function r(e,t,n){var r,o,e=i(e);return void 0===(o=e.length?(r=$[t])&&r.get?r.get(e,t):e.attr(t):o)?n||"":o}function o(e){e=f(e);return e?e.attributes:[]}function a(e,t,n){""===n&&(n=null);var r,e=i(e),o=e.attr(t);e.length&&((r=$[t])&&r.set?r.set(e,n,t):e.attr(t,n),o!==n)&&u.onSetAttrib&&u.onSetAttrib({attrElm:e,attrName:t,attrValue:n})}function c(){return u.root_element||l.body}function n(e,t){var n,r=l.body,e=f(e),o=void 0,i=0,u=0,a=r.ownerDocument;if(o=t||r,e){if(o===r&&e.getBoundingClientRect&&"static"===Nn(xe.fromDom(r),"position"))return{x:i=(n=e.getBoundingClientRect()).left+(a.documentElement.scrollLeft||r.scrollLeft)-a.documentElement.clientLeft,y:u=n.top+(a.documentElement.scrollTop||r.scrollTop)-a.documentElement.clientTop};for(var c=e;c&&c!==o&&c.nodeType&&!Pn(c,o);){var s=c;i+=s.offsetLeft||0,u+=s.offsetTop||0,c=s.offsetParent}for(c=e.parentNode;c&&c!==o&&c.nodeType&&!Pn(c,o);)i-=c.scrollLeft||0,u-=c.scrollTop||0,c=c.parentNode;u+=(n=xe.fromDom(e),ir.isFirefox()&&"table"===Pt(n)?Bn(jn(n)).filter(function(e){return"caption"===Pt(e)}).bind(function(r){return Bn(qt(r)).map(function(e){var e=e.dom.offsetTop,t=r.dom.offsetTop,n=r.dom.offsetHeight;return e<=t?-n:0})}).getOr(0):0)}return{x:i,y:u}}function s(e,t,n){e=i(e);return n?e.css(t):("float"===(t=t.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}))&&(t=ye.browser.isIE()?"styleFloat":"cssFloat"),e[0]&&e[0].style?e[0].style[t]:void 0)}function d(e){var t=s(e=f(e),"width"),n=s(e,"height");return-1===t.indexOf("px")&&(t=0),-1===n.indexOf("px")&&(n=0),{w:parseInt(t,10)||e.offsetWidth||e.clientWidth,h:parseInt(n,10)||e.offsetHeight||e.clientHeight}}function m(e,t){if(!e)return!1;if(!Array.isArray(e)){if("*"===t)return 1===e.nodeType;if(Ju.test(t)){for(var n=t.toLowerCase().split(/,/),r=e.nodeName.toLowerCase(),o=n.length-1;0<=o;o--)if(n[o]===r)return!0;return!1}if(e.nodeType&&1!==e.nodeType)return!1}e=Array.isArray(e)?e:[e];return 0<K(t,e[0].ownerDocument||e[0],null,e).length}function g(e,t,n,r){var o,i=[],u=f(e);for(r=void 0===r,n=n||("BODY"!==c().nodeName?c().parentNode:null),we.is(t,"string")&&(t="*"===(o=t)?function(e){return 1===e.nodeType}:function(e){return m(e,o)});u&&!(u===n||Y(u.nodeType)||Zn(u)||Qn(u));){if(!t||"function"==typeof t&&t(u)){if(!r)return[u];i.push(u)}u=u.parentNode}return r?i:null}function p(e,t,n){var r=t;if(e)for("string"==typeof t&&(r=function(e){return m(e,t)}),e=e[n];e;e=e[n])if("function"==typeof r&&r(e))return e;return null}function h(e,n,r){var o,e="string"==typeof e?f(e):e;return!!e&&(we.isArray(e)&&(e.length||0===e.length)?(o=[],Ku(e,function(e,t){e&&o.push(n.call(r,"string"==typeof e?f(e):e,t))}),o):n.call(r||this,e))}function v(e,t){i(e).each(function(e,n){Ku(t,function(e,t){a(n,t,e)})})}function b(e,n){e=i(e);Yu?e.each(function(e,t){if(!1!==t.canHaveHTML){for(;t.firstChild;)t.removeChild(t.firstChild);try{t.innerHTML="<br>"+n,t.removeChild(t.firstChild)}catch(e){X("<div></div>").html("<br>"+n).contents().slice(1).appendTo(t)}return n}}):e.html(n)}function y(e,n,r,o,i){return h(e,function(e){var t="string"==typeof n?l.createElement(n):n;return v(t,r),o&&("string"!=typeof o&&o.nodeType?t.appendChild(o):"string"==typeof o&&b(t,o)),i?t:e.appendChild(t)})}function w(e,t,n){return y(l.createElement(e),e,t,n,!0)}function x(e,t){e=i(e);return(t?e.each(function(){for(var e;e=this.firstChild;)3===e.nodeType&&0===e.data.length?this.removeChild(e):this.parentNode.insertBefore(e,this)}):e).remove(),1<e.length?e.toArray():e[0]}function C(e,t,n){i(e).toggleClass(t,n).each(function(){""===this.className&&X(this).attr("class",null)})}function S(t,e,n){return h(e,function(e){return we.is(e,"array")&&(t=t.cloneNode(!0)),n&&Ku(Xu(e.childNodes),function(e){t.appendChild(e)}),e.parentNode.replaceChild(t,e)})}function k(e){var t;if(G(e))return t="a"===e.nodeName.toLowerCase()&&!r(e,"href")&&r(e,"id"),!!(r(e,"name")||r(e,"data-mce-bookmark")||t)}function T(){return l.createRange()}function O(e){var t;return e&&G(e)?(t=e.getAttribute("data-mce-contenteditable"))&&"inherit"!==t?t:"inherit"!==e.contentEditable?e.contentEditable:null:null}void 0===u&&(u={});function I(e,t,n,r){if(we.isArray(e)){for(var o=e.length,i=[];o--;)i[o]=I(e[o],t,n,r);return i}return!u.collect||e!==l&&e!==A||N.push([e,t,n,r]),B.bind(e,t,n,r||P)}function L(e,t,n){if(we.isArray(e)){for(var r=e.length,o=[];r--;)o[r]=L(e[r],t,n);return o}if(0<N.length&&(e===l||e===A))for(r=N.length;r--;){var i=N[r];e!==i[0]||t&&t!==i[1]||n&&n!==i[2]||B.unbind(i[0],i[1],i[2])}return B.unbind(e,t,n)}var E,_,F,H,e,V={},A=window,D={},t=0,M=Br.forElement(xe.fromDom(l),{contentCssCors:u.contentCssCors,referrerPolicy:u.referrerPolicy}),N=[],R=u.schema||lo({}),z=mo({url_converter:u.url_converter,url_converter_scope:u.url_converter_scope},u.schema),B=u.ownEvents?new pi:pi.Event,j=R.getBlockElements(),U=X.overrideDefaults(function(){return{context:l,element:P.getRoot()}}),W=ii.encodeAllRaw,P={doc:l,settings:u,win:A,files:D,stdMode:!0,boxModel:!0,styleSheetLoader:M,boundEvents:N,styles:z,schema:R,events:B,isBlock:function(e){if("string"==typeof e)return!!j[e];if(e){var t=e.nodeType;if(t)return!(1!==t||!j[e.nodeName])}return!1},$:U,$$:i,root:null,clone:function(t,e){var n;return!Yu||1!==t.nodeType||e?t.cloneNode(e):(n=l.createElement(t.nodeName),Ku(o(t),function(e){a(n,e.nodeName,r(t,e.nodeName))}),n)},getRoot:c,getViewPort:function(e){e=dn(e);return{x:e.x,y:e.y,w:e.width,h:e.height}},getRect:function(e){var t=n(e=f(e)),e=d(e);return{x:t.x,y:t.y,w:e.w,h:e.h}},getSize:d,getParent:function(e,t,n){e=g(e,t,n,!1);return e&&0<e.length?e[0]:null},getParents:g,get:f,getNext:function(e,t){return p(e,t,"nextSibling")},getPrev:function(e,t){return p(e,t,"previousSibling")},select:function(e,t){return K(e,f(t)||u.root_element||l,[])},is:m,add:y,create:w,createHTML:function(e,t,n){var r,o="";for(r in o+="<"+e,t)Me(t,r)&&(o+=" "+r+'="'+W(t[r])+'"');return void 0!==n?o+">"+n+"</"+e+">":o+" />"},createFragment:function(e){var t,n=l.createElement("div"),r=l.createDocumentFragment();for(r.appendChild(n),e&&(n.innerHTML=e);t=n.firstChild;)r.appendChild(t);return r.removeChild(n),r},remove:x,setStyle:function(e,t,n){n=de(t)?i(e).css(t,n):i(e).css(t);u.update_styles&&qu(z,n)},getStyle:s,setStyles:function(e,t){e=i(e).css(t);u.update_styles&&qu(z,e)},removeAllAttribs:function(e){return h(e,function(e){for(var t=e.attributes,n=t.length-1;0<=n;n--)e.removeAttributeNode(t.item(n))})},setAttrib:a,setAttribs:v,getAttrib:r,getPos:n,parseStyle:function(e){return z.parse(e)},serializeStyle:function(e,t){return z.serialize(e,t)},addStyle:function(e){var t,n;if(P!==Ce.DOM&&l===document){if(V[e])return;V[e]=!0}(n=l.getElementById("mceDefaultStyles"))||((n=l.createElement("style")).id="mceDefaultStyles",n.type="text/css",(t=l.getElementsByTagName("head")[0]).firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n)),n.styleSheet?n.styleSheet.cssText+=e:n.appendChild(l.createTextNode(e))},loadCSS:function(e){pe((e=e||"").split(","),function(e){D[e]=!0,M.load(e,le)})},addClass:function(e,t){i(e).addClass(t)},removeClass:function(e,t){C(e,t,!1)},hasClass:function(e,t){return i(e).hasClass(t)},toggleClass:C,show:function(e){i(e).show()},hide:function(e){i(e).hide()},isHidden:function(e){return"none"===i(e).css("display")},uniqueId:function(e){return(e||"mce_")+t++},setHTML:b,getOuterHTML:function(e){e="string"==typeof e?f(e):e;return G(e)?e.outerHTML:X("<div></div>").append(X(e).clone()).html()},setOuterHTML:function(e,t){i(e).each(function(){try{if("outerHTML"in this)return void(this.outerHTML=t)}catch(e){}x(X(this).html(t),!0)})},decode:ii.decode,encode:W,insertAfter:function(e,t){var r=f(t);return h(e,function(e){var t=r.parentNode,n=r.nextSibling;return n?t.insertBefore(e,n):t.appendChild(e),e})},replace:S,rename:function(t,e){var n;return t.nodeName!==e.toUpperCase()&&(n=w(e),Ku(o(t),function(e){a(n,e.nodeName,r(t,e.nodeName))}),S(n,t,!0)),n||t},findCommonAncestor:function(e,t){for(var n,r=e;r;){for(n=t;n&&r!==n;)n=n.parentNode;if(r===n)break;r=r.parentNode}return!r&&e.ownerDocument?e.ownerDocument.documentElement:r},toHex:function(e){return z.toHex(we.trim(e))},run:h,getAttribs:o,isEmpty:function(e,t){var n,r=0;if(k(e))return!1;if(e=e.firstChild){var o=new Pr(e,e.parentNode),i=R?R.getWhiteSpaceElements():{};t=t||(R?R.getNonEmptyElements():null);do{if(n=e.nodeType,G(e)){var u=e.getAttribute("data-mce-bogus");if(u){e=o.next("all"===u);continue}if(u=e.nodeName.toLowerCase(),t&&t[u]){if("br"!==u)return!1;r++,e=o.next();continue}if(k(e))return!1}if(8===n)return!1;if(3===n&&!Jr(e.nodeValue))return!1;if(3===n&&e.parentNode&&i[e.parentNode.nodeName]&&Jr(e.nodeValue))return!1;e=o.next()}while(e)}return r<=1},createRng:T,nodeIndex:Gu,split:function(e,t,n){var r,o,i=T();if(e&&t)return i.setStart(e.parentNode,Gu(e)),i.setEnd(t.parentNode,Gu(t)),r=i.extractContents(),(i=T()).setStart(t.parentNode,Gu(t)+1),i.setEnd(e.parentNode,Gu(e)+1),i=i.extractContents(),(o=e.parentNode).insertBefore(Xo(P,r),e),n?o.insertBefore(n,e):o.insertBefore(t,e),o.insertBefore(Xo(P,i),e),x(e),n||t},bind:I,unbind:L,fire:function(e,t,n){return B.fire(e,t,n)},getContentEditable:O,getContentEditableParent:function(e){for(var t=c(),n=null;e&&e!==t&&null===(n=O(e));e=e.parentNode);return n},destroy:function(){if(0<N.length)for(var e=N.length;e--;){var t=N[e];B.unbind(t[0],t[1],t[2])}q(D,function(e,t){M.unload(t),delete D[t]}),K.setDocument&&K.setDocument()},isChildOf:function(e,t){if(Yu){for(;e;){if(t===e)return!0;e=e.parentNode}return!1}return e===t||t.contains(e)},dumpRng:function(e){return"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset}},$=(E=z,F=fe(P),e={style:{set:function(e,t){null===t||"object"!=typeof t?(H&&e.attr("data-mce-style",t),null!==t&&"string"==typeof t?(e.removeAttr("style"),e.css(E.parse(t))):e.attr("style",t)):e.css(t)},get:function(e){var t=e.attr("data-mce-style")||e.attr("style");return E.serialize(E.parse(t),e[0].nodeName)}}},(H=(_=u).keep_values)&&(e.href=e.src={set:function(e,t,n){_.url_converter&&null!==t&&(t=_.url_converter.call(_.url_converter_scope||F(),t,n,e[0])),e.attr("data-mce-"+n,t).attr(n,t)},get:function(e,t){return e.attr("data-mce-"+t)||e.attr(t)}}),e);return P},Zu=(Ce.DOM=Ce(document),Ce.nodeIndex=Gu,Ce.DOM),Qu=we.each,ea=we.grep,ta=(na.prototype._setReferrerPolicy=function(e){this.settings.referrerPolicy=e},na.prototype.loadScript=function(e,t,n){function r(){o.remove(i),u&&(u.onerror=u.onload=u=null)}var o=Zu,i=o.uniqueId(),u=document.createElement("script");u.id=i,u.type="text/javascript",u.src=we._addCacheSuffix(e),this.settings.referrerPolicy&&o.setAttrib(u,"referrerpolicy",this.settings.referrerPolicy),u.onload=function(){r(),t()},u.onerror=function(){r(),O(n)?n():"undefined"!=typeof console&&console.log&&console.log("Failed to load script: "+e)},(document.getElementsByTagName("head")[0]||document.body).appendChild(u)},na.prototype.isDone=function(e){return 2===this.states[e]},na.prototype.markDone=function(e){this.states[e]=2},na.prototype.add=function(e,t,n,r){var o=this.states[e];this.queue.push(e),void 0===o&&(this.states[e]=0),t&&(this.scriptLoadedCallbacks[e]||(this.scriptLoadedCallbacks[e]=[]),this.scriptLoadedCallbacks[e].push({success:t,failure:r,scope:n||this}))},na.prototype.load=function(e,t,n,r){return this.add(e,t,n,r)},na.prototype.remove=function(e){delete this.states[e],delete this.scriptLoadedCallbacks[e]},na.prototype.loadQueue=function(e,t,n){this.loadScripts(this.queue,e,t,n)},na.prototype.loadScripts=function(t,e,n,r){function o(t,e){Qu(i.scriptLoadedCallbacks[e],function(e){O(e[t])&&e[t].call(e.scope)}),i.scriptLoadedCallbacks[e]=void 0}var i=this,u=[],a=(i.queueLoadedCallbacks.push({success:e,failure:r,scope:n||this}),function(){var e=ea(t);t.length=0,Qu(e,function(e){2!==i.states[e]?3!==i.states[e]?1!==i.states[e]&&(i.states[e]=1,i.loading++,i.loadScript(e,function(){i.states[e]=2,i.loading--,o("success",e),a()},function(){i.states[e]=3,i.loading--,u.push(e),o("failure",e),a()})):o("failure",e):o("success",e)}),i.loading||(e=i.queueLoadedCallbacks.slice(0),i.queueLoadedCallbacks.length=0,Qu(e,function(e){0===u.length?O(e.success)&&e.success.call(e.scope):O(e.failure)&&e.failure.call(e.scope,u)}))});a()},na.ScriptLoader=new na,na);function na(e){void 0===e&&(e={}),this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=0,this.settings=e}function ra(e){var t=e;return{get:function(){return t},set:function(e){t=e}}}function oa(){return he(ua,aa.get())}function ia(){function a(t,n){pe(z(o,function(e){return e.name===t&&e.state===n}),function(e){e.callback()})}function c(e){return(d[e]?d[e].dependencies:void 0)||[]}function s(e,t){return"object"==typeof t?t:"string"==typeof e?{prefix:"",resource:t,suffix:""}:{prefix:e.prefix,resource:t,suffix:e.suffix}}function e(e,t,n){void 0===n&&(n="added"),re(d,e)&&"added"===n||re(f,e)&&"loaded"===n?t():o.push({name:e,state:n,callback:t})}function l(r,o,i,u,e){var t,n;f[r]||(0!==(t="string"==typeof o?o:o.prefix+o.resource+o.suffix).indexOf("/")&&-1===t.indexOf("://")&&(t=ia.baseURL+"/"+t),f[r]=t.substring(0,t.lastIndexOf("/")),n=function(){var t,e,n;a(r,"loaded"),t=o,e=i,n=u,pe(c(r),function(e){e=s(t,e);l(e.resource,e,void 0,void 0)}),e&&(n?e.call(n):e.call(ta))},d[r]?n():ta.ScriptLoader.add(t,n,u,e))}var r=[],f={},d={},o=[];return{items:r,urls:f,lookup:d,_listeners:o,get:function(e){if(d[e])return d[e].instance},dependencies:c,requireLangPack:function(t,n){!1!==ia.languageLoad&&e(t,function(){var e=ca.getCode();!e||n&&-1===(","+(n||"")+",").indexOf(","+e+",")||ta.ScriptLoader.add(f[t]+"/langs/"+e+".js")},"loaded")},add:function(e,t,n){return r.push(t),d[e]={instance:t,dependencies:n},a(e,"added"),t},remove:function(e){delete f[e],delete d[e]},createUrl:s,addComponents:function(e,t){var n=f[e];pe(t,function(e){ta.ScriptLoader.add(n+"/"+e)})},load:l,waitFor:e}}var ua={},aa=ra("en"),ca={getData:function(){return se(ua,function(e){return be({},e)})},setCode:function(e){e&&aa.set(e)},getCode:function(){return aa.get()},add:function(e,t){var n=ua[e];n||(ua[e]=n={}),q(t,function(e,t){n[t.toLowerCase()]=e})},translate:function(e){function n(e){return O(e)?Object.prototype.toString.call(e):o(e)?"":""+e}function t(e){e=n(e);return he(a,e.toLowerCase()).map(n).getOr(e)}function r(e){return e.replace(/{context:\w+}$/,"")}function o(e){return""===e||null==e}var i,u,a=oa().getOr({});return o(e)?"":Oe(i=e)&&re(i,"raw")?n(e.raw):x(i=e)&&1<i.length?(u=e.slice(1),r(t(e[0]).replace(/\{([0-9]+)\}/g,function(e,t){return re(u,t)?n(u[t]):e}))):r(t(e))},isRtl:function(){return oa().bind(function(e){return he(e,"_dir")}).exists(function(e){return"rtl"===e})},hasCode:function(e){return re(ua,e)}};function sa(){e=le,t=ra(ve.none());var e,t,n={clear:function(){r(),t.set(ve.none())},isSet:function(){return t.get().isSome()},get:function(){return t.get()},set:function(e){r(),t.set(ve.some(e))}};function r(){t.get().each(e)}return be(be({},n),{on:function(e){return n.get().each(e)}})}function la(n,r){var o=null;return{cancel:function(){v(o)||(clearTimeout(o),o=null)},throttle:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];v(o)&&(o=setTimeout(function(){o=null,n.apply(null,e)},r))}}}function fa(n,r){function o(){v(i)||(clearTimeout(i),i=null)}var i=null;return{cancel:o,throttle:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];o(),i=setTimeout(function(){i=null,n.apply(null,e)},r)}}}function da(e,t){e=En(e,t);return void 0===e||""===e?[]:e.split(" ")}function ma(e){return void 0!==e.dom.classList}function ga(e,t){ma(e)?e.dom.classList.add(t):(t=t,t=da(e=e,"class").concat([t]),Tn(e,"class",t.join(" ")))}function pa(e,t){return ma(e)&&e.dom.classList.contains(t)}function ha(e,t){return ut(e=void 0===e?document:e.dom)?[]:S(e.querySelectorAll(t),xe.fromDom)}function va(r,e){function t(e,t){return An(e,t)?ve.some(En(e,t)):ve.none()}var n=r.selection.getRng(),o=xe.fromDom(n.startContainer),i=xe.fromDom(r.getBody()),e=e.fold(function(){return"."+ja()},function(e){return"["+Ua()+'="'+e+'"]'});return Tr(Gt(o,n.startOffset).getOr(o),e,function(e){return _(e,i)}).bind(function(e){return t(e,""+Wa()).bind(function(n){return t(e,""+Ua()).map(function(e){var t=$a(r,n);return{uid:n,name:e,elements:t}})})})}function ba(e){var t=(new Date).getTime();return e+"_"+Math.floor(1e9*Math.random())+ ++qa+String(t)}function ya(e,t){var n=Ft(e).dom,r=xe.fromDom(n.createDocumentFragment());rn(r,(t=t,(n=(n||document).createElement("div")).innerHTML=t,jn(xe.fromDom(n)))),on(e),$n(e,r)}function wa(e,t){return xe.fromDom(e.dom.cloneNode(t))}function xa(e){return wa(e,!1)}function Ca(e){return wa(e,!0)}function Sa(e,t,n){function r(e){for(var t;(t=o[e]())&&!B(t)&&!n(t););return ve.from(t).filter(B)}void 0===n&&(n=ge);var o=new Pr(e,t);return{current:function(){return ve.from(o.current()).filter(B)},next:function(){return r("next")},prev:function(){return r("prev")},prev2:function(){return r("prev2")}}}function ka(t,e){function i(e,t,n,r){if(B(e)){t=r(e,t,e.data);if(-1!==t)return ve.some({container:e,offset:t})}return n().bind(function(e){return i(e.container,e.offset,n,r)})}var u=e||function(e){return t.isBlock(e)||A(e)||D(e)};return{backwards:function(e,t,n,r){var o=Sa(e,r,u);return i(e,t,function(){return o.prev().map(function(e){return{container:e,offset:e.length}})},n).getOrNull()},forwards:function(e,t,n,r){var o=Sa(e,r,u);return i(e,t,function(){return o.next().map(function(e){return{container:e,offset:0}})},n).getOrNull()}}}function Ta(e){return e?{left:Ga(e.left),top:Ga(e.top),bottom:Ga(e.bottom),right:Ga(e.right),width:Ga(e.width),height:Ga(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0}}function Oa(e,t){return e=Ta(e),t||(e.left=e.left+e.width),e.right=e.left,e.width=0,e}function Ea(e,t,n){return 0<=e&&e<=Math.min(t.height,n.height)/2}function _a(e,t){var n=Math.min(t.height/2,e.height/2);return e.bottom-n<t.top||!(e.top>t.bottom)&&Ea(t.top-e.bottom,e,t)}function Aa(e,t){return e.top>t.bottom||!(e.bottom<t.top)&&Ea(t.bottom-e.top,e,t)}function Da(e,t,n){return t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom}function Ma(e){var t=e.startContainer,n=e.startOffset;return t.hasChildNodes()&&e.endOffset===n+1?t.childNodes[n]:null}function Na(e,t){var n;return G(e)&&e.hasChildNodes()?(n=e.childNodes)[n=n.length-1,Math.min(Math.max(t,0),n)]:e}function Ra(e){return"string"==typeof e&&768<=e.charCodeAt(0)&&Ka.test(e)}function za(e){return"createRange"in e?e.createRange():Ce.DOM.createRng()}function Ba(e){return e&&/[\r\n\t ]/.test(e)}function Pa(e){return e.setStart&&e.setEnd}function Ia(e){var t=e.startContainer,n=e.startOffset;if(Ba(e.toString())&&Za(t.parentNode)&&B(t))return!(!Ba((e=t.data)[n-1])&&!Ba(e[n+1]))}function La(e){return 0===e.left&&0===e.right&&0===e.top&&0===e.bottom}function Fa(e,t){e=Oa(e,t);return e.width=1,e.right=e.left+1,e}ia.languageLoad=!0,ia.baseURL="",ia.PluginManager=ia(),ia.ThemeManager=ia();function Ha(e,t){if(!(t<0&&G(e)&&e.hasChildNodes()))return Na(e,t)}var Va=function(e,t){var n=[];return pe(jn(e),function(e){n=(n=t(e)?n.concat([e]):n).concat(Va(e,t))}),n},ja=fe("mce-annotation"),Ua=fe("data-mce-annotation"),Wa=fe("data-mce-annotation-uid"),$a=function(e,t){return ha(xe.fromDom(e.getBody()),"["+Wa()+'="'+t+'"]')},qa=0,Ga=Math.round,Ka=new RegExp("[-----------------------------------------------------------------------------------------------------------------------------------]"),Xa=G,e=Xr,Ya=hn("display","block table"),Rt=hn("float","left right"),Ja=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return function(e){for(var t=0;t<n.length;t++)if(!n[t](e))return!1;return!0}}(Xa,e,E(Rt)),Za=E(hn("white-space","pre pre-line pre-wrap")),Qa=B,ec=A,tc=Ce.nodeIndex,nc=function(e){var t,n,r,o,i=e.getClientRects(),i=0<i.length?Ta(i[0]):Ta(e.getBoundingClientRect());return!Pa(e)&&ec(e)&&La(i)?(n=(t=e).ownerDocument,r=za(n),n=n.createTextNode(_o),(o=t.parentNode).insertBefore(n,t),r.setStart(n,0),r.setEnd(n,1),t=Ta(r.getBoundingClientRect()),o.removeChild(n),t):La(i)&&Pa(e)?(o=(r=e).startContainer,n=r.endContainer,t=r.startOffset,e=r.endOffset,o===n&&B(n)&&0===t&&1===e?((o=r.cloneRange()).setEndAfter(n),nc(o)):null):i},Se=function(t,n,e){function r(){return e=e||function(e){function r(e){var t;0===e.height||0<n.length&&(t=n[n.length-1],e.left===t.left)&&e.top===t.top&&e.bottom===t.bottom&&e.right===t.right||n.push(e)}function t(e,t){var n=za(e.ownerDocument);if(t<e.data.length){if(Ra(e.data[t]))return;if(Ra(e.data[t-1])&&(n.setStart(e,t),n.setEnd(e,t+1),!Ia(n)))return r(Fa(nc(n),!1))}0<t&&(n.setStart(e,t-1),n.setEnd(e,t),Ia(n)||r(Fa(nc(n),!1))),t<e.data.length&&(n.setStart(e,t),n.setEnd(e,t+1),Ia(n)||r(Fa(nc(n),!0)))}var n=[],o=e.container(),i=e.offset();if(Qa(o))t(o,i);else if(Xa(o))if(e.isAtEnd()){var u=Ha(o,i);Qa(u)&&t(u,u.data.length),Ja(u)&&!ec(u)&&r(Fa(nc(u),!1))}else{if(u=Ha(o,i),Qa(u)&&t(u,0),Ja(u)&&e.isAtEnd())return r(Fa(nc(u),!1)),n;o=Ha(e.container(),e.offset()-1);!Ja(o)||ec(o)||!Ya(o)&&!Ya(u)&&Ja(u)||r(Fa(nc(o),!1)),Ja(u)&&r(Fa(nc(u),!0))}return n}(Se(t,n))}return{container:fe(t),offset:fe(n),toRange:function(){var e=za(t.ownerDocument);return e.setStart(t,n),e.setEnd(t,n),e},getClientRects:r,isVisible:function(){return 0<r().length},isAtStart:function(){return Qa(t),0===n},isAtEnd:function(){return Qa(t)?n>=t.data.length:n>=t.childNodes.length},isEqual:function(e){return e&&t===e.container()&&n===e.offset()},getNode:function(e){return Ha(t,e?n-1:n)}}};function rc(e,t){B(t)&&0===t.data.length&&e.remove(t)}function oc(e,t,n){var r,o,i,u,a;Qn(n)?(r=e,o=t,u=ve.from((i=n).firstChild),a=ve.from(i.lastChild),o.insertNode(i),u.each(function(e){return rc(r,e.previousSibling)}),a.each(function(e){return rc(r,e.nextSibling)})):(o=e,t.insertNode(i=n),rc(o,i.previousSibling),rc(o,i.nextSibling))}function ic(t){return function(e){return t===e}}function uc(e){var r,t;return(ts(e)?"text()":e.nodeName.toLowerCase())+"["+(t=Ie(r=is(os(e=e)),ic(e),e),t=Pe(r=r.slice(0,t+1),function(e,t,n){return ts(t)&&ts(r[n-1])&&e++,e},0),Ie(r=ze(r,pn([e.nodeName])),ic(e),e)-t)+"]"}function ac(e,t){var n,r,o=[],i=t.container(),t=t.offset();return ts(i)?n=function(e,t){for(;(e=e.previousSibling)&&ts(e);)t+=e.data.length;return t}(i,t):(t>=(r=i.childNodes).length?(n="after",t=r.length-1):n="before",i=r[t]),o.push(uc(i)),r=ze(function(e,t){var n=[];for(t=t.parentNode;t!==e;t=t.parentNode)n.push(t);return n}(e,i),E(bn)),(o=o.concat(Re(r,uc))).reverse().join("/")+","+n}function cc(e,t){if(t){var t=t.split(","),n=t[0].split("/"),t=1<t.length?t[1]:"before",n=Pe(n,function(e,t){var n,r,t=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(t);return t?("text()"===t[1]&&(t[1]="#text"),e=e,n=t[1],t=parseInt(t[2],10),r=ze(r=is(e),function(e,t){return!ts(e)||!ts(r[t-1])}),(r=ze(r,pn([n])))[t]):null},e);if(n)if(ts(n)){var r=n;var o=parseInt(t,10);for(var i,u=r,a=0;ts(u);){if(i=u.data.length,a<=o&&o<=a+i){r=u,o-=a;break}if(!ts(u.nextSibling)){r=u,o=i;break}a+=i,u=u.nextSibling}return ts(r)&&o>r.data.length&&(o=r.data.length),Se(r,o);return}else return t="after"===t?rs(n)+1:rs(n),Se(n.parentNode,t);else;}return null}function sc(e,t,n,r,o){var i=r[o?"startContainer":"endContainer"],r=r[o?"startOffset":"endOffset"],u=[],o=0,a=e.getRoot();for(B(i)?u.push(n?function(e,t,n){for(var r=e(t.data.slice(0,n)).length,o=t.previousSibling;o&&B(o);o=o.previousSibling)r+=e(o.data).length;return r}(t,i,r):r):(r>=(t=i.childNodes).length&&t.length&&(o=1,r=Math.max(0,t.length-1)),u.push(e.nodeIndex(t[r],n)+o));i&&i!==a;i=i.parentNode)u.push(e.nodeIndex(i,n));return u}function lc(e,t,n){var r=0;return we.each(e.select(t),function(e){if("all"!==e.getAttribute("data-mce-bogus"))return e!==n&&void r++}),r}function fc(e,t){var n,r=t?"start":"end",o=e[r+"Container"],r=e[r+"Offset"];G(o)&&"TR"===o.nodeName&&(o=(n=o.childNodes)[Math.min(t?r:r-1,n.length-1)])&&(r=t?0:o.childNodes.length,e["set"+(t?"Start":"End")](o,r))}function dc(e){return fc(e,!0),fc(e,!1),e}function mc(e,t){return G(e)&&(e=Na(e,t),us(e))?e:Ur(e)&&(t=(e=B(e)&&Vr(e)?e.parentNode:e).previousSibling,us(t)||(t=e.nextSibling,us(t)))?t:void 0}function gc(e,t,n){var r=n.getNode(),o=r?r.nodeName:null,i=n.getRng();return us(r)||"IMG"===o?{name:o,index:lc(n.dom,o,r)}:(r=mc((r=i).startContainer,r.startOffset)||mc(r.endContainer,r.endOffset))?{name:o=r.tagName,index:lc(n.dom,o,r)}:(r=(o=n).dom,(n={}).start=sc(r,e=e,t=t,i=i,!0),o.isCollapsed()||(n.end=sc(r,e,t,i,!1)),Kr(i)&&(n.isFakeCaret=!0),n)}function pc(e,t,n){t={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return n?e.create("span",t,"&#xFEFF;"):e.create("span",t)}function hc(e,t){var n=e.dom,r=e.getRng(),o=n.uniqueId(),i=e.isCollapsed(),u=e.getNode(),a=u.nodeName;return"IMG"===a?{name:a,index:lc(n,a,u)}:(a=dc(r.cloneRange()),i||(a.collapse(!1),oc(n,a,pc(n,o+"_end",t))),(r=dc(r)).collapse(!0),oc(n,r,pc(n,o+"_start",t)),e.moveToBookmark({id:o,keep:!0}),{id:o})}function vc(e,t,n){var r=e.getParam(t,n);return-1===r.indexOf("=")?r:he(e.getParam(t,"","hash"),e.id).getOr(n)}function bc(e){return e.getParam("content_security_policy","")}function yc(e){return e.getParam("force_p_newlines",!1)?"p":!1===(e=e.getParam("forced_root_block","p"))?"":!0===e?"p":e}function wc(e){return e.getParam("forced_root_block_attrs",{})}function xc(e){return e.getParam("automatic_uploads",!0,"boolean")}function Cc(e){return e.getParam("icons","","string")}function Sc(e){return e.getParam("referrer_policy","","string")}function kc(e){return e.getParam("language","en","string")}function Tc(e){return e.getParam("indent_use_margin",!1)}function Oc(e){e=e.getParam("font_css",[]);return x(e)?e:S(e.split(","),bt)}function Ec(e){e=e.getParam("object_resizing");return!1!==e&&!ye.iOS&&(de(e)?e:"table,img,figure.image,div,video,iframe")}function _c(e){return e.getParam("event_root")}function Ac(e){return e.getParam("theme")}function Dc(e){return!1!==e.getParam("inline_boundaries")}function Mc(e){return e.getParam("plugins","","string")}function Nc(e){var t=e.parentNode;t&&t.removeChild(e)}function Rc(e){var t=Mo(e);return{count:e.length-t.length,text:t}}function zc(e){for(var t;-1!==(t=e.data.lastIndexOf(Ao));)e.deleteData(t,1)}function Bc(e,t){return fs(e),t}function Pc(e,t){var n=t.container(),r=(-1===(r=L(Ue(n.childNodes),e))?ve.none():ve.some(r)).map(function(e){return e<t.offset()?Se(n,t.offset()-1):t}).getOr(t);return fs(e),r}function Ic(e,t,n){var r,o=Oa(t.getBoundingClientRect(),n),e="BODY"===e.tagName?(i=e.ownerDocument.documentElement,r=e.scrollLeft||i.scrollLeft,e.scrollTop||i.scrollTop):(i=e.getBoundingClientRect(),r=e.scrollLeft-i.left,e.scrollTop-i.top),i=(o.left+=r,o.right+=r,o.top+=e,o.bottom+=e,o.width=1,t.offsetWidth-t.clientWidth);return 0<i&&(n&&(i*=-1),o.left+=i,o.right+=i),o}function Lc(e,u,a,c){function s(){for(var e=ha(xe.fromDom(u),"*[contentEditable=false],video,audio,embed,object"),t=0;t<e.length;t++){var n,r=e[t].dom,o=r.previousSibling;Bo(o)&&(1===(n=o.data).length?o.parentNode.removeChild(o):o.deleteData(n.length-1,1)),o=r.nextSibling,zo(o)&&(1===(n=o.data).length?o.parentNode.removeChild(o):o.deleteData(0,1))}f&&(fs(f),f=null),d.on(function(e){X(e.caret).remove(),d.clear()}),l&&(zr.clearInterval(l),l=void 0)}var l,f,d=sa(),e=yc(e),m=0<e.length?e:"p";return{show:function(e,t){var n,r,o,i;return s(),ps(t)?null:(a(t)?(o=e,(n=(i=t).ownerDocument.createElement(m)).setAttribute("data-mce-caret",o?"before":"after"),n.setAttribute("data-mce-bogus","all"),n.appendChild(((r=document.createElement("br")).setAttribute("data-mce-bogus","1"),r)),r=i.parentNode,o?r.insertBefore(n,i):i.nextSibling?r.insertBefore(n,i.nextSibling):r.appendChild(n),f=n,o=Ic(u,t,e),X(f).css("top",o.top),i=X('<div class="mce-visual-caret" data-mce-bogus="all"></div>').css(be({},o)).appendTo(u)[0],d.set({caret:i,element:t,before:e}),e&&X(i).addClass("mce-visual-caret-before"),l=zr.setInterval(function(){c()?X("div.mce-visual-caret",u).toggleClass("mce-visual-caret-hidden"):X("div.mce-visual-caret",u).addClass("mce-visual-caret-hidden")},500),(r=t.ownerDocument.createRange()).setStart(f,0),r.setEnd(f,0)):(f=function(e,t){var n=e.ownerDocument.createTextNode(Ao),r=e.parentNode;if(t){if(o=e.previousSibling,Ro(o)){if(Ur(o))return o;if(Bo(o))return o.splitText(o.data.length-1)}r.insertBefore(n,e)}else{var o=e.nextSibling;if(Ro(o)){if(Ur(o))return o;if(zo(o))return o.splitText(1),o}e.nextSibling?r.insertBefore(n,e.nextSibling):r.appendChild(n)}return n}(t,e),r=t.ownerDocument.createRange(),hs(f.nextSibling)?(r.setStart(f,0),r.setEnd(f,0)):(r.setStart(f,1),r.setEnd(f,1))),r)},hide:s,getCss:function(){return".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}"},reposition:function(){d.on(function(e){var t=Ic(u,e.element,e.before);X(e.caret).css(be({},t))})},destroy:function(){return zr.clearInterval(l)}}}function Fc(){return ds.isIE()||ds.isEdge()||ds.isFirefox()}function Hc(e){return hs(e)||yn(e)&&Fc()}function Vc(e,t){for(var n;n=e(t);)if(!xs(n))return n;return null}function jc(e,t,n,r,o){var i=new Pr(e,r),r=vs(e)||xs(e);if(t<0){if(r&&n(e=Vc(i.prev.bind(i),!0)))return e;for(;e=Vc(i.prev.bind(i),o);)if(n(e))return e}if(0<t){if(r&&n(e=Vc(i.next.bind(i),!0)))return e;for(;e=Vc(i.next.bind(i),o);)if(n(e))return e}return null}function Uc(e,t){for(;e&&e!==t;){if(ys(e))return e;e=e.parentNode}return null}function Wc(e,t,n){return Uc(e.container(),n)===Uc(t.container(),n)}function $c(e,t){var n;return t&&(n=t.container(),t=t.offset(),Cs(n))?n.childNodes[t+e]:null}function qc(e,t){var n=t.ownerDocument.createRange();return e?(n.setStartBefore(t),n.setEndBefore(t)):(n.setStartAfter(t),n.setEndAfter(t)),n}function Gc(e,t,n){for(var r,o,i=e?"previousSibling":"nextSibling";n&&n!==t;){var u=n[i];if(ws(u)&&(u=u[i]),vs(u)||bs(u)){if(o=n,Uc(u,r=t)===Uc(o,r))return u;break}if(Ss(u))break;n=n.parentNode}return null}function Kc(e,t,n){var r,o=me(Gc,!0,t),t=me(Gc,!1,t),i=n.startContainer,u=n.startOffset;if(Vr(i)){var a=(i=Cs(i)?i:i.parentNode).getAttribute("data-mce-caret");if("before"===a&&Hc(r=i.nextSibling))return ks(r);if("after"===a&&Hc(r=i.previousSibling))return Ts(r)}if(n.collapsed&&B(i)){if(ws(i)){if(1===e){if(r=t(i))return ks(r);if(r=o(i))return Ts(r)}if(-1===e){if(r=o(i))return Ts(r);if(r=t(i))return ks(r)}return n}if(Bo(i)&&u>=i.data.length-1)return 1===e&&(r=t(i))?ks(r):n;if(zo(i)&&u<=1)return-1===e&&(r=o(i))?Ts(r):n;if(u===i.data.length)return(r=t(i))?ks(r):n;if(0===u)return(r=o(i))?Ts(r):n}return n}function Xc(e,t){return ve.from($c(e?0:-1,t)).filter(vs)}function Yc(e,t,n){t=Kc(e,t,n);return-1===e?Se.fromRangeStart(t):Se.fromRangeEnd(t)}function Jc(e){return ve.from(e.getNode()).map(xe.fromDom)}function Zc(e,t){for(;t=e(t);)if(t.isVisible())return t;return t}function Qc(e,t){t=Wc(e,t);return!(t||!A(e.getNode()))||t}Se.fromRangeStart=function(e){return Se(e.startContainer,e.startOffset)},Se.fromRangeEnd=function(e){return Se(e.endContainer,e.endOffset)},Se.after=function(e){return Se(e.parentNode,tc(e)+1)},Se.before=function(e){return Se(e.parentNode,tc(e))},Se.isAbove=function(e,t){return Cn(ue(t.getClientRects()),ae(e.getClientRects()),_a).getOr(!1)},Se.isBelow=function(e,t){return Cn(ae(t.getClientRects()),ue(e.getClientRects()),Aa).getOr(!1)},Se.isAtStart=function(e){return!!e&&e.isAtStart()},Se.isAtEnd=function(e){return!!e&&e.isAtEnd()},Se.isTextPosition=function(e){return!!e&&B(e.container())},Se.isElementPosition=function(e){return!1===Se.isTextPosition(e)};var es,ts=B,ns=bn,rs=Ce.nodeIndex,os=function(e){e=e.parentNode;return ns(e)?os(e):e},is=function(e){return e?Pe(e.childNodes,function(e,t){return ns(t)&&"BR"!==t.nodeName?e=e.concat(is(t)):e.push(t),e},[]):[]},us=D,as=me(gc,m,!0),cs=Ce.DOM,ss=G,ls=B,fs=function(e){ss(e)&&Ur(e)&&(Wr(e)?e.removeAttribute("data-mce-caret"):Nc(e)),ls(e)&&(zc(e),0===e.data.length)&&Nc(e)},ds=Mt().browser,ms=D,gs=rr,ps=nr,hs=function(e){return ms(e)||gs(e)},vs=D,bs=rr,ys=hn("display","block table table-cell table-caption list-item"),ws=Ur,xs=Vr,Cs=G,Ss=Xr,ks=me(qc,!0),Ts=me(qc,!1);function Os(e,t){return e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null}function Es(e,t){if(0<e){if(Vl(t.previousSibling)&&!Ll(t.previousSibling))return Se.before(t);if(Ll(t))return Se(t,0)}if(e<0){if(Vl(t.nextSibling)&&!Ll(t.nextSibling))return Se.after(t);if(Ll(t))return Se(t,t.data.length)}return e<0&&!Hl(t)?Se.after(t):Se.before(t)}function _s(t){return{next:function(e){return Ul(es.Forwards,e,t)},prev:function(e){return Ul(es.Backwards,e,t)}}}function As(e){return Se.isTextPosition(e)?0===e.offset():Xr(e.getNode())}function Ds(e){var t;return Se.isTextPosition(e)?(t=e.container(),e.offset()===t.data.length):Xr(e.getNode(!0))}function Ms(e,t){return!Se.isTextPosition(e)&&!Se.isTextPosition(t)&&e.getNode()===t.getNode(!0)}function Ns(o,i,u){return Wl(o,i,u).bind(function(e){return Wc(u,e,i)&&(t=u,n=e,o?!Ms(t,n)&&(Se.isTextPosition(r=t)||!A(r.getNode()))&&Ds(t)&&As(n):!Ms(n,t)&&As(t)&&Ds(n))?Wl(o,i,e):ve.some(e);var t,n,r})}function Rs(e,t){var n,r=e?t.firstChild:t.lastChild;return B(r)?ve.some(Se(r,e?0:r.data.length)):r?Xr(r)?ve.some(e?Se.before(r):A(n=r)?Se.before(n):Se.after(n)):(n=t,t=r,e=(r=e)?Se.before(t):Se.after(t),Wl(r,n,e)):ve.none()}function zs(e){return G(e)&&e.id===Yl}function Bs(e,t){for(;t&&t!==e;){if(t.id===Yl)return t;t=t.parentNode}return null}function Ps(e){return we.isArray(e.start)}function Is(e,t){return G(t)&&e.isBlock(t)&&!t.innerHTML&&!ye.ie&&(t.innerHTML='<br data-mce-bogus="1" />'),t}function Ls(e,t,n){return!1===t.hasChildNodes()&&Bs(e,t)&&(e=n,t=(n=t).ownerDocument.createTextNode(Ao),n.appendChild(t),e.setStart(t,0),e.setEnd(t,0),1)}function Fs(e,t,n,r){var o,i,u,a=n[t?"start":"end"],c=e.getRoot();if(a){for(n=a[0],i=c,o=a.length-1;1<=o;o--){if(u=i.childNodes,Ls(c,i,r))return 1;if(a[o]>u.length-1)return Ls(c,i,r)||function(t){return Xl(i).fold(ge,function(e){return t.setStart(e.container(),e.offset()),t.setEnd(e.container(),e.offset()),!0})}(r);i=u[a[o]]}3===i.nodeType&&(n=Math.min(a[0],i.nodeValue.length)),1===i.nodeType&&(n=Math.min(a[0],i.childNodes.length)),t?r.setStart(i,n):r.setEnd(i,n)}return 1}function Hs(e){return B(e)&&0<e.data.length}function Vs(e,t,n){var r,o,i,u,a=e.get(n.id+"_"+t),c=n.keep;if(a){if(i=a.parentNode,r="start"===t?c?a.hasChildNodes()?(i=a.firstChild,1):Hs(a.nextSibling)?(i=a.nextSibling,0):Hs(a.previousSibling)?(i=a.previousSibling,a.previousSibling.data.length):(i=a.parentNode,e.nodeIndex(a)+1):e.nodeIndex(a):c?a.hasChildNodes()?(i=a.firstChild,1):Hs(a.previousSibling)?(i=a.previousSibling,a.previousSibling.data.length):(i=a.parentNode,e.nodeIndex(a)):e.nodeIndex(a),i=i,u=r,!c){for(c=a.previousSibling,o=a.nextSibling,we.each(we.grep(a.childNodes),function(e){B(e)&&(e.nodeValue=e.nodeValue.replace(/\uFEFF/g,""))});a=e.get(n.id+"_"+t);)e.remove(a,!0);c&&o&&c.nodeType===o.nodeType&&B(c)&&!ye.opera&&(r=c.nodeValue.length,c.appendData(o.nodeValue),e.remove(o),i=c,u=r)}return ve.some(Se(i,u))}return ve.none()}function js(c,e){!function(e){var n,r,t,o,i,u,a=c.dom;if(e){if(Ps(e))return i=e,u=(o=a).createRng(),Fs(o,!0,i,u)&&Fs(o,!1,i,u)?ve.some(u):ve.none();if(de(e.start))return ve.some((o=e,u=(i=a).createRng(),t=cc(i.getRoot(),o.start),u.setStart(t.container(),t.offset()),t=cc(i.getRoot(),o.end),u.setEnd(t.container(),t.offset()),u));if(re(e,"id"))return Cn(o=Vs(r=a,"start",i=e),Vs(r,"end",i).or(o),function(e,t){var n=r.createRng();return n.setStart(Is(r,e.container()),e.offset()),n.setEnd(Is(r,t.container()),t.offset()),n});if(re(e,"name"))return n=a,ve.from(n.select((t=e).name)[t.index]).map(function(e){var t=n.createRng();return t.selectNode(e),t});if(re(e,"rng"))return ve.some(e.rng)}return ve.none()}(e).each(function(e){c.setRng(e)})}function Us(e){return G(e)&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type")}function Ws(e){return""!==e&&-1!==" \f\n\r\t\v".indexOf(e)}function $s(e){return!Ws(e)&&!Jl(e)}function qs(e){return e.nodeType}function Gs(e,t,n){var r=n.startOffset,o=n.startContainer;if((o!==n.endContainer||!(i=o.childNodes[r])||!/^(IMG)$/.test(i.nodeName))&&G(o)){var i=o.childNodes,u=void 0;r<i.length?(o=i[r],u=new Pr(o,e.getParent(o,e.isBlock))):(o=i[i.length-1],(u=new Pr(o,e.getParent(o,e.isBlock))).next(!0));for(var a=u.current();a;a=u.next())if(B(a)&&!Zl(a))return n.setStart(a,0),t.setRng(n)}}function Ks(e,t,n){if(e){var r=t?"nextSibling":"previousSibling";for(e=n?e:e[r];e;e=e[r])if(G(e)||!Zl(e))return e}}function Xs(e,t){return qs(t)&&(t=t.nodeName),!!e.schema.getTextBlockElements()[t.toLowerCase()]}function Ys(e,t,n){return e.schema.isValidChild(t,n)}function Js(e,n){return O(e)?e=e(n):ne(n)&&(e=e.replace(/%(\w+)/g,function(e,t){return n[t]||e})),e}function Zs(e,t){return e=""+((e=e||"").nodeName||e),t=""+((t=t||"").nodeName||t),e.toLowerCase()===t.toLowerCase()}function Qs(e,t,n){return"color"!==n&&"backgroundColor"!==n||(t=e.toHex(t)),"fontWeight"===n&&700===t&&(t="bold"),""+("fontFamily"===n?t.replace(/[\'\"]/g,"").replace(/,\s+/g,","):t)}function el(e,t,n){return Qs(e,e.getStyle(t,n),n)}function tl(t,e){var n;return t.getParent(e,function(e){return(n=t.getStyle(e,"text-decoration"))&&"none"!==n}),n}function nl(e,t,n){return e.getParents(t,n,e.getRoot())}function rl(e){return Me(e,"block")}function ol(e){return Me(e,"selector")}function il(e){return Me(e,"inline")}function ul(e){return ol(e)&&!1!==e.expand&&!il(e)}function al(e,t){for(var n=t;n;){if(G(n)&&e.getContentEditable(n))return"false"===e.getContentEditable(n)?n:t;n=n.parentNode}return t}function cl(e,t,n,r){for(var o=t.data,i=n;e?0<=i:i<o.length;e?i--:i++)if(r(o.charAt(i)))return e?i+1:i;return-1}function sl(e,t,n){return cl(e,t,n,function(e){return Jl(e)||Ws(e)})}function ll(e,t,n){return cl(e,t,n,$s)}function fl(o,e,t,n,i,r){function u(e,t,n){var r=ka(o),r=i?r.backwards:r.forwards;return ve.from(r(e,t,function(e,t){return Ql(e.parentNode)?-1:n(i,a=e,t)},c))}var a,c=o.getParent(t,o.isBlock)||e;return u(t,n,sl).bind(function(e){return r?u(e.container,e.offset+(i?-1:0),ll):ve.some(e)}).orThunk(function(){return a?ve.some({container:a,offset:i?0:a.length}):ve.none()})}function dl(e,t,n,r,o){B(r)&&Qe(r.data)&&r[o]&&(r=r[o]);for(var i=ef(e,r),u=0;u<i.length;u++)for(var a=0;a<t.length;a++){var c=t[a];if((!ne(c.collapsed)||c.collapsed===n.collapsed)&&ol(c)&&e.is(i[u],c.selector))return i[u]}return r}function ml(t,e,n,r){var o,i=n,u=t.dom,a=u.getRoot(),e=e[0];if((i=rl(e)?e.wrapper?null:u.getParent(n,e.block,a):i)||(o=u.getParent(n,"LI,TD,TH"),i=u.getParent(B(n)?n.parentNode:n,function(e){return e!==a&&nf(t,e)},o)),!(i=i&&rl(e)&&e.wrapper&&ef(u,i,"ul,ol").reverse()[0]||i))for(i=n;i[r]&&!u.isBlock(i[r])&&!Zs(i=i[r],"br"););return i||n}function gl(e,t,n,r,o){var i,u=n,a=o?"previousSibling":"nextSibling",c=e.getRoot();if(!B(n)||tf(n)||!(o?0<r:r<n.data.length))for(;;){if(!t[0].block_expand&&e.isBlock(u))return u;for(var s=u[a];s;s=s[a]){var l=B(s)&&!rf(e,c,s,a);if(!Ql(s)&&(!A(i=s)||!i.getAttribute("data-mce-bogus")||i.nextSibling)&&!tf(s,l))return u}if(u===c||u.parentNode===c){n=u;break}u=u.parentNode}return n}function pl(e){return Ql(e.parentNode)||Ql(e)}function hl(e,t,n,r){void 0===r&&(r=!1);var o=t.startContainer,i=t.startOffset,u=t.endContainer,a=t.endOffset,c=e.dom,s=n[0];return G(o)&&o.hasChildNodes()&&(o=Na(o,i),B(o))&&(i=0),G(u)&&u.hasChildNodes()&&(u=Na(u,t.collapsed?a:a-1),B(u))&&(a=u.nodeValue.length),o=al(c,o),u=al(c,u),pl(o)&&(o=Ql(o)?o:o.parentNode,o=t.collapsed?o.previousSibling||o:o.nextSibling||o,B(o))&&(i=t.collapsed?o.length:0),pl(u)&&(u=Ql(u)?u:u.parentNode,u=t.collapsed?u.nextSibling||u:u.previousSibling||u,B(u))&&(a=t.collapsed?0:u.length),t.collapsed&&(fl(c,e.getBody(),o,i,!0,r).each(function(e){var t=e.container,e=e.offset;o=t,i=e}),fl(c,e.getBody(),u,a,!1,r).each(function(e){var t=e.container,e=e.offset;u=t,a=e})),(il(s)||s.block_expand)&&(il(s)&&B(o)&&0!==i||(o=gl(c,n,o,i,!0)),il(s)&&B(u)&&a!==u.nodeValue.length||(u=gl(c,n,u,a,!1))),ul(s)&&(o=dl(c,n,t,o,"previousSibling"),u=dl(c,n,t,u,"nextSibling")),(rl(s)||ol(s))&&(o=ml(e,n,o,"previousSibling"),u=ml(e,n,u,"nextSibling"),rl(s))&&(c.isBlock(o)||(o=gl(c,n,o,i,!0)),c.isBlock(u)||(u=gl(c,n,u,a,!1))),G(o)&&(i=c.nodeIndex(o),o=o.parentNode),G(u)&&(a=c.nodeIndex(u)+1,u=u.parentNode),{startContainer:o,startOffset:i,endContainer:u,endOffset:a}}function vl(n,e,a){function c(e){var t=e[0],t=(B(t)&&t===u&&i>=t.data.length&&e.splice(0,1),e[e.length-1]);return 0===l&&0<e.length&&t===f&&B(t)&&e.splice(e.length-1,1),e}function s(e,t,n){for(var r=[];e&&e!==n;e=e[t])r.push(e);return r}function t(e,t){return n.getParent(e,function(e){return e.parentNode===t},t)}function r(e,t,n){var r=n?"nextSibling":"previousSibling",o=e;for(o.parentNode;o&&o!==t;o=i){var i=o.parentNode,u=s(o===e?o:o[r],r);u.length&&(n||u.reverse(),a(c(u)))}}var o,i=e.startOffset,u=Na(e.startContainer,i),l=e.endOffset,f=Na(e.endContainer,l-1);return u===f?a(c([u])):(e=n.findCommonAncestor(u,f),n.isChildOf(u,f)?r(u,e,!0):n.isChildOf(f,u)?r(f,e):(o=t(u,e)||u,e=t(f,e)||f,r(u,o,!0),(o=s(o===u?o:o.nextSibling,"nextSibling",e===f?e.nextSibling:e)).length&&a(c(o)),void r(f,e)))}function bl(e){var t=[];if(e)for(var n=0;n<e.rangeCount;n++)t.push(e.getRangeAt(n));return t}function yl(e,t){t=ha(t,"td[data-mce-selected],th[data-mce-selected]");return 0<t.length?t:z(Z(e,function(e){e=Ma(e);return e?[xe.fromDom(e)]:[]}),To)}function wl(e){return yl(bl(e.selection.getSel()),xe.fromDom(e.getBody()))}function xl(e,t){return Sr(e,"table",t)}function Cl(n,e){return Cn((t=e.startContainer,r=e.startOffset,B(t)?0===r?ve.some(xe.fromDom(t)):ve.none():ve.from(t.childNodes[r]).map(xe.fromDom)),(t=e.endContainer,r=e.endOffset,B(t)?r===t.data.length?ve.some(xe.fromDom(t)):ve.none():ve.from(t.childNodes[r-1]).map(xe.fromDom)),function(e,t){e=$(of(n),me(_,e)),t=$(uf(n),me(_,t));return e.isSome()&&t.isSome()}).getOr(!1);var t,r}function Sl(e,t,n,r){var o=n,i=new Pr(n,o),u=De(e.schema.getMoveCaretBeforeOnEnterElements(),function(e,t){return!Ee(["td","th","table"],t.toLowerCase())});do{if(B(n)&&0!==we.trim(n.nodeValue).length)return r?t.setStart(n,0):t.setEnd(n,n.nodeValue.length);if(u[n.nodeName])return r?t.setStartBefore(n):"BR"===n.nodeName?t.setEndBefore(n):t.setEndAfter(n)}while(n=r?i.next():i.prev());"BODY"===o.nodeName&&(r?t.setStart(o,0):t.setEnd(o,o.childNodes.length))}function kl(e){e=e.selection.getSel();return e&&0<e.rangeCount}function Tl(n,r){var e=wl(n);0<e.length?pe(e,function(e){var e=e.dom,t=n.dom.createRng();t.setStartBefore(e),t.setEndAfter(e),r(t,!0)}):r(n.selection.getRng(),!1)}function Ol(e,t,n){t=hc(e,t);n(t),e.moveToBookmark(t)}function El(e){return af.get(e)}function _l(e,t,n,r){var o=t.uid,o=void 0===o?ba("mce-annotation"):o,t=function(e,t){var n={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n}(t,["uid"]),e=xe.fromTag("span",e);ga(e,ja()),Tn(e,""+Wa(),o),Tn(e,""+Ua(),n);var i,n=r(o,t),r=n.attributes,o=n.classes,t=void 0===o?[]:o;return On(e,void 0===r?{}:r),i=e,pe(t,function(e){ga(i,e)}),e}function Al(u,e,t,n,r){function a(){f.clear()}function c(e){pe(e,o)}function o(e){var t,n,r,o=u,i=Pt(r=e);switch(jt(r).fold(function(){return"skipping"},function(e){return"br"===i||Fn(t=r)&&El(t)===Ao?"valid":Ln(t=r)&&pa(t,ja())?"existing":zs(r.dom)?"caret":Ys(o,"span",i)&&Ys(o,Pt(e),"span")?"valid":"invalid-child";var t})){case"invalid-child":a(),c(jn(e)),a();break;case"valid":en(t=e,n=f.get().getOrThunk(function(){var e=xa(l);return s.push(e),f.set(e),e})),$n(n,t)}}var s=[],l=_l(u.getDoc(),r,t,n),f=sa();vl(u.dom,e,function(e){a(),c(S(e,xe.fromDom))})}function Dl(o){n={};var n,e,t,r,i,u={register:function(e,t){n[e]={name:e,settings:t}},lookup:function(e){return he(n,e).map(function(e){return e.settings})}},a=u,c=((e=o).on("init",function(){e.serializer.addNodeFilter("span",function(e){pe(e,function(t){ve.from(t.attr(Ua())).bind(a.lookup).each(function(e){!1===e.persistent&&t.unwrap()})})})}),r=ra({}),i=fa(function(){var e=r.get();pe(oe(We(e)),function(e){f(e,function(u){var a=u.previous.get();return va(t,ve.some(e)).fold(function(){var t;a.isSome()&&(l(t=e,function(e){pe(e.listeners,function(e){e(!1,t)})}),u.previous.clear())},function(e){var t,n,r,o=e.uid,i=e.name,e=e.elements;xn(a,o)||(n=o,r=e,l(t=i,function(e){pe(e.listeners,function(e){e(!0,t,{uid:n,nodes:S(r,function(e){return e.dom})})})}),u.previous.set(o))}),{previous:u.previous,listeners:u.listeners}})})},30),(t=o).on("remove",function(){i.cancel()}),t.on("NodeChange",function(){i.throttle()}),{addListener:function(e,t){f(e,function(e){return{previous:e.previous,listeners:e.listeners.concat([t])}})}});function s(){return{listeners:[],previous:sa()}}function l(e,t){f(e,function(e){return t(e),e})}function f(e,t){var n=r.get(),t=t(he(n,e).getOrThunk(s));n[e]=t,r.set(n)}return{register:function(e,t){u.register(e,t)},annotate:function(t,n){u.lookup(t).each(function(e){var i,u=t,a=e,c=n;(i=o).undoManager.transact(function(){var e,t,n=i.selection,r=n.getRng(),o=0<wl(i).length;r.collapsed&&!o&&(t=hl(e=i,r=r,[{inline:"span"}]),r.setStart(t.startContainer,t.startOffset),r.setEnd(t.endContainer,t.endOffset),e.selection.setRng(r)),n.getRng().collapsed&&!o?(ya(t=_l(i.getDoc(),c,u,a.decorate),_o),n.getRng().insertNode(t.dom),n.select(t.dom)):Ol(n,!1,function(){Tl(i,function(e){Al(i,e,u,a.decorate,c)})})})})},annotationChanged:function(e,t){c.addListener(e,t)},remove:function(e){va(o,ve.some(e)).each(function(e){pe(e.elements,un)})},getAll:function(e){var r;return se((e=e,e=ha(xe.fromDom(o.getBody()),"["+Ua()+'="'+e+'"]'),r={},pe(e,function(e){var t=En(e,Wa()),n=he(r,t).getOr([]);r[t]=n.concat([e])}),r),function(e){return S(e,function(e){return e.dom})})}}}function Ml(e){return{getBookmark:me(Rl,e),moveToBookmark:me(js,e)}}function Nl(e){return Vo(e)||Wo(e=e)&&!0!==U(Ue(e.getElementsByTagName("*")),function(e,t){return e||Po(t)},!1)}(xt=es=es||{})[xt.Backwards=-1]="Backwards",xt[xt.Forwards=1]="Forwards";function Rl(e,t,n){return 2===t?gc(Mo,n,e):3===t?(r=(n=e).getRng(),{start:ac(n.dom.getRoot(),Se.fromRangeStart(r)),end:ac(n.dom.getRoot(),Se.fromRangeEnd(r))}):t?{rng:e.getRng()}:hc(e,!1);var r}var zl,Bl,Pl,Il=D,Ll=B,Fl=G,Hl=A,Vl=Xr,jl=Yr,Ul=function(e,t,n){var r,o,i;if(!Fl(n)||!t)return null;if(t.isEqual(Se.after(n))&&n.lastChild){if(i=Se.after(n.lastChild),e<0&&Vl(n.lastChild)&&Fl(n.lastChild))return Hl(n.lastChild)?Se.before(n.lastChild):i}else i=t;var u,a,c,t=i.container(),s=i.offset();if(Ll(t)){if(e<0&&0<s)return Se(t,--s);if(0<e&&s<t.length)return Se(t,++s);r=t}else{if(e<0&&0<s&&(a=Os(t,s-1),Vl(a)))return!Nl(a)&&(o=jc(a,e,jl,a))?Ll(o)?Se(o,o.data.length):Se.after(o):Ll(a)?Se(a,a.data.length):Se.before(a);if(0<e&&s<t.childNodes.length&&(a=Os(t,s),Vl(a)))return Hl(a)?(s=n,(c=(u=a).nextSibling)&&Vl(c)?Ll(c)?Se(c,0):Se.before(c):Ul(es.Forwards,Se.after(u),s)):!Nl(a)&&(o=jc(a,e,jl,a))?Ll(o)?Se(o,0):Se.before(o):Ll(a)?Se(a,0):Se.after(a);r=a||i.getNode()}return(0<e&&i.isAtEnd()||e<0&&i.isAtStart())&&(r=jc(r,e,C,n,!0),jl(r,n))?Es(e,r):(a=jc(r,e,jl,n),!(c=Le(z(function(e,t){for(var n=[];e&&e!==t;)n.push(e),e=e.parentNode;return n}(t,n),Il)))||a&&c.contains(a)?a?Es(e,a):null:0<e?Se.after(c):Se.before(c))},Wl=function(e,t,n){t=_s(t);return ve.from(e?t.next(n):t.prev(n))},$l=function(t,n,e,r){return Ns(t,n,e).bind(function(e){return r(e)?$l(t,n,e,r):ve.some(e)})},ql=me(Wl,!0),Gl=me(Wl,!1),Kl=me(Rs,!0),Xl=me(Rs,!1),Yl="_mce_caret",Jl=(zl=_o,function(e){return zl===e}),Zl=function(e,t){return void 0===t&&(t=!1),!(!ne(e)||!B(e))&&Jr(t?e.data.replace(/ /g,""):e.data)},Ql=Us,ef=nl,tf=Zl,nf=Xs,rf=function(e,t,n,r){var o=n.parentNode;return!ne(n[r])&&(!(o!==t&&!Y(o)&&!e.isBlock(o))||rf(e,t,o,r))},of=function(t){return Kt(t).fold(fe([t]),function(e){return[t].concat(of(e))})},uf=function(t){return Xt(t).fold(fe([t]),function(e){return"br"===Pt(e)?Ut(e).map(function(e){return[t].concat(uf(e))}).getOr([]):[t].concat(uf(e))})},af=(Bl=Fn,{get:function(e){if(Bl(e))return Pl(e).getOr("");throw new Error("Can only get text value of a text node")},getOption:Pl=function(e){return Bl(e)?ve.from(e.dom.nodeValue):ve.none()},set:function(e,t){if(!Bl(e))throw new Error("Can only set raw text value of a text node");e.dom.nodeValue=t}});function cf(e,t){for(;t&&t!==e;){if(tr(t)||D(t))return t;t=t.parentNode}return null}function sf(t,n,e){if(!e.collapsed){if(ye.browser.isIE()&&e.startOffset===e.endOffset-1&&e.startContainer===e.endContainer){var r=e.startContainer.childNodes[e.startOffset];if(G(r))return F(r.getClientRects(),function(e){return Da(e,t,n)})}return F(e.getClientRects(),function(e){return Da(e,t,n)})}}function lf(e,t,n){e.fire(t,n)}function ff(e,t,n,r){e.fire("FormatApply",{format:t,node:n,vars:r})}function df(e,t,n,r){return e.fire("FormatRemove",{format:t,node:n,vars:r})}function mf(n,c){function i(e){return e&&("IMG"===e.nodeName||c.dom.is(e,"figure.image"))}function s(e){return rr(e)||_.hasClass(e,"mce-preview-object")}function L(e){var t,n,r,o=e.target;t=e,n=c.selection.getRng(),("longpress"!==t.type&&0!==t.type.indexOf("touch")?!i(t.target)||sf(t.clientX,t.clientY,n):(r=t.touches[0],!i(t.target)||sf(r.clientX,r.clientY,n)))||e.isDefaultPrevented()||c.selection.select(o)}function l(e){return _.is(e,"figure.image")?[e.querySelector("img")]:_.hasClass(e,"mce-preview-object")&&ne(e.firstElementChild)?[e,e.firstElementChild]:[e]}function r(e){var t=Ec(c);return!!t&&"false"!==e.getAttribute("data-mce-resize")&&e!==c.getBody()&&(_.hasClass(e,"mce-preview-object")?it(xe.fromDom(e.firstElementChild),t):it(xe.fromDom(e),t))}function o(e,t,n){ne(n)&&pe(l(e),function(e){e.style[t]||!c.schema.isValid(e.nodeName.toLowerCase(),t)?_.setStyle(e,t,n):_.setAttrib(e,t,""+n)})}function f(e,t,n){o(e,"width",t),o(e,"height",n)}function d(e){var t,n=e.screenX-y,r=e.screenY-w;T=n*v[2]+x,O=r*v[3]+C,T=T<5?5:T,O=O<5?5:O,((i(g)||s(g))&&!1!==c.getParam("resize_img_proportional",!0,"boolean")?!ke.modifierPressed(e):ke.modifierPressed(e))&&(j(n)>j(r)?(O=M(T*S),T=M(O/S)):(T=M(O/S),O=M(T*S))),f(p,T,O),e=v.startPos.x+n,t=v.startPos.y+r,_.setStyles(h,{left:e=0<e?e:0,top:t=0<t?t:0,display:"block"}),h.innerHTML=T+" &times; "+O,v[2]<0&&p.clientWidth<=T&&_.setStyle(p,"left",void 0+(x-T)),v[3]<0&&p.clientHeight<=O&&_.setStyle(p,"top",void 0+(C-O)),(n=N.scrollWidth-F)+(r=N.scrollHeight-H)!=0&&_.setStyles(h,{left:e-n,top:t-r}),k||(e=g,n=x,t=C,r="corner-"+v.name,c.fire("ObjectResizeStart",{target:e,width:n,height:t,origin:r}),k=!0)}function u(e){function t(e,t){if(e)do{if(e===t)return 1}while(e=e.parentNode)}k||c.removed||(V(_.select("img[data-mce-selected],hr[data-mce-selected]"),function(e){e.removeAttribute(E)}),e="mousedown"===e.type?e.target:n.getNode(),t(e=_.$(e).closest("table,img,figure.image,hr,video,span.mce-preview-object")[0],N)&&(m(),t(n.getStart(!0),e))&&t(n.getEnd(!0),e)?B(e):P())}function a(e){return Of(cf(c.getBody(),e))}function m(){try{c.getDoc().execCommand("enableObjectResizing",!1,"false")}catch(e){}}var g,p,h,v,b,y,w,x,C,S,k,T,O,F,H,E="data-mce-selected",_=c.dom,V=we.each,A=c.getDoc(),D=document,j=Math.abs,M=Math.round,N=c.getBody(),R={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},z=function(){var e,t,n,r=k;k=!1,r&&(o(g,"width",T),o(g,"height",O)),_.unbind(A,"mousemove",d),_.unbind(A,"mouseup",z),D!==A&&(_.unbind(D,"mousemove",d),_.unbind(D,"mouseup",z)),_.remove(p),_.remove(h),_.remove(b),B(g),r&&(r=g,e=T,t=O,n="corner-"+v.name,c.fire("ObjectResized",{target:r,width:e,height:t,origin:n}),_.setAttrib(g,"style",_.getAttrib(g,"style"))),c.nodeChanged()},B=function(e){I();var t=_.getPos(e,N),o=t.x,i=t.y,t=e.getBoundingClientRect(),u=t.width||t.right-t.left,a=t.height||t.bottom-t.top,t=(g!==e&&(P(),g=e,T=O=0),c.fire("ObjectSelected",{target:e})),n=_.getAttrib(g,E,"1");r(e)&&!t.isDefaultPrevented()?V(R,function(n,r){var e=_.get("mceResizeHandle"+r);e&&_.remove(e),e=_.add(N,"div",{id:"mceResizeHandle"+r,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+r+"-resize; margin:0; padding:0"}),11===ye.ie&&(e.contentEditable=!1),_.bind(e,"mousedown",function(e){var t;e.stopImmediatePropagation(),e.preventDefault(),e=e,t=l(g)[0],y=e.screenX,w=e.screenY,x=t.clientWidth,C=t.clientHeight,S=C/x,(v=n).name=r,v.startPos={x:u*n[0]+o,y:a*n[1]+i},F=N.scrollWidth,H=N.scrollHeight,b=_.add(N,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),_.setStyles(b,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),p=s(e=g)?_.create("img",{src:ye.transparentSrc}):e.cloneNode(!0),_.addClass(p,"mce-clonedresizable"),_.setAttrib(p,"data-mce-bogus","all"),p.contentEditable="false",_.setStyles(p,{left:o,top:i,margin:0}),f(p,u,a),p.removeAttribute(E),N.appendChild(p),_.bind(A,"mousemove",d),_.bind(A,"mouseup",z),D!==A&&(_.bind(D,"mousemove",d),_.bind(D,"mouseup",z)),h=_.add(N,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},x+" &times; "+C)}),n.elm=e,_.setStyles(e,{left:u*n[0]+o-e.offsetWidth/2,top:a*n[1]+i-e.offsetHeight/2})}):P(),_.getAttrib(g,E)||g.setAttribute(E,n)},P=function(){I(),g&&g.removeAttribute(E),q(R,function(e,t){t=_.get("mceResizeHandle"+t);t&&(_.unbind(t),_.remove(t))})},I=function(){q(R,function(e){e.elm&&(_.unbind(e.elm),delete e.elm)})};return c.on("init",function(){m(),(ye.browser.isIE()||ye.browser.isEdge())&&(c.on("mousedown click",function(e){var t=e.target,n=t.nodeName;k||!/^(TABLE|IMG|HR)$/.test(n)||a(t)||(2!==e.button&&c.selection.select(t,"TABLE"===n),"mousedown"===e.type&&c.nodeChanged())}),_.bind(N,"mscontrolselect",e=function(e){function t(e){zr.setEditorTimeout(c,function(){return c.selection.select(e)})}a(e.target)||rr(e.target)?(e.preventDefault(),t(e.target)):/^(TABLE|IMG|HR)$/.test(e.target.nodeName)&&(e.preventDefault(),"IMG"===e.target.tagName)&&t(e.target)}),c.on("remove",function(){return _.unbind(N,"mscontrolselect",e)}));var e,t=zr.throttle(function(e){c.composing||u(e)});c.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",t),c.on("keyup compositionend",function(e){g&&"TABLE"===g.nodeName&&t(e)}),c.on("hide blur",P),c.on("contextmenu longpress",L,!0)}),c.on("remove",I),{isResizable:r,showResizeRect:B,hideResizeRect:P,updateResizeRect:u,destroy:function(){g=p=b=null}}}function gf(e){return tr(e)||D(e)}function pf(e,t,n){var r,o,i=n;if(i.caretPositionFromPoint)(o=i.caretPositionFromPoint(e,t))&&((r=n.createRange()).setStart(o.offsetNode,o.offset),r.collapse(!0));else if(i.caretRangeFromPoint)r=i.caretRangeFromPoint(e,t);else if(i.body.createTextRange){r=i.body.createTextRange();try{r.moveToPoint(e,t),r.collapse(!0)}catch(o){r=function(e,n,t){var r=t.elementFromPoint(e,n),o=t.body.createTextRange();if(r&&"HTML"!==r.tagName||(r=t.body),o.moveToElementText(r),0<(t=(t=we.toArray(o.getClientRects())).sort(function(e,t){return(e=Math.abs(Math.max(e.top-n,e.bottom-n)))-Math.abs(Math.max(t.top-n,t.bottom-n))})).length){n=(t[0].bottom+t[0].top)/2;try{return o.moveToPoint(e,n),o.collapse(!0),o}catch(e){}}return null}(e,t,n)}return i=r,e=n.body,t=i&&i.parentElement?i.parentElement():null,D(function(e,t,n){for(;e&&e!==t;){if(n(e))return e;e=e.parentNode}return null}(t,e,gf))?null:i}return r}function hf(e,t){return e&&t&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset}function vf(e,t,n){return null!==function(e,t,n){for(;e&&e!==t;){if(n(e))return e;e=e.parentNode}return null}(e,t,n)}function bf(e){return e&&"TABLE"===e.nodeName}function yf(e,t,n){for(var r=new Pr(t,e.getParent(t.parentNode,e.isBlock)||e.getRoot());t=r[n?"prev":"next"]();)if(A(t))return 1}function wf(e,t,n,r,o){var i,u,a=e.getRoot(),c=e.schema.getNonEmptyElements(),s=e.getParent(o.parentNode,e.isBlock)||a;if(r&&A(o)&&t&&e.isEmpty(s))return ve.some(Se(o.parentNode,e.nodeIndex(o)));for(var l,f,d=new Pr(o,s);u=d[r?"prev":"next"]();){if("false"===e.getContentEditableParent(u)||(f=a,Ur(l=u)&&!1===vf(l,f,zs)))return ve.none();if(B(u)&&0<u.nodeValue.length)return!1===vf(u,a,function(e){return"A"===e.nodeName})?ve.some(Se(u,r?u.nodeValue.length:0)):ve.none();if(e.isBlock(u)||c[u.nodeName.toLowerCase()])return ve.none();i=u}return n&&i?ve.some(Se(i,0)):ve.none()}function xf(e,t,n,r){var o,i=e.getRoot(),u=!1,a=r[(n?"start":"end")+"Container"],c=r[(n?"start":"end")+"Offset"],r=G(a)&&c===a.childNodes.length,s=e.schema.getNonEmptyElements(),l=n;if(Ur(a))return ve.none();if(G(a)&&c>a.childNodes.length-1&&(l=!1),Zn(a)&&(a=i,c=0),a===i){if(l&&(f=a.childNodes[0<c?c-1:0])){if(Ur(f))return ve.none();if(s[f.nodeName]||bf(f))return ve.none()}if(a.hasChildNodes()){if(c=Math.min(!l&&0<c?c-1:c,a.childNodes.length-1),a=a.childNodes[c],c=B(a)&&r?a.data.length:0,!t&&a===i.lastChild&&bf(a))return ve.none();if(function(e,t){for(;t&&t!==e;){if(D(t))return 1;t=t.parentNode}}(i,a)||Ur(a))return ve.none();if(a.hasChildNodes()&&!1===bf(a)){var f=a,d=new Pr(a,i);do{if(D(f)||Ur(f)){u=!1;break}if(B(f)&&0<f.nodeValue.length){c=l?0:f.nodeValue.length,a=f,u=!0;break}if(s[f.nodeName.toLowerCase()]&&(!(o=f)||!/^(TD|TH|CAPTION)$/.test(o.nodeName))){c=e.nodeIndex(f),a=f.parentNode,l||c++,u=!0;break}}while(f=l?d.next():d.prev())}}}return t&&(B(a)&&0===c&&wf(e,r,t,!0,a).each(function(e){a=e.container(),c=e.offset(),u=!0}),G(a))&&(!(f=(f=a.childNodes[c])||a.childNodes[c-1])||!A(f)||f.previousSibling&&"A"===f.previousSibling.nodeName||yf(e,f,!1)||yf(e,f,!0)||wf(e,r,t,!0,f).each(function(e){a=e.container(),c=e.offset(),u=!0})),l&&!t&&B(a)&&c===a.nodeValue.length&&wf(e,r,t,!1,a).each(function(e){a=e.container(),c=e.offset(),u=!0}),u?ve.some(Se(a,c)):ve.none()}function Cf(e,t){var n=t.collapsed,r=t.cloneRange(),o=Se.fromRangeStart(t);return xf(e,n,!0,r).each(function(e){n&&Se.isAbove(o,e)||r.setStart(e.container(),e.offset())}),n||xf(e,n,!1,r).each(function(e){r.setEnd(e.container(),e.offset())}),n&&r.collapse(!0),hf(t,r)?ve.none():ve.some(r)}function Sf(e,t){return e.splitText(t)}function kf(e){var t=e.startContainer,n=e.startOffset,r=e.endContainer,e=e.endOffset;return t===r&&B(t)?0<n&&n<t.nodeValue.length&&(t=(r=Sf(t,n)).previousSibling,n<e?(t=r=Sf(r,e-=n).previousSibling,e=r.nodeValue.length,n=0):e=0):(B(t)&&0<n&&n<t.nodeValue.length&&(t=Sf(t,n),n=0),B(r)&&0<e&&e<r.nodeValue.length&&(e=(r=Sf(r,e).previousSibling).nodeValue.length)),{startContainer:t,startOffset:n,endContainer:r,endOffset:e}}function Tf(n){return{walk:function(e,t){return vl(n,e,t)},split:kf,normalize:function(t){return Cf(n,t).fold(ge,function(e){return t.setStart(e.startContainer,e.startOffset),t.setEnd(e.endContainer,e.endOffset),!0})}}}Ml.isBookmarkNode=Us;var ke={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey||ke.metaKeyPressed(e)},metaKeyPressed:function(e){return ye.mac?e.metaKey:e.ctrlKey&&!e.altKey}},Of=D;Tf.compareRanges=hf,Tf.getCaretRangeFromPoint=pf,Tf.getSelectedNode=Ma,Tf.getNode=Na;Ef="height",_f=function(e){var t=e.dom;return Gn(e)?t.getBoundingClientRect().height:t.offsetHeight};var Ef,_f,Af={set:function(e,t){if(!T(t)&&!t.match(/^[0-9]+$/))throw new Error(Ef+".set accepts only positive integer values. Value was "+t);e=e.dom;Sn(e)&&(e.style[Ef]=t+"px")},get:Df,getOuter:Df,aggregate:Mf,max:function(e,t,n){e=Mf(e,n);return e<t?t-e:0}};function Df(e){var t=_f(e);return t<=0||null===t?(e=Nn(e,Ef),parseFloat(e)||0):t}function Mf(n,e){return U(e,function(e,t){t=Nn(n,t),t=void 0===t?0:parseInt(t,10);return isNaN(t)?e:e+t},0)}function Nf(e){return"textarea"===Pt(e)}function Rf(e,t){o=(a=e).dom.ownerDocument,u=o.body,i=o.defaultView,o=o.documentElement;var n,r,o,i,u=u===a.dom?Kn(u.offsetLeft,u.offsetTop):(n=an(null==i?void 0:i.pageYOffset,o.scrollTop),i=an(null==i?void 0:i.pageXOffset,o.scrollLeft),r=an(o.clientTop,u.clientTop),o=an(o.clientLeft,u.clientLeft),Xn(a).translate(i-o,n-r)),a=Af.get(e);return{element:e,bottom:u.top+a,height:a,pos:u,cleanup:t}}function zf(n,r,o,i){wd(n,function(e,t){return yd(n,r,o,i)},o)}function Bf(e,t,n,r,o){var i={elm:r.element.dom,alignToTop:o};e.fire("ScrollIntoView",i).isDefaultPrevented()||(n(t,cn(t).top,r,o),e.fire("AfterScrollIntoView",i))}function Pf(e,t,n,r){var o=xe.fromDom(e.getDoc());Bf(e,o,n,Rf(xe.fromDom(t),le),r)}function If(e,t,n,r){var o=e.pos;n?sn(o.left,o.top,r):(n=o.top-t+e.height,sn(o.left,n,r))}function Lf(e,t,n,r,o){var i=n+t,u=r.pos.top,a=r.bottom,c=n<=a-u;u<t?If(r,n,!1!==o,e):i<u?If(r,n,c?!1!==o:!0===o,e):i<a&&!c&&If(r,n,!0===o,e)}function Ff(e,t,n,r){Lf(e,t,e.dom.defaultView.innerHeight,n,r)}function Hf(e,t,n,r){Lf(e,t,e.dom.defaultView.innerHeight,n,r);t=n.element,e=cn(xe.fromDom(document)),o=(i=bd).owner(t),i=vd(i,o),o=Xn(t),t=j(i,function(e,t){t=Xn(t);return{left:e.left+t.left,top:e.top+t.top}},{left:0,top:0});var o,i=Kn(t.left+o.left+e.left,t.top+o.top+e.top),t=dn(window);i.top<t.y?ln(n.element,!1!==r):i.top>t.bottom&&ln(n.element,!0===r)}function Vf(e,t,n){zf(e,Ff,t,n)}function jf(e,t,n){Pf(e,t,Ff,n)}function Uf(e,t,n){zf(e,Hf,t,n)}function Wf(e,t,n){Pf(e,t,Hf,n)}function $f(e,t,n){(e.inline?Vf:Uf)(e,t,n)}function qf(e){var t=Wn(e).dom;return e.dom===t.activeElement}function Gf(e){return void 0===e&&(e=xe.fromDom(document)),ve.from(e.dom.activeElement).map(xe.fromDom)}function Kf(e,t){t=Fn(t)?El(t).length:jn(t).length+1;return t<e?t:e<0?0:e}function Xf(e){return Cd.range(e.start,Kf(e.soffset,e.start),e.finish,Kf(e.foffset,e.finish))}function Yf(e,t){return!gn(t.dom)&&(at(e,t)||_(e,t))}function Jf(t){return function(e){return Yf(t,e.start)&&Yf(t,e.finish)}}function Zf(e){return!0===e.inline||Sd.isIE()}function Qf(e){return Cd.range(xe.fromDom(e.startContainer),e.startOffset,xe.fromDom(e.endContainer),e.endOffset)}function ed(e){var t=document.createRange();try{return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),ve.some(t)}catch(e){return ve.none()}}function td(e){var t,n=Zf(e)?((n=Vt(t=xe.fromDom(e.getBody())).dom.getSelection())&&0!==n.rangeCount?ve.from(n.getRangeAt(0)):ve.none()).map(Qf).filter(Jf(t)):ve.none();e.bookmark=n.isSome()?n:e.bookmark}function nd(n){return(n.bookmark||ve.none()).bind(function(e){return t=xe.fromDom(n.getBody()),ve.from(e).filter(Jf(t)).map(Xf);var t}).bind(ed)}function rd(t,e){var n=t.getParam("custom_ui_selector","","string");return null!==Td.getParent(e,function(e){return kd.isEditorUIElement(e)||!!n&&t.dom.is(e,n)})}function od(n,e){var u,a,t=e.editor;a=la(function(){td(u)},0),(u=t).on("init",function(){function e(){t.throttle()}var t,n,r,o,i;u.inline&&(r=u,t=a,Ce.DOM.bind(document,"mouseup",e),r.on("remove",function(){Ce.DOM.unbind(document,"mouseup",e)})),n=u,r=a,Mt().browser.isIE()?(i=n).on("focusout",function(){td(i)}):(o=r,n.on("mouseup touchend",function(e){o.throttle()})),n.on("keyup NodeChange",function(e){"nodechange"===e.type&&e.selectionChange||td(n)})}),u.on("remove",function(){a.cancel()}),t.on("focusin",function(){var e=n.focusedEditor;e!==t&&(e&&e.fire("blur",{focusedEditor:t}),n.setActive(t),(n.focusedEditor=t).fire("focus",{blurredEditor:e}),t.focus(!0))}),t.on("focusout",function(){zr.setEditorTimeout(t,function(){var e=n.focusedEditor;rd(t,function(e){try{return Gf(Wn(xe.fromDom(e.getElement()))).fold(function(){return document.body},function(e){return e.dom})}catch(e){return document.body}}(t))||e!==t||(t.fire("blur",{focusedEditor:null}),n.focusedEditor=null)})}),hd||(hd=function(e){var t=n.activeEditor;t&&!function(e){if(Un()&&ne(e.target)){var t=xe.fromDom(e.target);if(Ln(t)&&ne(t.dom.shadowRoot)&&e.composed&&e.composedPath){t=e.composedPath();if(t)return ue(t)}}return ve.from(e.target)}(e).each(function(e){e.ownerDocument!==document||e===document.body||rd(t,e)||n.focusedEditor!==t||(t.fire("blur",{focusedEditor:null}),n.focusedEditor=null)})},Td.bind(document,"focusin",hd))}function id(e,t){e.focusedEditor===t.editor&&(e.focusedEditor=null),e.activeEditor||(Td.unbind(document,"focusin",hd),hd=null)}function ud(t,e){var n=xe.fromDom(t.getBody());(e.collapsed?ve.from(Na(e.startContainer,e.startOffset)).map(xe.fromDom):ve.none()).bind(function(e){return ko(e)?ve.some(e):!1===at(n,e)?ve.some(n):ve.none()}).bind(function(e){return Kl(e.dom)}).fold(function(){t.selection.normalize()},function(e){return t.selection.setRng(e.toRange())})}function ad(t){if(t.setActive)try{t.setActive()}catch(e){t.focus()}else t.focus()}function cd(e){return e.inline?(n=e.getBody())&&(qf(n=xe.fromDom(n))||Gf(Wn(t=n)).filter(function(e){return t.dom.contains(e.dom)}).isSome()):e.iframeElement&&qf(xe.fromDom(e.iframeElement));var t,n}function sd(e,t,n,r,o){var i=n?t.startContainer:t.endContainer,u=n?t.startOffset:t.endOffset;return ve.from(i).map(xe.fromDom).map(function(e){return r&&t.collapsed?e:Gt(e,o(e,u)).getOr(e)}).bind(function(e){return Ln(e)?ve.some(e):jt(e).filter(Ln)}).map(function(e){return e.dom}).getOr(e)}function ld(e,t,n){return sd(e,t,!0,n,function(e,t){return Math.min(Yt(e),t)})}function fd(e,t,n){return sd(e,t,!1,n,function(e,t){return 0<t?t-1:t})}function dd(e,t){for(var n=e;e&&B(e)&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||n}function md(n,e){return S(e,function(e){var t=n.fire("GetSelectionRange",{range:e});return t.range!==e?t.range:e})}function gd(e,t,n){var r=n?"lastChild":"firstChild",o=n?"prev":"next";if(e[r])return e[r];if(e!==t){var i=e[o];if(i)return i;for(var u=e.parent;u&&u!==t;u=u.parent)if(i=u[o])return i}}function pd(e){var t="a"===e.name&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||t}var hd,vd=function(n,e){return n.view(e).fold(fe([]),function(e){var t=n.owner(e),t=vd(n,t);return[e].concat(t)})},bd=Object.freeze({__proto__:null,view:function(e){return(e.dom===document?ve.none():ve.from(null==(e=e.dom.defaultView)?void 0:e.frameElement)).map(xe.fromDom)},owner:Ht}),yd=function(e,t,n,r){var o=xe.fromDom(e.getBody()),i=xe.fromDom(e.getDoc());o.dom.offsetWidth;o=xe.fromDom(n.startContainer),n=n.startOffset,n=n,o=0===(a=jn(o=o)).length||Nf(o)?{element:o,offset:n}:n<a.length&&!Nf(a[n])?{element:a[n],offset:0}:Nf(a=a[a.length-1])?{element:o,offset:n}:"img"===Pt(a)?{element:a,offset:1}:Fn(a)?{element:a,offset:El(a).length}:{element:a,offset:jn(a).length},u=xe.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">\ufeff</span>'),en(o.element,u);var u,a,n=Rf(u,function(){return qn(u)});Bf(e,i,t,n,r),n.cleanup()},wd=function(e,t,n){var r=n.startContainer,o=n.startOffset,i=n.endContainer,u=n.endOffset,t=(t(xe.fromDom(r),xe.fromDom(i)),e.dom.createRng());t.setStart(r,o),t.setEnd(i,u),e.selection.setRng(n)},t=lr([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),xd=(t.before,t.on,t.after,lr([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}])),Cd={domRange:xd.domRange,relative:xd.relative,exact:xd.exact,exactFromRange:function(e){return xd.exact(e.start,e.soffset,e.finish,e.foffset)},getWin:function(e){return Vt(e.match({domRange:function(e){return xe.fromDom(e.startContainer)},relative:function(e,t){return e.fold(m,m,m)},exact:function(e,t,n,r){return e}}))},range:function(e,t,n,r){return{start:e,soffset:t,finish:n,foffset:r}}},Sd=Mt().browser,kd={isEditorUIElement:function(e){e=e.className.toString();return-1!==e.indexOf("tox-")||-1!==e.indexOf("mce-")}},Td=Ce.DOM,Od=function(e){return e.editorManager.setActive(e)},Ed={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},_d=(Ad.create=function(e,t){var n=new Ad(e,Ed[e]||1);return t&&q(t,function(e,t){n.attr(t,e)}),n},Ad.prototype.replace=function(e){return e.parent&&e.remove(),this.insert(e,this),this.remove(),this},Ad.prototype.attr=function(e,t){var n,r=this;if("string"!=typeof e)return null!=e&&q(e,function(e,t){r.attr(t,e)}),r;if(n=r.attributes){if(void 0===t)return n.map[e];if(null===t){if(e in n.map){delete n.map[e];for(var o=n.length;o--;)if(n[o].name===e)return n.splice(o,1),r}}else{if(e in n.map){for(o=n.length;o--;)if(n[o].name===e){n[o].value=t;break}}else n.push({name:e,value:t});n.map[e]=t}return r}},Ad.prototype.clone=function(){var e,t=new Ad(this.name,this.type);if(e=this.attributes){var n=[];n.map={};for(var r=0,o=e.length;r<o;r++){var i=e[r];"id"!==i.name&&(n[n.length]={name:i.name,value:i.value},n.map[i.name]=i.value)}t.attributes=n}return t.value=this.value,t.shortEnded=this.shortEnded,t},Ad.prototype.wrap=function(e){return this.parent.insert(e,this),e.append(this),this},Ad.prototype.unwrap=function(){for(var e=this.firstChild;e;){var t=e.next;this.insert(e,this,!0),e=t}this.remove()},Ad.prototype.remove=function(){var e=this.parent,t=this.next,n=this.prev;return e&&(e.firstChild===this?(e.firstChild=t)&&(t.prev=null):n.next=t,e.lastChild===this?(e.lastChild=n)&&(n.next=null):t.prev=n,this.parent=this.next=this.prev=null),this},Ad.prototype.append=function(e){e.parent&&e.remove();var t=this.lastChild;return t?((t.next=e).prev=t,this.lastChild=e):this.lastChild=this.firstChild=e,e.parent=this,e},Ad.prototype.insert=function(e,t,n){e.parent&&e.remove();var r=t.parent||this;return n?(t===r.firstChild?r.firstChild=e:t.prev.next=e,e.prev=t.prev,(e.next=t).prev=e):(t===r.lastChild?r.lastChild=e:t.next.prev=e,e.next=t.next,(e.prev=t).next=e),e.parent=r,e},Ad.prototype.getAll=function(e){for(var t=[],n=this.firstChild;n;n=gd(n,this))n.name===e&&t.push(n);return t},Ad.prototype.children=function(){for(var e=[],t=this.firstChild;t;t=t.next)e.push(t);return e},Ad.prototype.empty=function(){if(this.firstChild){for(var e=[],t=this.firstChild;t;t=gd(t,this))e.push(t);for(var n=e.length;n--;)(t=e[n]).parent=t.firstChild=t.lastChild=t.next=t.prev=null}return this.firstChild=this.lastChild=null,this},Ad.prototype.isEmpty=function(e,t,n){void 0===t&&(t={});var r=this.firstChild;if(pd(this))return!1;if(r)do{if(1===r.type){if(r.attr("data-mce-bogus"))continue;if(e[r.name])return!1;if(pd(r))return!1}if(8===r.type)return!1;if(3===r.type&&!function(e){var t;if(Jr(e.value))return!(t=e.parent)||"span"===t.name&&!t.attr("style")||!/^[ ]+$/.test(e.value)}(r))return!1;if(3===r.type&&r.parent&&t[r.parent.name]&&Jr(r.value))return!1;if(n&&n(r))return!1}while(r=gd(r,this));return!0},Ad.prototype.walk=function(e){return gd(this,null,e)},Ad);function Ad(e,t){this.name=e,1===(this.type=t)&&(this.attributes=[],this.attributes.map={})}function Dd(e){return de(e.nodeValue)&&Ye(e.nodeValue,Ao)}function Md(e){return(0===e.length?"":S(e,function(e){return"["+e+"]"}).join(",")+",")+'[data-mce-bogus="all"]'}function Nd(e,t,n){return document.createTreeWalker(e,t,n,!1)}function Rd(e){return Nd(e,NodeFilter.SHOW_COMMENT,function(e){return Dd(e)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP})}function zd(e){return Nd(e,NodeFilter.SHOW_TEXT,function(e){return Dd(e)&&(e=e.parentNode)&&re(Wd,e.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP})}function Bd(e){return null!==Rd(e).nextNode()}function Pd(e){return null!==zd(e).nextNode()}function Id(e,t){return null!==t.querySelector(Md(e))}function Ld(n,e){pe(e.querySelectorAll(Md(n)),function(e){var t=xe.fromDom(e);"all"===En(t,"data-mce-bogus")?qn(t):pe(n,function(e){An(t,e)&&Dn(t,e)})})}function Fd(e){for(var t=e.nextNode();null!==t;)t.nodeValue=null,t=e.nextNode()}function Hd(n,e){var e=[{condition:me(Id,e),action:me(Ld,e)},{condition:Bd,action:$d},{condition:Pd,action:qd}],r=n,o=!1;return pe(e,function(e){var t=e.condition,e=e.action;t(r)&&(o||(r=n.cloneNode(!0),o=!0),e(r))}),r}function Vd(o){return{compare:function(e,t){return e.nodeName===t.nodeName&&!(!r(n(e),n(t))||!r(o.parseStyle(o.getAttrib(e,"style")),o.parseStyle(o.getAttrib(t,"style")))||Us(e)||Us(t));function n(t){var n={};return Gd(o.getAttribs(t),function(e){e=e.nodeName.toLowerCase();0!==e.indexOf("_")&&"style"!==e&&0!==e.indexOf("data-")&&(n[e]=o.getAttrib(t,e))}),n}function r(e,t){var n,r;for(r in e)if(re(e,r)){if(void 0===(n=t[r]))return;if(e[r]!==n)return;delete t[r]}for(r in t)if(re(t,r))return;return 1}}}}function jd(e){var a=[],c=(e=e||{}).indent,s=Kd(e.indent_before||""),l=Kd(e.indent_after||""),f=ii.getEncodeFunc(e.entity_encoding||"raw",e.entities),d="html"===e.element_format;return{start:function(e,t,n){var r,o,i,u;if(c&&s[e]&&0<a.length&&0<(u=a[a.length-1]).length&&"\n"!==u&&a.push("\n"),a.push("<",e),t)for(r=0,o=t.length;r<o;r++)i=t[r],a.push(" ",i.name,'="',f(i.value,!0),'"');a[a.length]=!n||d?">":" />",n&&c&&l[e]&&0<a.length&&0<(u=a[a.length-1]).length&&"\n"!==u&&a.push("\n")},end:function(e){a.push("</",e,">"),c&&l[e]&&0<a.length&&0<(e=a[a.length-1]).length&&"\n"!==e&&a.push("\n")},text:function(e,t){0<e.length&&(a[a.length]=t?e:f(e))},cdata:function(e){a.push("<![CDATA[",e,"]]>")},comment:function(e){a.push("\x3c!--",e,"--\x3e")},pi:function(e,t){t?a.push("<?",e," ",f(t),"?>"):a.push("<?",e,"?>"),c&&a.push("\n")},doctype:function(e){a.push("<!DOCTYPE",e,">",c?"\n":"")},reset:function(){a.length=0},getContent:function(){return a.join("").replace(/\n$/,"")}}}function Ud(t,m){void 0===m&&(m=lo());var g=jd(t);return(t=t||{}).validate=!("validate"in t)||t.validate,{serialize:function(e){var l=t.validate,f={3:function(e){g.text(e.value,e.raw)},8:function(e){g.comment(e.value)},7:function(e){g.pi(e.name,e.value)},10:function(e){g.doctype(e.value)},4:function(e){g.cdata(e.value)},11:function(e){if(e=e.firstChild)for(;d(e),e=e.next;);}},d=(g.reset(),function(e){var t=f[e.type];if(t)t(e);else{var t=e.name,n=e.shortEnded,r=e.attributes;if(l&&r&&1<r.length){var o=[],i=(o.map={},m.getElementRule(e.name));if(i){for(var u=0,a=i.attributesOrder.length;u<a;u++)(c=i.attributesOrder[u])in r.map&&(s=r.map[c],o.map[c]=s,o.push({name:c,value:s}));for(var c,s,u=0,a=r.length;u<a;u++)(c=r[u].name)in o.map||(s=r.map[c],o.map[c]=s,o.push({name:c,value:s}));r=o}}if(g.start(e.name,r,n),!n){if(e=e.firstChild)for(;d(e),e=e.next;);g.end(t)}}});return 1!==e.type||t.inner?f[11](e):d(e),g.getContent()}}}var Wd=we.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),$d=c(Fd,Rd),qd=c(Fd,zd),Gd=we.each,Kd=we.makeMap,Xd=new Set;function Yd(e,t){return We(e.parseStyle(e.getAttrib(t,"style")))}function Jd(n,r,o){return ve.from(o.container()).filter(B).exists(function(e){var t=n?0:-1;return r(e.data.charAt(o.offset()+t))})}function Zd(e){e=e.container();return B(e)&&(0===e.data.length||Do(e.data)&&Ml.isBookmarkNode(e.parentNode))}function Qd(t,n){return function(e){return ve.from($c(t?0:-1,e)).filter(n).isSome()}}function em(e){return er(e)&&"block"===Nn(xe.fromDom(e),"display")}function tm(e){return D(e)&&!(G(e=e)&&"all"===e.getAttribute("data-mce-bogus"))}function nm(e){on(e),$n(e,xe.fromHtml('<br data-mce-bogus="1">'))}function rm(n){Xt(n).each(function(t){Ut(t).each(function(e){wo(n)&&Hr(t)&&wo(e)&&qn(t)})})}function om(e,t){return r=ge,at(n=t,t=e)?function(e,t){for(var n=O(t)?t:ge,r=e.dom,o=[];null!==r.parentNode&&void 0!==r.parentNode;){var i=r.parentNode,u=xe.fromDom(i);if(o.push(u),!0===n(u))break;r=i}return o}(t,function(e){return r(e)||_(e,n)}).slice(0,-1):[];var n,r}function im(e,t){return[e].concat(om(e,t))}function um(e,t,n){return $l(e,t,n,Zd)}function am(e,t){return $(im(xe.fromDom(t.container()),e),wo)}function cm(e,n,r){return um(e,n.dom,r).forall(function(t){return am(n,r).fold(function(){return!1===Wc(t,r,n.dom)},function(e){return!1===Wc(t,r,n.dom)&&at(e,xe.fromDom(t.container()))})})}function sm(t,n,r){return am(n,r).fold(function(){return um(t,n.dom,r).forall(function(e){return!1===Wc(e,r,n.dom)})},function(e){return um(t,e.dom,r).isNone()})}function lm(e){return Jc(e).exists(Hr)}function fm(e,t,n){t=ue(z(im(xe.fromDom(n.container()),t),wo)).getOr(t);return Wl(e,t.dom,n).filter(lm)}function dm(e,t){return Jc(t).exists(Hr)||fm(!0,e,t).isSome()}function mm(e,t){return ve.from(t.getNode(!0)).map(xe.fromDom).exists(Hr)||fm(!1,e,t).isSome()}function gm(e){return Se.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd()}function pm(e,t){return ue(z(im(xe.fromDom(t.container()),e),wo)).getOr(e)}function hm(e,t){return gm(t)?Dg(t):Dg(t)||Gl(pm(e,t).dom,t).exists(Dg)}function vm(e,t){return gm(t)?Ag(t):Ag(t)||ql(pm(e,t).dom,t).exists(Ag)}function bm(e){return Jc(e).bind(function(e){return Cr(e,Ln)}).exists(function(e){return Ee(["pre","pre-wrap"],Nn(e,"white-space"))})}function ym(e,t){return!bm(t)&&(Fg(e,t)||Vg(e,t)||mm(e,t)||hm(e,t))}function wm(e,t){return!bm(t)&&(Hg(e,t)||jg(e,t)||dm(e,t)||vm(e,t))}function xm(e,t){return ym(e,t)||wm(e,(t=(e=t).container(),n=e.offset(),B(t)&&n<t.data.length?Se(t,n+1):e));var n}function Cm(e,t){return Jl(e.charAt(t))}function Sm(e){e=e.container();return B(e)&&Ye(e.data,_o)}function km(t){var c,e=xe.fromDom(t.getBody());t.selection.isCollapsed()&&(c=e,e=Se.fromRangeStart(t.selection.getRng()),ve.some(e).filter(Sm).bind(function(e){var t,n,r,o=e.container(),i=c,u=(t=o).data,a=Se(t,0);return(!Cm(u,0)||xm(i,a)?(a=(i=o).data,(r=S(n=a.split(""),function(e,t){return Jl(e)&&0<t&&t<n.length-1&&$s(n[t-1])&&$s(n[t+1])?" ":e}).join(""))!==a&&(i.data=r,1)):(t.data=" "+u.slice(1),1))||(a=c,r=(i=o).data,t=Se(i,r.length-1),Cm(r,r.length-1)&&!xm(a,t)&&(i.data=r.slice(0,-1)+" ",1))?ve.some(e):ve.none()}).each(function(e){t.selection.setRng(e.toRange())}))}function Tm(e,t,n){var r,o,i,u,a,c;0!==n&&(i=xr(i=xe.fromDom(e),wo).getOr(i),r=e.data.slice(t,t+n),o=t+n>=e.data.length&&wm(i,Se(e,e.data.length)),i=0===t&&ym(i,Se(e,0)),e.replaceData(t,n,(a=i,c=o,U(u=r,function(e,t){return Ws(t)||Jl(t)?e.previousCharIsSpace||""===e.str&&a||e.str.length===u.length-1&&c?{previousCharIsSpace:!1,str:e.str+_o}:{previousCharIsSpace:!0,str:e.str+" "}:{previousCharIsSpace:!1,str:e.str+t}},{previousCharIsSpace:!1,str:""}).str)))}function Om(e,t){var n=e.data.slice(t);Tm(e,t,n.length-yt(n).length)}function Em(e,t){var n=e.data.slice(0,t),n=n.length-wt(n).length;Tm(e,t-n,n)}function _m(e,t,n,r){void 0===r&&(r=!0);var o=wt(e.data).length,i=r?e:t,t=r?t:e;r?i.appendData(t.data):i.insertData(0,t.data),qn(xe.fromDom(t)),n&&Om(i,o)}function Am(e,t){return e=e,r=(n=t).container(),o=n.offset(),!1===Se.isTextPosition(n)&&r===e.parentNode&&o>Se.before(e).offset()?Se(t.container(),t.offset()-1):t;var n,r,o}function Dm(e){return Xr(e.previousSibling)?ve.some((t=e.previousSibling,B(t)?Se(t,t.data.length):Se.after(t))):e.previousSibling?Xl(e.previousSibling):ve.none();var t}function Mm(e){return Xr(e.nextSibling)?ve.some((t=e.nextSibling,B(t)?Se(t,0):Se.before(t))):e.nextSibling?Kl(e.nextSibling):ve.none();var t}function Nm(r,o){return Dm(o).orThunk(function(){return Mm(o)}).orThunk(function(){return e=r,n=Se.before((t=o).previousSibling||t.parentNode),Gl(e,n).fold(function(){return ql(e,Se.after(t))},ve.some);var e,t,n})}function Rm(n,r){return Mm(r).orThunk(function(){return Dm(r)}).orThunk(function(){return ql(e=n,Se.after(t=r)).fold(function(){return Gl(e,Se.before(t))},ve.some);var e,t})}function zm(t,n,e){e.fold(function(){t.focus()},function(e){t.selection.setRng(e.toRange(),n)})}function Bm(e,t){return t&&re(e.schema.getBlockElements(),Pt(t))}function Pm(e){var t;return Qr(e)?(t=xe.fromHtml('<br data-mce-bogus="1">'),on(e),$n(e,t),ve.some(Se.before(t.dom))):ve.none()}function Im(t,n,e,r){void 0===r&&(r=!0);var o,i,u,a,c,s,l,f=(n?Rm:Nm)(t.getBody(),f=e.dom).map(me(Am,f)),d=xr(e,me(Bm,t),(o=t.getBody(),function(e){return e.dom===o})),m=(i=f,e=f=e,u=re(t.schema.getTextInlineElements(),Pt(e)),s=Ut(f).filter(Fn),l=Wt(f).filter(Fn),qn(f),e=l,f=i,c=function(e,t,n){var e=e.dom,t=t.dom,r=e.data.length;return _m(e,t,u),n.container()===t?Se(e,r):n},((a=s).isSome()&&e.isSome()&&f.isSome()?ve.some(c(a.getOrDie(),e.getOrDie(),f.getOrDie())):ve.none()).orThunk(function(){return u&&(s.each(function(e){return Em(e.dom,e.dom.length)}),l.each(function(e){return Om(e.dom,0)})),i}));t.dom.isEmpty(t.getBody())?(t.setContent(""),t.selection.setCursorLocation()):d.bind(Pm).fold(function(){r&&zm(t,n,m)},function(e){r&&zm(t,n,ve.some(e))})}function Lm(e){return ha(e,"td,th")}function Fm(e,t){return{start:e,end:t}}function Hm(e,t){return Tr(xe.fromDom(e),"td,th",t)}function Vm(e){return!_(e.start,e.end)}function jm(e,n){return xl(e.start,n).bind(function(t){return xl(e.end,n).bind(function(e){return _(t,e)?ve.some(t):ve.none()})})}function Um(e){return function(t){return jm(t,e).map(function(e){return{rng:t,table:e,cells:Lm(e)}})}}function Wm(e,t,n,r){var o,i;return n.collapsed||!e.forall(Vm)?ve.none():t.isSameTable?(t=e.bind(Um(r)),ve.some({start:t,end:t})):(e=Hm(n.startContainer,r),t=Hm(n.endContainer,r),n=e.bind((i=r,function(t){return xl(t,i).bind(function(e){return ae(Lm(e)).map(function(e){return Fm(t,e)})})})).bind(Um(r)),e=t.bind((o=r,function(t){return xl(t,o).bind(function(e){return ue(Lm(e)).map(function(e){return Fm(e,t)})})})).bind(Um(r)),ve.some({start:n,end:e}))}function $m(e,t){return J(e,function(e){return _(e,t)})}function qm(n){return Cn($m(n.cells,n.rng.start),$m(n.cells,n.rng.end),function(e,t){return n.cells.slice(e,t+1)})}function Gm(e,t){var n=t.startTable,t=t.endTable,r=e.cloneRange();return n.each(function(e){return r.setStartAfter(e.dom)}),t.each(function(e){return r.setEndBefore(e.dom)}),r}function Km(e,t){function n(e){return _(r,e)}r=e;var r,o,i,u,a,c,s,l,f,d,m,e=Cn(Hm((e=t).startContainer,g=n),Hm(e.endContainer,g),Fm),g=(c=n,f=p((g=t).startContainer),g=p(g.endContainer),s=f.isSome(),l=g.isSome(),{startTable:f,endTable:g,isStartInTable:s,isEndInTable:l,isSameTable:f=Cn(f,g,_).getOr(!1),isMultiTable:!f&&s&&l});function p(e){return xl(xe.fromDom(e),c)}return d=t,m=n,e.exists(function(e){return!Vm(t=e)&&jm(t,m).exists(function(e){e=e.dom.rows;return 1===e.length&&1===e[0].cells.length})&&Cl(e.start,d);var t})?e.map(function(e){return $g.singleCellTable(t,e.start)}):g.isMultiTable?Wm(e,u=g,a=t,n).bind(function(e){var t,n=e.start,e=e.end,n=n.bind(qm).getOr([]),e=e.bind(qm).getOr([]);return 0<n.length&&0<e.length?(t=Gm(a,u),ve.some($g.multiTable(n,e,t))):ve.none()}):Wm(e,o=g,i=t,n).bind(function(e){var t=e.start,e=e.end;return t.or(e)}).bind(function(e){var t=o.isSameTable,n=qm(e).getOr([]);return t&&e.cells.length===n.length?ve.some($g.fullTable(e.table)):0<n.length?t?ve.some($g.partialTable(n,ve.none())):(e=Gm(i,o),ve.some($g.partialTable(n,ve.some(be(be({},o),{rng:e}))))):ve.none()})}function Xm(e){pe(e,function(e){Dn(e,"contenteditable"),nm(e)})}function Ym(e,t,n,r){var o=n.cloneRange();r?(o.setStart(n.startContainer,n.startOffset),o.setEndAfter(t.dom.lastChild)):(o.setStartBefore(t.dom.firstChild),o.setEnd(n.endContainer,n.endOffset)),Gg(e,o,t,!1)}function Jm(e){var t=wl(e),n=xe.fromDom(e.selection.getNode());nr(n.dom)&&Qr(n)?e.selection.setCursorLocation(n.dom,0):e.selection.collapse(!0),1<t.length&&F(t,function(e){return _(e,n)})&&Tn(n,"data-mce-selected","1")}function Zm(i,u,e){var a=i.selection.getRng();return Xm(e.bind(function(e){var t,n,r=e.rng,e=e.isStartInTable,o=(o=e?r.endContainer:r.startContainer,ve.from(i.dom.getParent(o,i.dom.isBlock)).map(xe.fromDom)),r=(r.deleteContents(),t=i,n=e,o.filter(Qr).each(function(e){n?qn(e):(nm(e),t.selection.setCursorLocation(e.dom,0))}),e?u[0]:u[u.length-1]);return Ym(i,r,a,e),Qr(r)?ve.none():ve.some(e?u.slice(1):u.slice(0,-1))}).getOr(u)),Jm(i),!0}function Qm(e,t,n,r){var o=e.selection.getRng(),i=t[0],u=n[n.length-1],o=(Ym(e,i,o,!0),Ym(e,u,o,!1),Qr(i)?t:t.slice(1)),i=Qr(u)?n:n.slice(0,-1);return Xm(o.concat(i)),r.deleteContents(),Jm(e),!0}function eg(e,t){return Im(e,!1,t),!0}function tg(e,t){return $(im(t,e),To)}function ng(e,t){return(e?Bg:Pg)(t)}function rg(e,t){var n,r,o,i,f,d,a,m,u=xe.fromDom(e.selection.getStart(!0)),c=wl(e);return e.selection.isCollapsed()&&0===c.length?(f=e,d=t,a=u,m=xe.fromDom(f.getBody()),Kg(m,a).fold(function(){return r=f,o=d,i=m,e=a,u=Se.fromRangeStart(r.selection.getRng()),tg(i,e).bind(function(e){return Qr(e)?Xg(r,e):(t=i,n=e,e=u,Ns(o,r.getBody(),e).bind(function(e){return tg(t,xe.fromDom(e.getNode())).map(function(e){return!1===_(e,n)})}));var t,n}).getOr(!1)||(t=d,n=Se.fromRangeStart((e=f).selection.getRng()),ng(t,n))||Wl(t,e.getBody(),n).exists(function(e){return ng(t,e)});var r,o,i,u,e,t,n},function(e){return n=d,r=m,e=e,o=Se.fromRangeStart((t=f).selection.getRng()),(Qr(e)?Xg(t,e):(a=r,s=e,l=o,Ns(c=n,(u=t).getBody(),l).bind(function(e){return r=c,o=l,i=e,Kl((n=s).dom).bind(function(t){return Xl(n.dom).map(function(e){return r?o.isEqual(t)&&i.isEqual(e):o.isEqual(e)&&i.isEqual(t)})}).getOr(!0)?Xg(u,s):(t=s,Kg(a,xe.fromDom(e.getNode())).map(function(e){return!1===_(e,t)}));var t,n,r,o,i}).or(ve.some(!0)))).getOr(!1);var u,a,c,s,l,t,n,r,o})):(t=u,u=c,e=xe.fromDom((c=e).getBody()),n=c.selection.getRng(),0!==u.length?Zm(c,u,ve.none()):(r=c,i=n,Kg(o=e,t).fold(function(){return t=r,Km(o,i).map(function(e){return e.fold(me(Gg,t),me(eg,t),me(Zm,t),me(Qm,t))});var t},function(e){return Xg(r,e)}).getOr(!1)))}function og(e){return e.collapsed?e:(u=Se.fromRangeStart(i=e),a=Se.fromRangeEnd(i),c=i.commonAncestorContainer,Wl(!1,c,a).map(function(e){return!Wc(u,a,c)&&Wc(u,e,c)?(t=u.container(),n=u.offset(),r=e.container(),e=e.offset(),(o=document.createRange()).setStart(t,n),o.setEnd(r,e),o):i;var t,n,r,o}).getOr(i));var i,u,a,c}function ig(e,t){t=e.getParent(t,e.isBlock);return t&&"LI"===t.nodeName?t:null}function ug(e,t){e=Se.after(e),t=_s(t).prev(e);return t?t.toRange():null}function ag(e,r,o,t){function n(e){var t=Se.fromRangeStart(o),n=_s(r.getRoot()),e=1===e?n.prev(t):n.next(t);return!e||ig(r,e.getNode())!==d}f=r,e=e.serialize(t),f=(t=f.createFragment(e)).firstChild,e=t.lastChild,f&&"META"===f.nodeName&&f.parentNode.removeChild(f),e&&"mce_marker"===e.id&&e.parentNode.removeChild(e);var i,u,a,c,s,l,f=t,d=ig(r,o.startContainer),f=0<(e=z(f.firstChild.childNodes,function(e){return"LI"===e.nodeName})).length&&(!(t=e[e.length-1]).firstChild||t&&t.firstChild&&t.firstChild===t.lastChild&&((t=t.firstChild).data===_o||A(t)))?e.slice(0,-1):e,t=r.getRoot();return n(1)?(e=t,l=(c=d).parentNode,we.each(f,function(e){l.insertBefore(e,c)}),e=e,s=Se.before(c),(e=_s(e).next(s))?e.toRange():null):n(2)?(s=d,e=t,r.insertAfter((u=f).reverse(),s),ug(u[0],e)):(s=f,u=t,e=i=d,t=(f=o).cloneRange(),f=f.cloneRange(),t.setStartBefore(e),f.setEndAfter(e),e=[t.cloneContents(),f.cloneContents()],(a=i.parentNode).insertBefore(e[0],i),we.each(s,function(e){a.insertBefore(e,i)}),a.insertBefore(e[1],i),a.removeChild(i),ug(s[s.length-1],u))}function cg(e,t,n){var r,o,i,u,a=e.selection,c=e.dom,s=(/^ | $/.test(t)&&(s=c,l=a.getRng(),d=t,d=ym(s=xe.fromDom(s.getRoot()),Se.fromRangeStart(l))?d.replace(/^ /,"&nbsp;"):d.replace(/^&nbsp;/," "),t=d=wm(s,Se.fromRangeEnd(l))?d.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):d.replace(/&nbsp;(<br( \/)?>)?$/," ")),e.parser),l=n.merge,f=Ud({validate:e.getParam("validate")},e.schema),d='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>',m=e.fire("BeforeSetContent",{content:t,format:"html",selection:!0,paste:n.paste});if(m.isDefaultPrevented())e.fire("SetContent",{content:m.content,format:"html",selection:!0,paste:n.paste});else{t=m.content,-1===(t=n.preserve_zwsp?t:Mo(t)).indexOf("{$caret}")&&(t+="{$caret}"),t=t.replace(/\{\$caret\}/,d);var g=(w=a.getRng()).startContainer||(w.parentElement?w.parentElement():null),p=e.getBody();g===p&&a.isCollapsed()&&c.isBlock(p.firstChild)&&(g=p.firstChild)&&!e.schema.getShortEndedElements()[g.nodeName]&&c.isEmpty(p.firstChild)&&((w=c.createRng()).setStart(p.firstChild,0),w.setEnd(p.firstChild,0),a.setRng(w)),a.isCollapsed()||(p=(g=e).dom,r=og(g.selection.getRng()),g.selection.setRng(r),i=p.getParent(r.startContainer,Yg),u=r,null!==(o=i)&&o===p.getParent(u.endContainer,Yg)&&Cl(xe.fromDom(o),u)?Gg(g,r,xe.fromDom(i)):g.getDoc().execCommand("Delete",!1,null));var h,v,b,y,w,p={context:(T=a.getNode()).nodeName.toLowerCase(),data:n.data,insert:!0},x=s.parse(t,p);if(!0===n.paste&&(o=e.schema,r=(u=x).firstChild,u=u.lastChild,r&&"meta"===r.name&&(r=r.next),i=u=u&&"mce_marker"===u.attr("id")?u.prev:u,g=(o=o).getNonEmptyElements(),i&&(i.isEmpty(g)||(g=i,o.getBlockElements()[g.name]&&g.firstChild&&g.firstChild===g.lastChild&&("br"===(i=g.firstChild).name||i.value===_o)))&&(u=u.prev),r)&&r===u&&("ul"===r.name||"ol"===r.name)&&ig(c,T))w=ag(f,c,a.getRng(),x),a.setRng(w),e.fire("SetContent",m);else{for(var C=x;C=C.walk();)1===C.type&&C.attr("data-mce-fragment","1");if("mce_marker"===(k=x.lastChild).attr("id"))for(var S=k,k=k.prev;k;k=k.walk(!0))if(3===k.type||!c.isBlock(k.name)){e.schema.isValidChild(k.parent.name,"span")&&k.parent.insert(S,k,"br"===k.name);break}if(e._selectionOverrides.showBlockCaretContainer(T),p.invalid){e.selection.setContent(d);var T=a.getNode(),O=e.getBody();for(9===T.nodeType?T=k=O:k=T;k!==O;)k=(T=k).parentNode;t=T===O?O.innerHTML:c.getOuterHTML(T),t=f.serialize(s.parse(t.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return f.serialize(x)}))),T===O?c.setHTML(O,t):c.setOuterHTML(T,t)}else n=e,g=t=f.serialize(x),"all"===(w=T).getAttribute("data-mce-bogus")?w.parentNode.insertBefore(n.dom.createFragment(g),w):(p=w.firstChild,d=w.lastChild,!p||p===d&&"BR"===p.nodeName?n.dom.setHTML(w,g):n.selection.setContent(g));s=l,b=(t=e).schema.getTextInlineElements(),y=t.dom,s&&(h=t.getBody(),v=Vd(y),we.each(y.select("*[data-mce-fragment]"),function(e){if(ne(b[e.nodeName.toLowerCase()])&&Q(Yd(y,e),function(e){return!Xd.has(e)}))for(var t=e.parentNode;ne(t)&&t!==h&&!function(n,r,o){function i(e){var t=n.getStyle(r,e),e=n.getStyle(o,e);return Ze(t)&&Ze(e)&&t!==e}var e=Yd(n,r),u=Yd(n,o);return F(e,function(t){function e(e){return F(e,function(e){return e===t})}var n;return e(u)||!e(_g)?i(t):(n=z(u,function(t){return F(_g,function(e){return vt(t,e)})}),F(n,i))})}(y,e,t);t=t.parentNode)if(v.compare(t,e)){y.remove(e,!0);break}})),function(t,e){var n=t.dom,r=t.selection;if(e){r.scrollIntoView(e);var o=cf(t.getBody(),e);if("false"===n.getContentEditable(o))return n.remove(e),r.select(o);var i,o=n.createRng(),u=e.previousSibling,u=(B(u)?(o.setStart(u,u.nodeValue.length),ye.ie||(i=e.nextSibling,B(i)&&(u.appendData(i.data),i.parentNode.removeChild(i)))):(o.setStartBefore(e),o.setEndBefore(e)),n.getParent(e,n.isBlock));n.remove(e),u&&n.isEmpty(u)&&(t.$(u).empty(),o.setStart(u,0),o.setEnd(u,0),Yg(u)||u.getAttribute("data-mce-fragment")||!(i=function(e){e=Se.fromRangeStart(e);if(e=_s(t.getBody()).next(e))return e.toRange()}(o))?n.add(u,n.create("br",{"data-mce-bogus":"1"})):(o=i,n.remove(u))),r.setRng(o)}}(e,c.get("mce_marker")),d=e.getBody(),we.each(d.getElementsByTagName("*"),function(e){e.removeAttribute("data-mce-fragment")}),p=c,w=a.getStart(),ve.from(p.getParent(w,"td,th")).map(xe.fromDom).each(rm),e.fire("SetContent",m),e.addVisual()}}}function sg(e){return e instanceof _d}function lg(e,t,n){var r;e.dom.setHTML(e.getBody(),t),!0!==n&&cd(r=e)&&Kl(r.getBody()).each(function(e){var t=e.getNode(),t=yn(t)?Kl(t).getOr(e):e;r.selection.setRng(t.toRange())})}function fg(c,s,e){t=s;var t=be(be({format:"html"},e),{set:!0,content:sg(t)?"":t}),l=e.no_events?t:c.fire("BeforeSetContent",t);return sg(s)||(s=l.content),ve.from(c.getBody()).fold(fe(s),function(e){return sg(s)?(n=e,u=s,i=l,t=(r=c).parser.getNodeFilters(),o=r.parser.getAttributeFilters(),a=u,t=function(e,n){var t,r,o={},i={},u=[];for(t in a.firstChild&&Jg(a.firstChild,function(t){pe(e,function(e){e.name===t.name&&(o[e.name]?o[e.name].nodes.push(t):o[e.name]={filter:e,nodes:[t]})}),pe(n,function(e){"string"==typeof t.attr(e.name)&&(i[e.name]?i[e.name].nodes.push(t):i[e.name]={filter:e,nodes:[t]})})}),o)re(o,t)&&u.push(o[t]);for(r in i)re(i,r)&&u.push(i[r]);return u}(t,o),pe(t,function(t){pe(t.filter.callbacks,function(e){e(t.nodes,t.filter.name,{})})}),o=Ud({validate:r.validate},r.schema).serialize(u),i.content=Mo(Oo(xe.fromDom(n))?o:we.trim(o)),lg(r,i.content,i.no_selection),i.no_events||r.fire("SetContent",i),u):(t=c,n=e,o=l,0===(r=Mo(r=s)).length||/^\s+$/.test(r)?(i='<br data-mce-bogus="1">',"TABLE"===n.nodeName?r="<tr><td>"+i+"</td></tr>":/^(UL|OL)$/.test(n.nodeName)&&(r="<li>"+i+"</li>"),r=(u=yc(t))&&t.schema.isValidChild(n.nodeName.toLowerCase(),u.toLowerCase())?(r=i,t.dom.createHTML(u,wc(t),r)):r||'<br data-mce-bogus="1">',lg(t,r,o.no_selection),t.fire("SetContent",o)):("raw"!==o.format&&(r=Ud({validate:t.validate},t.schema).serialize(t.parser.parse(r,{isRootContent:!0,insert:!0}))),o.content=Oo(xe.fromDom(n))?r:we.trim(r),lg(t,o.content,o.no_selection),o.no_events||t.fire("SetContent",o)),o.content);var a,t,n,r,o,i,u})}function dg(e){return O(e)?e:ge}function mg(i,u,e){var t=u(i),a=dg(e);return t.orThunk(function(){if(!a(i))for(var e=u,t=i.dom,n=dg(a);t.parentNode;){var t=t.parentNode,r=xe.fromDom(t),o=e(r);if(o.isSome())return o;if(n(r))break}return ve.none()})}function gg(e,t,n){var r=e.formatter.get(n);if(r)for(var o=0;o<r.length;o++){var i=r[o];if(ol(i)&&!1===i.inherit&&e.dom.is(t,i.selector))return 1}}function pg(t,e,n,r,o){var i=t.dom.getRoot();return e!==i&&(e=t.dom.getParent(e,function(e){return!!gg(t,e,n)||e.parentNode===i||!!Qg(t,e,n,r,!0)}),!!Qg(t,e,n,r,o))}function hg(e,t,n){return!!Zg(t,n.inline)||!!Zg(t,n.block)||(n.selector?1===t.nodeType&&e.is(t,n.selector):void 0)}function vg(e,t,n,r,o,i){var u=n[r];if(O(n.onmatch))return n.onmatch(t,n,r);if(u)if(y(u.length)){for(var a in u)if(re(u,a)){var c="attributes"===r?e.getAttrib(t,a):el(e,t,a),s=Js(u[a],i),l=Y(c)||Qe(c);if(!l||!Y(s)){if(o&&l&&!n.exact)return;if((!o||n.exact)&&!Zg(c,Qs(e,s,a)))return}}}else for(var f=0;f<u.length;f++)if("attributes"===r?e.getAttrib(t,u[f]):el(e,t,u[f]))return 1;return 1}function bg(e,t,n,r,o){var i;return r?pg(e,r,t,n,o):(r=e.selection.getNode(),!!pg(e,r,t,n,o)||!((i=e.selection.getStart())===r||!pg(e,i,t,n,o)))}function yg(e){return 0<function(e){for(var t=[];e;){if(3===e.nodeType&&e.nodeValue!==ep||1<e.childNodes.length)return[];1===e.nodeType&&t.push(e),e=e.firstChild}return t}(e).length}function wg(e){if(e){var t=new Pr(e,e);for(e=t.current();e;e=t.next())if(B(e))return e}return null}function xg(e){var t=xe.fromTag("span");return On(t,{id:tp,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&$n(t,xe.fromText(ep)),t}function Cg(e,t,n){void 0===n&&(n=!0);var r,o,i,u,a,c=e.dom,s=e.selection;yg(t)?Im(e,!1,xe.fromDom(t),n):(e=s.getRng(),n=c.getParent(t,c.isBlock),r=e.startContainer,o=e.startOffset,i=e.endContainer,u=e.endOffset,(a=wg(t))&&a.nodeValue.charAt(0)===ep&&a.deleteData(0,1),a=a,c.remove(t,!0),r===a&&0<o&&e.setStart(a,o-1),i===a&&0<u&&e.setEnd(a,u-1),n&&c.isEmpty(n)&&nm(xe.fromDom(n)),s.setRng(e))}function Sg(e,t,n){void 0===n&&(n=!0);var r=e.dom,o=e.selection;if(t)Cg(e,t,n);else if(!(t=Bs(e.getBody(),o.getStart())))for(;t=r.get(tp);)Cg(e,t,!1)}function kg(e,t){return e.appendChild(t),t}function Tg(e,t){e=j(e,function(e,t){return kg(e,t.cloneNode(!1))},t);return kg(e,e.ownerDocument.createTextNode(ep))}function Og(t,e,n,u,r,o){var i,a,c=t.formatter,s=t.dom,l=z(We(c.get()),function(e){return e!==u&&!Ye(e,"removeformat")});return 0<z((i=t,a=n,U(l,function(e,t){var n=F(i.formatter.get(t),function(t){function o(e){return 1<e.length&&"%"===e.charAt(0)}return F(["styles","attributes"],function(e){return he(t,e).exists(function(e){var n,r;return F(x(e)?e:(n=m,r=[],q(e,function(e,t){r.push(n(e,t))}),r),o)})})});return i.formatter.matchNode(a,t,{},n)?e.concat([t]):e},[])),function(e){return o=u,i=["inline","block","selector","attributes","styles","classes"],!F((r=t).formatter.get(e),function(e){var t=n(e);return F(r.formatter.get(o),function(e){e=n(e);return d(h).eq(t,e)})});function n(e){return De(e,function(e,t){return F(i,function(e){return e===t})})}var r,o,i}).length?(l=n.cloneNode(!1),s.add(e,l),c.remove(u,r,l,o),s.remove(l),ve.some(l)):ve.none()}function Eg(e,t){e=e.schema.getTextInlineElements();return re(e,Pt(t))&&!zs(t.dom)&&!bn(t.dom)}pe(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],function(e){Xd.add(e)});var _g=["font","text-decoration","text-emphasis"],Ag=me(Jd,!0,Ws),Dg=me(Jd,!1,Ws),Mg=Qd(!0,em),Ng=Qd(!1,em),Rg=Qd(!0,rr),zg=Qd(!1,rr),Bg=Qd(!0,yn),Pg=Qd(!1,yn),Ig=Qd(!0,tm),Lg=Qd(!1,tm),Fg=me(sm,!1),Hg=me(sm,!0),Vg=me(cm,!1),jg=me(cm,!0),Ug=me(fm,!1),Wg=me(fm,!0),$g=lr([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),qg=function(e){var t;return(8===It(t=e)||"#comment"===Pt(t)?Ut:Xt)(e).bind(qg).orThunk(function(){return ve.some(e)})},Gg=function(e,t,n,r){void 0===r&&(r=!0),t.deleteContents();var o,t=qg(n).getOr(n),i=xe.fromDom(e.dom.getParent(t.dom,e.dom.isBlock));return Qr(i)&&(nm(i),r)&&e.selection.setCursorLocation(i.dom,0),_(n,i)||pe((xn(jt(i),n)?[]:jt(o=i).map(jn).map(function(e){return z(e,function(e){return!_(o,e)})}).getOr([])).concat(jn(n)),function(e){_(e,i)||at(e,i)||!Qr(e)||qn(e)}),!0},Kg=function(e,t){return $(im(t,e),function(e){return Ln(e)&&"caption"===Pt(e)})},Xg=function(e,t){return nm(t),e.selection.setCursorLocation(t.dom,0),ve.some(!0)},Yg=nr,Jg=function(e,t){t(e),e.firstChild&&Jg(e.firstChild,t),e.next&&Jg(e.next,t)},Zg=Zs,Qg=function(e,t,n,r,o){var i=e.formatter.get(n),u=e.dom;if(i&&t)for(var a=0;a<i.length;a++){var c=i[a];if(hg(e.dom,t,c)&&vg(u,t,c,"attributes",o,r)&&vg(u,t,c,"styles",o,r)){var s=c.classes;if(s)for(var l=0;l<s.length;l++)if(!e.dom.hasClass(t,Js(s[l],r)))return;return c}}},ep=Ao,tp="_mce_caret",np={},rp=ze,op=Ne;function ip(e){return G(e)&&!Us(e)&&!zs(e)&&!bn(e)}function up(e,t){for(var n=e;n;n=n[t]){if(B(n)&&Ze(n.data))return e;if(G(n)&&!Us(n))return n}return e}function ap(e,t,n){var r=Vd(e);if(t&&n&&(t=up(t,"previousSibling"),n=up(n,"nextSibling"),r.compare(t,n))){for(var o=t.nextSibling;o&&o!==n;){var i=o,o=o.nextSibling;t.appendChild(i)}return e.remove(n),we.each(we.grep(n.childNodes),function(e){t.appendChild(e)}),t}return n}function cp(e,t,n,r){r&&!1!==t.merge_siblings&&(t=ap(e,Ks(r),r),ap(e,t,Ks(t,!0)))}function sp(t,n){return function(e){return!(!e||!el(t,e,n))}}function lp(n,r,o){return function(e){var t;n.setStyle(e,r,o),""===e.getAttribute("style")&&e.removeAttribute("style"),t=n,"SPAN"===(e=e).nodeName&&0===t.getAttribs(e).length&&t.remove(e,!0)}}function fp(e,t,n){return e.isChildOf(t,n)&&t!==n&&!e.isBlock(n)}function dp(e,t,n){var r,o=t[n?"startContainer":"endContainer"],t=t[n?"startOffset":"endOffset"];return G(o)&&(r=o.childNodes.length-1,!n&&t&&t--,o=o.childNodes[r<t?r:t]),B(o)&&n&&t>=o.nodeValue.length&&(o=new Pr(o,e.getBody()).next()||o),B(o)&&!n&&0===t&&new Pr(o,e.getBody()).prev()||o}function mp(e,t){var n,t=t?"firstChild":"lastChild";return/^(TR|TH|TD)$/.test(e.nodeName)&&e[t]?(n=e[t],"TR"===e.nodeName&&n[t]||n):e}function gp(e,t,n,r){e=e.create(n,r);return t.parentNode.insertBefore(e,t),e.appendChild(t),e}function pp(e,t,n,r,o){t=xe.fromDom(t),e=xe.fromDom(e.create(r,o));return rn(e,(n?qt:$t)(t)),(n?(en(t,e),nn):(tn(t,e),$n))(e,t),e.dom}function hp(e,t,n,r){t=Ks(t,n,r);return Y(t)||"BR"===t.nodeName||e.isBlock(t)}function vp(e,r,o,t,i){var n,u=e.dom,a=u,c=t;if(!(il(l=r)&&nh(c,l.inline)||rl(l)&&nh(c,l.block)||ol(l)&&G(c)&&a.is(c,l.selector)||r.links&&"A"===t.nodeName))return Qp.keep();var s,l,f,d,m,g=t;if(il(r)&&"all"===r.remove&&x(r.preserve_attributes)){var a=z(u.getAttribs(g),function(e){return Ee(r.preserve_attributes,e.name.toLowerCase())});if(u.removeAllAttribs(g),pe(a,function(e){u.setAttrib(g,e.name,e.value)}),0<a.length)return Qp.rename("span")}if("all"!==r.remove){th(r.styles,function(e,t){e=Qs(u,Js(e,o),t+""),T(t)&&(t=e,i=null),!r.remove_similar&&i&&!nh(el(u,i,t),e)||u.setStyle(g,t,""),n=!0}),n&&""===u.getAttrib(g,"style")&&(g.removeAttribute("style"),g.removeAttribute("data-mce-style")),th(r.attributes,function(e,t){var n;e=Js(e,o),T(t)&&(t=e,i=null),!r.remove_similar&&i&&!nh(u.getAttrib(i,t),e)||("class"===t&&(e=u.getAttrib(g,t))&&(n="",pe(e.split(/\s+/),function(e){/mce\-\w+/.test(e)&&(n+=(n?" ":"")+e)}),n)?u.setAttrib(g,t,n):(eh.test(t)&&g.removeAttribute("data-mce-"+t),"style"===t&&pn(["li"])(g)&&"none"===u.getStyle(g,"list-style-type")?(g.removeAttribute(t),u.setStyle(g,"list-style-type","none")):("class"===t&&g.removeAttribute("className"),g.removeAttribute(t))))}),th(r.classes,function(e){e=Js(e,o),i&&!u.hasClass(i,e)||u.removeClass(g,e)});for(var p=u.getAttribs(g),h=0;h<p.length;h++){var v=p[h].nodeName;if(0!==v.indexOf("_")&&0!==v.indexOf("data-"))return Qp.keep()}}return"none"!==r.remove?(c=r,t=(l=g).parentNode,d=(s=e).dom,m=yc(s),rl(c)&&(m?t!==d.getRoot()||c.list_block&&nh(l,c.list_block)||pe(Ue(l.childNodes),function(e){Ys(s,m,e.nodeName.toLowerCase())?f?f.appendChild(e):(f=gp(d,e,m),d.setAttribs(f,s.settings.forced_root_block_attrs)):f=null}):d.isBlock(l)&&!d.isBlock(t)&&(hp(d,l,!1)||hp(d,l.firstChild,!0,!0)||l.insertBefore(d.create("br"),l.firstChild),hp(d,l,!0)||hp(d,l.lastChild,!1,!0)||l.appendChild(d.create("br")))),ol(a=c)&&il(a)&&xn(he(a,"mixed"),!0)&&!nh(c.inline,l)||d.remove(l,!0),Qp.removed()):Qp.keep()}function bp(t,e,n,r,o){return vp(t,e,n,r,o).fold(ge,function(e){return t.dom.rename(r,e),!0},C)}function yp(y,w,x,e,C){function o(e){var n,r,o=w,i=x,u=C;pe(nl((n=y).dom,e.parentNode).reverse(),function(e){var t;r||"_start"===e.id||"_end"===e.id||(t=Qg(n,e,o,i,u))&&!1!==t.split&&(r=e)});var t,a,c=y,s=S,l=r,f=e,d=k,m=x,g=c.dom;if(l){for(var p=l.parentNode,h=f.parentNode;h&&h!==p;h=h.parentNode){for(var v=g.clone(h,!1),b=0;b<s.length&&null!==(v=function(t,e,n){return vp(t,e,m,n,n).fold(fe(n),function(e){return t.dom.createFragment().appendChild(n),t.dom.rename(n,e)},fe(null))}(c,s[b],v));b++);v&&(t&&v.appendChild(t),a=a||v,t=v)}d.mixed&&g.isBlock(l)||(f=g.split(l,f)),t&&(e.parentNode.insertBefore(t,e),a.appendChild(e),il(d))&&cp(g,d,0,t)}return f}function a(t){return F(S,function(e){return bp(y,e,x,t,t)})}function i(e){var t,n=s.get(e?"_start":"_end"),r=n[e?"firstChild":"lastChild"];return Us(t=r)&&G(t)&&("_start"===t.id||"_end"===t.id)&&(r=r[e?"firstChild":"lastChild"]),B(r)&&0===r.data.length&&(r=e?n.previousSibling||n.nextSibling:n.nextSibling||n.previousSibling),s.remove(n,!0),r}function t(e){e=hl(y,e,S,e.collapsed);if(k.split){if(e=kf(e),(t=dp(y,e,!0))!==(n=dp(y,e))){t=mp(t,!0),n=mp(n,!1);if(fp(s,t,n))return r=ve.from(t.firstChild).getOr(t),o(pp(s,r,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void i(!0);if(fp(s,n,t))return r=ve.from(n.lastChild).getOr(n),o(pp(s,r,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void i(!1);var t=gp(s,t,"span",{id:"_start","data-mce-type":"bookmark"}),n=gp(s,n,"span",{id:"_end","data-mce-type":"bookmark"}),r=s.createRng();r.setStartAfter(t),r.setEndBefore(n),vl(s,r,function(e){pe(e,function(e){Us(e)||Us(e.parentNode)||o(e)})}),o(t),o(n),t=i(!0),n=i()}else t=n=o(t);e.startContainer=t.parentNode||t,e.startOffset=s.nodeIndex(t),e.endContainer=n.parentNode||n,e.endOffset=s.nodeIndex(n)+1}vl(s,e,function(e){pe(e,l)})}var S=y.formatter.get(w),k=S[0],c=!0,s=y.dom,n=y.selection,l=function(t){var e=!0,n=!1;G(t)&&s.getContentEditable(t)&&(e=c,c="true"===s.getContentEditable(t),n=!0);var r,o,i=Ue(t.childNodes);if(c&&!n&&(r=a(t)||F(S,function(e){return hg(s,t,e)}),o=t.parentNode,!r)&&ne(o)&&ul(k)&&a(o),k.deep&&i.length){for(var u=0;u<i.length;u++)l(i[u]);n&&(c=e)}pe(["underline","line-through","overline"],function(e){G(t)&&y.dom.getStyle(t,"text-decoration")===e&&t.parentNode&&tl(s,t.parentNode)===e&&bp(y,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:e}},null,t)})};if(e)qs(e)?((O=s.createRng()).setStartBefore(e),O.setEndAfter(e),t(O)):t(e);else if("false"!==s.getContentEditable(n.getNode()))if(n.isCollapsed()&&il(k)&&!wl(y).length){var r,u,f,d,m,g,p,h=y,v=w,b=x,T=C,O=h.dom,E=h.selection,_=[],A=E.getRng(),D=A.startContainer,M=A.startOffset,N=D;for(3===D.nodeType&&(M!==D.nodeValue.length&&(r=!0),N=N.parentNode);N;){if(Qg(h,N,v,b,T)){u=N;break}N.nextSibling&&(r=!0),_.push(N),N=N.parentNode}u&&(r?(M=E.getBookmark(),A.collapse(!0),D=kf(hl(h,A,h.formatter.get(v),!0)),h.formatter.remove(v,b,D,T),E.moveToBookmark(M)):(A=Bs(h.getBody(),u),M=D=xg(!1).dom,(g=(d=h.dom).getParent(f=null!==A?A:u,me(Xs,h)))&&d.isEmpty(g)||(g=ha(m=xe.fromDom(f),"br"),p=z(function(){for(var e=[],t=m.dom;t;)e.push(xe.fromDom(t)),t=t.lastChild;return e}().slice(-1),Hr),g.length===p.length&&pe(p,qn),d.isEmpty(f))?f.parentNode.replaceChild(M,f):d.insertAfter(M,f),g=Og(h,D,u,v,b,T),p=Tg(_.concat(g.toArray()),D),Cg(h,A,!1),E.setCursorLocation(p,1),O.isEmpty(u)&&O.remove(u)))}else Ol(n,!0,function(){Tl(y,t)}),il(k)&&bg(y,w,x,n.getStart())&&Gs(s,n,n.getRng()),y.nodeChanged();else{e=n.getNode();for(var R=0;R<S.length&&(!S[R].ceFalseOverride||!bp(y,S[R],x,e,e));R++);}df(y,w,e,x)}function wp(e){return G(e)&&!Us(e)&&!zs(e)&&!bn(e)}function xp(e){return re(e,"vars")}function Cp(t,e,n,r,o){return W(e,function(e){e=t.formatter.matchNode(e,n,null!=o?o:{},r);return!y(e)},function(e){return gg(t,e,n)||!r&&ne(t.formatter.matchNode(e,n,o,!0))})}function Sp(e,t){t=null!=t?t:uh(e);return z(nl(e.dom,t),function(e){return G(e)&&!bn(e)})}function kp(e,t){var n=(t||document).createDocumentFragment();return pe(e,function(e){n.appendChild(e.dom)}),xe.fromDom(n)}function Tp(e,t,n){return{element:e,width:t,rows:n}}function Op(e,t){return{element:e,cells:t}}function Ep(e,t){e=parseInt(En(e,t),10);return isNaN(e)?1:e}function _p(e){return U(e,function(e,t){return t.cells.length>e?t.cells.length:e},0)}function Ap(e,t){for(var n=e.rows,r=0;r<n.length;r++)for(var o=n[r].cells,i=0;i<o.length;i++)if(_(o[i],t))return ve.some({x:i,y:r});return ve.none()}function Dp(e,t,n,r,o){for(var i=[],u=e.rows,a=n;a<=o;a++){var c=u[a].cells,c=t<r?c.slice(t,r+1):c.slice(r,t+1);i.push(Op(u[a].element,c))}return i}function Mp(e){var g=Tp(xa(e),0,[]);return pe(ha(e,"tr"),function(d,m){pe(ha(d,"td,th"),function(e,t){for(var n=g,r=function(e,t,n){for(;r=t,((o=e.rows)[n]?o[n].cells:[])[r];)t++;var r,o;return t}(g,t,m),o=m,i=d,u=e,a=Ep(u,"rowspan"),c=Ep(u,"colspan"),s=n.rows,l=o;l<o+a;l++){s[l]||(s[l]=Op(Ca(i),[]));for(var f=r;f<r+c;f++)s[l].cells[f]=l===o&&f===r?u:xa(u)}})}),Tp(g.element,_p(g.rows),g.rows)}function Np(){return kp([])}function Rp(e,t){var n,r,o,i,u,a,c=yl(t,e);return 0<c.length?Sr((a=c)[0],"table",me(_,e)).bind(function(e){var u,t=a[0],n=a[a.length-1],e=Mp(e),r=n;return Ap(u=e,t).bind(function(i){return Ap(u,r).map(function(e){return t=u,o=i.x,n=i.y,r=e.x,o=n<(e=e.y)?Dp(t,o,n,r,e):Dp(t,o,e,r,n),Tp(t.element,_p(o),o);var t,n,r,o})}).map(function(e){return kp([(t=S((e=e).rows,function(e){var t=S(e.cells,function(e){e=Ca(e);return Dn(e,"colspan"),Dn(e,"rowspan"),e}),e=xa(e.element);return rn(e,t),e}),e=xa(e.element),rn(n=xe.fromTag("tbody"),t),$n(e,n),e)]);var t,n})}).getOrThunk(Np):(c=e,0<(e=t).length&&e[0].collapsed?Np():(t=c,c=e[0],e=xe.fromDom(c.cloneContents()),u=U((t=t,c=c,i=xe.fromDom(c.commonAncestorContainer),u=z(t=im(i,t),function(e){return Fr(e)||yo(e)}),o=c,c=$(r=t,function(e){return"li"===Pt(e)&&Cl(e,o)}).fold(fe([]),function(e){return $(r,function(e){return"ul"===Pt(e)||"ol"===Pt(e)}).map(function(e){var t=xe.fromTag(Pt(e));return Mn(t,De(zn(e),function(e,t){return vt(t,"list-style")})),[xe.fromTag("li"),t]}).getOr([])}),t=S(u.concat(c.length?c:So(n=i)?jt(n).filter(Co).fold(fe([]),function(e){return[n,e]}):Co(n)?[n]:[]),xa)),function(e,t){return $n(t,e),t},e),0<t.length?kp([u]):u))}function zp(e,t){return 0<=t&&t<e.length&&Ws(e.charAt(t))}function Bp(e,t){e=Mo(e.innerText);return t?e.replace(/^[ \f\n\r\t\v]+/,""):e}function Pp(e){return G(e)?e.outerHTML:B(e)?ii.encodeRaw(e.data,!1):Jn(e)?"\x3c!--"+e.data+"--\x3e":""}function Ip(e){var t=e.serializer.getTempAttrs(),e=Hd(e.getBody(),t);return null!==e.querySelector("iframe")?{type:"fragmented",fragments:z(S(Ue(e.childNodes),c(Mo,Pp)),function(e){return 0<e.length}),content:"",bookmark:null,beforeBookmark:null}:{type:"complete",fragments:null,content:Mo(e.innerHTML),bookmark:null,beforeBookmark:null}}function Lp(e,t,n){var r,m,g,o,p,h,s,l,i,u,a,n=n?t.beforeBookmark:t.bookmark;function v(e,t,n,r){for(var o=e;o-t<r&&o<n&&m[o]===g[o-t];)++o;return{start:e,end:o,diag:t}}"fragmented"===t.type?(o=t.fragments,r=e.getBody(),i=S(Ue(r.childNodes),Pp),g=o,o=(m=i).length+g.length+2,p=new Array(o),h=new Array(o),l=function(e,t,n,r){var o=t-e,i=r-n;if(0==o||0==i)return null;var u,a,c,s,l,f=o-i,i=i+o,d=(i%2==0?i:1+i)/2;for(p[1+d]=e,h[1+d]=t+1,u=0;u<=d;++u){for(a=-u;a<=u;a+=2){for(c=a+d,a===-u||a!==u&&p[c-1]<p[c+1]?p[c]=p[c+1]:p[c]=p[c-1]+1,l=(s=p[c])-e+n-a;s<t&&l<r&&m[s]===g[l];)p[c]=++s,++l;if(f%2!=0&&f-u<=a&&a<=f+u&&h[c-f]<=p[c])return v(h[c-f],a+e-n,t,r)}for(a=f-u;a<=f+u;a+=2){for(c=a+d-f,a===f-u||a!==f+u&&h[c+1]<=h[c-1]?h[c]=h[c+1]-1:h[c]=h[c-1],l=(s=h[c]-1)-e+n-a;e<=s&&n<=l&&m[s]===g[l];)h[c]=s--,l--;if(f%2==0&&-u<=a&&a<=u&&h[c]<=p[c+f])return v(h[c],a+e-n,t,r)}}},(s=function(e,t,n,r,o){var i=l(e,t,n,r);if(null===i||i.start===t&&i.diag===t-r||i.end===e&&i.diag===e-n)for(var u=e,a=n;u<t||a<r;)u<t&&a<r&&m[u]===g[a]?(o.push([0,m[u]]),++u,++a):r-n<t-e?(o.push([2,m[u]]),++u):(o.push([1,g[a]]),++a);else{s(e,i.start,n,i.start-i.diag,o);for(var c=i.start;c<i.end;++c)o.push([0,m[c]]);s(i.end,t,i.end-i.diag,r,o)}})(0,m.length,0,g.length,i=[]),u=r,a=0,pe(i,function(e){var t,n,r;0===e[0]?a++:1===e[0]?(t=u,r=e[1],n=a,r=function(e){var t,n=document.createElement("div"),r=document.createDocumentFragment();for(e&&(n.innerHTML=e);t=n.firstChild;)r.appendChild(t);return r}(r),t.hasChildNodes()&&n<t.childNodes.length?(n=t.childNodes[n]).parentNode.insertBefore(r,n):t.appendChild(r),a++):2===e[0]&&(n=a,(t=u).hasChildNodes())&&n<t.childNodes.length&&(r=t.childNodes[n]).parentNode.removeChild(r)})):e.setContent(t.content,{format:"raw",no_selection:!ne(n)||!Ps(n)||!n.isFakeCaret}),e.selection.moveToBookmark(n)}function Fp(e){return"fragmented"===e.type?e.fragments.join(""):e.content}function Hp(e){var t=xe.fromTag("body",ch());return ya(t,Fp(e)),pe(ha(t,"*[data-mce-bogus]"),un),t.dom.innerHTML}function Vp(e,t){return!(!e||!t)&&(n=t,Fp(e)===Fp(n)||(n=t,Hp(e)===Hp(n)));var n}function jp(e){return 0===e.get()}function Up(e,t,n){jp(n)&&(e.typing=t)}function Wp(e,t){e.typing&&(Up(e,!1,t),e.add())}function $p(h){return{undoManager:{beforeChange:function(e,t){var n=h;jp(e)&&t.set(as(n.selection))},add:function(e,t,n,r,o,i){var u=h,a=e,c=t,e=n,t=r,n=o,r=i,o=Ip(u);if(n=we.extend(n=n||{},o),!1===jp(e)||u.removed)return null;if(o=a.data[c.get()],u.fire("BeforeAddUndo",{level:n,lastLevel:o,originalEvent:r}).isDefaultPrevented())return null;if(o&&Vp(o,n))return null;if(a.data[c.get()]&&t.get().each(function(e){a.data[c.get()].beforeBookmark=e}),(e=u.getParam("custom_undo_redo_levels",0,"number"))&&a.data.length>e){for(var s=0;s<a.data.length-1;s++)a.data[s]=a.data[s+1];a.data.length--,c.set(a.data.length)}return n.bookmark=as(u.selection),c.get()<a.data.length-1&&(a.data.length=c.get()+1),a.data.push(n),c.set(a.data.length-1),t={level:n,lastLevel:o,originalEvent:r},0<c.get()?(u.setDirty(!0),u.fire("AddUndo",t),u.fire("change",t)):u.fire("AddUndo",t),n},undo:function(e,t,n){return r=h,t=t,n=n,(e=e).typing&&(e.add(),e.typing=!1,Up(e,!1,t)),0<n.get()&&(n.set(n.get()-1),Lp(r,o=e.data[n.get()],!0),r.setDirty(!0),r.fire("Undo",{level:o})),o;var r,o},redo:function(e,t){return n=h,t=t,(e=e).get()<t.length-1&&(e.set(e.get()+1),Lp(n,r=t[e.get()],!1),n.setDirty(!0),n.fire("Redo",{level:r})),r;var n,r},clear:function(e,t){var n=h;(e=e).data=[],t.set(0),e.typing=!1,n.fire("ClearUndos")},reset:function(e){(e=e).clear(),e.add()},hasUndo:function(e,t){return n=h,e=e,0<t.get()||e.typing&&e.data[0]&&!Vp(Ip(n),e.data[0]);var n},hasRedo:function(e,t){return e=e,t.get()<e.data.length-1&&!e.typing},transact:function(e,t,n){return n=n,Wp(e=e,t),e.beforeChange(),e.ignore(n),e.add()},ignore:function(e,t){try{e.set(e.get()+1),t()}finally{e.set(e.get()-1)}},extra:function(e,t,n,r){var o=h;(e=e).transact(n)&&(n=e.data[t.get()].bookmark,Lp(o,e.data[t.get()-1],!0),e.transact(r))&&(e.data[t.get()-1].beforeBookmark=n)}},formatter:{match:function(e,t,n,r){return bg(h,e,t,n,r)},matchAll:function(e,t){return o=e,i=t,u=[],a={},e=(r=h).selection.getStart(),r.dom.getParent(e,function(e){for(var t=0;t<o.length;t++){var n=o[t];!a[n]&&Qg(r,e,n,i)&&(a[n]=!0,u.push(n))}},r.dom.getRoot()),u;var r,o,i,u,a},matchNode:function(e,t,n,r){return Qg(h,e,t,n,r)},canApply:function(e){var t=h,n=t.formatter.get(e),r=t.dom;if(n)for(var o=nl(r,t.selection.getStart()),i=n.length-1;0<=i;i--){var u=n[i];if(!ol(u)||ne(u.defaultBlock))return!0;for(var a=o.length-1;0<=a;a--)if(r.is(o[a],u.selector))return!0}return!1},closest:function(e){return n=h,r=e,ve.from(n.selection.getStart(!0)).bind(function(e){return mg(xe.fromDom(e),function(t){return ce(r,function(e){return Qg(n,t.dom,e=e)?ve.some(e):ve.none()})},t)}).getOrNull();function t(e){return _(e,xe.fromDom(n.getBody()))}var n,r},apply:function(e,t,n){return ih(h,e,t,n)},remove:function(e,t,n,r){return yp(h,e,t,n,r)},toggle:function(e,t,n){var r,o=(r=h).formatter.get(e);(!bg(r,e,t,n)||"toggle"in o[0]&&!o[0].toggle?ih:yp)(r,e,t,n)},formatChanged:function(e,t,n,r,o){return i=h,a=t,c=n,t=r,n=o,null===(u=e).get()&&(l=i,(s=u).set({}),l.on("NodeChange",function(e){ah(l,e.element,s.get())}),l.on("FormatApply FormatRemove",function(e){e=ve.from(e.node).map(function(e){return qs(e)?e:e.startContainer}).bind(function(e){return G(e)?ve.some(e):ve.from(e.parentElement)}).getOrThunk(function(){return uh(l)});ah(l,e,s.get())})),f=i,i=a,d=c,m=t,g=n,p=(t=u).get(),pe(i.split(","),function(t){function e(){var e=Sp(f);return Cp(f,e,t,m,g).isSome()}var n,r=he(p,t).getOrThunk(function(){var e={withSimilar:{state:ra(!1),similar:!0,callbacks:[]},withoutSimilar:{state:ra(!1),similar:!1,callbacks:[]},withVars:[]};return p[t]=e});y(g)?((n=m?r.withSimilar:r.withoutSimilar).callbacks.push(d),1===n.callbacks.length&&n.state.set(e())):r.withVars.push({state:ra(e()),similar:m,vars:g,callback:d})}),t.set(p),{unbind:function(){var e,t=a,n=c,r=(e=u).get();pe(t.split(","),function(t){he(r,t).each(function(e){r[t]={withSimilar:be(be({},e.withSimilar),{callbacks:z(e.withSimilar.callbacks,function(e){return e!==n})}),withoutSimilar:be(be({},e.withoutSimilar),{callbacks:z(e.withoutSimilar.callbacks,function(e){return e!==n})}),withVars:z(e.withVars,function(e){return e.callback!==n})}})}),e.set(r)}};var i,u,a,c,s,l,f,d,m,g,p}},editor:{getContent:function(e,t){return i=h,u=e,a=t,ve.from(i.getBody()).fold(fe("tree"===u.format?new _d("body",11):""),function(e){return t=i,e=e,n=a,n=be(be({},r=u),{format:n,get:!0,getInner:!0}),o="raw"===(r=r.no_events?n:t.fire("BeforeGetContent",n)).format?we.trim(Mo(Hd(e,t.serializer.getTempAttrs()).innerHTML)):"text"===r.format?t.dom.isEmpty(e)?"":Mo(e.innerText||e.textContent):"tree"===r.format?t.serializer.serialize(e,r):(o=(n=t).serializer.serialize(e,r),n=yc(n),n=new RegExp("^(<"+n+"[^>]*>(&nbsp;|&#160;|\\s||<br \\/>|)<\\/"+n+">[\r\n]*|<br \\/>[\r\n]*)$"),o.replace(n,"")),Ee(["text","tree"],r.format)||Oo(xe.fromDom(e))?r.content=o:r.content=we.trim(o),(r.no_events?r:t.fire("GetContent",r)).content;var t,n,r,o});var i,u,a},setContent:function(e,t){return fg(h,e,t)},insertContent:function(e,t){return cg(h,e,t)},addVisual:function(e){var r,o=(r=h).dom,t=ne(e)?e:r.getBody();y(r.hasVisual)&&(r.hasVisual=r.getParam("visual",!0,"boolean")),pe(o.select("table,a",t),function(e){switch(e.nodeName){case"TABLE":var t=r.getParam("visual_table_class","mce-item-table","string"),n=o.getAttrib(e,"border");n&&"0"!==n||!r.hasVisual?o.removeClass(e,t):o.addClass(e,t);break;case"A":o.getAttrib(e,"href")||(n=o.getAttrib(e,"name")||e.id,t=r.getParam("visual_anchor_class","mce-item-anchor","string"),n&&r.hasVisual?o.addClass(e,t):o.removeClass(e,t))}}),r.fire("VisualAid",{element:e,hasVisual:r.hasVisual})}},selection:{getContent:function(e,t){var n=h,e=(e=e,be(be({},void 0===t?{}:t),{format:e,get:!0,selection:!0}));if((e=n.fire("BeforeGetContent",e)).isDefaultPrevented())return n.fire("GetContent",e),e.content;if("text"===e.format)return u=n,ve.from(u.selection.getRng()).map(function(e){var t=ve.from(u.dom.getParent(e.commonAncestorContainer,u.dom.isBlock)),n=u.getBody(),r=t.map(function(e){return e.nodeName}).getOr("div").toLowerCase(),o=ye.browser.isIE()&&"pre"!==r,r=u.dom.add(n,r,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},e.cloneContents()),e=Bp(r,o),i=Mo(r.textContent);return u.dom.remove(r),!zp(i,0)&&!zp(i,i.length-1)||-1===(i=(r=Bp(t.getOr(n),o)).indexOf(e))?e:(zp(r,i-1)?" ":"")+e+(zp(r,i+e.length)?" ":"")}).getOr("");e.getInner=!0,t=e,a=(r=n).selection.getRng(),o=r.dom.create("body"),i=r.selection.getSel(),i=md(r,bl(i)),(i=t.contextual?Rp(xe.fromDom(r.getBody()),i).dom:a.cloneContents())&&o.appendChild(i);var r,o,i,u,a=r.selection.serializer.serialize(o,t);return"tree"===e.format?a:(e.content=n.selection.isCollapsed()?"":a,n.fire("GetContent",e),e.content)}},raw:{getModel:function(){return ve.none()}}}}function qp(e){return re(e.plugins,"rtc")}function Gp(e){return e.rtcInstance||$p(e)}function k(e){e=e.rtcInstance;if(e)return e;throw new Error("Failed to get RTC instance not yet initialized.")}function Kp(e){return 0===e.dom.length?(qn(e),ve.none()):ve.some(e)}function Xp(e,t,u,a){e.bind(function(i){return(a?Em:Om)(i.dom,a?i.dom.length:0),t.filter(Fn).map(function(e){var t=u,n=a,r=i.dom,e=e.dom,o=(n?r:e).length;n?(_m(r,e,!1,!n),t.setStart(e,o)):(_m(e,r,!1,!n),t.setEnd(e,o))})}).orThunk(function(){var e=a;return t.filter(function(e){return Ml.isBookmarkNode(e.dom)}).bind(e?Wt:Ut).or(t).filter(Fn).map(function(e){var n,r=a;jt(n=e).each(function(e){var t=n.dom;r&&ym(e,Se(t,0))?Om(t,0):!r&&wm(e,Se(t,t.length))&&Em(t,t.length)})})})}function Yp(e,t,n){var r;e&&re(e,t)&&(0===(r=z(e[t],function(e){return e!==n})).length?delete e[t]:e[t]=r)}Nt=function(e){var t,n=e.selection.getRng(),r=pn(["pre"]);n.collapsed||(t=e.selection.getSelectedBlocks(),op(rp(rp(t,r),function(e){return r(e.previousSibling)&&-1!==Be(t,e.previousSibling)}),function(e){var t=e.previousSibling;X(e=e).remove(),X(t).append("<br><br>").append(e.childNodes)}))},np.pre||(np.pre=[]),np.pre.push(Nt);var Jp=we.each,Zp=function(e,t,n){Jp(e.childNodes,function(e){ip(e)&&(t(e)&&n(e),e.hasChildNodes())&&Zp(e,t,n)})},Qp=lr([{keep:[]},{rename:["name"]},{removed:[]}]),eh=/^(src|href|style)$/,th=we.each,nh=Zs,rh=we.each,oh=we.each,ih=function(b,y,w,r){function x(n,e){var t;O((e=void 0===e?S:e).onformat)&&e.onformat(n,e,w,r),oh(e.styles,function(e,t){p.setStyle(n,t,Js(e,w))}),e.styles&&(t=p.getAttrib(n,"style"))&&p.setAttrib(n,"data-mce-style",t),oh(e.attributes,function(e,t){p.setAttrib(n,t,Js(e,w))}),oh(e.classes,function(e){e=Js(e,w),p.hasClass(n,e)||p.addClass(n,e)})}function m(e,t){var n=!1;return oh(e,function(e){return!!ol(e)&&(ne(e.collapsed)&&e.collapsed!==g||!p.is(t,e.selector)||zs(t)?void 0:(x(t,e),!(n=!0)))}),n}function n(h,e,s){var t,v=[],l=!0,f=S.inline||S.block,d=de(t=f)?(x(t=p.create(t)),t):null;vl(h,e,function(e){var a,c=function(e){var t=!1,n=l,r=e.nodeName.toLowerCase(),o=e.parentNode,i=o.nodeName.toLowerCase();if(G(e)&&h.getContentEditable(e)&&(n=l,l="true"===h.getContentEditable(e),t=!0),A(e)&&!function(e,t,n,r){var o,i;if(e.getParam("format_empty_lines",!1,"boolean")&&il(t))return t=co(e.schema),e=xe.fromDom(n),i=function(e){return zs(e.dom)},e=((e=(o=e).dom).parentNode?Nr(xe.fromDom(e.parentNode),function(e){return!_(o,e)&&i(e)}):ve.none()).isSome(),Me(t,r)&&Qr(xe.fromDom(n.parentNode),!1)&&!e}(b,S,e,i))a=null,rl(S)&&h.remove(e);else if(rl(S)&&S.wrapper&&Qg(b,e,y,w))a=null;else if(l&&!t&&rl(S)&&!S.wrapper&&Xs(b,r)&&Ys(b,i,f))x(u=h.rename(e,f)),v.push(u),a=null;else{if(ol(S)){var u=m(C,e);if(!u&&ne(o)&&ul(S)&&(u=m(C,o)),!il(S)||u)return void(a=null)}!l||t||!Ys(b,f,r)||!Ys(b,i,f)||!s&&B(e)&&Do(e.data)||zs(e)||il(S)&&h.isBlock(e)?(a=null,pe(Ue(e.childNodes),c),t&&(l=n),a=null):(a||(a=h.clone(d,!1),e.parentNode.insertBefore(a,e),v.push(a)),a.appendChild(e))}};pe(e,c)}),!0===S.links&&pe(v,function(e){var t=function(e){"A"===e.nodeName&&x(e,S),pe(Ue(e.childNodes),t)};t(e)}),pe(v,function(e){n=0,pe(e.childNodes,function(e){var t;ne(t=e)&&B(t)&&0===t.length||Us(e)||n++});var n,t,r,o,i,u,a,c,s,l,f,d,m,g=n;function p(e){var t;1===e.nodeType&&e.parentNode&&1===e.parentNode.nodeType&&(t=tl(s,e.parentNode),s.getStyle(e,"color")&&t?s.setStyle(e,"text-decoration",t):s.getStyle(e,"text-decoration")===t&&s.setStyle(e,"text-decoration",null))}!(1<v.length)&&h.isBlock(e)||0!==g?(il(S)||rl(S)&&S.wrapper)&&(S.exact||1!==g||(e=$((c=e).childNodes,wp).filter(function(e){return hg(h,e,S)}).map(function(e){var t=h.clone(e,!1);return x(t),h.replace(t,c,!0),h.remove(e,!0),t}).getOr(c)),f=b,d=w,m=e,rh(C,function(t){var r,e,n;il(t)&&rh(f.dom.select(t.inline,m),function(e){ip(e)&&bp(f,t,d,e,t.exact?e:null)}),r=f.dom,(e=t).clear_child_styles&&(n=e.links?"*:not(a)":"*",Jp(r.select(n,m),function(n){ip(n)&&Jp(e.styles,function(e,t){r.setStyle(n,t,"")})}))}),o=S,Qg(r=b,(a=e).parentNode,i=y,u=w)&&bp(r,o,u,a)||o.merge_with_parents&&r.dom.getParent(a.parentNode,function(e){if(Qg(r,e,i,u))return bp(r,o,u,a),!0}),g=e,(l=S).styles&&l.styles.backgroundColor&&Zp(g,sp(h,"fontSize"),lp(h,"backgroundColor",Js(l.styles.backgroundColor,w))),s=h,g=e,(l=S).styles&&(l.styles.color||l.styles.textDecoration)&&(we.walk(g,p,"childNodes"),p(g)),l=h,g=e,!il(t=S)||"sub"!==t.inline&&"sup"!==t.inline||(Zp(g,sp(l,"fontSize"),lp(l,"fontSize","")),l.remove(l.select("sup"===t.inline?"sub":"sup",g),!0)),cp(h,S,0,e)):h.remove(e,!0)})}var t,e,o,i,u,a,c,s,l,f,d,C=b.formatter.get(y),S=C[0],g=!r&&b.selection.isCollapsed(),p=b.dom,h=b.selection;if("false"!==p.getContentEditable(h.getNode()))S&&(r?qs(r)?m(C,r)||((o=p.createRng()).setStartBefore(r),o.setEndAfter(r),n(p,hl(b,o,C),!0)):n(p,r,!0):g&&il(S)&&!wl(b).length?(o=y,i=w,a=(e=b).selection,c=a.getRng(),s=c.startOffset,l=c.startContainer.nodeValue,(f=Bs(e.getBody(),a.getStart()))&&(u=wg(f)),d=/[^\s\u00a0\u00ad\u200b\ufeff]/,l&&0<s&&s<l.length&&d.test(l.charAt(s))&&d.test(l.charAt(s-1))?(d=a.getBookmark(),c.collapse(!0),l=kf(hl(e,c,e.formatter.get(o))),e.formatter.apply(o,i,l),a.moveToBookmark(d)):(f&&u.nodeValue===ep||(l=e.getDoc(),d=xg(!0).dom,u=(f=l.importNode(d,!0)).firstChild,c.insertNode(f),s=1),e.formatter.apply(o,i,f),a.setCursorLocation(u,s))):(l=h.getNode(),d=C[0],b.settings.forced_root_block||!d.defaultBlock||p.getParent(l,p.isBlock)||ih(b,d.defaultBlock),h.setRng(og(h.getRng())),Ol(h,!0,function(){Tl(b,function(e,t){t=t?e:hl(b,e,C);n(p,t,!1)})}),Gs(p,h,h.getRng()),b.nodeChanged()),t=b,op(np[y],function(e){e(t)}));else{r=h.getNode();for(var v=0,k=C.length;v<k;v++){var T=C[v];if(T.ceFalseOverride&&ol(T)&&p.is(r,T.selector)){x(r,T);break}}}ff(b,y,r,w)},uh=function(e){return e.selection.getStart()},ah=function(i,u,e){var a=Sp(i,u);q(e,function(e,o){function t(e){var t,n=Cp(i,a,o,e.similar,xp(e)?e.vars:void 0),r=n.isSome();e.state.get()!==r&&(e.state.set(r),t=n.getOr(u),xp(e)?e.callback(r,{node:t,format:o,parents:a}):pe(e.callbacks,function(e){e(r,{node:t,format:o,parents:a})}))}pe([e.withSimilar,e.withoutSimilar],t),pe(e.withVars,t)})},ch=Ke(function(){return document.implementation.createHTMLDocument("undo")});function sh(e){return e.select}function lh(e){return e&&e.ownerDocument&&at(xe.fromDom(e.ownerDocument),xe.fromDom(e))}function fh(c,i,e,s){function t(e,t){var n=s;if(e=e,e=t=be(be({format:"html"},t=void 0===t?{}:t),{set:!0,selection:!0,content:e}),!t.no_events){t=n.fire("BeforeSetContent",t);if(t.isDefaultPrevented())return void n.fire("SetContent",t);e=t}e.content=(t=n,"raw"===(a=e).format?a.content:(r=t.selection.getRng(),r=(r=t.dom.getParent(r.commonAncestorContainer,t.dom.isBlock))?{context:r.nodeName.toLowerCase()}:{},r=t.parser.parse(a.content,be(be({isRootContent:!0,forced_root_block:!1},r),a)),Ud({validate:t.validate},t.schema).serialize(r)));var r,o,i,u,a=n.selection.getRng();r=(t=a).createContextualFragment(e.content),o=ve.from(r.firstChild).map(xe.fromDom),i=ve.from(r.lastChild).map(xe.fromDom),t.deleteContents(),t.insertNode(r),r=o.bind(Ut).filter(Fn).bind(Kp),u=i.bind(Wt).filter(Fn).bind(Kp),Xp(r,o,t,!0),Xp(u,i,t,!1),t.collapse(!1),n.selection.setRng(a),$f(n,a),e.no_events||n.fire("SetContent",e)}function n(){var e,t=u(),n=null==t?void 0:t.anchorNode,r=null==t?void 0:t.focusNode;return!(t&&n&&r&&!gn(n)&&!gn(r))||((e=c.createRng()).setStart(n,t.anchorOffset),e.collapse(!0),(n=c.createRng()).setStart(r,t.focusOffset),n.collapse(!0),e.compareBoundaryPoints(e.START_TO_START,n)<=0)}function r(e){var t=l();t.collapse(!!e),a(t)}function u(){return i.getSelection?i.getSelection():i.document.selection}function o(e,t){return p||(p={},h={},g.on("NodeChange",function(e){var n=e.element,r=x(n),o={};we.each(p,function(e,n){w(n,r).each(function(t){h[n]||(pe(e,function(e){e(!0,{node:t,selector:n,parents:r})}),h[n]=e),o[n]=e})}),we.each(h,function(e,t){o[t]||(delete h[t],we.each(e,function(e){e(!1,{node:n,selector:t,parents:r})}))})})),p[e]||(p[e]=[]),p[e].push(t),w(e,x(g.selection.getStart())).each(function(){h[e]=p[e]}),{unbind:function(){Yp(p,e,t),Yp(h,e,t)}}}function l(){function e(e,t,n){try{return t.compareBoundaryPoints(e,n)}catch(e){return-1}}var t,n,r=i.document;if(void 0!==s.bookmark&&!1===cd(s)){var o=nd(s);if(o.isSome())return o.map(function(e){return md(s,[e])[0]}).getOr(r.createRange())}try{(t=u())&&!gn(t.anchorNode)&&(n=0<t.rangeCount?t.getRangeAt(0):(t.createRange?t:r).createRange(),n=md(s,[n])[0])}catch(e){}return(n=n||(r.createRange?r.createRange():r.body.createTextRange())).setStart&&9===n.startContainer.nodeType&&n.collapsed&&(o=c.getRoot(),n.setStart(o,0),n.setEnd(o,0)),f&&d&&(0===e(n.START_TO_START,n,f)&&0===e(n.END_TO_END,n,f)?n=d:d=f=null),n}function a(e,t){var n;if((r=e)&&(sh(r)||lh(r.startContainer)&&lh(r.endContainer))){var r=sh(e)?e:null;if(r){d=null;try{r.select()}catch(e){}}else{r=u();if(e=s.fire("SetSelectionRange",{range:e,forward:t}).range,r){d=e;try{r.removeAllRanges(),r.addRange(e)}catch(e){}!1===t&&r.extend&&(r.collapse(e.endContainer,e.endOffset),r.extend(e.startContainer,e.startOffset)),f=0<r.rangeCount?r.getRangeAt(0):null}e.collapsed||e.startContainer!==e.endContainer||!r.setBaseAndExtent||ye.ie||e.endOffset-e.startOffset<2&&e.startContainer.hasChildNodes()&&(n=e.startContainer.childNodes[e.startOffset])&&"IMG"===n.tagName&&(r.setBaseAndExtent(e.startContainer,e.startOffset,e.endContainer,e.endOffset),r.anchorNode===e.startContainer&&r.focusNode===e.endContainer||r.setBaseAndExtent(n,0,n,1)),s.fire("AfterSetSelectionRange",{range:e,forward:t})}}}var f,d,m,g,p,h,v={bookmarkManager:null,controlSelection:null,dom:m=c,win:i,serializer:e,editor:g=s,collapse:r,setCursorLocation:function(e,t){var n=c.createRng();ne(e)&&ne(t)?(n.setStart(e,t),n.setEnd(e,t),a(n),r(!1)):(Sl(c,n,s.getBody(),!0),a(n))},getContent:function(e){return t=(e=void 0===e?{}:e).format||"html",e=e,k(s).selection.getContent(t,e);var t},setContent:t,getBookmark:function(e,t){return b.getBookmark(e,t)},moveToBookmark:function(e){return b.moveToBookmark(e)},select:function(e,t){var r=c,o=t;return ve.from(e).map(function(e){var t=r.nodeIndex(e),n=r.createRng();return n.setStart(e.parentNode,t),n.setEnd(e.parentNode,t+1),o&&(Sl(r,n,e,!0),Sl(r,n,e,!1)),n}).each(a),e},isCollapsed:function(){var e=l(),t=u();return!(!e||e.item)&&(e.compareEndPoints?0===e.compareEndPoints("StartToEnd",e):!t||e.collapsed)},isForward:n,setNode:function(e){return t(c.getOuterHTML(e)),e},getNode:function(){return e=s.getBody(),(t=l())?(n=t.startContainer,r=t.endContainer,o=t.startOffset,i=t.endOffset,u=t.commonAncestorContainer,!t.collapsed&&(n===r&&i-o<2&&n.hasChildNodes()&&(u=n.childNodes[o]),3===n.nodeType)&&3===r.nodeType&&(n=n.length===o?dd(n.nextSibling,!0):n.parentNode,r=0===i?dd(r.previousSibling,!1):r.parentNode,n)&&n===r?n:u&&3===u.nodeType?u.parentNode:u):e;var e,t,n,r,o,i,u},getSel:u,setRng:a,getRng:l,getStart:function(e){return ld(s.getBody(),l(),e)},getEnd:function(e){return fd(s.getBody(),l(),e)},getSelectedBlocks:function(e,t){var n=c,r=l(),o=t,i=[],t=n.getRoot();if(e=n.getParent(e||ld(t,r,r.collapsed),n.isBlock),o=n.getParent(o||fd(t,r,r.collapsed),n.isBlock),e&&e!==t&&i.push(e),e&&o&&e!==o)for(var u,a=new Pr(e,t);(u=a.next())&&u!==o;)n.isBlock(u)&&i.push(u);return o&&e!==o&&o!==t&&i.push(o),i},normalize:function(){var e,t=l();return 1<bl(u()).length||!kl(s)?t:((e=Cf(c,t)).each(function(e){a(e,n())}),e.getOr(t))},selectorChanged:function(e,t){return o(e,t),v},selectorChangedWithUnbind:o,getScrollContainer:function(){for(var e,t=c.getRoot();t&&"BODY"!==t.nodeName;){if(t.scrollHeight>t.clientHeight){e=t;break}t=t.parentNode}return e},scrollIntoView:function(e,t){ne(e)?(s.inline?jf:Wf)(s,e,t):$f(s,l(),t)},placeCaretAt:function(e,t){return a(pf(e,t,s.getDoc()))},getBoundingClientRect:function(){var e=l();return e.collapsed?Se.fromRangeStart(e).getClientRects()[0]:e.getBoundingClientRect()},destroy:function(){i=f=d=null,y.destroy()}},b=Ml(v),y=mf(v,s);function w(t,e){return $(e,function(e){return m.is(e,t)})}function x(e){return m.getParents(e,null,m.getRoot())}return v.bookmarkManager=b,v.controlSelection=y,v}function dh(e){var t,e=decodeURIComponent(e).split(","),n=/data:([^;]+)/.exec(e[0]);return{type:t=n?n[1]:t,data:e[1]}}function mh(e,t){var n;try{n=atob(t)}catch(e){return ve.none()}for(var r=new Uint8Array(n.length),o=0;o<r.length;o++)r[o]=n.charCodeAt(o);return ve.some(new Blob([r],{type:e}))}function gh(e){return 0===e.indexOf("blob:")?(o=e,new Rr(function(e,t){function n(){t("Cannot convert "+o+" to Blob. Resource might not exist or is inaccessible.")}try{var r=new XMLHttpRequest;r.open("GET",o,!0),r.responseType="blob",r.onload=function(){200===r.status?e(r.response):n()},r.onerror=n,r.send()}catch(e){n()}})):0===e.indexOf("data:")?(n=e,new Rr(function(e){var t=dh(n);mh(t.type,t.data).fold(function(){return e(new Blob([]))},e)})):null;var o,n}function ph(e){return(e||"blobid")+xh++}function hh(e,t){return e.replace(t.re,function(e){return he(t.uris,e).getOr(e)})}function vh(e,t,n,r){(e.padd_empty_with_br||t.insert)&&n[r.name]?r.empty().append(new _d("br",1)).shortEnded=!0:r.empty().append(new _d("#text",3)).value=_o}function bh(t,e,n,r){return r.isEmpty(e,n,function(e){return(e=t.getElementRule(e.name))&&e.paddEmpty})}function yh(e,g){var o,i,p=e.schema;function t(r){var e,t=r.attr("src");(e=r).attr("src")===ye.transparentSrc||ne(e.attr("data-mce-placeholder"))||ne(r.attr("data-mce-bogus"))||((e=/data:([^;]+);base64,([a-z0-9\+\/=\s]+)/i.exec(t))?ve.some({type:e[1],data:decodeURIComponent(e[2])}):ve.none()).filter(function(){return e=r,!(t=o).images_dataimg_filter||((n=new Image).src=e.attr("src"),q(e.attributes.map,function(e,t){n.setAttribute(t,e)}),t.images_dataimg_filter(n));var e,t,n}).bind(function(e){var t=e.type,n=e.data;return ve.from(i.getByData(n,t)).orThunk(function(){return mh(t,n).map(function(e){e=i.create(ph(),e,n);return i.add(e),e})})}).each(function(e){r.attr("src",e.blobUri())})}g.remove_trailing_brs&&e.addNodeFilter("br",function(e,t,n){var r,o,i,u,a,c,s,l=e.length,f=we.extend({},p.getBlockElements()),d=p.getNonEmptyElements(),m=p.getWhiteSpaceElements();for(f.body=1,r=0;r<l;r++)if(i=(o=e[r]).parent,f[o.parent.name]&&o===i.lastChild){for(a=o.prev;a;){if("span"!==(c=a.name)||"bookmark"!==a.attr("data-mce-type")){"br"===c&&(o=null);break}a=a.prev}o&&(o.remove(),bh(p,d,m,i))&&(s=p.getElementRule(i.name))&&(s.removeEmpty?i.remove():s.paddEmpty&&vh(g,n,f,i))}else{for(u=o;i&&i.firstChild===u&&i.lastChild===u&&!f[(u=i).name];)i=i.parent;u===i&&!0!==g.padd_empty_with_br&&((s=new _d("#text",3)).value=_o,o.replace(s))}}),e.addAttributeFilter("href",function(e){var t,n=e.length;if(!g.allow_unsafe_link_target)for(;n--;){var r=e[n];"a"===r.name&&"_blank"===r.attr("target")&&r.attr("rel",(t=void 0,t=(r=r.attr("rel"))?we.trim(r):"",/\b(noopener)\b/g.test(t)?t:t.split(" ").filter(function(e){return 0<e.length}).concat(["noopener"]).sort().join(" ")))}}),g.allow_html_in_named_anchor||e.addAttributeFilter("id,name",function(e){for(var t,n,r,o,i=e.length;i--;)if("a"===(o=e[i]).name&&o.firstChild&&!o.attr("href"))for(r=o.parent,t=o.lastChild;n=t.prev,r.insert(t,o),t=n;);}),g.fix_list_elements&&e.addNodeFilter("ul,ol",function(e){for(var t,n,r=e.length;r--;)"ul"!==(n=(t=e[r]).parent).name&&"ol"!==n.name||(t.prev&&"li"===t.prev.name?t.prev.append(t):((n=new _d("li",1)).attr("style","list-style-type: none"),t.wrap(n)))}),g.validate&&p.getValidClasses()&&e.addAttributeFilter("class",function(e){for(var t=p.getValidClasses(),n=e.length;n--;){for(var r=e[n],o=r.attr("class").split(" "),i="",u=0;u<o.length;u++){var a=o[u],c=!1,s=t["*"];s&&s[a]&&(c=!0),s=t[r.name],(c=!(c||!s||!s[a])||c)&&(i&&(i+=" "),i+=a)}i.length||(i=null),r.attr("class",i)}}),(i=(o=g).blob_cache)&&e.addAttributeFilter("src",function(e){return pe(e,t)})}function wh(e,t){return e&&e.firstChild&&e.firstChild===e.lastChild&&e.firstChild.name===t}var xh=0,Ch=we.each,Sh=we.trim,kh="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),Th={ftp:21,http:80,https:443,mailto:25},Oh=["img","video"],Eh=(_h.parseDataUri=function(e){var t,e=decodeURIComponent(e).split(","),n=/data:([^;]+)/.exec(e[0]);return{type:t=n?n[1]:t,data:e[1]}},_h.isDomSafe=function(e,t,n){if((n=void 0===n?{}:n).allow_script_urls)return!0;var r=ii.decode(e).replace(/[\s\u0000-\u001F]+/g,"");try{r=decodeURIComponent(r)}catch(e){r=unescape(r)}return!(/((java|vb)script|mhtml):/i.test(r)||(r=r,t=t,!(n=n).allow_html_data_urls&&(/^data:image\//i.test(r)?(ne(n=n.allow_svg_data_urls)?!n:!ne(t)||!Ee(Oh,t))&&/^data:image\/svg\+xml/i.test(r):/^data:/i.test(r))))},_h.getDocumentBaseUrl=function(e){e=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?e.href:e.protocol+"//"+e.host+e.pathname;return/^[^:]+:\/\/\/?[^\/]+\//.test(e)&&(e=e.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(e)||(e+="/")),e},_h.prototype.setPath=function(e){e=/^(.*?)\/?(\w+)?$/.exec(e);this.path=e[0],this.directory=e[1],this.file=e[2],this.source="",this.getURI()},_h.prototype.toRelative=function(e){var t,n;return"./"===e?e:"mce_host"!==(e=new _h(e,{base_uri:this})).host&&this.host!==e.host&&e.host||this.port!==e.port||this.protocol!==e.protocol&&""!==e.protocol?e.getURI():(t=this.getURI())===(n=e.getURI())||"/"===t.charAt(t.length-1)&&t.substr(0,t.length-1)===n?t:(n=this.toRelPath(this.path,e.path),e.query&&(n+="?"+e.query),e.anchor&&(n+="#"+e.anchor),n)},_h.prototype.toAbsolute=function(e,t){e=new _h(e,{base_uri:this});return e.getURI(t&&this.isSameOrigin(e))},_h.prototype.isSameOrigin=function(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;var t=Th[this.protocol];if(t&&(this.port||t)==(e.port||t))return!0}return!1},_h.prototype.toRelPath=function(e,t){var n,r,o=0,i="",u=e.substring(0,e.lastIndexOf("/")).split("/"),a=t.split("/");if(u.length>=a.length)for(n=0,r=u.length;n<r;n++)if(n>=a.length||u[n]!==a[n]){o=n+1;break}if(u.length<a.length)for(n=0,r=a.length;n<r;n++)if(n>=u.length||u[n]!==a[n]){o=n+1;break}if(1===o)return t;for(n=0,r=u.length-(o-1);n<r;n++)i+="../";for(n=o-1,r=a.length;n<r;n++)i+=n!==o-1?"/"+a[n]:a[n];return i},_h.prototype.toAbsPath=function(e,t){var n,r=0,o=[],i=/\/$/.test(t)?"/":"",e=e.split("/"),u=t.split("/");for(Ch(e,function(e){e&&o.push(e)}),e=o,n=u.length-1,o=[];0<=n;n--)0!==u[n].length&&"."!==u[n]&&(".."!==u[n]?0<r?r--:o.push(u[n]):r++);return 0!==(t=(n=e.length-r)<=0?ee(o).join("/"):e.slice(0,n).join("/")+"/"+ee(o).join("/")).indexOf("/")&&(t="/"+t),i&&t.lastIndexOf("/")!==t.length-1&&(t+=i),t},_h.prototype.getURI=function(e){var t;return void 0===e&&(e=!1),this.source&&!e||(t="",e||(this.protocol?t+=this.protocol+"://":t+="//",this.userInfo&&(t+=this.userInfo+"@"),this.host&&(t+=this.host),this.port&&(t+=":"+this.port)),this.path&&(t+=this.path),this.query&&(t+="?"+this.query),this.anchor&&(t+="#"+this.anchor),this.source=t),this.source},_h);function _h(e,t){e=Sh(e),this.settings=t||{};var n,r,o,i,t=this.settings.base_uri,u=this;/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e)?u.source=e:(n=0===e.indexOf("//"),0!==e.indexOf("/")||n||(e=(t&&t.protocol||"http")+"://mce_host"+e),/^[\w\-]*:?\/\//.test(e)||(r=this.settings.base_uri?this.settings.base_uri.path:new _h(document.location.href).directory,e=this.settings.base_uri&&""==this.settings.base_uri.protocol?"//mce_host"+u.toAbsPath(r,e):(o=/([^#?]*)([#?]?.*)/.exec(e),(t&&t.protocol||"http")+"://mce_host"+u.toAbsPath(r,o[1])+o[2])),e=e.replace(/@@/g,"(mce_at)"),i=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e),Ch(kh,function(e,t){t=(t=i[t])&&t.replace(/\(mce_at\)/g,"@@");u[e]=t}),t&&(u.protocol||(u.protocol=t.protocol),u.userInfo||(u.userInfo=t.userInfo),u.port||"mce_host"!==u.host||(u.port=t.port),u.host&&"mce_host"!==u.host||(u.host=t.host),u.source=""),n&&(u.protocol=""))}function Ah(e,t,n){for(var r=/<([!?\/])?([A-Za-z0-9\-_:.]+)/g,o=/(?:\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\s*|\/)>/g,i=e.getShortEndedElements(),u=1,a=n;0!==u;)for(r.lastIndex=a;;){var c=r.exec(t);if(null===c)return a;if("!"===c[1]){a=vt(c[2],"--")?Rh(t,!1,c.index+"!--".length):Rh(t,!0,c.index+1);break}o.lastIndex=r.lastIndex;var s=o.exec(t);if(!v(s)&&s.index===r.lastIndex){"/"===c[1]?--u:re(i,c[2])||(u+=1),a=r.lastIndex+s[0].length;break}}return a}function Dh($,q){void 0===q&&(q=lo()),$=$||{};var G=Nh(),K=G.createElement("form");!1!==$.fix_self_closing&&($.fix_self_closing=!0);var X=$.comment||le,Y=$.cdata||le,J=$.text||le,Z=$.start||le,Q=$.end||le,ee=$.pi||le,te=$.doctype||le;return{parse:function(e,t){void 0===t&&(t="html");var a=function(e){for(var t,n=/data:[^;<"'\s]+;base64,([a-z0-9\+\/=\s]+)/gi,r=[],o={},i=ba("img"),u=0,a=0;t=n.exec(e);){var c=t[0],s=i+"_"+a++;o[s]=c,u<t.index&&r.push(e.substr(u,t.index-u)),r.push(s),u=t.index+c.length}var l=new RegExp(i+"_[0-9]+","g");return 0===u?{prefix:i,uris:o,html:e,re:l}:(u<e.length&&r.push(e.substr(u)),{prefix:i,uris:o,html:r.join(""),re:l})}(e),e=t;void 0===e&&(e="html");for(var n,i,c,r,o,u,s,l,f,d,m,g,p,h,v,b,y,w,x,C=a.html,S=0,k=[],T=0,O=ii.decode,E=we.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),_="html"===e?0:1,A=function(e){for(var t,n=k.length;n--&&k[n].name!==e;);if(0<=n){for(t=k.length-1;n<=t;t--)(e=k[t]).valid&&Q(e.name);k.length=n}},D=function(e,t){return J(hh(e,a),t)},P=function(e){""!==e&&(">"===e.charAt(0)&&(e=" "+e),$.allow_conditional_comments||"[if"!==e.substr(0,3).toLowerCase()||(e=" "+e),X(hh(e,a)))},M=function(e,t){var n=e||"",r=!vt(n,"--"),o=Rh(C,r,t);return e=C.substr(t,o-t),P(r?n+e:e),o+1},N=new RegExp("<(?:(?:!--([\\w\\W]*?)--!?>)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:![Dd][Oo][Cc][Tt][Yy][Pp][Ee]([\\w\\W]*?)>)|(?:!(--)?)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)>)|(?:([A-Za-z][A-Za-z0-9\\-_:.]*)(\\s(?:[^'\">]+(?:\"[^\"]*\"|'[^']*'))*[^\"'>]*(?:\"[^\">]*|'[^'>]*)?|\\s*|\\/)>))","g"),I=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,L=q.getShortEndedElements(),F=$.self_closing_elements||q.getSelfClosingElements(),H=q.getBoolAttrs(),R=$.validate,V=$.remove_internals,j=$.fix_self_closing,U=q.getSpecialElements(),W=C+">";n=N.exec(W);){var z=n[0];if(S<n.index&&D(O(C.substr(S,n.index-S))),i=n[7])A(i=":"===(i=i.toLowerCase()).charAt(0)?i.substr(1):i);else if(i=n[8]){if(n.index+z.length>C.length){D(O(C.substr(n.index))),S=n.index+z.length;continue}l=(i=":"===(i=i.toLowerCase()).charAt(0)?i.substr(1):i)in L,j&&F[i]&&0<k.length&&k[k.length-1].name===i&&A(i);x=I,B=n[9];var B=(x=x.exec(B))&&(B=x[1],x=x[2],"string"==typeof B)&&"data-mce-bogus"===B.toLowerCase()?x:null;if(null!==B){if("all"===B){S=Ah(q,C,N.lastIndex),N.lastIndex=S;continue}d=!1}if(!R||(f=q.getElementRule(i))){if(d=!0,R&&(p=f.attributes,h=f.attributePatterns),(g=n[9])?((s=-1!==g.indexOf("data-mce-type"))&&V&&(d=!1),(c=[]).map={},g.replace(I,function(e,t,n,r,o){return function(e,t,n,r,o){if(n=hh((t=t.toLowerCase())in H?t:O(n||r||o||""),a),R&&!s&&0==(0===(r=t).indexOf("data-")||0===r.indexOf("aria-"))){var i=p[t];if(!i&&h){for(var u=h.length;u--&&!(i=h[u]).pattern.test(t););-1===u&&(i=null)}if(!i)return;if(i.validValues&&!(n in i.validValues))return}("name"===t||"id"===t)&&e in Mh&&(n in G||n in K)||E[t]&&!Eh.isDomSafe(n,e,$)||s&&(t in E||0===t.indexOf("on"))||(c.map[t]=n,c.push({name:t,value:n}))}(i,t,n,r,o),""})):(c=[]).map={},R&&!s){if(v=f.attributesRequired,b=f.attributesDefault,y=f.attributesForced,f.removeEmptyAttrs&&!c.length&&(d=!1),y)for(r=y.length;r--;)u=(m=y[r]).name,"{$uid}"===(w=m.value)&&(w="mce_"+T++),c.map[u]=w,c.push({name:u,value:w});if(b)for(r=b.length;r--;)(u=(m=b[r]).name)in c.map||("{$uid}"===(w=m.value)&&(w="mce_"+T++),c.map[u]=w,c.push({name:u,value:w}));if(v){for(r=v.length;r--&&!(v[r]in c.map););-1===r&&(d=!1)}if(m=c.map["data-mce-bogus"]){if("all"===m){S=Ah(q,C,N.lastIndex),N.lastIndex=S;continue}d=!1}}d&&Z(i,c,l)}else d=!1;if(x=U[i]){x.lastIndex=S=n.index+z.length,S=(n=x.exec(C))?(d&&(o=C.substr(S,n.index-S)),n.index+n[0].length):(o=C.substr(S),C.length),d&&(0<o.length&&D(o,!0),Q(i)),N.lastIndex=S;continue}l||(g&&g.indexOf("/")===g.length-1?d&&Q(i):k.push({name:i,valid:d}))}else if(i=n[1])P(i);else if(i=n[2]){if(!(1==_||$.preserve_cdata||0<k.length&&q.isValidChild(k[k.length-1].name,"#cdata"))){S=M("",n.index+2),N.lastIndex=S;continue}Y(i)}else if(i=n[3])te(i);else{if((i=n[4])||"<!"===z){S=M(i,n.index+z.length),N.lastIndex=S;continue}if(i=n[5]){if(1!=_){S=M("?",n.index+2),N.lastIndex=S;continue}ee(i,n[6])}}S=n.index+z.length}for(S<C.length&&D(O(C.substr(S))),r=k.length-1;0<=r;r--)(i=k[r]).valid&&Q(i.name)}}}var Mh=we.makeMap("button,fieldset,form,iframe,img,image,input,object,output,select,textarea"),Nh=Ke(function(){return document.implementation.createHTMLDocument("parser")}),Rh=function(e,t,n){void 0===n&&(n=0);var r=e.toLowerCase();if(-1!==r.indexOf("[if ",n)&&(o=n,/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(r.substr(o))))return o=r.indexOf("[endif]",n),r.indexOf(">",o);if(t)return-1!==(o=r.indexOf(">",n))?o:r.length;t=/--!?>/g;t.lastIndex=n;var o=t.exec(e);return o?o.index+o[0].length:r.length};function zh(X,Y){void 0===Y&&(Y=lo());var J={},Z=[],Q={},ee={};function te(e){var t=e.name;t in J&&((r=Q[t])?r.push(e):Q[t]=[e]);for(var n=Z.length;n--;){var r,o=Z[n].name;o in e.attributes.map&&((r=ee[o])?r.push(e):ee[o]=[e])}return e}(X=X||{}).validate=!("validate"in X)||X.validate,X.root_name=X.root_name||"body";var e,t,n,r,u,a,o,i={schema:Y,addAttributeFilter:function(e,n){Jh(Zh(e),function(e){for(var t=0;t<Z.length;t++)if(Z[t].name===e)return void Z[t].callbacks.push(n);Z.push({name:e,callbacks:[n]})})},getAttributeFilters:function(){return[].concat(Z)},addNodeFilter:function(e,n){Jh(Zh(e),function(e){var t=J[e];t||(J[e]=t=[]),t.push(n)})},getNodeFilters:function(){var e,t=[];for(e in J)re(J,e)&&t.push({name:e,callbacks:J[e]});return t},filterNode:te,parse:function(P,u){var e,t,n,r,o,a,i,c,s=[];function l(e){for(var t=Y.getBlockElements(),n=e.prev;n&&3===n.type;){var r=n.value.replace(w,"");if(0<r.length)return n.value=r;r=n.next;if(r){if(3===r.type&&r.value.length){n=n.prev;continue}if(!t[r.name]&&"script"!==r.name&&"style"!==r.name){n=n.prev;continue}}r=n.prev;n.remove(),n=r}}function f(e,t){var n,t=new _d(e,t);return e in J&&((n=Q[e])?n.push(t):Q[e]=[t]),t}u=u||{},Q={},ee={};var d=Qh(Yh("script,style,head,html,body,title,meta,param"),Y.getBlockElements()),I=co(Y),m=Y.getNonEmptyElements(),g=Y.children,p=X.validate,h=("forced_root_block"in u?u:X).forced_root_block,v=!1===h?"":!0===h?"p":h,b=Y.getWhiteSpaceElements(),y=/^[ \t\r\n]+/,w=/[ \t\r\n]+$/,L=/[ \t\r\n]+/g,F=/^[ \t\r\n]+$/,x=re(b,u.context)||re(b,X.root_name),h=Dh({validate:p,document:X.document,allow_html_data_urls:X.allow_html_data_urls,allow_svg_data_urls:X.allow_svg_data_urls,allow_script_urls:X.allow_script_urls,allow_conditional_comments:X.allow_conditional_comments,preserve_cdata:X.preserve_cdata,self_closing_elements:function(e){var t,n={};for(t in e)"li"!==t&&"p"!==t&&(n[t]=e[t]);return n}(Y.getSelfClosingElements()),cdata:function(e){c.append(f("#cdata",4)).value=e},text:function(e,t){var n;x||(e=e.replace(L," "),(n=c.lastChild)&&(re(d,n.name)||"br"===n.name)&&(e=e.replace(y,""))),0!==e.length&&((n=f("#text",3)).raw=!!t,c.append(n).value=e)},comment:function(e){c.append(f("#comment",8)).value=e},pi:function(e,t){c.append(f(e,7)).value=t,l(c)},doctype:function(e){c.append(f("#doctype",10)).value=e,l(c)},start:function(e,t,n){var r=p?Y.getElementRule(e):{};if(r){var o=f(r.outputName||e,1),r=(o.attributes=t,o.shortEnded=n,c.append(o),g[c.name]);r&&g[o.name]&&!r[o.name]&&s.push(o);for(var i=Z.length;i--;){var u=Z[i].name;u in t.map&&((a=ee[u])?a.push(o):ee[u]=[o])}d[e]&&l(o),n||(c=o),!x&&b[e]&&(x=!0)}},end:function(e){var t,n,r,o=p?Y.getElementRule(e):{};if(o){if(d[e]&&!x){if((t=c.firstChild)&&3===t.type)if(0<(n=t.value.replace(y,"")).length)t.value=n,t=t.next;else for(r=t.next,t.remove(),t=r;t&&3===t.type;)n=t.value,r=t.next,0!==n.length&&!F.test(n)||(t.remove(),t=r),t=r;if((t=c.lastChild)&&3===t.type)if(0<(n=t.value.replace(w,"")).length)t.value=n,t=t.prev;else for(r=t.prev,t.remove(),t=r;t&&3===t.type;)n=t.value,r=t.prev,0!==n.length&&!F.test(n)||(t.remove(),t=r),t=r}x&&b[e]&&(x=!1);var e=bh(Y,m,b,c),i=c.parent;o.paddInEmptyBlock&&e&&function(){for(var e=c;ne(e);){if(e.name in I)return bh(Y,m,b,e);e=e.parent}}()?vh(X,u,d,c):o.removeEmpty&&e?d[c.name]?c.empty().remove():c.unwrap():o.paddEmpty&&(wh(o=c,"#text")&&o.firstChild.value===_o||e)&&vh(X,u,d,c),c=i}}},Y),C=c=new _d(u.context||X.root_name,11);if(h.parse(P,u.format),p&&s.length)if(u.context)u.invalid=!0;else for(var H=s,V=Yh("tr,td,th,tbody,thead,tfoot,table"),j=Y.getNonEmptyElements(),U=Y.getWhiteSpaceElements(),W=Y.getTextBlockElements(),$=Y.getSpecialElements(),S=function(e,t){if(void 0===t&&(t=e.parent),$[e.name])e.empty().remove();else{for(var n=0,r=e.children();n<r.length;n++){var o=r[n];Y.isValidChild(t.name,o.name)||S(o,t)}e.unwrap()}},k=0;k<H.length;k++){var T,O=H[k],E=void 0,_=void 0;if(O.parent&&!O.fixed)if(W[O.name]&&"li"===O.parent.name){for(var A=O.next;A&&W[A.name];)A.name="li",A.fixed=!0,O.parent.insert(A,O.parent),A=A.next;O.unwrap()}else{for(var D=[O],E=O.parent;E&&!Y.isValidChild(E.name,O.name)&&!V[E.name];E=E.parent)D.push(E);if(E&&1<D.length)if(Y.isValidChild(E.name,O.name)){D.reverse();for(var M=T=te(D[0].clone()),N=0;N<D.length-1;N++){Y.isValidChild(M.name,D[N].name)?(_=te(D[N].clone()),M.append(_)):_=M;for(var R=D[N].firstChild;R&&R!==D[N+1];){var q=R.next;_.append(R),R=q}M=_}bh(Y,j,U,T)?E.insert(O,D[0],!0):(E.insert(T,D[0],!0),E.insert(O,T)),(bh(Y,j,U,E=D[0])||wh(E,"br"))&&E.empty().remove()}else S(O);else O.parent&&("li"!==O.name?Y.isValidChild(O.parent.name,"div")&&Y.isValidChild("div",O.name)?O.wrap(te(new _d("div",1))):S(O):!(A=O.prev)||"ul"!==A.name&&"ol"!==A.name?!(A=O.next)||"ul"!==A.name&&"ol"!==A.name?O.wrap(te(new _d("ul",1))):A.insert(O,A.firstChild,!0):A.append(O))}}if(v&&("body"===C.name||u.isRootContent)){function G(e){e&&((z=e.firstChild)&&3===z.type&&(z.value=z.value.replace(y,"")),z=e.lastChild)&&3===z.type&&(z.value=z.value.replace(w,""))}var z=C.firstChild,B=null;if(Y.isValidChild(C.name,v.toLowerCase())){for(;z;){var K=z.next;3===z.type||1===z.type&&"p"!==z.name&&!d[z.name]&&!z.attr("data-mce-type")?(B||((B=f(v,1)).attr(X.forced_root_block_attrs),C.insert(B,z)),B.append(z)):(G(B),B=null),z=K}G(B)}}if(!u.invalid){for(i in Q)if(re(Q,i)){for(a=J[i],r=(e=Q[i]).length;r--;)e[r].parent||e.splice(r,1);for(t=0,n=a.length;t<n;t++)a[t](e,i,u)}for(t=0,n=Z.length;t<n;t++)if((a=Z[t]).name in ee){for(r=(e=ee[a.name]).length;r--;)e[r].parent||e.splice(r,1);for(r=0,o=a.callbacks.length;r<o;r++)a.callbacks[r](e,a.name,u)}}return C}};return yh(i,X),X.inline_styles&&(e=i,t=X,o=mo(),t.convert_fonts_to_spans&&(r=e,u=o,a=we.explode(t.font_size_legacy_values),r.addNodeFilter("font",function(e){pe(e,function(e){var t,n=u.parse(e.attr("style")),r=e.attr("color"),o=e.attr("face"),i=e.attr("size");r&&(n.color=r),o&&(n["font-family"]=o),i&&(n["font-size"]=a[parseInt(e.attr("size"),10)-1]),e.name="span",e.attr("style",u.serialize(n)),t=e,pe(["color","face","size"],function(e){t.attr(e,null)})})})),n=o,e.addNodeFilter("strike",function(e){pe(e,function(e){var t=n.parse(e.attr("style"));t["text-decoration"]="line-through",e.name="span",e.attr("style",n.serialize(t))})})),i}function Bh(e,t,n){-1===we.inArray(t,n)&&(e.addAttributeFilter(n,function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)}),t.push(n))}function Ph(e,t){l=e,e=["data-mce-selected"],d=(f=t)&&f.dom?f.dom:Ce.DOM,m=f&&f.schema?f.schema:lo(l),l.entity_encoding=l.entity_encoding||"named",l.remove_trailing_brs=!("remove_trailing_brs"in l)||l.remove_trailing_brs,g=zh(l,m),c=l,s=d,(n=g).addAttributeFilter("data-mce-tabindex",function(e,t){for(var n=e.length;n--;){var r=e[n];r.attr("tabindex",r.attr("data-mce-tabindex")),r.attr(t,null)}}),n.addAttributeFilter("src,href,style",function(e,t){for(var n="data-mce-"+t,r=c.url_converter,o=c.url_converter_scope,i=e.length;i--;){var u=e[i],a=u.attr(n);void 0!==a?(u.attr(t,0<a.length?a:null),u.attr(n,null)):(a=u.attr(t),"style"===t?a=s.serializeStyle(s.parseStyle(a),u.name):r&&(a=r.call(o,a,t,u.name)),u.attr(t,0<a.length?a:null))}}),n.addAttributeFilter("class",function(e){for(var t=e.length;t--;){var n,r=e[t];r.attr("class")&&(n=r.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),r.attr("class",0<n.length?n:null))}}),n.addAttributeFilter("data-mce-type",function(e,t,n){for(var r=e.length;r--;){var o=e[r];"bookmark"!==o.attr("data-mce-type")||n.cleanup||(ve.from(o.firstChild).exists(function(e){return!Do(e.value)})?o.unwrap():o.remove())}}),n.addNodeFilter("noscript",function(e){for(var t=e.length;t--;){var n=e[t].firstChild;n&&(n.value=ii.decode(n.value))}}),n.addNodeFilter("script,style",function(e,t){for(var n=function(e){return e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")},r=e.length;r--;){var o,i=e[r],u=i.firstChild?i.firstChild.value:"";"script"===t?((o=i.attr("type"))&&i.attr("type","mce-no/type"===o?null:o.replace(/^mce\-/,"")),"xhtml"===c.element_format&&0<u.length&&(i.firstChild.value="// <![CDATA[\n"+n(u)+"\n// ]]>")):"xhtml"===c.element_format&&0<u.length&&(i.firstChild.value="\x3c!--\n"+n(u)+"\n--\x3e")}}),n.addNodeFilter("#comment",function(e){for(var t=e.length;t--;){var n=e[t];c.preserve_cdata&&0===n.value.indexOf("[CDATA[")?(n.name="#cdata",n.type=4,n.value=s.decode(n.value.replace(/^\[CDATA\[|\]\]$/g,""))):0===n.value.indexOf("mce:protected ")&&(n.name="#text",n.type=3,n.raw=!0,n.value=unescape(n.value).substr(14))}}),n.addNodeFilter("xml:namespace,input",function(e,t){for(var n=e.length;n--;){var r=e[n];7===r.type?r.remove():1!==r.type||"input"!==t||r.attr("type")||r.attr("type","text")}}),n.addAttributeFilter("data-mce-type",function(e){pe(e,function(e){"format-caret"===e.attr("data-mce-type")&&(e.isEmpty(n.schema.getNonEmptyElements())?e.remove():e.unwrap())})}),n.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize,data-mce-placeholder",function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)});var l,f,d,m,n,g,c,s,t={schema:m,addNodeFilter:g.addNodeFilter,addAttributeFilter:g.addAttributeFilter,serialize:function(e,t){var n,r,o,i,u,a,t=be({format:"html"},t=void 0===t?{}:t),c=(e=e,u=a=t,u=(c=f)&&c.hasEventListeners("PreProcess")&&!u.no_events?(u=a,c=(a=c).dom,o=e.cloneNode(!0),(i=document.implementation).createHTMLDocument&&(n=i.createHTMLDocument(""),we.each("BODY"===o.nodeName?o.childNodes:[o],function(e){n.body.appendChild(n.importNode(e,!0))}),o="BODY"!==o.nodeName?n.body.firstChild:n.body,r=c.doc,c.doc=n),i=a,a=be(be({},u),{node:o}),i.fire("PreProcess",a),r&&(c.doc=r),o):e,a=Mo((i=t).getInner?u.innerHTML:d.getOuterHTML(u)),i.selection||Oo(xe.fromDom(u))?a:we.trim(a)),e=(r=g,o=c,i=(e=t).selection?be({forced_root_block:!1},e):e,s(a=(u=r.parse(o,i)).lastChild)&&s(c=a.prev)&&(a.remove(),c.remove()),u);function s(e){return e&&"br"===e.name}return"tree"===t.format?e:(r=f,o=t,i=e,a=Ud(l,m).serialize(i),o.no_events||!r?a:(c=r,u=be(be({},o),{content:a}),c.fire("PostProcess",u).content))},addRules:m.addValidElements,setRules:m.setValidElements,addTempAttr:me(Bh,g,e),getTempAttrs:fe(e),getNodeFilters:g.getNodeFilters,getAttributeFilters:g.getAttributeFilters};return{schema:t.schema,addNodeFilter:t.addNodeFilter,addAttributeFilter:t.addAttributeFilter,serialize:t.serialize,addRules:t.addRules,setRules:t.setRules,addTempAttr:t.addTempAttr,getTempAttrs:t.getTempAttrs,getNodeFilters:t.getNodeFilters,getAttributeFilters:t.getAttributeFilters}}function Ih(e,t,n){return n=n=void 0===n?{}:n,Gp(e).editor.setContent(t,n)}function Lh(e){ve.from(e).each(function(e){return e.destroy()})}function Fh(e){e=x(e)?e.join(" "):e;return z(S(de(e)?e.split(" "):[],bt),function(e){return 0<e.length})}function Hh(e,t){return re(e.sections(),t)}function Vh(e,t){return he(e,"toolbar_mode").orThunk(function(){return he(e,"toolbar_drawer").map(function(e){return!1===e?"wrap":e})}).getOr(t)}function jh(e,t,n,r,o){var i,u,a=e?{mobile:(t=t,a={resize:!1,toolbar_mode:Vh(o.mobile||{},"scrolling"),toolbar_sticky:!1},be(be(be({},sv),a),t?{menubar:!1}:{}))}:{},t=(i=["mobile"],Ae(tv(a,o),function(e,t){return Ee(i,t)},_e(t={}),_e(a={})),{sections:fe((o={t:t,f:a}).t),settings:fe(o.f)}),c=we.extend(n,r,t.settings(),e&&Hh(t,"mobile")?(void 0===c&&(c={}),a=he(t.sections(),"mobile").getOr({}),we.extend({},c,a)):{},{validate:!0,external_plugins:(o=r,n=t.settings().external_plugins||{},o&&o.external_plugins?we.extend({},o.external_plugins,n):n)}),o=e,n=t,e=c,t=Fh((t=r).forced_plugins),c=Fh(e.plugins),r=Hh(r=n,"mobile")?r.sections().mobile:{},s=(n=n,u=c,r=r.plugins?Fh(r.plugins):c,o=(c=o)&&(s=(o=n).sections(),Hh(o,"mobile"))&&"mobile"===s.mobile.theme?z(r,me(Ee,cv)):c&&Hh(n,"mobile")?r:u,[].concat(Fh(t)).concat(Fh(o)));if(ye.browser.isIE()&&Ee(s,"rtc"))throw new Error("RTC plugin is not supported on IE 11.");return we.extend(e,{plugins:s.join(" ")})}function Uh(e,t,n){return ve.from(t.settings[n]).filter(e)}function Wh(e,t){return t.dom[e]}function $h(e,t){return parseInt(Nn(t,e),10)}function qh(e,t,n){var r,o=xe.fromDom(e.getBody()),o=e.inline?o:xe.fromDom(Ht(o).dom.documentElement),t=(e=e.inline,t=t,n=n,r=(i=o).dom.getBoundingClientRect(),{x:t-(e?r.left+i.dom.clientLeft+gv(i):0),y:n-(e?r.top+i.dom.clientTop+mv(i):0)}),n=t.x,e=t.y,i=fv(r=o),t=dv(r);return 0<=n&&0<=e&&n<=i&&e<=t}function Gh(r){function o(){var e=r.theme;return e&&e.getNotificationManagerImpl?e.getNotificationManagerImpl():{open:t,close:t,reposition:t,getArgs:t};function t(){throw new Error("Theme did not provide a NotificationManager implementation.")}}function i(){return ve.from(c[0])}function u(){0<c.length&&o().reposition(c)}function a(t){J(c,function(e){return e===t}).each(function(e){c.splice(e,1)})}function t(t,e){if(void 0===e&&(e=!0),!r.removed&&(n=(n=r).inline?n.getBody():n.getContentAreaContainer(),ve.from(n).map(xe.fromDom).map(Gn).getOr(!1)))return e&&r.fire("BeforeOpenNotification",{notification:t}),$(c,function(e){return!((e=o().getArgs(e)).type!==t.type||e.text!==t.text||e.progressBar||e.timeout||t.progressBar||t.timeout)}).getOrThunk(function(){r.editorManager.setActive(r);var e=o().open(t,function(){a(e),u(),i().fold(function(){return r.focus()},function(e){return xe.fromDom(e.getEl()).dom.focus()})});return c.push(e),u(),r.fire("OpenNotification",{notification:be({},e)}),e});var n}var n,c=[],e=fe(c);return(n=r).on("SkinLoaded",function(){var e=n.getParam("service_message");e&&t({text:e,type:"warning",timeout:0},!1),u()}),n.on("show ResizeEditor ResizeWindow NodeChange",function(){zr.requestAnimationFrame(u)}),n.on("remove",function(){pe(c.slice(),function(e){o().close(e)})}),{open:t,close:function(){i().each(function(e){o().close(e),a(e),u()})},getNotifications:e}}Dh.findEndTag=Ah;var Kh,Xh,Yh=we.makeMap,Jh=we.each,Zh=we.explode,Qh=we.extend,ev=Ce.DOM,tv=(Kh=function(e,t){return Oe(e)&&Oe(t)?tv(e,t):t},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)throw new Error("Can't merge zero objects");for(var n={},r=0;r<e.length;r++){var o,i=e[r];for(o in i)re(i,o)&&(n[o]=Kh(n[o],i[o]))}return n}),nv="autoresize_on_init,content_editable_state,convert_fonts_to_spans,inline_styles,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),rv="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),ov="imagetools,toc".split(","),zt=Mt().deviceType,iv=zt.isTouch(),uv=zt.isPhone(),av=zt.isTablet(),cv=["lists","autolink","autosave"],sv={table_grid:!1,object_resizing:!1,resize:!1},lv=(Xh={},{add:function(e,t){Xh[e]=t},get:function(e){return Xh[e]||{icons:{}}},has:function(e){return re(Xh,e)}}),fv=me(Wh,"clientWidth"),dv=me(Wh,"clientHeight"),mv=me($h,"margin-top"),gv=me($h,"margin-left"),pv=ia.PluginManager,hv=ia.ThemeManager;function vv(n){function o(){var e=n.theme;return e&&e.getWindowManagerImpl?e.getWindowManagerImpl():{open:t,openUrl:t,alert:t,confirm:t,close:t,getParams:t,setParams:t};function t(){throw new Error("Theme did not provide a WindowManager implementation.")}}function i(n,r){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r?r.apply(n,e):void 0}}function r(t){n.fire("CloseWindow",{dialog:t}),0===(a=z(a,function(e){return e!==t})).length&&n.focus()}function u(e){n.editorManager.setActive(n),td(n);var e=e(),t=e;return a.push(t),n.fire("OpenWindow",{dialog:t}),e}var a=[];return n.on("remove",function(){pe(a,function(e){o().close(e)})}),{open:function(e,t){return u(function(){return o().open(e,t,r)})},openUrl:function(e){return u(function(){return o().openUrl(e,r)})},alert:function(e,t,n){var r=o();r.alert(e,i(n||r,t))},confirm:function(e,t,n){var r=o();r.confirm(e,i(n||r,t))},close:function(){ve.from(a[a.length-1]).each(function(e){o().close(e),r(e)})}}}function bv(e,t){e.notificationManager.open({type:"error",text:t})}function yv(e,t){e._skinLoaded?bv(e,t):e.on("SkinLoaded",function(){bv(e,t)})}function wv(e,t,n){lf(e,t,{message:n}),console.error(n)}function xv(e,t,n){return n?"Failed to load "+e+": "+n+" from url "+t:"Failed to load "+e+" url: "+t}function Cv(e,t,n){wv(e,"PluginLoadError",xv("plugin",t,n))}function Sv(){function n(e,t){return{status:e,resultUri:t}}function t(e){return e in r}var r={};return{hasBlobUri:t,getResultUri:function(e){e=r[e];return e?e.resultUri:null},isPending:function(e){return!!t(e)&&1===r[e].status},isUploaded:function(e){return!!t(e)&&2===r[e].status},markPending:function(e){r[e]=n(1,null)},markUploaded:function(e,t){r[e]=n(2,t)},removeFailed:function(e){delete r[e]},destroy:function(){r={}}}}function kv(e){return e+j1+++("s"+(new Date).getTime().toString(36)+t()+t()+t());function t(){return Math.round(4294967295*Math.random()).toString(36)}}function Tv(e){return function(){return e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0})}}function Ov(e,t){return l=t,f={url:e.getParam("images_upload_url","","string"),basePath:e.getParam("images_upload_base_path","","string"),credentials:e.getParam("images_upload_credentials",!1,"boolean"),handler:e.getParam("images_upload_handler",null,"function")},!(o={})===O(f.handler)&&(f.handler=n),{upload:function(e,t){return f.url||f.handler!==n?(r=t,t=we.grep(e,function(e){return!l.isUploaded(e.blobUri())}),Rr.all(we.map(t,function(e){return l.isPending(e.blobUri())?(n=e.blobUri(),new Rr(function(e){o[n]=o[n]||[],o[n].push(e)})):(i=e,t=f.handler,u=r,l.markPending(i.blobUri()),new Rr(function(n){var r;try{var o=function(){r&&r.close()};t(i,function(e){o(),l.markUploaded(i.blobUri(),e),s(i.blobUri(),a(i,e)),n(a(i,e))},function(e,t){t=t||{};o(),l.removeFailed(i.blobUri()),s(i.blobUri(),c(i,e,t)),n(c(i,e,t))},function(t){t<0||100<t||ve.from(r).orThunk(function(){return ve.from(u).map(M)}).each(function(e){(r=e).progressBar.value(t)})})}catch(e){n(c(i,e.message,{}))}}));var i,t,u,n}))):new Rr(function(e){e([])});var r}};function n(e,n,r,t){var o=new XMLHttpRequest,i=(o.open("POST",f.url),o.withCredentials=f.credentials,o.upload.onprogress=function(e){t(e.loaded/e.total*100)},o.onerror=function(){r("Image upload failed due to a XHR Transport error. Code: "+o.status)},o.onload=function(){var e,t;o.status<200||300<=o.status?r("HTTP Error: "+o.status):(t=JSON.parse(o.responseText))&&"string"==typeof t.location?n((e=f.basePath,t=t.location,e?e.replace(/\/$/,"")+"/"+t.replace(/^\//,""):t)):r("Invalid JSON: "+o.responseText)},new FormData);i.append("file",e.blob(),e.filename()),o.send(i)}function a(e,t){return{url:t,blobInfo:e,status:!0}}function c(e,t,n){return{url:"",blobInfo:e,status:!1,error:{message:t,options:n}}}function s(e,t){we.each(o[e],function(e){e(t)}),delete o[e]}var l,f,o}function Ev(c){function n(t){return function(e){return c.selection?t(e):[]}}function r(e,t,n){for(var r=0;-1!==(r=e.indexOf(t,r))&&(e=e.substring(0,r)+n+e.substr(r+t.length),r+=n.length-t.length+1),-1!==r;);return e}function o(e,t,n){return e=r(e,'src="'+t+'"','src="'+n+'"'+(n===ye.transparentSrc?' data-mce-placeholder="1"':"")),r(e,'data-mce-src="'+t+'"','data-mce-src="'+n+'"')}function l(t,n){pe(c.undoManager.data,function(e){"fragmented"===e.type?e.fragments=S(e.fragments,function(e){return o(e,t,n)}):e.content=o(e.content,t,n)})}function t(t){return s=s||Ov(c,p),b().then(n(function(a){var e=S(a,function(e){return e.blobInfo});return s.upload(e,Tv(c)).then(n(function(e){var u=[],e=S(e,function(e,t){var n,r,o,i=a[t].blobInfo,t=a[t].image;return e.status&&c.getParam("images_replace_blob_uris",!0,"boolean")?(g.removeByUri(t.src),qp(c)||(n=t,r=e.url,o=c.convertURL(r,"src"),l(n.src,r),c.$(n).attr({src:c.getParam("images_reuse_filename",!1,"boolean")?r+(-1===r.indexOf("?")?"?":"&")+(new Date).getTime():r,"data-mce-src":o}))):e.error&&(e.error.options.remove&&(l(t.getAttribute("src"),ye.transparentSrc),u.push(t)),n=e.error.message,yv(c,ca.translate(["Failed to upload image: {0}",n]))),{element:t,status:e.status,uploadUri:e.url,blobInfo:i}});return 0<e.length&&v.fireIfChanged(),0<u.length&&(qp(c)?console.error("Removing images on failed uploads is currently unsupported for RTC"):c.undoManager.transact(function(){pe(u,function(e){c.dom.remove(e),g.removeByUri(e.src)})})),t&&t(e),e}))}))}function e(e){if(xc(c))return t(e)}function i(t){return!1!==Q(h,function(e){return e(t)})&&(0!==t.getAttribute("src").indexOf("data:")||c.getParam("images_dataimg_filter",C,"function")(t))}function u(e){return e.replace(/src="(blob:[^"]+)"/g,function(e,n){var t=p.getResultUri(n);return t?'src="'+t+'"':(t=(t=g.getByUri(n))||U(c.editorManager.get(),function(e,t){return e||t.editorUpload&&t.editorUpload.blobCache.getByUri(n)},null))?'src="data:'+t.blob().type+";base64,"+t.base64()+'"':e})}m=[];var s,a,f,d,m,g={create:function(e,t,n,r,o){if(de(e))return w({id:e,name:r,filename:o,blob:t,base64:n});if(Oe(e))return w(e);throw new Error("Unknown input type")},add:function(e){x(e.id())||m.push(e)},get:x,getByUri:function(t){return y(function(e){return e.blobUri()===t})},getByData:function(t,n){return y(function(e){return e.base64()===t&&e.blob().type===n})},findFirst:y,removeByUri:function(t){m=z(m,function(e){return e.blobUri()!==t||void URL.revokeObjectURL(e.blobUri())})},destroy:function(){pe(m,function(e){URL.revokeObjectURL(e.blobUri())}),m=[]}},p=Sv(),h=[],v=(d=ra(null),(f=c).on("change AddUndo",function(e){d.set(be({},e.level))}),{fireIfChanged:function(){var t=f.undoManager.data;ae(t).filter(function(e){return!Vp(d.get(),e)}).each(function(e){f.setDirty(!0),f.fire("change",{level:e,lastLevel:ie(t,t.length-2).getOrNull()})})}}),b=function(){return(a=a||(r=p,s=g,o={},{findAll:function(e,n){n=n||C;e=S(z(e?Ue(e.getElementsByTagName("img")):[],function(e){var t=e.src;return ye.fileApi&&!e.hasAttribute("data-mce-bogus")&&!e.hasAttribute("data-mce-placeholder")&&t&&t!==ye.transparentSrc&&(0===t.indexOf("blob:")?!r.isUploaded(t)&&n(e):0===t.indexOf("data:")&&n(e))}),function(c){var e;return void 0!==o[c.src]?new Rr(function(t){o[c.src].then(function(e){return"string"==typeof e?e:void t({image:c,blobInfo:e.blobInfo})})}):(e=new Rr(function(e,t){var r,o,i,u=s,a=e,n=t;0!==(r=c).src.indexOf("blob:")?(t=(e=dh(r.src)).data,e=e.type,o=t,(i=u.getByData(o,e))?a({image:r,blobInfo:i}):gh(r.src).then(function(e){i=u.create(ph(),e,o),u.add(i),a({image:r,blobInfo:i})},function(e){n(e)})):(i=u.getByUri(r.src))?a({image:r,blobInfo:i}):gh(r.src).then(function(t){var n=t;new Rr(function(e){var t=new FileReader;t.onloadend=function(){e(t.result)},t.readAsDataURL(n)}).then(function(e){o=dh(e).data,i=u.create(ph(),t,o),u.add(i),a({image:r,blobInfo:i})})},function(e){n(e)})}).then(function(e){return delete o[e.image.src],e}).catch(function(e){return delete o[c.src],e}),o[c.src]=e)});return Rr.all(e)}})).findAll(c.getBody(),i).then(n(function(e){return e=z(e,function(e){return"string"!=typeof e||void yv(c,e)}),qp(c)||pe(e,function(e){l(e.image.src,e.blobInfo.blobUri()),e.image.src=e.blobInfo.blobUri(),e.image.removeAttribute("data-mce-src")}),e}));var r,s,o};function y(e){return $(m,e).getOrUndefined()}function w(e){var t,n,r;if(e.blob&&e.base64)return t=e.id||kv("blobid"),n=e.name||t,r=e.blob,{id:fe(t),name:fe(n),filename:fe(e.filename||n+"."+({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[r.type.toLowerCase()]||"dat")),blob:fe(r),base64:fe(e.base64),blobUri:fe(e.blobUri||URL.createObjectURL(r)),uri:fe(e.uri)};throw new Error("blob and base64 representations of the image are required for BlobInfo to be created")}function x(t){return y(function(e){return e.id()===t})}return c.on("SetContent",function(){(xc(c)?e:b)()}),c.on("RawSaveContent",function(e){e.content=u(e.content)}),c.on("GetContent",function(e){e.source_view||"raw"===e.format||"tree"===e.format||(e.content=u(e.content))}),c.on("PostRender",function(){c.parser.addNodeFilter("img",function(e){pe(e,function(e){var t=e.attr("src");g.getByUri(t)||(t=p.getResultUri(t))&&e.attr("src",t)})})}),{blobCache:g,addFilter:function(e){h.push(e)},uploadImages:t,uploadImagesAuto:e,scanForImages:b,destroy:function(){g.destroy(),p.destroy(),a=s=null}}}function _v(e,t){function s(e){r="string"==typeof e?{name:e,classes:[],attrs:{}}:e;var t,e=W1.create(r.name),n=e;return(t=r).classes.length&&W1.addClass(n,t.classes.join(" ")),W1.setAttribs(n,t.attrs),e}function l(t,e,n){var r,o,i,u=0<e.length&&e[0],a=u&&u.name,c=(c=a,i="string"!=typeof(i=t)?i.nodeName.toLowerCase():i,!(!(i=(i=f.getElementRule(i))&&i.parentsRequired)||!i.length)&&(c&&-1!==we.inArray(i,c)?c:i[0]));if(c)a===c?(o=e[0],e=e.slice(1)):o=c;else if(u)o=e[0],e=e.slice(1);else if(!n)return t;return o&&(r=s(o)).appendChild(t),n&&(r||(r=W1.create("div")).appendChild(t),we.each(n,function(e){e=s(e);r.insertBefore(e,t)})),l(r,e,o&&o.siblings)}var r,n,f=t&&t.schema||lo({});return e&&e.length?(t=s(r=e[0]),(n=W1.create("div")).appendChild(l(t,e.slice(1),r.siblings)),n):""}function Av(e){var t,i={classes:[],attrs:{}};return"*"!==(e=i.selector=we.trim(e))&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,function(e,t,n,r,o){switch(t){case"#":i.attrs.id=n;break;case".":i.classes.push(n);break;case":":-1!==we.inArray("checked disabled enabled read-only required".split(" "),n)&&(i.attrs[n]=n)}return"["===r&&(t=o.match(/([\w\-]+)(?:\=\"([^\"]+))?/))&&(i.attrs[t[1]]=t[2]),""})),i.name=t||"div",i}function Dv(n,e){var r,o="",t=(t=n.getParam("preview_styles","font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"),de(t)?t:"");if(""===t)return"";function i(e){return e.replace(/%(\w+)/g,"")}if("string"==typeof e){if(!(e=n.formatter.get(e)))return;e=e[0]}if("preview"in e){var u=he(e,"preview");if(xn(u,!1))return"";t=u.getOr(t)}var u=e.block||e.inline||"span",a=(a=e.selector)&&"string"==typeof a?(a=(a=a.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),we.map(a.split(/(?:>|\s+(?![^\[\]]+\]))/),function(e){var e=we.map(e.split(/(?:~\+|~|\+)/),Av),t=e.pop();return e.length&&(t.siblings=e),t}).reverse()):[],a=a.length?(a[0].name||(a[0].name=u),u=e.selector,_v(a,n)):_v([u],n),c=W1.select(u,a)[0]||a.firstChild;return U1(e.styles,function(e,t){e=i(e);e&&W1.setStyle(c,t,e)}),U1(e.attributes,function(e,t){e=i(e);e&&W1.setAttrib(c,t,e)}),U1(e.classes,function(e){e=i(e);W1.hasClass(c,e)||W1.addClass(c,e)}),n.fire("PreviewFormats"),W1.setStyles(a,{position:"absolute",left:-65535}),n.getBody().appendChild(a),r=W1.getStyle(n.getBody(),"fontSize",!0),r=/px$/.test(r)?parseInt(r,10):0,U1(t.split(" "),function(e){var t=W1.getStyle(c,e,!0);if(!("background-color"===e&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(t)&&(t=W1.getStyle(n.getBody(),e,!0),"#ffffff"===W1.toHex(t).toLowerCase())||"color"===e&&"#000000"===W1.toHex(t).toLowerCase())){if("font-size"===e&&/em|%$/.test(t)){if(0===r)return;t=parseFloat(t)/(/%$/.test(t)?100:1)*r+"px"}"border"===e&&t&&(o+="padding:0 2px;"),o+=e+":"+t+";"}}),n.fire("AfterPreviewFormats"),W1.remove(a),o}function Mv(i){n={},(o=function(e,t){e&&(de(e)?(pe(t=x(t)?t:[t],function(e){y(e.deep)&&(e.deep=!ol(e)),y(e.split)&&(e.split=!ol(e)||il(e)),y(e.remove)&&ol(e)&&!il(e)&&(e.remove="none"),ol(e)&&il(e)&&(e.mixed=!0,e.block_expand=!0),de(e.classes)&&(e.classes=e.classes.split(/\s+/))}),n[e]=t):q(e,function(e,t){o(t,e)}))})((r=(e=i).dom,t={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:!1,preview:!1,defaultBlock:"div"},{selector:"img,table,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"img,table,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},inherit:!1,defaultBlock:"div",preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all",preserve_attributes:["class","style"]},{inline:"s",remove:"all",preserve_attributes:["class","style"]}],forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",defaultBlock:"p",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(e,t,n){return G(e)&&e.hasAttribute("href")},onformat:function(n,e,t){we.each(t,function(e,t){r.setAttrib(n,t,e)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":function(e){return null!=(e=null==e?void 0:e.customValue)?e:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]},we.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),function(e){t[e]={block:e,remove:"all"}}),t)),o(e.getParam("formats"));var r,t,n,o,u,e={get:function(e){return ne(e)?n[e]:n},has:function(e){return re(n,e)},register:o,unregister:function(e){return e&&n[e]&&delete n[e],n}},a=ra(null),c=i;c.addShortcut("meta+b","","Bold"),c.addShortcut("meta+i","","Italic"),c.addShortcut("meta+u","","Underline");for(var s=1;s<=6;s++)c.addShortcut("access+"+s,"",["FormatBlock",!1,"h"+s]);return c.addShortcut("access+7","",["FormatBlock",!1,"p"]),c.addShortcut("access+8","",["FormatBlock",!1,"div"]),c.addShortcut("access+9","",["FormatBlock",!1,"address"]),(u=i).on("mouseup keydown",function(e){var t=u,e=e.keyCode,n=t.selection,r=t.getBody();Sg(t,null,!1),8!==e&&46!==e||!n.isCollapsed()||n.getStart().innerHTML!==ep||Sg(t,Bs(r,n.getStart())),37!==e&&39!==e||Sg(t,Bs(r,n.getStart()))}),{get:e.get,has:e.has,register:e.register,unregister:e.unregister,apply:function(e,t,n){k(i).formatter.apply(e,t,n)},remove:function(e,t,n,r){k(i).formatter.remove(e,t,n,r)},toggle:function(e,t,n){k(i).formatter.toggle(e,t,n)},match:function(e,t,n,r){return e=e,t=t,n=n,r=r,k(i).formatter.match(e,t,n,r)},closest:function(e){return e=e,k(i).formatter.closest(e)},matchAll:function(e,t){return e=e,t=t,k(i).formatter.matchAll(e,t)},matchNode:function(e,t,n,r){return e=e,t=t,n=n,r=r,k(i).formatter.matchNode(e,t,n,r)},canApply:function(e){return e=e,k(i).formatter.canApply(e)},formatChanged:function(e,t,n,r){return o=a,e=e,t=t,n=n,r=r,k(i).formatter.formatChanged(o,e,t,n,r);var o},getCssText:me(Dv,i)}}function Nv(e){switch(e.toLowerCase()){case"undo":case"redo":case"mcerepaint":case"mcefocus":return 1;default:return}}function Rv(u){var e,n,r,o,i,a=sa(),c=ra(0),s=ra(0),l={data:[],typing:!1,beforeChange:function(){var e=c,t=a;k(u).undoManager.beforeChange(e,t)},add:function(e,t){return n=l,r=s,o=c,i=a,e=e,t=t,k(u).undoManager.add(n,r,o,i,e,t);var n,r,o,i},undo:function(){return e=l,t=c,n=s,k(u).undoManager.undo(e,t,n);var e,t,n},redo:function(){return e=s,t=l.data,k(u).undoManager.redo(e,t);var e,t},clear:function(){var e=l,t=s;k(u).undoManager.clear(e,t)},reset:function(){var e=l;k(u).undoManager.reset(e)},hasUndo:function(){return e=l,t=s,k(u).undoManager.hasUndo(e,t);var e,t},hasRedo:function(){return e=l,t=s,k(u).undoManager.hasRedo(e,t);var e,t},transact:function(e){return t=l,n=c,e=e,k(u).undoManager.transact(t,n,e);var t,n},ignore:function(e){var t=c;k(u).undoManager.ignore(t,e)},extra:function(e,t){var n=l,r=s;k(u).undoManager.extra(n,r,e,t)}};return qp(u)||(r=l,o=c,i=ra(!1),(n=u).on("init",function(){r.add()}),n.on("BeforeExecCommand",function(e){Nv(e.command)||(Wp(r,o),r.beforeChange())}),n.on("ExecCommand",function(e){Nv(e.command)||f(e)}),n.on("ObjectResizeStart cut",function(){r.beforeChange()}),n.on("SaveContent ObjectResized blur",f),n.on("dragend",f),n.on("keyup",function(e){var t=e.keyCode;e.isDefaultPrevented()||((33<=t&&t<=36||37<=t&&t<=40||45===t||e.ctrlKey)&&(f(),n.nodeChanged()),46!==t&&8!==t||n.nodeChanged(),i.get()&&r.typing&&!1===Vp(Ip(n),r.data[0])&&(!1===n.isDirty()&&(n.setDirty(!0),n.fire("change",{level:r.data[0],lastLevel:null})),n.fire("TypingUndo"),i.set(!1),n.nodeChanged()))}),n.on("keydown",function(e){var t,n=e.keyCode;e.isDefaultPrevented()||(33<=n&&n<=36||37<=n&&n<=40||45===n?r.typing&&f(e):(t=e.ctrlKey&&!e.altKey||e.metaKey,!(n<16||20<n)||224===n||91===n||r.typing||t||(r.beforeChange(),Up(r,!0,o),r.add({},e),i.set(!0))))}),n.on("mousedown",function(e){r.typing&&f(e)}),n.on("input",function(e){e.inputType&&("insertReplacementText"===e.inputType||"insertText"===e.inputType&&null===e.data||"insertFromPaste"===e.inputType||"insertFromDrop"===e.inputType)&&f(e)}),n.on("AddUndo Undo Redo ClearUndos",function(e){e.isDefaultPrevented()||n.nodeChanged()})),(e=u).addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo"),l;function f(e){Up(r,!1,o),r.add({},e)}}function zv(e){return"keydown"===e.type||"keyup"===e.type}function Bv(e){e=e.keyCode;return e===ke.BACKSPACE||e===ke.DELETE}function Pv(e,t){return it(xe.fromDom(t),e.getParam("inline_boundaries_selector","a[href],code,.mce-annotation","string"))}function Iv(e,t,n){e=e,t=t;n=z(Ce.DOM.getParents(n.container(),"*",t),e);return ve.from(n[n.length-1])}function Lv(e,t){var n,r;return t&&(n=t.container(),r=t.offset(),e?jr(n)?B(n.nextSibling)?Se(n.nextSibling,0):Se.after(n):$r(t)?Se(n,r+1):t:jr(n)?B(n.previousSibling)?Se(n.previousSibling,n.previousSibling.data.length):Se.before(n):qr(t)?Se(n,r-1):t)}function Fv(e){return xo(e)||So(e)}function Hv(e,t){return at(e,t)?Cr(t,Fv,(n=e,function(e){return _(n,xe.fromDom(e.dom.parentNode))})):ve.none();var n}function Vv(e){var t;e.dom.isEmpty(e.getBody())&&(e.setContent(""),t=(t=(e=e).getBody()).firstChild&&e.dom.isBlock(t.firstChild)?t.firstChild:t,e.selection.setCursorLocation(t,0))}function jv(e,t){return{from:e,to:t}}function Uv(e,t){return Hv(xe.fromDom(e),xe.fromDom(t.container())).map(function(e){return{block:e,position:t}})}function Wv(e){var t,e=J(t=jn(e),wo).fold(fe(t),function(e){return t.slice(0,e)});return pe(e,qn),e}function $v(e,t){$(im(t,e).reverse(),function(e){return Qr(e)}).each(qn)}function qv(e,t,n,r){if(Qr(n))return nm(n),Kl(n.dom);0===z($t(r),function(e){return!Qr(e)}).length&&Qr(t)&&en(r,xe.fromTag("br"));n=Gl(n.dom,Se.before(r.dom));return pe(Wv(t),function(e){en(r,e)}),$v(e,t),n}function Gv(e,t,n){var r;return Qr(n)?(qn(n),Qr(t)&&nm(t),Kl(t.dom)):(r=Xl(n.dom),pe(Wv(t),function(e){$n(n,e)}),$v(e,t),r)}function Kv(e,t){Rs(e,t.dom).map(function(e){return e.getNode()}).map(xe.fromDom).filter(Hr).each(qn)}function Xv(e,t,n){return Kv(!0,t),Kv(!1,n),(at(r=n,o=t)?(o=im(o,r),ve.from(o[o.length-1])):ve.none()).fold(me(Gv,e,t,n),me(qv,e,t,n));var r,o}function Yv(e,t,n,r){return t?Xv(e,r,n):Xv(e,n,r)}function Jv(t,n){var o,i,e,r,u=xe.fromDom(t.getBody()),a=(r=u.dom,e=n,((a=t.selection.getRng()).collapsed?(i=e,r=(e=Uv(o=r,Se.fromRangeStart(a))).bind(function(e){return Wl(i,o,e.position).bind(function(e){return Uv(o,e).map(function(e){return t=o,n=i,A((r=e).position.getNode())&&!1===Qr(r.block)?Rs(!1,r.block.dom).bind(function(e){return e.isEqual(r.position)?Wl(n,t,e).bind(function(e){return Uv(t,e)}):ve.some(r)}).getOr(r):r;var t,n,r})})}),Cn(e,r,jv).filter(function(e){return!1===_(e.from.block,e.to.block)&&jt((n=e).from.block).bind(function(t){return jt(n.to.block).filter(function(e){return _(t,e)})}).isSome()&&!1===D((e=e).from.block.dom)&&!1===D(e.to.block.dom);var n})):ve.none()).bind(function(e){return Yv(u,n,e.from.block,e.to.block)}));return a.each(function(e){t.selection.setRng(e.toRange())}),a.isSome()}function Zv(e,t){t=xe.fromDom(t),e=me(_,e);return xr(t,To,e).isSome()}function Qv(e,t){return!e.selection.isCollapsed()&&(e=e,u=xe.fromDom(e.getBody()),a=e.selection.getRng(),c=Gl((i=u).dom,Se.fromRangeStart(a)).isNone(),s=ql(i.dom,Se.fromRangeEnd(a)).isNone(),!Zv(i=i,(a=a).startContainer)&&!Zv(i,a.endContainer)&&c&&s?((i=e).setContent(""),i.selection.setCursorLocation(),!0):(n=u,r=e.selection,o=r.getRng(),Cn(Hv(n,xe.fromDom(o.startContainer)),Hv(n,xe.fromDom(o.endContainer)),function(e,t){return!1===_(e,t)&&(o.deleteContents(),Yv(n,!0,e,t).each(function(e){r.setRng(e.toRange())}),!0)}).getOr(!1)));var n,r,o,i,u,a,c,s}function e1(e,t,n,r,o){return ve.from(t._selectionOverrides.showCaret(e,n,r,o))}function t1(e,t){return e.fire("BeforeObjectSelected",{target:t}).isDefaultPrevented()?ve.none():ve.some(((t=(e=t).ownerDocument.createRange()).selectNode(e),t))}function n1(e,t,n){var t=Kc(1,e.getBody(),t),t=Se.fromRangeStart(t),r=t.getNode();return hs(r)?e1(1,e,r,!t.isAtEnd(),!1):(r=t.getNode(!0),hs(r)?e1(1,e,r,!1,!1):(r=e.dom.getParent(t.getNode(),function(e){return J1(e)||Y1(e)}),hs(r)?e1(1,e,r,!1,n):ve.none()))}function r1(e,t,n){return t.collapsed?n1(e,t,n).getOr(t):t}function o1(e){return Ig(e)||Rg(e)}function i1(e){return Lg(e)||zg(e)}function u1(n,r,e,t,o,i){return e1(t,n,i.getNode(!o),o,!0).each(function(e){var t;(r.collapsed?(t=r.cloneRange(),o?t.setEnd(e.startContainer,e.startOffset):t.setStart(e.endContainer,e.endOffset),t):r).deleteContents(),n.selection.setRng(e)}),t=n.dom,B(i=e)&&0===i.data.length&&t.remove(i),!0}function a1(e,t){var n,r,o,i,u,a=e.selection.getRng();return!(!B(a.commonAncestorContainer)||(n=t?es.Forwards:es.Backwards,u=_s(e.getBody()),r=t?o1:i1,!(i=Lv(t,(u=me(Zc,t?u.next:u.prev))(o=Yc(n,e.getBody(),a)))))||!Qc(o,i))&&(r(i)?u1(e,a,o.getNode(),n,t,i):!!((u=u(i))&&r(u)&&Qc(i,u))&&u1(e,a,o.getNode(),n,t,u))}function c1(s,l,f){return Wl(l,s,f).bind(function(e){return a=e.getNode(),To(xe.fromDom(a))||So(xe.fromDom(a))||(r=s,u=e,Xc(!(o=l),i=f).fold(function(){return Xc(o,u).fold(ge,c)},c))?ve.none():l&&D(e.getNode())||!1===l&&D(e.getNode(!0))?(a=s,t=f,n=e.getNode(!1===l),Hv(xe.fromDom(a),xe.fromDom(t.getNode())).map(function(e){return Qr(e)?Z1.remove(e.dom):Z1.moveToElement(n)}).orThunk(function(){return ve.some(Z1.moveToElement(n))})):l&&Lg(f)||!1===l&&Ig(f)?ve.some(Z1.moveToPosition(e)):ve.none();var t,n,r,o,i,u,a;function c(e){return Fr(xe.fromDom(e))&&!Wc(i,u,r)}})}function s1(e,t){return ve.from(cf(e.getBody(),t))}function l1(a,c){var e=a.selection.getNode();return s1(a,e).filter(D).fold(function(){return t=a.getBody(),i=Kc((n=c)?1:-1,t,a.selection.getRng()),i=Se.fromRangeStart(i),u=xe.fromDom(t),(!1===n&&Lg(i)?ve.some(Z1.remove(i.getNode(!0))):n&&Ig(i)?ve.some(Z1.remove(i.getNode())):!1===n&&Ig(i)&&mm(u,i)?Ug(u,i).map(function(e){return Z1.remove(e.getNode())}):n&&Lg(i)&&dm(u,i)?Wg(u,i).map(function(e){return Z1.remove(e.getNode())}):(r=t,t=(o=i).getNode(!1===(u=e=n)),i=u?"after":"before",G(t)&&t.getAttribute("data-mce-caret")===i?(u=o.getNode(!1===(n=e)),(n&&D(u.nextSibling)?ve.some(Z1.moveToElement(u.nextSibling)):!1===n&&D(u.previousSibling)?ve.some(Z1.moveToElement(u.previousSibling)):ve.none()).fold(function(){return c1(r,e,o)},ve.some)):c1(r,e,o).bind(function(e){return t=r,n=o,e.fold(function(e){return ve.some(Z1.remove(e))},function(e){return ve.some(Z1.moveToElement(e))},function(e){return Wc(n,e,t)?ve.none():ve.some(Z1.moveToPosition(e))});var t,n}))).exists(function(e){return e.fold(function(e){return o._selectionOverrides.hideFakeCaret(),Im(o,i,xe.fromDom(e)),!0},(r=i=c,function(e){e=r?Se.before(e):Se.after(e);return n.selection.setRng(e.toRange()),!0}),(t=n=o=a,function(e){return t.selection.setRng(e.toRange()),!0}));var t,n,r,o,i});var r,e,o,t,n,i,u},C)}function f1(e,t){var n=e.selection.getNode();return!(!D(n)||nr(n))&&s1(e,n.parentNode).filter(D).fold(function(){return pe(ha(xe.fromDom(e.getBody()),".mce-offscreen-selection"),qn),Im(e,t,xe.fromDom(e.selection.getNode())),Vv(e),!0},C)}function d1(e){var t,n=e.dom,r=e.selection,e=cf(e.getBody(),r.getNode());return tr(e)&&n.isBlock(e)&&n.isEmpty(e)&&(t=n.create("br",{"data-mce-bogus":"1"}),n.setHTML(e,""),e.appendChild(t),r.setRng(Se.before(t).toRange())),!0}function m1(e,t){return(e.selection.isCollapsed()?l1:f1)(e,t)}function g1(e,t){return!!e.selection.isCollapsed()&&(n=e,r=t,e=Se.fromRangeStart(n.selection.getRng()),Wl(r,n.getBody(),e).filter(function(e){return(r?Mg:Ng)(e)}).bind(function(e){return ve.from($c(r?0:-1,e))}).exists(function(e){return n.selection.select(e),!0}));var n,r}function p1(e){return Q1(e)&&e.data[0]===Ao}function h1(e){return Q1(e)&&e.data[e.data.length-1]===Ao}function v1(e){return e.ownerDocument.createTextNode(Ao)}function b1(e,t){return(e?function(e){var t;return Q1(e.previousSibling)?(h1(e.previousSibling)||e.previousSibling.appendData(Ao),e.previousSibling):Q1(e)?(p1(e)||e.insertData(0,Ao),e):(t=v1(e),e.parentNode.insertBefore(t,e),t)}:function(e){var t;return Q1(e.nextSibling)?(p1(e.nextSibling)||e.nextSibling.insertData(0,Ao),e.nextSibling):Q1(e)?(h1(e)||e.appendData(Ao),e):(t=v1(e),e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t),t)})(t)}function y1(e,t){return B(e.container())?b1(t,e.container()):b1(t,e.getNode())}function w1(e,t){t=t.get();return t&&e.container()===t&&jr(t)}function x1(t,e){return e.fold(function(e){fs(t.get());e=e0(e);return t.set(e),ve.some(Se(e,e.length-1))},function(e){return Kl(e).map(function(e){if(w1(e,t))return Se(t.get(),1);fs(t.get());e=y1(e,!0);return t.set(e),Se(e,1)})},function(e){return Xl(e).map(function(e){if(w1(e,t))return Se(t.get(),t.get().length-1);fs(t.get());e=y1(e,!1);return t.set(e),Se(e,e.length-1)})},function(e){fs(t.get());e=t0(e);return t.set(e),ve.some(Se(e,1))})}function C1(e,t){for(var n=0;n<e.length;n++){var r=e[n].apply(null,t);if(r.isSome())return r}return ve.none()}function S1(e,t){return Uc(t,e)||e}function k1(e,t,n){var r=K1(n),o=S1(t,r.container());return Iv(e,o,r).fold(function(){return ql(o,r).bind(me(Iv,e,o)).map(function(e){return n0.before(e)})},ve.none)}function T1(e,t){return null===Bs(e,t)}function O1(e,t,n){return Iv(e,t,n).filter(me(T1,t))}function E1(e,t,n){var r=X1(n);return O1(e,t,r).bind(function(e){return Gl(e,r).isNone()?ve.some(n0.start(e)):ve.none()})}function _1(e,t,n){var r=K1(n);return O1(e,t,r).bind(function(e){return ql(e,r).isNone()?ve.some(n0.end(e)):ve.none()})}function A1(e,t,n){var r=X1(n),o=S1(t,r.container());return Iv(e,o,r).fold(function(){return Gl(o,r).bind(me(Iv,e,o)).map(function(e){return n0.after(e)})},ve.none)}function D1(e){return!1===(e=r0(e),"rtl"===Ce.DOM.getStyle(e,"direction",!0)||(e=e.textContent,G1.test(e)))}function M1(e,t,n){return C1([k1,E1,_1,A1],[e,t,n]).filter(D1)}function N1(e){return e.fold(fe("before"),fe("start"),fe("end"),fe("after"))}function R1(e){return e.fold(n0.before,n0.before,n0.after,n0.after)}function z1(e){return e.fold(n0.start,n0.start,n0.end,n0.end)}function B1(i,e,u,t,n,a){return Cn(Iv(e,u,t),Iv(e,u,n),function(e,t){return e!==t&&(o=t,r=Uc(e,n=u),o=Uc(o,n),r)&&r===o?n0.after(i?e:t):a;var n,r,o}).getOr(a)}function P1(e,n){return e.fold(C,function(e){return t=n,!(N1(e=e)===N1(t)&&r0(e)===r0(t));var t})}function I1(e,t){return e?t.fold(c(ve.some,n0.start),ve.none,c(ve.some,n0.after),ve.none):t.fold(ve.none,c(ve.some,n0.before),ve.none,c(ve.some,n0.end))}function L1(e,u,a,c){var t=Lv(e,c),s=M1(u,a,t);return M1(u,a,t).bind(me(I1,e)).orThunk(function(){return n=u,r=a,o=s,i=Lv(t=e,c),Wl(t,r,i).map(me(Lv,t)).fold(function(){return o.map(R1)},function(e){return M1(n,r,e).map(me(B1,t,n,r,i,e)).filter(me(P1,o))}).filter(D1);var t,n,r,o,i})}function F1(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=window.console;r&&(r.error||r.log).apply(r,Ge([e],t,!1))}var H1,V1=function(t,e){var n=t.editorManager.baseURL+"/skins/content",r="content"+t.editorManager.suffix+".css",o=!0===t.inline;return S(e,function(e){return/^[a-z0-9\-]+$/i.test(e)&&!o?n+"/"+e+"/"+r:t.documentBaseURI.toAbsolute(e)})},j1=0,U1=we.each,W1=Ce.DOM,$1=[9,27,ke.HOME,ke.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,ke.DOWN,ke.UP,ke.LEFT,ke.RIGHT].concat(ye.browser.isFirefox()?[224]:[]),q1="data-mce-placeholder",G1=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,K1=me(Lv,!0),X1=me(Lv,!1),Y1=tr,J1=D,Z1=lr([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),Q1=B,e0=me(b1,!0),t0=me(b1,!1),n0=lr([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),r0=function(e){return e.fold(m,m,m,m)};function o0(e,t,n){var r=e?1:-1;return t.setRng(Se(n.container(),n.offset()+r).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0}function i0(e,t){return e===es.Backwards?ee(t):t}function u0(e,t,n,r){for(var o,i=_s(n),u=r,a=[];u;){s=i,c=u;var c,s=t===es.Forwards?s.next(c):s.prev(c);if(!s)break;if(A(s.getNode(!1)))return t===es.Forwards?{positions:i0(t,a).concat([s]),breakType:H1.Br,breakAt:ve.some(s)}:{positions:i0(t,a),breakType:H1.Br,breakAt:ve.some(s)};if(s.isVisible()){if(e(u,s))return c=u,c=A((o=s).getNode(t===es.Forwards))?H1.Br:!1===Wc(c,o)?H1.Block:H1.Wrap,{positions:i0(t,a),breakType:c,breakAt:ve.some(s)};a.push(s)}u=s}return{positions:i0(t,a),breakType:H1.Eol,breakAt:ve.none()}}function a0(n,r,o,e){return r(o,e).breakAt.map(function(e){var t=r(o,e).positions;return n===es.Backwards?t.concat(e):[e].concat(t)}).getOr([])}function c0(e,o){return U(e,function(e,r){return e.fold(function(){return ve.some(r)},function(n){return Cn(ue(n.getClientRects()),ue(r.getClientRects()),function(e,t){e=Math.abs(o-e.left);return Math.abs(o-t.left)<=e?r:n}).or(e)})},ve.none())}function s0(t,e){return ue(e.getClientRects()).bind(function(e){return c0(t,e.left)})}function l0(t){function e(e){return S(e,function(e){e=Ta(e);return e.node=t,e})}var n;return G(t)?e(t.getClientRects()):B(t)?((n=t.ownerDocument.createRange()).setStart(t,0),n.setEnd(t,t.data.length),e(n.getClientRects())):void 0}function f0(e){return Z(e,l0)}me(L1,!1),me(L1,!0);H1={Br:0,0:"Br",Block:1,1:"Block",Wrap:2,2:"Wrap",Eol:3,3:"Eol"};var d0,m0=me(u0,Se.isAbove,-1),g0=me(u0,Se.isBelow,1),p0=me(a0,-1,m0),h0=me(a0,1,g0);function v0(o,i,u,e,a,t){function n(e){var t=f0([e]);-1===o&&(t=t.reverse());for(var n=0;n<t.length;n++){var r=t[n];if(!u(r,l)){if(0<s.length&&i(r,Le(s))&&c++,r.line=c,a(r))return!0;s.push(r)}}}var c=0,s=[],l=Le(t.getClientRects());return l&&(n(t=t.getNode()),function(e,t,n,r){for(;r=jc(r,e,Yr,t);)if(n(r))return}(o,e,n,t)),s}function b0(t){return function(e){return e.line>t}}function y0(t){return function(e){return e.line===t}}function w0(e,t){return Math.abs(e.left-t)}function x0(e,t){return Math.abs(e.right-t)}function C0(e,t){return e>=t.left&&e<=t.right}function S0(e,t){return e>=t.top&&e<=t.bottom}function k0(e,o,i){return void 0===i&&(i=C),Pe(e,function(e,t){var n,r;return C0(o,t)?i(t)?t:e:C0(o,e)?i(e)?e:t:(n=Math.min(w0(e,o),x0(e,o)),(r=Math.min(w0(t,o),x0(t,o)))===n&&Me(t,"node")&&cy(t.node)||r<n?t:e)})}function T0(e,t,n,r,o){var i=sy(r,e,Yr,t,!o);do{if(!i||n(i))return}while(i=sy(i,e,Yr,t))}function O0(e,t){e.selection.setRng(t),$f(e,e.selection.getRng())}function E0(e,t,n){return ve.some(r1(e,t,n))}function _0(e,t,n,r,o,i){var u=t===es.Forwards,a=_s(e.getBody()),a=me(Zc,u?a.next:a.prev),r=u?r:o;if(!n.collapsed){o=Ma(n);if(i(o))return e1(t,e,o,t===es.Backwards,!1)}var i=Yc(t,e.getBody(),n);return r(i)?t1(e,i.getNode(!u)):(o=Lv(u,a(i)),i=Kr(n),o?r(o)?e1(t,e,o.getNode(!u),u,!1):(a=a(o))&&r(a)&&Qc(o,a)?e1(t,e,a.getNode(!u),u,!1):i?E0(e,o.toRange(),!1):ve.none():i?ve.some(n):ve.none())}function A0(t,e,n,r,o,i){var u=Yc(e,t.getBody(),n),a=Le(u.getClientRects()),c=e===d0.Down;if(!a)return ve.none();var s=z((c?ay:uy)(t.getBody(),b0(1),u),y0(1)),a=a.left,l=k0(s,a);if(l&&i(l.node))return i=Math.abs(a-l.left),f=Math.abs(a-l.right),e1(e,t,l.node,i<f,!1);if(l=r(u)?u.getNode():o(u)?u.getNode(!0):Ma(n)){var i=function(e,t,n,r){function o(e){return Le(e.getClientRects())}var i,u,a,t=_s(t),c=[],s=0,l=1===e?(i=t.next,u=Aa,a=_a,Se.after(r)):(i=t.prev,u=_a,a=Aa,Se.before(r)),f=o(l);do{if(l.isVisible()){var d=o(l);if(!a(d,f)){0<c.length&&u(d,Le(c))&&s++;d=Ta(d);if(d.position=l,d.line=s,n(d))return c;c.push(d)}}}while(l=i(l));return c}(e,t.getBody(),b0(1),l),f=k0(z(i,y0(1)),a);if(f)return E0(t,f.position.toRange(),!1);if(f=Le(z(i,y0(0))))return E0(t,f.position.toRange(),!1)}return 0===s.length?ly(t,c).filter(c?o:r).map(function(e){return r1(t,e.toRange(),!1)}):ve.none()}function D0(t,e,n){return ly(t,e).filter(n).exists(function(e){return t.selection.setRng(e.toRange()),!0})}function M0(e,t){var n=e.dom.createRng();n.setStart(t.container(),t.offset()),n.setEnd(t.container(),t.offset()),e.selection.setRng(n)}function N0(e,t){e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")}function R0(t,e,n){return x1(e,n).map(function(e){return M0(t,e),n})}function z0(e,t,n){return!!Dc(e)&&(o=t,t=n,n=(r=e).getBody(),e=Se.fromRangeStart(r.selection.getRng()),L1(t,me(Pv,r),n,e).bind(function(e){return R0(r,o,e)}).isSome());var r,o}function B0(e,t,n){return!!Dc(t)&&(e=e,r=(t=t).selection.getRng(),r=e?Se.fromRangeEnd(r):Se.fromRangeStart(r),!!O(t.selection.getSel().modify))&&(e&&$r(r)?o0(!0,t.selection,r):!(e||!qr(r))&&o0(!1,t.selection,r));var r}function P0(m){var g=ra(null),p=me(Pv,m);return m.on("NodeChange",function(e){var n,r,o,t,i,u,a,c,s,l,f,d;!Dc(m)||ye.browser.isIE()&&e.initial||(t=p,c=m.dom,u=e.parents,pe(te(c=z(S(ha(xe.fromDom(c.getRoot()),'*[data-mce-selected="inline-boundary"]'),function(e){return e.dom}),t),u=z(u,t)),me(N0,!1)),pe(te(u,c),me(N0,!0)),t=g,(u=m).selection.isCollapsed()&&!0!==u.composing&&t.get()&&(c=Se.fromRangeStart(u.selection.getRng()),Se.isTextPosition(c))&&!1===($r(i=c)||qr(i))&&(M0(u,(i=t.get(),u=c,Se.isTextPosition(u)?(c=u,ls(a=i)&&c.container()===a?(l=Rc((d=a).data.substr(0,(s=c).offset())),f=Rc(d.data.substr(s.offset())),0<(l.text+f.text).length?(zc(d),Se(d,s.offset()-l.count)):s):Bc(a,c)):(f=i,((d=u).container()===f.parentNode?Pc:Bc)(f,d)))),t.set(null)),n=p,r=m,o=g,l=e.parents,r.selection.isCollapsed()&&pe(z(l,n),function(e){var t=Se.fromRangeStart(r.selection.getRng());M1(n,r.getBody(),t).bind(function(e){return R0(r,o,e)})}))}),g}function I0(t,n,r){var e;return!!Dc(t)&&(e=ly(t,n).getOrThunk(function(){var e=t.selection.getRng();return n?Se.fromRangeEnd(e):Se.fromRangeStart(e)}),M1(me(Pv,t),t.getBody(),e).exists(function(e){e=R1(e);return x1(r,e).exists(function(e){return M0(t,e),!0})}))}function L0(t,n){return function(e){return x1(n,e).exists(function(e){return M0(t,e),!0})}}function F0(r,o,i,u){var a=r.getBody(),c=me(Pv,r);r.undoManager.ignore(function(){var e,t,n;r.selection.setRng((e=i,t=u,(n=document.createRange()).setStart(e.container(),e.offset()),n.setEnd(t.container(),t.offset()),n)),r.execCommand("Delete"),M1(c,a,Se.fromRangeStart(r.selection.getRng())).map(z1).map(L0(r,o))}),r.nodeChanged()}function H0(e,t,n){var r,o,i,u,a,c,s,l;return!(!e.selection.isCollapsed()||!Dc(e))&&(r=Se.fromRangeStart(e.selection.getRng()),i=t,u=n,a=r,t=(o=e).getBody(),c=Uc(a.container(),t)||t,s=me(Pv,o),(l=M1(s,c,a)).bind(function(e){return u?e.fold(fe(ve.some(z1(e))),ve.none,fe(ve.some(R1(e))),ve.none):e.fold(ve.none,fe(ve.some(R1(e))),ve.none,fe(ve.some(z1(e))))}).map(L0(o,i)).getOrThunk(function(){var t=Ns(u,c,a),e=t.bind(function(e){return M1(s,c,e)});return Cn(l,e,function(){return Iv(s,c,a).exists(function(e){return!!Cn(Kl(r=e),Xl(r),function(e,t){var e=Lv(!0,e),n=Lv(!1,t);return ql(r,e).forall(function(e){return e.isEqual(n)})}).getOr(!0)&&(Im(o,u,xe.fromDom(e)),!0);var r})}).orThunk(function(){return e.bind(function(e){return t.map(function(e){return u?F0(o,i,a,e):F0(o,i,e,a),!0})})}).getOr(!1)}))}function V0(e){return 1===Yt(e)}function j0(e,t){return!!e.selection.isCollapsed()&&(a=e,c=t,e=xe.fromDom(a.getBody()),t=xe.fromDom(a.selection.getStart()),ae(s=z(J(n=im(t,e),wo).fold(fe(n),function(e){return n.slice(0,e)}),V0)).exists(function(e){var t,n,r=Se.fromRangeStart(a.selection.getRng()),o=c,i=r,u=e.dom;return!(!Cn(Kl(u),Xl(u),function(e,t){var n=Lv(!0,e),r=Lv(!1,t),e=Lv(!1,i);return o?ql(u,e).exists(function(e){return e.isEqual(r)&&i.isEqual(n)}):Gl(u,e).exists(function(e){return e.isEqual(n)&&i.isEqual(r)})}).getOr(!0)||zs((r=e).dom)&&yg(r.dom)||(r=c,e=e,0===(n=S(z(s,me(Eg,t=a)),function(e){return e.dom})).length?Im(t,r,e):(r=e.dom,n=Tg(n,(e=xg(!1)).dom),en(xe.fromDom(r),e),qn(xe.fromDom(r)),e=Se(n,0),t.selection.setRng(e.toRange())),0))}));var a,c,n,s}function U0(e,t,n){return e._selectionOverrides.hideFakeCaret(),Im(e,t,xe.fromDom(n)),!0}function W0(e,t){return e.selection.isCollapsed()?(n=e,o=(r=t)?Rg:zg,i=r?es.Forwards:es.Backwards,u=Yc(i,n.getBody(),n.selection.getRng()),o(u)?U0(n,r,u.getNode(!r)):ve.from(Lv(r,u)).filter(function(e){return o(e)&&Qc(u,e)}).exists(function(e){return U0(n,r,e.getNode(!r))})):(i=t,e=(t=e).selection.getNode(),!!rr(e)&&U0(t,i,e));var n,r,o,i,u}function $0(e){e=parseInt(e,10);return isNaN(e)?0:e}function q0(e,t){return(e||"table"===Pt(t)?"margin":"padding")+("rtl"===Nn(t,"direction")?"-right":"-left")}function G0(e){var n,t=iy(e);return!e.mode.isReadOnly()&&(1<t.length||(n=e,Q(t,function(e){var t=Rn(e,q0(Tc(n),e)).map($0).getOr(0);return"false"!==n.dom.getContentEditable(e.dom)&&0<t})))}function K0(e){return Co(e)||So(e)}function X0(e,a){var c=e.dom,t=e.selection,n=e.formatter,r=e.getParam("indentation","40px","string"),s=/[a-z%]+$/i.exec(r)[0],l=parseInt(r,10),f=Tc(e),r=yc(e);e.queryCommandState("InsertUnorderedList")||e.queryCommandState("InsertOrderedList")||""!==r||c.getParent(t.getNode(),c.isBlock)||n.apply("div"),pe(iy(e),function(e){var t,n=c,r=a,o=l,i=s,e=e.dom,u=q0(f,xe.fromDom(e));"outdent"===r?(t=Math.max(0,$0(e.style[u])-o),n.setStyle(e,u,t?t+i:"")):(t=$0(e.style[u])+o+i,n.setStyle(e,u,t))})}function Y0(e,t){if(e.selection.isCollapsed()&&G0(e)){var n=e.dom,r=e.selection.getRng(),o=Se.fromRangeStart(r),r=n.getParent(r.startContainer,n.isBlock);if(null!==r&&Fg(xe.fromDom(r),o))return X0(e,"outdent"),!0}return!1}function J0(e,t){e.getDoc().execCommand(t,!1,null)}function Z0(e){return void 0===e.touches||1!==e.touches.length?ve.none():ve.some(e.touches[0])}function Q0(e,t){return re(e,t.nodeName)}function eb(e){var t,n,r,o=e.dom,i=e.selection,u=e.schema,a=u.getBlockElements(),c=i.getStart(),s=e.getBody(),l=yc(e);if(c&&G(c)&&l){var f=s.nodeName.toLowerCase();if(u.isValidChild(f,l.toLowerCase())&&(d=a,u=s,f=c,!F(om(xe.fromDom(f),xe.fromDom(u)),function(e){return Q0(d,e.dom)}))){for(var d,m,g,f=i.getRng(),u=f.startContainer,p=f.startOffset,h=f.endContainer,v=f.endOffset,b=cd(e),c=s.firstChild;c;)m=a,B(g=c)||G(g)&&!Q0(m,g)&&!Us(g)?(m=a,!B(g=c)||0!==g.nodeValue.length&&(!/^\s+$/.test(g.nodeValue)||g.nextSibling&&!Q0(m,g.nextSibling))?(t||(t=o.create(l,wc(e)),c.parentNode.insertBefore(t,c),r=!0),c=(n=c).nextSibling,t.appendChild(n)):(c=(n=c).nextSibling,o.remove(n))):(t=null,c=c.nextSibling);r&&b&&(f.setStart(u,p),f.setEnd(h,v),i.setRng(f),e.nodeChanged())}}}function tb(e,t){t.hasAttribute("data-mce-caret")&&(Gr(t),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(t))}function nb(e,t){var n=kr(xe.fromDom(e.getBody()),"*[data-mce-caret]").map(function(e){return e.dom}).getOrNull();if(n)return"compositionstart"===t.type?(t.preventDefault(),t.stopPropagation(),void tb(e,n)):void(Wr(n)&&(tb(e,n),e.undoManager.add()))}function rb(e,t,n){var r,o=_s(e.getBody()),o=me(Zc,1===t?o.next:o.prev);n.collapsed&&""!==yc(e)&&(r=e.dom.getParent(n.startContainer,"PRE"))&&!o(Se.fromRangeStart(n))&&(o=e.dom.create(yc(e)),(!ye.ie||11<=ye.ie)&&(o.innerHTML='<br data-mce-bogus="1">'),n=o,1===t?e.$(r).after(n):e.$(r).before(n),e.selection.select(n,!0),e.selection.collapse())}function ob(t,e){return n=t,r=e?es.Forwards:es.Backwards,o=n.selection.getRng(),_0(n,r,o,Ig,Lg,my).orThunk(function(){return rb(n,r,o),ve.none()}).exists(function(e){return O0(t,e),!0});var n,r,o}function ib(t,e){return r=e?1:-1,o=(n=t).selection.getRng(),A0(n,r,o,function(e){return Ig(e)||Bg(e)},function(e){return Lg(e)||Pg(e)},my).orThunk(function(){return rb(n,r,o),ve.none()}).exists(function(e){return O0(t,e),!0});var n,r,o}function ub(e,t){return D0(e,t,t?Lg:Ig)}function ab(e){return Ee(["figcaption"],Pt(e))}function cb(e){var t=document.createRange();return t.setStartBefore(e.dom),t.setEndBefore(e.dom),t}function sb(e,t,n){(n?$n:nn)(e,t)}function lb(e,t){return!!e.selection.isCollapsed()&&(u=e,a=t,c=xe.fromDom(u.getBody()),s=Se.fromRangeStart(u.selection.getRng()),l=yc(u),f=wc(u),e=s,t=me(_,c),Cr(xe.fromDom(e.container()),wo,t).filter(ab).exists(function(){var e,t,n,r,o=c,i=s;return!!(a?(r=o.dom,g0(r,i)):(r=o.dom,m0(r,i))).breakAt.isNone()&&(o=c,r=f,i=a,e=""===(e=l)?(t=i,sb(o,n=xe.fromTag("br"),t),cb(n)):(t=o,n=i,o=r,i=xe.fromTag(e),r=xe.fromTag("br"),On(i,o),$n(i,r),sb(t,i,n),cb(r)),u.selection.setRng(e),!0)}));var u,a,c,s,l,f}function Te(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return function(){return e.apply(null,t)}}function fb(e,t){return $((n=t,Z(S(e,function(e){return be({shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0,action:le},e)}),function(e){return n.keyCode===e.keyCode&&n.shiftKey===e.shiftKey&&n.altKey===e.altKey&&n.ctrlKey===e.ctrlKey&&n.metaKey===e.metaKey?[e]:[]})),function(e){return e.action()});var n}function db(t,e){var e=e?es.Forwards:es.Backwards,n=t.selection.getRng();return _0(t,e,n,Rg,zg,rr).exists(function(e){return O0(t,e),!0})}function mb(t,e){var e=e?1:-1,n=t.selection.getRng();return A0(t,e,n,Rg,zg,rr).exists(function(e){return O0(t,e),!0})}function gb(e,t){return D0(e,t,t?zg:Rg)}function pb(e,t,n,r,o){var i,n=ha(xe.fromDom(n),"td,th,caption").map(function(e){return e.dom}),e=z((i=e,Z(n,function(e){var t={left:(t=Ta(e.getBoundingClientRect())).left- -1,top:t.top- -1,right:t.right+-2,bottom:t.bottom+-2,width:t.width+-1,height:t.height+-1};return[{x:t.left,y:i(t),cell:e},{x:t.right,y:i(t),cell:e}]})),function(e){return t(e,o)}),u=r,a=o;return U(e,function(e,r){return e.fold(function(){return ve.some(r)},function(e){var t=Math.sqrt(Math.abs(e.x-u)+Math.abs(e.y-a)),n=Math.sqrt(Math.abs(r.x-u)+Math.abs(r.y-a));return ve.some(n<t?r:e)})},ve.none()).map(function(e){return e.cell})}function hb(e,t,n){var r,o,i=e(t,n);return i.breakType===H1.Wrap&&0===i.positions.length||!A(n.getNode())&&i.breakType===H1.Br&&1===i.positions.length?(r=e,o=t,!i.breakAt.exists(function(e){return r(o,e).breakAt.isSome()})):i.breakAt.isNone()}function vb(t,e,n,r){var o,i,u,a=t.selection.getRng(),c=e?1:-1;return!(!Fc()||(o=e,i=n,u=Se.fromRangeStart(a),!Rs(!o,i).exists(function(e){return e.isEqual(u)}))||(e1(c,t,n,!e,!1).each(function(e){O0(t,e)}),0))}function bb(a,c,s){e=s.getNode(!!c);var e=G(e)&&"TABLE"===e.nodeName?ve.some(e):ve.none(),t=!1===c;e.fold(function(){return O0(a,s.toRange())},function(u){return Rs(t,a.getBody()).filter(function(e){return e.isEqual(s)}).fold(function(){return O0(a,s.toRange())},function(e){var n,r,o=c,i=u,t=s;(r=yc(n=a))?n.undoManager.transact(function(){var e=xe.fromTag(r),t=(On(e,wc(n)),$n(e,xe.fromTag("br")),(o?tn:en)(xe.fromDom(i),e),n.dom.createRng());t.setStart(e.dom,0),t.setEnd(e.dom,0),O0(n,t)}):O0(n,t.toRange())})})}function yb(e,t,n,r){var o,i,u,a,c,s,l,f,d,m,g=e.selection.getRng(),g=Se.fromRangeStart(g),p=e.getBody();return t||!hy(r,g)?!(!t||!vy(r,g)||(o=p,d=i=n,bb(e,t,ae((m=u=g).getClientRects()).bind(function(e){return py(d,e.left,e.top)}).bind(function(e){return s0(Kl(t=e).map(function(e){return[e].concat(g0(t,e).positions)}).getOr([]),m);var t}).orThunk(function(){return ue(u.getClientRects()).bind(function(e){return c0(h0(o,Se.after(i)),e.left)})}).getOr(Se.after(i))),0)):(a=p,l=c=n,bb(e,t,ue((f=s=g).getClientRects()).bind(function(e){return gy(l,e.left,e.top)}).bind(function(e){return s0(Xl(t=e).map(function(e){return m0(t,e).positions.concat(e)}).getOr([]),f);var t}).orThunk(function(){return ue(s.getClientRects()).bind(function(e){return c0(p0(a,Se.before(c)),e.left)})}).getOr(Se.before(c))),!0)}function wb(n,r,o){return ve.from(n.dom.getParent(n.selection.getNode(),"td,th")).bind(function(t){return ve.from(n.dom.getParent(t,"table")).map(function(e){return o(n,r,e,t)})}).getOr(!1)}function xb(e,t){return wb(e,t,vb)}function Cb(e,t){return wb(e,t,yb)}function Sb(e,t){var n,r,o=t,i=e.dom,u=e.schema.getMoveCaretBeforeOnEnterElements();if(t){/^(LI|DT|DD)$/.test(t.nodeName)&&(r=function(e){for(;e;){if(1===e.nodeType||3===e.nodeType&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}}(t.firstChild))&&/^(UL|OL|DL)$/.test(r.nodeName)&&t.insertBefore(i.doc.createTextNode(_o),t.firstChild);var a=i.createRng();if(t.normalize(),t.hasChildNodes()){for(var c=new Pr(t,t);n=c.current();){if(B(n)){a.setStart(n,0),a.setEnd(n,0);break}if(u[n.nodeName.toLowerCase()]){a.setStartBefore(n),a.setEndBefore(n);break}o=n,n=c.next()}n||(a.setStart(o,0),a.setEnd(o,0))}else A(t)?t.nextSibling&&i.isBlock(t.nextSibling)?(a.setStartBefore(t),a.setEndBefore(t)):(a.setStartAfter(t),a.setEndAfter(t)):(a.setStart(t,0),a.setEnd(t,0));e.selection.setRng(a),$f(e,a)}}function kb(e){return ve.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock))}function Tb(e,t){return e&&e.parentNode&&e.parentNode.nodeName===t}function Ob(e){return e&&/^(OL|UL|LI)$/.test(e.nodeName)}function Eb(e){var t=e.parentNode;return/^(LI|DT|DD)$/.test(t.nodeName)?t:e}function _b(e,t,n){for(var r=e[n?"firstChild":"lastChild"];r&&!G(r);)r=r[n?"nextSibling":"previousSibling"];return r===t}function Ab(e){e.innerHTML='<br data-mce-bogus="1">'}function Db(e,t){return e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t}function Mb(e,t){return t&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&"true"!==e.getContentEditable(t)}function Nb(e,t,n){return!1===B(t)?n:e?1===n&&t.data.charAt(n-1)===Ao?0:n:n===t.data.length-1&&t.data.charAt(n)===Ao?t.data.length:n}function Rb(e,t){for(var n,r=e.getRoot(),o=t;o!==r&&"false"!==e.getContentEditable(o);)"true"===e.getContentEditable(o)&&(n=o),o=o.parentNode;return o!==r?n:r}function zb(e,t){var n,r,o,i=yc(e);i&&i.toLowerCase()===t.tagName.toLowerCase()&&(n=t,t=wc(i=e),r=i.dom,ve.from(t.style).map(r.parseStyle).each(function(e){var t=zn(xe.fromDom(n)),t=be(be({},t),e);r.setStyles(n,t)}),Cn(ve.from(t.class).map(function(e){return e.split(/\s+/)}),ve.from(n.className).map(function(e){return z(e.split(/\s+/),function(e){return""!==e})}),function(t,e){e=z(e,function(e){return!Ee(t,e)}),e=Ge(Ge([],t,!0),e,!0);r.setAttrib(n,"class",e.join(" "))}),o=["style","class"],i=De(t,function(e,t){return!Ee(o,t)}),r.setAttribs(n,i))}function Bb(e,t,n){var r=e.dom.createRng();n?(r.setStartBefore(t),r.setEndBefore(t)):(r.setStartAfter(t),r.setEndAfter(t)),e.selection.setRng(r),$f(e,r)}function Pb(e,t){var n=xe.fromTag("br");en(xe.fromDom(t),n),e.undoManager.add()}function Ib(e,t){by(e.getBody(),t)||tn(xe.fromDom(t),xe.fromTag("br"));var n=xe.fromTag("br");tn(xe.fromDom(t),n),Bb(e,n.dom,!1),e.undoManager.add()}function Lb(e){return e&&"A"===e.nodeName&&"href"in e}function Fb(e){return e.fold(ge,Lb,Lb,ge)}function Hb(e,t){t.fold(le,me(Pb,e),me(Ib,e),le)}function Vb(e,t){l=me(Pv,r=e),n=Se.fromRangeStart(r.selection.getRng());var n,r,o,i,u,a,c,s,l=M1(l,r.getBody(),n).filter(Fb);l.isSome()?l.each(me(Hb,e)):(r=t,l=(n=e).selection,t=n.dom,u=l.getRng(),Cf(t,u).each(function(e){u.setStart(e.startContainer,e.startOffset),u.setEnd(e.endContainer,e.endOffset)}),l=u.startOffset,1===(a=u.startContainer).nodeType&&a.hasChildNodes()&&(s=l>a.childNodes.length-1,a=a.childNodes[Math.min(l,a.childNodes.length-1)]||a,l=s&&3===a.nodeType?a.nodeValue.length:0),c=t.getParent(a,t.isBlock),s=c?t.getParent(c.parentNode,t.isBlock):null,e=s?s.nodeName.toUpperCase():"",r=!(!r||!r.ctrlKey),"LI"!==e||r||(c=s),a&&3===a.nodeType&&l>=a.nodeValue.length&&!function(e){for(var t,n=new Pr(a,c),r=e.getNonEmptyElements();t=n.next();)if(r[t.nodeName.toLowerCase()]||0<t.length)return 1}(n.schema)&&(o=t.create("br"),u.insertNode(o),u.setStartAfter(o),u.setEndAfter(o),i=!0),o=t.create("br"),oc(t,u,o),Bb(n,o,i),n.undoManager.add())}function jb(e,t){return kb(e).filter(function(e){return 0<t.length&&it(xe.fromDom(e),t)}).isSome()}function Ub(e,t){return jb(e,e.getParam("no_newline_selector",""))}function Wb(n){return function(e,t){return""===yc(e)===n}}function $b(n){return function(e,t){return kb(e).filter(function(e){return So(xe.fromDom(e))}).isSome()===n}}function qb(n,r){return function(e,t){return kb(e).fold(fe(""),function(e){return e.nodeName.toUpperCase()})===n.toUpperCase()===r}}function Gb(e){return qb("pre",e)}function Kb(n){return function(e,t){return e.getParam("br_in_pre",!0)===n}}function Xb(e,t){return jb(e,e.getParam("br_newline_selector",".mce-toc h2,figcaption,caption"))}function Yb(e,t){return t}function Jb(e){var t=yc(e),n=function(e,t){for(var n,r=e.getRoot(),o=t;o!==r&&"false"!==e.getContentEditable(o);)"true"===e.getContentEditable(o)&&(n=o),o=o.parentNode;return o!==r?n:r}(e.dom,e.selection.getStart());return n&&e.schema.isValidChild(n.nodeName,t||"P")}function Zb(e,t){return function(n,r){return U(e,function(e,t){return e&&t(n,r)},!0)?ve.some(t):ve.none()}}function Qb(A,D){var e=A,t=D;C1([Zb([Ub],yy.none()),Zb([qb("summary",!0)],yy.br()),Zb([Gb(!0),Kb(!1),Yb],yy.br()),Zb([Gb(!0),Kb(!1)],yy.block()),Zb([Gb(!0),Kb(!0),Yb],yy.block()),Zb([Gb(!0),Kb(!0)],yy.br()),Zb([$b(!0),Yb],yy.br()),Zb([$b(!0)],yy.block()),Zb([Wb(!0),Yb,Jb],yy.block()),Zb([Wb(!0)],yy.br()),Zb([Xb],yy.br()),Zb([Wb(!1),Yb],yy.br()),Zb([Jb],yy.block())],[e,!(!t||!t.shiftKey)]).getOr(yy.none()).fold(function(){Vb(A,D)},function(){var u=A,e=D;function t(e){var t,n=f,r=s.getTextInlineElements(),o=e||"TABLE"===v||"HR"===v?c.create(e||m):p.cloneNode(!1),i=o;if(!1===u.getParam("keep_styles",!0))c.setAttrib(o,"style",null),c.setAttrib(o,"class",null);else for(;!r[n.nodeName]||zs(n)||Us(n)||(t=n.cloneNode(!1),c.setAttrib(t,"id",""),o.hasChildNodes()?t.appendChild(o.firstChild):i=t,o.appendChild(t)),(n=n.parentNode)&&n!==E;);return zb(u,o),Ab(i),o}function n(e){var t,n,r=Nb(e,f,d);if(!B(f)||!(e?0<r:r<f.nodeValue.length)){if((f.parentNode!==p||!i||e)&&(!e||!G(f)||f!==p.firstChild)){if(Db(f,"TABLE")||Db(f,"HR"))return i&&!e||!i&&e;var o=new Pr(f,p);for(B(f)&&(e&&0===r?o.prev():e||r!==f.nodeValue.length||o.next());t=o.current();){if(G(t)){if(!t.getAttribute("data-mce-bogus")&&(n=t.nodeName.toLowerCase(),l[n])&&"br"!==n)return}else if(B(t)&&!Jr(t.nodeValue))return;e?o.prev():o.next()}}return 1}}function r(){a=/^(H[1-6]|PRE|FIGURE)$/.test(v)&&"HGROUP"!==b?t(m):t(),u.getParam("end_container_on_empty_block",!1)&&Mb(c,h)&&c.isEmpty(p)?a=c.split(h,p):c.insertAfter(a,p),Sb(u,a)}var a,i,c=u.dom,s=u.schema,l=s.getNonEmptyElements(),o=u.selection.getRng(),f=(Cf(c,o).each(function(e){o.setStart(e.startContainer,e.startOffset),o.setEnd(e.endContainer,e.endOffset)}),o.startContainer),d=o.startOffset,m=yc(u),g=!(!e||!e.shiftKey),e=!(!e||!e.ctrlKey);G(f)&&f.hasChildNodes()&&(i=d>f.childNodes.length-1,f=f.childNodes[Math.min(d,f.childNodes.length-1)]||f,d=i&&B(f)?f.nodeValue.length:0);var p,h,v,b,y,w,x,C,S,k,T,O,E=Rb(c,f);if(E)if((m&&!g||!m&&g)&&(f=function(e,t,n,r){var o,i,u,a,c=m||"P",s=e.dom,l=Rb(s,n),f=s.getParent(n,s.isBlock);if(!f||!Mb(s,f)){if(l=((f=f||l)===e.getBody()||(l=f)&&/^(TD|TH|CAPTION)$/.test(l.nodeName)?f:f.parentNode).nodeName.toLowerCase(),!f.hasChildNodes())return zb(e,o=s.create(c)),f.appendChild(o),t.setStart(o,0),t.setEnd(o,0),o;for(u=n;u.parentNode!==f;)u=u.parentNode;for(;u&&!s.isBlock(u);)u=(i=u).previousSibling;if(i&&e.schema.isValidChild(l,c.toLowerCase())){for(zb(e,o=s.create(c)),i.parentNode.insertBefore(o,i),u=i;u&&!s.isBlock(u);)a=u.nextSibling,o.appendChild(u),u=a;t.setStart(n,r),t.setEnd(n,r)}}return n}(u,o,f,d)),h=(p=c.getParent(f,c.isBlock))?c.getParent(p.parentNode,c.isBlock):null,v=p?p.nodeName.toUpperCase():"","LI"!==(b=h?h.nodeName.toUpperCase():"")||e||(h=(p=h).parentNode,v=b),/^(LI|DT|DD)$/.test(v)&&c.isEmpty(p))g=t,e=h,w=p,x=m,O=(y=u).dom,k=y.selection.getRng(),e!==y.getBody()&&(C=(x=Ob(C=e)&&Ob(C.parentNode)?"LI":x)?g(x):O.create("BR"),_b(e,w,!0)&&_b(e,w,!1)?Tb(e,"LI")?(g=Eb(e),O.insertAfter(C,g),(null==(S=(T=e).parentNode)?void 0:S.firstChild)===T?O.remove(g):O.remove(e)):O.replace(C,e):(_b(e,w,!0)?Tb(e,"LI")?(O.insertAfter(C,Eb(e)),C.appendChild(O.doc.createTextNode(" ")),C.appendChild(e)):e.parentNode.insertBefore(C,e):_b(e,w,!1)?O.insertAfter(C,Eb(e)):(e=Eb(e),(S=k.cloneRange()).setStartAfter(w),S.setEndAfter(e),T=S.extractContents(),"LI"===x&&T.firstChild&&"LI"===T.firstChild.nodeName?(C=T.firstChild,O.insertAfter(T,e)):(O.insertAfter(T,e),O.insertAfter(C,e))),O.remove(w)),Sb(y,C));else if(!m||p!==u.getBody()){if(m=m||"P",Vr(p))a=Gr(p),c.isEmpty(p)&&Ab(p),zb(u,a),Sb(u,a);else if(n())r();else if(n(!0))a=p.parentNode.insertBefore(t(),p),Sb(u,Db(p,"HR")?a:p);else{(k=(g=o).cloneRange()).setStart(g.startContainer,Nb(!0,g.startContainer,g.startOffset)),k.setEnd(g.endContainer,Nb(!1,g.endContainer,g.endOffset)),(S=k.cloneRange()).setEndAfter(p),x=S.extractContents(),pe(Va(xe.fromDom(x),Fn),function(e){e=e.dom;e.nodeValue=Mo(e.nodeValue)});for(var _=x;B(_)&&(_.nodeValue=_.nodeValue.replace(/^[\r\n]+/,"")),_=_.firstChild;);a=x.firstChild,c.insertAfter(x,p),function(e,t){var n,r,o=a,i=[];if(o){for(;o=o.firstChild;){if(e.isBlock(o))return;G(o)&&!t[o.nodeName.toLowerCase()]&&i.push(o)}for(n=i.length;n--;)(!(o=i[n]).hasChildNodes()||o.firstChild===o.lastChild&&""===o.firstChild.nodeValue||(r=o)&&"A"===r.nodeName&&e.isEmpty(r))&&e.remove(o)}}(c,l),T=c,(e=p).normalize(),(O=e.lastChild)&&!/^(left|right)$/gi.test(T.getStyle(O,"float",!0))||T.add(e,"br"),c.isEmpty(p)&&Ab(p),a.normalize(),c.isEmpty(a)?(c.remove(a),r()):(zb(u,a),Sb(u,a))}c.setAttrib(a,"id",""),u.fire("NewBlock",{newBlock:a})}},le)}function ey(e){return e.stopImmediatePropagation()}function ty(e){return e.keyCode===ke.PAGE_UP||e.keyCode===ke.PAGE_DOWN}function ny(e,t,n){n&&!e.get()?t.on("NodeChange",ey,!0):!n&&e.get()&&t.off("NodeChange",ey),e.set(n)}function ry(n,r){var e=r.container(),t=r.offset();return B(e)?(e.insertData(t,n),ve.some(Se(e,t+n.length))):Jc(r).map(function(e){var t=xe.fromText(n);return(r.isAtEnd()?tn:en)(e,t),Se(t.dom,n.length)})}function oy(e){var t,n,r,o,i,u,a=Se.fromRangeStart(e.selection.getRng()),c=xe.fromDom(e.getBody());return!!e.selection.isCollapsed()&&(r=me(Pv,e),o=Se.fromRangeStart(e.selection.getRng()),M1(r,e.getBody(),o).bind((n=c,function(e){return e.fold(function(e){return Gl(n.dom,Se.before(e))},function(e){return Kl(e)},function(e){return Xl(e)},function(e){return ql(n.dom,Se.after(e))})})).bind((i=c,u=a,function(e){return r=i,(!bm(e=e)&&(Gl((t=r).dom,n=e).isNone()||ql(t.dom,n).isNone()||Fg(t,n)||Hg(t,n)||mm(t,n)||dm(t,n)||hm(r,e)||vm(r,e))?Cy:Sy)(u);var t,n,r})).exists((t=e,function(e){return t.selection.setRng(e.toRange()),t.nodeChanged(),!0})))}(e=d0=d0||{})[e.Up=-1]="Up",e[e.Down=1]="Down";function iy(e){return z(S(e.selection.getSelectedBlocks(),xe.fromDom),function(e){return!K0(e)&&!jt(e).exists(K0)&&Cr(e,function(e){return tr(e.dom)||D(e.dom)}).exists(function(e){return tr(e.dom)})})}var uy=me(v0,d0.Up,_a,Aa),ay=me(v0,d0.Down,Aa,_a),cy=D,sy=jc,ly=function(e,t){var n,r=e.selection.getRng(),e=e.getBody();return t?(n=Se.fromRangeEnd(r),ae(g0(e,n).positions)):(n=Se.fromRangeStart(r),ue(m0(e,n).positions))},fy=me(B0,!0),dy=me(B0,!1),my=D,gy=me(pb,function(e){return e.bottom},function(e,t){return e.y<t}),py=me(pb,function(e){return e.top},function(e,t){return e.y>t}),hy=me(hb,m0),vy=me(hb,g0),by=function(e,t){return n=Se.after(t),!!A(n.getNode())||ql(e,Se.after(t)).map(function(e){return A(e.getNode())}).getOr(!1);var n},yy=lr([{br:[]},{block:[]},{none:[]}]),wy=Mt().browser,xy=Mt(),Cy=me(ry,_o),Sy=me(ry," "),ky=(Ty.prototype.nodeChanged=function(e){var t,n,r=this.editor.selection;this.editor.initialized&&r&&!this.editor.getParam("disable_nodechange")&&!this.editor.mode.isReadOnly()&&(n=this.editor.getBody(),(r=r.getStart(!0)||n).ownerDocument===this.editor.getDoc()&&this.editor.dom.isChildOf(r,n)||(r=n),t=[],this.editor.dom.getParent(r,function(e){return e===n||void t.push(e)}),(e=e||{}).element=r,e.parents=t,this.editor.fire("NodeChange",e))},Ty.prototype.isSameElementPath=function(e){var t,n=this.editor.$(e).parentsUntil(this.editor.getBody()).add(e);if(n.length===this.lastPath.length){for(t=n.length;0<=t&&n[t]===this.lastPath[t];t--);if(-1===t)return this.lastPath=n,!0}return this.lastPath=n,!1},Ty);function Ty(n){this.lastPath=[],this.editor=n;var r,t=this;"onselectionchange"in n.getDoc()||n.on("NodeChange click mouseup keyup focus",function(e){var t=n.selection.getRng(),t={startContainer:t.startContainer,startOffset:t.startOffset,endContainer:t.endContainer,endOffset:t.endOffset};"nodechange"!==e.type&&hf(t,r)||n.fire("SelectionChange"),r=t}),n.on("contextmenu",function(){n.fire("SelectionChange")}),n.on("SelectionChange",function(){var e=n.selection.getStart(!0);!e||!ye.range&&n.selection.isCollapsed()||kl(n)&&!t.isSameElementPath(e)&&n.dom.isChildOf(e,n.getBody())&&n.nodeChanged({selectionChange:!0})}),n.on("mouseup",function(e){!e.isDefaultPrevented()&&kl(n)&&("IMG"===n.selection.getNode().nodeName?zr.setEditorTimeout(n,function(){n.nodeChanged()}):n.nodeChanged())})}function Oy(e){return G(e)&&xo(xe.fromDom(e))}function Ey(e){var t=e.getBoundingClientRect(),e=e.ownerDocument,n=e.documentElement,e=e.defaultView;return{top:t.top+e.pageYOffset-n.clientTop,left:t.left+e.pageXOffset-n.clientLeft}}function _y(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Ay(e,f){var d=zr.throttle(function(e,t){f._selectionOverrides.hideFakeCaret(),f.selection.placeCaretAt(e,t)},0);return f.on("remove",d.stop),function(l){return e.on(function(e){var t,n,r,o,i,u,a,c,s=Math.max(Math.abs(l.screenX-e.screenX),Math.abs(l.screenY-e.screenY));if(!e.dragging&&10<s){if(f.fire("dragstart",{target:e.element}).isDefaultPrevented())return;e.dragging=!0,f.focus()}e.dragging&&(s=e,u={pageX:(a=l,t=(o=f).inline?Ey(o.getBody()):{left:0,top:0},r=(n=o).getBody(),n=n.inline?{left:r.scrollLeft,top:r.scrollTop}:{left:0,top:0},(i={pageX:(r=o,(r=(o=a).target.ownerDocument===r.getDoc()?{left:o.pageX,top:o.pageY}:(a=Ey(r.getContentAreaContainer()),u=(r=r).getBody(),c=r.getDoc().documentElement,i={left:u.scrollLeft,top:u.scrollTop},u={left:u.scrollLeft||c.scrollLeft,top:u.scrollTop||c.scrollTop},c=r.inline?i:u,{left:o.pageX-a.left+c.left,top:o.pageY-a.top+c.top})).left-t.left+n.left),pageY:r.top-t.top+n.top}).pageX-s.relX),pageY:i.pageY+5},o=e.ghost,a=f.getBody(),o.parentNode!==a&&a.appendChild(o),c=e.ghost,r=e.width,t=e.height,n=e.maxX,s=e.maxY,a=0,c.style.left=(o=u).pageX+"px",c.style.top=o.pageY+"px",s<o.pageY+t&&(a=o.pageY+t-s),c.style.width=r-(n<o.pageX+r?o.pageX+r-n:0)+"px",c.style.height=t-a+"px",d(l.clientX,l.clientY))})}}function Dy(e){function t(){n.on(function(e){e.dragging&&r.fire("dragend")}),Zy(n)}var n,r,o,u,i,a,c=sa(),s=Ce.DOM,l=document,f=Ay(i=c,a=e);n=o=c;(r=u=e).on("mousedown",function(e){var t,n,r,o;0===e.button&&(o=$(a.dom.getParents(e.target),function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return function(e){for(var t=0;t<n.length;t++)if(n[t](e))return!0;return!1}}(Yy,Jy)).getOr(null),t=a.getBody(),Yy(r=o))&&r!==t&&(r=a.dom.getPos(o),t=a.getBody(),n=a.getDoc().documentElement,i.set({element:o,dragging:!1,screenX:e.screenX,screenY:e.screenY,maxX:(a.inline?t.scrollWidth:n.offsetWidth)-2,maxY:(a.inline?t.scrollHeight:n.offsetHeight)-2,relX:e.pageX-r.x,relY:e.pageY-r.y,width:o.offsetWidth,height:o.offsetHeight,ghost:(n=(t=o).offsetWidth,e=o.offsetHeight,r=a.dom,t=t.cloneNode(!0),r.setStyles(t,{width:n,height:e}),r.setAttrib(t,"data-mce-selected",null),o=r.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"}),r.setStyles(o,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:e}),r.setStyles(t,{margin:0,boxSizing:"border-box"}),o.appendChild(t),o)}))}),e.on("mousemove",f),e.on("mouseup",function(i){o.on(function(e){var t,n,r,o;e.dragging&&((o=3===(o=(n=u).selection.getSel().getRangeAt(0).startContainer).nodeType?o.parentNode:o)===(r=e.element)||n.dom.isChildOf(o,r)||Yy(o)||((n=e.element.cloneNode(!0)).removeAttribute("data-mce-selected"),t=n,u.fire("drop",{clientX:i.clientX,clientY:i.clientY}).isDefaultPrevented())||u.undoManager.transact(function(){_y(e.element),u.insertContent(u.dom.getOuterHTML(t)),u._selectionOverrides.hideFakeCaret()}),u.fire("dragend"))}),Zy(o)}),s.bind(l,"mousemove",f),s.bind(l,"mouseup",t),e.on("remove",function(){s.unbind(l,"mousemove",f),s.unbind(l,"mouseup",t)}),e.on("keydown",function(e){e.keyCode===ke.ESC&&t()})}function My(e,t){return cf(e.getBody(),t)}function Ny(l){function f(e){return e!==C&&(ew(e)||rr(e))&&w.isChildOf(e,C)}function d(e){return Ig(e)||Lg(e)||Rg(e)||zg(e)}function m(e){e&&y.setRng(e)}function g(e,t,n,r){return void 0===r&&(r=!0),l.fire("ShowCaret",{target:t,direction:e,before:n}).isDefaultPrevented()?null:(r&&y.scrollIntoView(t,-1===e),a.show(n,t))}function t(e){return Ur(e)||zo(e)||Bo(e)}function s(e){return t(e.startContainer)||t(e.endContainer)}function p(e,t){if(e)if(e.collapsed){if(!s(e)){var n=t?1:-1,r=Yc(n,C,e),o=r.getNode(!t);if(Hc(o))return g(n,o,!!t&&!r.isAtEnd(),!1);o=r.getNode(t);if(Hc(o))return g(n,o,!t&&!r.isAtEnd(),!1)}}else{var i,u,a,c,n=e.startContainer,o=e.startOffset,t=e.endOffset;if(3===n.nodeType&&0===o&&ew(n.parentNode)&&(n=n.parentNode,o=w.nodeIndex(n),n=n.parentNode),1===n.nodeType)if(t===o+1&&n===e.endContainer){r=n.childNodes[o];if(f(r))return e=(t=r).cloneNode(!0),(n=l.fire("ObjectSelected",{target:t,targetClone:e})).isDefaultPrevented()?null:(o=t,n=n.targetClone,e=e,u=l.$,0===(a=kr(xe.fromDom(l.getBody()),"#"+S).fold(function(){return u([])},function(e){return u([e.dom])})).length&&(a=u('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>').attr("id",S)).appendTo(l.getBody()),c=w.createRng(),n===e&&ye.ie?(a.empty().append('<p style="font-size: 0" data-mce-bogus="all"></p>').append(n),c.setStartAfter(a[0].firstChild.firstChild),c.setEndAfter(n)):(a.empty().append(_o).append(n).append(_o),c.setStart(a[0].firstChild,1),c.setEnd(a[0].lastChild,0)),a.css({top:w.getPos(o,l.getBody()).y}),a[0].focus(),(e=y.getSel()).removeAllRanges(),e.addRange(c),n=c,i=xe.fromDom(t),pe(ha(xe.fromDom(l.getBody()),"*[data-mce-selected]"),function(e){_(i,e)||Dn(e,k)}),w.getAttrib(t,k)||t.setAttribute(k,"1"),b=t,v(),n)}}return null}function h(){b&&b.removeAttribute(k),kr(xe.fromDom(l.getBody()),"#"+S).each(qn),b=null}function v(){a.hide()}var b,n,e,r,o,i,u,y=l.selection,w=l.dom,x=w.isBlock,C=l.getBody(),a=Lc(l,C,x,function(){return cd(l)}),S="sel-"+w.uniqueId(),k="data-mce-selected",c=y.getRng;return ye.ceFalse&&!qp(l)&&(l.on("mouseup",function(e){var t=c();t.collapsed&&qh(l,e.clientX,e.clientY)&&n1(l,t,!1).each(m)}),l.on("click",function(e){var t=My(l,e.target);t&&(ew(t)&&(e.preventDefault(),l.focus()),Qy(t))&&w.isChildOf(t,y.getNode())&&h()}),l.on("blur NewBlock",h),l.on("ResizeWindow FullscreenStateChanged",a.reposition),l.on("tap",function(e){var t=e.target,n=My(l,t);ew(n)?(e.preventDefault(),t1(l,n).each(p)):f(t)&&t1(l,t).each(p)},!0),l.on("mousedown",function(e){var t,n,r,o,i,u,a=e.target;function c(e){return!yn(e.node)&&!rr(e.node)}function s(t,e){e=z(f0([e]),function(e){return!t(e,o)});return i=i.concat(e),0===e.length}a!==C&&"HTML"!==a.nodeName&&!w.isChildOf(a,C)||!1===qh(l,e.clientX,e.clientY)||((t=My(l,a))?ew(t)?(e.preventDefault(),t1(l,t).each(p)):(h(),Qy(t)&&e.shiftKey||sf(e.clientX,e.clientY,y.getRng())||(v(),y.placeCaretAt(e.clientX,e.clientY))):f(a)?t1(l,a).each(p):!1===Hc(a)&&(h(),v(),t=C,n=e.clientX,r=e.clientY,u=f0(z(Ue(t.getElementsByTagName("*")),Hc)),u=z(u,me(S0,r)),r=(r=(r=k0(u,n,c))&&k0((u=t,void 0===(t=c(o=r))&&(t=!0),(i=[]).push(o),T0(d0.Up,u,me(s,_a),o.node,t),T0(d0.Down,u,me(s,Aa),o.node,t),i),n,c))&&Hc(r.node)?{node:(u=r).node,before:w0(u,t=n)<x0(u,t)}:null)&&(n=r.node,t=w.getParent(u=a,x),a=w.getParent(n,x),!Y(t)&&(u!==a&&w.isChildOf(t,a)&&!1===ew(My(l,t))||!w.isChildOf(a,t)&&(n=a,w.getParent(t,x)!==w.getParent(n,x))&&function(e){var t=e.firstChild;if(!Y(t))return t=Se.before(t),A(t.getNode())&&1===e.childNodes.length?!d(t):(e=_s(e).next(t))&&!d(e)}(t))||(e.preventDefault(),m(g(1,r.node,r.before,!1)),l.getBody().focus())))}),l.on("keypress",function(e){ke.modifierPressed(e)||ew(y.getNode())&&e.preventDefault()}),l.on("GetSelectionRange",function(e){var t=e.range;b&&(b.parentNode?((t=t.cloneRange()).selectNode(b),e.range=t):b=null)}),l.on("SetSelectionRange",function(e){e.range=(i=e.range,t=l.schema.getShortEndedElements(),n=w.createRng(),u=i.startContainer,r=i.startOffset,o=i.endContainer,i=i.endOffset,re(t,u.nodeName.toLowerCase())?0===r?n.setStartBefore(u):n.setStartAfter(u):n.setStart(u,r),re(t,o.nodeName.toLowerCase())?0===i?n.setEndBefore(o):n.setEndAfter(o):n.setEnd(o,i),n);var t,n,r,o,i,u=p(e.range,e.forward);u&&(e.range=u)}),l.on("AfterSetSelectionRange",function(e){var e=e.range,t=e.startContainer.parentNode;s(e)||"mcepastebin"===t.id||v(),w.hasClass(t,"mce-offscreen-selection")||h()}),l.on("copy",function(e){var t,n=e.clipboardData;e.isDefaultPrevented()||!e.clipboardData||ye.ie||(t=(t=w.get(S))&&t.getElementsByTagName("*")[0])&&(e.preventDefault(),n.clearData(),n.setData("text/html",t.outerHTML),n.setData("text/plain",t.outerText||t.innerText))}),Dy(o=l),(i=o).on("drop",function(e){var t=void 0!==e.clientX?i.getDoc().elementFromPoint(e.clientX,e.clientY):null;!Yy(t)&&"false"!==i.dom.getContentEditableParent(t)||e.preventDefault()}),o.getParam("block_unsupported_drop",!0,"boolean")&&(u=o).on("init",function(){zr.setEditorTimeout(u,E,0)}),e=la(function(){var e;!n.removed&&n.getBody().contains(document.activeElement)&&(e=n.selection.getRng()).collapsed&&(e=r1(n,e,!1),n.selection.setRng(e))},0),(n=l).on("focus",function(){e.throttle()}),n.on("blur",function(){e.cancel()}),(r=l).on("init",function(){r.on("focusin",function(e){var t,e=e.target;rr(e)&&(t=cf(r.getBody(),e),t=D(t)?t:e,r.selection.getNode()!==t)&&t1(r,t).each(function(e){return r.selection.setRng(e)})})})),{showCaret:g,showBlockCaretContainer:function(e){e.hasAttribute("data-mce-caret")&&(Gr(e),m(c()),y.scrollIntoView(e))},hideFakeCaret:v,destroy:function(){a.destroy(),b=null}};function T(e){var t;e.isDefaultPrevented()||(t=e.dataTransfer)&&(Ee(t.types,"Files")||0<t.files.length)&&(e.preventDefault(),"drop"===e.type)&&yv(u,"Dropped file type is not supported")}function O(e){rd(u,e.target)&&T(e)}function E(){var t=Ce.DOM,n=u.dom,r=document,o=u.inline?u.getBody():u.getDoc(),e=["drop","dragover"];pe(e,function(e){t.bind(r,e,O),n.bind(o,e,T)}),u.on("remove",function(){pe(e,function(e){t.unbind(r,e,O),n.unbind(o,e,T)})})}}function Ry(e){return De(e,function(e){return!1===y(e)})}function zy(e){e=e.settings;return Ry({block_elements:e.block_elements,boolean_attributes:e.boolean_attributes,custom_elements:e.custom_elements,extended_valid_elements:e.extended_valid_elements,invalid_elements:e.invalid_elements,invalid_styles:e.invalid_styles,move_caret_before_on_enter_elements:e.move_caret_before_on_enter_elements,non_empty_elements:e.non_empty_elements,schema:e.schema,self_closing_elements:e.self_closing_elements,short_ended_elements:e.short_ended_elements,special:e.special,text_block_elements:e.text_block_elements,text_inline_elements:e.text_inline_elements,valid_children:e.valid_children,valid_classes:e.valid_classes,valid_elements:e.valid_elements,valid_styles:e.valid_styles,verify_html:e.verify_html,whitespace_elements:e.whitespace_elements,padd_empty_block_inline_children:e.format_empty_lines})}function By(e){var t=e.settings,n=e.editorUpload.blobCache;return Ry({allow_conditional_comments:t.allow_conditional_comments,allow_html_data_urls:t.allow_html_data_urls,allow_svg_data_urls:t.allow_svg_data_urls,allow_html_in_named_anchor:t.allow_html_in_named_anchor,allow_script_urls:t.allow_script_urls,allow_unsafe_link_target:t.allow_unsafe_link_target,convert_fonts_to_spans:t.convert_fonts_to_spans,fix_list_elements:t.fix_list_elements,font_size_legacy_values:t.font_size_legacy_values,forced_root_block:t.forced_root_block,forced_root_block_attrs:t.forced_root_block_attrs,padd_empty_with_br:t.padd_empty_with_br,preserve_cdata:t.preserve_cdata,remove_trailing_brs:t.remove_trailing_brs,inline_styles:t.inline_styles,root_name:e.inline?e.getElement().nodeName.toLowerCase():void 0,validate:!0,blob_cache:n,document:e.getDoc(),images_dataimg_filter:t.images_dataimg_filter})}function Py(e){return(e.inline?e.ui:e.dom).styleSheetLoader}function Iy(e){function t(){o.unloadAll(u),e.inline||e.ui.styleSheetLoader.unloadAll(i)}function n(){e.removed?t():e.on("remove",t)}var r,o=Py(e),i=Oc(e),u=e.contentCSS;0<e.contentStyles.length&&(r="",we.each(e.contentStyles,function(e){r+=e+"\r\n"}),e.dom.addStyle(r));var a,c,s,l,f,d,m,g=Rr.all((a=e,c=u,s=i,g=[new Rr(function(e,t){return Py(a).loadAll(c,e,t)})],a.inline?g:g.concat([new Rr(function(e,t){return a.ui.styleSheetLoader.loadAll(s,e,t)})]))).then(n).catch(n);return e.settings.content_style&&(f=(l=e).settings.content_style,d=xe.fromDom(l.getBody()),d=Zt(Wn(d)),Tn(m=xe.fromTag("style"),"type","text/css"),$n(m,xe.fromText(f)),$n(d,m),l.on("remove",function(){qn(m)})),g}function Ly(e){var t,n,o;!0!==e.removed&&(qp(t=e)||t.load({initial:!0,format:"html"}),t.startContent=t.getContent({format:"raw"}),(t=e).bindPendingEventDelegates(),t.initialized=!0,t.fire("Init"),t.focus(!0),e=(o=t).dom.getRoot(),o.inline||kl(o)&&o.selection.getStart(!0)!==e||Kl(e).each(function(e){var t,n,r=e.getNode(),r=yn(r)?Kl(r).getOr(e):e;ye.browser.isIE()?(e=o,n=r.toRange(),t=xe.fromDom(e.getBody()),n=(Zf(e)?ve.from(n):ve.none()).map(Qf).filter(Jf(t)),e.bookmark=n.isSome()?n:e.bookmark):o.selection.setRng(r.toRange())}),t.nodeChanged({initial:!0}),t.execCallback("init_instance_callback",t),(n=t).settings.auto_focus)&&zr.setEditorTimeout(n,function(){var e=!0===n.settings.auto_focus?n:n.editorManager.get(n.settings.auto_focus);e.destroyed||e.focus()},100)}function Fy(t,e){var n=t.settings,r=t.getElement(),o=t.getDoc();n.inline||(t.getElement().style.visibility=t.orgVisibility),e||t.inline||(o.open(),o.write(t.iframeHTML),o.close()),t.inline&&(tw.addClass(r,"mce-content-body"),t.contentDocument=o=document,t.contentWindow=window,t.bodyElement=r,t.contentAreaContainer=r);var a,P,I,i,u,c,s,e=t.getBody();e.disabled=!0,t.readonly=!!n.readonly,t.readonly||(t.inline&&"static"===tw.getStyle(e,"position",!0)&&(e.style.position="relative"),e.contentEditable=t.getParam("content_editable_state",!0)),e.disabled=!1,t.editorUpload=Ev(t),t.schema=lo(zy(t)),t.dom=Ce(o,{keep_values:!0,url_converter:t.convertURL,url_converter_scope:t,hex_colors:n.force_hex_style_colors,update_styles:!0,root_element:t.inline?t.getBody():null,collect:function(){return t.inline},schema:t.schema,contentCssCors:t.getParam("content_css_cors",!1,"boolean"),referrerPolicy:Sc(t),onSetAttrib:function(e){t.fire("SetAttrib",e)}}),t.parser=((r=zh(By(a=t),a.schema)).addAttributeFilter("src,href,style,tabindex",function(e,t){for(var n,r,o=e.length,i=a.dom,u="data-mce-"+t;o--;)(r=(n=e[o]).attr(t))&&!n.attr(u)&&0!==r.indexOf("data:")&&0!==r.indexOf("blob:")&&("style"===t?((r=i.serializeStyle(i.parseStyle(r),n.name)).length||(r=null),n.attr(u,r),n.attr(t,r)):"tabindex"===t?(n.attr(u,r),n.attr(t,null)):n.attr(u,a.convertURL(r,t,n.name)))}),r.addNodeFilter("script",function(e){for(var t=e.length;t--;){var n=e[t],r=n.attr("type")||"no/type";0!==r.indexOf("mce-")&&n.attr("type","mce-"+r)}}),a.settings.preserve_cdata&&r.addNodeFilter("#cdata",function(e){for(var t=e.length;t--;){var n=e[t];n.type=8,n.name="#comment",n.value="[CDATA["+a.dom.encode(n.value)+"]]"}}),r.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(e){for(var t=e.length,n=a.schema.getNonEmptyElements();t--;){var r=e[t];r.isEmpty(n)&&0===r.getAll("br").length&&(r.append(new _d("br",1)).shortEnded=!0)}}),r),t.serializer=Ph((o=(e=t).settings,be(be(be({},By(e)),zy(e)),Ry({url_converter:o.url_converter,url_converter_scope:o.url_converter_scope,element_format:o.element_format,entities:o.entities,entity_encoding:o.entity_encoding,indent:o.indent,indent_after:o.indent_after,indent_before:o.indent_before}))),t),t.selection=fh(t.dom,t.getWin(),t.serializer,t),t.annotator=Dl(t),t.formatter=Mv(t),t.undoManager=Rv(t),t._nodeChangeDispatcher=new ky(t),t._selectionOverrides=Ny(t),i=t,u=sa(),c=ra(!1),s=fa(function(e){i.fire("longpress",be(be({},e),{type:"longpress"})),c.set(!0)},400),i.on("touchstart",function(t){Z0(t).each(function(e){s.cancel();e={x:e.clientX,y:e.clientY,target:t.target};s.throttle(t),c.set(!1),u.set(e)})},!0),i.on("touchmove",function(e){s.cancel(),Z0(e).each(function(r){u.on(function(e){var t=r,n=Math.abs(t.clientX-e.x),t=Math.abs(t.clientY-e.y);(5<n||5<t)&&(u.clear(),c.set(!1),i.fire("longpresscancel"))})})},!0),i.on("touchend touchcancel",function(t){s.cancel(),"touchcancel"!==t.type&&u.get().filter(function(e){return e.target.isEqualNode(t.target)}).each(function(){c.get()?t.preventDefault():i.fire("tap",be(be({},t),{type:"tap"}))})},!0),(I=n=t).on("click",function(e){I.dom.getParent(e.target,"details")&&e.preventDefault()}),(r=n).parser.addNodeFilter("details",function(e){pe(e,function(e){e.attr("data-mce-open",e.attr("open")),e.attr("open","open")})}),r.serializer.addNodeFilter("details",function(e){pe(e,function(e){var t=e.attr("data-mce-open");e.attr("open",de(t)?t:null),e.attr("data-mce-open",null)})}),qp(t)||(P=t).on("click",function(e){var t,n,r,o;3<=e.detail&&(n=(e=P).selection.getRng(),r=Se.fromRangeStart(n),o=Se.fromRangeEnd(n),Se.isElementPosition(r)&&Oy(t=r.container())&&Kl(t).each(function(e){return n.setStart(e.container(),e.offset())}),Se.isElementPosition(o)&&Oy(t=r.container())&&Xl(t).each(function(e){return n.setEnd(e.container(),e.offset())}),e.selection.setRng(og(n)))});var l,f,L,d,m,g,p,F,h,H,V,v,b,y,j,U,w,W,$,q,G,x,C,S,k,T,K,O,E,_,A,D,M,N,X=qp(e=t)?ra(null):(n=P0(o=e),o.on("keyup compositionstart",me(nb,o)),q=n,($=o).on("keydown",function(e){var t,n,r;!1===e.isDefaultPrevented()&&(t=$,n=q,r=e,e=Mt().os,fb([{keyCode:ke.RIGHT,action:Te(ob,t,!0)},{keyCode:ke.LEFT,action:Te(ob,t,!1)},{keyCode:ke.UP,action:Te(ib,t,!1)},{keyCode:ke.DOWN,action:Te(ib,t,!0)},{keyCode:ke.RIGHT,action:Te(xb,t,!0)},{keyCode:ke.LEFT,action:Te(xb,t,!1)},{keyCode:ke.UP,action:Te(Cb,t,!1)},{keyCode:ke.DOWN,action:Te(Cb,t,!0)},{keyCode:ke.RIGHT,action:Te(db,t,!0)},{keyCode:ke.LEFT,action:Te(db,t,!1)},{keyCode:ke.UP,action:Te(mb,t,!1)},{keyCode:ke.DOWN,action:Te(mb,t,!0)},{keyCode:ke.RIGHT,action:Te(z0,t,n,!0)},{keyCode:ke.LEFT,action:Te(z0,t,n,!1)},{keyCode:ke.RIGHT,ctrlKey:!e.isOSX(),altKey:e.isOSX(),action:Te(fy,t,n)},{keyCode:ke.LEFT,ctrlKey:!e.isOSX(),altKey:e.isOSX(),action:Te(dy,t,n)},{keyCode:ke.UP,action:Te(lb,t,!1)},{keyCode:ke.DOWN,action:Te(lb,t,!0)}],r).each(function(e){r.preventDefault()}))}),W=n,(w=o).on("keydown",function(e){var t,n;!1===e.isDefaultPrevented()&&(t=W,n=e,fb([{keyCode:ke.BACKSPACE,action:Te(Y0,e=w,!1)},{keyCode:ke.BACKSPACE,action:Te(m1,e,!1)},{keyCode:ke.DELETE,action:Te(m1,e,!0)},{keyCode:ke.BACKSPACE,action:Te(a1,e,!1)},{keyCode:ke.DELETE,action:Te(a1,e,!0)},{keyCode:ke.BACKSPACE,action:Te(H0,e,t,!1)},{keyCode:ke.DELETE,action:Te(H0,e,t,!0)},{keyCode:ke.BACKSPACE,action:Te(rg,e,!1)},{keyCode:ke.DELETE,action:Te(rg,e,!0)},{keyCode:ke.BACKSPACE,action:Te(g1,e,!1)},{keyCode:ke.DELETE,action:Te(g1,e,!0)},{keyCode:ke.BACKSPACE,action:Te(W0,e,!1)},{keyCode:ke.DELETE,action:Te(W0,e,!0)},{keyCode:ke.BACKSPACE,action:Te(Qv,e,!1)},{keyCode:ke.DELETE,action:Te(Qv,e,!0)},{keyCode:ke.BACKSPACE,action:Te(Jv,e,!1)},{keyCode:ke.DELETE,action:Te(Jv,e,!0)},{keyCode:ke.BACKSPACE,action:Te(j0,e,!1)},{keyCode:ke.DELETE,action:Te(j0,e,!0)}],n).each(function(e){n.preventDefault()}))}),w.on("keyup",function(e){var t;!1===e.isDefaultPrevented()&&(e=e,fb([{keyCode:ke.BACKSPACE,action:Te(d1,t=w)},{keyCode:ke.DELETE,action:Te(d1,t)}],e))}),(U=o).on("keydown",function(e){var t,n;e.keyCode===ke.ENTER&&(t=U,(n=e).isDefaultPrevented()||(n.preventDefault(),(e=t.undoManager).typing&&(e.typing=!1,e.add()),t.undoManager.transact(function(){!1===t.selection.isCollapsed()&&t.execCommand("Delete"),Qb(t,n)})))}),(j=o).on("keydown",function(e){var t;!1===e.isDefaultPrevented()&&(t=e,fb([{keyCode:ke.SPACEBAR,action:Te(oy,j)}],t).each(function(e){t.preventDefault()}))}),b=v=o,y=la(function(){b.composing||km(b)},0),wy.isIE()&&(b.on("keypress",function(e){y.throttle()}),b.on("remove",function(e){y.cancel()})),v.on("input",function(e){!1===e.isComposing&&km(v)}),V=n,(H=o).on("keydown",function(e){var t,n;!1===e.isDefaultPrevented()&&(t=V,n=e,fb([{keyCode:ke.END,action:Te(ub,e=H,!0)},{keyCode:ke.HOME,action:Te(ub,e,!1)},{keyCode:ke.END,action:Te(gb,e,!0)},{keyCode:ke.HOME,action:Te(gb,e,!1)},{keyCode:ke.END,action:Te(I0,e,!0,t)},{keyCode:ke.HOME,action:Te(I0,e,!1,t)}],n).each(function(e){n.preventDefault()}))}),p=o,F=n,xy.os.isOSX()||(h=ra(!1),p.on("keydown",function(e){ty(e)&&ny(h,p,!0)}),p.on("keyup",function(e){var t,n,r;!1===e.isDefaultPrevented()&&(r=e,fb([{keyCode:ke.PAGE_UP,action:Te(I0,t=p,!1,n=F)},{keyCode:ke.PAGE_DOWN,action:Te(I0,t,!0,n)}],r)),ty(e)&&h.get()&&(ny(h,p,!1),p.nodeChanged())})),n),e=((g=t).addCommand("delete",function(){var e,t=X;Y0(e=g)||m1(e,!1)||a1(e,!1)||H0(e,t,!1)||Jv(e,!1)||rg(e)||g1(e,!1)||W0(e,!1)||Qv(e)||j0(e,!1)||(J0(e,"Delete"),Vv(e))}),g.addCommand("forwardDelete",function(){var e,t=X;m1(e=g,!0)||a1(e,!0)||H0(e,t,!0)||Jv(e,!0)||rg(e)||g1(e,!0)||W0(e,!0)||Qv(e)||j0(e,!0)||J0(e,"ForwardDelete")}),yc(r=t)&&r.on("NodeChange",me(eb,r)),f=(l=t).dom,L=yc(l),d=l.getParam("placeholder",cs.getAttrib(l.getElement(),"placeholder"),"string"),m=function(e,t){var n,r,o,i,u;!function(e){var t;if(zv(e))return t=e.keyCode,!Bv(e)&&(ke.metaKeyPressed(e)||e.altKey||112<=t&&t<=123||Ee($1,t))}(e)&&(n=l.getBody(),r=!(zv(e=e)&&!(Bv(e)||"keyup"===e.type&&229===e.keyCode)||(e=f,r=n,o=L,!Qr(xe.fromDom(r),!1))||(i=""===o,(u=r.firstElementChild)&&(e.getStyle(r.firstElementChild,"padding-left")||e.getStyle(r.firstElementChild,"padding-right")||(i?e.isBlock(u):o!==u.nodeName.toLowerCase())))),""!==f.getAttrib(n,q1)==r&&!t||(f.setAttrib(n,q1,r?d:null),f.setAttrib(n,"aria-placeholder",r?d:null),l.fire("PlaceholderToggle",{state:r}),l.on(r?"keydown":"keyup",m),l.off(r?"keyup":"keydown",m)))},d&&l.on("init",function(e){m(e,!0),l.on("change SetContent ExecCommand",m),l.on("paste",function(e){return zr.setEditorTimeout(l,function(){return m(e)})})}),he((x=G=t).plugins,"rtc").bind(function(e){return ve.from(e.setup)}).fold(function(){return x.rtcInstance=$p(G),ve.none()},function(e){var t,n;return x.rtcInstance=(t=fe(null),n=fe(""),{undoManager:{beforeChange:le,add:t,undo:t,redo:t,clear:le,reset:le,hasUndo:ge,hasRedo:ge,transact:t,ignore:le,extra:le},formatter:{match:ge,matchAll:fe([]),matchNode:fe(void 0),canApply:ge,closest:n,apply:le,remove:le,toggle:le,formatChanged:fe({unbind:le})},editor:{getContent:n,setContent:n,insertContent:le,addVisual:le},selection:{getContent:n},raw:{getModel:fe(ve.none())}}),ve.some(function(){return e().then(function(e){return x.rtcInstance=(i=e.undoManager,u=e.formatter,n=e.editor,r=e.selection,t=e.raw,{undoManager:{beforeChange:i.beforeChange,add:i.add,undo:i.undo,redo:i.redo,clear:i.clear,reset:i.reset,hasUndo:i.hasUndo,hasRedo:i.hasRedo,transact:function(e,t,n){return i.transact(n)},ignore:function(e,t){return i.ignore(t)},extra:function(e,t,n,r){return i.extra(n,r)}},formatter:{match:function(e,t,n,r){return u.match(e,o(t),r)},matchAll:u.matchAll,matchNode:u.matchNode,canApply:function(e){return u.canApply(e)},closest:function(e){return u.closest(e)},apply:function(e,t,n){return u.apply(e,o(t))},remove:function(e,t,n,r){return u.remove(e,o(t))},toggle:function(e,t,n){return u.toggle(e,o(t))},formatChanged:function(e,t,n,r,o){return u.formatChanged(t,n,r,o)}},editor:{getContent:function(e,t){return n.getContent(e)},setContent:function(e,t){return n.setContent(e,t)},insertContent:function(e,t){return n.insertContent(e)},addVisual:n.addVisual},selection:{getContent:function(e,t){return r.getContent(t)}},raw:{getModel:function(){return ve.some(t.getRawModel())}}}),e.rtc.isRemote;function o(e){return Oe(e)?e:{}}var i,u,n,r,t})})}));function R(e,t){try{S.getDoc().execCommand(e,!1,t)}catch(e){}}function z(e){return e.isDefaultPrevented()}function B(){S.shortcuts.add("meta+a",null,"SelectAll")}function Y(){S.inline||O.bind(S.getDoc(),"mousedown mouseup",function(e){var t;e.target===S.getDoc().documentElement&&(t=E.getRng(),S.getBody().focus(),"mousedown"===e.type?Ur(t.startContainer)||E.placeCaretAt(e.clientX,e.clientY):E.setRng(t))})}function J(){Range.prototype.getClientRects||S.on("mousedown",function(e){var t;z(e)||"HTML"!==e.target.nodeName||((t=S.getBody()).blur(),zr.setEditorTimeout(S,function(){t.focus()}))})}function Z(){S.on("click",function(e){var t=e.target;/^(IMG|HR)$/.test(t.nodeName)&&"false"!==O.getContentEditableParent(t)&&(e.preventDefault(),S.selection.select(t),S.nodeChanged()),"A"===t.nodeName&&O.hasClass(t,"mce-item-anchor")&&(e.preventDefault(),E.select(t))})}function Q(){S.on("keydown",function(e){if(!z(e)&&e.keyCode===T&&E.isCollapsed()&&0===E.getRng().startOffset){var t=E.getNode().previousSibling;if(t&&t.nodeName&&"table"===t.nodeName.toLowerCase())return e.preventDefault(),!1}})}function ee(){S.getParam("readonly")||S.on("BeforeExecCommand mousedown",function(){R("StyleWithCSS",!1),R("enableInlineTableEditing",!1),Ec(S)||R("enableObjectResizing",!1)})}function te(){S.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")}function ne(){S.inline||S.on("keydown",function(){document.activeElement===document.body&&S.getWin().focus()})}function re(){S.inline||(S.contentStyles.push("body {min-height: 150px}"),S.on("click",function(e){"HTML"===e.target.nodeName&&(11<ye.ie?S.getBody().focus():(e=S.selection.getRng(),S.getBody().focus(),S.selection.setRng(e),S.selection.normalize(),S.nodeChanged()))}))}function oe(){ye.mac&&S.on("keydown",function(e){!ke.metaKeyPressed(e)||e.shiftKey||37!==e.keyCode&&39!==e.keyCode||(e.preventDefault(),S.selection.getSel().modify("move",37===e.keyCode?"backward":"forward","lineboundary"))})}function ie(){S.on("click",function(e){var t=e.target;do{if("A"===t.tagName)return void e.preventDefault()}while(t=t.parentNode)}),S.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")}function ue(){S.on("init",function(){S.dom.bind(S.getBody(),"submit",function(e){e.preventDefault()})})}function ae(){var e=O.getAttribs(E.getStart().cloneNode(!1));return function(){var t=E.getStart();t!==S.getBody()&&(O.setAttrib(t,"style",null),k(e,function(e){t.setAttributeNode(e.cloneNode(!0))}))}}function ce(){return!E.isCollapsed()&&O.getParent(E.getStart(),O.isBlock)!==O.getParent(E.getEnd(),O.isBlock)}function se(e){var t=O.create("body"),e=e.cloneContents();return t.appendChild(e),E.serializer.serialize(t,{format:"html"})}M=(C=t).settings,o=C.getDoc(),n=C.getBody(),C.fire("PreInit"),M.browser_spellcheck||M.gecko_spellcheck||(o.body.spellcheck=!1,tw.setAttrib(n,"spellcheck","false")),C.quirks=(S=C,k=we.each,T=ke.BACKSPACE,K=ke.DELETE,O=S.dom,E=S.selection,o=S.parser,_=ye.gecko,r=ye.ie,N=ye.webkit,A="data:text/mce-internal,",D=r?"Text":"URL",r=le,qp(S)?(N&&(Y(),Z(),ue(),B(),ye.iOS)&&(ne(),re(),ie()),_&&(J(),ee(),te(),oe())):(S.on("keydown",function(e){if(!z(e)&&e.keyCode===ke.BACKSPACE){var t=(e=E.getRng()).startContainer,n=e.startOffset,r=O.getRoot(),o=t;if(e.collapsed&&0===n){for(;o&&o.parentNode&&o.parentNode.firstChild===o&&o.parentNode!==r;)o=o.parentNode;"BLOCKQUOTE"===o.tagName&&(S.formatter.toggle("blockquote",null,o),(e=O.createRng()).setStart(t,0),e.setEnd(t,0),E.setRng(e))}}}),S.on("keydown",function(e){var t,n,r=e.keyCode;z(e)||r!==K&&r!==T||(r=S.selection.isCollapsed(),t=S.getBody(),r&&!O.isEmpty(t))||!r&&(r=se(S.selection.getRng()),(n=O.createRng()).selectNode(S.getBody()),r!==se(n))||(e.preventDefault(),S.setContent(""),t.firstChild&&O.isBlock(t.firstChild)?S.selection.setCursorLocation(t.firstChild,0):S.selection.setCursorLocation(t,0),S.nodeChanged())}),ye.windowsPhone||S.on("keyup focusin mouseup",function(e){ke.modifierPressed(e)||E.normalize()},!0),N&&(Y(),Z(),yc(S)&&S.on("init",function(){R("DefaultParagraphSeparator",yc(S))}),ue(),Q(),o.addNodeFilter("br",function(e){for(var t=e.length;t--;)"Apple-interchange-newline"===e[t].attr("class")&&e[t].remove()}),(ye.iOS?(ne(),re(),ie):B)()),11<=ye.ie&&(re(),Q()),ye.ie&&(B(),R("AutoUrlDetect",!1),S.on("dragstart",function(e){var t;(e=e).dataTransfer&&(S.selection.isCollapsed()&&"IMG"===e.target.tagName&&E.select(e.target),0<(t=S.selection.getContent()).length)&&(t=A+escape(S.id)+","+escape(t),e.dataTransfer.setData(D,t))}),S.on("drop",function(e){var t;z(e)||(t=e.dataTransfer&&(t=e.dataTransfer.getData(D))&&0<=t.indexOf(A)?(t=t.substr(A.length).split(","),{id:unescape(t[0]),html:unescape(t[1])}):null)&&t.id!==S.id&&(e.preventDefault(),e=pf(e.x,e.y,S.getDoc()),E.setRng(e),e=t.html,S.queryCommandSupported("mceInsertClipboardContent")?S.execCommand("mceInsertClipboardContent",!1,{content:e,internal:!0}):S.execCommand("mceInsertContent",!1,e))})),_&&(S.on("keydown",function(e){var t,n;!z(e)&&e.keyCode===T&&S.getBody().getElementsByTagName("hr").length&&E.isCollapsed()&&0===E.getRng().startOffset&&(n=(t=E.getNode()).previousSibling,"HR"===t.nodeName?(O.remove(t),e.preventDefault()):n&&n.nodeName&&"hr"===n.nodeName.toLowerCase()&&(O.remove(n),e.preventDefault()))}),J(),S.on("keypress",function(e){var t;if(!z(e)&&(8===e.keyCode||46===e.keyCode)&&ce())return t=ae(),S.getDoc().execCommand("delete",!1,null),t(),e.preventDefault(),!1}),O.bind(S.getDoc(),"cut",function(e){var t;!z(e)&&ce()&&(t=ae(),zr.setEditorTimeout(S,function(){t()}))}),ee(),S.on("SetContent ExecCommand",function(e){"setcontent"!==e.type&&"mceInsertLink"!==e.command||k(O.select("a"),function(e){var t=e.parentNode,n=O.getRoot();if(t.lastChild===e){for(;t&&!O.isBlock(t);){if(t.parentNode.lastChild!==t||t===n)return;t=t.parentNode}O.add(t,"br",{"data-mce-bogus":1})}})}),te(),oe(),Q())),{refreshContentEditable:r,isHidden:function(){var e;return!(!_||S.removed||(e=S.selection.getSel())&&e.rangeCount&&0!==e.rangeCount)}}),C.fire("PostRender"),void 0!==(N=C.getParam("directionality",ca.isRtl()?"rtl":void 0))&&(n.dir=N),M.protect&&C.on("BeforeSetContent",function(t){we.each(M.protect,function(e){t.content=t.content.replace(e,function(e){return"\x3c!--mce:protected "+escape(e)+"--\x3e"})})}),C.on("SetContent",function(){C.addVisual(C.getBody())}),C.on("compositionstart compositionend",function(e){C.composing="compositionstart"===e.type}),e.fold(function(){Iy(t).then(function(){return Ly(t)})},function(e){t.setProgressState(!0),Iy(t).then(function(){e().then(function(e){t.setProgressState(!1),Ly(t)},function(e){t.notificationManager.open({type:"error",text:String(e)}),Ly(t)})})})}function Hy(e){return e.replace(/^\-/,"")}function Vy(e){return{editorContainer:e,iframeContainer:e,api:{}}}function jy(e){e.fire("ScriptsLoaded"),n=e,u=we.trim(Cc(n)),r=n.ui.registry.getAll().icons,q(be(be({},lv.get("default").icons),lv.get(u).icons),function(e,t){re(r,t)||n.ui.registry.addIcon(t,e)}),s=Ac(u=e),de(s)?(u.settings.theme=Hy(s),i=hv.get(s),u.theme=new i(u,hv.urls[s]),u.theme.init&&u.theme.init(u,hv.urls[s]||u.documentBaseUrl.replace(/\/$/,""),u.$)):u.theme={},o=[],we.each(Mc(t=e).split(/[ ,]/),function(e){ow(t,o,Hy(e))}),s=(i=e).getElement(),i.orgDisplay=s.style.display;var n,r,t,o,i,u=de(Ac(i))?i.theme.renderUI():O(Ac(i))?(w=(s=i).getElement(),(y=Ac(s)(s,w)).editorContainer.nodeType&&(y.editorContainer.id=y.editorContainer.id||s.id+"_parent"),y.iframeContainer&&y.iframeContainer.nodeType&&(y.iframeContainer.id=y.iframeContainer.id||s.id+"_iframecontainer"),y.height=y.iframeHeight||w.offsetHeight,y):(w=(s=i).getElement(),s.inline?Vy(null):(y=w,i=rw.create("div"),rw.insertAfter(i,y),Vy(i))),a=e,c=ve.from(u.api).getOr({}),s={show:ve.from(c.show).getOr(le),hide:ve.from(c.hide).getOr(le),disable:ve.from(c.disable).getOr(le),isDisabled:ve.from(c.isDisabled).getOr(ge),enable:function(){a.mode.isReadOnly()||ve.from(c.enable).map(N)}};a.ui=be(be({},a.ui),s);var l,f,d,m,g,p,h,v,b,y,w={editorContainer:u.editorContainer,iframeContainer:u.iframeContainer};e.editorContainer=w.editorContainer||null,(y=e).contentCSS=y.contentCSS.concat(V1(y,(u=(s=y).getParam("content_css"),de(u)?S(u.split(","),bt):x(u)?u:!1===u||s.inline?[]:["default"])),V1(y,Oc(y))),e.inline?Fy(e):(l=u=e,e=s=w,v=l.translate("Rich Text Area"),g=l.id,v=v,e.height,m=l.getParam("iframe_attrs",{}),On(d=xe.fromTag("iframe"),m),On(d,{id:g+"_ifr",frameBorder:"0",allowTransparency:"true",title:v}),ga(d,"tox-edit-area__iframe"),(b=d.dom).onload=function(){b.onload=null,l.fire("load")},f=l,m=b,v=!(document.domain===window.location.hostname||!ye.browser.isIE()||(g=kv("mce"),f[g]=function(){Fy(f)},g='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinymce.get("'+f.id+'");document.write(ed.iframeHTML);document.close();ed.'+g+"(true);})()",nw.setAttrib(m,"src",g),0)),l.contentAreaContainer=e.iframeContainer,l.iframeElement=b,l.iframeHTML=(m=(d=l).getParam("doctype","<!DOCTYPE html>")+"<html><head>",d.getParam("document_base_url","")!==d.documentBaseUrl&&(m+='<base href="'+d.documentBaseURI.getURI()+'" />'),m+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',g=vc(d,"body_id","tinymce"),p=vc(d,"body_class",""),h=d.translate(d.getParam("iframe_aria_text","Rich Text Area. Press ALT-0 for help.","string")),bc(d)&&(m+='<meta http-equiv="Content-Security-Policy" content="'+bc(d)+'" />'),m+('</head><body id="'+g+'" class="mce-content-body '+p+'" data-id="'+d.id)+'" aria-label="'+h+'"><br></body></html>'),nw.add(e.iframeContainer,b),m=v,s.editorContainer&&(nw.get(s.editorContainer).style.display=u.orgDisplay,u.hidden=nw.isHidden(s.editorContainer)),u.getElement().style.display="none",nw.setAttrib(u.id,"aria-hidden","true"),m||Fy(u))}function Uy(e){return"-"===e.charAt(0)}function Wy(t,e,n){return ve.from(e).filter(function(e){return 0<e.length&&!lv.has(e)}).map(function(e){return{url:t.editorManager.baseURL+"/icons/"+e+"/icons"+n+".js",name:ve.some(e)}})}function $y(s,l){function e(){var r,o,t,n,e,i,u=f,a=kc(e=s),c=e.getParam("language_url","","string");!1===ca.hasCode(a)&&"en"!==a&&(i=""!==c?c:e.editorManager.baseURL+"/langs/"+a+".js",u.add(i,le,void 0,function(){wv(e,"LanguageLoadError",xv("language",i,a))})),t=f,pe(function(e){for(var t=[],n=function(e){t.push(e)},r=0;r<e.length;r++)e[r].each(n);return t}([Wy(n=s,"default",l),ve.from(n.getParam("icons_url","","string")).filter(function(e){return 0<e.length}).map(function(e){return{url:e,name:ve.none()}}).orThunk(function(){return Wy(n,Cc(n),"")})]),function(e){t.add(e.url,le,void 0,function(){wv(n,"IconsLoadError",xv("icons",e.url,e.name.getOrUndefined()))})}),r=s,o=l,we.each(r.getParam("external_plugins"),function(e,t){pv.load(t,e,le,void 0,function(){Cv(r,e,t)}),r.settings.plugins+=" "+t}),we.each(Mc(r).split(/[ ,]/),function(e){var t,n;(e=we.trim(e))&&!pv.urls[e]&&(Uy(e)?(e=e.substr(1,e.length),t=pv.dependencies(e),we.each(t,function(e){var t=pv.createUrl({prefix:"plugins/",resource:e,suffix:"/plugin"+o+".js"},e);pv.load(t.resource,t,le,void 0,function(){Cv(r,t.prefix+t.resource+t.suffix,t.resource)})})):(n={prefix:"plugins/",resource:e,suffix:"/plugin"+o+".js"},pv.load(e,n,le,void 0,function(){Cv(r,n.prefix+n.resource+n.suffix,e)})))}),f.loadQueue(function(){s.removed||jy(s)},s,function(){s.removed||jy(s)})}var t,n,f=ta.ScriptLoader,r=f,o=l,i=Ac(t=s);de(i)?(Uy(i)||re(hv.urls,i)||((n=t.getParam("theme_url"))?hv.load(i,t.documentBaseURI.toAbsolute(n)):hv.load(i,"themes/"+i+"/theme"+o+".js")),r.loadQueue(function(){hv.waitFor(i,e)})):e()}function qy(i){return function(o,e){return ve.from(e).map(xe.fromDom).filter(Ln).bind(function(e){return n=i,t=o,r=e.dom,mg(xe.fromDom(r),function(e){return Rn(t=e,n).orThunk(function(){return"font"===Pt(t)?he(uw,n).bind(function(e){return _n(t,e)}):ve.none()});var t},function(e){return _(xe.fromDom(t),e)}).or((r=e.dom,ve.from(Ce.DOM.getStyle(r,i,!0))));var n,t,r}).getOr("")}}function Gy(e){return Kl(e.getBody()).map(function(e){e=e.container();return B(e)?e.parentNode:e})}function Ky(e,t){return t=s(ve.some,t),n=e=e,ve.from(n.selection.getRng()).bind(function(e){var t=n.getBody();return e.startContainer===t&&0===e.startOffset?ve.none():ve.from(n.selection.getStart(!0))}).orThunk(me(Gy,e)).map(xe.fromDom).filter(Ln).bind(t);var n}function Xy(e,t){var n,r;return/^[0-9.]+$/.test(t)&&1<=(n=parseInt(t,10))&&n<=7?(r=we.explode(e.getParam("font_size_style_values","xx-small,x-small,small,medium,large,x-large,xx-large")),(e=we.explode(e.getParam("font_size_classes","")))?e[n-1]||t:r[n-1]||t):t}var Yy=D,Jy=tr,Zy=function(e){e.on(function(e){_y(e.ghost)}),e.clear()},Qy=tr,ew=D,tw=Ce.DOM,nw=Ce.DOM,rw=Ce.DOM,ow=function(t,n,e){var r=pv.get(e),o=pv.urls[e]||t.documentBaseUrl.replace(/\/$/,"");if(e=we.trim(e),r&&-1===we.inArray(n,e)&&(we.each(pv.dependencies(e),function(e){ow(t,n,e)}),!t.plugins[e]))try{var i=new r(t,o,t.$);(t.plugins[e]=i).init&&(i.init(t,o),n.push(e))}catch(r){i=e,o=r,lf(e=t,"PluginLoadError",{message:i=ca.translate(["Failed to initialize plugin: {0}",i])}),F1(i,o),yv(e,i)}},iw=Ce.DOM,uw={"font-size":"size","font-family":"face"},aw=qy("font-size"),cw=c(function(e){return e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,",")},qy("font-family")),sw=we.each,lw=we.map,fw=we.inArray,dw=(mw.prototype.execCommand=function(t,n,r,e){var o,i,u=!1,a=this;if(!a.editor.removed){if("mcefocus"!==t.toLowerCase()&&(/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(t)||e&&e.skip_focus?nd(i=a.editor).each(function(e){return i.selection.setRng(e)}):a.editor.focus()),(e=a.editor.fire("BeforeExecCommand",{command:t,ui:n,value:r})).isDefaultPrevented())return!1;var c=t.toLowerCase();if(o=a.commands.exec[c])return o(c,n,r),a.editor.fire("ExecCommand",{command:t,ui:n,value:r}),!0;if(sw(this.editor.plugins,function(e){if(e.execCommand&&e.execCommand(t,n,r))return a.editor.fire("ExecCommand",{command:t,ui:n,value:r}),!(u=!0)}),u)return u;if(a.editor.theme&&a.editor.theme.execCommand&&a.editor.theme.execCommand(t,n,r))return a.editor.fire("ExecCommand",{command:t,ui:n,value:r}),!0;try{u=a.editor.getDoc().execCommand(t,n,r)}catch(e){}return!!u&&(a.editor.fire("ExecCommand",{command:t,ui:n,value:r}),!0)}},mw.prototype.queryCommandState=function(e){var t;if(!this.editor.quirks.isHidden()&&!this.editor.removed){if(e=e.toLowerCase(),t=this.commands.state[e])return t(e);try{return this.editor.getDoc().queryCommandState(e)}catch(e){}return!1}},mw.prototype.queryCommandValue=function(e){var t;if(!this.editor.quirks.isHidden()&&!this.editor.removed){if(e=e.toLowerCase(),t=this.commands.value[e])return t(e);try{return this.editor.getDoc().queryCommandValue(e)}catch(e){}}},mw.prototype.addCommands=function(e,n){void 0===n&&(n="exec");var r=this;sw(e,function(t,e){sw(e.toLowerCase().split(","),function(e){r.commands[n][e]=t})})},mw.prototype.addCommand=function(e,o,i){var u=this;e=e.toLowerCase(),this.commands.exec[e]=function(e,t,n,r){return o.call(i||u.editor,t,n,r)}},mw.prototype.queryCommandSupported=function(e){if(e=e.toLowerCase(),this.commands.exec[e])return!0;try{return this.editor.getDoc().queryCommandSupported(e)}catch(e){}return!1},mw.prototype.addQueryStateHandler=function(e,t,n){var r=this;e=e.toLowerCase(),this.commands.state[e]=function(){return t.call(n||r.editor)}},mw.prototype.addQueryValueHandler=function(e,t,n){var r=this;e=e.toLowerCase(),this.commands.value[e]=function(){return t.call(n||r.editor)}},mw.prototype.hasCustomCommand=function(e){return e=e.toLowerCase(),!!this.commands.exec[e]},mw.prototype.execNativeCommand=function(e,t,n){return void 0===t&&(t=!1),void 0===n&&(n=null),this.editor.getDoc().execCommand(e,t,n)},mw.prototype.isFormatMatch=function(e){return this.editor.formatter.match(e)},mw.prototype.toggleFormat=function(e,t){this.editor.formatter.toggle(e,t),this.editor.nodeChanged()},mw.prototype.storeSelection=function(e){this.selectionBookmark=this.editor.selection.getBookmark(e)},mw.prototype.restoreSelection=function(){this.editor.selection.moveToBookmark(this.selectionBookmark)},mw.prototype.setupCommands=function(i){var r=this;function e(t){return function(){var e=i.selection,e=e.isCollapsed()?[i.dom.getParent(e.getNode(),i.dom.isBlock)]:e.getSelectedBlocks(),e=lw(e,function(e){return!!i.formatter.matchNode(e,t)});return-1!==fw(e,!0)}}this.addCommands({"mceResetDesignMode,mceBeginUndoLevel":le,"mceEndUndoLevel,mceAddUndoLevel":function(){i.undoManager.add()},mceFocus:function(e,t,n){i.removed||(n?Od:function(t){var e=t.selection,n=t.getBody(),r=e.getRng();t.quirks.refreshContentEditable(),void 0!==t.bookmark&&!1===cd(t)&&nd(t).each(function(e){t.selection.setRng(e),r=e});o=t,e=e.getNode();var o,e=o.dom.getParent(e,function(e){return"true"===o.dom.getContentEditable(e)});if(t.$.contains(n,e))return ad(e),ud(t,r),Od(t);t.inline||(ye.opera||ad(n),t.getWin().focus()),(ye.gecko||t.inline)&&(ad(n),ud(t,r)),Od(t)})(i)},"Cut,Copy,Paste":function(e){var t,n=i.getDoc();try{r.execNativeCommand(e)}catch(e){t=!0}!(t="paste"===e&&!n.queryCommandEnabled(e)||t)&&n.queryCommandSupported(e)||(t=i.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead."),ye.mac&&(t=t.replace(/Ctrl\+/g,"+")),i.notificationManager.open({text:t,type:"error"}))},unlink:function(){var e;i.selection.isCollapsed()?(e=i.dom.getParent(i.selection.getStart(),"a"))&&i.dom.remove(e,!0):i.formatter.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone":function(e){var t=e.substring(7);"full"===t&&(t="justify"),sw("left,center,right,justify".split(","),function(e){t!==e&&i.formatter.remove("align"+e)}),"none"!==t&&r.toggleFormat("align"+t)},"InsertUnorderedList,InsertOrderedList":function(e){r.execNativeCommand(e);var t,e=i.dom.getParent(i.selection.getNode(),"ol,ul");e&&(t=e.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(t.nodeName))&&(r.storeSelection(),i.dom.split(t,e),r.restoreSelection())},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){r.toggleFormat(e)},"ForeColor,HiliteColor":function(e,t,n){r.toggleFormat(e,{value:n})},FontName:function(e,t,n){var r,n=Xy(r=i,n);r.formatter.toggle("fontname",{value:S(n.split(/\s*,\s*/),function(e){return-1===e.indexOf(" ")||vt(e,'"')||vt(e,"'")?e:"'"+e+"'"}).join(",")}),r.nodeChanged()},FontSize:function(e,t,n){var r;(r=i).formatter.toggle("fontsize",{value:Xy(r,n)}),r.nodeChanged()},LineHeight:function(e,t,n){var r;(r=i).formatter.toggle("lineheight",{value:String(n)}),r.nodeChanged()},Lang:function(e,t,n){r.toggleFormat(e,{value:n.code,customValue:n.customCode})},RemoveFormat:function(e){i.formatter.remove(e)},mceBlockQuote:function(){r.toggleFormat("blockquote")},FormatBlock:function(e,t,n){return r.toggleFormat(n||"p")},mceCleanup:function(){var e=i.selection.getBookmark();i.setContent(i.getContent()),i.selection.moveToBookmark(e)},mceRemoveNode:function(e,t,n){n=n||i.selection.getNode();n!==i.getBody()&&(r.storeSelection(),i.dom.remove(n,!0),r.restoreSelection())},mceSelectNodeDepth:function(e,t,n){var r=0;i.dom.getParent(i.selection.getNode(),function(e){if(1===e.nodeType&&r++===n)return i.selection.select(e),!1},i.getBody())},mceSelectNode:function(e,t,n){i.selection.select(n)},mceInsertContent:function(e,t,n){var r,o=i,n="string"==typeof(n=n)?{content:n,details:{}}:(r=we.extend({paste:n.paste,data:{paste:n.paste}},n),{content:n.content,details:r});Gp(o).editor.insertContent(n.content,n.details)},mceInsertRawHTML:function(e,t,n){i.selection.setContent("tiny_mce_marker");var r=i.getContent();i.setContent(r.replace(/tiny_mce_marker/g,function(){return n}))},mceInsertNewLine:function(e,t,n){Qb(i,n)},mceToggleFormat:function(e,t,n){r.toggleFormat(n)},mceSetContent:function(e,t,n){i.setContent(n)},"Indent,Outdent":function(e){X0(i,e)},mceRepaint:le,InsertHorizontalRule:function(){i.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){i.hasVisual=!i.hasVisual,i.addVisual()},mceReplaceContent:function(e,t,n){i.execCommand("mceInsertContent",!1,n.replace(/\{\$selection\}/g,i.selection.getContent({format:"text"})))},mceInsertLink:function(e,t,n){"string"==typeof n&&(n={href:n});var r=i.dom.getParent(i.selection.getNode(),"a");n.href=n.href.replace(/ /g,"%20"),r&&n.href||i.formatter.remove("link"),n.href&&i.formatter.apply("link",n,r)},selectAll:function(){var e,t=i.dom.getParent(i.selection.getStart(),tr);t&&((e=i.dom.createRng()).selectNodeContents(t),i.selection.setRng(e))},mceNewDocument:function(){i.setContent("")},InsertLineBreak:function(e,t,n){return Vb(i,n),!0}}),r.addCommands({JustifyLeft:e("alignleft"),JustifyCenter:e("aligncenter"),JustifyRight:e("alignright"),JustifyFull:e("alignjustify"),"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){return r.isFormatMatch(e)},mceBlockQuote:function(){return r.isFormatMatch("blockquote")},Outdent:function(){return G0(i)},"InsertUnorderedList,InsertOrderedList":function(e){var t=i.dom.getParent(i.selection.getNode(),"ul,ol");return t&&("insertunorderedlist"===e&&"UL"===t.tagName||"insertorderedlist"===e&&"OL"===t.tagName)}},"state"),r.addCommands({Undo:function(){i.undoManager.undo()},Redo:function(){i.undoManager.redo()}}),r.addQueryValueHandler("FontName",function(){return Ky(t=i,function(e){return cw(t.getBody(),e.dom)}).getOr("");var t},this),r.addQueryValueHandler("FontSize",function(){return Ky(t=i,function(e){return aw(t.getBody(),e.dom)}).getOr("");var t},this),r.addQueryValueHandler("LineHeight",function(){return Ky(t=i,function(n){var e=xe.fromDom(t.getBody());return mg(n,function(e){return Rn(e,"line-height")},me(_,e)).getOrThunk(function(){var e=parseFloat(Nn(n,"line-height")),t=parseFloat(Nn(n,"font-size"));return String(e/t)})}).getOr("");var t},this)},mw);function mw(e){this.commands={state:{},exec:{},value:{}},this.editor=e,this.setupCommands(e)}function gw(e,t,n){try{e.getDoc().execCommand(t,!1,String(n))}catch(e){}}function pw(e,t){e.dom.contentEditable=t?"true":"false"}function hw(e,t){var n,r,o,i,u,a,c,s,l=xe.fromDom(e.getBody());i=t,pa(r=l,o="mce-content-readonly")&&!1===i?(a=o,ma(u=r)?u.dom.classList.remove(a):(c=a,0<(s=z(da(a=u,"class"),function(e){return e!==c})).length?Tn(a,"class",s.join(" ")):Dn(a,"class")),0===(ma(s=u)?s.dom.classList:da(s,"class")).length&&Dn(s,"class")):i&&ga(r,o),t?(e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),ve.from(e.selection.getNode()).each(function(e){e.removeAttribute("data-mce-selected")}),pw(l,!(e.readonly=!0)),pe(ha(l,'*[contenteditable="true"]'),function(e){Tn(e,yw,"true"),pw(e,!1)})):(pw(l,!(e.readonly=!1)),pe(ha(l,"*["+yw+'="true"]'),function(e){Dn(e,yw),pw(e,!0)}),gw(e,"StyleWithCSS",!1),gw(e,"enableInlineTableEditing",!1),gw(e,"enableObjectResizing",!1),(cd(a=e)||(n=a,Gf(Wn(xe.fromDom(n.getElement()))).filter(function(e){return!(void 0!==(t=e.dom.classList)&&(t.contains("tox-edit-area")||t.contains("tox-edit-area__iframe")||t.contains("mce-content-body")))&&rd(n,e.dom);var t}).isSome()))&&e.focus(),e.selection.setRng(e.selection.getRng()),e.nodeChanged())}function vw(e){return e.readonly}function bw(t){t.parser.addAttributeFilter("contenteditable",function(e){vw(t)&&pe(e,function(e){e.attr(yw,e.attr("contenteditable")),e.attr("contenteditable","false")})}),t.serializer.addAttributeFilter(yw,function(e){vw(t)&&pe(e,function(e){e.attr("contenteditable",e.attr(yw))})}),t.serializer.addTempAttr(yw)}var yw="data-mce-contenteditable",ww=we.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," "),xw=(Cw.isNative=function(e){return!!ww[e.toLowerCase()]},Cw.prototype.fire=function(e,t){var n=e.toLowerCase(),r=po(n,t||{},this.scope),o=(this.settings.beforeFire&&this.settings.beforeFire(r),this.bindings[n]);if(o)for(var i=0,u=o.length;i<u;i++){var a=o[i];if(!a.removed){if(a.once&&this.off(n,a.func),r.isImmediatePropagationStopped())return r;if(!1===a.func.call(this.scope,r))return r.preventDefault(),r}}return r},Cw.prototype.on=function(e,t,n,r){if(t=!1===t?ge:t){var o={func:t,removed:!1};r&&we.extend(o,r);for(var i=e.toLowerCase().split(" "),u=i.length;u--;){var a=i[u],c=this.bindings[a];c||(c=[],this.toggleEvent(a,!0)),c=n?Ge([o],c,!0):Ge(Ge([],c,!0),[o],!1),this.bindings[a]=c}}return this},Cw.prototype.off=function(e,t){var n=this;if(e)for(var r=e.toLowerCase().split(" "),o=r.length;o--;){var i,u=r[o],a=this.bindings[u];if(!u)return q(this.bindings,function(e,t){n.toggleEvent(t,!1),delete n.bindings[t]}),this;a&&(t?(a=(i=V(a,function(e){return e.func===t})).fail,this.bindings[u]=a,pe(i.pass,function(e){e.removed=!0})):a.length=0,a.length||(this.toggleEvent(e,!1),delete this.bindings[u]))}else q(this.bindings,function(e,t){n.toggleEvent(t,!1)}),this.bindings={};return this},Cw.prototype.once=function(e,t,n){return this.on(e,t,n,{once:!0})},Cw.prototype.has=function(e){return e=e.toLowerCase(),!(!this.bindings[e]||0===this.bindings[e].length)},Cw);function Cw(e){this.bindings={},this.settings=e||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||ge}function Sw(n){return n._eventDispatcher||(n._eventDispatcher=new xw({scope:n,toggleEvent:function(e,t){xw.isNative(e)&&n.toggleNativeEvent&&n.toggleNativeEvent(e,t)}})),n._eventDispatcher}function kw(e,t){return"selectionchange"===t?e.getDoc():!e.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(t)?e.getDoc().documentElement:(t=_c(e))?(e.eventRoot||(e.eventRoot=Dw.select(t)[0]),e.eventRoot):e.getBody()}function Tw(e,t,n){var r,o,i,u;e.hidden||vw(e)?vw(e)&&(r=e,"click"!==(o=n).type||ke.metaKeyPressed(o)||(i=xe.fromDom(o.target),u=r,Tr(i,"a",function(e){return _(e,xe.fromDom(u.getBody()))}).bind(function(e){return _n(e,"href")}).each(function(e){var t;o.preventDefault(),/^#/.test(e)?(t=r.dom.select(e+',[name="'+(vt(t=e,"#")?t.substring("#".length):t)+'"]')).length&&r.selection.scrollIntoView(t[0],!0):window.open(e,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")}))):e.fire(t,n)}function Ow(i,u){var e,t;i.delegates||(i.delegates={}),i.delegates[u]||i.removed||(t=kw(i,u),_c(i)?(Aw||(Aw={},i.editorManager.on("removeEditor",function(){i.editorManager.activeEditor||Aw&&(q(Aw,function(e,t){i.dom.unbind(kw(i,t))}),Aw=null)})),Aw[u]||(Aw[u]=e=function(e){for(var t=e.target,n=i.editorManager.get(),r=n.length;r--;){var o=n[r].getBody();o!==t&&!Dw.isChildOf(t,o)||Tw(n[r],u,e)}},Dw.bind(t,u,e))):(Dw.bind(t,u,e=function(e){Tw(i,u,e)}),i.delegates[u]=e))}function Ew(e,t,n,r){var o=n[t.get()],n=n[r];try{n.activate()}catch(e){return void console.error("problem while activating editor mode "+r+":",e)}o.deactivate(),o.editorReadOnly!==n.editorReadOnly&&hw(e,n.editorReadOnly),t.set(r),e.fire("SwitchMode",{mode:r})}function _w(e){var t,n={},r=(Rw(zw(e.toLowerCase(),"+"),function(e){e in Pw?n[e]=!0:/^[0-9]{2,}$/.test(e)?n.keyCode=parseInt(e,10):(n.charCode=e.charCodeAt(0),n.keyCode=Bw[e]||e.toUpperCase().charCodeAt(0))}),[n.keyCode]);for(t in Pw)n[t]?r.push(t):n[t]=!1;return n.id=r.join(","),n.access&&(n.alt=!0,ye.mac?n.ctrl=!0:n.shift=!0),n.meta&&(ye.mac?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n}var Aw,Rt={fire:function(e,t,n){if(this.removed&&"remove"!==e&&"detach"!==e)return t;var r=Sw(this).fire(e,t);if(!1!==n&&this.parent)for(var o=this.parent();o&&!r.isPropagationStopped();)o.fire(e,r,!1),o=o.parent();return r},on:function(e,t,n){return Sw(this).on(e,t,n)},off:function(e,t){return Sw(this).off(e,t)},once:function(e,t){return Sw(this).once(e,t)},hasEventListeners:function(e){return Sw(this).has(e)}},Dw=Ce.DOM,Mw=be(be({},Rt),{bindPendingEventDelegates:function(){var t=this;we.each(t._pendingNativeEvents,function(e){Ow(t,e)})},toggleNativeEvent:function(e,t){var n=this;"focus"===e||"blur"===e||n.removed||(t?n.initialized?Ow(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&(n.dom.unbind(kw(n,e),e,n.delegates[e]),delete n.delegates[e]))},unbindAllNativeEvents:function(){var n=this,e=n.getBody(),t=n.dom;n.delegates&&(q(n.delegates,function(e,t){n.dom.unbind(kw(n,t),t,e)}),delete n.delegates),!n.inline&&e&&t&&(e.onload=null,t.unbind(n.getWin()),t.unbind(n.getDoc())),t&&(t.unbind(e),t.unbind(n.getContainer()))}}),Nw=["design","readonly"],Rw=we.each,zw=we.explode,Bw={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},Pw=we.makeMap("alt,ctrl,shift,meta,access"),Iw=(Lw.prototype.add=function(e,t,n,r){var o=this,i=o.normalizeCommandFunc(n);return Rw(zw(we.trim(e)),function(e){e=o.createShortcut(e,t,i,r);o.shortcuts[e.id]=e}),!0},Lw.prototype.remove=function(e){e=this.createShortcut(e);return!!this.shortcuts[e.id]&&(delete this.shortcuts[e.id],!0)},Lw.prototype.normalizeCommandFunc=function(e){var t=this,n=e;return"string"==typeof n?function(){t.editor.execCommand(n,!1,null)}:we.isArray(n)?function(){t.editor.execCommand(n[0],n[1],n[2])}:n},Lw.prototype.createShortcut=function(e,t,n,r){e=we.map(zw(e,">"),_w);return e[e.length-1]=we.extend(e[e.length-1],{func:n,scope:r||this.editor}),we.extend(e[0],{desc:this.editor.translate(t),subpatterns:e.slice(1)})},Lw.prototype.hasModifier=function(e){return e.altKey||e.ctrlKey||e.metaKey},Lw.prototype.isFunctionKey=function(e){return"keydown"===e.type&&112<=e.keyCode&&e.keyCode<=123},Lw.prototype.matchShortcut=function(e,t){return!!t&&t.ctrl===e.ctrlKey&&t.meta===e.metaKey&&t.alt===e.altKey&&t.shift===e.shiftKey&&!!(e.keyCode===t.keyCode||e.charCode&&e.charCode===t.charCode)&&(e.preventDefault(),!0)},Lw.prototype.executeShortcutAction=function(e){return e.func?e.func.call(e.scope):null},Lw);function Lw(e){this.shortcuts={},this.pendingPatterns=[],this.editor=e;var n=this;e.on("keyup keypress keydown",function(t){!n.hasModifier(t)&&!n.isFunctionKey(t)||t.isDefaultPrevented()||(Rw(n.shortcuts,function(e){if(n.matchShortcut(t,e))return n.pendingPatterns=e.subpatterns.slice(0),"keydown"===t.type&&n.executeShortcutAction(e),!0}),n.matchShortcut(t,n.pendingPatterns[0])&&(1===n.pendingPatterns.length&&"keydown"===t.type&&n.executeShortcutAction(n.pendingPatterns[0]),n.pendingPatterns.shift()))})}var Fw=Ce.DOM,Hw=we.extend,Vw=we.each,jw=we.resolve,Uw=ye.ie,Ww=(r.prototype.render=function(){var t,e,n,r,o=this,i=o.id;function u(){iw.unbind(window,"ready",u),o.render()}ca.setCode(kc(o)),pi.Event.domLoaded?o.getElement()&&ye.contentEditable&&(t=xe.fromDom(o.getElement()),e=U(t.dom.attributes,function(e,t){return e[t.name]=t.value,e},{}),o.on("remove",function(){H(t.dom.attributes,function(e){Dn(t,e.name)}),On(t,e)}),o.ui.styleSheetLoader=Br.forElement(t,{contentCssCors:(n=o).getParam("content_css_cors"),referrerPolicy:Sc(n)}),o.getParam("inline")?o.inline=!0:(o.orgVisibility=o.getElement().style.visibility,o.getElement().style.visibility="hidden"),(r=o.getElement().form||iw.getParent(i,"form"))&&(o.formElement=r,o.getParam("hidden_input")&&!Yn(o.getElement())&&(iw.insertAfter(iw.create("input",{type:"hidden",name:i}),i),o.hasHiddenInput=!0),o.formEventDelegate=function(e){o.fire(e.type,e)},iw.bind(r,"submit reset",o.formEventDelegate),o.on("reset",function(){o.resetContent()}),!o.getParam("submit_patch")||r.submit.nodeType||r.submit.length||r._mceOldSubmit||(r._mceOldSubmit=r.submit,r.submit=function(){return o.editorManager.triggerSave(),o.setDirty(!1),r._mceOldSubmit(r)})),o.windowManager=vv(o),o.notificationManager=Gh(o),"xml"===o.getParam("encoding")&&o.on("GetContent",function(e){e.save&&(e.content=iw.encode(e.content))}),o.getParam("add_form_submit_trigger")&&o.on("submit",function(){o.initialized&&o.save()}),o.getParam("add_unload_trigger")&&(o._beforeUnload=function(){!o.initialized||o.destroyed||o.isHidden()||o.save({format:"raw",no_events:!0,set_dirty:!1})},o.editorManager.on("BeforeUnload",o._beforeUnload)),o.editorManager.add(o),$y(o,o.suffix)):iw.bind(window,"ready",u)},r.prototype.focus=function(e){this.execCommand("mceFocus",!1,e)},r.prototype.hasFocus=function(){return cd(this)},r.prototype.execCallback=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r,o=this.settings[e];if(o)return this.callbackLookup&&(r=this.callbackLookup[e])&&(o=r.func,r=r.scope),"string"==typeof o&&(r=(r=o.replace(/\.\w+$/,""))?jw(r):0,o=jw(o),this.callbackLookup=this.callbackLookup||{},this.callbackLookup[e]={func:o,scope:r}),o.apply(r||this,t)},r.prototype.translate=function(e){return ca.translate(e)},r.prototype.getParam=function(e,t,n){return t=t,n=n,u=(e=e)in this.settings?this.settings[e]:t,"hash"===n?(i={},"string"==typeof(o=u)?pe(0<o.indexOf("=")?o.split(/[;,](?![^=;,]*(?:[;,]|$))/):o.split(","),function(e){e=e.split("=");1<e.length?i[we.trim(e[0])]=we.trim(e[1]):i[we.trim(e[0])]=we.trim(e[0])}):i=o,i):"string"===n?Uh(de,this,e).getOr(t):"number"===n?Uh(T,this,e).getOr(t):"boolean"===n?Uh(b,this,e).getOr(t):"object"===n?Uh(Oe,this,e).getOr(t):"array"===n?Uh(x,this,e).getOr(t):"string[]"===n?Uh((r=de,function(e){return x(e)&&Q(e,r)}),this,e).getOr(t):"function"===n?Uh(O,this,e).getOr(t):u;var r,o,i,u},r.prototype.hasPlugin=function(e,t){return!(!Ee(Mc(this).split(/[ ,]/),e)||t&&void 0===pv.get(e))},r.prototype.nodeChanged=function(e){this._nodeChangeDispatcher.nodeChanged(e)},r.prototype.addCommand=function(e,t,n){this.editorCommands.addCommand(e,t,n)},r.prototype.addQueryStateHandler=function(e,t,n){this.editorCommands.addQueryStateHandler(e,t,n)},r.prototype.addQueryValueHandler=function(e,t,n){this.editorCommands.addQueryValueHandler(e,t,n)},r.prototype.addShortcut=function(e,t,n,r){this.shortcuts.add(e,t,n,r)},r.prototype.execCommand=function(e,t,n,r){return this.editorCommands.execCommand(e,t,n,r)},r.prototype.queryCommandState=function(e){return this.editorCommands.queryCommandState(e)},r.prototype.queryCommandValue=function(e){return this.editorCommands.queryCommandValue(e)},r.prototype.queryCommandSupported=function(e){return this.editorCommands.queryCommandSupported(e)},r.prototype.show=function(){this.hidden&&(this.hidden=!1,this.inline?this.getBody().contentEditable="true":(Fw.show(this.getContainer()),Fw.hide(this.id)),this.load(),this.fire("show"))},r.prototype.hide=function(){var e=this,t=e.getDoc();e.hidden||(Uw&&t&&!e.inline&&t.execCommand("SelectAll"),e.save(),e.inline?(e.getBody().contentEditable="false",e===e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(Fw.hide(e.getContainer()),Fw.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.fire("hide"))},r.prototype.isHidden=function(){return!!this.hidden},r.prototype.setProgressState=function(e,t){this.fire("ProgressState",{state:e,time:t})},r.prototype.load=function(e){var t,n=this.getElement();return this.removed?"":n?((e=e||{}).load=!0,t=Yn(n)?n.value:n.innerHTML,t=this.setContent(t,e),e.element=n,e.no_events||this.fire("LoadContent",e),e.element=null,t):void 0},r.prototype.save=function(e){var t,n,r=this,o=r.getElement();if(o&&r.initialized&&!r.removed)return(e=e||{}).save=!0,e.element=o,e.content=r.getContent(e),e.no_events||r.fire("SaveContent",e),"raw"===e.format&&r.fire("RawSaveContent",e),t=e.content,Yn(o)?o.value=t:(!e.is_removing&&r.inline||(o.innerHTML=t),(n=Fw.getParent(r.id,"form"))&&Vw(n.elements,function(e){if(e.name===r.id)return e.value=t,!1})),e.element=o=null,!1!==e.set_dirty&&r.setDirty(!1),t},r.prototype.setContent=function(e,t){return Ih(this,e,t)},r.prototype.getContent=function(e){return t=(e=void 0===e?{}:e).format||"html",Gp(this).editor.getContent(e,t);var t},r.prototype.insertContent=function(e,t){t&&(e=Hw({content:e},t)),this.execCommand("mceInsertContent",!1,e)},r.prototype.resetContent=function(e){void 0===e?Ih(this,this.startContent,{format:"raw"}):Ih(this,e),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()},r.prototype.isDirty=function(){return!this.isNotDirty},r.prototype.setDirty=function(e){var t=!this.isNotDirty;this.isNotDirty=!e,e&&e!==t&&this.fire("dirty")},r.prototype.getContainer=function(){return this.container||(this.container=Fw.get(this.editorContainer||this.id+"_parent")),this.container},r.prototype.getContentAreaContainer=function(){return this.contentAreaContainer},r.prototype.getElement=function(){return this.targetElm||(this.targetElm=Fw.get(this.id)),this.targetElm},r.prototype.getWin=function(){var e;return this.contentWindow||(e=this.iframeElement)&&(this.contentWindow=e.contentWindow),this.contentWindow},r.prototype.getDoc=function(){var e;return this.contentDocument||(e=this.getWin())&&(this.contentDocument=e.document),this.contentDocument},r.prototype.getBody=function(){var e=this.getDoc();return this.bodyElement||(e?e.body:null)},r.prototype.convertURL=function(e,t,n){var r=this.settings;return r.urlconverter_callback?this.execCallback("urlconverter_callback",e,n,!0,t):!r.convert_urls||n&&"LINK"===n.nodeName||0===e.indexOf("file:")||0===e.length?e:r.relative_urls?this.documentBaseURI.toRelative(e):this.documentBaseURI.toAbsolute(e,r.remove_script_host)},r.prototype.addVisual=function(e){k(this).editor.addVisual(e)},r.prototype.remove=function(){var e,t,n,r,o;(e=this).removed||(t=e._selectionOverrides,n=e.editorUpload,r=e.getBody(),o=e.getElement(),r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&o&&ev.remove(o.nextSibling),e.fire("remove"),e.editorManager.remove(e),!e.inline&&r&&ev.setStyle(e.id,"display",e.orgDisplay),e.fire("detach"),ev.remove(e.getContainer()),Lh(t),Lh(n),e.destroy())},r.prototype.destroy=function(e){var t,n=(t=this).selection,r=t.dom;t.destroyed||(e||t.removed?(e||(t.editorManager.off("beforeunload",t._beforeUnload),t.theme&&t.theme.destroy&&t.theme.destroy(),Lh(n),Lh(r)),(n=(e=t).formElement)&&(n._mceOldSubmit&&(n.submit=n._mceOldSubmit,n._mceOldSubmit=null),ev.unbind(n,"submit reset",e.formEventDelegate)),(r=t).contentAreaContainer=r.formElement=r.container=r.editorContainer=null,r.bodyElement=r.contentDocument=r.contentWindow=null,r.iframeElement=r.targetElm=null,r.selection&&(r.selection=r.selection.win=r.selection.dom=r.selection.dom.doc=null),t.destroyed=!0):t.remove())},r.prototype.uploadImages=function(e){return this.editorUpload.uploadImages(e)},r.prototype._scanForImages=function(){return this.editorUpload.scanForImages()},r.prototype.addButton=function(){throw new Error("editor.addButton has been removed in tinymce 5x, use editor.ui.registry.addButton or editor.ui.registry.addToggleButton or editor.ui.registry.addSplitButton instead")},r.prototype.addSidebar=function(){throw new Error("editor.addSidebar has been removed in tinymce 5x, use editor.ui.registry.addSidebar instead")},r.prototype.addMenuItem=function(){throw new Error("editor.addMenuItem has been removed in tinymce 5x, use editor.ui.registry.addMenuItem instead")},r.prototype.addContextToolbar=function(){throw new Error("editor.addContextToolbar has been removed in tinymce 5x, use editor.ui.registry.addContextToolbar instead")},r);function r(e,t,n){var r,o,i,u,a,c,s,l,f,d,m,g,p,h,v=this;function b(n,r){return function(e,t){return n[e.toLowerCase()]=be(be({},t),{type:r})}}function y(e){return re(g,e)}this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.editorManager=n,this.documentBaseUrl=n.documentBaseURL,Hw(this,Mw),this.settings=(d=this.documentBaseUrl,f=n.defaultSettings,d=d,l=iv,d={id:e,theme:"silver",toolbar_mode:Vh(t=t,"floating"),plugins:"",document_base_url:d,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,inline_styles:!0,convert_fonts_to_spans:!0,indent:!0,indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",entity_encoding:"named",url_converter:this.convertURL,url_converter_scope:this},d=be(be({},d),l?sv:{}),!1!==(l=jh(uv||av,uv,d,f,t)).deprecation_warnings&&(d=l,m=f=t,f=z(nv,function(e){return re(m,e)}),!1!==(t=m.forced_root_block)&&""!==t||f.push("forced_root_block (false only)"),t=oe(f),g=we.makeMap(d.plugins," "),p=0<(f=oe(Ge(Ge([],z(rv,y),!0),Z(ov,function(e){return y(e)?[e+" (moving to premium)"]:[]}),!0))).length,h=0<t.length,d="mobile"===d.theme,(p||h||d)&&(d=d?"\n\nThemes:\n- mobile":"",p=p?"\n\nPlugins:\n- "+f.join("\n- "):"",f=h?"\n\nSettings:\n- "+t.join("\n- "):"",console.warn("The following deprecated features are currently enabled, these will be removed in TinyMCE 6.0. See https://www.tiny.cloud/docs/release-notes/6.0-upcoming-changes/ for more information."+d+p+f))),l),this.settings.suffix&&(n.suffix=this.settings.suffix),this.suffix=n.suffix,this.settings.base_url&&n._setBaseUrl(this.settings.base_url),this.baseUri=n.baseURI,this.settings.referrer_policy&&(ta.ScriptLoader._setReferrerPolicy(this.settings.referrer_policy),Ce.DOM.styleSheetLoader._setReferrerPolicy(this.settings.referrer_policy)),ia.languageLoad=this.settings.language_load,ia.baseURL=n.baseURL,this.id=e,this.setDirty(!1),this.documentBaseURI=new Eh(this.settings.document_base_url,{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=!!this.settings.inline,this.shortcuts=new Iw(this),this.editorCommands=new dw(this),this.settings.cache_suffix&&(ye.cacheSuffix=this.settings.cache_suffix.replace(/^[\?\&]+/,"")),this.ui={registry:{addAutocompleter:(u={},(h={addButton:b(r={},"button"),addGroupToolbarButton:b(r,"grouptoolbarbutton"),addToggleButton:b(r,"togglebutton"),addMenuButton:b(r,"menubutton"),addSplitButton:b(r,"splitbutton"),addMenuItem:b(o={},"menuitem"),addNestedMenuItem:b(o,"nestedmenuitem"),addToggleMenuItem:b(o,"togglemenuitem"),addAutocompleter:b(i={},"autocompleter"),addContextMenu:b(a={},"contextmenu"),addContextToolbar:b(c={},"contexttoolbar"),addContextForm:b(c,"contextform"),addSidebar:b(s={},"sidebar"),addIcon:function(e,t){return u[e.toLowerCase()]=t},getAll:function(){return{buttons:r,menuItems:o,icons:u,popups:i,contextMenus:a,contextToolbars:c,sidebars:s}}}).addAutocompleter),addButton:h.addButton,addContextForm:h.addContextForm,addContextMenu:h.addContextMenu,addContextToolbar:h.addContextToolbar,addIcon:h.addIcon,addMenuButton:h.addMenuButton,addMenuItem:h.addMenuItem,addNestedMenuItem:h.addNestedMenuItem,addSidebar:h.addSidebar,addSplitButton:h.addSplitButton,addToggleButton:h.addToggleButton,addGroupToolbarButton:h.addGroupToolbarButton,addToggleMenuItem:h.addToggleMenuItem,getAll:h.getAll},styleSheetLoader:void 0,show:le,hide:le,enable:le,disable:le,isDisabled:ge};S=ra("design"),k=ra({design:{activate:le,deactivate:le,editorReadOnly:!1},readonly:{activate:le,deactivate:le,editorReadOnly:!0}}),(x=w=this).serializer?bw(x):x.on("PreInit",function(){bw(x)}),(C=w).on("ShowCaret",function(e){vw(C)&&e.preventDefault()}),C.on("ObjectSelected",function(e){vw(C)&&e.preventDefault()});var w,x,C,S,k,t={isReadOnly:function(){return vw(w)},set:function(e){var t=w,n=k.get(),r=S,o=e;if(o!==r.get()){if(!re(n,o))throw new Error("Editor mode '"+o+"' is invalid");t.initialized?Ew(t,r,n,o):t.on("init",function(){return Ew(t,r,n,o)})}},get:function(){return S.get()},register:function(e,t){k.set(function(e,t,n){if(Ee(Nw,t))throw new Error("Cannot override default mode "+t);return be(be({},e),((e={})[t]=be(be({},n),{deactivate:function(){try{n.deactivate()}catch(e){console.error("problem while deactivating editor mode "+t+":",e)}}}),e))}(k.get(),e,t))}};this.mode=t,this.setMode=t.set,n.fire("SetupEditor",{editor:this}),this.execCallback("setup",this),this.$=X.overrideDefaults(function(){return{context:v.inline?v.getBody():v.getDoc(),element:v.getBody()}})}function $w(t){var n=t.type;Jw(ox.get(),function(e){switch(n){case"scroll":e.fire("ScrollWindow",t);break;case"resize":e.fire("ResizeWindow",t)}})}function qw(e){e!==ex&&(e?X(window).on("resize scroll",$w):X(window).off("resize scroll",$w),ex=e)}function Gw(t){var e=nx;delete tx[t.id];for(var n=0;n<tx.length;n++)if(tx[n]===t){tx.splice(n,1);break}return nx=z(nx,function(e){return t!==e}),ox.activeEditor===t&&(ox.activeEditor=0<nx.length?nx[0]:null),ox.focusedEditor===t&&(ox.focusedEditor=null),e.length!==nx.length}var Kw,Xw=Ce.DOM,Yw=we.explode,Jw=we.each,Zw=we.extend,Qw=0,ex=!1,tx=[],nx=[],rx="CSS1Compat"!==document.compatMode,ox=be(be({},Rt),{baseURI:null,baseURL:null,defaultSettings:{},documentBaseURL:null,suffix:null,$:X,majorVersion:"5",minorVersion:"10.9",releaseDate:"2023-11-15",editors:tx,i18n:ca,activeEditor:null,focusedEditor:null,settings:{},setup:function(){var e,t="",n=Eh.getDocumentBaseUrl(document.location),r=(/^[^:]+:\/\/\/?[^\/]+\//.test(n)&&(n=n.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(n)||(n+="/")),window.tinymce||window.tinyMCEPreInit);if(r)e=r.base||r.baseURL,t=r.suffix;else{for(var o,i=document.getElementsByTagName("script"),u=0;u<i.length;u++)if(""!==(o=i[u].src||"")){var a=o.substring(o.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(o)){-1!==a.indexOf(".min")&&(t=".min"),e=o.substring(0,o.lastIndexOf("/"));break}}!e&&document.currentScript&&(-1!==(o=document.currentScript.src).indexOf(".min")&&(t=".min"),e=o.substring(0,o.lastIndexOf("/")))}this.baseURL=new Eh(n).toAbsolute(e),this.documentBaseURL=n,this.baseURI=new Eh(this.baseURL),this.suffix=t,this.on("AddEditor",me(od,this)),this.on("RemoveEditor",me(id,this))},overrideDefaults:function(e){var t=e.base_url,t=(t&&this._setBaseUrl(t),e.suffix),t=(e.suffix&&(this.suffix=t),(this.defaultSettings=e).plugin_base_urls);void 0!==t&&q(t,function(e,t){ia.PluginManager.urls[t]=e})},init:function(u){function a(e){var t=e.id;return t||(t=he(e,"name").filter(function(e){return!Xw.get(e)}).getOrThunk(Xw.uniqueId),e.setAttribute("id",t)),t}function c(e,t){return t.constructor===RegExp?t.test(e.className):Xw.hasClass(e,t)}var n,s=this,l=we.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),f=function(e){n=e},t=function(){function n(e,t,n){e=new Ww(e,t,s);i.push(e),e.on("init",function(){++o===r.length&&f(i)}),e.targetElm=e.targetElm||n,e.render()}var r,e,o=0,i=[];Xw.unbind(window,"ready",t),(e=u.onpageload)&&e.apply(s,[]),r=X.unique(function(t){var n=[];if(ye.browser.isIE()&&ye.browser.version.major<11)return F1("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/"),[];if(rx)return F1("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[];if(t.types)Jw(t.types,function(e){n=n.concat(Xw.select(e.selector))});else{if(t.selector)return Xw.select(t.selector);if(t.target)return[t.target];switch(t.mode){case"exact":var e=t.elements||"";0<e.length&&Jw(Yw(e),function(t){var e=Xw.get(t);e?n.push(e):Jw(document.forms,function(e){Jw(e.elements,function(e){e.name===t&&(t="mce_editor_"+Qw++,Xw.setAttrib(e,"id",t),n.push(e))})})});break;case"textareas":case"specific_textareas":Jw(Xw.select("textarea"),function(e){t.editor_deselector&&c(e,t.editor_deselector)||t.editor_selector&&!c(e,t.editor_selector)||n.push(e)})}}return n}(u)),u.types?Jw(u.types,function(t){we.each(r,function(e){return!Xw.is(e,t.selector)||(n(a(e),Zw({},u,t),e),!1)})}):(we.each(r,function(e){(e=s.get(e.id))&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(Gw(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)}),0===(r=we.grep(r,function(e){return!s.get(e.id)})).length?f([]):Jw(r,function(e){var t=e;u.inline&&t.tagName.toLowerCase()in l?F1("Could not initialize inline editor on invalid inline target element",e):n(a(e),u,e)}))};return s.settings=u,Xw.bind(window,"ready",t),new Rr(function(t){n?t(n):f=function(e){t(e)}})},get:function(t){return 0===arguments.length?nx.slice(0):de(t)?$(nx,function(e){return e.id===t}).getOr(null):T(t)&&nx[t]||null},add:function(e){var n=this;return tx[e.id]===e||(null===n.get(e.id)&&("length"!==e.id&&(tx[e.id]=e),tx.push(e),nx.push(e)),qw(!0),n.activeEditor=e,n.fire("AddEditor",{editor:e}),Kw)||(Kw=function(e){var t=n.fire("BeforeUnload");if(t.returnValue)return e.preventDefault(),e.returnValue=t.returnValue,t.returnValue},window.addEventListener("beforeunload",Kw)),e},createEditor:function(e,t){return this.add(new Ww(e,t,this))},remove:function(e){var t,n,r=this;if(e){if(!de(e))return n=e,v(r.get(n.id))?null:(Gw(n)&&r.fire("RemoveEditor",{editor:n}),0===nx.length&&window.removeEventListener("beforeunload",Kw),n.remove(),qw(0<nx.length),n);Jw(Xw.select(e),function(e){(n=r.get(e.id))&&r.remove(n)})}else for(t=nx.length-1;0<=t;t--)r.remove(nx[t])},execCommand:function(e,t,n){var r=this.get(n);switch(e){case"mceAddEditor":return this.get(n)||new Ww(n,this.settings,this).render(),!0;case"mceRemoveEditor":return r&&r.remove(),!0;case"mceToggleEditor":return r?r.isHidden()?r.show():r.hide():this.execCommand("mceAddEditor",!1,n),!0}return!!this.activeEditor&&this.activeEditor.execCommand(e,t,n)},triggerSave:function(){Jw(nx,function(e){e.save()})},addI18n:function(e,t){ca.add(e,t)},translate:function(e){return ca.translate(e)},setActive:function(e){var t=this.activeEditor;this.activeEditor!==e&&(t&&t.fire("deactivate",{relatedTarget:e}),e.fire("activate",{relatedTarget:t})),this.activeEditor=e},_setBaseUrl:function(e){this.baseURL=new Eh(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new Eh(this.baseURL)}});function ix(e,t,n){var r=t.x,o=t.y,i=e.w,e=e.h,u=t.w,t=t.h,n=(n||"").split("");return"b"===n[0]&&(o+=t),"r"===n[1]&&(r+=u),"c"===n[0]&&(o+=gx(t/2)),"c"===n[1]&&(r+=gx(u/2)),"b"===n[3]&&(o-=e),"r"===n[4]&&(r-=i),"c"===n[3]&&(o-=gx(e/2)),"c"===n[4]&&(r-=gx(i/2)),ax(r,o,i,e)}function ux(){}function ax(e,t,n,r){return{x:e,y:t,w:n,h:r}}ox.setup();var cx,sx,lx,fx,dx=Math.min,mx=Math.max,gx=Math.round,xt={inflate:function(e,t,n){return ax(e.x-t,e.y-n,e.w+2*t,e.h+2*n)},relativePosition:ix,findBestRelativePosition:function(e,t,n,r){for(var o,i=0;i<r.length;i++)if((o=ix(e,t,r[i])).x>=n.x&&o.x+o.w<=n.w+n.x&&o.y>=n.y&&o.y+o.h<=n.h+n.y)return r[i];return null},intersect:function(e,t){var n=mx(e.x,t.x),r=mx(e.y,t.y),o=dx(e.x+e.w,t.x+t.w),e=dx(e.y+e.h,t.y+t.h);return o-n<0||e-r<0?null:ax(n,r,o-n,e-r)},clamp:function(e,t,n){var r=e.x,o=e.y,i=e.x+e.w,e=e.y+e.h,u=t.x+t.w,a=t.y+t.h,c=mx(0,t.x-r),t=mx(0,t.y-o),u=mx(0,i-u),a=mx(0,e-a);return r+=c,o+=t,n&&(i+=c,e+=t,r-=u,o-=a),ax(r,o,(i-=u)-r,(e-=a)-o)},create:ax,fromClientRect:function(e){return ax(e.left,e.top,e.width,e.height)}},t=(cx={},sx={},{load:function(c,s){var e,l='Script at URL "'+s+'" failed to load',f='Script at URL "'+s+"\" did not call `tinymce.Resource.add('"+c+"', data)` within 1 second";return void 0!==cx[c]?cx[c]:(e=new Rr(function(e,t){void 0===n&&(n=1e3),r=!1,o=null,e=a(e),i=a(t);var n,r,o,i,u={start:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r||null!==o||(o=setTimeout(function(){return i.apply(null,e)},n))},resolve:e,reject:i};function a(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r||(r=!0,null!==o&&(clearTimeout(o),o=null),n.apply(null,e))}}sx[c]=u.resolve,ta.ScriptLoader.loadScript(s,function(){return u.start(f)},function(){return u.reject(l)})}),cx[c]=e)},add:function(e,t){void 0!==sx[e]&&(sx[e](t),delete sx[e]),cx[e]=Rr.resolve(t)}}),px=we.each,hx=we.extend;ux.extend=lx=function(n){function r(){var e,t,n;if(!fx&&(this.init&&this.init.apply(this,arguments),t=this.Mixins))for(e=t.length;e--;)(n=t[e]).init&&n.init.apply(this,arguments)}function t(){return this}var o=this.prototype,i=(fx=!0,new this);return fx=!1,n.Mixins&&(px(n.Mixins,function(e){for(var t in e)"init"!==t&&(n[t]=e[t])}),o.Mixins)&&(n.Mixins=o.Mixins.concat(n.Mixins)),n.Methods&&px(n.Methods.split(","),function(e){n[e]=t}),n.Properties&&px(n.Properties.split(","),function(e){var t="_"+e;n[e]=function(e){return void 0!==e?(this[t]=e,this):this[t]}}),n.Statics&&px(n.Statics,function(e,t){r[t]=e}),n.Defaults&&o.Defaults&&(n.Defaults=hx({},o.Defaults,n.Defaults)),q(n,function(e,t){var n,r;"function"==typeof e&&o[t]?i[t]=(n=t,r=e,function(){var e=this._super,t=(this._super=o[n],r.apply(this,arguments));return this._super=e,t}):i[t]=e}),r.prototype=i,(r.constructor=r).extend=lx,r};var vx,bx,yx=Math.min,wx=Math.max,xx=Math.round,Cx={serialize:function(e){e=JSON.stringify(e);return de(e)?e.replace(/[\u0080-\uFFFF]/g,function(e){e=e.charCodeAt(0).toString(16);return"\\u"+"0000".substring(e.length)+e}):e},parse:function(e){try{return JSON.parse(e)}catch(e){}}},Nt={callbacks:{},count:0,send:function(t){var n=this,r=Ce.DOM,o=(void 0!==t.count?t:n).count,i="tinymce_jsonp_"+o;n.callbacks[o]=function(e){r.remove(i),delete n.callbacks[o],t.callback(e)},r.add(r.doc.body,"script",{id:i,src:t.url,type:"text/javascript"}),n.count++}},Sx=be(be({},Rt),{send:function(e){var t,n=0,r=function(){!e.async||4===t.readyState||1e4<n++?(e.success&&n<1e4&&200===t.status?e.success.call(e.success_scope,""+t.responseText,t,e):e.error&&e.error.call(e.error_scope,1e4<n?"TIMED_OUT":"GENERAL",t,e),t=null):zr.setTimeout(r,10)};if(e.scope=e.scope||this,e.success_scope=e.success_scope||e.scope,e.error_scope=e.error_scope||e.scope,e.async=!1!==e.async,e.data=e.data||"",Sx.fire("beforeInitialize",{settings:e}),(t=new XMLHttpRequest).overrideMimeType&&t.overrideMimeType(e.content_type),t.open(e.type||(e.data?"POST":"GET"),e.url,e.async),e.crossDomain&&(t.withCredentials=!0),e.content_type&&t.setRequestHeader("Content-Type",e.content_type),e.requestheaders&&we.each(e.requestheaders,function(e){t.setRequestHeader(e.key,e.value)}),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),(t=Sx.fire("beforeSend",{xhr:t,settings:e}).xhr).send(e.data),!e.async)return r();zr.setTimeout(r,10)}}),kx=we.extend,zt=(Tx.sendRPC=function(e){return(new Tx).send(e)},Tx.prototype.send=function(e){var n=e.error,r=e.success,o=kx(this.settings,e);o.success=function(e,t){(e=void 0===(e=Cx.parse(e))?{error:"JSON Parse error."}:e).error?n.call(o.error_scope||o.scope,e.error,t):r.call(o.success_scope||o.scope,e.result)},o.error=function(e,t){n&&n.call(o.error_scope||o.scope,e,t)},o.data=Cx.serialize({id:e.id||"c"+this.count++,method:e.method,params:e.params}),o.content_type="application/json",Sx.send(o)},Tx);function Tx(e){this.settings=kx({},e),this.count=0}try{var Ox,Ex="__storage_test__";(Ox=window.localStorage).setItem(Ex,Ex),Ox.removeItem(Ex)}catch(i){vx={},bx=[],e={getItem:function(e){return vx[e]||null},setItem:function(e,t){bx.push(e),vx[e]=String(t)},key:function(e){return bx[e]},removeItem:function(t){bx=bx.filter(function(e){return e===t}),delete vx[t]},clear:function(){bx=[],vx={}},length:0},Object.defineProperty(e,"length",{get:function(){return bx.length},configurable:!1,enumerable:!1}),Ox=e}var Ex={geom:{Rect:xt},util:{Promise:Rr,Delay:zr,Tools:we,VK:ke,URI:Eh,Class:ux,EventDispatcher:xw,Observable:Rt,I18n:ca,XHR:Sx,JSON:Cx,JSONRequest:zt,JSONP:Nt,LocalStorage:Ox,Color:function(e){function t(e){if("object"==typeof e){if("r"in e)a=e.r,c=e.g,s=e.b;else if("v"in e){var t=e.h,n=e.s,r=e.v;if(t=(parseInt(t,10)||0)%360,n=parseInt(n,10)/100,r=parseInt(r,10)/100,n=wx(0,yx(n,1)),r=wx(0,yx(r,1)),0!==n){var t=t/60,o=r*n,i=o*(1-Math.abs(t%2-1)),n=r-o;switch(Math.floor(t)){case 0:a=o,c=i,s=0;break;case 1:a=i,c=o,s=0;break;case 2:a=0,c=o,s=i;break;case 3:a=0,c=i,s=o;break;case 4:a=i,c=0,s=o;break;case 5:a=o,c=0,s=i;break;default:a=c=s=0}a=xx(255*(a+n)),c=xx(255*(c+n)),s=xx(255*(s+n))}else a=c=s=xx(255*r)}}else(t=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(e))?(a=parseInt(t[1],10),c=parseInt(t[2],10),s=parseInt(t[3],10)):(t=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(e))?(a=parseInt(t[1],16),c=parseInt(t[2],16),s=parseInt(t[3],16)):(t=/#([0-F])([0-F])([0-F])/gi.exec(e))&&(a=parseInt(t[1]+t[1],16),c=parseInt(t[2]+t[2],16),s=parseInt(t[3]+t[3],16));return a=a<0?0:255<a?255:a,c=c<0?0:255<c?255:c,s=s<0?0:255<s?255:s,u}var u={},a=0,c=0,s=0;return e&&t(e),u.toRgb=function(){return{r:a,g:c,b:s}},u.toHsv=function(){return e=a,t=c,n=s,o=0,(i=yx(e/=255,yx(t/=255,n/=255)))===(u=wx(e,wx(t,n)))?{h:0,s:0,v:100*(o=i)}:(r=(u-i)/u,{h:xx(60*((e===i?3:n===i?1:5)-(e===i?t-n:n===i?e-t:n-e)/((o=u)-i))),s:xx(100*r),v:xx(100*o)});var e,t,n,r,o,i,u},u.toHex=function(){function e(e){return 1<(e=parseInt(e,10).toString(16)).length?e:"0"+e}return"#"+e(a)+e(c)+e(s)},u.parse=t,u},ImageUploader:function(n){var e=Sv(),r=Ov(n,e);return{upload:function(e,t){return r.upload(e,(t=void 0===t||t)?Tv(n):void 0)}}}},dom:{EventUtils:pi,Sizzle:K,DomQuery:X,TreeWalker:Pr,TextSeeker:ka,DOMUtils:Ce,ScriptLoader:ta,RangeUtils:Tf,Serializer:Ph,StyleSheetLoader:Ar,ControlSelection:mf,BookmarkManager:Ml,Selection:fh,Event:pi.Event},html:{Styles:mo,Entities:ii,Node:_d,Schema:lo,SaxParser:Dh,DomParser:zh,Writer:jd,Serializer:Ud},Env:ye,AddOnManager:ia,Annotator:Dl,Formatter:Mv,UndoManager:Rv,EditorCommands:dw,WindowManager:vv,NotificationManager:Gh,EditorObservable:Mw,Shortcuts:Iw,Editor:Ww,FocusManager:kd,EditorManager:ox,DOM:Ce.DOM,ScriptLoader:ta.ScriptLoader,PluginManager:pv,ThemeManager:hv,IconManager:lv,Resource:t,trim:we.trim,isArray:we.isArray,is:we.is,toArray:we.toArray,makeMap:we.makeMap,each:we.each,map:we.map,grep:we.grep,inArray:we.inArray,extend:we.extend,create:we.create,walk:we.walk,createNS:we.createNS,resolve:we.resolve,explode:we.explode,_addCacheSuffix:we._addCacheSuffix,isOpera:ye.opera,isWebKit:ye.webkit,isIE:ye.ie,isGecko:ye.gecko,isMac:ye.mac},e=we.extend(ox,Ex),xt=e,_x=(window.tinymce=xt,window.tinyMCE=xt,e);if("object"==typeof module)try{module.exports=_x}catch(_x){}}(),function(){function n(n){return function(e){return t=typeof(e=e),(null===e?"null":"object"==t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"==t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t)===n;var t}}function r(t){return function(e){return typeof e===t}}function o(t){return function(e){return t===e}}function u(t,n){return function(e){return t(n(e))}}var d=n("string"),a=n("object"),p=n("array"),h=o(null),b=r("boolean"),_=o(void 0),R=function(e){return null==e},z=function(e){return!R(e)},B=r("function"),P=r("number"),I=function(e,t){if(p(e)){for(var n=0,r=e.length;n<r;++n)if(!t(e[n]))return!1;return!0}return!1},G=function(){},L=function(e){return function(){return e()}},F=function(n,r){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n(r.apply(null,e))}},K=function(e){return function(){return e}},v=function(e){return e},H=function(e,t){return e===t};function V(r){for(var o=[],e=1;e<arguments.length;e++)o[e-1]=arguments[e];return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=o.concat(e);return r.apply(null,n)}}var j=function(t){return function(e){return!t(e)}},U=function(e){return function(){throw new Error(e)}},W=K(!1),$=K(!0),q=tinymce.util.Tools.resolve("tinymce.ThemeManager"),A=function(){return(A=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function ue(e,t){var n={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n}function ae(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||((r=r||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}function ce(){return se}var se={fold:function(e,t){return e()},isSome:W,isNone:$,getOr:Ln=v,getOrThunk:le,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:K(null),getOrUndefined:K(void 0),or:Ln,orThunk:le,map:ce,each:G,bind:ce,exists:W,forall:$,filter:function(){return se},toArray:function(){return[]},toString:K("none()")};function le(e){return e()}function fe(n){function e(){return o}function t(e){return e(n)}var r=K(n),o={fold:function(e,t){return t(n)},isSome:$,isNone:W,getOr:r,getOrThunk:r,getOrDie:r,getOrNull:r,getOrUndefined:r,or:e,orThunk:e,map:function(e){return fe(e(n))},each:function(e){e(n)},bind:t,exists:t,forall:t,filter:function(e){return e(n)?o:se},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return o}function de(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}}function me(t){return function(e){return e.dom.nodeType===t}}function ge(){return Bn(0,0)}function pe(t){return function(e){return vn(e,t)}}function he(e){function t(e){return function(){return n===e}}var n=e.current,e=e.version;return{current:n,version:e,isEdge:t(Vn),isChrome:t(jn),isIE:t(Un),isOpera:t(Wn),isFirefox:t($n),isSafari:t(qn)}}function ve(e){function t(e){return function(){return n===e}}var n=e.current,e=e.version;return{current:n,version:e,isWindows:t(Xn),isiOS:t(Yn),isAndroid:t(Jn),isOSX:t(Qn),isLinux:t(Zn),isSolaris:t(er),isFreeBSD:t(tr),isChromeOS:t(nr)}}function be(e){return window.matchMedia(e).matches}function ye(e){return S.fromDom(e.dom.host)}function we(e){if(Mr()&&z(e.target)){var t=S.fromDom(e.target);if(An(t)&&Pr(t)&&e.composed&&e.composedPath){t=e.composedPath();if(t)return jt(t)}}return X.from(e.target)}function xe(n,r){function e(e){var t=r(e);return t<=0||null===t?(e=Yr(e,n),parseFloat(e)||0):t}function o(n,e){return At(e,function(e,t){t=Yr(n,t),t=void 0===t?0:parseInt(t,10);return isNaN(t)?e:e+t},0)}return{set:function(e,t){if(!P(t)&&!t.match(/^[0-9]+$/))throw new Error(n+".set accepts only positive integer values. Value was "+t);e=e.dom;Sn(e)&&(e.style[n]=t+"px")},get:e,getOuter:e,aggregate:o,max:function(e,t,n){e=o(e,n);return e<t?t-e:0}}}function Ce(n,r){return{left:n,top:r,translate:function(e,t){return Ce(n+e,r+t)}}}function Se(e,t,n,r,o,i,u){return{target:e,x:t,y:n,stop:r,prevent:o,kill:i,raw:u}}function ke(t,n){Er(t).fold(function(){ko(t,n)},function(e){t.dom.insertBefore(n.dom,e.dom)})}function Te(e){var t=Tr(e);0<t.length&&To(e,t),_o(e)}function Oe(n){return{isValue:$,isError:W,getOr:K(n),getOrThunk:K(n),getOrDie:K(n),or:function(e){return Oe(n)},orThunk:function(e){return Oe(n)},fold:function(e,t){return t(n)},map:function(e){return Oe(e(n))},mapError:function(e){return Oe(n)},each:function(e){e(n)},bind:function(e){return e(n)},exists:function(e){return e(n)},forall:function(e){return e(n)},toOptional:function(){return X.some(n)}}}function Ee(n){return{isValue:W,isError:$,getOr:v,getOrThunk:function(e){return e()},getOrDie:function(){return U(String(n))()},or:v,orThunk:function(e){return e()},fold:function(e,t){return e(n)},map:function(e){return Ee(n)},mapError:function(e){return Ee(e(n))},each:G,bind:function(e){return Ee(n)},exists:W,forall:$,toOptional:X.none}}function _e(e,t,n){return e.stype===pt.Error?t(e.serror):n(e.svalue)}function Ae(e){return{stype:pt.Value,svalue:e}}function De(e){return{stype:pt.Error,serror:e}}function Me(u){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)throw new Error("Can't merge zero objects");for(var n={},r=0;r<e.length;r++){var o,i=e[r];for(o in i)rn(i,o)&&(n[o]=u(n[o],i[o]))}return n}}function Ne(e){return{tag:"mergeWithThunk",process:e}}function Re(e){return F(Wo.serror,Rt)(e)}function ze(e,t){return ni(e,function(){return"There are unsupported fields: ["+t.join(", ")+"] specified"})}function Be(e,t){return ni(e,K(t))}function Pe(o,i,e){for(var u={},a=[],t=0,n=e;t<n.length;t++){var r=n[t];qo(r,function(e,t,n,r){n=fi(n,o,i,e,r);Wo.fold(n,function(e){a.push.apply(a,e)},function(e){u[t]=e})},function(e,t){u[e]=t(i)})}return 0<a.length?Wo.serror(a):Wo.svalue(u)}function Ie(n){return{extract:function(e,t){return n().extract(e,t)},toString:function(){return n().toString()}}}function Le(e){return qt(Qt(e,z))}function Fe(u){return{extract:function(e,t){for(var n=[],r=0,o=u;r<o.length;r++){var i=o[r].extract(e,t);if(i.stype===pt.Value)return i;n.push(i)}return Qo.consolidateArr(n)},toString:function(){return"oneOf("+x(u,function(e){return e.toString()}).join(", ")+")"}}}function He(o,i){return{extract:function(t,n){var e=qt(n),r=(r=t,e=e,mi(ui(o)).extract(r,e));return Wo.bind(r,function(e){e=x(e,function(e){return $o(e,e,Xo(),i)});return m(e).extract(t,n)})},toString:function(){return"setOf("+i.toString()+")"}}}function Ve(n,r){return ui(function(e){var t=typeof e;return n(e)?Wo.svalue(e):Wo.serror("Expected type: "+r+" but got: "+t)})}function je(t){if(Object(t)!==t)return!0;switch({}.toString.call(t).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(t).every(function(e){return je(t[e])});default:return!1}}function Ue(e,r){return{extract:function(t,n){return C(n,e).fold(function(){return oi(t,e)},function(e){return wi(t,n,r,e)})},toString:function(){return"chooseOn("+e+"). Possible values: "+qt(r)}}}function We(t,e){return He(function(e){return Wo.fromResult(t(e))},e)}function $e(e,t){return Ue(e,Xt(t,m))}function qe(t){return xi(function(e){return xt(t,e)?M.value(e):M.error('Unsupported value: "'+e+'", choose one of "'+t.join(", ")+'".')})}function t(e){return Ai(e,vi)}function Ge(e,t){return Ei(e,e,Xo(),qe(t))}function Ke(e){return Ai(e,yi)}function Xe(e,t){return Ei(e,e,Xo(),gi(t))}function Ye(e,t){return Ei(e,e,Xo(),mi(t))}function Je(e){return Ni(e,hi)}function Ze(e){return Ni(e,vi)}function Qe(e){return Ni(e,yi)}function et(e,t){return Ni(e,mi(t))}function tt(e,t){return Bi(e,t,hi)}function nt(e,t){return Bi(e,t,vi)}function rt(e,t,n){return Bi(e,t,qe(n))}function ot(e,t){return Bi(e,t,bi)}function it(e,t){return Bi(e,t,yi)}function ut(e,t,n){return Bi(e,t,mi(n))}function at(e,t,n){return Bi(e,t,m(n))}function ct(e,t){return n=t,r={},Kt(e,function(e,t){xt(n,t)||(r[t]=e)}),r;var n,r}function st(e){return K("alloy."+e)}function lt(e,t){return{key:e,value:Yi({abort:t})}}function ft(e,n,r){return{key:e,value:Yi({run:function(e,t){n.apply(void 0,[e,t].concat(r))}})}}function dt(e,t,n){var r,o,t=t.partUids[n];return o=t,Z(r=e,function(e,t){e.getSystem().getByUid(o).each(function(e){Xu(e,e.element,r,t)})})}function mt(r){return Aa(function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return r.apply(void 0,ae([e.getApis(),e],t,!1))},r)}var gt,pt,ht,X={some:fe,none:ce,from:function(e){return null==e?se:fe(e)}},vt=Array.prototype.slice,bt=Array.prototype.indexOf,yt=Array.prototype.push,wt=function(e,t){return bt.call(e,t)},xt=function(e,t){return-1<wt(e,t)},Ct=function(e,t){for(var n=0,r=e.length;n<r;n++)if(t(e[n],n))return!0;return!1},St=function(e,t){for(var n=[],r=0;r<e;r++)n.push(t(r));return n},kt=function(e,t){for(var n=[],r=0;r<e.length;r+=t){var o=vt.call(e,r,r+t);n.push(o)}return n},x=function(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o)}return r},w=function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)},Tt=function(e,t){for(var n=e.length-1;0<=n;n--)t(e[n],n)},Ot=function(e,t){for(var n=[],r=[],o=0,i=e.length;o<i;o++){var u=e[o];(t(u,o)?n:r).push(u)}return{pass:n,fail:r}},Et=function(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r)&&n.push(i)}return n},_t=function(e,n,r){return Tt(e,function(e,t){r=n(r,e,t)}),r},At=function(e,n,r){return w(e,function(e,t){r=n(r,e,t)}),r},Dt=function(e,t,n){for(var r=0,o=e.length;r<o;r++){var i=e[r];if(t(i,r))return X.some(i);if(n(i,r))break}return X.none()},Mt=function(e,t){return Dt(e,t,W)},Nt=function(e,t){for(var n=0,r=e.length;n<r;n++)if(t(e[n],n))return X.some(n);return X.none()},Rt=function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!p(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);yt.apply(t,e[n])}return t},zt=function(e,t){return Rt(x(e,t))},Bt=function(e,t){for(var n=0,r=e.length;n<r;++n)if(!0!==t(e[n],n))return!1;return!0},Pt=function(e){e=vt.call(e,0);return e.reverse(),e},It=function(e,t){return Et(e,function(e){return!xt(t,e)})},Lt=function(e,t){for(var n={},r=0,o=e.length;r<o;r++){var i=e[r];n[String(i)]=t(i,r)}return n},Ft=function(e){return[e]},Ht=function(e,t){e=vt.call(e,0);return e.sort(t),e},Vt=function(e,t){return 0<=t&&t<e.length?X.some(e[t]):X.none()},jt=function(e){return Vt(e,0)},Ut=function(e){return Vt(e,e.length-1)},Wt=B(Array.from)?Array.from:function(e){return vt.call(e)},$t=function(e,t){for(var n=0;n<e.length;n++){var r=t(e[n],n);if(r.isSome())return r}return X.none()},qt=Object.keys,Gt=Object.hasOwnProperty,Kt=function(e,t){for(var n=qt(e),r=0,o=n.length;r<o;r++){var i=n[r];t(e[i],i)}},Xt=function(e,n){return Yt(e,function(e,t){return{k:t,v:n(e,t)}})},Yt=function(e,n){var r={};return Kt(e,function(e,t){e=n(e,t);r[e.k]=e.v}),r},Jt=function(n){return function(e,t){n[t]=e}},Zt=function(e,n,r,o){return Kt(e,function(e,t){(n(e,t)?r:o)(e,t)}),{}},Qt=function(e,t){var n={};return Zt(e,t,Jt(n),G),n},en=function(e,n){var r=[];return Kt(e,function(e,t){r.push(n(e,t))}),r},tn=function(e,t){for(var n=qt(e),r=0,o=n.length;r<o;r++){var i=n[r],u=e[i];if(t(u,i,e))return X.some(u)}return X.none()},nn=function(e){return en(e,v)},C=function(e,t){return rn(e,t)?X.from(e[t]):X.none()},rn=function(e,t){return Gt.call(e,t)},on=function(e,t){return rn(e,t)&&void 0!==e[t]&&null!==e[t]},un=function(e,t,n){return void 0===n&&(n=H),e.exists(function(e){return n(e,t)})},an=function(e,t,n){return sn(e,t,n=void 0===n?H:n).getOr(e.isNone()&&t.isNone())},cn=function(e){for(var t=[],n=function(e){t.push(e)},r=0;r<e.length;r++)e[r].each(n);return t},sn=function(e,t,n){return e.isSome()&&t.isSome()?X.some(n(e.getOrDie(),t.getOrDie())):X.none()},ln=function(e,t,n,r){return e.isSome()&&t.isSome()&&n.isSome()?X.some(r(e.getOrDie(),t.getOrDie(),n.getOrDie())):X.none()},fn=function(e,t){return e?X.some(t):X.none()},dn=function(e,t){return e+t},mn=function(e,t){return e.substring(t)},gn=function(e,t,n){return""===t||e.length>=t.length&&e.substr(n,n+t.length)===t},pn=function(e,t){return bn(e,t)?mn(e,t.length):e},hn=function(e,t){return yn(e,t)?e:dn(e,t)},vn=function(e,t){return-1!==e.indexOf(t)},bn=function(e,t){return gn(e,t,0)},yn=function(e,t){return gn(e,t,e.length-t.length)},wn=(gt=/^\s+|\s+$/g,function(e){return e.replace(gt,"")}),xn=function(e){return 0<e.length},Cn=function(e){return!xn(e)},Sn=function(e){return void 0!==e.style&&B(e.style.getPropertyValue)},S={fromHtml:function(e,t){t=(t||document).createElement("div");if(t.innerHTML=e,!t.hasChildNodes()||1<t.childNodes.length)throw console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node");return de(t.childNodes[0])},fromTag:function(e,t){t=(t||document).createElement(e);return de(t)},fromText:function(e,t){t=(t||document).createTextNode(e);return de(t)},fromDom:de,fromPoint:function(e,t,n){return X.from(e.dom.elementFromPoint(t,n)).map(de)}},kn=("undefined"!=typeof window||Function("return this;")(),9),Tn=11,On=1,En=3,_n=function(e){return e.dom.nodeName.toLowerCase()},An=me(On),Dn=me(En),Mn=me(kn),Nn=me(Tn),Rn=function(n){var r,o=!1;return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o||(o=!0,r=n.apply(null,e)),r}},zn=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t))return r}},Bn=function(e,t){return{major:e,minor:t}},Pn={nu:Bn,detect:function(e,t){var n,r,t=String(t).toLowerCase();return 0===e.length?ge():(r=zn(e=e,n=t))?Bn((e=function(e){return Number(n.replace(r,"$"+e))})(1),e(2)):{major:0,minor:0}},unknown:ge},In=function(e,t){var n=String(t).toLowerCase();return Mt(e,function(e){return e.search(n)})},Ln=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Ln=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return vn(e,"edge/")&&vn(e,"chrome")&&vn(e,"safari")&&vn(e,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Ln],search:function(e){return vn(e,"chrome")&&!vn(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return vn(e,"msie")||vn(e,"trident")}},{name:"Opera",versionRegexes:[Ln,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:pe("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:pe("firefox")},{name:"Safari",versionRegexes:[Ln,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(vn(e,"safari")||vn(e,"mobile/"))&&vn(e,"applewebkit")}}],Fn=[{name:"Windows",search:pe("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return vn(e,"iphone")||vn(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:pe("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:pe("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:pe("linux"),versionRegexes:[]},{name:"Solaris",search:pe("sunos"),versionRegexes:[]},{name:"FreeBSD",search:pe("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:pe("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Hn={browsers:K(Ln),oses:K(Fn)},Vn="Edge",jn="Chrome",Un="IE",Wn="Opera",$n="Firefox",qn="Safari",Gn=function(){return he({current:void 0,version:Pn.unknown()})},Kn=he,Xn=(K(Vn),K(jn),K(Un),K(Wn),K($n),K(qn),"Windows"),Yn="iOS",Jn="Android",Zn="Linux",Qn="OSX",er="Solaris",tr="FreeBSD",nr="ChromeOS",rr=function(){return ve({current:void 0,version:Pn.unknown()})},or=ve,ir=(K(Xn),K(Yn),K(Jn),K(Zn),K(Qn),K(er),K(tr),K(nr),function(e,t,n){var r,o,i,u,a,c,s,l=Hn.browsers(),f=Hn.oses(),t=t.bind(function(e){return r=l,$t(e.brands,function(t){var n=t.brand.toLowerCase();return Mt(r,function(e){return n===(null==(e=e.brand)?void 0:e.toLowerCase())}).map(function(e){return{current:e.name,version:Pn.nu(parseInt(t.version,10),0)}})});var r}).orThunk(function(){return In(l,n=e).map(function(e){var t=Pn.detect(e.versionRegexes,n);return{current:e.name,version:t}});var n}).fold(Gn,Kn),f=In(f,r=e).map(function(e){var t=Pn.detect(e.versionRegexes,r);return{current:e.name,version:t}}).fold(rr,or),d=(i=t,u=e,n=n,d=(o=f).isiOS()&&!0===/ipad/i.test(u),a=o.isiOS()&&!d,c=o.isiOS()||o.isAndroid(),s=c||n("(pointer:coarse)"),n=d||!a&&c&&n("(min-device-width:768px)"),c=a||c&&!n,i=i.isSafari()&&o.isiOS()&&!1===/safari/i.test(u),u=!c&&!n&&!i,{isiPad:K(d),isiPhone:K(a),isTablet:K(n),isPhone:K(c),isTouch:K(s),isAndroid:o.isAndroid,isiOS:o.isiOS,isWebView:K(i),isDesktop:K(u)});return{browser:t,os:f,deviceType:d}}),ur=Rn(function(){return ir(navigator.userAgent,X.from(navigator.userAgentData),be)}),ar=function(){return ur()},cr=function(e,t,n){return 0!=(e.compareDocumentPosition(t)&n)},sr=function(e,t){return cr(e,t,Node.DOCUMENT_POSITION_CONTAINED_BY)},lr=function(e,t){e=e.dom;if(e.nodeType!==On)return!1;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},fr=function(e){return e.nodeType!==On&&e.nodeType!==kn&&e.nodeType!==Tn||0===e.childElementCount},dr=function(e,t){t=void 0===t?document:t.dom;return fr(t)?[]:x(t.querySelectorAll(e),S.fromDom)},mr=function(e,t){t=void 0===t?document:t.dom;return fr(t)?X.none():X.from(t.querySelector(e)).map(S.fromDom)},gr=function(e,t){return e.dom===t.dom},pr=function(e,t){e=e.dom,t=t.dom;return e!==t&&e.contains(t)},hr=function(e,t){return sr(e.dom,t.dom)},vr=function(e,t){return(ar().browser.isIE()?hr:pr)(e,t)},br=function(e){return S.fromDom(e.dom.ownerDocument)},yr=function(e){return Mn(e)?e:br(e)},wr=function(e){return S.fromDom(yr(e).dom.documentElement)},xr=function(e){return S.fromDom(yr(e).dom.defaultView)},Cr=function(e){return X.from(e.dom.parentNode).map(S.fromDom)},Sr=function(e){return X.from(e.dom.offsetParent).map(S.fromDom)},kr=function(e){return X.from(e.dom.nextSibling).map(S.fromDom)},Tr=function(e){return x(e.dom.childNodes,S.fromDom)},Or=function(e,t){e=e.dom.childNodes;return X.from(e[t]).map(S.fromDom)},Er=function(e){return Or(e,0)},_r=function(e,t){return{element:e,offset:t}},Ar=function(e,t){var n=Tr(e);return 0<n.length&&t<n.length?_r(n[t],0):_r(e,t)},Dr=function(e){return Nn(e)&&z(e.dom.host)},Ln=B(Element.prototype.attachShadow)&&B(Node.prototype.getRootNode),Mr=K(Ln),Nr=Ln?function(e){return S.fromDom(e.dom.getRootNode())}:yr,Rr=function(e){return Dr(e)?e:S.fromDom(yr(e).dom.body)},zr=function(e){return Br(e).isSome()},Br=function(e){e=Nr(e);return Dr(e)?X.some(e):X.none()},Pr=function(e){return z(e.dom.shadowRoot)},Ir=function(e){var t,n=Dn(e)?e.dom.parentNode:e.dom;return null!=n&&null!==n.ownerDocument&&(t=n.ownerDocument,Br(S.fromDom(n)).fold(function(){return t.body.contains(n)},u(Ir,ye)))},Lr=function(){return Fr(S.fromDom(document))},Fr=function(e){e=e.dom.body;if(null==e)throw new Error("Body is not available yet");return S.fromDom(e)},Hr=function(e,t,n){if(!(d(n)||b(n)||P(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},k=function(e,t,n){Hr(e.dom,t,n)},Vr=function(e,t){var n=e.dom;Kt(t,function(e,t){Hr(n,t,e)})},jr=function(e,t){e=e.dom.getAttribute(t);return null===e?void 0:e},Ur=function(e,t){return X.from(jr(e,t))},Wr=function(e,t){e=e.dom;return!(!e||!e.hasAttribute)&&e.hasAttribute(t)},$r=function(e,t){e.dom.removeAttribute(t)},qr=function(e,t,n){if(!d(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);Sn(e)&&e.style.setProperty(t,n)},Gr=function(e,t){Sn(e)&&e.style.removeProperty(t)},D=function(e,t,n){e=e.dom;qr(e,t,n)},Kr=function(e,t){var n=e.dom;Kt(t,function(e,t){qr(n,t,e)})},Xr=function(e,t){var n=e.dom;Kt(t,function(e,t){e.fold(function(){Gr(n,t)},function(e){qr(n,t,e)})})},Yr=function(e,t){var n=e.dom,r=window.getComputedStyle(n).getPropertyValue(t);return""!==r||Ir(e)?r:Jr(n,t)},Jr=function(e,t){return Sn(e)?e.style.getPropertyValue(t):""},Zr=function(e,t){e=e.dom,e=Jr(e,t);return X.from(e).filter(function(e){return 0<e.length})},Qr=function(e){var t={},n=e.dom;if(Sn(n))for(var r=0;r<n.style.length;r++){var o=n.style.item(r);t[o]=n.style[o]}return t},eo=function(e,t,n){e=S.fromTag(e);return D(e,t,n),Zr(e,t).isSome()},to=function(e,t){var n=e.dom;Gr(n,t),un(Ur(e,"style").map(wn),"")&&$r(e,"style")},no=function(e){return e.dom.offsetWidth},ro=xe("height",function(e){var t=e.dom;return Ir(e)?t.getBoundingClientRect().height:t.offsetHeight}),oo=function(e){return ro.get(e)},io=function(e){return ro.getOuter(e)},uo=Ce,ao=function(e){e=e.getBoundingClientRect();return uo(e.left,e.top)},co=function(e,t){return void 0!==e?e:void 0!==t?t:0},so=function(e){var t,n,r=e.dom.ownerDocument,o=r.body,i=r.defaultView,r=r.documentElement;return o===e.dom?uo(o.offsetLeft,o.offsetTop):(t=co(null==i?void 0:i.pageYOffset,r.scrollTop),i=co(null==i?void 0:i.pageXOffset,r.scrollLeft),n=co(r.clientTop,o.clientTop),r=co(r.clientLeft,o.clientLeft),lo(e).translate(i-r,t-n))},lo=function(e){var t=e.dom,n=t.ownerDocument.body;return n===t?uo(n.offsetLeft,n.offsetTop):Ir(e)?ao(t):uo(0,0)},fo=xe("width",function(e){return e.dom.offsetWidth}),mo=function(e,t){return fo.set(e,t)},go=function(e){return fo.get(e)},po=function(e){return fo.getOuter(e)},ho=function(e){function t(){return e.stopPropagation()}function n(){return e.preventDefault()}var r=S.fromDom(we(e).getOr(e.target)),o=F(n,t);return Se(r,e.clientX,e.clientY,t,n,o,e)},vo=function(t,n){return function(e){t(e)&&n(ho(e))}},bo=function(e,t,n,r,o){n=vo(n,r);return e.dom.addEventListener(t,n,o),{unbind:V(xo,e,t,n,o)}},yo=function(e,t,n,r){return bo(e,t,n,r,!1)},wo=function(e,t,n,r){return bo(e,t,n,r,!0)},xo=function(e,t,n,r){e.dom.removeEventListener(t,n,r)},Co=function(t,n){Cr(t).each(function(e){e.dom.insertBefore(n.dom,t.dom)})},So=function(e,t){kr(e).fold(function(){Cr(e).each(function(e){ko(e,t)})},function(e){Co(e,t)})},ko=function(e,t){e.dom.appendChild(t.dom)},To=function(t,e){w(e,function(e){Co(t,e)})},Oo=function(t,e){w(e,function(e){ko(t,e)})},Eo=function(e){e.dom.textContent="",w(Tr(e),function(e){_o(e)})},_o=function(e){e=e.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},Ao=function(e){var e=void 0!==e?e.dom:document,t=e.body.scrollLeft||e.documentElement.scrollLeft,e=e.body.scrollTop||e.documentElement.scrollTop;return uo(t,e)},Do=function(e,t,n){n=(void 0!==n?n.dom:document).defaultView;n&&n.scrollTo(e,t)},Mo=function(e){e=void 0===e?window:e;return ar().browser.isFirefox()?X.none():X.from(e.visualViewport)},No=function(e,t,n,r){return{x:e,y:t,width:n,height:r,right:e+n,bottom:t+r}},Ro=function(e){var n=void 0===e?window:e,e=n.document,r=Ao(S.fromDom(e));return Mo(n).fold(function(){var e=n.document.documentElement,t=e.clientWidth,e=e.clientHeight;return No(r.left,r.top,t,e)},function(e){return No(Math.max(e.pageLeft,r.left),Math.max(e.pageTop,r.top),e.width,e.height)})},zo=function(n,e){return n.view(e).fold(K([]),function(e){var t=n.owner(e),t=zo(n,t);return[e].concat(t)})},Bo=function(e,t){e=t.owner(e),t=zo(t,e);return X.some(t)},Po=Object.freeze({__proto__:null,view:function(e){return(e.dom===document?X.none():X.from(null==(e=e.dom.defaultView)?void 0:e.frameElement)).map(S.fromDom)},owner:function(e){return br(e)}}),Io=function(n){var e=S.fromDom(document),r=Ao(e);return Bo(n,Po).fold(V(so,n),function(e){var t=lo(n),e=_t(e,function(e,t){t=lo(t);return{left:e.left+t.left,top:e.top+t.top}},{left:0,top:0});return uo(e.left+t.left+r.left,e.top+t.top+r.top)})},Lo=function(e,t,n){return{point:e,width:t,height:n}},Fo=function(e,t,n,r){return{x:e,y:t,width:n,height:r}},Ho=function(e,t,n,r){return{x:e,y:t,width:n,height:r,right:e+n,bottom:t+r}},Vo=function(e){var t=so(e),n=po(e),e=io(e);return Ho(t.left,t.top,n,e)},jo=function(e){var t=Io(e),n=po(e),e=io(e);return Ho(t.left,t.top,n,e)},Uo=function(){return Ro(window)},M={value:Oe,error:Ee,fromOption:function(e,t){return e.fold(function(){return Ee(t)},Oe)}},Wo=((Fn=pt=pt||{})[Fn.Error=0]="Error",Fn[Fn.Value=1]="Value",{fromResult:function(e){return e.fold(De,Ae)},toResult:function(e){return _e(e,M.error,M.value)},svalue:Ae,partition:function(e){var t=[],n=[];return w(e,function(e){_e(e,function(e){return n.push(e)},function(e){return t.push(e)})}),{values:t,errors:n}},serror:De,bind:function(e,t){return e.stype===pt.Value?t(e.svalue):e},bindError:function(e,t){return e.stype===pt.Error?t(e.serror):e},map:function(e,t){return e.stype===pt.Value?{stype:pt.Value,svalue:t(e.svalue)}:e},mapError:function(e,t){return e.stype===pt.Error?{stype:pt.Error,serror:t(e.serror)}:e},fold:_e}),$o=function(e,t,n,r){return{tag:"field",key:e,newKey:t,presence:n,prop:r}},qo=function(e,t,n){switch(e.tag){case"field":return t(e.key,e.newKey,e.presence,e.prop);case"custom":return n(e.newKey,e.instantiator)}},Go=Me(function(e,t){return a(e)&&a(t)?Go(e,t):t}),Ko=Me(function(e,t){return t}),Xo=function(){return{tag:"required",process:{}}},Yo=function(e){return{tag:"defaultedThunk",process:e}},Jo=function(e){return Yo(K(e))},Zo=function(){return{tag:"option",process:{}}},Qo={consolidateObj:function(e,t){var e=Wo.partition(e);return 0<e.errors.length?Re(e.errors):(e=e.values,t=t,0<e.length?Wo.svalue(Go(t,Ko.apply(void 0,e))):Wo.svalue(t))},consolidateArr:function(e){e=Wo.partition(e);return 0<e.errors.length?Re(e.errors):Wo.svalue(e.values)}},ei=function(e){return a(e)&&100<qt(e).length?" removed due to size":JSON.stringify(e,null,2)},ti=function(e){e=10<e.length?e.slice(0,10).concat([{path:[],getErrorInfo:K("... (only showing first ten failures)")}]):e;return x(e,function(e){return"Failed path: ("+e.path.join(" > ")+")\n"+e.getErrorInfo()})},ni=function(e,t){return Wo.serror([{path:e,getErrorInfo:t}])},ri=function(e,t,n){return ni(e,function(){return'Could not find valid *required* value for "'+t+'" in '+ei(n)})},oi=function(e,t){return ni(e,function(){return'Choice schema did not contain choice key: "'+t+'"'})},ii=function(e,t,n){return ni(e,function(){return'The chosen schema: "'+n+'" did not exist in branches: '+ei(t)})},ui=function(n){return{extract:function(t,e){return Wo.bindError(n(e),function(e){return Be(t,e)})},toString:K("val")}},Ln=ui(Wo.svalue),ai=function(e,t,n,r){return C(t,n).fold(function(){return ri(e,n,t)},r)},ci=function(e,t,n,r){return r(C(e,t).getOrThunk(function(){return n(e)}))},si=function(e,t,n){return n(C(e,t))},li=function(t,e,n,r){return r(C(t,e).map(function(e){return!0===e?n(t):e}))},fi=function(t,n,r,o,i){function u(e){return i.extract(n.concat([o]),e)}function e(e){return e.fold(function(){return Wo.svalue(X.none())},function(e){e=i.extract(n.concat([o]),e);return Wo.map(e,X.some)})}switch(t.tag){case"required":return ai(n,r,o,u);case"defaultedThunk":return ci(r,o,t.process,u);case"option":return si(r,o,e);case"defaultedOptionThunk":return li(r,o,t.process,e);case"mergeWithThunk":return ci(r,o,K({}),function(e){e=Go(t.process(r),e);return u(e)})}},di=function(e){var r=m(e),o=_t(e,function(n,e){return qo(e,function(e){var t;return Go(n,((t={})[e]=!0,t))},K(n))},{});return{extract:function(e,t){var n=b(t)?[]:Le(t),n=Et(n,function(e){return!on(o,e)});return 0===n.length?r.extract(e,t):ze(e,n)},toString:r.toString}},m=function(n){return{extract:function(e,t){return Pe(e,t,n)},toString:function(){return"obj{\n"+x(n,function(e){return qo(e,function(e,t,n,r){return e+" -> "+r.toString()},function(e,t){return"state("+e+")"})}).join("\n")+"}"}}},mi=function(r){return{extract:function(n,e){e=x(e,function(e,t){return r.extract(n.concat(["["+t+"]"]),e)});return Qo.consolidateArr(e)},toString:function(){return"array("+r.toString()+")"}}},gi=F(mi,m),pi=K(Ln),hi=Ve(P,"number"),vi=Ve(d,"string"),bi=Ve(b,"boolean"),yi=Ve(B,"function"),Fn=ui(function(e){return je(e)?Wo.svalue(e):Wo.serror("Expected value to be acceptable for sending via postMessage")}),wi=function(t,n,e,r){return C(e,r).fold(function(){return ii(t,e,r)},function(e){return e.extract(t.concat(["branch: "+r]),n)})},xi=function(t){return ui(function(e){return t(e).fold(Wo.serror,Wo.svalue)})},Ci=function(e,t,n){t=t.extract([e],n);return Wo.mapError(t,function(e){return{input:n,errors:e}})},Si=function(e,t,n){return Wo.toResult(Ci(e,t,n))},ki=function(e){return e.fold(function(e){throw new Error(Oi(e))},v)},Ti=function(e,t,n){return ki(Si(e,t,n))},Oi=function(e){return"Errors: \n"+ti(e.errors).join("\n")+"\n\nInput object: "+ei(e.input)},Ei=$o,_i=function(e,t){return{tag:"custom",newKey:e,instantiator:t}},i=function(e){return Ei(e,e,Xo(),pi())},Ai=function(e,t){return Ei(e,e,Xo(),t)},Di=function(e,t){return Ei(e,e,Xo(),m(t))},Mi=function(e){return Ei(e,e,Zo(),pi())},Ni=function(e,t){return Ei(e,e,Zo(),t)},Ri=function(e,t){return Ni(e,m(t))},zi=function(e,t){return Ni(e,di(t))},s=function(e,t){return Ei(e,e,Jo(t),pi())},Bi=function(e,t,n){return Ei(e,e,Jo(t),n)},T=function(e){var t=e;return{get:function(){return t},set:function(e){t=e}}},Pi=function(u){if(!p(u))throw new Error("cases must be an array");if(0===u.length)throw new Error("there must be at least one case");var a=[],n={};return w(u,function(e,r){var t=qt(e);if(1!==t.length)throw new Error("one and only one name per case");var o=t[0],i=e[o];if(void 0!==n[o])throw new Error("duplicate key detected:"+o);if("cata"===o)throw new Error("cannot have a case named cata (sorry)");if(!p(i))throw new Error("case arguments must be an array");a.push(o),n[o]=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=n.length;if(t!==i.length)throw new Error("Wrong number of arguments to case "+o+". Expected "+i.length+" ("+i+"), got "+t);return{fold:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(e.length!==u.length)throw new Error("Wrong number of arguments to fold. Expected "+u.length+", got "+e.length);return e[r].apply(null,n)},match:function(e){var t=qt(e);if(a.length!==t.length)throw new Error("Wrong number of arguments to match. Expected: "+a.join(",")+"\nActual: "+t.join(","));if(Bt(a,function(e){return xt(t,e)}))return e[o].apply(null,n);throw new Error("Not all branches were specified when using match. Specified: "+t.join(", ")+"\nRequired: "+a.join(", "))},log:function(e){console.log(e,{constructors:a,constructor:o,params:n})}}}}),n},Ii=(Pi([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]),function(e){var t=[],n=[];return w(e,function(e){e.fold(function(e){t.push(e)},function(e){n.push(e)})}),{errors:t,values:n}}),Li=function(e,t){var n={};return n[e]=t,n},Fi=function(e){var t={};return w(e,function(e){t[e.key]=e.value}),t},Hi=function(e,t){return Li(e,t)},Vi=function(e){return Fi(e)},ji=function(e,t){return 0===e.length?M.value(t):M.value(Go(t,Ko.apply(void 0,e)))},Ui=function(e){return M.error(Rt(e))},Wi=function(e,t){e=Ii(e);return 0<e.errors.length?Ui(e.errors):ji(e.values,t)},$i=function(e){return B(e)?e:W},qi=function(e,t,n){for(var r=e.dom,o=$i(n);r.parentNode;){var r=r.parentNode,i=S.fromDom(r),u=t(i);if(u.isSome())return u;if(o(i))break}return X.none()},Gi=function(e,t,n){var r=t(e),o=$i(n);return r.orThunk(function(){return o(e)?X.none():qi(e,t,o)})},Ki=function(e,t){return gr(e.element,t.event.target)},Xi={can:$,abort:W,run:G},Yi=function(e){if(on(e,"can")||on(e,"abort")||on(e,"run"))return A(A({},Xi),e);throw new Error("EventHandler defined by: "+JSON.stringify(e,null,2)+" does not have can, abort, or run!")},Ji=function(t,r){return function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return At(t,function(e,t){return e&&r(t).apply(void 0,n)},!0)}},Zi=function(t,r){return function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return At(t,function(e,t){return e||r(t).apply(void 0,n)},!1)}},Qi=function(e){return B(e)?{can:$,abort:W,run:e}:e},eu=function(n){return{can:Ji(n,function(e){return e.can}),abort:Zi(n,function(e){return e.abort}),run:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];w(n,function(e){e.run.apply(void 0,t)})}}},tu=K,nu=tu("touchstart"),ru=tu("touchmove"),ou=tu("touchend"),iu=tu("touchcancel"),uu=tu("mousedown"),au=tu("mousemove"),cu=tu("mouseout"),su=tu("mouseup"),lu=tu("mouseover"),fu=tu("focusin"),du=tu("focusout"),mu=tu("keydown"),gu=tu("keyup"),pu=tu("input"),hu=tu("change"),vu=tu("click"),bu=tu("transitioncancel"),yu=tu("transitionend"),wu=tu("transitionstart"),xu=tu("selectstart"),tu={tap:st("tap")},Cu=st("focus"),Su=st("blur.post"),ku=st("paste.post"),Tu=st("receive"),Ou=st("execute"),Eu=st("focus.item"),_u=tu.tap,Au=st("longpress"),Du=st("sandbox.close"),Mu=st("typeahead.cancel"),Nu=st("system.init"),Ru=st("system.touchmove"),zu=st("system.touchend"),Bu=st("system.scroll"),Pu=st("system.resize"),Iu=st("system.attached"),Lu=st("system.detached"),Fu=st("system.dismissRequested"),tu=st("system.repositionRequested"),Hu=st("focusmanager.shifted"),Vu=st("slotcontainer.visibility"),ju=st("change.tab"),Uu=st("dismiss.tab"),Wu=st("highlight"),$u=st("dehighlight"),Y=function(e,t){Ku(e,e.element,t,{})},J=function(e,t,n){Ku(e,e.element,t,n)},qu=function(e){Y(e,Ou())},Gu=function(e,t,n){Ku(e,t,n,{})},Ku=function(e,t,n,r){r=A({target:t},r);e.getSystem().triggerEvent(n,t,r)},Xu=function(e,t,n,r){e.getSystem().triggerEvent(n,t,r.event)},Yu=function(e){return Vi(e)},Ju=function(e){return{key:e,value:Yi({run:function(e,t){t.event.prevent()}})}},Z=function(e,t){return{key:e,value:Yi({run:t})}},Zu=function(e){return function(n){return{key:e,value:Yi({run:function(e,t){Ki(e,t)&&n(e,t)}})}}},Qu=function(e,o){return Z(e,function(t,e){var n=e.event,r=t.getSystem().getByDom(n.target).getOrThunk(function(){return Gi(n.target,function(e){return t.getSystem().getByDom(e).toOptional()},W).getOr(t)});o(t,r,e)})},ea=function(e){return Z(e,function(e,t){t.cut()})},ta=function(e,t){return Zu(e)(t)},na=Zu(Iu()),ra=Zu(Lu()),oa=Zu(Nu()),ia=(ht=Ou(),function(e){return Z(ht,e)}),ua=function(e,t){t=(t||document).createElement("div");return t.innerHTML=e,Tr(S.fromDom(t))},aa=function(e){return e.dom.innerHTML},ca=function(e,t){var n=br(e).dom,r=S.fromDom(n.createDocumentFragment()),t=ua(t,n);Oo(r,t),Eo(e),ko(e,r)},sa=function(e){var t=S.fromTag("div"),e=S.fromDom(e.dom.cloneNode(!0));return ko(t,e),aa(t)},la=function(e,t){return S.fromDom(e.dom.cloneNode(t))},fa=function(e){return la(e,!1)},da=function(e){return Dr(e)?"#shadow-root":(e=fa(e),sa(e))},ma=Yu([{key:Cu(),value:Yi({can:function(e,t){var n,r,t=t.event,o=t.originator,t=t.target;return r=t,!(gr(n=o,e.element)&&!gr(n,r)&&(console.warn(Cu()+" did not get interpreted by the desired target. \nOriginator: "+da(o)+"\nTarget: "+da(t)+"\nCheck the "+Cu()+" event handlers"),1))}})}]),ga=Object.freeze({__proto__:null,events:ma}),pa=0,O=function(e){var t=(new Date).getTime();return e+"_"+Math.floor(1e9*Math.random())+ ++pa+String(t)},ma=K("alloy-id-"),ha=K("data-alloy-id"),va=ma(),ba=ha(),ya=function(e,t){e=O(va+e);return wa(t,e),e},wa=function(e,t){Object.defineProperty(e.dom,ba,{value:t,writable:!0})},xa=function(e){e=An(e)?e.dom[ba]:null;return X.from(e)},Ca=function(e){return O(e)},Sa=v,ka=function(t){function n(e){return"The component must be in a context to execute: "+e+(t?"\n"+da(t().element)+" is not in context.":"")}function e(e){return function(){throw new Error(n(e))}}function r(e){return function(){console.warn(n(e))}}return{debugInfo:K("fake"),triggerEvent:r("triggerEvent"),triggerFocus:r("triggerFocus"),triggerEscape:r("triggerEscape"),broadcast:r("broadcast"),broadcastOn:r("broadcastOn"),broadcastEvent:r("broadcastEvent"),build:e("build"),addToWorld:e("addToWorld"),removeFromWorld:e("removeFromWorld"),addToGui:e("addToGui"),removeFromGui:e("removeFromGui"),getByUid:e("getByUid"),getByDom:e("getByDom"),isConnected:W}},Ta=ka(),Oa=function(e,t,n){var n=n.toString(),r=n.indexOf(")")+1,o=n.indexOf("("),i=n.substring(o+1,r-1).split(/,\s*/);return e.toFunctionAnnotation=function(){return{name:t,parameters:Ea(i.slice(0,1).concat(i.slice(3)))}},e},Ea=function(e){return x(e,function(e){return yn(e,"/*")?e.substring(0,e.length-"/*".length):e})},_a=function(e,t){var n=e.toString(),r=n.indexOf(")")+1,o=n.indexOf("("),i=n.substring(o+1,r-1).split(/,\s*/);return e.toFunctionAnnotation=function(){return{name:t,parameters:Ea(i)}},e},Aa=function(e,t){var t=t.toString(),n=t.indexOf(")")+1,r=t.indexOf("("),o=t.substring(r+1,n-1).split(/,\s*/);return e.toFunctionAnnotation=function(){return{name:"OVERRIDE",parameters:Ea(o.slice(1))}},e},Da=O("alloy-premade"),Ma=function(e){return Hi(Da,e)},Na=function(e){return C(e,Da)},Ra={init:function(){return za({readState:K("No State required")})}},za=function(e){return e},Ba=function(t,e){var n=x(e,function(e){return Ri(e.name(),[i("config"),s("state",Ra)])}),n=Si("component.behaviours",m(n),t.behaviours).fold(function(e){throw new Error(Oi(e)+"\nComplete spec:\n"+JSON.stringify(t,null,2))},v);return{list:e,data:Xt(n,function(e){e=e.map(function(e){return{config:e.config,state:e.state.init(e.config)}});return K(e)})}},Pa=function(e){return e.list},Ia=function(e){return e.data},La=function(e,o){var i={};return Kt(e,function(e,r){Kt(e,function(e,t){var n=C(i,t).getOr([]);i[t]=n.concat([o(r,e)])})}),i},Fa=function(e){return{classes:_(e.classes)?[]:e.classes,attributes:_(e.attributes)?{}:e.attributes,styles:_(e.styles)?{}:e.styles}},Ha=function(e,t){return A(A({},e),{attributes:A(A({},e.attributes),t.attributes),styles:A(A({},e.styles),t.styles),classes:e.classes.concat(t.classes)})},Va=function(t,e,n,r){function o(e){return _t(e,function(e,t){return A(A({},t.modification),e)},{})}var i=A({},e),e=(w(n,function(e){i[e.name()]=e.exhibit(t,r)}),La(i,function(e,t){return{name:e,modification:t}})),n=_t(e.classes,function(e,t){return t.modification.concat(e)},[]),u=o(e.attributes),e=o(e.styles);return Fa({classes:n,attributes:u,styles:e})},ja=function(o,i,e,u){try{var t=Ht(e,function(e,t){var e=e[i],t=t[i],n=u.indexOf(e),r=u.indexOf(t);if(-1===n)throw new Error("The ordering for "+o+" does not have an entry for "+e+".\nOrder specified: "+JSON.stringify(u,null,2));if(-1===r)throw new Error("The ordering for "+o+" does not have an entry for "+t+".\nOrder specified: "+JSON.stringify(u,null,2));return n<r?-1:r<n?1:0});return M.value(t)}catch(e){return M.error([e])}},Ua=function(e,t){return{handler:e,purpose:t}},Wa=function(e,t){return{cHandler:e,purpose:t}},$a=function(e,t){return Wa(V.apply(void 0,[e.handler].concat(t)),e.purpose)},qa=function(e){return e.cHandler},Ga=function(e,t){return{name:e,handler:t}},Ka=function(e,t){var n={};return w(e,function(e){n[e.name()]=e.handlers(t)}),n},Xa=function(e,t,n){n=A(A({},n),Ka(t,e));return La(n,Ga)},Ya=function(e,t,n,r){e=Xa(e,n,r);return ec(e,t)},Ja=function(e){var o=Qi(e);return function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];e=[e,t].concat(n);o.abort.apply(void 0,e)?t.stop():o.can.apply(void 0,e)&&o.run.apply(void 0,e)}},Za=function(e,t){return M.error(["The event ("+e+') has more than one behaviour that listens to it.\nWhen this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).\nThe behaviours that can trigger it are: '+JSON.stringify(x(t,function(e){return e.name}),null,2)])},Qa=function(e,t,n){t=t[n];return t?ja("Event: "+n,"name",e,t).map(function(e){e=x(e,function(e){return e.handler});return eu(e)}):Za(n,e)},ec=function(e,o){e=en(e,function(n,r){return(1===n.length?M.value(n[0].handler):Qa(n,o,r)).map(function(e){var e=Ja(e),t=1<n.length?Et(o[r],function(t){return Ct(n,function(e){return e.name===t})}).join(" > "):n[0].name;return Hi(r,Ua(e,t))})});return Wi(e,{})},ma="alloy.base.behaviour",tc=m([Ei("dom","dom",Xo(),m([i("tag"),s("styles",{}),s("classes",[]),s("attributes",{}),Mi("value"),Mi("innerHtml")])),i("components"),i("uid"),s("events",{}),s("apis",{}),Ei("eventOrder","eventOrder",((ha={})[Ou()]=["disabling",ma,"toggling","typeaheadevents"],ha[Cu()]=[ma,"focusing","keying"],ha[Nu()]=[ma,"disabling","toggling","representing"],ha[pu()]=[ma,"representing","streaming","invalidating"],ha[Lu()]=[ma,"representing","item-events","tooltipping"],ha[uu()]=["focusing",ma,"item-type-events"],ha[nu()]=["focusing",ma,"item-type-events"],ha[lu()]=["item-type-events","tooltipping"],ha[Tu()]=["receiving","reflecting","tooltipping"],ha,Ne(K(ha))),pi()),Mi("domModification")]),nc=function(e){return Si("custom.definition",tc,e)},rc=function(e){return A(A({},e.dom),{uid:e.uid,domChildren:x(e.components,function(e){return e.element})})},oc=function(e){return e.domModification.fold(function(){return Fa({})},Fa)},ic=function(e){return e.events},uc=function(e,t){e=jr(e,t);return void 0===e||""===e?[]:e.split(" ")},ac=function(e,t,n){n=uc(e,t).concat([n]);return k(e,t,n.join(" ")),!0},cc=function(e,t,n){var r=Et(uc(e,t),function(e){return e!==n});return 0<r.length?k(e,t,r.join(" ")):$r(e,t),!1},sc=function(e){return void 0!==e.dom.classList},lc=function(e){return uc(e,"class")},fc=function(e,t){return ac(e,"class",t)},dc=function(e,t){return cc(e,"class",t)},mc=function(e,t){sc(e)?e.dom.classList.add(t):fc(e,t)},gc=function(e){0===(sc(e)?e.dom.classList:lc(e)).length&&$r(e,"class")},pc=function(e,t){sc(e)?e.dom.classList.remove(t):dc(e,t),gc(e)},hc=function(e,t){return sc(e)&&e.dom.classList.contains(t)},vc=function(t,e){w(e,function(e){mc(t,e)})},bc=function(t,e){w(e,function(e){pc(t,e)})},yc=function(t,e){return Bt(e,function(e){return hc(t,e)})},wc=function(e){return e.dom.value},xc=function(e,t){if(void 0===t)throw new Error("Value.set was undefined");e.dom.value=t},Cc=function(e){var t=S.fromTag(e.tag),n=(Vr(t,e.attributes),vc(t,e.classes),Kr(t,e.styles),e.innerHtml.each(function(e){return ca(t,e)}),e.domChildren);return Oo(t,n),e.value.each(function(e){xc(t,e)}),e.uid,wa(t,e.uid),t},Sc=function(e){var t=C(e,"behaviours").getOr({});return zt(qt(t),function(e){e=t[e];return z(e)?[e.me]:[]})},kc=function(e,t){return Ba(e,t)},Tc=function(e){var t=Sc(e);return kc(e,t)},Oc=function(e,t,n){var r=rc(e),e=oc(e),n=0<t.length?Va(n,{"alloy.base.modification":e},t,r):e;return Ha(r,n)},Ec=function(e,t,n){var r={"alloy.base.behaviour":ic(e)};return Ya(n,e.eventOrder,t,r).getOrDie()},_c=function(n){function e(){return s}var t=T(Ta),r=ki(nc(n)),o=Tc(n),i=Pa(o),u=Ia(o),o=Oc(r,i,u),a=Cc(o),o=Ec(r,i,u),c=T(r.components),s={uid:n.uid,getSystem:t.get,config:function(e){var t=u;return(B(t[e.name()])?t[e.name()]:function(){throw new Error("Could not find "+e.name()+" in "+JSON.stringify(n,null,2))})()},hasConfigured:function(e){return B(u[e.name()])},spec:n,readState:function(e){return u[e]().map(function(e){return e.state.readState()}).getOr("not enabled")},getApis:function(){return r.apis},connect:function(e){t.set(e)},disconnect:function(){t.set(ka(e))},element:a,syncComponents:function(){var e=Tr(a),e=zt(e,function(e){return t.get().getByDom(e).fold(function(){return[]},Ft)});c.set(e)},components:c.get,events:o};return s},Ac=function(e){e=C(e,"components").getOr([]);return x(e,Bc)},Dc=function(e){var e=Sa(e),t=e.events,e=ue(e,["events"]),n=Ac(e),e=A(A({},e),{events:A(A({},ga),t),components:n});return M.value(_c(e))},Mc=function(e){e=S.fromText(e);return Nc({element:e})},Nc=function(e){var t=Ti("external.component",di([i("element"),Mi("uid")]),e),n=T(ka()),r=t.uid.getOrThunk(function(){return Ca("external")}),o=(wa(t.element,r),{uid:r,getSystem:n.get,config:X.none,hasConfigured:W,connect:function(e){n.set(e)},disconnect:function(){n.set(ka(function(){return o}))},getApis:function(){return{}},element:t.element,spec:e,readState:K("No state"),syncComponents:G,components:K([]),events:{}});return Ma(o)},Rc=Ca,zc=function(e){return rn(e,"uid")},Bc=function(t){return Na(t).getOrThunk(function(){var e=zc(t)?t:A({uid:Rc("")},t);return Dc(e).getOrDie()})},Pc=Ma;function Ic(e,t,n,r,o){return e(n,r)?X.some(n):B(o)&&o(n)?X.none():t(n,r,o)}function Lc(){return Di("markers",[i("backgroundMenu")].concat(Ds()).concat(Ms()))}function Fc(e){return Di("markers",x(e,i))}function Hc(e,t,n){return Es(),Ei(t,t,n,xi(function(n){return M.value(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.apply(void 0,e)})}))}function e(e){return Hc(0,e,Jo(G))}function Vc(e){return Hc(0,e,Jo(X.none))}function jc(e){return Hc(0,e,Xo())}function Uc(e){return Hc(0,e,Xo())}function Wc(e,t){return e.x+e.width/2-t.width/2}function $c(e,t){return e.x+e.width-t.width}function qc(e,t){return e.y-t.height}function Gc(e){return e.y+e.height}function Kc(){return[nl,rl,ol,il,al,ul,cl,sl]}function Xc(){return[rl,nl,il,ol,al,ul,cl,sl]}function Yc(n,r,o){return oa(function(e,t){o(e,n,r)})}function Jc(e,t,n,r,o,i){var u=di(e),e=Ri(t,[zi("config",e)]);return vl(u,e,t,n,r,o,i)}function Zc(e){var t,n,r,o,i,u,e=Ti("Creating behaviour: "+e.name,wl,e);return t=$e(e.branchKey,e.branches),n=e.name,r=e.active,o=e.apis,i=e.extra,e=e.state,t=Ri(n,[Ni("config",u=t)]),vl(u,t,n,r,o,i,e)}function Qc(e,n){var r=Nr(n),t=Ol(r).bind(function(t){function e(e){return gr(t,e)}return e(n)?X.some(n):ds(n,e)}),e=e(n);t.each(function(t){Ol(r).filter(function(e){return gr(e,t)}).fold(function(){kl(t)},G)})}function es(e,t){t=Math.floor(t),t=ro.max(e,t,["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"]),D(e,"max-height",t+"px")}function ts(){return Ri("layouts",[i("onLtr"),i("onRtl"),Mi("onBottomLtr"),Mi("onBottomRtl")])}function ns(e,t,n){var r=br(e.element),r=Ao(r),e=$f(e,t,n).getOr(r);return Wf(e,r.left,r.top)}function rs(e,t,n,r){return e=Uf(uo(e,t)),X.some(Lo(e,n,r))}function os(e,o,i,u,a){return e.map(function(e){var t=[o,e.point],n=Pl(u,function(){return jf(t)},function(){return jf(t)},function(){return Vf(t)}),n=Fo(n.left,n.top,e.width,e.height),e=(i.showAbove?ll:dl)(),r=(i.showAbove?fl:ml)(),e=Bf(a,i,e,r,e,r,X.none());return Df({anchorBox:n,bubble:i.bubble.getOr(Af()),overrides:i.overrides,layouts:e,placer:X.none()})})}var is,us,as,cs,ss=function(e,t,n){for(var r=e.dom,o=B(n)?n:W;r.parentNode;){var r=r.parentNode,i=S.fromDom(r);if(t(i))return X.some(i);if(o(i))break}return X.none()},ls=function(e,t,n){return Ic(function(e,t){return t(e)},ss,e,t,n)},fs=function(e,t){return Mt(e.dom.childNodes,function(e){return t(S.fromDom(e))}).map(S.fromDom)},ds=function(e,r){function o(e){for(var t=0;t<e.childNodes.length;t++){var n=S.fromDom(e.childNodes[t]);if(r(n))return X.some(n);n=o(e.childNodes[t]);if(n.isSome())return n}return X.none()}return o(e.dom)},ms=function(e,t,n){return ls(e,t,n).isSome()},gs=function(e,t,n){return ss(e,function(e){return lr(e,t)},n)},ps=function(e,t){return fs(e,function(e){return lr(e,t)})},hs=function(e,t){return mr(t,e)},vs=function(e,t,n){return Ic(function(e,t){return lr(e,t)},gs,e,t,n)},bs=function(e){return ls(e,function(e){return!!An(e)&&void 0!==(e=jr(e,"id"))&&-1<e.indexOf("aria-owns")}).bind(function(e){var t=jr(e,"id"),e=Nr(e);return hs(e,'[aria-owns="'+t+'"]')})},ys=function(){var t=O("aria-owns");return{id:t,link:function(e){k(e,"aria-owns",t)},unlink:function(e){$r(e,"aria-owns")}}},ws=function(t,e){return bs(e).exists(function(e){return xs(t,e)})},xs=function(t,e){return ms(e,function(e){return gr(e,t.element)},W)||ws(t,e)},Cs="unknown",Ss=((ma=is=is||{})[ma.STOP=0]="STOP",ma[ma.NORMAL=1]="NORMAL",ma[ma.LOGGING=2]="LOGGING",T({})),ks=function(t,n){var r=[],o=(new Date).getTime();return{logEventCut:function(e,t,n){r.push({outcome:"cut",target:t,purpose:n})},logEventStopped:function(e,t,n){r.push({outcome:"stopped",target:t,purpose:n})},logNoParent:function(e,t,n){r.push({outcome:"no-parent",target:t,purpose:n})},logEventNoHandlers:function(e,t){r.push({outcome:"no-handlers-left",target:t})},logEventResponse:function(e,t,n){r.push({outcome:"response",purpose:n,target:t})},write:function(){var e=(new Date).getTime();xt(["mousemove","mouseover","mouseout",Nu()],t)||console.log(t,{event:t,time:e-o,target:n.dom,sequence:x(r,function(e){return xt(["cut","stopped","response"],e.outcome)?"{"+e.purpose+"} "+e.outcome+" at ("+da(e.target)+")":e.outcome})})}}},Ts=function(t,e,n){switch(C(Ss.get(),t).orThunk(function(){var e=qt(Ss.get());return $t(e,function(e){return-1<t.indexOf(e)?X.some(Ss.get()[e]):X.none()})}).getOr(is.NORMAL)){case is.NORMAL:return n(As());case is.LOGGING:var r=ks(t,e),o=n(r);return r.write(),o;case is.STOP:return!0}},Os=["alloy/data/Fields","alloy/debugging/Debugging"],Es=function(){var e=new Error;return void 0!==e.stack?(e=e.stack.split("\n"),Mt(e,function(t){return 0<t.indexOf("alloy")&&!Ct(Os,function(e){return-1<t.indexOf(e)})}).getOr(Cs)):Cs},_s=function(e,t,n){return Ts(e,t,n)},As=K({logEventCut:G,logEventStopped:G,logNoParent:G,logEventNoHandlers:G,logEventResponse:G,write:G}),Ds=K([i("menu"),i("selectedMenu")]),Ms=K([i("item"),i("selectedItem")]),ha=(K(m(Ms().concat(Ds()))),K(m(Ms()))),ma=Di("initSize",[i("numColumns"),i("numRows")]),Ns=function(e,t){return _i(e,K(t))},Rs=function(e){return _i(e,v)},ma=K(ma),zs=function(e,t,n,r,o,i,u,a){return{x:e,y:t,bubble:n,direction:r,placement:o,restriction:i,label:u+"-"+o,alwaysFit:a=void 0===a?!1:a}},Bs=Pi([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),Ps=function(e,t,n,r,o,i,u,a,c){return e.fold(t,n,r,o,i,u,a,c)},Is=function(e,t,n,r){return e.fold(t,t,r,r,t,r,n,n)},Ls=function(e,t,n,r){return e.fold(t,r,t,r,n,n,t,r)},Fs=Bs.southeast,Hs=Bs.southwest,Vs=Bs.northeast,js=Bs.northwest,Us=Bs.south,Ws=Bs.north,$s=Bs.east,qs=Bs.west,Gs=function(e,t,n,r){e+=t;return r<e?n:e<n?r:e},Ks=function(e,t,n){return Math.min(Math.max(e,t),n)},Xs=function(e,t){switch(t){case 1:return e.x;case 0:return e.x+e.width;case 2:return e.y;case 3:return e.y+e.height}},Ys=function(t,n){return Lt(["left","right","top","bottom"],function(e){return C(n,e).map(function(e){return Xs(t,e)})})},Js=function(i,e,u){function t(r,o){return e[r].map(function(e){var t="top"===r||"bottom"===r,n=t?u.top:u.left,e=("left"===r||"top"===r?Math.max:Math.min)(e,o)+n;return t?Ks(e,i.y,i.bottom):Ks(e,i.x,i.right)}).getOr(o)}var n=t("left",i.x),r=t("top",i.y),o=t("right",i.right),a=t("bottom",i.bottom);return Ho(n,r,o-n,a-r)},Zs="layout",Qs=function(e,t){return e.y+e.height/2-t.height/2},el=function(e){return e.x+e.width},tl=function(e,t){return e.x-t.width},nl=function(e,t,n){return zs(e.x,Gc(e),n.southeast(),Fs(),"southeast",Ys(e,{left:1,top:3}),Zs)},rl=function(e,t,n){return zs($c(e,t),Gc(e),n.southwest(),Hs(),"southwest",Ys(e,{right:0,top:3}),Zs)},ol=function(e,t,n){return zs(e.x,qc(e,t),n.northeast(),Vs(),"northeast",Ys(e,{left:1,bottom:2}),Zs)},il=function(e,t,n){return zs($c(e,t),qc(e,t),n.northwest(),js(),"northwest",Ys(e,{right:0,bottom:2}),Zs)},ul=function(e,t,n){return zs(Wc(e,t),qc(e,t),n.north(),Ws(),"north",Ys(e,{bottom:2}),Zs)},al=function(e,t,n){return zs(Wc(e,t),Gc(e),n.south(),Us(),"south",Ys(e,{top:3}),Zs)},cl=function(e,t,n){return zs(el(e),Qs(e,t),n.east(),$s(),"east",Ys(e,{left:0}),Zs)},sl=function(e,t,n){return zs(tl(e,t),Qs(e,t),n.west(),qs(),"west",Ys(e,{right:1}),Zs)},ll=function(){return[ol,il,nl,rl,ul,al]},fl=function(){return[il,ol,rl,nl,ul,al]},dl=function(){return[nl,rl,ol,il,al,ul]},ml=function(){return[rl,nl,il,ol,al,ul]},Bs=Object.freeze({__proto__:null,events:function(u){return Yu([Z(Tu(),function(r,e){var t,o=u.channels,n=qt(o),i=e,n=(e=n,(t=i).universal?e:Et(e,function(e){return xt(t.channels,e)}));w(n,function(e){var t=o[e],n=t.schema,e=Ti("channel["+e+"] data\nReceiver: "+da(r.element),n,i.data);t.onReceive(r,e)})})])}}),gl=[Ai("channels",We(M.value,di([jc("onReceive"),s("schema",pi())])))],pl=function(o,i,u){return Oa(function(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];var r=[n].concat(e);return n.config({name:K(o)}).fold(function(){throw new Error("We could not find any behaviour configuration for: "+o+". Using API: "+u)},function(e){var t=Array.prototype.slice.call(r,1);return i.apply(void 0,[n,e.config,e.state].concat(t))})},u,i)},hl=function(e){return{key:e,value:void 0}},vl=function(n,e,r,t,o,i,u){function a(e){return on(e,r)?e[r]():X.none()}var o=Xt(o,function(e,t){return pl(r,e,t)}),i=Xt(i,function(e,t){return _a(e,t)}),c=A(A(A({},i),o),{revoke:V(hl,r),config:function(e){var t=Ti(r+"-config",n,e);return{key:r,value:{config:t,me:c,configAsRaw:Rn(function(){return Ti(r+"-config",n,e)}),initialConfig:e,state:u}}},schema:K(e),exhibit:function(e,n){return sn(a(e),C(t,"exhibit"),function(e,t){return t(n,e.config,e.state)}).getOrThunk(function(){return Fa({})})},name:K(r),handlers:function(e){return a(e).map(function(e){return C(t,"events").getOr(function(){return{}})(e.config,e.state)}).getOr({})}});return c},Q=function(e){return Vi(e)},bl=di([i("fields"),i("name"),s("active",{}),s("apis",{}),s("state",Ra),s("extra",{})]),yl=function(e){e=Ti("Creating behaviour: "+e.name,bl,e);return Jc(e.fields,e.name,e.active,e.apis,e.extra,e.state)},wl=di([i("branchKey"),i("branches"),i("name"),s("active",{}),s("apis",{}),s("state",Ra),s("extra",{})]),xl=K(void 0),Cl=yl({fields:gl,name:"receiving",active:Bs}),gl=Object.freeze({__proto__:null,exhibit:function(e,t){return Fa({classes:[],styles:t.useFixed()?{}:{position:"relative"}})}}),Sl=function(){return S.fromDom(document)},kl=function(e){return e.dom.focus()},Tl=function(e){var t=Nr(e).dom;return e.dom===t.activeElement},Ol=function(e){return void 0===e&&(e=Sl()),X.from(e.dom.activeElement).map(S.fromDom)},El=function(t){return Ol(Nr(t)).filter(function(e){return t.dom.contains(e.dom)})},_l=function(e,t,n,r,o){function i(e){return e+"px"}return{position:e,left:t.map(i),top:n.map(i),right:r.map(i),bottom:o.map(i)}},Al=function(e){return A(A({},e),{position:X.some(e.position)})},Dl=function(e,t){Xr(e,Al(t))},Bs=Pi([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),Ml=function(e,t,n,r,o,i){var u=t.rect,n=u.x-n,r=u.y-r,o=o-(n+u.width),i=i-(r+u.height),a=X.some(n),c=X.some(r),s=X.some(o),l=X.some(i),f=X.none();return Ps(t.direction,function(){return _l(e,a,c,f,f)},function(){return _l(e,f,c,s,f)},function(){return _l(e,a,f,f,l)},function(){return _l(e,f,f,s,l)},function(){return _l(e,a,c,f,f)},function(){return _l(e,a,f,f,l)},function(){return _l(e,a,c,f,f)},function(){return _l(e,f,c,s,f)})},Nl=function(e,o){return e.fold(function(){var e=o.rect;return _l("absolute",X.some(e.x),X.some(e.y),X.none(),X.none())},function(e,t,n,r){return Ml("absolute",o,e,t,n,r)},function(e,t,n,r){return Ml("fixed",o,e,t,n,r)})},Rl=function(e,t){var n=V(Io,t),e=e.fold(n,n,function(){var e=Ao();return Io(t).translate(-e.left,-e.top)}),n=po(t),r=io(t);return Ho(e.left,e.top,n,r)},zl=function(r,e){return e.fold(function(){return r.fold(Uo,Uo,Ho)},function(n){return r.fold(n,n,function(){var e=n(),t=Bl(r,e.x,e.y);return Ho(t.left,t.top,e.width,e.height)})})},Bl=function(e,t,n){var r=uo(t,n);return e.fold(K(r),K(r),function(){var e=Ao();return r.translate(-e.left,-e.top)})},Pl=function(e,t,n,r){return e.fold(t,n,r)},Il=(Bs.none,Bs.relative),Ll=Bs.fixed,Fl=function(e,t){return{anchorBox:e,origin:t}},Hl=function(e,t){return Fl(e,t)},Vl="data-alloy-placement",jl=function(e,t){k(e,Vl,t)},Ul=function(e){return Ur(e,Vl)},Wl=Pi([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),$l=function(e,t){var n=t.x,r=t.y,o=t.right,t=t.bottom,i=e.x,u=e.y,a=e.right,c=e.bottom,s=e.width,e=e.height;return{originInBounds:n<=i&&i<=o&&(r<=u&&u<=t),sizeInBounds:a<=o&&n<=a&&(c<=t&&r<=c),visibleW:Math.min(s,n<=i?o-i:a-n),visibleH:Math.min(e,r<=u?t-u:c-r)}},ql=function(e,t){var n=t.x,r=t.y,o=t.right,t=t.bottom,i=e.x,u=e.y,a=e.width,e=e.height,c=Math.max(n,o-a),s=Math.max(r,t-e),i=Ks(i,n,c),n=Ks(u,r,s),c=Math.min(i+a,o)-i,u=Math.min(n+e,t)-n;return Ho(i,n,c,u)},Gl=function(e,t,n){var r=K(t.bottom-n.y),o=K(n.bottom-t.y),o=Is(e,o,o,r),r=K(t.right-n.x),n=K(n.right-t.x);return{maxWidth:Ls(e,n,n,r),maxHeight:o}},Kl=function(e,t,n,r){var o=e.bubble,i=o.offset,u=Js(r,e.restriction,i),a=e.x+i.left,i=e.y+i.top,a=Ho(a,i,t,n),t=$l(a,u),n=t.originInBounds,c=t.sizeInBounds,s=t.visibleW,t=t.visibleH,n=n&&c,c=n?a:ql(a,u),a=0<c.width&&0<c.height,u=Gl(e.direction,c,r),r=u.maxWidth,c={rect:c,maxHeight:u.maxHeight,maxWidth:r,direction:e.direction,placement:e.placement,classes:{on:o.classesOn,off:o.classesOff},layout:e.label,testY:i};return n||e.alwaysFit?Wl.fit(c):Wl.nofit(c,s,t,a)},Xl=function(t,e,n,r,s,l){function o(e,o,i,u,a){var e=e(n,r,s,t,l),c=Kl(e,f,d,l);return c.fold(K(c),function(e,t,n,r){return(a===r?u<n||i<t:!a&&r)?c:Wl.nofit(o,i,u,a)})}var f=r.width,d=r.height;return At(e,function(e,t){t=V(o,t);return e.fold(K(e),t)},Wl.nofit({rect:n,maxHeight:r.height,maxWidth:r.width,direction:Fs(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:n.y},-1,-1,!1)).fold(v,v)},Yl=function(e){function t(){n.get().each(e)}var n=T(X.none());return{clear:function(){t(),n.set(X.none())},isSet:function(){return n.get().isSome()},get:function(){return n.get()},set:function(e){t(),n.set(X.some(e))}}},Jl=function(){return Yl(function(e){return e.destroy()})},Zl=function(){return Yl(function(e){return e.unbind()})},Ql=function(){var t=Jl();return A(A({},t),{run:function(e){return t.get().each(e)}})},ef=function(){var t=Yl(G);return A(A({},t),{on:function(e){return t.get().each(e)}})},tf=$,nf=function(e,t,n){return yo(e,t,tf,n)},rf=function(e,t,n){return wo(e,t,tf,n)},of=ho,uf=["top","bottom","right","left"],af="data-alloy-transition-timer",cf=function(e,t){return yc(e,t.classes)},sf=function(n,r,e){return e.exists(function(e){var t=n.mode;return"all"===t||e[t]!==r[t]})},lf=function(n,e){function r(e){return parseFloat(e).toFixed(3)}return tn(e,function(e,t){t=n[t].map(r),e=e.map(r);return!an(t,e)}).isSome()},ff=function(t){function e(e){return e=Yr(t,e),e=d(e)?e.split(/\s*,\s*/):[],Et(e,xn)}function r(e){var t;return d(e)&&/^[\d.]+/.test(e)?(t=parseFloat(e),yn(e,"ms")?t:1e3*t):0}var o=e("transition-delay"),n=e("transition-duration");return At(n,function(e,t,n){n=r(o[n])+r(t);return Math.max(e,n)},0)},df=function(n,t){function e(e){(R(e)||c(e))&&(u.clear(),a.clear(),e=null==e?void 0:e.raw.type,!R(e)&&e!==yu()||(clearTimeout(o),$r(n,af),bc(n,t.classes)))}function r(){u.set(nf(n,yu(),e)),a.set(nf(n,bu(),e))}var o,i,u=Zl(),a=Zl(),c=function(e){var t=null!=(t=e.raw.pseudoElement)?t:"";return gr(e.target,n)&&Cn(t)&&xt(uf,e.raw.propertyName)},s=("ontransitionstart"in n.dom?i=nf(n,wu(),function(e){c(e)&&(i.unbind(),r())}):r(),ff(n));requestAnimationFrame(function(){o=setTimeout(e,s+17),k(n,af,o)})},mf=function(t,e){vc(t,e.classes),Ur(t,af).each(function(e){clearTimeout(parseInt(e,10)),$r(t,af)}),df(t,e)},gf=function(e,t,n,r,o,i){var u,a,i=sf(r,o,i);i||cf(e,r)?(D(e,"position",n.position),u=Rl(t,e),a=Nl(t,A(A({},o),{rect:u})),t=Lt(uf,function(e){return a[e]}),lf(n,t)&&(Xr(e,t),i&&mf(e,r),no(e))):bc(e,r.classes)},pf=function(e){return{width:po(e),height:io(e)}},hf=function(e,t,n,r){to(t,"max-height"),to(t,"max-width");var o=pf(t);return Xl(t,r.preference,e,o,n,r.bounds)},vf=function(e,t){t=t.classes;bc(e,t.off),vc(e,t.on)},bf=function(e,t,n){(0,n.maxHeightFunction)(e,t.maxHeight)},yf=function(e,t,n){(0,n.maxWidthFunction)(e,t.maxWidth)},wf=function(t,n,r){var o=Nl(r.origin,n);r.transition.each(function(e){gf(t,r.origin,o,e,n,r.lastPlacement)}),Dl(t,o)},xf=function(e,t){jl(e,t.placement)},Cf=K(function(e,t){es(e,t),Kr(e,{"overflow-x":"hidden","overflow-y":"auto"})}),Sf=K(function(e,t){es(e,t)}),kf=function(e,t,n){return void 0===e[t]?n:e[t]},Tf=function(e,t,n,r,o,i,u,a){var c=kf(u,"maxHeightFunction",Cf()),u=kf(u,"maxWidthFunction",G),s=e.anchorBox,e=e.origin,i={bounds:zl(e,i),origin:e,preference:r,maxHeightFunction:c,maxWidthFunction:u,lastPlacement:o,transition:a};return Of(s,t,n,i)},Of=function(e,t,n,r){e=hf(e,t,n,r);return wf(t,e,r),xf(t,e),vf(t,e),bf(t,e,r),yf(t,e,r),{layout:e.layout,placement:e.placement}},Ef=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],_f=function(e,t,n,r){function o(e){return C(n,e).getOr([])}function i(e,t,n){var r=It(Ef,n);return{offset:uo(e,t),classesOn:zt(n,o),classesOff:zt(r,o)}}var u=e*(r=void 0===r?1:r),a=t*r;return{southeast:function(){return i(-e,t,["top","alignLeft"])},southwest:function(){return i(e,t,["top","alignRight"])},south:function(){return i(-e/2,t,["top","alignCentre"])},northeast:function(){return i(-e,-t,["bottom","alignLeft"])},northwest:function(){return i(e,-t,["bottom","alignRight"])},north:function(){return i(-e/2,-t,["bottom","alignCentre"])},east:function(){return i(e,-t/2,["valignCentre","left"])},west:function(){return i(-e,-t/2,["valignCentre","right"])},insetNortheast:function(){return i(u,a,["top","alignLeft","inset"])},insetNorthwest:function(){return i(-u,a,["top","alignRight","inset"])},insetNorth:function(){return i(-u/2,a,["top","alignCentre","inset"])},insetSoutheast:function(){return i(u,-a,["bottom","alignLeft","inset"])},insetSouthwest:function(){return i(-u,-a,["bottom","alignRight","inset"])},insetSouth:function(){return i(-u/2,-a,["bottom","alignCentre","inset"])},insetEast:function(){return i(-u,-a/2,["valignCentre","right","inset"])},insetWest:function(){return i(u,-a/2,["valignCentre","left","inset"])}}},Af=function(){return _f(0,0,{})},Df=v,Mf=function(t,n){return function(e){return"rtl"===Nf(e)?n:t}},Nf=function(e){return"rtl"===Yr(e,"direction")?"rtl":"ltr"},Rf=((Bs=us=us||{}).TopToBottom="toptobottom",Bs.BottomToTop="bottomtotop","data-alloy-vertical-dir"),zf=function(e){return ms(e,function(e){return An(e)&&jr(e,"data-alloy-vertical-dir")===us.BottomToTop})},Bf=function(t,e,n,r,o,i,u){var u=u.map(zf).getOr(!1),a=e.layouts.map(function(e){return e.onLtr(t)}),c=e.layouts.map(function(e){return e.onRtl(t)}),o=u?e.layouts.bind(function(e){return e.onBottomLtr.map(function(e){return e(t)})}).or(a).getOr(o):a.getOr(n),a=u?e.layouts.bind(function(e){return e.onBottomRtl.map(function(e){return e(t)})}).or(c).getOr(i):c.getOr(r);return Mf(o,a)(t)},Bs=[i("hotspot"),Mi("bubble"),s("overrides",{}),ts(),Ns("placement",function(e,t,n){var r=t.hotspot,n=Rl(n,r.element),r=Bf(e.element,t,dl(),ml(),ll(),fl(),X.some(t.hotspot.element));return X.some(Df({anchorBox:n,bubble:t.bubble.getOr(Af()),overrides:t.overrides,layouts:r,placer:X.none()}))})],Pf=[i("x"),i("y"),s("height",0),s("width",0),s("bubble",Af()),s("overrides",{}),ts(),Ns("placement",function(e,t,n){n=Bl(n,t.x,t.y),n=Ho(n.left,n.top,t.width,t.height),e=Bf(e.element,t,Kc(),Xc(),Kc(),Xc(),X.none());return X.some(Df({anchorBox:n,bubble:t.bubble,overrides:t.overrides,layouts:e,placer:X.none()}))})],If=Pi([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),Lf=function(e){return e.fold(v,function(e,t,n){return e.translate(-t,-n)})},Ff=function(e){return e.fold(v,v)},Hf=function(e){return At(e,function(e,t){return e.translate(t.left,t.top)},uo(0,0))},Vf=function(e){e=x(e,Lf);return Hf(e)},jf=function(e){e=x(e,Ff);return Hf(e)},Uf=If.screen,Wf=If.absolute,$f=function(n,e,t){t=xr(t.root).dom;return X.from(t.frameElement).map(S.fromDom).filter(function(e){var e=br(e),t=br(n.element);return gr(e,t)}).map(so)},If=[i("node"),i("root"),Mi("bubble"),ts(),s("overrides",{}),s("showAbove",!1),Ns("placement",function(n,r,o){var i=ns(n,o,r);return r.node.filter(Ir).bind(function(e){var e=e.dom.getBoundingClientRect(),e=rs(e.left,e.top,e.width,e.height),t=r.node.getOr(n.element);return os(e,i,r,o,t)})})],qf="",Gf={create:function(e,t,n,r){return{start:e,soffset:t,finish:n,foffset:r}}},Kf=Pi([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Xf={before:Kf.before,on:Kf.on,after:Kf.after,cata:function(e,t,n,r){return e.fold(t,n,r)},getStart:function(e){return e.fold(v,v,v)}},Yf=Pi([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Jf={domRange:Yf.domRange,relative:Yf.relative,exact:Yf.exact,exactFromRange:function(e){return Yf.exact(e.start,e.soffset,e.finish,e.foffset)},getWin:function(e){e=e.match({domRange:function(e){return S.fromDom(e.startContainer)},relative:function(e,t){return Xf.getStart(e)},exact:function(e,t,n,r){return e}});return xr(e)},range:Gf.create},Zf=function(n,e){e.fold(function(e){n.setStartBefore(e.dom)},function(e,t){n.setStart(e.dom,t)},function(e){n.setStartAfter(e.dom)})},Qf=function(n,e){e.fold(function(e){n.setEndBefore(e.dom)},function(e,t){n.setEnd(e.dom,t)},function(e){n.setEndAfter(e.dom)})},ed=function(e,t,n){e=e.document.createRange();return Zf(e,t),Qf(e,n),e},td=function(e,t,n,r,o){e=e.document.createRange();return e.setStart(t.dom,n),e.setEnd(r.dom,o),e},nd=function(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom,width:e.width,height:e.height}},rd=function(e){var t=e.getClientRects(),t=0<t.length?t[0]:e.getBoundingClientRect();return 0<t.width||0<t.height?X.some(t).map(nd):X.none()},od=function(e){e=e.getBoundingClientRect();return 0<e.width||0<e.height?X.some(e).map(nd):X.none()},id=Pi([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),ud=function(e,t,n){return t(S.fromDom(n.startContainer),n.startOffset,S.fromDom(n.endContainer),n.endOffset)},ad=function(o,e){return e.match({domRange:function(e){return{ltr:K(e),rtl:X.none}},relative:function(e,t){return{ltr:Rn(function(){return ed(o,e,t)}),rtl:Rn(function(){return X.some(ed(o,t,e))})}},exact:function(e,t,n,r){return{ltr:Rn(function(){return td(o,e,t,n,r)}),rtl:Rn(function(){return X.some(td(o,n,r,e,t))})}}})},cd=function(e,t){var n=t.ltr();return n.collapsed?t.rtl().filter(function(e){return!1===e.collapsed}).map(function(e){return id.rtl(S.fromDom(e.endContainer),e.endOffset,S.fromDom(e.startContainer),e.startOffset)}).getOrThunk(function(){return ud(e,id.ltr,n)}):ud(e,id.ltr,n)},sd=function(e,t){t=ad(e,t);return cd(e,t)},ld=function(i,e){return sd(i,e).match({ltr:function(e,t,n,r){var o=i.document.createRange();return o.setStart(e.dom,t),o.setEnd(n.dom,r),o},rtl:function(e,t,n,r){var o=i.document.createRange();return o.setStart(n.dom,r),o.setEnd(e.dom,t),o}})},fd=(id.ltr,id.rtl,as=Dn,cs="text",{get:function(e){if(as(e))return dd(e).getOr("");throw new Error("Can only get "+cs+" value of a "+cs+" node")},getOption:dd,set:function(e,t){if(!as(e))throw new Error("Can only set raw "+cs+" value of a "+cs+" node");e.dom.nodeValue=t}});function dd(e){return as(e)?X.from(e.dom.nodeValue):X.none()}function md(e,t){return t.getSelection.getOrThunk(function(){return function(){return Ag(e)}})().map(function(e){var t=Rg(e.start,e.soffset),e=Rg(e.finish,e.foffset);return Jf.range(t.element,t.offset,e.element,e.offset)})}function gd(){return[Fg,Hg,Vg,jg]}function pd(){return[Hg,Fg,jg,Vg]}function hd(){var e=document.documentElement;return Ll(0,0,e.clientWidth,e.clientHeight)}function vd(e){var t=so(e.element),e=e.element.dom.getBoundingClientRect();return Il(t.left,t.top,e.width,e.height)}function bd(e,t,n,r,o,i,u){return t=Hl(n.anchorBox,t),Tf(t,o.element,n.bubble,n.layouts,i,r,n.overrides,u)}function yd(e,t,n,r,o,i){return i=i.map(Vo),$g(e,t,n,r,o,i)}function wd(t,e){var n=t.components(),n=(Yg(t),It(n,e));w(n,function(e){Gg(e),t.getSystem().removeFromWorld(e)}),w(e,function(e){e.getSystem().isConnected()?Xg(t,e):(t.getSystem().addToWorld(e),Xg(t,e),Ir(t.element)&&Kg(e)),t.syncComponents()})}function xd(e,t){np(e,t,ko)}function Cd(t,e,n,r){return n.get().each(function(e){tp(t)}),e=e.getAttachPoint(t),Jg(e,t),e=t.getSystem().build(r),Jg(t,e),n.set(e),e}function Sd(e,t,n,r){return n=Cd(e,t,n,r),t.onOpen(e,n),n}function kd(t,n,r){r.get().each(function(e){tp(t),ep(t),n.onClose(t,e),r.clear()})}function Td(e,t,n){return n.isOpen()}function Od(e,t,n){var r,o,i=t.getAttachPoint(e);D(e.element,"position",qg.getMode(i)),r=e,i="visibility",o=t.cloakVisibilityAttr,e="hidden",Zr(r.element,i).fold(function(){$r(r.element,o)},function(e){k(r.element,o,e)}),D(r.element,i,e)}function Ed(e,t,n){var r,o,i;r=e.element,Ct(["top","left","right","bottom"],function(e){return Zr(r,e).isSome()})||to(e.element,"position"),o=e,i="visibility",e=t.cloakVisibilityAttr,Ur(o.element,e).fold(function(){return to(o.element,i)},function(e){return D(o.element,i,e)})}function _d(e,t,n){t.store.manager.onLoad(e,t,n)}function Ad(e,t,n){t.store.manager.onUnload(e,t,n)}function Dd(){var e=T(null);return za({set:e.set,get:e.get,isNotSet:function(){return null===e.get()},clear:function(){e.set(null)},readState:function(){return{mode:"memory",value:e.get()}}})}function Md(){var i=T({}),u=T({});return za({readState:function(){return{mode:"dataset",dataByValue:i.get(),dataByText:u.get()}},lookup:function(e){return C(i.get(),e).orThunk(function(){return C(u.get(),e)})},update:function(e){var t=i.get(),n=u.get(),r={},o={};w(e,function(t){r[t.value]=t,C(t,"meta").each(function(e){C(e,"text").each(function(e){o[e]=t})})}),i.set(A(A({},t),r)),u.set(A(A({},n),o))},clear:function(){i.set({}),u.set({})}})}function Nd(e,t,n,r){var o=t.store;n.update([r]),o.setValue(e,r),t.onSetValue(e,r)}function Rd(r,e){return at(r,{},x(e,function(e){return t=e.name(),n="Cannot configure "+e.name()+" for "+r,Ei(t,t,Zo(),ui(function(e){return Wo.serror("The field: "+t+" is forbidden. "+n)}));var t,n}).concat([_i("dump",v)]))}function zd(t,n,e,r){return r=Xt(r,function(e,t){return xp(t,e)}),e=wp(t,n,e,r),Kt(r,function(e){if(!1===e.used()&&e.required())throw new Error("Placeholder: "+e.name()+" was not found in components list\nNamespace: "+t.getOr("none")+"\nComponents: "+JSON.stringify(n.components,null,2))}),e}function Bd(e){return e.fold(X.some,X.none,X.some,X.some)}function Pd(e){function t(e){return e.name}return e.fold(t,t,t,t)}function Id(t,n){return function(e){e=Ti("Converting part type",n,e);return t(e)}}function Ld(e,n,t){var i={},r={};return w(t,function(e){e.fold(function(r){i[r.pname]=Cp(!0,function(e,t,n){return r.factory.sketch(Np(e,r,t,n))})},function(e){var t=n.parts[e.name];r[e.name]=K(e.factory.sketch(Np(n,e,t[Mp()]),t))},function(r){i[r.pname]=Cp(!1,function(e,t,n){return r.factory.sketch(Np(e,r,t,n))})},function(o){i[o.pname]=Sp(!0,function(t,e,n){var r=t[o.name];return x(r,function(e){return o.factory.sketch(Go(o.defaults(t,e,n),e,o.overrides(t,e)))})})})}),{internals:K(i),externals:K(r)}}function Fd(o,e){var i={};return w(e,function(e){Bd(e).each(function(n){e=o,t=n.pname;var e,t,r={uiType:kp(),owner:e,name:t};i[n.name]=function(e){var t=Ti("Part: "+n.name+" in "+o,m(n.schema),e);return A(A({},r),{config:e,validated:t})}})}),i}function Hd(e,t,n){return{uiType:kp(),owner:e,name:t,config:n,validated:{}}}function Vd(e){return x(e,Pd)}function jd(e,t,n){var r={},o=t.partUids,i=e.getSystem();return w(n,function(e){r[e]=K(i.getByUid(o[e]))}),r}function Ud(e,t,n){var r={},o=t.partUids,i=e.getSystem();return w(n,function(e){r[e]=K(i.getByUid(o[e]).getOrDie())}),r}function Wd(t,e){return e=Vd(e),Vi(x(e,function(e){return{key:e,value:t+"-"+e}}))}function $d(e,t,n,r){return r=Wp(r),n(jp(e,t,r,[],[]),r)}function qd(e,t,n,r,o){var o=Wp(o),i=Rp(n),u=Hp(n),t=jp(e,t,o,i,[u]),i=zp(e,t,n);return r(t,Bp(e,t,i.internals()),o,i.externals())}function Gd(e){var t=Ti("Sketcher for "+e.name,Gp,e),e=Fd(t.name,t.partFields),n=Xt(t.apis,mt),r=Xt(t.extraApis,function(e,t){return _a(e,t)});return A(A({name:t.name,partFields:t.partFields,configFields:t.configFields,sketch:function(e){return qd(t.name,t.configFields,t.partFields,t.factory,e)},parts:e},n),r)}function Kd(e){return"input"===_n(e)&&"radio"!==jr(e,"type")||"textarea"===_n(e)}function Xd(e,t,n){(t.disabled()?tm:nm)(e,t)}function Yd(e,t){return!0===t.useNative&&xt(Xp,_n(e.element))}function Jd(e){k(e.element,"disabled","disabled")}function Zd(e){$r(e.element,"disabled")}function Qd(e){k(e.element,"aria-disabled","true")}function em(e){k(e.element,"aria-disabled","false")}function tm(t,e,n){e.disableClass.each(function(e){mc(t.element,e)}),(Yd(t,e)?Jd:Qd)(t),e.onDisabled(t)}function nm(t,e,n){e.disableClass.each(function(e){pc(t.element,e)}),(Yd(t,e)?Zd:em)(t),e.onEnabled(t)}function rm(e,t){return Yd(e,t)?Wr(e.element,"disabled"):"true"===jr(e.element,"aria-disabled")}function om(n,r,e,o){var t=Sg(n.element,"."+r.highlightClass);w(t,function(t){Ct(o,function(e){return e.element===t})||(pc(t,r.highlightClass),n.getSystem().getByDom(t).each(function(e){r.onDehighlight(n,e),Y(e,$u())}))})}function im(e,t,n,r){om(e,t,0,[r]),um(0,t,0,r)||(mc(r.element,t.highlightClass),t.onHighlight(e,r),Y(r,Wu()))}function um(e,t,n,r){return hc(r.element,t.highlightClass)}function am(t,e,n){return hs(t.element,"."+e.itemClass).bind(function(e){return t.getSystem().getByDom(e).toOptional()})}function cm(t,e,n){return(0<(e=Sg(t.element,"."+e.itemClass)).length?X.some(e[e.length-1]):X.none()).bind(function(e){return t.getSystem().getByDom(e).toOptional()})}function sm(t,n,e,r){var o=Sg(t.element,"."+n.itemClass);return Nt(o,function(e){return hc(e,n.highlightClass)}).bind(function(e){e=Gs(e,r,0,o.length-1);return t.getSystem().getByDom(o[e]).toOptional()})}function lm(t,e,n){return e=Sg(t.element,"."+e.itemClass),cn(x(e,function(e){return t.getSystem().getByDom(e).toOptional()}))}function fm(e,t,n){var r=Pt(e.slice(0,t)),e=Pt(e.slice(t+1));return Mt(r.concat(e),n)}function dm(e,t,n){return e=Pt(e.slice(0,t)),Mt(e,n)}function mm(e,t,n){var r=e.slice(0,t),e=e.slice(t+1);return Mt(e.concat(r),n)}function gm(e,t,n){return e=e.slice(t+1),Mt(e,n)}function pm(e){return function(t){return Bt(e,function(e){return e(t)})}}function hm(e){return!0===e.raw.shiftKey}function vm(e){return!0===e.raw.ctrlKey}function l(e,t){return{matches:e,classification:t}}function bm(e,t,n,r,a){function c(t,n,e,r,o){return e=e(t,n,r,o),ah(e,n.event).bind(function(e){return e(t,n,r,o)})}var o={schema:function(){return e.concat([s("focusManager",sh()),Bi("focusInside","onFocus",xi(function(e){return xt(["onFocus","onEnterOrSpace","onApi"],e)?M.value(e):M.error("Invalid value for focusInside")})),Ns("handler",o),Ns("state",t),Ns("sendFocusIn",a)])},processKey:c,toEvents:function(i,u){var e=i.focusInside!==mg.OnFocusMode?X.none():a(i).map(function(n){return Z(Cu(),function(e,t){n(e,i,u),t.stop()})}),t=[Z(mu(),function(r,o){c(r,o,n,i,u).fold(function(){var t,n,e;t=r,n=o,e=f(th.concat(Qp))(n.event),i.focusInside===mg.OnEnterOrSpaceMode&&e&&Ki(t,n)&&a(i).each(function(e){e(t,i,u),n.stop()})},function(e){o.stop()})}),Z(gu(),function(e,t){c(e,t,r,i,u).each(function(e){t.stop()})})];return Yu(e.toArray().concat(t))}};return o}function ym(e){function t(t,n,e){!function(e,t){e=Sg(e.element,t.selector),e=Et(e,function(e){return r(t,e)});return X.from(e[t.firstTabstop])}(t,n).each(function(e){n.focusManager.set(t,e)})}function o(t,e,n,r){var o=Sg(t.element,n.selector);return i(t,n).bind(function(e){return Nt(o,V(gr,e)).bind(function(e){return a(t,o,e,n,r)})})}var e=[Mi("onEscape"),Mi("onEnter"),s("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),s("firstTabstop",0),s("useTabstopAt",$),Mi("visibilitySelector")].concat([e]),r=function(e,t){e=e.visibilitySelector.bind(function(e){return vs(t,e)}).getOr(t);return 0<oo(e)},i=function(e,t){return t.focusManager.get(e).bind(function(e){return vs(e,t.selector)})},u=function(e,t){return r(e,t)&&e.useTabstopAt(t)},a=function(t,e,n,r,o){return o(e,n,function(e){return u(r,e)}).fold(function(){return r.cyclic?X.some(!0):X.none()},function(e){return r.focusManager.set(t,e),X.some(!0)})},n=K([l(pm([hm,f(Zp)]),function(e,t,n){var r=n.cyclic?fm:dm;return o(e,0,n,r)}),l(f(Zp),function(e,t,n){var r=n.cyclic?mm:gm;return o(e,0,n,r)}),l(f(eh),function(t,n,e){return e.onEscape.bind(function(e){return e(t,n)})}),l(pm([uh,f(Qp)]),function(t,n,e){return e.onEnter.bind(function(e){return e(t,n)})})]),c=K([]);return bm(e,Ra.init,n,c,function(){return X.some(t)})}function wm(e,t,n){return Kd(n)&&f(th)(t.event)?X.none():(Gu(e,n,Ou()),X.some(!0))}function xm(e,t){return X.some(!0)}function Cm(e,t,n){return n.execute(e,t,e.element)}function Sm(){var n=ef();return za({readState:function(){return n.get().map(function(e){return{numRows:String(e.numRows),numColumns:String(e.numColumns)}}).getOr({numRows:"?",numColumns:"?"})},setGridSize:function(e,t){n.set({numRows:e,numColumns:t})},getNumRows:function(){return n.get().map(function(e){return e.numRows})},getNumColumns:function(){return n.get().map(function(e){return e.numColumns})}})}function km(i){return function(e,t,n,r){var o=i(e.element);return fh(o,e,t,n,r)}}function Tm(e,t){return e=Mf(e,t),km(e)}function Om(e,t){return t=Mf(t,e),km(t)}function Em(o){return function(e,t,n,r){return fh(o,e,t,n,r)}}function _m(e,t){return Nt(e,function(e){return gr(t,e)})}function Am(r,e,o,i,u){return vh(r,e,i,function(e,t){var n=e===o-1?r.length-e*i:i,t=Gs(t,u,0,n-1);return X.some({row:e,column:t})})}function Dm(r,e,o,i,u){return vh(r,e,i,function(e,t){var e=Gs(e,u,0,o-1),n=e===o-1?r.length-e*i:i,t=Ks(t,0,n-1);return X.some({row:e,column:t})})}function Mm(t,n,e){hs(t.element,n.selector).each(function(e){n.focusManager.set(t,e)})}function Nm(o){return function(e,t,n,r){return hh(e,t,n.selector).bind(function(e){return o(e.candidates,e.index,r.getNumRows().getOr(n.initSize.numRows),r.getNumColumns().getOr(n.initSize.numColumns))})}}function Rm(e,t,n){return n.captureTab?X.some(!0):X.none()}function zm(t,n,e){n.getInitial(t).orThunk(function(){return hs(t.element,n.selector)}).each(function(e){n.focusManager.set(t,e)})}function Bm(e,t,n){return Sh(e,n.selector,t,-1)}function Pm(e,t,n){return Sh(e,n.selector,t,1)}function Im(o){return function(e,t,n,r){return o(e,t,n,r).bind(function(){return n.executeOnMove?Th(e,t,n):X.some(!0)})}}function Lm(e,t,n){return n.onEscape(e,t)}function Fm(e,t,n,r){var o=e[t].length,n=Gs(n,r,0,o-1);return Oh(e,t,n)}function Hm(e,t,n,r){return n=Gs(n,r,0,e.length-1),r=e[n].length,t=Ks(t,0,r-1),Oh(e,n,t)}function Vm(e,t,n,r){var o=e[t].length,n=Ks(n+r,0,o-1);return Oh(e,t,n)}function jm(e,t,n,r){return n=Ks(n+r,0,e.length-1),r=e[n].length,t=Ks(t,0,r-1),Oh(e,n,t)}function Um(t,n,e){n.previousSelector(t).orThunk(function(){var e=n.selectors;return hs(t.element,e.cell)}).each(function(e){n.focusManager.set(t,e)})}function Wm(e,t){return function(n,r,i){var u=i.cycles?e:t;return vs(r,i.selectors.row).bind(function(e){var t=Sg(e,i.selectors.cell);return _m(t,r).bind(function(r){var o=Sg(n,i.selectors.row);return _m(o,e).bind(function(e){t=i;var t,n=x(o,function(e){return Sg(e,t.selectors.cell)});return u(n,e,r).map(function(e){return e.cell})})})})}}function $m(t,n,r){return r.focusManager.get(t).bind(function(e){return r.execute(t,n,e)})}function qm(t,n,e){hs(t.element,n.selector).each(function(e){n.focusManager.set(t,e)})}function Gm(e,t,n){return Sh(e,n.selector,t,-1)}function Km(e,t,n){return Sh(e,n.selector,t,1)}function Xm(e,t,n,r){r=e.getSystem().build(r),Zg(e,r,n)}function Ym(e,t,n,r){e=Jm(e),Mt(e,function(e){return gr(r.element,e.element)}).each(ep)}function Jm(e,t){return e.components()}function Zm(t,e,n,o,r){var i=Jm(t);return X.from(i[o]).map(function(e){return Ym(t,0,0,e),r.each(function(e){Xm(t,0,function(e,t){var n,r;r=t,Or(n=e,o).fold(function(){ko(n,r)},function(e){Co(e,r)})},e)}),e})}function Qm(e,t){t.ignore||(kl(e.element),t.onFocus(e))}function eg(e,t,n){(t=t.aria).update(e,t,n.get())}function tg(t,e,n){e.toggleClass.each(function(e){(n.get()?mc:pc)(t.element,e)})}function ng(e,t,n){rg(e,t,n,!n.get())}function rg(e,t,n,r){(r?Dh:Mh)(e,t,n)}function og(e,t,n){rg(e,t,n,t.selected)}function ig(e,t,n){k(e.element,"aria-expanded",n)}function ug(e){return Yu(Rt([e.map(function(n){return ia(function(e,t){n(e),t.stop()})}).toArray(),Nh()]))}function ag(e){(El(e.element).isNone()||oe.isFocused(e))&&(oe.isFocused(e)||oe.focus(e),J(e,Rh,{item:e}))}function cg(e){J(e,zh,{item:e})}function sg(e){return"prepared"===e.type?X.some(e.menu):X.none()}function lg(e,t,o,n,i){function u(){return e.lazySink(t)}function a(e){return 2===e.length?r:{}}var r="horizontal"===n.type?{layouts:{onLtr:function(){return dl()},onRtl:function(){return ml()}}}:{};return Gh.sketch({dom:{tag:"div"},data:n.data,markers:n.menu.markers,highlightImmediately:n.menu.highlightImmediately,onEscape:function(){return c.close(t),e.onEscape.map(function(e){return e(t)}),X.some(!0)},onExecute:function(){return X.some(!0)},onOpenMenu:function(e,t){qg.positionWithinBounds(u().getOrDie(),t,o,i())},onOpenSubmenu:function(e,t,n,r){var o=u().getOrDie();qg.position(o,n,{anchor:A({type:"submenu",item:t},a(r))})},onRepositionMenu:function(e,t,n){var r=u().getOrDie();qg.positionWithinBounds(r,t,o,i()),w(n,function(e){var t=a(e.triggeringPath);qg.position(r,e.triggeredMenu,{anchor:A({type:"submenu",item:e.triggeringItem},t)})})}})}function fg(e,t){return e.x+e.width/2-t.width/2}function dg(e,t){return e.y+e.height-t.height}var mg,gg,pg=function(e){return fd.get(e)},hg=function(e){return fd.getOption(e)},vg=function(e){return"img"===_n(e)?1:hg(e).fold(function(){return Tr(e).length},function(e){return e.length})},bg=function(e){return hg(e).filter(function(e){return 0!==e.trim().length||-1<e.indexOf(qf)}).isSome()},yg=["img","br"],wg=function(e){return bg(e)||xt(yg,_n(e))},xg=function(e){return Cg(e,wg)},Cg=function(e,o){function i(e){for(var t=Tr(e),n=t.length-1;0<=n;n--){var r=t[n];if(o(r))return X.some(r);r=i(r);if(r.isSome())return r}return X.none()}return i(e)},Sg=function(e,t){return dr(t,e)},kg=function(e,t,n,r){var o=br(e).dom.createRange();return o.setStart(e.dom,t),o.setEnd(n.dom,r),o},Tg=function(e,t,n,r){var o=kg(e,t,n,r),e=gr(e,n)&&t===r;return o.collapsed&&!e},Og=function(e){return X.from(e.getSelection())},Eg=function(e){var t;return 0<e.rangeCount?(t=e.getRangeAt(0),e=e.getRangeAt(e.rangeCount-1),X.some(Gf.create(S.fromDom(t.startContainer),t.startOffset,S.fromDom(e.endContainer),e.endOffset))):X.none()},_g=function(e){var t,n;return null!==e.anchorNode&&null!==e.focusNode&&(t=S.fromDom(e.anchorNode),n=S.fromDom(e.focusNode),Tg(t,e.anchorOffset,n,e.focusOffset))?X.some(Gf.create(t,e.anchorOffset,n,e.focusOffset)):Eg(e)},Ag=function(e){return Og(e).filter(function(e){return 0<e.rangeCount}).bind(_g)},Dg=function(e,t){e=ld(e,t);return rd(e)},Mg=function(e,t){return{element:e,offset:t}},Ng=function(e,t){var n=Tr(e);return 0===n.length?Mg(e,t):t<n.length?Mg(n[t],0):(e=n[n.length-1],t=(Dn(e)?pg:Tr)(e).length,Mg(e,t))},Rg=function(e,t){return(Dn(e)?Mg:Ng)(e,t)},Kf=[Mi("getSelection"),i("root"),Mi("bubble"),ts(),s("overrides",{}),s("showAbove",!1),Ns("placement",function(e,t,n){var r=xr(t.root).dom,o=ns(e,n,t),i=md(r,t).bind(function(n){return function(e,t){e=ld(e,t);return od(e)}(r,Jf.exactFromRange(n)).orThunk(function(){var e=S.fromText("\ufeff"),t=(Co(n.start,e),Dg(r,Jf.exact(e,0,e,1)));return _o(e),t}).bind(function(e){return rs(e.left,e.top,e.width,e.height)})}),e=md(r,t).bind(function(e){return An(e.start)?X.some(e.start):(e=e.start,Cr(e))}).getOr(e.element);return os(i,o,t,n,e)})],zg="link-layout",Bg=function(e){return e.x+e.width},Pg=function(e,t){return e.x-t.width},Ig=function(e,t){return e.y-t.height+e.height},Lg=function(e){return e.y},Fg=function(e,t,n){return zs(Bg(e),Lg(e),n.southeast(),Fs(),"southeast",Ys(e,{left:0,top:2}),zg)},Hg=function(e,t,n){return zs(Pg(e,t),Lg(e),n.southwest(),Hs(),"southwest",Ys(e,{right:1,top:2}),zg)},Vg=function(e,t,n){return zs(Bg(e),Ig(e,t),n.northeast(),Vs(),"northeast",Ys(e,{left:0,bottom:3}),zg)},jg=function(e,t,n){return zs(Pg(e,t),Ig(e,t),n.northwest(),js(),"northwest",Ys(e,{right:1,bottom:3}),zg)},Ug=[i("item"),ts(),s("overrides",{}),Ns("placement",function(e,t,n){n=Rl(n,t.item.element),e=Bf(e.element,t,gd(),pd(),gd(),pd(),X.none());return X.some(Df({anchorBox:n,bubble:Af(),overrides:t.overrides,layouts:e,placer:X.none()}))})],Kf=$e("type",{selection:Kf,node:If,hotspot:Bs,submenu:Ug,makeshift:Pf}),If=[Ye("classes",vi),rt("mode","all",["all","layout","placement"])],Bs=[s("useFixed",W),Mi("getBounds")],Wg=[Ai("anchor",Kf),Ri("transition",If)],$g=function(o,i,u,a,e,c){var s=Ti("placement.info",m(Wg),e),l=s.anchor,f=a.element,d=u.get(a.uid);Qc(function(){D(f,"position","fixed");var e=Zr(f,"visibility"),t=(D(f,"visibility","hidden"),i.useFixed()?hd():vd(o)),n=l.placement,r=c.map(K).or(i.getBounds);n(o,l,t).each(function(e){e=e.placer.getOr(bd)(o,t,e,r,a,d,s.transition);u.set(a.uid,e)}),e.fold(function(){to(f,"visibility")},function(e){D(f,"visibility",e)}),Zr(f,"left").isNone()&&Zr(f,"top").isNone()&&Zr(f,"right").isNone()&&Zr(f,"bottom").isNone()&&un(Zr(f,"position"),"fixed")&&to(f,"position")},f)},qg=yl({fields:Bs,name:"positioning",active:gl,apis:Object.freeze({__proto__:null,position:function(e,t,n,r,o){yd(e,t,n,r,o,X.none())},positionWithin:yd,positionWithinBounds:$g,getMode:function(e,t,n){return t.useFixed()?"fixed":"absolute"},reset:function(e,t,n,r){var o=r.element;w(["position","left","right","top","bottom"],function(e){return to(o,e)}),$r(o,Vl),n.clear(r.uid)}}),state:Object.freeze({__proto__:null,init:function(){var n={};return za({readState:function(){return n},clear:function(e){z(e)?delete n[e]:n={}},set:function(e,t){n[e]=t},get:function(e){return C(n,e)}})}})}),Gg=function(e){Y(e,Lu());e=e.components();w(e,Gg)},Kg=function(e){var t=e.components();w(t,Kg),Y(e,Iu())},Xg=function(e,t){ko(e.element,t.element)},Yg=function(e){w(e.components(),function(e){return _o(e.element)}),Eo(e.element),e.syncComponents()},Jg=function(e,t){Zg(e,t,ko)},Zg=function(e,t,n){e.getSystem().addToWorld(t),n(e.element,t.element),Ir(e.element)&&Kg(t),e.syncComponents()},Qg=function(e){Gg(e),_o(e.element),e.getSystem().removeFromWorld(e)},ep=function(t){var e=Cr(t.element).bind(function(e){return t.getSystem().getByDom(e).toOptional()});Qg(t),e.each(function(e){e.syncComponents()})},tp=function(e){var t=e.components();w(t,Qg),Eo(e.element),e.syncComponents()},np=function(e,t,n){n(e,t.element);n=Tr(t.element);w(n,function(e){t.getByDom(e).each(Kg)})},rp=function(t){var e=Tr(t.element);w(e,function(e){t.getByDom(e).each(Gg)}),_o(t.element)},Ug=Object.freeze({__proto__:null,cloak:Od,decloak:Ed,open:Sd,openWhileCloaked:function(e,t,n,r,o){Od(e,t),Sd(e,t,n,r),o(),Ed(e,t)},close:kd,isOpen:Td,isPartOf:function(t,n,e,r){return e.isOpen()&&e.get().exists(function(e){return n.isPartOf(t,e,r)})},getState:function(e,t,n){return n.get()},setContent:function(e,t,n,r){return n.get().map(function(){return Cd(e,t,n,r)})}}),Pf=Object.freeze({__proto__:null,events:function(n,r){return Yu([Z(Du(),function(e,t){kd(e,n,r)})])}}),Kf=[e("onOpen"),e("onClose"),i("isPartOf"),i("getAttachPoint"),s("cloakVisibilityAttr","data-precloak-visibility")],c=yl({fields:Kf,name:"sandboxing",active:Pf,apis:Ug,state:Object.freeze({__proto__:null,init:function(){var e=ef(),t=K("not-implemented");return za({readState:t,isOpen:e.isSet,clear:e.clear,set:e.set,get:e.get})}})}),op=K("dismiss.popups"),ip=K("reposition.popups"),up=K("mouse.released"),ap=di([s("isExtraPart",W),Ri("fireEventInstead",[s("event",Fu())])]),cp=function(e){var n=Ti("Dismissal",ap,e),e={};return e[op()]={schema:di([i("target")]),onReceive:function(t,e){!c.isOpen(t)||c.isPartOf(t,e.target)||n.isExtraPart(t,e.target)||n.fireEventInstead.fold(function(){return c.close(t)},function(e){return Y(t,e.event)})}},e},sp=di([Ri("fireEventInstead",[s("event",tu())]),Ke("doReposition")]),lp=function(e){var n=Ti("Reposition",sp,e),e={};return e[ip()]={onReceive:function(t){c.isOpen(t)&&n.fireEventInstead.fold(function(){return n.doReposition(t)},function(e){return Y(t,e.event)})}},e},If=Object.freeze({__proto__:null,onLoad:_d,onUnload:Ad,setValue:function(e,t,n,r){t.store.manager.setValue(e,t,n,r)},getValue:function(e,t,n){return t.store.manager.getValue(e,t,n)},getState:function(e,t,n){return n}}),Bs=Object.freeze({__proto__:null,events:function(n,r){var e=n.resetOnDom?[na(function(e,t){_d(e,n,r)}),ra(function(e,t){Ad(e,n,r)})]:[Yc(n,r,_d)];return Yu(e)}}),gl=Object.freeze({__proto__:null,memory:Dd,dataset:Md,manual:function(){return za({readState:G})},init:function(e){return e.store.manager.state(e)}}),Kf=[Mi("initialValue"),i("getFallbackEntry"),i("getDataKey"),i("setValue"),Ns("manager",{setValue:Nd,getValue:function(e,t,n){var r=t.store,o=r.getDataKey(e);return n.lookup(o).getOrThunk(function(){return r.getFallbackEntry(o)})},onLoad:function(t,n,r){n.store.initialValue.each(function(e){Nd(t,n,r,e)})},onUnload:function(e,t,n){n.clear()},state:Md})],Pf=[i("getValue"),s("setValue",G),Mi("initialValue"),Ns("manager",{setValue:function(e,t,n,r){t.store.setValue(e,r),t.onSetValue(e,r)},getValue:function(e,t,n){return t.store.getValue(e)},onLoad:function(t,n,e){n.store.initialValue.each(function(e){n.store.setValue(t,e)})},onUnload:G,state:Ra.init})],Ug=[Mi("initialValue"),Ns("manager",{setValue:function(e,t,n,r){n.set(r),t.onSetValue(e,r)},getValue:function(e,t,n){return n.get()},onLoad:function(e,t,n){t.store.initialValue.each(function(e){n.isNotSet()&&n.set(e)})},onUnload:function(e,t,n){n.clear()},state:Dd})],Ug=[Bi("store",{mode:"memory"},$e("mode",{memory:Ug,manual:Pf,dataset:Kf})),e("onSetValue"),s("resetOnDom",!1)],ee=yl({fields:Ug,name:"representing",active:Bs,apis:If,extra:{setValueFrom:function(e,t){t=ee.getValue(t);ee.setValue(e,t)}},state:gl}),fp=function(e){return e.dump},dp=function(e,t){return A(A({},Q(t)),e.dump)},mp={field:Rd,augment:dp,get:fp},gp="placeholder",pp=Pi([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),hp=function(e){return rn(e,"uiType")},vp=function(e,t,n,r){return e.exists(function(e){return e!==n.owner})?pp.single(!0,K(n)):C(r,n.name).fold(function(){throw new Error("Unknown placeholder component: "+n.name+"\nKnown: ["+qt(r)+"]\nNamespace: "+e.getOr("none")+"\nSpec: "+JSON.stringify(n,null,2))},function(e){return e.replace()})},bp=function(e,t,n,r){return hp(n)&&n.uiType===gp?vp(e,t,n,r):pp.single(!1,K(n))},yp=function(r,o,i,u){return bp(r,o,i,u).fold(function(e,t){var t=hp(i)?t(o,i.config,i.validated):t(o),n=C(t,"components").getOr([]),n=zt(n,function(e){return yp(r,o,e,u)});return[A(A({},t),{components:n})]},function(e,t){var n;return hp(i)?(n=t(o,i.config,i.validated),i.validated.preprocess.getOr(v)(n)):t(o)})},wp=function(t,n,e,r){return zt(e,function(e){return yp(t,n,e,r)})},xp=function(e,t){var n=!1;return{name:K(e),required:function(){return t.fold(function(e,t){return e},function(e,t){return e})},used:function(){return n},replace:function(){if(n)throw new Error("Trying to use the same placeholder more than once: "+e);return n=!0,t}}},Cp=pp.single,Sp=pp.multiple,kp=K(gp),Pf=Pi([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),Kf=s("factory",{sketch:v}),Ug=s("schema",[]),Bs=i("name"),If=Ei("pname","pname",Yo(function(e){return"<alloy."+O(e.name)+">"}),pi()),gl=_i("schema",function(){return[Mi("preprocess")]}),Tp=s("defaults",K({})),Op=s("overrides",K({})),Ep=m([Kf,Ug,Bs,If,Tp,Op]),_p=m([Kf,Ug,Bs,Tp,Op]),Ug=m([Kf,Ug,Bs,If,Tp,Op]),Kf=m([Kf,gl,Bs,i("unit"),If,Tp,Op]),Ap=Id(Pf.required,Ep),gl=Id(Pf.external,_p),Dp=Id(Pf.optional,Ug),Bs=Id(Pf.group,Kf),Mp=K("entirety"),If=Object.freeze({__proto__:null,required:Ap,external:gl,optional:Dp,group:Bs,asNamedPart:Bd,name:Pd,asCommon:function(e){return e.fold(v,v,v,v)},original:Mp}),Np=function(e,t,n,r){return Go(t.defaults(e,n,r),n,{uid:e.partUids[t.name]},t.overrides(e,n,r))},Rp=function(e){return zt(e,function(e){return e.fold(X.none,X.some,X.none,X.none).map(function(e){return Di(e.name,e.schema.concat([Rs(Mp())]))}).toArray()})},zp=function(e,t,n){return Ld(0,t,n)},Bp=function(e,t,n){return zd(X.some(e),t,t.components,n)},Pp=function(e,t,n){t=t.partUids[n];return e.getSystem().getByUid(t).toOptional()},Ip=function(e,t,n){return Pp(e,t,n).getOrDie("Could not find part: "+n)},Lp=function(e,t){var n=e.getSystem();return Xt(t.partUids,function(e,t){return K(n.getByUid(e))})},Fp=function(e){return qt(e.partUids)},Hp=function(t){return Ei("partUids","partUids",Ne(function(e){return Wd(e.uid,t)}),pi())},Tp=Object.freeze({__proto__:null,generate:Fd,generateOne:Hd,schemas:Rp,names:Vd,substitutes:zp,components:Bp,defaultUids:Wd,defaultUidsSchema:Hp,getAllParts:Lp,getAllPartNames:Fp,getPart:Pp,getPartOrDie:Ip,getParts:jd,getPartsOrDie:Ud}),Vp=function(e,t){return(0<e.length?[Di("parts",e)]:[]).concat([i("uid"),s("dom",{}),s("components",[]),Rs("originalSpec"),s("debug.sketcher",{})]).concat(t)},jp=function(e,t,n,r,o){r=Vp(r,o);return Ti(e+" [SpecSchema]",di(r.concat(t)),n)},Up=function(e){return rn(e,"uid")},Wp=function(e){return Up(e)?e:A(A({},e),{uid:Ca("uid")})},$p=function(e){return void 0!==e.uid},qp=di([i("name"),i("factory"),i("configFields"),s("apis",{}),s("extraApis",{})]),Gp=di([i("name"),i("factory"),i("configFields"),i("partFields"),s("apis",{}),s("extraApis",{})]),Kp=function(e){var t=Ti("Sketcher for "+e.name,qp,e),e=Xt(t.apis,mt),n=Xt(t.extraApis,function(e,t){return _a(e,t)});return A(A({name:t.name,configFields:t.configFields,sketch:function(e){return $d(t.name,t.configFields,t.factory,e)}},e),n)},Op=Object.freeze({__proto__:null,getCurrent:function(e,t,n){return t.find(e)}}),Ep=[i("find")],y=yl({fields:Ep,name:"composing",apis:Op}),Xp=["input","button","textarea","select"],_p=Object.freeze({__proto__:null,enable:nm,disable:tm,isDisabled:rm,onLoad:Xd,set:function(e,t,n,r){(r?tm:nm)(e,t)}}),Ug=Object.freeze({__proto__:null,exhibit:function(e,t){return Fa({classes:t.disabled()?t.disableClass.toArray():[]})},events:function(n,e){return Yu([lt(Ou(),function(e,t){return rm(e,n)}),Yc(n,e,Xd)])}}),Pf=[it("disabled",W),s("useNative",!0),Mi("disableClass"),e("onDisabled"),e("onEnabled")],te=yl({fields:Pf,name:"disabling",active:Ug,apis:_p}),Kf=Object.freeze({__proto__:null,dehighlightAll:function(e,t,n){return om(e,t,0,[])},dehighlight:function(e,t,n,r){um(0,t,0,r)&&(pc(r.element,t.highlightClass),t.onDehighlight(e,r),Y(r,$u()))},highlight:im,highlightFirst:function(t,n,r){am(t,n).each(function(e){im(t,n,r,e)})},highlightLast:function(t,n,r){cm(t,n).each(function(e){im(t,n,r,e)})},highlightAt:function(t,n,r,e){var o,i;o=e,i=Sg((e=t).element,"."+n.itemClass),X.from(i[o]).fold(function(){return M.error(new Error("No element found with index "+o))},e.getSystem().getByDom).fold(function(e){throw e},function(e){im(t,n,r,e)})},highlightBy:function(t,n,r,e){var o=lm(t,n);Mt(o,e).each(function(e){im(t,n,r,e)})},isHighlighted:um,getHighlighted:function(t,e,n){return hs(t.element,"."+e.highlightClass).bind(function(e){return t.getSystem().getByDom(e).toOptional()})},getFirst:am,getLast:cm,getPrevious:function(e,t,n){return sm(e,t,0,-1)},getNext:function(e,t,n){return sm(e,t,0,1)},getCandidates:lm}),Ep=[i("highlightClass"),i("itemClass"),e("onHighlight"),e("onDehighlight")],Yp=yl({fields:Ep,name:"highlighting",apis:Kf}),Jp=[8],Zp=[9],Qp=[13],eh=[27],th=[32],nh=[37],rh=[38],oh=[39],ih=[40],f=function(t){return function(e){e=e.raw;return xt(t,e.which)}},uh=j(hm),ah=function(e,t){return Mt(e,function(e){return e.matches(t)}).map(function(e){return e.classification})},ch=function(e,t,n){t.exists(function(t){return n.exists(function(e){return gr(e,t)})})||J(e,Hu(),{prevFocus:t,newFocus:n})},sh=function(){function r(e){return El(e.element)}return{get:r,set:function(e,t){var n=r(e),t=(e.getSystem().triggerFocus(t,e.element),r(e));ch(e,n,t)}}},lh=function(){function r(e){return Yp.getHighlighted(e).map(function(e){return e.element})}return{get:r,set:function(t,e){var n=r(t),e=(t.getSystem().getByDom(e).fold(G,function(e){Yp.highlight(t,e)}),r(t));ch(t,n,e)}}},Pf=((Op=mg=mg||{}).OnFocusMode="onFocus",Op.OnEnterOrSpaceMode="onEnterOrSpace",Op.OnApiMode="onApi",ym(_i("cyclic",W))),Ug=ym(_i("cyclic",$)),_p=[s("execute",wm),s("useSpace",!1),s("useEnter",!0),s("useControlEnter",!1),s("useDown",!1)],Ep=bm(_p,Ra.init,function(e,t,n,r){var e=n.useSpace&&!Kd(e.element)?th:[],o=n.useEnter?Qp:[],i=n.useDown?ih:[],e=e.concat(o).concat(i);return[l(f(e),Cm)].concat(n.useControlEnter?[l(pm([vm,f(Qp)]),Cm)]:[])},function(e,t,n,r){return n.useSpace&&!Kd(e.element)?[l(f(th),xm)]:[]},function(){return X.none()}),Kf=Object.freeze({__proto__:null,flatgrid:Sm,init:function(e){return e.state(e)}}),fh=function(t,n,e,r,o){return r.focusManager.get(n).bind(function(e){return t(n.element,e,r,o)}).map(function(e){return r.focusManager.set(n,e),!0})},Op=Em,_p=Em,dh=Em,mh=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},gh=function(e){return!mh(e.dom)},ph=function(t,e){return Nt(t,e).map(function(e){return{index:e,candidates:t}})},hh=function(e,t,n){e=Sg(e,n),n=Et(e,gh);return ph(n,function(e){return gr(e,t)})},vh=function(t,e,n,r){return r(Math.floor(e/n),e%n).bind(function(e){e=e.row*n+e.column;return 0<=e&&e<t.length?X.some(t[e]):X.none()})},bh=[i("selector"),s("execute",wm),Vc("onEscape"),s("captureTab",!1),ma()],yh=Nm(function(e,t,n,r){return Am(e,t,n,r,-1)}),wh=Nm(function(e,t,n,r){return Am(e,t,n,r,1)}),xh=Nm(function(e,t,n,r){return Dm(e,t,n,r,-1)}),Ch=Nm(function(e,t,n,r){return Dm(e,t,n,r,1)}),yh=K([l(f(nh),Tm(yh,wh)),l(f(oh),Om(yh,wh)),l(f(rh),Op(xh)),l(f(ih),_p(Ch)),l(pm([hm,f(Zp)]),Rm),l(pm([uh,f(Zp)]),Rm),l(f(eh),function(e,t,n){return n.onEscape(e,t)}),l(f(th.concat(Qp)),function(t,n,r,e){return(o=r).focusManager.get(t).bind(function(e){return vs(e,o.selector)}).bind(function(e){return r.execute(t,n,e)});var o})]),wh=K([l(f(th),xm)]),xh=bm(bh,Sm,yh,wh,function(){return X.some(Mm)}),Sh=function(e,t,n,o){function i(e,t,n){var r;return(t=Gs(t,o,0,n.length-1))===e?X.none():(r=n[t],"button"===_n(r)&&"disabled"===jr(r,"disabled")?i(e,t,n):X.from(n[t]))}return hh(e,n,t).bind(function(e){var t=e.index,e=e.candidates;return i(t,t,e)})},Ch=[i("selector"),s("getInitial",X.none),s("execute",wm),Vc("onEscape"),s("executeOnMove",!1),s("allowVertical",!0)],kh=function(e,t){return t.focusManager.get(e).bind(function(e){return vs(e,t.selector)})},Th=function(t,n,r){return kh(t,r).bind(function(e){return r.execute(t,n,e)})},bh=K([l(f(th),xm)]),yh=bm(Ch,Ra.init,function(e,t,n,r){var o=nh.concat(n.allowVertical?rh:[]),n=oh.concat(n.allowVertical?ih:[]);return[l(f(o),Im(Tm(Bm,Pm))),l(f(n),Im(Om(Bm,Pm))),l(f(Qp),Th),l(f(th),Th),l(f(eh),Lm)]},bh,function(){return X.some(zm)}),Oh=function(e,t,n){return X.from(e[t]).bind(function(e){return X.from(e[n]).map(function(e){return{rowIndex:t,columnIndex:n,cell:e}})})},wh=[Di("selectors",[i("row"),i("cell")]),s("cycles",!0),s("previousSelector",X.none),s("execute",wm)],Ch=Wm(function(e,t,n){return Fm(e,t,n,-1)},function(e,t,n){return Vm(e,t,n,-1)}),bh=Wm(function(e,t,n){return Fm(e,t,n,1)},function(e,t,n){return Vm(e,t,n,1)}),Eh=Wm(function(e,t,n){return Hm(e,n,t,-1)},function(e,t,n){return jm(e,n,t,-1)}),_h=Wm(function(e,t,n){return Hm(e,n,t,1)},function(e,t,n){return jm(e,n,t,1)}),Ch=K([l(f(nh),Tm(Ch,bh)),l(f(oh),Om(Ch,bh)),l(f(rh),Op(Eh)),l(f(ih),_p(_h)),l(f(th.concat(Qp)),function(t,n,r){return El(t.element).bind(function(e){return r.execute(t,n,e)})})]),bh=K([l(f(th),xm)]),Op=bm(wh,Ra.init,Ch,bh,function(){return X.some(Um)}),Eh=[i("selector"),s("execute",wm),s("moveOnTab",!1)],_p=K([l(f(rh),dh(Gm)),l(f(ih),dh(Km)),l(pm([hm,f(Zp)]),function(e,t,n,r){return n.moveOnTab?dh(Gm)(e,t,n,r):X.none()}),l(pm([uh,f(Zp)]),function(e,t,n,r){return n.moveOnTab?dh(Km)(e,t,n,r):X.none()}),l(f(Qp),$m),l(f(th),$m)]),_h=K([l(f(th),xm)]),wh=bm(Eh,Ra.init,_p,_h,function(){return X.some(qm)}),Ch=[Vc("onSpace"),Vc("onEnter"),Vc("onShiftEnter"),Vc("onLeft"),Vc("onRight"),Vc("onTab"),Vc("onShiftTab"),Vc("onUp"),Vc("onDown"),Vc("onEscape"),s("stopSpaceKeyup",!1),Mi("focusIn")],bh=bm(Ch,Ra.init,function(e,t,n){return[l(f(th),n.onSpace),l(pm([uh,f(Qp)]),n.onEnter),l(pm([hm,f(Qp)]),n.onShiftEnter),l(pm([hm,f(Zp)]),n.onShiftTab),l(pm([uh,f(Zp)]),n.onTab),l(f(rh),n.onUp),l(f(ih),n.onDown),l(f(nh),n.onLeft),l(f(oh),n.onRight),l(f(th),n.onSpace),l(f(eh),n.onEscape)]},function(e,t,n){return n.stopSpaceKeyup?[l(f(th),xm)]:[]},function(e){return e.focusIn}),Eh=Pf.schema(),_p=Ug.schema(),_h=yh.schema(),Ch=xh.schema(),Pf=Op.schema(),Ug=Ep.schema(),yh=wh.schema(),xh=bh.schema(),N=Zc({branchKey:"mode",branches:Object.freeze({__proto__:null,acyclic:Eh,cyclic:_p,flow:_h,flatgrid:Ch,matrix:Pf,execution:Ug,menu:yh,special:xh}),name:"keying",active:{events:function(e,t){return e.handler.toEvents(e,t)}},apis:{focusIn:function(t,n,r){n.sendFocusIn(n).fold(function(){t.getSystem().triggerFocus(t.element,t.element)},function(e){e(t,n,r)})},setGridSize:function(e,t,n,r,o){on(n,"setGridSize")?n.setGridSize(r,o):console.error("Layout does not support setGridSize")}},state:Kf}),ne=yl({fields:[],name:"replacing",apis:Object.freeze({__proto__:null,append:function(e,t,n,r){Xm(e,0,ko,r)},prepend:function(e,t,n,r){Xm(e,0,ke,r)},remove:Ym,replaceAt:Zm,replaceBy:function(t,e,n,r,o){var i=Jm(t);return Nt(i,r).bind(function(e){return Zm(t,0,0,e,o)})},set:function(t,e,n,r){Qc(function(){var e=x(r,t.getSystem().build);wd(t,e)},t.element)},contents:Jm})}),Ah=function(e,t){t=Yu(t);return yl({fields:[i("enabled")],name:e,active:{events:K(t)}})},re=function(e,t){return{key:e,value:{config:{},me:Ah(e,t),configAsRaw:K({}),initialConfig:{},state:Ra}}},Op=Object.freeze({__proto__:null,focus:Qm,blur:function(e,t){t.ignore||e.element.dom.blur()},isFocused:function(e){return Tl(e.element)}}),Ep=Object.freeze({__proto__:null,exhibit:function(e,t){t=t.ignore?{}:{attributes:{tabindex:"-1"}};return Fa(t)},events:function(n){return Yu([Z(Cu(),function(e,t){Qm(e,n),t.stop()})].concat(n.stopMousedown?[Z(uu(),function(e,t){t.event.prevent()})]:[]))}}),wh=[e("onFocus"),s("stopMousedown",!1),s("ignore",!1)],oe=yl({fields:wh,name:"focusing",active:Ep,apis:Op}),Dh=function(e,t,n){n.set(!0),tg(e,t,n),eg(e,t,n)},Mh=function(e,t,n){n.set(!1),tg(e,t,n),eg(e,t,n)},bh=Object.freeze({__proto__:null,onLoad:og,toggle:ng,isOn:function(e,t,n){return n.get()},on:Dh,off:Mh,set:rg}),Eh=Object.freeze({__proto__:null,exhibit:function(){return Fa({})},events:function(e,t){n=e,r=t,o=ng;var n,r,o,i=ia(function(e){o(e,n,r)}),t=Yc(e,t,og);return Yu(Rt([e.toggleOnExecute?[i]:[],[t]]))}}),_p=[s("selected",!1),Mi("toggleClass"),s("toggleOnExecute",!0),Bi("aria",{mode:"none"},$e("mode",{pressed:[s("syncWithExpanded",!1),Ns("update",function(e,t,n){k(e.element,"aria-pressed",n),t.syncWithExpanded&&ig(e,0,n)})],checked:[Ns("update",function(e,t,n){k(e.element,"aria-checked",n)})],expanded:[Ns("update",ig)],selected:[Ns("update",function(e,t,n){k(e.element,"aria-selected",n)})],none:[Ns("update",G)]}))],g=yl({fields:_p,name:"toggling",active:Eh,apis:bh,state:(gg=!1,{init:function(){var t=T(gg);return{get:function(){return t.get()},set:function(e){return t.set(e)},clear:function(){return t.set(gg)},readState:function(){return t.get()}}}})}),Nh=function(){function e(e,t){t.stop(),qu(e)}return[Z(vu(),e),Z(_u(),e),ea(nu()),ea(uu())]},Rh="alloy.item-hover",zh="alloy.item-focus",Bh=K(Rh),Ph=K(zh),_h=[i("data"),i("components"),i("dom"),s("hasSubmenu",!1),Mi("toggling"),mp.field("itemBehaviours",[g,oe,N,ee]),s("ignoreFocus",!1),s("domModification",{}),Ns("builder",function(e){return{dom:e.dom,domModification:A(A({},e.domModification),{attributes:A(A(A({role:e.toggling.isSome()?"menuitemcheckbox":"menuitem"},e.domModification.attributes),{"aria-haspopup":e.hasSubmenu}),e.hasSubmenu?{"aria-expanded":!1}:{})}),behaviours:mp.augment(e.itemBehaviours,[e.toggling.fold(g.revoke,function(e){return g.config(A({aria:{mode:"checked"}},e))}),oe.config({ignore:e.ignoreFocus,stopMousedown:e.ignoreFocus,onFocus:function(e){cg(e)}}),N.config({mode:"execution"}),ee.config({store:{mode:"memory",initialValue:e.data}}),re("item-type-events",ae(ae([],Nh(),!0),[Z(lu(),ag),Z(Eu(),oe.focus)],!1))]),components:e.components,eventOrder:e.eventOrder}}),s("eventOrder",{})],Ch=[i("dom"),i("components"),Ns("builder",function(e){return{dom:e.dom,components:e.components,events:Yu([(e=Eu(),Z(e,function(e,t){t.stop()}))])}})],Ih=K("item-widget"),Lh=K([Ap({name:"widget",overrides:function(t){return{behaviours:Q([ee.config({store:{mode:"manual",getValue:function(e){return t.data},setValue:G}})])}}})]),Pf=[i("uid"),i("data"),i("components"),i("dom"),s("autofocus",!1),s("ignoreFocus",!1),mp.field("widgetBehaviours",[ee,oe,N]),s("domModification",{}),Hp(Lh()),Ns("builder",function(n){function r(e){return Pp(e,n,"widget").map(function(e){return N.focusIn(e),e})}function e(e,t){return Kd(t.event.target)||n.autofocus&&t.setSource(e.element),X.none()}var t=zp(Ih(),n,Lh()),t=Bp(Ih(),n,t.internals());return{dom:n.dom,components:t,domModification:n.domModification,events:Yu([ia(function(e,t){r(e).each(function(e){t.stop()})}),Z(lu(),ag),Z(Eu(),function(e,t){n.autofocus?r(e):oe.focus(e)})]),behaviours:mp.augment(n.widgetBehaviours,[ee.config({store:{mode:"memory",initialValue:n.data}}),oe.config({ignore:n.ignoreFocus,onFocus:function(e){cg(e)}}),N.config({mode:"special",focusIn:n.autofocus?function(e){r(e)}:xl(),onLeft:e,onRight:e,onEscape:function(e,t){return oe.isFocused(e)||n.autofocus?(n.autofocus&&t.setSource(e.element),X.none()):(oe.focus(e),X.some(!0))}})])}})],Fh=$e("type",{widget:Pf,item:_h,separator:Ch}),Ug=K([Bs({factory:{sketch:function(e){e=Ti("menu.spec item",Fh,e);return e.builder(e)}},name:"items",unit:"item",defaults:function(e,t){return rn(t,"uid")?t:A(A({},t),{uid:Ca("item")})},overrides:function(e,t){return{type:t.type,ignoreFocus:e.fakeFocus,domModification:{classes:[e.markers.item]}}}})]),yh=K([i("value"),i("items"),i("dom"),i("components"),s("eventOrder",{}),Rd("menuBehaviours",[Yp,ee,y,N]),Bi("movement",{mode:"menu",moveOnTab:!0},$e("mode",{grid:[ma(),Ns("config",function(e,t){return{mode:"flatgrid",selector:"."+e.markers.item,initSize:{numColumns:t.initSize.numColumns,numRows:t.initSize.numRows},focusManager:e.focusManager}})],matrix:[Ns("config",function(e,t){return{mode:"matrix",selectors:{row:t.rowSelector,cell:"."+e.markers.item},focusManager:e.focusManager}}),i("rowSelector")],menu:[s("moveOnTab",!0),Ns("config",function(e,t){return{mode:"menu",selector:"."+e.markers.item,moveOnTab:t.moveOnTab,focusManager:e.focusManager}})]})),Ai("markers",ha()),s("fakeFocus",!1),s("focusManager",sh()),e("onHighlight")]),Hh=K("alloy.menu-focus"),Vh=Gd({name:"Menu",configFields:yh(),partFields:Ug(),factory:function(e,t,n,r){return{uid:e.uid,dom:e.dom,markers:e.markers,behaviours:dp(e.menuBehaviours,[Yp.config({highlightClass:e.markers.selectedItem,itemClass:e.markers.item,onHighlight:e.onHighlight}),ee.config({store:{mode:"memory",initialValue:e.value}}),y.config({find:X.some}),N.config(e.movement.config(e,e.movement))]),events:Yu([Z(Ph(),function(t,n){var e=n.event;t.getSystem().getByDom(e.target).each(function(e){Yp.highlight(t,e),n.stop(),J(t,Hh(),{menu:t,item:e})})}),Z(Bh(),function(e,t){t=t.event.item;Yp.highlight(e,t)})]),components:t,eventOrder:e.eventOrder,domModification:{attributes:{role:"menu"}}}}}),jh=function(e){return Yt(e,function(e,t){return{k:e,v:t}})},Uh=function(n,r,o,e){return C(o,e).bind(function(e){return C(n,e).bind(function(e){var t=Uh(n,r,o,e);return X.some([e].concat(t))})}).getOr([])},Wh=function(){function t(e){return C(c.get(),e)}var c=T({}),s=T({}),l=T({}),f=ef(),d=T({}),m=function(n){return tn(c.get(),function(e,t){return e===n})},g=function(e){return n(e).bind(sg)},n=function(e){return C(s.get(),e)};return{setMenuBuilt:function(e,t){var n;s.set(A(A({},s.get()),((n={})[e]={type:"prepared",menu:t},n)))},setContents:function(e,t,n,r){f.set(e),c.set(n),s.set(t),d.set(r);e=n,o={},Kt(r,function(e,t){w(e,function(e){o[e]=t})}),u=jh(i=e),a=Xt(u,function(e,t){return[t].concat(Uh(o,i,u,t))});var o,i,u,a,t=Xt(o,function(e){return C(a,e).getOr([e])});l.set(t)},expand:function(n){return C(c.get(),n).map(function(e){var t=C(l.get(),n).getOr([]);return[e].concat(t)})},refresh:function(e){return C(l.get(),e)},collapse:function(e){return C(l.get(),e).bind(function(e){return 1<e.length?X.some(e.slice(1)):X.none()})},lookupMenu:n,lookupItem:t,otherMenus:function(e){var t=d.get();return It(qt(t),e)},getPrimary:function(){return f.get().bind(g)},getMenus:function(){return s.get()},clear:function(){c.set({}),s.set({}),l.set({}),f.clear()},isClear:function(){return f.get().isNone()},getTriggeringPath:function(e,u){var a=Et(t(e).toArray(),function(e){return g(e).isSome()});return C(l.get(),e).bind(function(e){for(var i=Pt(a.concat(e)),t=zt(i,function(e,t){return n=e,r=u,o=i.slice(0,t+1),g(n).bind(function(t){return m(n).bind(function(e){return r(e).map(function(e){return{triggeredMenu:t,triggeringItem:e,triggeringPath:o}})})}).fold(function(){return un(f.get(),e)?[]:[X.none()]},function(e){return[X.some(e)]});var n,r,o}),n=[],r=0;r<t.length;r++){var o=t[r];if(!o.isSome())return X.none();n.push(o.getOrDie())}return X.some(n)})}}},$h=sg,qh=K("collapse-item"),Gh=Kp({name:"TieredMenu",configFields:[Uc("onExecute"),Uc("onEscape"),jc("onOpenMenu"),jc("onOpenSubmenu"),e("onRepositionMenu"),e("onCollapseMenu"),s("highlightImmediately",!0),Di("data",[i("primary"),i("menus"),i("expansions")]),s("fakeFocus",!1),e("onHighlight"),e("onHover"),Lc(),i("dom"),s("navigateOnHover",!0),s("stayInDom",!1),Rd("tmenuBehaviours",[N,Yp,y,ne]),s("eventOrder",{})],apis:{collapseMenu:function(e,t){e.collapseMenu(t)},highlightPrimary:function(e,t){e.highlightPrimary(t)},repositionMenus:function(e,t){e.repositionMenus(t)}},factory:function(c,e){function n(e){r=e,o=c.data.primary,e=c.data.menus;var r,o,e=Xt(e,function(e,t){function n(){return Vh.sketch(A(A({},e),{value:t,markers:c.markers,fakeFocus:c.fakeFocus,onHighlight:c.onHighlight,focusManager:(c.fakeFocus?lh:sh)()}))}return t===o?{type:"prepared",menu:r.getSystem().build(n())}:{type:"notbuilt",nbMenu:n}}),t=Xt(c.data.menus,function(e,t){return zt(e.items,function(e){return"separator"===e.type?[]:[e.data.value]})});return d.setContents(c.data.primary,e,c.data.expansions,t),d.getPrimary()}function s(e,n){e=h(e),Kt(e,function(e,t){t=xt(n,t);k(e.element,"aria-expanded",t)})}function l(n,r,o){return X.from(o[0]).bind(function(e){return r.lookupMenu(e).bind(function(e){var t;return"notbuilt"===e.type?X.none():(e=e.menu,t=g(r,o.slice(1)),w(t,function(e){mc(e.element,c.markers.backgroundMenu)}),Ir(e.element)||ne.append(n,Pc(e)),bc(e.element,[c.markers.backgroundMenu]),a(n,e),p(n,r,o),X.some(e))})})}function o(i,u,a){var e;return void 0===a&&(a=f.HighlightSubmenu),u.hasConfigured(te)&&te.isDisabled(u)?X.some(u):(e=m(u),d.expand(e).bind(function(o){return s(i,o),X.from(o[0]).bind(function(r){return d.lookupMenu(r).bind(function(e){t=i,n=r;var t,n="notbuilt"===(e=e).type?(t=t.getSystem().build(e.nbMenu()),d.setMenuBuilt(n,t),t):e.menu;return Ir(n.element)||ne.append(i,Pc(n)),c.onOpenSubmenu(i,u,n,Pt(o)),a===f.HighlightSubmenu?(Yp.highlightFirst(n),l(i,d,o)):(Yp.dehighlightAll(n),X.some(u))})})}))}function r(t,n){var e=m(n);return d.collapse(e).bind(function(e){return s(t,e),l(t,d,e).map(function(e){return c.onCollapseMenu(t,n,e),e})})}function t(n){return function(t,e){return vs(e.getSource(),"."+c.markers.item).bind(function(e){return t.getSystem().getByDom(e).toOptional().bind(function(e){return n(t,e).map($)})})}}function i(e){return Yp.getHighlighted(e).bind(Yp.getHighlighted)}var f,u=ef(),d=Wh(),m=function(e){return ee.getValue(e).value},a=function(t,e){Yp.highlight(t,e),Yp.getHighlighted(e).orThunk(function(){return Yp.getFirst(e)}).each(function(e){Gu(t,e.element,Eu())})},g=function(t,e){return cn(x(e,function(e){return t.lookupMenu(e).bind(function(e){return"prepared"===e.type?X.some(e.menu):X.none()})}))},p=function(t,e,n){e=g(e,e.otherMenus(n));w(e,function(e){bc(e.element,[c.markers.backgroundMenu]),c.stayInDom||ne.remove(t,e)})},h=function(t){return u.get().getOrThunk(function(){var n={},e=Sg(t.element,"."+c.markers.item),e=Et(e,function(e){return"true"===jr(e,"aria-haspopup")});return w(e,function(e){t.getSystem().getByDom(e).each(function(e){var t=m(e);n[t]=e})}),u.set(n),n})},v=((v=f=f||{})[v.HighlightSubmenu=0]="HighlightSubmenu",v[v.HighlightParent=1]="HighlightParent",Yu([Z(Hh(),function(t,n){var e=n.event.item;d.lookupItem(m(e)).each(function(){var e=n.event.menu,e=(Yp.highlight(t,e),m(n.event.item));d.refresh(e).each(function(e){return p(t,d,e)})})}),ia(function(t,e){e=e.event.target;t.getSystem().getByDom(e).each(function(e){0===m(e).indexOf("collapse-item")&&r(t,e),o(t,e,f.HighlightSubmenu).fold(function(){c.onExecute(t,e)},G)})}),na(function(t,e){n(t).each(function(e){ne.append(t,Pc(e)),c.onOpenMenu(t,e),c.highlightImmediately&&a(t,e)})})].concat(c.navigateOnHover?[Z(Bh(),function(e,t){var t=t.event.item,n=e,r=t;r=m(t),d.refresh(r).bind(function(e){return s(n,e),l(n,d,e)}),o(e,t,f.HighlightParent),c.onHover(e,t)})]:[]))),b={collapseMenu:function(t){i(t).each(function(e){r(t,e)})},highlightPrimary:function(t){d.getPrimary().each(function(e){a(t,e)})},repositionMenus:function(n){d.getPrimary().bind(function(t){return i(n).bind(function(e){var e=m(e),t=nn(d.getMenus()),n=cn(x(t,$h));return d.getTriggeringPath(e,function(e){return t=e,$t(n,function(e){return e.getSystem().isConnected()?(e=Yp.getCandidates(e),Mt(e,function(e){return m(e)===t})):X.none()});var t})}).map(function(e){return{primary:t,triggeringPath:e}})}).fold(function(){X.from(n.components()[0]).filter(function(e){return"menu"===jr(e.element,"role")}).each(function(e){c.onRepositionMenu(n,e,[])})},function(e){var t=e.primary,e=e.triggeringPath;c.onRepositionMenu(n,t,e)})}};return{uid:c.uid,dom:c.dom,markers:c.markers,behaviours:dp(c.tmenuBehaviours,[N.config({mode:"special",onRight:t(function(e,t){return Kd(t.element)?X.none():o(e,t,f.HighlightSubmenu)}),onLeft:t(function(e,t){return Kd(t.element)?X.none():r(e,t)}),onEscape:t(function(e,t){return r(e,t).orThunk(function(){return c.onEscape(e,t).map(function(){return e})})}),focusIn:function(t,e){d.getPrimary().each(function(e){Gu(t,e.element,Eu())})}}),Yp.config({highlightClass:c.markers.selectedMenu,itemClass:c.markers.menu}),y.config({find:function(e){return Yp.getHighlighted(e)}}),ne.config({})]),eventOrder:c.eventOrder,apis:b,events:v}},extraApis:{tieredData:function(e,t,n){return{primary:e,menus:t,expansions:n}},singleData:function(e,t){return{primary:e,menus:Hi(e,t),expansions:{}}},collapseItem:function(e){return{value:O(qh()),meta:{text:e}}}}}),Kh=Kp({name:"InlineView",configFields:[i("lazySink"),e("onShow"),e("onHide"),Qe("onEscape"),Rd("inlineBehaviours",[c,ee,Cl]),Ri("fireDismissalEventInstead",[s("event",Fu())]),Ri("fireRepositionEventInstead",[s("event",tu())]),s("getRelated",X.none),s("isExtraPart",W),s("eventOrder",X.none)],factory:function(i,e){function r(e,t,n,r){u(e,t,n,function(){return r.map(function(e){return Vo(e)})})}function o(e,t,n,r){t=lg(i,e,t,n,r),c.open(e,t),ee.setValue(e,X.some({mode:"menu",menu:t}))}function t(n){c.isOpen(n)&&ee.getValue(n).each(function(e){switch(e.mode){case"menu":c.getState(n).each(Gh.repositionMenus);break;case"position":var t=i.lazySink(n).getOrDie();qg.positionWithinBounds(t,n,e.config,e.getBounds())}})}var u=function(e,t,n,r){var o=i.lazySink(e).getOrDie();c.openWhileCloaked(e,t,function(){return qg.positionWithinBounds(o,e,n,r())}),ee.setValue(e,X.some({mode:"position",config:n,getBounds:r}))},n={setContent:function(e,t){c.setContent(e,t)},showAt:function(e,t,n){r(e,t,n,X.none())},showWithin:r,showWithinBounds:u,showMenuAt:function(e,t,n){o(e,t,n,X.none)},showMenuWithinBounds:o,hide:function(e){c.isOpen(e)&&(ee.setValue(e,X.none()),c.close(e))},getContent:function(e){return c.getState(e)},reposition:t,isOpen:c.isOpen};return{uid:i.uid,dom:i.dom,behaviours:dp(i.inlineBehaviours,[c.config({isPartOf:function(e,t,n){return xs(t,n)||(r=n,i.getRelated(e).exists(function(e){return xs(e,r)}));var r},getAttachPoint:function(e){return i.lazySink(e).getOrDie()},onOpen:function(e){i.onShow(e)},onClose:function(e){i.onHide(e)}}),ee.config({store:{mode:"memory",initialValue:X.none()}}),Cl.config({channels:A(A({},cp(A({isExtraPart:e.isExtraPart},i.fireDismissalEventInstead.map(function(e){return{fireEventInstead:{event:e.event}}}).getOr({})))),lp(A(A({},i.fireRepositionEventInstead.map(function(e){return{fireEventInstead:{event:e.event}}}).getOr({})),{doReposition:t})))})]),eventOrder:i.eventOrder,apis:n}},apis:{showAt:function(e,t,n,r){e.showAt(t,n,r)},showWithin:function(e,t,n,r,o){e.showWithin(t,n,r,o)},showWithinBounds:function(e,t,n,r,o){e.showWithinBounds(t,n,r,o)},showMenuAt:function(e,t,n,r){e.showMenuAt(t,n,r)},showMenuWithinBounds:function(e,t,n,r,o){e.showMenuWithinBounds(t,n,r,o)},hide:function(e,t){e.hide(t)},isOpen:function(e,t){return e.isOpen(t)},getContent:function(e,t){return e.getContent(t)},setContent:function(e,t,n){e.setContent(t,n)},reposition:function(e,t){e.reposition(t)}}}),Xh="layout-inset",Yh=function(e){return e.x},Jh=function(e,t){return e.x+e.width-t.width},Zh=function(e,t){return e.y+e.height/2-t.height/2},Qh=function(e,t,n){return zs(Jh(e,t),dg(e,t),n.insetSouthwest(),js(),"southwest",Ys(e,{right:0,bottom:3}),Xh)},ev=function(e,t,n){return zs(Yh(e),dg(e,t),n.insetSoutheast(),Vs(),"southeast",Ys(e,{left:1,bottom:3}),Xh)},tv=function(e,t,n){return zs(Jh(e,t),e.y,n.insetNorthwest(),Hs(),"northwest",Ys(e,{right:0,top:2}),Xh)},nv=function(e,t,n){return zs(Yh(e),e.y,n.insetNortheast(),Fs(),"northeast",Ys(e,{left:1,top:2}),Xh)},rv=function(e,t,n){return zs(fg(e,t),e.y,n.insetNorth(),Us(),"north",Ys(e,{top:2}),Xh)},ov=function(e,t,n){return zs(fg(e,t),dg(e,t),n.insetSouth(),Ws(),"south",Ys(e,{bottom:3}),Xh)},iv=function(e,t,n){return zs(Jh(e,t),Zh(e,t),n.insetEast(),qs(),"east",Ys(e,{right:0}),Xh)},uv=function(e,t,n){return zs(Yh(e),Zh(e,t),n.insetWest(),$s(),"west",Ys(e,{left:1}),Xh)},av=function(e){switch(e){case"north":return rv;case"northeast":return nv;case"northwest":return tv;case"south":return ov;case"southeast":return ev;case"southwest":return Qh;case"east":return iv;case"west":return uv}},cv=function(e,t,n,r,o){return Ul(r).map(av).getOr(rv)(e,t,n,r,o)},sv=function(e){switch(e){case"north":return ov;case"northeast":return ev;case"northwest":return Qh;case"south":return rv;case"southeast":return nv;case"southwest":return tv;case"east":return uv;case"west":return iv}},lv=function(e,t,n,r,o){return Ul(r).map(sv).getOr(rv)(e,t,n,r,o)},fv=tinymce.util.Tools.resolve("tinymce.util.Delay"),dv=Kp({name:"Button",factory:function(e){function t(t){return C(e.dom,"attributes").bind(function(e){return C(e,t)})}var n=ug(e.action),r=e.dom.tag;return{uid:e.uid,dom:e.dom,components:e.components,events:n,behaviours:mp.augment(e.buttonBehaviours,[oe.config({}),N.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:"button"===r?(n=t("type").getOr("button"),r=t("role").map(function(e){return{role:e}}).getOr({}),A({type:n},r)):{role:t("role").getOr("button")}},eventOrder:e.eventOrder}},configFields:[s("uid",void 0),i("dom"),s("components",[]),mp.field("buttonBehaviours",[oe,N]),Mi("action"),Mi("role"),s("eventOrder",{})]}),mv=function(e){e=void 0!==e.dom.attributes?e.dom.attributes:[];return At(e,function(e,t){return"class"===t.name?e:A(A({},e),((e={})[t.name]=t.value,e))},{})},gv=function(e){return Array.prototype.slice.call(e.dom.classList,0)},pv=function(e){var e=S.fromHtml(e),t=Tr(e),n=mv(e),r=gv(e),t=0===t.length?{}:{innerHtml:aa(e)};return A({tag:_n(e),classes:r,attributes:n},t)},ie=function(e){var t=$p(e)&&on(e,"uid")?e.uid:Ca("memento");return{get:function(e){return e.getSystem().getByUid(t).getOrDie()},getOpt:function(e){return e.getSystem().getByUid(t).toOptional()},asSpec:function(){return A(A({},e),{uid:t})}}};function hv(e){return(hv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vv(e,t){return(vv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function bv(e,t,n){return(bv=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),1}catch(e){}}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);t=new(Function.bind.apply(e,r));return n&&vv(t,n.prototype),t}).apply(null,arguments)}function yv(e){return function(e){if(Array.isArray(e))return wv(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){var n;if(e)return"string"==typeof e?wv(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wv(e,t):void 0}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var xv,Cv=Object.hasOwnProperty,Sv=Object.setPrototypeOf,kv=Object.isFrozen,Tv=Object.getPrototypeOf,Ov=Object.getOwnPropertyDescriptor,Ev=Object.freeze,xh=Object.seal,_v=Object.create,Kf="undefined"!=typeof Reflect&&Reflect,Av=(Av=Kf.apply)||function(e,t,n){return e.apply(t,n)},Ev=Ev||function(e){return e},xh=xh||function(e){return e},Dv=(Dv=Kf.construct)||function(e,t){return bv(e,yv(t))},Mv=Vv(Array.prototype.forEach),Nv=Vv(Array.prototype.pop),Rv=Vv(Array.prototype.push),zv=Vv(String.prototype.toLowerCase),Bv=Vv(String.prototype.match),Pv=Vv(String.prototype.replace),Iv=Vv(String.prototype.indexOf),Lv=Vv(String.prototype.trim),Fv=Vv(RegExp.prototype.test),Hv=(xv=TypeError,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Dv(xv,t)});function Vv(o){return function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Av(o,e,n)}}function jv(e,t){Sv&&Sv(e,null);for(var n=t.length;n--;){var r,o=t[n];"string"==typeof o&&(r=zv(o))!==o&&(kv(t)||(t[n]=r),o=r),e[o]=!0}return e}function Uv(e){var t,n=_v(null);for(t in e)Av(Cv,e,[t])&&(n[t]=e[t]);return n}function Wv(e,t){for(;null!==e;){var n=Ov(e,t);if(n){if(n.get)return Vv(n.get);if("function"==typeof n.value)return Vv(n.value)}e=Tv(e)}return function(e){return console.warn("fallback value for",e),null}}var $v=Ev(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),qv=Ev(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Gv=Ev(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Kv=Ev(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Xv=Ev(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),Yv=Ev(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Jv=Ev(["#text"]),Zv=Ev(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Qv=Ev(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),e1=Ev(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),t1=Ev(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),n1=xh(/\{\{[\w\W]*|[\w\W]*\}\}/gm),r1=xh(/<%[\w\W]*|[\w\W]*%>/gm),o1=xh(/^data-[\-\w.\u00B7-\uFFFF]/),i1=xh(/^aria-[\-\w]+$/),u1=xh(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),a1=xh(/^(?:\w+script|data):/i),c1=xh(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),s1=xh(/^html$/i);function l1(e,t){return t=t(),b1(e,t).getOrThunk(h1(t))}var f1=function P(e){var a=0<arguments.length&&void 0!==e?e:"undefined"==typeof window?null:window,s=function(e){return P(e)};if(s.version="2.3.8",s.removed=[],a&&a.document&&9===a.document.nodeType){var c=a.document,o=a.document,I=a.DocumentFragment,e=a.HTMLTemplateElement,l=a.Node,L=a.Element,t=a.NodeFilter,F=void 0===(n=a.NamedNodeMap)?a.NamedNodeMap||a.MozNamedAttrMap:n,H=a.HTMLFormElement,V=a.DOMParser,n=a.trustedTypes,j=Wv(r=L.prototype,"cloneNode"),U=Wv(r,"nextSibling"),W=Wv(r,"childNodes"),f=Wv(r,"parentNode"),d=("function"==typeof e&&(r=o.createElement("template")).content&&r.content.ownerDocument&&(o=r.content.ownerDocument),function(e,t){if("object"!==hv(e)||"function"!=typeof e.createPolicy)return null;var n=null,r="data-tt-policy-suffix",t="dompurify"+((n=t.currentScript&&t.currentScript.hasAttribute(r)?t.currentScript.getAttribute(r):n)?"#"+n:"");try{return e.createPolicy(t,{createHTML:function(e){return e}})}catch(e){return console.warn("TrustedTypes policy "+t+" could not be created."),null}}(n,c)),$=d?d.createHTML(""):"",e=o,i=e.implementation,q=e.createNodeIterator,G=e.createDocumentFragment,K=e.getElementsByTagName,X=c.importNode,r={};try{r=Uv(o).documentMode?o.documentMode:{}}catch(e){}var Y,u,m,g={},p=(s.isSupported="function"==typeof f&&i&&void 0!==i.createHTMLDocument&&9!==r,n1),h=r1,J=o1,Z=i1,Q=a1,ee=c1,te=u1,v=null,ne=jv({},[].concat(yv($v),yv(qv),yv(Gv),yv(Xv),yv(Jv))),b=null,re=jv({},[].concat(yv(Zv),yv(Qv),yv(e1),yv(t1))),y=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),w=null,oe=null,ie=!0,ue=!0,ae=!1,x=!1,C=!1,ce=!1,se=!1,S=!1,k=!1,T=!1,le=!0,fe=!0,O=!1,E={},_=null,de=jv({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),me=null,ge=jv({},["audio","video","img","source","image","track"]),pe=null,he=jv({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ve="http://www.w3.org/1998/Math/MathML",be="http://www.w3.org/2000/svg",A="http://www.w3.org/1999/xhtml",D=A,ye=["application/xhtml+xml","text/html"],M=null,we=o.createElement("form"),xe=function(e){return e instanceof RegExp||e instanceof Function},Ce=function(e){M&&M===e||(e=Uv(e=e&&"object"===hv(e)?e:{}),v="ALLOWED_TAGS"in e?jv({},e.ALLOWED_TAGS):ne,b="ALLOWED_ATTR"in e?jv({},e.ALLOWED_ATTR):re,pe="ADD_URI_SAFE_ATTR"in e?jv(Uv(he),e.ADD_URI_SAFE_ATTR):he,me="ADD_DATA_URI_TAGS"in e?jv(Uv(ge),e.ADD_DATA_URI_TAGS):ge,_="FORBID_CONTENTS"in e?jv({},e.FORBID_CONTENTS):de,w="FORBID_TAGS"in e?jv({},e.FORBID_TAGS):{},oe="FORBID_ATTR"in e?jv({},e.FORBID_ATTR):{},E="USE_PROFILES"in e&&e.USE_PROFILES,ie=!1!==e.ALLOW_ARIA_ATTR,ue=!1!==e.ALLOW_DATA_ATTR,ae=e.ALLOW_UNKNOWN_PROTOCOLS||!1,x=e.SAFE_FOR_TEMPLATES||!1,C=e.WHOLE_DOCUMENT||!1,S=e.RETURN_DOM||!1,k=e.RETURN_DOM_FRAGMENT||!1,T=e.RETURN_TRUSTED_TYPE||!1,se=e.FORCE_BODY||!1,le=!1!==e.SANITIZE_DOM,fe=!1!==e.KEEP_CONTENT,O=e.IN_PLACE||!1,te=e.ALLOWED_URI_REGEXP||te,D=e.NAMESPACE||A,e.CUSTOM_ELEMENT_HANDLING&&xe(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(y.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&xe(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(y.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(y.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),u=u=-1===ye.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE,m="application/xhtml+xml"===u?function(e){return e}:zv,x&&(ue=!1),k&&(S=!0),E&&(v=jv({},yv(Jv)),b=[],!0===E.html&&(jv(v,$v),jv(b,Zv)),!0===E.svg&&(jv(v,qv),jv(b,Qv),jv(b,t1)),!0===E.svgFilters&&(jv(v,Gv),jv(b,Qv),jv(b,t1)),!0===E.mathMl)&&(jv(v,Xv),jv(b,e1),jv(b,t1)),e.ADD_TAGS&&jv(v=v===ne?Uv(v):v,e.ADD_TAGS),e.ADD_ATTR&&jv(b=b===re?Uv(b):b,e.ADD_ATTR),e.ADD_URI_SAFE_ATTR&&jv(pe,e.ADD_URI_SAFE_ATTR),e.FORBID_CONTENTS&&jv(_=_===de?Uv(_):_,e.FORBID_CONTENTS),fe&&(v["#text"]=!0),C&&jv(v,["html","head","body"]),v.table&&(jv(v,["tbody"]),delete w.tbody),Ev&&Ev(e),M=e)},Se=jv({},["mi","mo","mn","ms","mtext"]),ke=jv({},["foreignobject","desc","title","annotation-xml"]),Te=jv({},["title","style","font","a","script"]),N=jv({},qv),Oe=(jv(N,Gv),jv(N,Kv),jv({},Xv)),R=(jv(Oe,Yv),function(t){Rv(s.removed,{element:t});try{t.parentNode.removeChild(t)}catch(e){try{t.outerHTML=$}catch(e){t.remove()}}}),Ee=function(e,t){try{Rv(s.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){Rv(s.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!b[e])if(S||k)try{R(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},_e=function(e){se?e="<remove></remove>"+e:n=(n=Bv(e,/^[\r\n\t ]+/))&&n[0],"application/xhtml+xml"===u&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");var t,n,r=d?d.createHTML(e):e;if(D===A)try{t=(new V).parseFromString(r,u)}catch(e){}if(!t||!t.documentElement){t=i.createDocument(D,"template",null);try{t.documentElement.innerHTML=Y?"":r}catch(e){}}return r=t.body||t.documentElement,e&&n&&r.insertBefore(o.createTextNode(n),r.childNodes[0]||null),D===A?K.call(t,C?"html":"body")[0]:C?t.documentElement:r},Ae=function(e){return q.call(e.ownerDocument||e,e,t.SHOW_ELEMENT|t.SHOW_COMMENT|t.SHOW_TEXT,null,!1)},z=function(e){return"object"===hv(l)?e instanceof l:e&&"object"===hv(e)&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},B=function(e,t,n){g[e]&&Mv(g[e],function(e){e.call(s,t,n,M)})},De=function(e){if(B("beforeSanitizeElements",e,null),(!((i=e)instanceof H)||"string"==typeof i.nodeName&&"string"==typeof i.textContent&&"function"==typeof i.removeChild&&i.attributes instanceof F&&"function"==typeof i.removeAttribute&&"function"==typeof i.setAttribute&&"string"==typeof i.namespaceURI&&"function"==typeof i.insertBefore)&&!Fv(/[\u0080-\uFFFF]/,e.nodeName)){var t,n,r,o,i=m(e.nodeName);if(B("uponSanitizeElement",e,{tagName:i,allowedTags:v}),(!e.hasChildNodes()||z(e.firstElementChild)||z(e.content)&&z(e.content.firstElementChild)||!Fv(/<[/\w]/g,e.innerHTML)||!Fv(/<[/\w]/g,e.textContent))&&("select"!==i||!Fv(/<template/i,e.innerHTML))){if(v[i]&&!w[i])return e instanceof L&&((n=f(t=e))&&n.tagName||(n={namespaceURI:A,tagName:"template"}),r=zv(t.tagName),o=zv(n.tagName),t.namespaceURI===be?n.namespaceURI===A?"svg"!==r:n.namespaceURI===ve?"svg"!==r||"annotation-xml"!==o&&!Se[o]:!Boolean(N[r]):t.namespaceURI===ve?n.namespaceURI===A?"math"!==r:n.namespaceURI===be?"math"!==r||!ke[o]:!Boolean(Oe[r]):t.namespaceURI!==A||n.namespaceURI===be&&!ke[o]||n.namespaceURI===ve&&!Se[o]||Oe[r]||!Te[r]&&N[r])||("noscript"===i||"noembed"===i)&&Fv(/<\/no(script|embed)/i,e.innerHTML)?(R(e),!0):(x&&3===e.nodeType&&(t=e.textContent,t=Pv(t,p," "),t=Pv(t,h," "),e.textContent!==t)&&(Rv(s.removed,{element:e.cloneNode()}),e.textContent=t),B("afterSanitizeElements",e,null),!1);if(!w[i]&&Ne(i)){if(y.tagNameCheck instanceof RegExp&&Fv(y.tagNameCheck,i))return!1;if(y.tagNameCheck instanceof Function&&y.tagNameCheck(i))return!1}if(fe&&!_[i]){var u=f(e)||e.parentNode,a=W(e)||e.childNodes;if(a&&u)for(var c=a.length-1;0<=c;--c)u.insertBefore(j(a[c],!0),U(e))}}}return R(e),!0},Me=function(e,t,n){if(le&&("id"===t||"name"===t)&&(n in o||n in we))return!1;if((!ue||oe[t]||!Fv(J,t))&&(!ie||!Fv(Z,t)))if(!b[t]||oe[t]){if(!(Ne(e)&&(y.tagNameCheck instanceof RegExp&&Fv(y.tagNameCheck,e)||y.tagNameCheck instanceof Function&&y.tagNameCheck(e))&&(y.attributeNameCheck instanceof RegExp&&Fv(y.attributeNameCheck,t)||y.attributeNameCheck instanceof Function&&y.attributeNameCheck(t))||"is"===t&&y.allowCustomizedBuiltInElements&&(y.tagNameCheck instanceof RegExp&&Fv(y.tagNameCheck,n)||y.tagNameCheck instanceof Function&&y.tagNameCheck(n))))return!1}else if(!pe[t]&&!Fv(te,Pv(n,ee,""))&&("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==Iv(n,"data:")||!me[e])&&(!ae||Fv(Q,Pv(n,ee,"")))&&n)return!1;return!0},Ne=function(e){return 0<e.indexOf("-")},Re=function(e){B("beforeSanitizeAttributes",e,null);var t=e.attributes;if(t){for(var n={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:b},r=t.length;r--;){var o=(u=t[r]).name,i=u.namespaceURI,u="value"===o?u.value:Lv(u.value),a=m(o);if(n.attrName=a,n.attrValue=u,n.keepAttr=!0,n.forceKeepAttr=void 0,B("uponSanitizeAttribute",e,n),u=n.attrValue,!n.forceKeepAttr&&(Ee(o,e),n.keepAttr))if(Fv(/\/>/i,u))Ee(o,e);else{x&&(u=Pv(u,p," "),u=Pv(u,h," "));var c=m(e.nodeName);if(Me(c,a,u))try{i?e.setAttributeNS(i,o,u):e.setAttribute(o,u),Nv(s.removed)}catch(e){}}}B("afterSanitizeAttributes",e,null)}},ze=function e(t){var n,r=Ae(t);for(B("beforeSanitizeShadowDOM",t,null);n=r.nextNode();)B("uponSanitizeShadowNode",n,null),De(n)||(n.content instanceof I&&e(n.content),Re(n));B("afterSanitizeShadowDOM",t,null)};s.sanitize=function(e,t){var n,r,o,i;if("string"!=typeof(e=(Y=!e)?"\x3c!--\x3e":e)&&!z(e)){if("function"!=typeof e.toString)throw Hv("toString is not a function");if("string"!=typeof(e=e.toString()))throw Hv("dirty is not a string, aborting")}if(!s.isSupported){if("object"===hv(a.toStaticHTML)||"function"==typeof a.toStaticHTML){if("string"==typeof e)return a.toStaticHTML(e);if(z(e))return a.toStaticHTML(e.outerHTML)}return e}if(ce||Ce(t),s.removed=[],O="string"!=typeof e&&O){if(e.nodeName){t=m(e.nodeName);if(!v[t]||w[t])throw Hv("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof l)1===(t=(n=_e("\x3c!----\x3e")).ownerDocument.importNode(e,!0)).nodeType&&"BODY"===t.nodeName||"HTML"===t.nodeName?n=t:n.appendChild(t);else{if(!S&&!x&&!C&&-1===e.indexOf("<"))return d&&T?d.createHTML(e):e;if(!(n=_e(e)))return S?null:T?$:""}n&&se&&R(n.firstChild);for(var u=Ae(O?e:n);r=u.nextNode();)3===r.nodeType&&r===o||De(r)||(r.content instanceof I&&ze(r.content),Re(r),o=r);if(o=null,O)return e;if(S){if(k)for(i=G.call(n.ownerDocument);n.firstChild;)i.appendChild(n.firstChild);else i=n;return i=b.shadowroot?X.call(c,i,!0):i}return t=C?n.outerHTML:n.innerHTML,C&&v["!doctype"]&&n.ownerDocument&&n.ownerDocument.doctype&&n.ownerDocument.doctype.name&&Fv(s1,n.ownerDocument.doctype.name)&&(t="<!DOCTYPE "+n.ownerDocument.doctype.name+">\n"+t),x&&(t=Pv(t,p," "),t=Pv(t,h," ")),d&&T?d.createHTML(t):t},s.setConfig=function(e){Ce(e),ce=!0},s.clearConfig=function(){M=null,ce=!1},s.isValidAttribute=function(e,t,n){return M||Ce({}),e=m(e),t=m(t),Me(e,t,n)},s.addHook=function(e,t){"function"==typeof t&&(g[e]=g[e]||[],Rv(g[e],t))},s.removeHook=function(e){if(g[e])return Nv(g[e])},s.removeHooks=function(e){g[e]&&(g[e]=[])},s.removeAllHooks=function(){g={}}}else s.isSupported=!1;return s}(),d1=function(e){return f1().sanitize(e)},m1=tinymce.util.Tools.resolve("tinymce.util.I18n"),g1={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},p1="temporary-placeholder",h1=function(e){return function(){return C(e,p1).getOr("!not found!")}},v1=function(e,t){var n,e=e.toLowerCase();return m1.isRtl()&&(n=hn(e,"-rtl"),rn(t,n))?n:e},b1=function(e,t){return C(t,v1(e,t))},y1=function(e,t,n){t=t();return b1(e,t).or(n).getOrThunk(h1(t))},w1=function(e){return!!m1.isRtl()&&rn(g1,e)},x1=function(){return re("add-focusable",[na(function(e){ps(e.element,"svg").each(function(e){return k(e,"focusable","false")})})])},C1=function(e,t,n,r){var o=w1(t)?["tox-icon--flip"]:[],t=C(n,v1(t,n)).or(r).getOrThunk(h1(n));return{dom:{tag:e.tag,attributes:null!=(r=e.attributes)?r:{},classes:e.classes.concat(o),innerHtml:t},behaviours:Q(ae(ae([],null!=(n=e.behaviours)?n:[],!0),[x1()],!1))}},S1=function(e,t,n,r){return void 0===r&&(r=X.none()),C1(t,e,n(),r)},k1={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},T1=Kp({name:"Notification",factory:function(t){function n(e){return{dom:{tag:"div",classes:["tox-bar"],attributes:{style:"width: "+e+"%"}}}}function r(e){return{dom:{tag:"div",classes:["tox-text"],innerHtml:e+"%"}}}var o=ie({dom:pv("<p>"+d1(t.translationProvider(t.text))+"</p>"),behaviours:Q([ne.config({})])}),i=ie({dom:{tag:"div",classes:t.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[n(0)]},r(0)],behaviours:Q([ne.config({})])}),e={updateProgress:function(e,t){e.getSystem().isConnected()&&i.getOpt(e).each(function(e){ne.set(e,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[n(t)]},r(t)])})},updateText:function(e,t){e.getSystem().isConnected()&&(e=o.get(e),ne.set(e,[Mc(t)]))}},u=Rt([t.icon.toArray(),t.level.toArray(),t.level.bind(function(e){return X.from(k1[e])}).toArray()]),a=ie(dv.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"]},components:[S1("close",{tag:"div",classes:["tox-icon"],attributes:{"aria-label":t.translationProvider("Close")}},t.iconProvider)],action:function(e){t.onAction(e)}}));u=u,c={tag:"div",classes:["tox-notification__icon"]},s=t.iconProvider,l=s(),s=Mt(u,function(e){return rn(l,v1(e,l))});var c,s,l,u=[C1(c,s.getOr(p1),l,X.none()),{dom:{tag:"div",classes:["tox-notification__body"]},components:[o.asSpec()],behaviours:Q([ne.config({})])}];return{uid:t.uid,dom:{tag:"div",attributes:{role:"alert"},classes:t.level.map(function(e){return["tox-notification","tox-notification--in","tox-notification--"+e]}).getOr(["tox-notification","tox-notification--in"])},behaviours:Q([oe.config({}),re("notification-events",[Z(fu(),function(e){a.getOpt(e).each(oe.focus)})])]),components:u.concat(t.progress?[i.asSpec()]:[]).concat(t.closeButton?[a.asSpec()]:[]),apis:e}},configFields:[Mi("level"),i("progress"),i("icon"),i("onAction"),i("text"),i("iconProvider"),i("translationProvider"),ot("closeButton",!0)],apis:{updateProgress:function(e,t,n){e.updateProgress(t,n)},updateText:function(e,t,n){e.updateText(t,n)}}});function O1(c,e,o){var s=e.backstage.shared;return{open:function(e,t){function n(){t(),Kh.hide(a)}function i(){var e=Vo(S.fromDom(c.getContentAreaContainer())),t=Uo(),n=Ks(t.x,e.x,e.right),r=Ks(t.y,e.y,e.bottom),o=Math.max(e.right,t.right),e=Math.max(e.bottom,t.bottom);return X.some(Ho(n,r,o-n,e-r))}var r=!e.closeButton&&e.timeout&&(0<e.timeout||e.timeout<0),u=Bc(T1.sketch({text:e.text,level:xt(["success","error","warning","warn","info"],e.type)?e.type:void 0,progress:!0===e.progressBar,icon:X.from(e.icon),closeButton:!r,onAction:n,iconProvider:s.providers.icons,translationProvider:s.providers.translate})),a=Bc(Kh.sketch(A({dom:{tag:"div",classes:["tox-notifications-container"]},lazySink:s.getSink,fireDismissalEventInstead:{}},s.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}})));o.add(a),0<e.timeout&&fv.setTimeout(function(){n()},e.timeout);return{close:n,moveTo:function(e,t){Kh.showAt(a,Pc(u),{anchor:{type:"makeshift",x:e,y:t}})},moveRel:function(e,t){var n,r=Pc(u),o={maxHeightFunction:Sf()};"banner"!==t&&z(e)?(n=function(e){switch(e){case"bc-bc":return ov;case"tc-tc":return rv;case"tc-bc":return ul;default:return al}}(t),t={type:"node",root:Lr(),node:X.some(S.fromDom(e)),overrides:o,layouts:{onRtl:function(){return[n]},onLtr:function(){return[n]}}},Kh.showWithinBounds(a,r,{anchor:t},i)):(e=A(A({},s.anchors.banner()),{overrides:o}),Kh.showWithinBounds(a,r,{anchor:e},i))},text:function(e){T1.updateText(u,e)},settings:e,getEl:function(){return u.element.dom},progressBar:{value:function(e){T1.updateProgress(u,e)}}}},close:function(e){e.close()},reposition:function(n){0<n.length&&w(n,function(e,t){0===t?e.moveRel(null,"banner"):e.moveRel(n[t-1].getEl(),"bc-tc")})},getArgs:function(e){return e.settings}}}function E1(e,t){return Q([re(e,t)])}function _1(e,t,n){e.getSystem().broadcastOn([bb],{})}function A1(e,t){e.on("init",function(){e.mode.isReadOnly()&&ly(t,!0)}),e.on("SwitchMode",function(){return ly(t,e.mode.isReadOnly())}),Tb(e)&&e.setMode("readonly")}var D1,M1,N1=function(n,r){function o(){h(i)||(clearTimeout(i),i=null)}var i=null;return{cancel:o,throttle:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];o(),i=setTimeout(function(){i=null,n.apply(null,e)},r)}}},R1=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker"),z1=function(e,t){return e.isBlock(t)||xt(["BR","IMG","HR","INPUT"],t.nodeName)||"false"===e.getContentEditable(t)},B1=function(t,e,n,r,o){var i=R1(t,function(e){return z1(t,e)});return X.from(i.backwards(e,n,r,o))},P1="[data-mce-autocompleter]",I1=function(e){return vs(e,P1)},L1=function(e){return e.collapsed&&3===e.startContainer.nodeType},F1=function(e){return e.toString().replace(/\u00A0/g," ").replace(/\uFEFF/g,"")},H1=function(e){return""!==e&&-1!==" \f\n\r\t\v".indexOf(e)},V1=function(e,t){return e.substring(t.length)},j1=function(e,t,n){for(var r=t-1;0<=r;r--){var o=e.charAt(r);if(H1(o))return X.none();if(o===n)break}return X.some(r)},U1=function(e,n,r,o){var t;return void 0===o&&(o=0),L1(n)?(t=e.getParent(n.startContainer,e.isBlock)||e.getRoot(),B1(e,n.startContainer,n.startOffset,function(e,t,n){return j1(n,t,r).getOr(t)},t).bind(function(e){var t=n.cloneRange();return t.setStart(e.container,e.offset),t.setEnd(n.endContainer,n.endOffset),t.collapsed||0!==(e=F1(t)).lastIndexOf(r)||V1(e,r).length<o?X.none():X.some({text:V1(e,r),range:t,triggerChar:r})})):X.none()},W1=function(n,e,r,t){return void 0===t&&(t=0),I1(S.fromDom(e.startContainer)).fold(function(){return U1(n,e,r,t)},function(e){var t=n.createRng(),e=(t.selectNode(e.dom),F1(t));return X.some({range:t,text:V1(e,r),triggerChar:r})})},$1=function(n,e){e.on("keypress compositionend",n.onKeypress.throttle),e.on("remove",n.onKeypress.cancel);function r(e,t){J(e,mu(),{raw:t})}e.on("keydown",function(t){function e(){return n.getView().bind(Yp.getHighlighted)}8===t.which&&n.onKeypress.throttle(t),n.isActive()&&(27===t.which&&n.cancelIfNecessary(),n.isMenuOpen()?13===t.which?(e().each(qu),t.preventDefault()):40===t.which?(e().fold(function(){n.getView().each(Yp.highlightFirst)},function(e){r(e,t)}),t.preventDefault(),t.stopImmediatePropagation()):37!==t.which&&38!==t.which&&39!==t.which||e().each(function(e){r(e,t),t.preventDefault(),t.stopImmediatePropagation()}):13!==t.which&&38!==t.which&&40!==t.which||n.cancelIfNecessary())}),e.on("NodeChange",function(e){n.isActive()&&!n.isProcessingAction()&&I1(S.fromDom(e.element)).isNone()&&n.cancelIfNecessary()})},q1=tinymce.util.Tools.resolve("tinymce.util.Promise"),G1=function(e,t){return{container:e,offset:t}},K1=function(e){return e.nodeType===En},X1=function(e){return e.nodeType===On},Y1=function(e){var t;return K1(e)?G1(e,e.data.length):0<(t=e.childNodes).length?Y1(t[t.length-1]):G1(e,t.length)},J1=function(e,t){var n=e.childNodes;return 0<n.length&&t<n.length?J1(n[t],0):0<n.length&&X1(e)&&n.length===t?Y1(n[n.length-1]):G1(e,t)},Z1=function(e,t){return B1(e,t.container,t.offset,function(e,t){return 0===t?-1:t},e.getRoot()).filter(function(e){e=e.container.data.charAt(e.offset-1);return!H1(e)}).isSome()},Q1=function(t){return function(e){e=J1(e.startContainer,e.startOffset);return!Z1(t,e)}},e0=function(t,n,e){return $t(e.triggerChars,function(e){return W1(t,n,e)})},t0=function(t,e,n,r){void 0===r&&(r={});var e=e(),o=t.selection.getRng().startContainer.nodeValue,e=Et(e.lookupByChar(n.triggerChar),function(e){return n.text.length>=e.minChars&&e.matches.getOrThunk(function(){return Q1(t.dom)})(n.range,o,n.text)});return 0===e.length?X.none():(e=q1.all(x(e,function(t){return t.fetch(n.text,t.maxResults,r).then(function(e){return{matchText:n.text,items:e,columns:t.columns,onAction:t.onAction,highlightOn:t.highlightOn}})})),X.some({lookupData:e,context:n}))},n0=m([t("type"),Ze("text")]),r0=function(e){return Si("separatormenuitem",n0,e)},o0=m([s("type","autocompleteitem"),s("active",!1),s("disabled",!1),s("meta",{}),t("value"),Ze("text"),Ze("icon")]),i0=m([t("type"),t("ch"),tt("minChars",1),s("columns",1),tt("maxResults",10),Qe("matches"),Ke("fetch"),Ke("onAction"),ut("highlightOn",[],vi)]),u0=function(e){return Si("Autocompleter.Separator",n0,e)},a0=function(e){return Si("Autocompleter.Item",o0,e)},c0=function(e){return Si("Autocompleter",i0,e)},wh=[ot("disabled",!1),Ze("tooltip"),Ze("icon"),Ze("text"),it("onSetup",function(){return G})],s0=m([t("type"),Ke("onAction")].concat(wh)),l0=function(e){return Si("toolbarbutton",s0,e)},Ep=[ot("active",!1)].concat(wh),f0=m(Ep.concat([t("type"),Ke("onAction")])),d0=function(e){return Si("ToggleButton",f0,e)},Op=[it("predicate",W),rt("scope","node",["node","editor"]),rt("position","selection",["node","selection","line"])],_p=wh.concat([s("type","contextformbutton"),s("primary",!1),Ke("onAction"),_i("original",v)]),Eh=Ep.concat([s("type","contextformbutton"),s("primary",!1),Ke("onAction"),_i("original",v)]),bh=wh.concat([s("type","contextformbutton")]),Pf=Ep.concat([s("type","contextformtogglebutton")]),_h=$e("type",{contextformbutton:_p,contextformtogglebutton:Eh}),m0=m([s("type","contextform"),it("initValue",K("")),Ze("label"),Ye("commands",_h),Ni("launch",$e("type",{contextformbutton:bh,contextformtogglebutton:Pf}))].concat(Op)),g0=function(e){return Si("ContextForm",m0,e)},p0=m([s("type","contexttoolbar"),t("items")].concat(Op)),h0=function(e){return Si("ContextToolbar",p0,e)},v0=function(e){var t={};return w(e,function(e){t[e]={}}),qt(t)},b0=((Ch=H2=H2||{})[Ch.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",Ch[Ch.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX",H2),y0="tox-menu-nav__js",w0="tox-collection__item",x0="tox-swatch",C0={normal:y0,color:x0},S0="tox-collection__item--enabled",k0="tox-collection__item-icon",T0="tox-collection__item-label",O0="tox-collection__item-accessory",E0="tox-collection__item-caret",_0="tox-collection__item-checkmark",A0="tox-collection__item--active",D0="tox-collection__item-container",M0="tox-collection__item-container--column",N0="tox-collection__item-container--row",R0="tox-collection__item-container--align-right",z0="tox-collection__item-container--align-left",B0="tox-collection__item-container--valign-top",P0="tox-collection__item-container--valign-middle",I0="tox-collection__item-container--valign-bottom",L0=function(e){return C(C0,e).getOr(y0)},F0=function(e){return"color"===e?"tox-swatches":"tox-menu"},H0=function(e){return{backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:F0(e),tieredMenu:"tox-tiered-menu"}},V0=function(e){var t=H0(e);return{backgroundMenu:t.backgroundMenu,selectedMenu:t.selectedMenu,menu:t.menu,selectedItem:t.selectedItem,item:L0(e)}},j0=function(e,t,n){n=H0(n);return{tag:"div",classes:Rt([[n.menu,"tox-menu-"+t+"-column"],e?[n.hasIcons]:[]])}},U0=[Vh.parts.items({})],W0=function(e,t,n){var r=H0(n);return{dom:{tag:"div",classes:Rt([[r.tieredMenu]])},markers:V0(n)}},$0=function(t,n){return function(e){e=kt(e,n);return x(e,function(e){return{dom:t,components:e}})}},q0=function(e){return{dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[Vh.parts.items({preprocess:"auto"!==e?$0({tag:"div",classes:["tox-swatches__row"]},e):v})]}]}},G0=function(e){return{dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[Vh.parts.items({preprocess:$0({tag:"div",classes:["tox-collection__group"]},e)})]}},K0=function(e,n){var r=[],o=[];return w(e,function(e,t){(!n(e,t)||(0<o.length&&r.push(o),o=[],rn(e.dom,"innerHtml")))&&o.push(e)}),0<o.length&&r.push(o),x(r,function(e){return{dom:{tag:"div",classes:["tox-collection__group"]},components:e}})},X0=function(t,n,e){return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(1===t?["tox-collection--list"]:["tox-collection--grid"])},components:[Vh.parts.items({preprocess:function(e){return"auto"!==t&&1<t?$0({tag:"div",classes:["tox-collection__group"]},t)(e):K0(e,function(e,t){return"separator"===n[t].type})}})]}},Y0=function(n,e){return{dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[Vh.parts.items({preprocess:function(e){return K0(e,function(e,t){return"separator"===n[t].type})}})]}},J0=function(e){return Ct(e,function(e){return"icon"in e&&void 0!==e.icon})},Z0=function(e){return console.error(Oi(e)),console.log(e),X.none()},Q0=function(e,t,n,r,o){var i=Y0(n);return{value:e,dom:i.dom,components:i.components,items:n}},eb=function(e,t,n,r,o){var i;return"color"===o?{value:e,dom:(i=q0(r)).dom,components:i.components,items:n}:"normal"===o&&"auto"===r?{value:e,dom:(i=X0(r,n)).dom,components:i.components,items:n}:"normal"===o&&1===r?{value:e,dom:(i=X0(1,n)).dom,components:i.components,items:n}:"normal"===o?{value:e,dom:(i=X0(r,n)).dom,components:i.components,items:n}:"listpreview"===o&&"auto"!==r?{value:e,dom:(i=G0(r)).dom,components:i.components,items:n}:{value:e,dom:j0(t,r,o),components:U0,items:n}},ma=[t("type"),t("src"),Ze("alt"),ut("classes",[],vi)],tb=m(ma),ha=[t("type"),t("text"),Ze("name"),ut("classes",["tox-collection__item-label"],vi)],nb=m(ha),yh=Ie(function(){return Ue("type",{cardimage:tb,cardtext:nb,cardcontainer:rb})}),rb=m([t("type"),nt("direction","horizontal"),nt("align","left"),nt("valign","middle"),Ye("items",yh)]),Ug=[ot("disabled",!1),Ze("text"),Ze("shortcut"),Ei("value","value",Yo(function(){return O("menuitem-value")}),pi()),s("meta",{})],ob=m([t("type"),Ze("label"),Ye("items",yh),it("onSetup",function(){return G}),it("onAction",G)].concat(Ug)),ib=function(e){return Si("cardmenuitem",ob,e)},ub=m([t("type"),ot("active",!1),Ze("icon")].concat(Ug)),ab=function(e){return Si("choicemenuitem",ub,e)},tu=[t("type"),t("fancytype"),it("onAction",G)],Kf=[s("initData",{})].concat(tu),xh=[at("initData",{},[ot("allowCustomColors",!0),et("colors",pi())])].concat(tu),cb=$e("fancytype",{inserttable:Kf,colorswatch:xh}),sb=function(e){return Si("fancymenuitem",cb,e)},lb=m([t("type"),it("onSetup",function(){return G}),it("onAction",G),Ze("icon")].concat(Ug)),fb=function(e){return Si("menuitem",lb,e)},db=m([t("type"),Ke("getSubmenuItems"),it("onSetup",function(){return G}),Ze("icon")].concat(Ug)),mb=function(e){return Si("nestedmenuitem",db,e)},gb=m([t("type"),Ze("icon"),ot("active",!1),it("onSetup",function(){return G}),Ke("onAction")].concat(Ug)),pb=function(e){return Si("togglemenuitem",gb,e)},hb=function(e,n,t){var r=Sg(e.element,"."+t);return 0<r.length?(e=Nt(r,function(e){var e=e.dom.getBoundingClientRect().top,t=r[0].dom.getBoundingClientRect().top;return Math.abs(e-t)>n}).getOr(r.length),X.some({numColumns:e,numRows:Math.ceil(r.length/e)})):X.none()},vb={namedEvents:E1,unnamedEvents:function(e){return E1(O("unnamed-events"),e)}},bb=O("tooltip.exclusive"),yb=O("tooltip.show"),wb=O("tooltip.hide"),Ep=Object.freeze({__proto__:null,hideAllExclusive:_1,setComponents:function(e,t,n,r){n.getTooltip().each(function(e){e.getSystem().isConnected()&&ne.set(e,r)})}}),_p=Object.freeze({__proto__:null,events:function(o,i){function n(t){i.getTooltip().each(function(e){ep(e),o.onHide(t,e),i.clearTooltip()}),i.clearTimer()}return Yu(Rt([[Z(yb,function(r){i.resetTimer(function(){var t,e,n;t=r,i.isShowing()||(_1(t),e=o.lazySink(t).getOrDie(),n=t.getSystem().build({dom:o.tooltipDom,components:o.tooltipComponents,events:Yu("normal"===o.mode?[Z(lu(),function(e){Y(t,yb)}),Z(cu(),function(e){Y(t,wb)})]:[]),behaviours:Q([ne.config({})])}),i.setTooltip(n),Jg(e,n),o.onShow(t,n),qg.position(e,n,{anchor:o.anchor(t)}))},o.delay)}),Z(wb,function(e){i.resetTimer(function(){n(e)},o.delay)}),Z(Tu(),function(e,t){t.universal||xt(t.channels,bb)&&n(e)}),ra(function(e){n(e)})],"normal"===o.mode?[Z(fu(),function(e){Y(e,yb)}),Z(Su(),function(e){Y(e,wb)}),Z(lu(),function(e){Y(e,yb)}),Z(cu(),function(e){Y(e,wb)})]:[Z(Wu(),function(e,t){Y(e,yb)}),Z($u(),function(e){Y(e,wb)})]]))}}),Eh=[i("lazySink"),i("tooltipDom"),s("exclusive",!0),s("tooltipComponents",[]),s("delay",300),rt("mode","normal",["normal","follow-highlight"]),s("anchor",function(e){return{type:"hotspot",hotspot:e,layouts:{onLtr:K([al,ul,nl,ol,rl,il]),onRtl:K([al,ul,nl,ol,rl,il])}}}),e("onHide"),e("onShow")],xb=yl({fields:Eh,name:"tooltipping",active:_p,state:Object.freeze({__proto__:null,init:function(){function n(){r.on(clearTimeout)}var r=ef(),e=ef(),t=K("not-implemented");return za({getTooltip:e.get,isShowing:e.isSet,setTooltip:e.set,clearTooltip:e.clear,clearTimer:n,resetTimer:function(e,t){n(),r.set(setTimeout(e,t))},readState:t})}}),apis:Ep}),Cb=function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},Sb=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),kb=tinymce.util.Tools.resolve("tinymce.EditorManager"),Tb=function(e){return e.getParam("readonly",!1,"boolean")},Ob=function(e){return e.getParam("height",Math.max(e.getElement().offsetHeight,200))},Eb=function(e){return e.getParam("width",Sb.DOM.getStyle(e.getElement(),"width"))},_b=function(e){return X.from(e.getParam("min_width")).filter(P)},Ab=function(e){return X.from(e.getParam("min_height")).filter(P)},Db=function(e){return X.from(e.getParam("max_width")).filter(P)},Mb=function(e){return X.from(e.getParam("max_height")).filter(P)},Nb=function(e){return X.from(e.getParam("style_formats")).filter(p)},Rb=function(e){return e.getParam("style_formats_merge",!1,"boolean")},zb=function(e){return e.getParam("content_langs",void 0,"array")},Bb=function(e){return e.getParam("removed_menuitems","")},Pb=function(e){return!1!==e.getParam("menubar",!0,"boolean")},Ib=function(e){var t=e.getParam("toolbar",!0),n=!0===t,r=d(t),t=p(t)&&0<t.length;return!Fb(e)&&(t||r||n)},Lb=function(t){var e=St(9,function(e){return t.getParam("toolbar"+(e+1),!1,"string")}),e=Et(e,function(e){return"string"==typeof e});return 0<e.length?X.some(e):X.none()},Fb=function(e){return Lb(e).fold(function(){return 0<e.getParam("toolbar",[],"string[]").length},$)},Hb=((_h=D1=D1||{}).default="wrap",_h.floating="floating",_h.sliding="sliding",_h.scrolling="scrolling",function(e){return e.getParam("toolbar_mode","","string")}),Vb=((bh=M1=M1||{}).auto="auto",bh.top="top",bh.bottom="bottom",function(e){return e.getParam("toolbar_groups",{},"object")}),jb=function(e){return e.getParam("toolbar_location",M1.auto,"string")},Ub=function(e){return jb(e)===M1.bottom},Wb=function(e){return e.getParam("fixed_toolbar_container","","string")},$b=function(e){return e.getParam("fixed_toolbar_container_target")},qb=function(e){var t;return e.inline?0<(t=Wb(e)).length?hs(Lr(),t):(t=$b(e),z(t)?X.some(S.fromDom(t)):X.none()):X.none()},Gb=function(e){return e.inline&&qb(e).isSome()},Kb=function(e){return qb(e).getOrThunk(function(){return Rr(Nr(S.fromDom(e.getElement())))})},Xb=function(e){return e.inline&&!Pb(e)&&!Ib(e)&&!Fb(e)},Yb=function(e){return(e.getParam("toolbar_sticky",!1,"boolean")||e.inline)&&!Gb(e)&&!Xb(e)},Jb=function(e){return e.getParam("draggable_modal",!1,"boolean")},Zb=function(e){e=e.getParam("menu");return e?Xt(e,function(e){return A(A({},e),{items:e.items})}):{}},Qb=function(e){return e.getParam("menubar")},ey=function(e){return e.getParam("toolbar",!0)},ty=function(e){return e.getParam("file_picker_callback")},ny=function(e){return e.getParam("file_picker_types")},ry=function(e){return e.getParam("file_browser_callback_types")},oy=function(e){return!1===e.getParam("typeahead_urls")},iy=function(e){return e.getParam("anchor_top","#top")},uy=function(e){return e.getParam("anchor_bottom","#bottom")},ay=function(e){var t=e.getParam("file_picker_validator_handler",void 0,"function");return void 0===t?e.getParam("filepicker_validator_handler",void 0,"function"):t},cy="silver.readonly",sy=m([Ai("readonly",bi)]),ly=function(e,t){var n=e.outerContainer.element;t&&(e.mothership.broadcastOn([op()],{target:n}),e.uiMothership.broadcastOn([op()],{target:n})),e.mothership.broadcastOn([cy],{readonly:t}),e.uiMothership.broadcastOn([cy],{readonly:t})},fy=function(){var e;return Cl.config({channels:((e={})[cy]={schema:sy,onReceive:function(e,t){te.set(e,t.readonly)}},e)})},dy={item:function(e){return te.config({disabled:e,disableClass:"tox-collection__item--state-disabled"})},button:function(e){return te.config({disabled:e})},splitButton:function(e){return te.config({disabled:e,disableClass:"tox-tbtn--disabled"})},toolbarButton:function(e){return te.config({disabled:e,disableClass:"tox-tbtn--disabled",useNative:!1})}},my=function(e,t){var n=e.getApi(t);return function(e){e(n)}},gy=function(t,n){return na(function(e){my(t,e)(function(e){e=t.onSetup(e);B(e)&&n.set(e)})})},py=function(t,n){return ra(function(e){return my(t,e)(n.get())})},hy=function(n,r){return ia(function(e,t){my(n,e)(n.onAction),n.triggersSubmenu||r!==b0.CLOSE_ON_EXECUTE||(Y(e,Du()),t.stop())})},vy=((Pf={})[Ou()]=["disabling","alloy.base.behaviour","toggling","item-events"],Pf),by=cn,yy=function(e,t,n,r){var o=T(G);return{type:"item",dom:t.dom,components:by(t.optComponents),data:e.data,eventOrder:vy,hasSubmenu:e.triggersSubmenu,itemBehaviours:Q([re("item-events",[hy(e,n),gy(e,o),py(e,o)]),dy.item(function(){return e.disabled||r.isDisabled()}),fy(),ne.config({})].concat(e.itemBehaviours))}},wy=function(e){return{value:e.value,meta:A({text:e.text.getOr("")},e.meta)}},xy=tinymce.util.Tools.resolve("tinymce.Env"),Cy=function(e){var n=xy.mac?{alt:"&#x2325;",ctrl:"&#x2303;",shift:"&#x21E7;",meta:"&#x2318;",access:"&#x2303;&#x2325;"}:{meta:"Ctrl",access:"Shift+Alt"},e=e.split("+"),e=x(e,function(e){var t=e.toLowerCase().trim();return rn(n,t)?n[t]:e});return xy.mac?e.join(""):e.join("+")},Sy=function(e,t,n){return S1(e,{tag:"div",classes:n=void 0===n?[k0]:n},t)},ky=function(e){return{dom:{tag:"div",classes:[T0]},components:[Mc(m1.translate(e))]}},Ty=function(e,t){return{dom:{tag:"div",classes:t,innerHtml:e}}},Oy=function(e,t){return{dom:{tag:"div",classes:[T0]},components:[{dom:{tag:e.tag,styles:e.styles},components:[Mc(m1.translate(t))]}]}},Ey=function(e){return{dom:{tag:"div",classes:[O0],innerHtml:Cy(e)}}},_y=function(e){return Sy("checkmark",e,[_0])},Ay=function(e,t){var n="vertical"===e.direction?M0:N0,r="left"===e.align?z0:R0;return{dom:{tag:"div",classes:[D0,n,r,function(){switch(e.valign){case"top":return B0;case"middle":return P0;case"bottom":return I0}}()]},components:t}},Dy=function(e,t,n){return{dom:{tag:"img",classes:t,attributes:{src:e,alt:n.getOr("")}}}},My=function(e,t,n){var r,o=e.ariaLabel,i=e.value,e=e.iconContent.map(function(e){return y1(e,t.icons,n)});return{dom:(r=x0,e=e.getOr(""),r={tag:"div",attributes:o.map(function(e){return{title:t.translate(e)}}).getOr({}),classes:[r]},A(A({},r),"custom"===i?{tag:"button",classes:ae(ae([],r.classes,!0),["tox-swatches__picker-btn"],!1),innerHtml:e}:"remove"===i?{classes:ae(ae([],r.classes,!0),["tox-swatch--remove"],!1),innerHtml:e}:{attributes:A(A({},r.attributes),{"data-mce-color":i}),styles:{"background-color":i}})),optComponents:[]}},Ny=function(e){e=e.map(function(e){return{attributes:{title:m1.translate(e)}}}).getOr({});return A({tag:"div",classes:[y0,w0]},e)},Ry=function(e,t,n,r){var o={tag:"div",classes:[k0]},n=n?e.iconContent.map(function(e){return S1(e,o,t.icons,r)}).orThunk(function(){return X.some({dom:o})}):X.none(),i=e.checkMark,u=X.from(e.meta).fold(function(){return ky},function(e){return rn(e,"style")?V(Oy,e.style):ky}),a=e.htmlContent.fold(function(){return e.textContent.map(u)},function(e){return X.some(Ty(e,[T0]))});return{dom:Ny(e.ariaLabel),optComponents:[n,a,e.shortcutContent.map(Ey),i,e.caret]}},zy=function(e,t,n,r){return void 0===r&&(r=X.none()),"color"===e.presets?My(e,t,r):Ry(e,t,n,r)},By=function(e,t){return C(e,"tooltipWorker").map(function(n){return[xb.config({lazySink:t.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:function(e){return{type:"submenu",item:e,overrides:{maxHeightFunction:Sf}}},mode:"follow-highlight",onShow:function(t,e){n(function(e){xb.setComponents(t,[Nc({element:S.fromDom(e)})])})}})]}).getOr([])},Py=function(e){return Sb.DOM.encode(e)},Iy=function(e,t){e=m1.translate(e),e=Py(e);return 0<t.length?(t=new RegExp(Cb(t),"gi"),e.replace(t,function(e){return'<span class="tox-autocompleter-highlight">'+e+"</span>"})):e},Ly=function(e,n){return x(e,function(e){switch(e.type){case"cardcontainer":return Ay(e,Ly(e.items,n));case"cardimage":return Dy(e.src,e.classes,e.alt);case"cardtext":var t=e.name.exists(function(e){return xt(n.cardText.highlightOn,e)})?X.from(n.cardText.matchText).getOr(""):"";return Ty(Iy(e.text,t),e.classes)}})},Fy=function(t,e,n,r,o,i,u,a){void 0===a&&(a=!0);n=zy({presets:n,textContent:e?t.text:X.none(),htmlContent:X.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:e?t.shortcut:X.none(),checkMark:e?X.some(_y(u.icons)):X.none(),caret:X.none(),value:t.value},u,a);return Go(yy({data:wy(t),disabled:t.disabled,getApi:function(t){return{setActive:function(e){g.set(t,e)},isActive:function(){return g.isOn(t)},isDisabled:function(){return te.isDisabled(t)},setDisabled:function(e){return te.set(t,e)}}},onAction:function(e){return r(t.value)},onSetup:function(e){return e.setActive(o),G},triggersSubmenu:!1,itemBehaviours:[]},n,i,u),{toggling:{toggleClass:S0,toggleOnExecute:!1,selected:t.active}})},Hy=Fd(Ih(),Lh()),Vy=function(e){return{value:e}},jy=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Uy=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Wy=function(e){return jy.test(e)||Uy.test(e)},$y=function(e){return pn(e,"#").toUpperCase()},qy=function(e){return Wy(e)?X.some({value:$y(e)}):X.none()},Gy=function(e){return{value:e.value.replace(jy,function(e,t,n,r){return t+t+n+n+r+r})}},Ky=function(e){e=Gy(e),e=Uy.exec(e.value);return null===e?["FFFFFF","FF","FF","FF"]:e},Xy=function(e){e=e.toString(16);return(1===e.length?"0"+e:e).toUpperCase()},Yy=function(e){e=Xy(e.red)+Xy(e.green)+Xy(e.blue);return Vy(e)},Jy=Math.min,Zy=Math.max,Qy=Math.round,ew=/^rgb\((\d+),\s*(\d+),\s*(\d+)\)/,tw=/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d?(?:\.\d+)?)\)/,nw=function(e,t,n,r){return{red:e,green:t,blue:n,alpha:r}},rw=function(e){var t=parseInt(e,10);return t.toString()===e&&0<=t&&t<=255},ow=function(e){var t,n,r,o=(e.hue||0)%360,i=e.saturation/100,e=e.value/100,i=Zy(0,Jy(i,1)),e=Zy(0,Jy(e,1));if(0===i)t=n=r=Qy(255*e);else{var o=o/60,u=e*i,a=u*(1-Math.abs(o%2-1)),i=e-u;switch(Math.floor(o)){case 0:t=u,n=a,r=0;break;case 1:t=a,n=u,r=0;break;case 2:t=0,n=u,r=a;break;case 3:t=0,n=a,r=u;break;case 4:t=a,n=0,r=u;break;case 5:t=u,n=0,r=a;break;default:t=n=r=0}t=Qy(255*(t+i)),n=Qy(255*(n+i)),r=Qy(255*(r+i))}return nw(t,n,r,1)},iw=function(e){var e=Ky(e),t=parseInt(e[1],16),n=parseInt(e[2],16),e=parseInt(e[3],16);return nw(t,n,e,1)},uw=function(e,t,n,r){e=parseInt(e,10),t=parseInt(t,10),n=parseInt(n,10),r=parseFloat(r);return nw(e,t,n,r)},aw=function(e){var t;return"transparent"===e?X.some(nw(0,0,0,0)):null!==(t=ew.exec(e))?X.some(uw(t[1],t[2],t[3],"1")):null!==(t=tw.exec(e))?X.some(uw(t[1],t[2],t[3],t[4])):X.none()},cw=function(e){return"rgba("+e.red+","+e.green+","+e.blue+","+e.alpha+")"},sw=nw(255,0,0,1),lw=function(e){return e.fire("SkinLoaded")},fw=function(e,t){return e.fire("SkinLoadError",t)},dw=function(e){return e.fire("ResizeEditor")},mw=function(e,t){return e.fire("ResizeContent",t)},gw=function(e,t){return e.fire("ScrollContent",t)},pw=function(e,t){return e.fire("TextColorChange",t)},hw=function(e,t,n){return{hue:e,saturation:t,value:n}},vw=function(e){var t=0,n=0,r=0,o=e.red/255,i=e.green/255,e=e.blue/255,u=Math.min(o,Math.min(i,e)),a=Math.max(o,Math.max(i,e));return u===a?hw(0,0,100*(r=u)):(t=o===u?3:e===u?1:5,n=(a-u)/a,r=a,hw(Math.round(t=60*(t-(o===u?i-e:e===u?o-i:e-o)/(a-u))),Math.round(100*n),Math.round(100*r)))},bw=function(e){return vw(iw(e))},yw=function(e){return Yy(ow(e))},ww=function(o){return qy(o).orThunk(function(){return aw(o).map(Yy)}).getOrThunk(function(){var e=document.createElement("canvas"),t=(e.height=1,e.width=1,e.getContext("2d")),e=(t.clearRect(0,0,e.width,e.height),t.fillStyle="#FFFFFF",t.fillStyle=o,t.fillRect(0,0,1,1),t.getImageData(0,0,1,1).data),t=e[0],n=e[1],r=e[2],e=e[3];return Yy(nw(t,n,r,e))})},xw=tinymce.util.Tools.resolve("tinymce.util.LocalStorage"),Cw="tinymce-custom-colors";var Sw,kw,Tw="choiceitem",Ow=[{type:Tw,text:"Light Green",value:"#BFEDD2"},{type:Tw,text:"Light Yellow",value:"#FBEEB8"},{type:Tw,text:"Light Red",value:"#F8CAC6"},{type:Tw,text:"Light Purple",value:"#ECCAFA"},{type:Tw,text:"Light Blue",value:"#C2E0F4"},{type:Tw,text:"Green",value:"#2DC26B"},{type:Tw,text:"Yellow",value:"#F1C40F"},{type:Tw,text:"Red",value:"#E03E2D"},{type:Tw,text:"Purple",value:"#B96AD9"},{type:Tw,text:"Blue",value:"#3598DB"},{type:Tw,text:"Dark Turquoise",value:"#169179"},{type:Tw,text:"Orange",value:"#E67E23"},{type:Tw,text:"Dark Red",value:"#BA372A"},{type:Tw,text:"Dark Purple",value:"#843FA1"},{type:Tw,text:"Dark Blue",value:"#236FA1"},{type:Tw,text:"Light Gray",value:"#ECF0F1"},{type:Tw,text:"Medium Gray",value:"#CED4D9"},{type:Tw,text:"Gray",value:"#95A5A6"},{type:Tw,text:"Dark Gray",value:"#7E8C8D"},{type:Tw,text:"Navy Blue",value:"#34495E"},{type:Tw,text:"Black",value:"#000000"},{type:Tw,text:"White",value:"#ffffff"}],Ew=(void 0===(Sw=10)&&(Sw=10),Op=xw.getItem(Cw),Op=d(Op)?JSON.parse(Op):[],kw=Sw-(Op=Op).length<0?Op.slice(0,Sw):Op,{add:function(e){!function(e,t){e=wt(e,t);return-1===e?X.none():X.some(e)}(kw,e).each(_w),kw.unshift(e),kw.length>Sw&&kw.pop(),xw.setItem(Cw,JSON.stringify(kw))},state:function(){return kw.slice(0)}});function _w(e){kw.splice(e,1)}function Aw(e,t){return Mc(t+"x"+e)}function Dw(i,u){function e(r){return function(t,n){vs(n.event.target,"[data-collection-item-value]").each(function(e){r(t,n,e,jr(e,"data-collection-item-value"))})}}function t(e,t){x(Sg(e.element,".tox-collection__item"),t)}var n,r=i.label.map(function(e){return q2(e,u)}),o=e(function(e,t,n,r){t.stop(),u.isDisabled()||J(e,Y2,{name:i.name,value:r})}),o=[Z(lu(),e(function(e,t,n){kl(n)})),Z(vu(),o),Z(_u(),o),Z(fu(),e(function(e,t,n){hs(e.element,"."+A0).each(function(e){pc(e,A0)}),mc(n,A0)})),Z(du(),e(function(e){hs(e.element,"."+A0).each(function(e){pc(e,A0)})})),ia(e(function(e,t,n,r){J(e,Y2,{name:i.name,value:r})}))],a=E.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(1!==i.columns?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:v},behaviours:Q([te.config({disabled:u.isDisabled,onDisabled:function(e){t(e,function(e){mc(e,"tox-collection__item--state-disabled"),k(e,"aria-disabled",!0)})},onEnabled:function(e){t(e,function(e){pc(e,"tox-collection__item--state-disabled"),$r(e,"aria-disabled")})}}),fy(),ne.config({}),ee.config({store:{mode:"memory",initialValue:[]},onSetValue:function(n,e){var t=n;e=x(e,function(e){var t=m1.translate(e.text),n=1===i.columns?'<div class="tox-collection__item-label">'+t+"</div>":"",r='<div class="tox-collection__item-icon">'+e.icon+"</div>",o={_:" "," - ":" ","-":" "},t=t.replace(/\_| \- |\-/g,function(e){return o[e]});return'<div class="tox-collection__item'+(u.isDisabled()?" tox-collection__item--state-disabled":"")+'" tabindex="-1" data-collection-item-value="'+j2.encodeAllRaw(e.value)+'" title="'+t+'" aria-label="'+t+'">'+r+n+"</div>"}),e="auto"!==i.columns&&1<i.columns?kt(e,i.columns):[e],e=x(e,function(e){return'<div class="tox-collection__group">'+e.join("")+"</div>"}),ca(t.element,e.join("")),"auto"===i.columns&&hb(n,5,"tox-collection__item").each(function(e){var t=e.numRows,e=e.numColumns;N.setGridSize(n,t,e)}),Y(n,tC)}}),V2.config({}),N.config((n=i.columns,a="normal",1===n?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:"auto"===n?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:"color"===a?".tox-swatches__row":".tox-collection__group",cell:"color"===a?"."+x0:"."+w0}})),re("collection-events",o)]),eventOrder:((n={})[Ou()]=["disabling","alloy.base.behaviour","collection-events"],n)});return U2(r,a,["tox-form__group--collection"],[])}function Mw(e){return{tag:e.tag,attributes:A({type:"text"},e.inputAttributes),styles:e.inputStyles,classes:e.inputClasses}}function Nw(e){function r(e){t()?i(e):o.push(e)}function t(){return n.isSome()}var n=X.none(),o=[],i=function(t){n.each(function(e){setTimeout(function(){t(e)},0)})};return e(function(e){t()||(n=X.some(e),w(o,i),o=[])}),{get:r,map:function(n){return Nw(function(t){r(function(e){t(n(e))})})},isReady:t}}function Rw(e){return e=_n(e),xt(fC,e)}function zw(e,t){var n=t.getRoot(e).getOr(e.element);pc(n,t.invalidClass),t.notify.each(function(t){Rw(e.element)&&k(e.element,"aria-invalid",!1),t.getContainer(e).each(function(e){ca(e,t.validHtml)}),t.onValid(e)})}function Bw(t,e,n,r){var o=e.getRoot(t).getOr(t.element);mc(o,e.invalidClass),e.notify.each(function(e){Rw(t.element)&&k(t.element,"aria-invalid",!0),e.getContainer(t).each(function(e){ca(e,r)}),e.onInvalid(t,r)})}function Pw(t,e,n){return e.validator.fold(function(){return lC.pure(M.value(!0))},function(e){return e.validate(t)})}function Iw(t,n,e){return n.notify.each(function(e){e.onValidate(t)}),Pw(t,n).map(function(e){return t.getSystem().isConnected()?e.fold(function(e){return Bw(t,n,0,e),M.error(e)},function(e){return zw(t,n),M.value(e)}):M.error("No longer in system")})}function Lw(e,t,n,r,o,i){var u=mC.getCoupled(n,"sandbox");return(c.isOpen(u)?yC:bC)(e,t,n,u,r,o,i)}function Fw(r,o,i){var u=ys(),e=xC(o,r);return{dom:{tag:"div",classes:r.sandboxClasses,attributes:{id:u.id,role:"listbox"}},behaviours:mp.augment(r.sandboxBehaviours,[ee.config({store:{mode:"memory",initialValue:o}}),c.config({onOpen:function(e,t){var n=pC(r,o);u.link(o.element),r.matchWidth&&wC(n.hotspot,t,r.useMinWidth),r.onOpen(n,e,t),void 0!==i&&void 0!==i.onOpen&&i.onOpen(e,t)},onClose:function(e,t){u.unlink(o.element),void 0!==i&&void 0!==i.onClose&&i.onClose(e,t)},isPartOf:function(e,t,n){return xs(t,n)||xs(o,n)},getAttachPoint:function(){return e().getOrDie()}}),y.config({find:function(e){return c.getState(e).bind(function(e){return y.getCurrent(e)})}}),Cl.config({channels:A(A({},cp({isExtraPart:W})),lp({doReposition:CC}))})])}}function Hw(e){e=mC.getCoupled(e,"sandbox"),CC(e)}function Vw(){return[s("sandboxClasses",[]),mp.field("sandboxBehaviours",[y,Cl,c,ee])]}function jw(n,t,r){function o(e,t){J(e,OC,{value:t})}var i,u,e=E.parts.field({factory:rC,inputClasses:["tox-textfield"],onSetValue:function(e){return dC.run(e).get(G)},inputBehaviours:Q([te.config({disabled:t.providers.isDisabled}),fy(),V2.config({}),dC.config({invalidClass:"tox-textbox-field-invalid",getRoot:function(e){return Cr(e.element)},notify:{onValid:function(e){var t=ee.getValue(e);J(e,TC,{color:t})}},validator:{validateOnLoad:!1,validate:function(e){var t=ee.getValue(e);return 0===t.length?lC.pure(M.value(!0)):(e=S.fromTag("span"),D(e,"background-color",t),e=Zr(e,"background-color").fold(function(){return M.error("blah")},function(e){return M.value(t)}),lC.pure(e))}}})]),selectOnFocus:!1}),a=n.label.map(function(e){return q2(e,t.providers)}),c=ie((i={dom:{tag:"span",attributes:{"aria-label":t.providers.translate("Color swatch")}},layouts:{onRtl:function(){return[rl,nl,al]},onLtr:function(){return[nl,rl,al]}},components:[],fetch:jx(r.getColors(),r.hasCustomColors()),columns:r.getColorCols(),presets:"color",onItemAction:function(e,n){c.getOpt(e).each(function(t){"custom"===n?r.colorPicker(function(e){e.fold(function(){return Y(t,EC)},function(e){o(t,e),Mx(e)})},"#ffffff"):o(t,"remove"===n?"":n)})}},u=t,SC.sketch({dom:i.dom,components:i.components,toggleClass:"mce-active",dropdownBehaviours:Q([dy.button(u.providers.isDisabled),fy(),kC.config({}),V2.config({})]),layouts:i.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:u.getSink,fetch:function(t){return lC.nu(function(e){return i.fetch(e)}).map(function(e){return X.from(l2(Go(Kx(O("menu-value"),e,function(e){i.onItemAction(t,e)},i.columns,i.presets,b0.CLOSE_ON_EXECUTE,W,u.providers),{movement:Yx(i.columns,i.presets)})))})},parts:{menu:W0(!1,1,i.presets)}})));return E.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:a.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[e,c.asSpec()]}]),fieldBehaviours:Q([re("form-field-events",[Z(TC,function(e,t){c.getOpt(e).each(function(e){D(e.element,"background-color",t.event.color)}),J(e,G2,{name:n.name})}),Z(OC,function(t,n){E.getField(t).each(function(e){ee.setValue(e,n.event.value),y.getCurrent(t).each(oe.focus)})}),Z(EC,function(t,e){E.getField(t).each(function(e){y.getCurrent(t).each(oe.focus)})})])])})}function Uw(t){return Dp({name:t+"-edge",overrides:function(e){return e.model.manager.edgeActions[t].fold(function(){return{}},function(r){return{events:Yu([ft(nu(),function(e,t,n){return r(e,n)},[e]),ft(uu(),function(e,t,n){return r(e,n)},[e]),ft(au(),function(e,t,n){n.mouseIsDown.get()&&r(e,n)},[e])])}})}})}function Ww(e){return e=e.event.raw,AC(e)?void 0!==e.touches&&1===e.touches.length?X.some(e.touches[0]).map(function(e){return uo(e.clientX,e.clientY)}):X.none():void 0!==e.clientX?X.some(e).map(function(e){return uo(e.clientX,e.clientY)}):X.none()}function $w(e){return e.model.minX-1}function qw(e){return e.model.minY-1}function Gw(e){return e.model.maxX+1}function Kw(e){return e.model.maxY+1}function Xw(e){return FC(e)/2}function Yw(e){return HC(e)/2}function Jw(e,t){return{x:e,y:t}}function Zw(e,t){J(e,_C(),{value:t})}function Qw(e,t,n){return n={min:zC(t),max:PC(t),range:FC(t),value:n,step:VC(t),snap:jC(t),snapStart:UC(t),rounded:WC(t),hasMinEdge:qC(t),hasMaxEdge:GC(t),minBound:dS(e),maxBound:mS(e),screenRange:hS(e)},nS(n)}function ex(n){return function(e,t){return function(e,t,n){e=(0<e?ZC:JC)(YC(n).x,zC(n),PC(n),VC(n));return xS(t,CS(e)),X.some(e)}(n,e,t).map($)}}function tx(e,t,n,r,o,i){i=i,n=n,r=r,o=o,a=hS(u=t),r=r.bind(function(e){return X.some(yS(e,u))}).getOr(0),o=o.bind(function(e){return X.some(yS(e,u))}).getOr(a),n={min:zC(i),max:PC(i),range:FC(i),value:n,hasMinEdge:qC(i),hasMaxEdge:GC(i),minBound:dS(u),minOffset:0,maxBound:mS(u),maxOffset:a,centerMinEdge:r,centerMaxEdge:o};var u,a,i=rS(n);return dS(t)-dS(e)+i}function nx(e,t,n){return n={min:BC(t),max:IC(t),range:HC(t),value:n,step:VC(t),snap:jC(t),snapStart:UC(t),rounded:WC(t),hasMinEdge:KC(t),hasMaxEdge:XC(t),minBound:gS(e),maxBound:pS(e),screenRange:vS(e)},nS(n)}function rx(n){return function(e,t){return function(e,t,n){e=(0<e?ZC:JC)(YC(n).y,BC(n),IC(n),VC(n));return SS(t,kS(e)),X.some(e)}(n,e,t).map($)}}function ox(e,t,n,r,o,i){i=i,n=n,r=r,o=o,a=vS(u=t),r=r.bind(function(e){return X.some(wS(e,u))}).getOr(0),o=o.bind(function(e){return X.some(wS(e,u))}).getOr(a),n={min:BC(i),max:IC(i),range:HC(i),value:n,hasMinEdge:KC(i),hasMaxEdge:XC(i),minBound:gS(u),minOffset:0,maxBound:pS(u),maxOffset:a,centerMinEdge:r,centerMaxEdge:o};var u,a,i=rS(n);return gS(t)-gS(e)+i}function ix(i,u){return function(e,t){return e=e,t=t,n=0<(n=i)?ZC:JC,o=(r=u)?YC(t).x:n(YC(t).x,zC(t),PC(t),VC(t)),r=r?n(YC(t).y,BC(t),IC(t),VC(t)):YC(t).y,TS(e,OS(o,r)),X.some(o).map($);var n,r,o}}function ux(e){return"<alloy.field."+e+">"}function ax(r,e){return{uid:r.uid,dom:r.dom,components:e,behaviours:dp(r.formBehaviours,[ee.config({store:{mode:"manual",getValue:function(e){e=Lp(e,r);return Xt(e,function(e,n){return e().bind(function(e){var t=y.getCurrent(e);return RS(t,new Error("Cannot find a current component to extract the value from for form part '"+n+"': "+da(e.element)))}).map(ee.getValue)})},setValue:function(n,e){Kt(e,function(t,e){Pp(n,r,e).each(function(e){y.getCurrent(e).each(function(e){ee.setValue(e,t)})})})}}})]),apis:{getField:function(e,t){return Pp(e,r,t).bind(y.getCurrent)}}}}function cx(v,b){return Kp({name:"ColourPicker",configFields:[i("dom"),s("onValidHex",G),s("onInvalidHex",G)],factory:function(e){function t(e,t,n){g.getOpt(e).each(function(e){l.setHue(e,n)})}function n(e,t){p.getOpt(e).each(function(e){s.updateHex(e,t)})}function r(e,t,n){m.getOpt(e).each(function(e){ES.setValue(e,{y:f(n)})})}function o(e,t){g.getOpt(e).each(function(e){l.setThumb(e,t)})}function i(t,n,r,e){h(n,r),w(e,function(e){e(t,n,r)})}var u,a,c,s=FS(v,b,e.onValidHex,e.onInvalidHex),l=HS(v,b),f=function(e){return 100-e/360*100},d={paletteRgba:T(sw),paletteHue:T(0)},m=ie(MS(v,b)),g=ie(l.sketch({})),p=ie(s.sketch({})),h=function(e,t){e=iw(e);d.paletteRgba.set(e),d.paletteHue.set(t)};return{uid:e.uid,dom:e.dom,components:[g.asSpec(),m.asSpec(),p.asSpec()],behaviours:Q([re("colour-picker-events",[Z(_S,(c=[t,r,o],function(e,t){var t=t.event.hex,n=bw(t);i(e,t,n.hue,c)})),Z(DS,(a=[n],function(e,t){var t=t.event.value,n=d.paletteHue.get(),t=hw(n,t.x,100-t.y),t=yw(t);i(e,t,n,a)})),Z(AS,(u=[t,n],function(e,t){var t=(100-t.event.value.y)/100*360,n=d.paletteRgba.get(),n=vw(n),n=hw(t,n.saturation,n.value),n=yw(n);i(e,n,t,u)}))]),y.config({find:function(e){return p.getOpt(e)}}),N.config({mode:"acyclic"})])}}})}function sx(e){return US(e)}function lx(e,t,n){return ee.config(Go({store:{mode:"manual",getValue:t,setValue:n}},e.map(function(e){return{store:{initialValue:e}}}).getOr({})))}function fx(e,t,n){return lx(e,function(e){return t(e.element)},function(e,t){return n(e.element,t)})}function dx(r,o){function t(e,t){t.stop()}function n(e){return function(t,n){w(e,function(e){e(t,n)})}}function i(e,t){te.isDisabled(e)||(t=t.event.raw,a(e,t.dataTransfer.files))}function u(e,t){t=t.event.raw.target,a(e,t.files)}var a=function(e,t){var n;ee.setValue(e,(t=t,n=$S.explode(o.getSetting("images_file_types",KS,"string")),Et(Wt(t),function(t){return Ct(n,function(e){return yn(t.name.toLowerCase(),"."+e.toLowerCase())})}))),J(e,G2,{name:r.name})},c=ie({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:Q([re("input-file-events",[ea(vu()),ea(_u())])])}),e=r.label.map(function(e){return q2(e,o)}),s=E.parts.field({factory:{sketch:function(e){return{uid:e.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:Q([GS.memory([]),VS.self(),te.config({}),g.config({toggleClass:"dragenter",toggleOnExecute:!1}),re("dropzone-events",[Z("dragenter",n([t,g.toggle])),Z("dragleave",n([t,g.toggle])),Z("dragover",t),Z("drop",n([t,i])),Z(hu(),u)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p",innerHtml:o.translate("Drop an image here")}},dv.sketch({dom:{tag:"button",innerHtml:o.translate("Browse for an image"),styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[c.asSpec()],action:function(e){c.get(e).element.dom.click()},buttonBehaviours:Q([V2.config({}),dy.button(o.isDisabled),fy()])})]}]}}}});return U2(e,s,["tox-form__group--stretched"],[])}function mx(e,t){var n,r,o=nk&&e.sandboxed,i=A(A({},e.label.map(function(e){return{title:e}}).getOr({})),o?{sandbox:"allow-scripts allow-same-origin"}:{}),u=(n=o,r=T(""),{getValue:function(e){return r.get()},setValue:function(e,t){n?k(e.element,"srcdoc",t):(k(e.element,"src","javascript:''"),(e=e.element.dom.contentWindow.document).open(),e.write(t),e.close()),r.set(t)}}),o=e.label.map(function(e){return q2(e,t)}),e=E.parts.field({factory:{sketch:function(e){return ZS({uid:e.uid,dom:{tag:"iframe",attributes:i},behaviours:Q([V2.config({}),oe.config({}),GS.withComp(X.none(),u.getValue,u.setValue)])})}}});return U2(o,e,["tox-form__group--stretched"],[])}function gx(n){return function(e,t){return Tk(e,n(xk(),t))}}function px(e,t){var n,r=_T(e.name,"custom");return n=X.none(),e=E.parts.field(A({factory:dv},OT(e,X.some(r),t,[GS.memory(""),VS.self()]))),U2(n,e,[],[])}function hx(e,t){return Ap({factory:E,name:e,overrides:function(r){return{fieldBehaviours:Q([re("coupled-input-behaviour",[Z(pu(),function(n){Pp(n,r,t).bind(y.getCurrent).each(function(t){Pp(n,r,"lock").each(function(e){g.isOn(e)&&r.onLockedChange(n,t,e)})})})])])}}})}function vx(e){var t,n={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4};return(n=-1!==(n=e.value.toFixed((t=e.unit)in n?n[t]:1)).indexOf(".")?n.replace(/\.?0*$/,""):n)+e.unit}function bx(e,t){return e=RT(e).toOptional(),t=RT(t).toOptional(),sn(e,t,function(e,t){return zT(e,t.unit).map(function(e){return t.value/e}).map(function(e){return PT(e,t.unit)}).getOr(BT)}).getOr(BT)}function yx(r,a){function e(e,t,n,r){return ie(ET({name:e,text:e,disabled:n,primary:r,icon:X.none(),borderless:!1},t,a))}function t(e,t,n,r){return ie(TT({name:e,icon:X.some(e),tooltip:X.some(t),disabled:r,primary:!1,borderless:!1},n,a))}function u(e,t){e.map(function(e){e=e.get(t);e.hasConfigured(te)&&te.disable(e)})}function c(e,t){e.map(function(e){e=e.get(t);e.hasConfigured(te)&&te.enable(e)})}function n(e){return function(){B.getOpt(e).each(function(e){ne.set(e,[z])})}}function i(e,t){h(e),p(e,LT.transformApply(),{transform:t,swap:n(e)}),v(e)}function o(){return ie({dom:{tag:"div",classes:["tox-spacer"]},behaviours:Q([te.config({})])})}function s(e,t){t=t,h(e=e),p(e,LT.tempTransform(),{transform:t}),v(e)}function l(e,t,n,r,o){e=e,t=t,n=n,r=r,o=o;var i=[y(),V(e,t,n,r,o),w()];return L2.sketch({dom:m,components:i.map(function(e){return e.asSpec()}),containerBehaviours:Q([re("image-tools-filter-panel-buttons-events",[Z(FT.disable(),function(e,t){u(i,e)}),Z(FT.enable(),function(e,t){c(i,e)})])])})}function f(e){return _(e,function(c,e,t){var n=D.getOpt(c),r=N.getOpt(c),o=M.getOpt(c);n.each(function(a){r.each(function(u){o.each(function(e){var t,n,r,o=ee.getValue(a).x/100,e=ee.getValue(e).x/100,i=ee.getValue(u).x/100;t=o,n=e,r=i,b(c,function(e){return Gk(e,t,n,r)})})})})},0,100,200)}function d(t,n,r){return function(e){p(e,LT.swap(),{transform:n,swap:function(){B.getOpt(e).each(function(e){ne.set(e,[t]),r(e)})}})}}var m={tag:"div",classes:["tox-image-tools__toolbar","tox-image-tools-edit-panel"]},g=G,p=function(e,t,n){J(e,t,n)},h=function(e){return Y(e,FT.disable())},v=function(e){return Y(e,FT.enable())},b=function(e,t){h(e),p(e,LT.transform(),{transform:t}),v(e)},y=function(){return e("Back",function(e){return p(e,LT.back(),{swap:n(e)})},!1,!1)},w=function(){return e("Apply",function(e){return p(e,LT.apply(),{swap:n(e)})},!0,!0)},x=[y(),o(),e("Apply",function(e){i(e,function(e){var t=r.getRect();return Jk(e,t.x,t.y,t.w,t.h)}),r.hideCrop()},!1,!0)],C=L2.sketch({dom:m,components:x.map(function(e){return e.asSpec()}),containerBehaviours:Q([re("image-tools-crop-buttons-events",[Z(FT.disable(),function(e,t){u(x,e)}),Z(FT.enable(),function(e,t){c(x,e)})])])}),S=ie(IT({name:"size",label:X.none(),constrain:!0,disabled:!1},a)),k=[y(),o(),S,o(),e("Apply",function(o){S.getOpt(o).each(function(e){var t,n,e=ee.getValue(e),r=parseInt(e.width,10),e=parseInt(e.height,10);t=r,n=e,i(o,function(e){return Zk(e,t,n)})})},!1,!0)],T=L2.sketch({dom:m,components:k.map(function(e){return e.asSpec()}),containerBehaviours:Q([re("image-tools-resize-buttons-events",[Z(FT.disable(),function(e,t){u(k,e)}),Z(FT.enable(),function(e,t){c(k,e)})])])}),O=function(t,n){return function(e){return t(e,n)}},P=O(Yk,"h"),I=O(Yk,"v"),L=O(Qk,-90),F=O(Qk,90),E=[y(),o(),t("flip-horizontally","Flip horizontally",function(e){s(e,P)},!1),t("flip-vertically","Flip vertically",function(e){s(e,I)},!1),t("rotate-left","Rotate counterclockwise",function(e){s(e,L)},!1),t("rotate-right","Rotate clockwise",function(e){s(e,F)},!1),o(),w()],H=L2.sketch({dom:m,components:E.map(function(e){return e.asSpec()}),containerBehaviours:Q([re("image-tools-fliprotate-buttons-events",[Z(FT.disable(),function(e,t){u(E,e)}),Z(FT.enable(),function(e,t){c(E,e)})])])}),_=function(e,t,n,r,o){var e=ES.parts.label({dom:{tag:"label",classes:["tox-label"],innerHtml:a.translate(e)}}),i=ES.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),u=ES.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return ie(ES.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:n,maxX:o,getInitialValue:K({x:r})},components:[e,i,u],sliderBehaviours:Q([oe.config({})]),onChoose:t}))},V=function(e,r,t,n,o){return _(e,function(e,t,n){n=O(r,n.x/100);b(e,n)},t,n,o)},A=[y(),o(),w()],A=L2.sketch({dom:m,components:A.map(function(e){return e.asSpec()})}),j=l("Brightness",Kk,-100,0,100),U=l("Contrast",Xk,-100,0,100),W=l("Gamma",qk,-100,0,100),D=f("R"),M=f("G"),N=f("B"),R=[y(),D,M,N,w()],R=L2.sketch({dom:m,components:R.map(function(e){return e.asSpec()})}),$=X.some($k),q=X.some(Wk),C=[t("crop","Crop",d(C,X.none(),function(e){r.showCrop()}),!1),t("resize","Resize",d(T,X.none(),function(e){S.getOpt(e).each(function(e){var t=r.getMeasurements(),n=t.width,t=t.height;ee.setValue(e,{width:n,height:t})})}),!1),t("orientation","Orientation",d(H,X.none(),g),!1),t("brightness","Brightness",d(j,X.none(),g),!1),t("sharpen","Sharpen",d(A,$,g),!1),t("contrast","Contrast",d(U,X.none(),g),!1),t("color-levels","Color levels",d(R,X.none(),g),!1),t("gamma","Gamma",d(W,X.none(),g),!1),t("invert","Invert",d(A,q,g),!1)],z=L2.sketch({dom:m,components:C.map(function(e){return e.asSpec()})}),T=L2.sketch({dom:{tag:"div"},components:[z],containerBehaviours:Q([ne.config({})])}),B=ie(T);return{memContainer:B,getApplyButton:function(e){return B.getOpt(e).map(function(e){e=e.components()[0];return e.components()[e.components().length-1]})}}}var wx,xx,Cx,Sx,kx,Tx=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push({text:e[n+1],value:"#"+ww(e[n]).value,type:"choiceitem"});return t},Ox=function(e,t){return e.getParam("color_cols",t,"number")},Ex=function(e){return!1!==e.getParam("custom_colors")},_x=function(e){return e.getParam("color_map")},Ax=function(e){e=_x(e);return void 0!==e?Tx(e):Ow},Dx=function(){return x(Ew.state(),function(e){return{type:Tw,text:e,value:e}})},Mx=function(e){Ew.add(e)},Nx="#000000",Rx=function(e,t){var n;return e.dom.getParents(e.selection.getStart(),function(e){(e=e.style["forecolor"===t?"color":"background-color"])&&(n=n||e)}),X.from(n)},zx=function(e,t,n){e.undoManager.transact(function(){e.focus(),e.formatter.apply(t,{value:n}),e.nodeChanged()})},Bx=function(e,t){e.undoManager.transact(function(){e.focus(),e.formatter.remove(t,{value:null},null,!0),e.nodeChanged()})},Px=function(n){n.addCommand("mceApplyTextcolor",function(e,t){zx(n,e,t)}),n.addCommand("mceRemoveTextcolor",function(e){Bx(n,e)})},Ix=function(e){return Math.max(5,Math.ceil(Math.sqrt(e)))},Lx=function(e){var t=Ax(e),t=Ix(t.length);return Ox(e,t)},Fx=function(e){var t="choiceitem",n={type:t,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return e?[n,{type:t,text:"Custom color",icon:"color-picker",value:"custom"}]:[n]},Hx=function(t,n,e,r){"custom"===e?qx(t)(function(e){e.each(function(e){Mx(e),t.execCommand("mceApplyTextcolor",n,e),r(e)})},Nx):"remove"===e?(r(""),t.execCommand("mceRemoveTextcolor",n)):(r(e),t.execCommand("mceApplyTextcolor",n,e))},Vx=function(e,t){return e.concat(Dx().concat(Fx(t)))},jx=function(t,n){return function(e){e(Vx(t,n))}},Ux=function(e,t,n){e.setIconFill("forecolor"===t?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color",n)},Wx=function(n,r,o,e,i){n.ui.registry.addSplitButton(r,{tooltip:e,presets:"color",icon:"forecolor"===r?"text-color":"highlight-bg-color",select:function(t){return Rx(n,o).bind(function(e){return aw(e).map(function(e){e=Yy(e).value;return vn(t.toLowerCase(),e)})}).getOr(!1)},columns:Lx(n),fetch:jx(Ax(n),Ex(n)),onAction:function(e){Hx(n,o,i.get(),G)},onItemAction:function(e,t){Hx(n,o,t,function(e){i.set(e),pw(n,{name:r,color:e})})},onSetup:function(t){Ux(t,r,i.get());function e(e){e.name===r&&Ux(t,e.name,e.color)}return n.on("TextColorChange",e),function(){n.off("TextColorChange",e)}}})},$x=function(t,e,n,r){t.ui.registry.addNestedMenuItem(e,{text:r,icon:"forecolor"===e?"text-color":"highlight-bg-color",getSubmenuItems:function(){return[{type:"fancymenuitem",fancytype:"colorswatch",onAction:function(e){Hx(t,n,e.value,G)}}]}})},qx=function(o){return function(n,e){var r=!1;o.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{colorpicker:e},onAction:function(e,t){"hex-valid"===t.name&&(r=t.value)},onSubmit:function(e){var t=e.getData().colorpicker;r?(n(X.from(t)),e.close()):o.windowManager.alert(o.translate(["Invalid hex color code: {0}",t]))},onClose:G,onCancel:function(){n(X.none())}})}},Gx=function(e){Px(e);var t=T(Nx),n=T(Nx);Wx(e,"forecolor","forecolor","Text color",t),Wx(e,"backcolor","hilitecolor","Background color",n),$x(e,"forecolor","forecolor","Text color"),$x(e,"backcolor","hilitecolor","Background color")},Kx=function(e,t,n,r,o,i,u,a){var c=J0(t),t=Xx(t,n,r,"color"!==o?"normal":"color",i,u,a);return eb(e,c,t,r,o)},Xx=function(n,r,o,i,u,a,c){return cn(x(n,function(t){return"choiceitem"===t.type?ab(t).fold(Z0,function(e){return X.some(Fy(e,1===o,i,r,a(t.value),u,c,J0(n)))}):X.none()}))},Yx=function(e,t){var n=V0(t);return 1===e?{mode:"menu",moveOnTab:!0}:"auto"===e?{mode:"grid",selector:"."+n.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+("color"===t?"tox-swatches__row":"tox-collection__group")}},Jx=O("cell-over"),Zx=O("cell-execute"),Qx=function(t,n,e){function r(e){return J(e,Zx,{row:t,col:n})}function o(e,t){t.stop(),r(e)}var i;return Bc({dom:{tag:"div",attributes:((i={role:"button"})["aria-labelledby"]=e,i)},behaviours:Q([re("insert-table-picker-cell",[Z(lu(),oe.focus),Z(Ou(),r),Z(vu(),o),Z(_u(),o)]),g.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),oe.config({onFocus:function(e){return J(e,Jx,{row:t,col:n})}})])})},e2={inserttable:function(o){var e=O("size-label"),f=function(e,t,n){for(var r=[],o=0;o<t;o++){for(var i=[],u=0;u<n;u++)i.push(Qx(o,u,e));r.push(i)}return r}(e,10,10),t=Aw(0,0),d=ie({dom:{tag:"span",classes:["tox-insert-table-picker__label"],attributes:{id:e}},components:[t],behaviours:Q([ne.config({})])});return{type:"widget",data:{value:O("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[Hy.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:zt(f,function(e){return x(e,Pc)}).concat(d.asSpec()),behaviours:Q([re("insert-table-picker",[na(function(e){ne.set(d.get(e),[t])}),Qu(Jx,function(e,t,n){for(var n=n.event,r=n.row,n=n.col,o=f,i=r,u=n,a=10,c=10,s=0;s<a;s++)for(var l=0;l<c;l++)g.set(o[s][l],s<=i&&l<=u);ne.set(d.get(e),[Aw(r+1,n+1)])}),Qu(Zx,function(e,t,n){var n=n.event,r=n.row,n=n.col;o.onAction({numRows:r+1,numColumns:n+1}),Y(e,Du())})]),N.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:function(t,e){n=e,r=(o=t).initData.allowCustomColors&&n.colorinput.hasCustomColors();var n,r,o=o.initData.colors.fold(function(){return Vx(n.colorinput.getColors(),r)},function(e){return e.concat(Fx(r))}),i=e.colorinput.getColorCols(),o=Kx(O("menu-value"),o,function(e){t.onAction({value:e})},i,"color",b0.CLOSE_ON_EXECUTE,W,e.shared.providers),e=A(A({},o),{markers:V0("color"),movement:Yx(i,"color")});return{type:"widget",data:{value:O("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[Hy.widget(Vh.sketch(e))]}}},t2=function(t,n,e,r,o,i,u,a){void 0===a&&(a=!0);r=zy({presets:r,textContent:X.none(),htmlContent:e?t.text.map(function(e){return Iy(e,n)}):X.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:X.none(),checkMark:X.none(),caret:X.none(),value:t.value},u.providers,a,t.icon);return yy({data:wy(t),disabled:t.disabled,getApi:K({}),onAction:function(e){return o(t.value,t.meta)},onSetup:K(G),triggersSubmenu:!1,itemBehaviours:By(t.meta,u)},r,i,u.providers)},n2=function(e){e=e.text.fold(function(){return{}},function(e){return{innerHtml:e}});return{type:"separator",dom:A({tag:"div",classes:[w0,"tox-collection__group-heading"]},e),components:[]}},r2=function(e,t,n,r){void 0===r&&(r=!0);r=zy({presets:"normal",iconContent:e.icon,textContent:e.text,htmlContent:X.none(),ariaLabel:e.text,caret:X.none(),checkMark:X.none(),shortcutContent:e.shortcut},n,r);return yy({data:wy(e),getApi:function(t){return{isDisabled:function(){return te.isDisabled(t)},setDisabled:function(e){return te.set(t,e)}}},disabled:e.disabled,onAction:e.onAction,onSetup:e.onSetup,triggersSubmenu:!1,itemBehaviours:[]},r,t,n)},o2=function(e,t,n,r,o){void 0===r&&(r=!0);o=(o=void 0===o?!1:o)?(o=n.icons,Sy("chevron-down",o,[E0])):(o=n.icons,Sy("chevron-right",o,[E0])),o=zy({presets:"normal",iconContent:e.icon,textContent:e.text,htmlContent:X.none(),ariaLabel:e.text,caret:X.some(o),checkMark:X.none(),shortcutContent:e.shortcut},n,r);return yy({data:wy(e),getApi:function(t){return{isDisabled:function(){return te.isDisabled(t)},setDisabled:function(e){return te.set(t,e)}}},disabled:e.disabled,onAction:G,onSetup:e.onSetup,triggersSubmenu:!0,itemBehaviours:[]},o,t,n)},i2=function(e,t,n,r){void 0===r&&(r=!0);r=zy({iconContent:e.icon,textContent:e.text,htmlContent:X.none(),ariaLabel:e.text,checkMark:X.some(_y(n.icons)),caret:X.none(),shortcutContent:e.shortcut,presets:"normal",meta:e.meta},n,r);return Go(yy({data:wy(e),disabled:e.disabled,getApi:function(t){return{setActive:function(e){g.set(t,e)},isActive:function(){return g.isOn(t)},isDisabled:function(){return te.isDisabled(t)},setDisabled:function(e){return te.set(t,e)}}},onAction:e.onAction,onSetup:e.onSetup,triggersSubmenu:!1,itemBehaviours:[]},r,t,n),{toggling:{toggleClass:S0,toggleOnExecute:!1,selected:e.active}})},u2=function(t,n){return C(e2,t.fancytype).map(function(e){return e(t,n)})},a2=function(e,t,n,r){var o={dom:Ny(e.label),optComponents:[X.some({dom:{tag:"div",classes:[D0,N0]},components:Ly(e.items,r)})]};return yy({data:wy(A({text:X.none()},e)),disabled:e.disabled,getApi:function(n){return{isDisabled:function(){return te.isDisabled(n)},setDisabled:function(t){te.set(n,t),w(Sg(n.element,"*"),function(e){n.getSystem().getByDom(e).each(function(e){e.hasConfigured(te)&&te.set(e,t)})})}}},onAction:e.onAction,onSetup:e.onSetup,triggersSubmenu:!1,itemBehaviours:X.from(r.itemBehaviours).getOr([])},o,t,n.providers)},c2=((Ch=wx=wx||{})[Ch.ContentFocus=0]="ContentFocus",Ch[Ch.UiFocus=1]="UiFocus",function(e,t,n,r,o){function i(e){return o?A(A({},e),{shortcut:X.none(),icon:e.text.isSome()?X.none():e.icon}):e}var u=n.shared.providers;switch(e.type){case"menuitem":return fb(e).fold(Z0,function(e){return X.some(r2(i(e),t,u,r))});case"nestedmenuitem":return mb(e).fold(Z0,function(e){return X.some(o2(i(e),t,u,r,o))});case"togglemenuitem":return pb(e).fold(Z0,function(e){return X.some(i2(i(e),t,u,r))});case"separator":return r0(e).fold(Z0,function(e){return X.some(n2(e))});case"fancymenuitem":return sb(e).fold(Z0,function(e){return u2(i(e),n)});default:return console.error("Unknown item in general menu",e),X.none()}}),s2=function(e,t,r,o,i){var u=J0(t),t=cn(x(t,function(e){function t(e){return c2(e,r,o,n(e),i)}var n=function(e){return i?!rn(e,"text"):u};return"nestedmenuitem"===e.type&&e.getSubmenuItems().length<=0?t(A(A({},e),{disabled:!0})):t(e)}));return(i?Q0:eb)(e,u,t,1,"normal")},l2=function(e){return Gh.singleData(e.value,e)},f2=function(f,d){function i(s,e){var l=$t(e,function(e){return X.from(e.columns)}).getOr(1);return zt(e,function(o){var n,r,i,u,a,t,c,e=o.items;return e=e,n=o.matchText,r=function(n,r){var e=f.selection.getRng();W1(f.dom,e,s).fold(function(){return console.error("Lost context. Cursor probably moved")},function(e){var e=e.range,t={hide:function(){p()},reload:function(e){g(),h(e)}};m.set(!0),o.onAction(t,e,n,r),m.set(!1)})},i=b0.BUBBLE_TO_SANDBOX,u=d,a=o.highlightOn,c=!(t=1===l)||J0(e),cn(x(e,function(e){switch(e.type){case"separator":return u0(e).fold(Z0,function(e){return X.some(n2(e))});case"cardmenuitem":return ib(e).fold(Z0,function(t){return X.some(a2(A(A({},t),{onAction:function(e){t.onAction(e),r(t.value,t.meta)}}),i,u,{itemBehaviours:By(t.meta,u),cardText:{matchText:n,highlightOn:a}}))});default:return a0(e).fold(Z0,function(e){return X.some(t2(e,n,t,"normal",r,i,u,c))})}}))})}function t(e){var t,n,r;o()||(n=f,r=e.range,t=I1(S.fromDom(n.selection.getNode())).getOrThunk(function(){var e=S.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',n.getDoc());return ko(e,S.fromDom(r.extractContents())),r.insertNode(e.dom),Cr(e).each(function(e){return e.dom.normalize()}),xg(e).map(function(e){n.selection.setCursorLocation(e.dom,vg(e))}),e}),a.set({triggerChar:e.triggerChar,element:t,matchLength:e.text.length}),m.set(!1))}function u(e,t,n,r){e.matchLength=t.text.length;var o,i,u,a,t=$t(n,function(e){return X.from(e.columns)}).getOr(1);Kh.showAt(c,Vh.sketch((n=eb("autocompleter-value",!0,r,t,"normal"),r=t,t=wx.ContentFocus,o="normal",i=(t===wx.ContentFocus?lh:sh)(),u=Yx(r,o),a=V0(o),{dom:n.dom,components:n.components,items:n.items,value:n.value,markers:{selectedItem:a.selectedItem,item:a.item},movement:u,fakeFocus:t===wx.ContentFocus,focusManager:i,menuBehaviours:vb.unnamedEvents("auto"!==r?[]:[na(function(n,e){hb(n,4,a.item).each(function(e){var t=e.numColumns,e=e.numRows;N.setGridSize(n,e,t)})})])})),{anchor:{type:"node",root:S.fromDom(f.getBody()),node:X.from(e.element)}}),Kh.getContent(c).each(Yp.highlightFirst)}function n(t){return a.get().map(function(e){return W1(f.dom,f.selection.getRng(),e.triggerChar).bind(function(e){return t0(f,s,e,t)})}).getOrThunk(function(){return t=f,e=(n=s)(),r=t.selection.getRng(),e0(t.dom,r,e).bind(function(e){return t0(t,n,e)});var t,n,e,r})}var a=ef(),m=T(!1),c=Bc(Kh.sketch({dom:{tag:"div",classes:["tox-autocompleter"]},components:[],fireDismissalEventInstead:{},inlineBehaviours:Q([re("dismissAutocompleter",[Z(Fu(),function(){return p()})])]),lazySink:d.getSink})),o=function(){return a.get().isSome()},g=function(){o()&&Kh.hide(c)},p=function(){var e;o()&&(e=a.get().map(function(e){return e.element}),I1(e.getOr(S.fromDom(f.selection.getNode()))).each(Te),g(),a.clear(),m.set(!1))},s=Rn(function(){return e=(e=f).ui.registry.getAll().popups,e=Xt(e,function(e){return c0(e).fold(function(e){throw new Error(Oi(e))},v)}),t=v0(en(e,function(e){return e.ch})),n=nn(e),{dataset:e,triggerChars:t,lookupByChar:function(t){return Et(n,function(e){return e.ch===t})}};var e,t,n}),h=function(e){n(e).fold(p,function(o){t(o.context),o.lookupData.then(function(r){a.get().map(function(e){var t,n=o.context;e.triggerChar===n.triggerChar&&(0<(t=i(n.triggerChar,r)).length?u(e,n,r,t):(10<=n.text.length-e.matchLength?p:g)())})})})},e={onKeypress:N1(function(e){27!==e.which&&h()},50),cancelIfNecessary:p,isMenuOpen:function(){return Kh.isOpen(c)},isActive:o,isProcessingAction:m.get,getView:function(){return Kh.getContent(c)}};!1===f.hasPlugin("rtc")&&$1(e,f)},d2=function(e,t,n){return vs(e,t,n).isSome()},m2=function(n,r){var o=null;return{cancel:function(){null!==o&&(clearTimeout(o),o=null)},schedule:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];o=setTimeout(function(){n.apply(null,e),o=null},r)}}},g2=5,p2=400,h2=function(e){e=e.raw;return void 0===e.touches||1!==e.touches.length?X.none():X.some(e.touches[0])},v2=function(e,t){var n=Math.abs(e.clientX-t.x),e=Math.abs(e.clientY-t.y);return g2<n||g2<e},b2=function(n){var r=ef(),o=T(!1),i=m2(function(e){n.triggerEvent(Au(),e),o.set(!0)},p2),u=Vi([{key:nu(),value:function(t){return h2(t).each(function(e){i.cancel();e={x:e.clientX,y:e.clientY,target:t.target};i.schedule(t),o.set(!1),r.set(e)}),X.none()}},{key:ru(),value:function(e){return i.cancel(),h2(e).each(function(t){r.on(function(e){v2(t,e)&&r.clear()})}),X.none()}},{key:ou(),value:function(t){i.cancel();return r.get().filter(function(e){return gr(e.target,t.target)}).map(function(e){return o.get()?(t.prevent(),!1):n.triggerEvent(_u(),t)})}}]);return{fireIfReady:function(t,e){return C(u,e).bind(function(e){return e(t)})}}},y2=function(e){return e.raw.which===Jp[0]&&!xt(["input","textarea"],_n(e.target))&&!d2(e.target,'[contenteditable="true"]')},w2=function(){return ar().browser.isFirefox()},x2=function(e,t){return w2()?rf(e,"focus",t):nf(e,"focusin",t)},C2=function(e,t){return w2()?rf(e,"blur",t):nf(e,"focusout",t)},S2=function(t,e){var n=A({stopBackspace:!0},e),r=b2(n),o=x(["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"].concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),function(e){return nf(t,e,function(t){r.fireIfReady(t,e).each(function(e){e&&t.kill()}),n.triggerEvent(e,t)&&t.kill()})}),i=ef(),u=nf(t,"paste",function(t){r.fireIfReady(t,"paste").each(function(e){e&&t.kill()}),n.triggerEvent("paste",t)&&t.kill(),i.set(setTimeout(function(){n.triggerEvent(ku(),t)},0))}),a=nf(t,"keydown",function(e){n.triggerEvent("keydown",e)?e.kill():n.stopBackspace&&y2(e)&&e.prevent()}),c=x2(t,function(e){n.triggerEvent("focusin",e)&&e.kill()}),s=ef(),l=C2(t,function(e){n.triggerEvent("focusout",e)&&e.kill(),s.set(setTimeout(function(){n.triggerEvent(Su(),e)},0))});return{unbind:function(){w(o,function(e){e.unbind()}),a.unbind(),c.unbind(),l.unbind(),u.unbind(),i.on(clearTimeout),s.on(clearTimeout)}}},k2=function(e,t){e=C(e,"target").getOr(t);return T(e)},T2=function(e,t){var n=T(!1),r=T(!1);return{stop:function(){n.set(!0)},cut:function(){r.set(!0)},isStopped:n.get,isCut:r.get,event:e,setSource:t.set,getSource:t.get}},O2=function(e){var t=T(!1);return{stop:function(){t.set(!0)},cut:G,isStopped:t.get,isCut:W,event:e,setSource:U("Cannot set source of a broadcasted event"),getSource:U("Cannot get source of a broadcasted event")}},E2=Pi([{stopped:[]},{resume:["element"]},{complete:[]}]),_2=function(e,r,t,n,o,i){var e=e(r,n),u=T2(t,o);return e.fold(function(){return i.logEventNoHandlers(r,n),E2.complete()},function(t){var n=t.descHandler;return qa(n)(u),u.isStopped()?(i.logEventStopped(r,t.element,n.purpose),E2.stopped()):u.isCut()?(i.logEventCut(r,t.element,n.purpose),E2.complete()):Cr(t.element).fold(function(){return i.logNoParent(r,t.element,n.purpose),E2.complete()},function(e){return i.logEventResponse(r,t.element,n.purpose),E2.resume(e)})})},A2=function(t,n,r,e,o,i){return _2(t,n,r,e,o,i).fold($,function(e){return A2(t,n,r,e,o,i)},W)},D2=function(e,t,n,r,o){var i=k2(n,r);return _2(e,t,n,r,i,o)},M2=function(e,t,n){var r=O2(t);return w(e,function(e){e=e.descHandler;qa(e)(r)}),r.isStopped()},N2=function(e,t,n,r){return R2(e,t,n,n.target,r)},R2=function(e,t,n,r,o){var i=k2(n,r);return A2(e,t,n,r,i,o)},z2=function(e,t){return{element:e,descHandler:t}},B2=function(e,t){return{id:e,descHandler:t}},P2=function(){var i={};return{registerId:function(r,o,e){Kt(e,function(e,t){var n=void 0!==i[t]?i[t]:{};n[o]=$a(e,r),i[t]=n})},unregisterId:function(n){Kt(i,function(e,t){rn(e,n)&&delete e[n]})},filterByType:function(e){return C(i,e).map(function(e){return en(e,function(e,t){return B2(t,e)})}).getOr([])},find:function(e,t,n){return C(i,t).bind(function(r){return Gi(n,function(e){return t=r,xa(n=e).bind(function(e){return C(t,e)}).map(function(e){return z2(n,e)});var t,n},e)})}}},I2=function(){var u=P2(),a={},c=function(e){xa(e.element).each(function(e){delete a[e],u.unregisterId(e)})};return{find:function(e,t,n){return u.find(e,t,n)},filter:function(e){return u.filterByType(e)},register:function(e){n=(t=e).element;var t,n=xa(n).getOrThunk(function(){return ya("uid-",t.element)});if(on(a,n)){var r=e,o=n,i=a[o];if(i!==r)throw new Error('The tagId "'+o+'" is already used by: '+da(i.element)+"\nCannot use it for: "+da(r.element)+"\nThe conflicting element is"+(Ir(i.element)?" ":" not ")+"already in the DOM");c(r)}u.registerId([e],n,e.events),a[n]=e},unregister:c,getById:function(e){return C(a,e)}}},L2=Kp({name:"Container",factory:function(e){var t=e.dom,n=t.attributes,t=ue(t,["attributes"]);return{uid:e.uid,dom:A({tag:"div",attributes:A({role:"presentation"},n)},t),components:e.components,behaviours:fp(e.containerBehaviours),events:e.events,domModification:e.domModification,eventOrder:e.eventOrder}},configFields:[s("components",[]),Rd("containerBehaviours",[]),s("events",{}),s("domModification",{}),s("eventOrder",{})]}),F2=function(n){function r(t){return Cr(n.element).fold($,function(e){return gr(t,e)})}function o(e,t){return u.find(r,e,t)}function i(t){var e=u.filter(Tu());w(e,function(e){e=e.descHandler;qa(e)(t)})}var u=I2(),e=S2(n.element,{triggerEvent:function(t,n){return _s(t,n.target,function(e){return N2(o,t,n,e)})}}),a={debugInfo:K("real"),triggerEvent:function(t,n,r){_s(t,n,function(e){return R2(o,t,r,n,e)})},triggerFocus:function(t,n){xa(t).fold(function(){kl(t)},function(e){_s(Cu(),t,function(e){return D2(o,Cu(),{originator:n,kill:G,prevent:G,target:t},t,e),!1})})},triggerEscape:function(e,t){a.triggerEvent("keydown",e.element,t.event)},getByUid:function(e){return g(e)},getByDom:function(e){return p(e)},build:Bc,addToGui:function(e){s(e)},removeFromGui:function(e){l(e)},addToWorld:function(e){t(e)},removeFromWorld:function(e){c(e)},broadcast:function(e){f(e)},broadcastOn:function(e,t){d(e,t)},broadcastEvent:function(e,t){m(e,t)},isConnected:$},t=function(e){e.connect(a),Dn(e.element)||(u.register(e),w(e.components(),t),a.triggerEvent(Nu(),e.element,{target:e.element}))},c=function(e){Dn(e.element)||(w(e.components(),c),u.unregister(e)),e.disconnect()},s=function(e){Jg(n,e)},l=function(e){ep(e)},f=function(e){i({universal:!0,data:e})},d=function(e,t){i({universal:!1,channels:e,data:t})},m=function(e,t){e=u.filter(e);return M2(e,t)},g=function(e){return u.getById(e).fold(function(){return M.error(new Error('Could not find component with uid: "'+e+'" in system.'))},M.value)},p=function(e){e=xa(e).getOr("not found");return g(e)};return t(n),{root:n,element:n.element,destroy:function(){e.unbind(),_o(n.element)},add:s,remove:l,getByUid:g,getByDom:p,addToWorld:t,removeFromWorld:c,broadcast:f,broadcastOn:d,broadcastEvent:m}},H2=K([s("prefix","form-field"),Rd("fieldBehaviours",[y,ee])]),ma=K([Dp({schema:[i("dom")],name:"label"}),Dp({factory:{sketch:function(e){return{uid:e.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:e.text}}}},schema:[i("text")],name:"aria-descriptor"}),Ap({factory:{sketch:function(e){var t=ct(e,["factory"]);return e.factory.sketch(t)}},schema:[i("factory")],name:"field"})]),E=Gd({name:"FormField",configFields:H2(),partFields:ma(),factory:function(o,e,t,n){var r=dp(o.fieldBehaviours,[y.config({find:function(e){return Pp(e,o,"field")}}),ee.config({store:{mode:"manual",getValue:function(e){return y.getCurrent(e).bind(ee.getValue)},setValue:function(e,t){y.getCurrent(e).each(function(e){ee.setValue(e,t)})}}})]),i=Yu([na(function(e,t){var r=jd(e,o,["label","field","aria-descriptor"]);r.field().each(function(n){var t=O(o.prefix);r.label().each(function(e){k(e.element,"for",t),k(n.element,"id",t)}),r["aria-descriptor"]().each(function(e){var t=O(o.prefix);k(e.element,"id",t),k(n.element,"aria-describedby",t)})})})]);return{uid:o.uid,dom:o.dom,components:e,behaviours:r,events:i,apis:{getField:function(e){return Pp(e,o,"field")},getLabel:function(e){return Pp(e,o,"label")}}}},apis:{getField:function(e,t){return e.getField(t)},getLabel:function(e,t){return e.getLabel(t)}}}),ha=Object.freeze({__proto__:null,exhibit:function(e,t){return Fa({attributes:Vi([{key:t.tabAttr,value:"true"}])})}}),yh=[s("tabAttr","data-alloy-tabstop")],V2=yl({fields:yh,name:"tabstopping",active:ha}),j2=tinymce.util.Tools.resolve("tinymce.html.Entities"),U2=function(e,t,n,r){e=W2(e,t,n,r);return E.sketch(e)},W2=function(e,t,n,r){return{dom:$2(n),components:e.toArray().concat([t]),fieldBehaviours:Q(r)}},$2=function(e){return{tag:"div",classes:["tox-form__group"].concat(e)}},q2=function(e,t){return E.parts.label({dom:{tag:"label",classes:["tox-label"],innerHtml:t.translate(e)}})},G2=O("form-component-change"),K2=O("form-close"),X2=O("form-cancel"),Y2=O("form-action"),J2=O("form-submit"),Z2=O("form-block"),Q2=O("form-unblock"),eC=O("form-tabchange"),tC=O("form-resize"),tu=K([Mi("data"),s("inputAttributes",{}),s("inputStyles",{}),s("tag","input"),s("inputClasses",[]),e("onSetValue"),s("styles",{}),s("eventOrder",{}),Rd("inputBehaviours",[ee,oe]),s("selectOnFocus",!0)]),nC=function(e){return Q([oe.config({onFocus:e.selectOnFocus?function(e){var e=e.element,t=wc(e);e.dom.setSelectionRange(0,t.length)}:G})])},rC=Kp({name:"Input",configFields:tu(),factory:function(e,t){return{uid:e.uid,dom:Mw(e),components:[],behaviours:A(A({},nC(n=e)),dp(n.inputBehaviours,[ee.config({store:A(A({mode:"manual"},n.data.map(function(e){return{initialValue:e}}).getOr({})),{getValue:function(e){return wc(e.element)},setValue:function(e,t){wc(e.element)!==t&&xc(e.element,t)}}),onSetValue:n.onSetValue})])),eventOrder:e.eventOrder};var n}}),oC={},iC={exports:oC},uC=(!function(e){var t,n;t=this,n=function(){var t,e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n={exports:{}};function r(){}function i(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],l(e,this)}function o(n,r){for(;3===n._state;)n=n._value;0===n._state?n._deferreds.push(r):(n._handled=!0,i._immediateFn(function(){var e,t=1===n._state?r.onFulfilled:r.onRejected;if(null===t)(1===n._state?u:a)(r.promise,n._value);else{try{e=t(n._value)}catch(e){return void a(r.promise,e)}u(r.promise,e)}}))}function u(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof i)return t._state=3,t._value=e,void c(t);if("function"==typeof n)return void l((r=n,o=e,function(){r.apply(o,arguments)}),t)}t._state=1,t._value=e,c(t)}catch(e){a(t,e)}var r,o}function a(e,t){e._state=2,e._value=t,c(e)}function c(e){2===e._state&&0===e._deferreds.length&&i._immediateFn(function(){e._handled||i._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)o(e,e._deferreds[t]);e._deferreds=null}function s(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function l(e,t){var n=!1;try{e(function(e){n||(n=!0,u(t,e))},function(e){n||(n=!0,a(t,e))})}catch(e){n||(n=!0,a(t,e))}}f=n,e=e,t=setTimeout,i.prototype.catch=function(e){return this.then(null,e)},i.prototype.then=function(e,t){var n=new this.constructor(r);return o(this,new s(e,t,n)),n},i.all=function(e){var a=Array.prototype.slice.call(e);return new i(function(o,i){if(0===a.length)return o([]);var u=a.length;for(var e=0;e<a.length;e++)!function t(n,e){try{if(e&&("object"==typeof e||"function"==typeof e)){var r=e.then;if("function"==typeof r)return void r.call(e,function(e){t(n,e)},i)}a[n]=e,0==--u&&o(a)}catch(e){i(e)}}(e,a[e])})},i.resolve=function(t){return t&&"object"==typeof t&&t.constructor===i?t:new i(function(e){e(t)})},i.reject=function(n){return new i(function(e,t){t(n)})},i.race=function(o){return new i(function(e,t){for(var n=0,r=o.length;n<r;n++)o[n].then(e,t)})},i._immediateFn="function"==typeof setImmediate?function(e){setImmediate(e)}:function(e){t(e,0)},i._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},i._setImmediateFn=function(e){i._immediateFn=e},i._setUnhandledRejectionFn=function(e){i._unhandledRejectionFn=e},f.exports?f.exports=i:e.Promise||(e.Promise=i);var f=n.exports;return{boltExport:("undefined"!=typeof window?window:Function("return this;")()).Promise||f}},"object"==typeof oC&&void 0!==iC?iC.exports=n():"function"==typeof e&&e.amd?e(n):(t="undefined"!=typeof globalThis?globalThis:t||self).EphoxContactWrapper=n()}(void 0),iC.exports.boltExport),aC={nu:Nw,pure:function(t){return Nw(function(e){e(t)})}},cC=function(e){setTimeout(function(){throw e},0)},sC=function(n){function e(e){n().then(e,cC)}return{map:function(e){return sC(function(){return n().then(e)})},bind:function(t){return sC(function(){return n().then(function(e){return t(e).toPromise()})})},anonBind:function(e){return sC(function(){return n().then(function(){return e.toPromise()})})},toLazy:function(){return aC.nu(e)},toCached:function(){var e=null;return sC(function(){return e=null===e?n():e})},toPromise:n,get:e}},lC={nu:function(e){return sC(function(){return new uC(e)})},pure:function(e){return sC(function(){return uC.resolve(e)})}},fC=["input","textarea"],Kf=Object.freeze({__proto__:null,markValid:zw,markInvalid:Bw,query:Pw,run:Iw,isInvalid:function(e,t){e=t.getRoot(e).getOr(e.element);return hc(e,t.invalidClass)}}),xh=Object.freeze({__proto__:null,events:function(t,e){return t.validator.map(function(e){return Yu([Z(e.onEvent,function(e){Iw(e,t).get(v)})].concat(e.validateOnLoad?[na(function(e){Iw(e,t).get(G)})]:[]))}).getOr({})}}),Eh=[i("invalidClass"),s("getRoot",X.none),Ri("notify",[s("aria","alert"),s("getContainer",X.none),s("validHtml",""),e("onValid"),e("onInvalid"),e("onValidate")]),Ri("validator",[i("validate"),s("onEvent","input"),s("validateOnLoad",!0)])],dC=yl({fields:Eh,name:"invalidating",active:xh,apis:Kf,extra:{validation:function(t){return function(e){e=ee.getValue(e);return lC.pure(t(e))}}}}),_p=Object.freeze({__proto__:null,getCoupled:function(e,t,n,r){return n.getOrCreate(e,t,r)}}),Ep=[Ai("others",We(M.value,pi()))],mC=yl({fields:Ep,name:"coupling",apis:_p,state:Object.freeze({__proto__:null,init:function(){var o={},e=K({});return za({readState:e,getOrCreate:function(t,n,r){var e=qt(n.others);if(e)return C(o,r).getOrThunk(function(){var e=C(n.others,r).getOrDie("No information found for coupled component: "+r)(t),e=t.getSystem().build(e);return o[r]=e});throw new Error("Cannot find coupled component: "+r+". Known coupled components: "+JSON.stringify(e,null,2))}})}})}),gC=K("sink"),_h=K(Dp({name:gC(),overrides:K({dom:{tag:"div"},behaviours:Q([qg.config({useFixed:$})]),events:Yu([ea(mu()),ea(uu()),ea(vu())])})})),pC=((bh=xx=xx||{})[bh.HighlightFirst=0]="HighlightFirst",bh[bh.HighlightNone=1]="HighlightNone",function(e,t){var n=e.getHotspot(t).getOr(t),r=e.getAnchorOverrides();return e.layouts.fold(function(){return{type:"hotspot",hotspot:n,overrides:r}},function(e){return{type:"hotspot",hotspot:n,overrides:r,layouts:e}})}),hC=function(e,t,n){return(0,e.fetch)(n).map(t)},vC=function(e,t,o,n,i,r,u){var t=hC(e,t,n),a=xC(n,e);return t.map(function(e){return e.bind(function(e){return X.from(Gh.sketch(A(A({},r.menu()),{uid:Ca(""),data:e,highlightImmediately:u===xx.HighlightFirst,onOpenMenu:function(e,t){var n=a().getOrDie();qg.position(n,t,{anchor:o}),c.decloak(i)},onOpenSubmenu:function(e,t,n){var r=a().getOrDie();qg.position(r,n,{anchor:{type:"submenu",item:t}}),c.decloak(i)},onRepositionMenu:function(e,t,n){var r=a().getOrDie();qg.position(r,t,{anchor:o}),w(n,function(e){qg.position(r,e.triggeredMenu,{anchor:{type:"submenu",item:e.triggeringItem}})})},onEscape:function(){return oe.focus(n),c.close(i),X.some(!0)}})))})})},bC=function(e,t,n,r,o,i,u){var a=pC(e,n);return vC(e,t,a,n,r,o,u).map(function(e){return e.fold(function(){c.isOpen(r)&&c.close(r)},function(e){c.cloak(r),c.open(r,e),i(r)}),r})},yC=function(e,t,n,r,o,i,u){return c.close(r),lC.pure(r)},wC=function(e,t,n){t=y.getCurrent(t).getOr(t),e=go(e.element);n?D(t.element,"min-width",e+"px"):mo(t.element,e)},xC=function(t,e){return t.getSystem().getByUid(e.uid+"-"+gC()).map(function(e){return function(){return M.value(e)}}).getOrThunk(function(){return e.lazySink.fold(function(){return function(){return M.error(new Error("No internal sink is specified, nor could an external sink be found"))}},function(e){return function(){return e(t)}})})},CC=function(e){c.getState(e).each(function(e){Gh.repositionMenus(e)})},Pf=K([i("dom"),i("fetch"),e("onOpen"),Vc("onExecute"),s("getHotspot",X.some),s("getAnchorOverrides",K({})),ts(),Rd("dropdownBehaviours",[g,mC,N,oe]),i("toggleClass"),s("eventOrder",{}),Mi("lazySink"),s("matchWidth",!1),s("useMinWidth",!1),Mi("role")].concat(Vw())),Op=K([gl({schema:[Lc()],name:"menu",defaults:function(e){return{onExecute:e.onExecute}}}),_h()]),SC=Gd({name:"Dropdown",configFields:Pf(),partFields:Op(),factory:function(t,e,n,r){function o(e){c.getState(e).each(function(e){Gh.highlightPrimary(e)})}function i(e,t){return qu(e),X.some(!0)}var u,a={expand:function(e){g.isOn(e)||Lw(t,v,e,r,G,xx.HighlightNone).get(G)},open:function(e){g.isOn(e)||Lw(t,v,e,r,G,xx.HighlightFirst).get(G)},isOpen:g.isOn,close:function(e){g.isOn(e)&&Lw(t,v,e,r,G,xx.HighlightFirst).get(G)},repositionMenus:function(e){g.isOn(e)&&Hw(e)}};return{uid:t.uid,dom:t.dom,components:e,behaviours:dp(t.dropdownBehaviours,[g.config({toggleClass:t.toggleClass,aria:{mode:"expanded"}}),mC.config({others:{sandbox:function(e){return Fw(t,e,{onOpen:function(){return g.on(e)},onClose:function(){return g.off(e)}})}}}),N.config({mode:"special",onSpace:i,onEnter:i,onDown:function(e,t){var n;return SC.isOpen(e)?(n=mC.getCoupled(e,"sandbox"),o(n)):SC.open(e),X.some(!0)},onEscape:function(e,t){return SC.isOpen(e)?(SC.close(e),X.some(!0)):X.none()}}),oe.config({})]),events:ug(X.some(function(e){Lw(t,v,e,r,o,xx.HighlightFirst).get(G)})),eventOrder:A(A({},t.eventOrder),((e={})[Ou()]=["disabling","toggling","alloy.base.behaviour"],e)),apis:a,domModification:{attributes:A(A({"aria-haspopup":"true"},t.role.fold(function(){return{}},function(e){return{role:e}})),"button"===t.dom.tag?{type:(u="type",C(t.dom,"attributes").bind(function(e){return C(e,u)}).getOr("button"))}:{})}}},apis:{open:function(e,t){return e.open(t)},expand:function(e,t){return e.expand(t)},close:function(e,t){return e.close(t)},isOpen:function(e,t){return e.isOpen(t)},repositionMenus:function(e,t){return e.repositionMenus(t)}}}),kC=yl({fields:[],name:"unselecting",active:Object.freeze({__proto__:null,events:function(){return Yu([lt(xu(),$)])},exhibit:function(){return Fa({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})}})}),TC=O("color-input-change"),OC=O("color-swatch-change"),EC=O("color-picker-cancel"),Ch=Dp({schema:[i("dom")],name:"label"}),H2=Uw("top-left"),ma=Uw("top"),yh=Uw("top-right"),ha=Uw("right"),Eh=Uw("bottom-right"),xh=Uw("bottom"),Kf=Uw("bottom-left"),Ep=[Ch,Uw("left"),ha,ma,xh,H2,yh,Kf,Eh,Ap({name:"thumb",defaults:K({dom:{styles:{position:"absolute"}}}),overrides:function(e){return{events:Yu([dt(nu(),e,"spectrum"),dt(ru(),e,"spectrum"),dt(ou(),e,"spectrum"),dt(uu(),e,"spectrum"),dt(au(),e,"spectrum"),dt(su(),e,"spectrum")])}}}),Ap({schema:[_i("mouseIsDown",function(){return T(!1)})],name:"spectrum",overrides:function(n){function r(t,e){return o.getValueFromEvent(e).map(function(e){return o.setValueFrom(t,n,e)})}var o=n.model.manager;return{behaviours:Q([N.config({mode:"special",onLeft:function(e){return o.onLeft(e,n)},onRight:function(e){return o.onRight(e,n)},onUp:function(e){return o.onUp(e,n)},onDown:function(e){return o.onDown(e,n)}}),oe.config({})]),events:Yu([Z(nu(),r),Z(ru(),r),Z(uu(),r),Z(au(),function(e,t){n.mouseIsDown.get()&&r(e,t)})])}}})],_C=K("slider.change.value"),AC=function(e){return-1!==e.type.indexOf("touch")},DC="top",MC="right",NC="bottom",RC="left",zC=function(e){return e.model.minX},BC=function(e){return e.model.minY},PC=function(e){return e.model.maxX},IC=function(e){return e.model.maxY},LC=function(e,t,n){return t(e)-n(e)},FC=function(e){return LC(e,PC,zC)},HC=function(e){return LC(e,IC,BC)},VC=function(e){return e.stepSize},jC=function(e){return e.snapToGrid},UC=function(e){return e.snapStart},WC=function(e){return e.rounded},$C=function(e,t){return void 0!==e[t+"-edge"]},qC=function(e){return $C(e,RC)},GC=function(e){return $C(e,MC)},KC=function(e){return $C(e,DC)},XC=function(e){return $C(e,NC)},YC=function(e){return e.model.value.get()},JC=function(e,t,n,r){return e<t?e:n<e?n:e===t?t-1:Math.max(t,e-r)},ZC=function(e,t,n,r){return n<e?e:e<t?t:e===n?n+1:Math.min(n,e+r)},QC=function(e,t,n){return Math.max(t,Math.min(n,e))},eS=function(o,t,i,u,e){return e.fold(function(){var e=Math.round((o-t)/u)*u;return QC(t+e,t-1,i+1)},function(e){var t=Math.round((o-e)%u/u),n=Math.floor((o-e)/u),r=Math.floor((i-e)/u),r=Math.min(r,n+t);return Math.max(e,e+r*u)})},tS=function(e,t,n){return Math.min(n,Math.max(e,t))-t},nS=function(e){var t=e.min,n=e.max,r=e.range,o=e.value,i=e.step,u=e.snap,a=e.snapStart,c=e.rounded,s=e.hasMinEdge,l=e.hasMaxEdge,f=e.minBound,d=e.maxBound,e=e.screenRange,s=s?t-1:t,l=l?n+1:n;return o<f?s:d<o?l:(o=tS(o,f,d),f=QC(o/e*r+t,s,l),u&&t<=f&&f<=n?eS(f,t,n,i,a):c?Math.round(f):f)},rS=function(e){var t=e.min,n=e.max,r=e.range,o=e.value,i=e.hasMinEdge,u=e.hasMaxEdge,a=e.maxBound,c=e.maxOffset,s=e.centerMinEdge,e=e.centerMaxEdge;return o<t?i?0:s:n<o?u?a:e:(o-t)/r*c},oS="top",iS="right",uS="bottom",aS="left",cS="width",sS="height",lS=function(e){return e.element.dom.getBoundingClientRect()},fS=function(e,t){return e[t]},dS=function(e){e=lS(e);return fS(e,aS)},mS=function(e){e=lS(e);return fS(e,iS)},gS=function(e){e=lS(e);return fS(e,oS)},pS=function(e){e=lS(e);return fS(e,uS)},hS=function(e){e=lS(e);return fS(e,cS)},vS=function(e){e=lS(e);return fS(e,sS)},bS=function(e,t,n){return(e+t)/2-n},yS=function(e,t){var e=lS(e),t=lS(t),n=fS(e,aS),e=fS(e,iS),t=fS(t,aS);return bS(n,e,t)},wS=function(e,t){var e=lS(e),t=lS(t),n=fS(e,oS),e=fS(e,uS),t=fS(t,oS);return bS(n,e,t)},xS=function(e,t){J(e,_C(),{value:t})},CS=function(e){return{x:e}},_p=ex(-1),bh=ex(1),Pf=X.none,Op=X.none,Ch={"top-left":X.none(),top:X.none(),"top-right":X.none(),right:X.some(function(e,t){Zw(e,{x:Gw(t)})}),"bottom-right":X.none(),bottom:X.none(),"bottom-left":X.none(),left:X.some(function(e,t){Zw(e,{x:$w(t)})})},ha=Object.freeze({__proto__:null,setValueFrom:function(e,t,n){t=Qw(e,t,n),n=CS(t);return xS(e,n),t},setToMin:function(e,t){t=zC(t);xS(e,CS(t))},setToMax:function(e,t){t=PC(t);xS(e,CS(t))},findValueOfOffset:Qw,getValueFromEvent:function(e){return Ww(e).map(function(e){return e.left})},findPositionOfValue:tx,setPositionFromValue:function(e,t,n,r){var o=YC(n),o=tx(e,r.getSpectrum(e),o.x,r.getLeftEdge(e),r.getRightEdge(e),n),r=go(t.element)/2;D(t.element,"left",o-r+"px")},onLeft:_p,onRight:bh,onUp:Pf,onDown:Op,edgeActions:Ch}),SS=function(e,t){J(e,_C(),{value:t})},kS=function(e){return{y:e}},ma=X.none,xh=X.none,H2=rx(-1),yh=rx(1),Kf={"top-left":X.none(),top:X.some(function(e,t){Zw(e,{y:qw(t)})}),"top-right":X.none(),right:X.none(),"bottom-right":X.none(),bottom:X.some(function(e,t){Zw(e,{y:Kw(t)})}),"bottom-left":X.none(),left:X.none()},Eh=Object.freeze({__proto__:null,setValueFrom:function(e,t,n){t=nx(e,t,n),n=kS(t);return SS(e,n),t},setToMin:function(e,t){t=BC(t);SS(e,kS(t))},setToMax:function(e,t){t=IC(t);SS(e,kS(t))},findValueOfOffset:nx,getValueFromEvent:function(e){return Ww(e).map(function(e){return e.top})},findPositionOfValue:ox,setPositionFromValue:function(e,t,n,r){var o=YC(n),o=ox(e,r.getSpectrum(e),o.y,r.getTopEdge(e),r.getBottomEdge(e),n),r=oo(t.element)/2;D(t.element,"top",o-r+"px")},onLeft:ma,onRight:xh,onUp:H2,onDown:yh,edgeActions:Kf}),TS=function(e,t){J(e,_C(),{value:t})},OS=function(e,t){return{x:e,y:t}},_p=Ww,bh=ix(-1,!1),Pf=ix(1,!1),Op=ix(-1,!0),Ch=ix(1,!0),ma={"top-left":X.some(function(e,t){Zw(e,Jw($w(t),qw(t)))}),top:X.some(function(e,t){Zw(e,Jw(Xw(t),qw(t)))}),"top-right":X.some(function(e,t){Zw(e,Jw(Gw(t),qw(t)))}),right:X.some(function(e,t){Zw(e,Jw(Gw(t),Yw(t)))}),"bottom-right":X.some(function(e,t){Zw(e,Jw(Gw(t),Kw(t)))}),bottom:X.some(function(e,t){Zw(e,Jw(Xw(t),Kw(t)))}),"bottom-left":X.some(function(e,t){Zw(e,Jw($w(t),Kw(t)))}),left:X.some(function(e,t){Zw(e,Jw($w(t),Yw(t)))})},xh=Object.freeze({__proto__:null,setValueFrom:function(e,t,n){var r=Qw(e,t,n.left),t=nx(e,t,n.top),n=OS(r,t);return TS(e,n),n},setToMin:function(e,t){var n=zC(t),t=BC(t);TS(e,OS(n,t))},setToMax:function(e,t){var n=PC(t),t=IC(t);TS(e,OS(n,t))},getValueFromEvent:_p,setPositionFromValue:function(e,t,n,r){var o=YC(n),i=tx(e,r.getSpectrum(e),o.x,r.getLeftEdge(e),r.getRightEdge(e),n),o=ox(e,r.getSpectrum(e),o.y,r.getTopEdge(e),r.getBottomEdge(e),n),r=go(t.element)/2,e=oo(t.element)/2;D(t.element,"left",i-r+"px"),D(t.element,"top",o-e+"px")},onLeft:bh,onRight:Pf,onUp:Op,onDown:Ch,edgeActions:ma}),ES=Gd({name:"Slider",configFields:[s("stepSize",1),s("onChange",G),s("onChoose",G),s("onInit",G),s("onDragStart",G),s("onDragEnd",G),s("snapToGrid",!1),s("rounded",!0),Mi("snapStart"),Ai("model",$e("mode",{x:[s("minX",0),s("maxX",100),_i("value",function(e){return T(e.mode.minX)}),i("getInitialValue"),Ns("manager",ha)],y:[s("minY",0),s("maxY",100),_i("value",function(e){return T(e.mode.minY)}),i("getInitialValue"),Ns("manager",Eh)],xy:[s("minX",0),s("maxX",100),s("minY",0),s("maxY",100),_i("value",function(e){return T({x:e.mode.minX,y:e.mode.minY})}),i("getInitialValue"),Ns("manager",xh)]})),Rd("sliderBehaviours",[N,ee]),_i("mouseIsDown",function(){return T(!1)})],partFields:Ep,factory:function(o,e,t,n){function i(e){return Ip(e,o,"spectrum")}function r(e){return Pp(e,o,"left-edge")}function u(e){return Pp(e,o,"right-edge")}function a(e){return Pp(e,o,"top-edge")}function c(e){return Pp(e,o,"bottom-edge")}function s(e,t){g.value.set(t),t=m(e),h(e,t)}function l(n){var e=o.mouseIsDown.get();o.mouseIsDown.set(!1),e&&Pp(n,o,"thumb").each(function(e){var t=g.value.get();o.onChoose(n,e,t)})}function f(e,t){t.stop(),o.mouseIsDown.set(!0),o.onDragStart(e,m(e))}function d(e,t){t.stop(),o.onDragEnd(e,m(e)),l(e)}var m=function(e){return Ip(e,o,"thumb")},g=o.model,p=g.manager,h=function(e,t){p.setPositionFromValue(e,t,o,{getLeftEdge:r,getRightEdge:u,getTopEdge:a,getBottomEdge:c,getSpectrum:i})};return{uid:o.uid,dom:o.dom,components:e,behaviours:dp(o.sliderBehaviours,[N.config({mode:"special",focusIn:function(e){return Pp(e,o,"spectrum").map(N.focusIn).map($)}}),ee.config({store:{mode:"manual",getValue:function(e){return g.value.get()}}}),Cl.config({channels:((e={})[up()]={onReceive:l},e)})]),events:Yu([Z(_C(),function(e,t){var n;e=e,t=t.event.value,s(e,t),n=m(e),o.onChange(e,n,t),X.some(!0)}),na(function(e,t){var n=g.getInitialValue(),n=(g.value.set(n),m(e)),r=(h(e,n),i(e));o.onInit(e,n,r,g.value.get())}),Z(nu(),f),Z(ou(),d),Z(uu(),f),Z(su(),d)]),apis:{resetToMin:function(e){p.setToMin(e,o)},resetToMax:function(e){p.setToMax(e,o)},setValue:s,refresh:h},domModification:{styles:{position:"relative"}}}},apis:{setValue:function(e,t,n){e.setValue(t,n)},resetToMin:function(e,t){e.resetToMin(t)},resetToMax:function(e,t){e.resetToMax(t)},refresh:function(e,t){e.refresh(t)}}}),_S=O("rgb-hex-update"),AS=O("slider-update"),DS=O("palette-update"),MS=function(e,t){var n=ES.parts.spectrum({dom:{tag:"div",classes:[t("hue-slider-spectrum")],attributes:{role:"presentation"}}}),r=ES.parts.thumb({dom:{tag:"div",classes:[t("hue-slider-thumb")],attributes:{role:"presentation"}}});return ES.sketch({dom:{tag:"div",classes:[t("hue-slider")],attributes:{role:"presentation"}},rounded:!1,model:{mode:"y",getInitialValue:K({y:0})},components:[n,r],sliderBehaviours:Q([oe.config({})]),onChange:function(e,t,n){J(e,AS,{value:n})}})},NS=[Rd("formBehaviours",[ee])],RS=function(e,t){return e.fold(function(){return M.error(t)},M.value)},zS={getField:mt(function(e,t,n){return e.getField(t,n)}),sketch:function(e){var n,t={field:function(e,t){return n.push(e),Hd("form",ux(e),t)},record:K(n=[])},e=e(t),t=t.record(),t=x(t,function(e){return Ap({name:e,pname:ux(e)})});return qd("form",NS,t,ax,e)}},BS=O("valid-input"),PS=O("invalid-input"),IS=O("validating-input"),LS="colorcustom.rgb.",FS=function(m,g,p,h){function v(e,t,n,r,o){var i=m(LS+"range"),n=[E.parts.label({dom:{tag:"label",innerHtml:n,attributes:{"aria-label":r}}}),E.parts.field({data:o,factory:rC,inputAttributes:A({type:"text"},"hex"===t?{"aria-live":"polite"}:{}),inputClasses:[g("textfield")],inputBehaviours:Q([u(t,e),V2.config({})]),onSetValue:function(e){dC.isInvalid(e)&&dC.run(e).get(G)}})],r="hex"!==t?[E.parts["aria-descriptor"]({text:i})]:[];return{dom:{tag:"div",attributes:{role:"presentation"}},components:n.concat(r)}}function b(e,t){var n=t.red,r=t.green,t=t.blue;ee.setValue(e,{red:n,green:r,blue:t})}function y(e,t){w.getOpt(e).each(function(e){D(e.element,"background-color","#"+t.value)})}var u=function(t,n){return dC.config({invalidClass:g("invalid"),notify:{onValidate:function(e){J(e,IS,{type:t})},onValid:function(e){J(e,BS,{type:t,value:ee.getValue(e)})},onInvalid:function(e){J(e,PS,{type:t,value:ee.getValue(e)})}},validator:{validate:function(e){e=ee.getValue(e),e=n(e)?M.value(!0):M.error(m("aria.input.invalid"));return lC.pure(e)},validateOnLoad:!1}})},w=ie({dom:{tag:"div",classes:[g("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}});return Kp({factory:function(){function t(e,t){"hex"!==(t=t.event).type?u(t.type,X.none()):h(e)}function i(r,e,t){t=parseInt(t,10),u(e,X.some(t)),a().each(function(e){t=r,n=Yy(e),zS.getField(t,"hex").each(function(e){oe.isFocused(e)||ee.setValue(t,{hex:n.value})});var t,n,e=n;J(r,_S,{hex:e}),y(r,e)})}function n(e,t){var n,r,o;"hex"===(t=t.event).type?(n=e,r=t.value,p(n),o=Vy(r),u("hex",X.some(r)),r=iw(o),b(n,r),c(r),J(n,_S,{hex:o}),y(n,o)):i(e,t.type,t.value)}function e(e){return{label:m(LS+e+".label"),description:m(LS+e+".description")}}var r={red:T(X.some(255)),green:T(X.some(255)),blue:T(X.some(255)),hex:T(X.some("ffffff"))},o=function(e){return r[e].get()},u=function(e,t){r[e].set(t)},a=function(){return o("red").bind(function(n){return o("green").bind(function(t){return o("blue").map(function(e){return nw(n,t,e,1)})})})},c=function(e){var t=e.red,n=e.green,e=e.blue;u("red",X.some(t)),u("green",X.some(n)),u("blue",X.some(e))},s=e("red"),l=e("green"),f=e("blue"),d=e("hex");return Go(zS.sketch(function(e){return{dom:{tag:"form",classes:[g("rgb-form")],attributes:{"aria-label":m("aria.color.picker")}},components:[e.field("red",E.sketch(v(rw,"red",s.label,s.description,255))),e.field("green",E.sketch(v(rw,"green",l.label,l.description,255))),e.field("blue",E.sketch(v(rw,"blue",f.label,f.description,255))),e.field("hex",E.sketch(v(Wy,"hex",d.label,d.description,"ffffff"))),w.asSpec()],formBehaviours:Q([dC.config({invalidClass:g("form-invalid")}),re("rgb-form-events",[Z(BS,n),Z(PS,t),Z(IS,t)])])}}),{apis:{updateHex:function(e,t){ee.setValue(e,{hex:t.value});var n=e,r=t;r=iw(r),b(n,r),c(r),y(e,t)}}})},name:"RgbForm",configFields:[],apis:{updateHex:function(e,t,n){e.updateHex(t,n)}},extraApis:{}})},HS=function(e,r){function o(e,t){var n=e.width,r=e.height;null!==(e=e.getContext("2d"))&&(e.fillStyle=t,e.fillRect(0,0,n,r),(t=e.createLinearGradient(0,0,n,0)).addColorStop(0,"rgba(255,255,255,1)"),t.addColorStop(1,"rgba(255,255,255,0)"),e.fillStyle=t,e.fillRect(0,0,n,r),(t=e.createLinearGradient(0,0,0,r)).addColorStop(0,"rgba(0,0,0,0)"),t.addColorStop(1,"rgba(0,0,0,1)"),e.fillStyle=t,e.fillRect(0,0,n,r))}var i=ES.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[r("sv-palette-spectrum")]}}),u=ES.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[r("sv-palette-thumb")],innerHtml:"<div class="+r("sv-palette-inner-thumb")+' role="presentation"></div>'}});return Kp({factory:function(e){var t=K({x:0,y:0}),n=Q([y.config({find:X.some}),oe.config({})]);return ES.sketch({dom:{tag:"div",attributes:{role:"presentation"},classes:[r("sv-palette")]},model:{mode:"xy",getInitialValue:t},rounded:!1,components:[i,u],onChange:function(e,t,n){J(e,DS,{value:n})},onInit:function(e,t,n,r){o(n.element.dom,cw(sw))},sliderBehaviours:n})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:function(e,t,n){var r=t;r=t.components()[0].element.dom,n=hw(n,100,100),n=ow(n),o(r,cw(n))},setThumb:function(e,t,n){n=vw(iw(n)),ES.setValue(t,{x:n.saturation,y:100-n.value})}},extraApis:{}})},VS={self:function(){return y.config({find:X.some})},memento:function(e){return y.config({find:e.getOpt})},childAt:function(e){return y.config({find:function(t){return Or(t.element,e).bind(function(e){return t.getSystem().getByDom(e).toOptional()})}})}},jS={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","colorcustom.sb.saturation":"Saturation","colorcustom.sb.brightness":"Brightness","colorcustom.sb.picker":"Saturation and Brightness Picker","colorcustom.sb.palette":"Saturation and Brightness Palette","colorcustom.sb.instructions":"Use arrow keys to select saturation and brightness, on x and y axes","colorcustom.hue.hue":"Hue","colorcustom.hue.slider":"Hue Slider","colorcustom.hue.palette":"Hue Palette","colorcustom.hue.instructions":"Use arrow keys to select a hue","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},US=function(e){return jS[e]},WS=tinymce.util.Tools.resolve("tinymce.Resource"),$S=tinymce.util.Tools.resolve("tinymce.util.Tools"),qS=m([s("preprocess",v),s("postprocess",v)]),GS={memento:function(n,e){var r=Ti("RepresentingConfigs.memento processors",qS,e);return ee.config({store:{mode:"manual",getValue:function(e){e=n.get(e),e=ee.getValue(e);return r.postprocess(e)},setValue:function(e,t){t=r.preprocess(t),e=n.get(e);ee.setValue(e,t)}}})},withElement:fx,withComp:lx,domValue:function(e){return fx(e,wc,xc)},domHtml:function(e){return fx(e,aa,ca)},memory:function(e){return ee.config({store:{mode:"memory",initialValue:e}})}},KS="jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp",XS=O("alloy-fake-before-tabstop"),YS=O("alloy-fake-after-tabstop"),JS=function(e){return{dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:e},behaviours:Q([oe.config({ignore:!0}),V2.config({})])}},ZS=function(e){return{dom:{tag:"div",classes:["tox-navobj"]},components:[JS([XS]),e,JS([YS])],behaviours:Q([VS.childAt(1)])}},QS=function(e,t){J(e,mu(),{raw:{which:9,shiftKey:t}})},ek=function(e,t){t=t.element;hc(t,XS)?QS(e,!0):hc(t,YS)&&QS(e,!1)},tk=function(e){return d2(e,["."+XS,"."+YS].join(","),W)},nk=!(ar().browser.isIE()||ar().browser.isEdge()),rk=function(e,t){return uk(document.createElement("canvas"),e,t)},ok=function(e){var t=rk(e.width,e.height);return ik(t).drawImage(e,0,0),t},ik=function(e){return e.getContext("2d")},uk=function(e,t,n){return e.width=t,e.height=n,e},ak=function(e){return e.naturalWidth||e.width},ck=function(e){return e.naturalHeight||e.height},sk=function(a){return new uC(function(e,t){var n=URL.createObjectURL(a),r=new Image,o=function(){r.removeEventListener("load",i),r.removeEventListener("error",u)},i=function(){o(),e(r)},u=function(){o(),t("Unable to load data of type "+a.type+": "+n)};r.addEventListener("load",i),r.addEventListener("error",u),r.src=n,r.complete&&setTimeout(i,0)})},lk=function(e){var e=e.split(","),t=/data:([^;]+)/.exec(e[0]);if(!t)return X.none();for(var t=t[1],e=e[1],n=atob(e),r=n.length,o=Math.ceil(r/1024),i=new Array(o),u=0;u<o;++u){for(var a=1024*u,c=Math.min(1024+a,r),s=new Array(c-a),l=a,f=0;l<c;++f,++l)s[f]=n[l].charCodeAt(0);i[u]=new Uint8Array(s)}return X.some(new Blob(i,{type:t}))},fk=function(n){return new uC(function(e,t){lk(n).fold(function(){t("uri is not base64: "+n)},e)})},dk=function(e,r,o){return r=r||"image/png",B(HTMLCanvasElement.prototype.toBlob)?new uC(function(t,n){e.toBlob(function(e){e?t(e):n()},r,o)}):fk(e.toDataURL(r,o))},mk=function(e,t,n){return e.toDataURL(t=t||"image/png",n)},gk=function(e){return sk(e).then(function(e){hk(e);var t=rk(ak(e),ck(e));return ik(t).drawImage(e,0,0),t})},pk=function(n){return new uC(function(e){var t=new FileReader;t.onloadend=function(){e(t.result)},t.readAsDataURL(n)})},hk=function(e){URL.revokeObjectURL(e.src)},vk=function(e,t,n){function r(t,n){return e.then(function(e){return mk(e,t,n)})}var o=t.type,o=K(o),i=K(n);return{getType:o,toBlob:function(){return uC.resolve(t)},toDataURL:i,toBase64:function(){return n.split(",")[1]},toAdjustedBlob:function(t,n){return e.then(function(e){return dk(e,t,n)})},toAdjustedDataURL:r,toAdjustedBase64:function(e,t){return r(e,t).then(function(e){return e.split(",")[1]})},toCanvas:function(){return e.then(ok)}}},bk=function(t){return pk(t).then(function(e){return vk(gk(t),t,e)})},yk=function(t,e){return dk(t,e).then(function(e){return vk(uC.resolve(t),e,t.toDataURL())})},wk=function(e,t,n){e="string"==typeof e?parseFloat(e):e;return n<e?e=n:e<t&&(e=t),e},xk=function(){return[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1]},Ck=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10],Sk=function(e,t){for(var n=[],r=new Array(25),o=0;o<5;o++){for(var i=0;i<5;i++)n[i]=t[i+5*o];for(i=0;i<5;i++){for(var u=0,a=0;a<5;a++)u+=e[i+5*a]*n[a];r[i+5*o]=u}}return r},kk=function(e,t,n,r){return t=wk(t,0,2),n=wk(n,0,2),r=wk(r,0,2),Sk(e,[t,0,0,0,0,0,n,0,0,0,0,0,r,0,0,0,0,0,1,0,0,0,0,0,1])},Tk=function(t,n){return t.toCanvas().then(function(e){return Ok(e,t.getType(),n)})},Ok=function(e,t,n){var r=ik(e),n=function(e,t){for(var n,r,o,i,u=e.data,a=t[0],c=t[1],s=t[2],l=t[3],f=t[4],d=t[5],m=t[6],g=t[7],p=t[8],h=t[9],v=t[10],b=t[11],y=t[12],w=t[13],x=t[14],C=t[15],S=t[16],k=t[17],T=t[18],O=t[19],E=0;E<u.length;E+=4)n=u[E],r=u[E+1],o=u[E+2],i=u[E+3],u[E]=n*a+r*c+o*s+i*l+f,u[E+1]=n*d+r*m+o*g+i*p+h,u[E+2]=n*v+r*b+o*y+i*w+x,u[E+3]=n*C+r*S+o*k+i*T+O;return e}(r.getImageData(0,0,e.width,e.height),n);return r.putImageData(n,0,0),yk(e,t)},Ek=function(e,t,n){var r=ik(e),n=function(e,t,n){for(var r=function(e,t,n){return n<e?e=n:e<t&&(e=t),e},o=Math.round(Math.sqrt(n.length)),i=Math.floor(o/2),u=e.data,a=t.data,c=e.width,s=e.height,l=0;l<s;l++)for(var f=0;f<c;f++){for(var d=0,m=0,g=0,p=0;p<o;p++)for(var h=0;h<o;h++){var v=r(f+h-i,0,c-1),v=4*(r(l+p-i,0,s-1)*c+v),b=n[p*o+h];d+=u[v]*b,m+=u[1+v]*b,g+=u[2+v]*b}var y=4*(l*c+f);a[y]=r(d,0,255),a[1+y]=r(m,0,255),a[2+y]=r(g,0,255)}return t}(r.getImageData(0,0,e.width,e.height),r.getImageData(0,0,e.width,e.height),n);return r.putImageData(n,0,0),yk(e,t)},_k=(Cx=[-1,0,0,0,255,0,-1,0,0,255,0,0,-1,0,255,0,0,0,1,0,0,0,0,0,1],function(e){return Tk(e,Cx)}),Ak=gx(function(e,t){return t=wk(255*t,-255,255),Sk(e,[1,0,0,0,t,0,1,0,0,t,0,0,1,0,t,0,0,0,1,0,0,0,0,0,1])}),Dk=gx(function(e,t){var n;return t=wk(t,-1,1),n=(t*=100)<0?127+t/100*127:127*(n=0===(n=t%1)?Ck[t]:Ck[Math.floor(t)]*(1-n)+Ck[Math.floor(t)+1]*n)+127,Sk(e,[n/127,0,0,0,.5*(127-n),0,n/127,0,0,.5*(127-n),0,0,n/127,0,.5*(127-n),0,0,0,1,0,0,0,0,0,1])}),Mk=function(e,t,n,r){return Tk(e,kk(xk(),t,n,r))},Nk=(Sx=[0,-1,0,-1,5,-1,0,-1,0],function(e){return n=Sx,(t=e).toCanvas().then(function(e){return Ek(e,t.getType(),n)});var t,n}),Rk=(kx=function(e,t){return 255*Math.pow(e/255,1-t)},function(a,c){return a.toCanvas().then(function(e){for(var t=a.getType(),n=c,r=ik(e),o=new Array(256),i=0;i<o.length;i++)o[i]=kx(i,n);var u=function(e,t){for(var n=e.data,r=0;r<n.length;r+=4)n[r]=t[n[r]],n[r+1]=t[n[r+1]],n[r+2]=t[n[r+2]];return e}(r.getImageData(0,0,e.width,e.height),o);return r.putImageData(u,0,0),yk(e,t)})}),zk=function(e,t,n){var r=ak(e),o=ck(e),r=t/r,o=n/o,i=!1,e=((r<.5||2<r)&&(r=r<.5?.5:2,i=!0),(o<.5||2<o)&&(o=o<.5?.5:2,i=!0),Bk(e,r,o));return i?e.then(function(e){return zk(e,t,n)}):e},Bk=function(u,a,c){return new uC(function(e){var t=ak(u),n=ck(u),r=Math.floor(t*a),o=Math.floor(n*c),i=rk(r,o);ik(i).drawImage(u,0,0,t,n,0,0,r,o),e(i)})},Pk=function(e,t){void 0===t&&(t=2);t=Math.pow(10,t),e=Math.round(e*t);return Math.ceil(e/t)},Ik=function(t,n){return t.toCanvas().then(function(e){return Lk(e,t.getType(),n)})},Lk=function(e,t,n){var n=(n<0?360+n:n)*Math.PI/180,r=e.width,o=e.height,i=Math.sin(n),u=Math.cos(n),a=Pk(Math.abs(r*u)+Math.abs(o*i)),i=Pk(Math.abs(r*i)+Math.abs(o*u)),u=rk(a,i),c=ik(u);return c.translate(a/2,i/2),c.rotate(n),c.drawImage(e,-r/2,-o/2),yk(u,t)},Fk=function(t,n){return t.toCanvas().then(function(e){return Hk(e,t.getType(),n)})},Hk=function(e,t,n){var r=rk(e.width,e.height),o=ik(r);return"v"===n?(o.scale(1,-1),o.drawImage(e,0,-r.height)):(o.scale(-1,1),o.drawImage(e,-r.width,0)),yk(r,t)},Vk=function(t,n,r,o,i){return t.toCanvas().then(function(e){return jk(e,t.getType(),n,r,o,i)})},jk=function(e,t,n,r,o,i){o=rk(o,i);return ik(o).drawImage(e,-n,-r),yk(o,t)},Uk=function(t,n,r){return t.toCanvas().then(function(e){return zk(e,n,r).then(function(e){return yk(e,t.getType())})})},Wk=function(e){return _k(e)},$k=function(e){return Nk(e)},qk=function(e,t){return Rk(e,t)},Gk=function(e,t,n,r){return Mk(e,t,n,r)},Kk=function(e,t){return Ak(e,t)},Xk=function(e,t){return Dk(e,t)},Yk=function(e,t){return Fk(e,t)},Jk=function(e,t,n,r,o){return Vk(e,t,n,r,o)},Zk=function(e,t,n){return Uk(e,t,n)},Qk=function(e,t){return Ik(e,t)},eT=function(e,t,n){return S1(e,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:n},t)},tT=function(e,t){return eT(e,t,[])},nT=function(e,t){return eT(e,t,[ne.config({})])},rT=function(e,t,n){return{dom:{tag:"span",innerHtml:n.translate(e),classes:[t+"__select-label"]},behaviours:Q([ne.config({})])}},oT=O("toolbar.button.execute"),iT=function(n){return ia(function(t,e){my(n,t)(function(e){J(t,oT,{buttonApi:e}),n.onAction(e)})})},uT=((H2={})[Ou()]=["disabling","alloy.base.behaviour","toggling","toolbar-button-events"],H2),aT=O("update-menu-text"),cT=O("update-menu-icon"),sT=function(t,n,r){function e(e,t){return e=ee.getValue(e),oe.focus(e),J(e,"keydown",{raw:t.event.raw}),SC.close(e),X.some(!0)}var o=T(G),i=t.text.map(function(e){return ie(rT(e,n,r.providers))}),u=t.icon.map(function(e){return ie(nT(e,r.providers.icons))}),a=t.role.fold(function(){return{}},function(e){return{role:e}}),c=t.tooltip.fold(function(){return{}},function(e){e=r.providers.translate(e);return{title:e,"aria-label":e}}),s=S1("chevron-down",{tag:"div",classes:[n+"__select-chevron"]},r.providers.icons);return ie(SC.sketch(A(A(A({},t.uid?{uid:t.uid}:{}),a),{dom:{tag:"button",classes:[n,n+"--select"].concat(x(t.classes,function(e){return n+"--"+e})),attributes:A({},c)},components:by([u.map(function(e){return e.asSpec()}),i.map(function(e){return e.asSpec()}),X.some(s)]),matchWidth:!0,useMinWidth:!0,dropdownBehaviours:Q(ae(ae([],t.dropdownBehaviours,!0),[dy.button(function(){return t.disabled||r.providers.isDisabled()}),fy(),kC.config({}),ne.config({}),re("dropdown-events",[gy(t,o),py(t,o)]),re("menubutton-update-display-text",[Z(aT,function(t,n){i.bind(function(e){return e.getOpt(t)}).each(function(e){ne.set(e,[Mc(r.providers.translate(n.event.text))])})}),Z(cT,function(t,n){u.bind(function(e){return e.getOpt(t)}).each(function(e){ne.set(e,[nT(n.event.icon,r.providers.icons)])})})])],!1)),eventOrder:Go(uT,{mousedown:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"]}),sandboxBehaviours:Q([N.config({mode:"special",onLeft:e,onRight:e})]),lazySink:r.getSink,toggleClass:n+"--active",parts:{menu:W0(!1,t.columns,t.presets)},fetch:function(e){return lC.nu(V(t.fetch,e))}}))).asSpec()},lT=function(e){return d(e)},fT=function(e){return"separator"===e.type},dT=function(e){return rn(e,"getSubmenuItems")},mT={type:"separator"},gT=function(e,n){e=At(e,function(e,t){return lT(t)?""===t?e:"|"===t?0<e.length&&!fT(e[e.length-1])?e.concat([mT]):e:rn(n,t.toLowerCase())?e.concat([n[t.toLowerCase()]]):e:e.concat([t])},[]);return 0<e.length&&fT(e[e.length-1])&&e.pop(),e},pT=function(e,t){var n=e.getSubmenuItems(),n=bT(n,t);return{item:e,menus:Go(n.menus,Hi(e.value,n.items)),expansions:Go(n.expansions,Hi(e.value,e.value))}},hT=function(e,t){return dT(e)?pT(e,t):{item:e,menus:{},expansions:{}}},vT=function(e){var t;return fT(e)?e:(t=C(e,"value").getOrThunk(function(){return O("generated-menu-item")}),Go({value:t},e))},bT=function(e,n){e=gT(d(e)?e.split(" "):e,n);return _t(e,function(e,t){t=vT(t),t=hT(t,n);return{menus:Go(e.menus,t.menus),items:[t.item].concat(e.items),expansions:Go(e.expansions,t.expansions)}},{menus:{},expansions:{},items:[]})},yT=function(e,n,r,t){var o,i=O("primary-menu"),e=bT(e,r.shared.providers.menuItems());return 0===e.items.length?X.none():(t=s2(i,e.items,n,r,t),o=Xt(e.menus,function(e,t){return s2(t,e,n,r,!1)}),o=Go(o,Hi(i,t)),X.from(Gh.tieredData(i,o,e.expansions)))},wT=function(n){return{isDisabled:function(){return te.isDisabled(n)},setDisabled:function(e){return te.set(n,e)},setActive:function(e){var t=n.element;e?(mc(t,"tox-tbtn--enabled"),k(t,"aria-pressed",!0)):(pc(t,"tox-tbtn--enabled"),$r(t,"aria-pressed"))},isActive:function(){return hc(n.element,"tox-tbtn--enabled")}}},xT=function(n,e,r,t){return sT({text:n.text,icon:n.icon,tooltip:n.tooltip,role:t,fetch:function(e,t){n.fetch(function(e){t(yT(e,b0.CLOSE_ON_EXECUTE,r,!1))})},onSetup:n.onSetup,getApi:wT,columns:1,presets:"normal",classes:[],dropdownBehaviours:[V2.config({})]},e,r.shared)},CT=function(t,o,i){return function(e){e(x(t,function(e){var t,n,r=e.text.fold(function(){return{}},function(e){return{text:e}});return A(A({type:e.type,active:!1},r),{onAction:function(e){var t=!e.isActive();e.setActive(t),n.storage.set(t),i.shared.getSink().each(function(e){o().getOpt(e).each(function(e){kl(e.element),J(e,Y2,{name:n.name,value:n.storage.get()})})})},onSetup:(t=n=e,function(e){e.setActive(t.storage.get())})})}))}},ST=function(e,t,n,r,o,i){void 0===n&&(n=[]);t=t.fold(function(){return{}},function(e){return{action:e}}),n=A({buttonBehaviours:Q([dy.button(function(){return e.disabled||i.isDisabled()}),fy(),V2.config({}),re("button press",[Ju("click"),Ju("mousedown")])].concat(n)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]}},t),t=Go(n,{dom:r});return Go(t,{components:o})},kT=function(e,t,n,r){void 0===r&&(r=[]);var o={tag:"button",classes:["tox-tbtn"],attributes:e.tooltip.map(function(e){return{"aria-label":n.translate(e),title:n.translate(e)}}).getOr({})},i=e.icon.map(function(e){return tT(e,n.icons)}),i=by([i]);return ST(e,t,r,o,i,n)},TT=function(e,t,n,r){void 0===r&&(r=[]);e=kT(e,X.some(t),n,r);return dv.sketch(e)},OT=function(e,t,n,r,o){void 0===r&&(r=[]),void 0===o&&(o=[]);var i=n.translate(e.text),u=e.icon?e.icon.map(function(e){return tT(e,n.icons)}):X.none(),a=u.isSome()?by([u]):[],c=u.isSome()?{}:{innerHtml:i},u=ae(ae(ae(ae([],e.primary||e.borderless?["tox-button"]:["tox-button","tox-button--secondary"],!0),u.isSome()?["tox-button--icon"]:[],!0),e.borderless?["tox-button--naked"]:[],!0),o,!0),o=A(A({tag:"button",classes:u},c),{attributes:{title:i}});return ST(e,t,r,o,a,n)},ET=function(e,t,n,r,o){void 0===r&&(r=[]),void 0===o&&(o=[]);e=OT(e,X.some(t),n,r,o);return dv.sketch(e)},_T=function(t,n){return function(e){"custom"===n?J(e,Y2,{name:t,value:{}}):"submit"===n?Y(e,J2):"cancel"===n?Y(e,X2):console.error("Unknown button type: ",n)}},AT=function(e,t){return"menu"===t},DT=function(e,t){return"custom"===t||"cancel"===t||"submit"===t},MT=function(t,e,n){var r,o,i;return AT(t,e)?(o=A(A({},o=t),{onSetup:function(e){return e.setDisabled(t.disabled),G},fetch:CT(o.items,function(){return r},n)}),(r=ie(xT(o,"tox-tbtn",n,X.none()))).asSpec()):DT(t,e)?(o=_T(t.name,e),i=A(A({},t),{borderless:!1}),ET(i,o,n.shared.providers,[])):void console.error("Unknown footer button type: ",e)},yh=K([s("field1Name","field1"),s("field2Name","field2"),jc("onLockedChange"),Fc(["lockClass"]),s("locked",!1),mp.field("coupledFieldBehaviours",[y,ee])]),Kf=K([hx("field1","field2"),hx("field2","field1"),Ap({factory:dv,schema:[i("dom")],name:"lock",overrides:function(e){return{buttonBehaviours:Q([g.config({selected:e.locked,toggleClass:e.markers.lockClass,aria:{mode:"pressed"}})])}}})]),NT=Gd({name:"FormCoupledInputs",configFields:yh(),partFields:Kf(),factory:function(n,e,t,r){return{uid:n.uid,dom:n.dom,components:e,behaviours:mp.augment(n.coupledFieldBehaviours,[y.config({find:X.some}),ee.config({store:{mode:"manual",getValue:function(e){var e=Ud(e,n,["field1","field2"]),t={};return t[n.field1Name]=ee.getValue(e.field1()),t[n.field2Name]=ee.getValue(e.field2()),t},setValue:function(e,t){e=Ud(e,n,["field1","field2"]);on(t,n.field1Name)&&ee.setValue(e.field1(),t[n.field1Name]),on(t,n.field2Name)&&ee.setValue(e.field2(),t[n.field2Name])}}})]),apis:{getField1:function(e){return Pp(e,n,"field1")},getField2:function(e){return Pp(e,n,"field2")},getLock:function(e){return Pp(e,n,"lock")}}}},apis:{getField1:function(e,t){return e.getField1(t)},getField2:function(e,t){return e.getField2(t)},getLock:function(e,t){return e.getLock(t)}}}),RT=function(e){var t,n=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(e);return null!==n?(t=parseFloat(n[1]),n=n[2],M.value({value:t,unit:n})):M.error(e)},zT=function(e,t){function n(e){return rn(r,e)}var r={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1};return e.unit===t?X.some(e.value):n(e.unit)&&n(t)?r[e.unit]===r[t]?X.some(e.value):X.some(e.value/r[e.unit]*r[t]):X.none()},BT=function(e){return X.none()},PT=function(t,n){return function(e){return zT(e,n).map(function(e){return{value:e*t,unit:n}})}},IT=function(r,t){function e(e){return S1(e,{tag:"span",classes:["tox-icon","tox-lock-icon__"+e]},t.icons)}function n(e){return{dom:{tag:"div",classes:["tox-form__group"]},components:e}}function o(n){return E.parts.field({factory:rC,inputClasses:["tox-textfield"],inputBehaviours:Q([te.config({disabled:function(){return r.disabled||t.isDisabled()}}),fy(),V2.config({}),re("size-input-events",[Z(fu(),function(e,t){J(e,a,{isField1:n})}),Z(hu(),function(e,t){J(e,G2,{name:r.name})})])]),selectOnFocus:!1})}function i(e){return{dom:{tag:"label",classes:["tox-label"],innerHtml:t.translate(e)}}}var u=BT,a=O("ratio-event"),c=NT.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{title:t.translate(r.label.getOr("Constrain proportions"))}},components:[e("lock"),e("unlock")],buttonBehaviours:Q([te.config({disabled:function(){return r.disabled||t.isDisabled()}}),fy(),V2.config({})])}),s=NT.parts.field1(n([E.parts.label(i("Width")),o(!0)])),l=NT.parts.field2(n([E.parts.label(i("Height")),o(!1)]));return NT.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[s,l,n([i("&nbsp;"),c])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:function(e,t,n){RT(ee.getValue(e)).each(function(e){u(e).each(function(e){ee.setValue(t,vx(e))})})},coupledFieldBehaviours:Q([te.config({disabled:function(){return r.disabled||t.isDisabled()},onDisabled:function(e){NT.getField1(e).bind(E.getField).each(te.disable),NT.getField2(e).bind(E.getField).each(te.disable),NT.getLock(e).each(te.disable)},onEnabled:function(e){NT.getField1(e).bind(E.getField).each(te.enable),NT.getField2(e).bind(E.getField).each(te.enable),NT.getLock(e).each(te.enable)}}),fy(),re("size-input-events2",[Z(a,function(e,t){var t=t.event.isField1,n=t?NT.getField1(e):NT.getField2(e),t=t?NT.getField2(e):NT.getField1(e),e=n.map(ee.getValue).getOr(""),n=t.map(ee.getValue).getOr("");u=bx(e,n)})])])})},LT={undo:K(O("undo")),redo:K(O("redo")),zoom:K(O("zoom")),back:K(O("back")),apply:K(O("apply")),swap:K(O("swap")),transform:K(O("transform")),tempTransform:K(O("temp-transform")),transformApply:K(O("transform-apply"))},_p=K("save-state"),bh=K("disable"),Pf=K("enable"),FT={formActionEvent:Y2,saveState:_p,disable:bh,enable:Pf},HT=tinymce.util.Tools.resolve("tinymce.geom.Rect"),VT=tinymce.util.Tools.resolve("tinymce.util.Observable"),jT=tinymce.util.Tools.resolve("tinymce.util.VK"),UT=function(e){var t=Math.max,n=e.documentElement,e=e.body,r=t(n.scrollWidth,e.scrollWidth),o=t(n.clientWidth,e.clientWidth),i=t(n.offsetWidth,e.offsetWidth),u=t(n.scrollHeight,e.scrollHeight),a=t(n.clientHeight,e.clientHeight);return{width:r<i?o:r,height:u<t(n.offsetHeight,e.offsetHeight)?a:u}},WT=function(e){return z(e.changedTouches)},$T=function(e){if(WT(e))for(var t="screenX screenY pageX pageY clientX clientY".split(" "),n=0;n<t.length;n++)e[t[n]]=e.changedTouches[0][t[n]]};function qT(e,r){function t(e){var t=e.raw,n=UT(l),e=($T(t),e.prevent(),u=t.button,a=t.screenX,c=t.screenY,Yr(m,"cursor"));i=S.fromTag("div",l),Kr(i,{position:"absolute",top:"0",left:"0",width:n.width+"px",height:n.height+"px","z-index":"2147483647",opacity:"0.0001",cursor:e}),ko(Fr(d),i),s.push(nf(d,"mousemove",o),nf(d,"touchmove",o),nf(d,"mouseup",g),nf(d,"touchend",g)),r.start(t)}function o(e){var t=e.raw;if($T(t),t.button!==u)return g(e);t.deltaX=t.screenX-a,t.deltaY=t.screenY-c,e.prevent(),r.drag(t)}var i,u,a,c,n=[],s=[],l=null!=(f=r.document)?f:document,f=null!=(f=r.root)?f:l,d=S.fromDom(l),m=S.fromDom(f.getElementById(null!=(f=r.handle)?f:e)),g=function(e){$T(e.raw),w(s,function(e){return e.unbind()}),s=[],_o(i),r.stop&&r.stop(e.raw)};return n.push(nf(m,"mousedown",t),nf(m,"touchstart",t)),{destroy:function(){w(s.concat(n),function(e){return e.unbind()}),s=[],n=[],z(i)&&_o(i)}}}function GT(t){function u(e,s){c.getOpt(e).each(function(e){var n=f.get(),r=go(e.element),o=oo(e.element),i=s.dom.naturalWidth*n,u=s.dom.naturalHeight*n,a=Math.max(0,r/2-i/2),c=Math.max(0,o/2-u/2),t={left:a.toString()+"px",top:c.toString()+"px",width:i.toString()+"px",height:u.toString()+"px",position:"absolute"};Kr(s,t),l.getOpt(e).each(function(e){Kr(e.element,t)}),d.run(function(e){var t=m.get();e.setRect({x:t.x*n+a,y:t.y*n+c,w:t.w*n,h:t.h*n}),e.setClampRect({x:a,y:c,w:i,h:u}),e.setViewPortRect({x:0,y:0,w:r,h:o})})})}function n(e,t){var i=S.fromTag("img");return k(i,"src",t),YT(i.dom).then(function(){e.getSystem().isConnected()&&c.getOpt(e).map(function(e){var o,t=Nc({element:i}),t=(ne.replaceAt(e,1,X.some(t)),a.get()),n={x:0,y:0,w:i.dom.naturalWidth,h:i.dom.naturalHeight},r=(a.set(n),HT.inflate(n,-20,-20));m.set(r),t.w===n.w&&t.h===n.h||(o=i,c.getOpt(e).each(function(e){var t=go(e.element),e=oo(e.element),n=o.dom.naturalWidth,r=o.dom.naturalHeight,t=Math.min(t/n,e/r);1<=t?f.set(1):f.set(t)})),u(e,i)})})}var l=ie({dom:{tag:"div",classes:["tox-image-tools__image-bg"],attributes:{role:"presentation"}}}),f=T(1),d=Ql(),m=T({x:0,y:0,w:1,h:1}),a=T({x:0,y:0,w:1,h:1}),e=L2.sketch({dom:{tag:"div",classes:["tox-image-tools__image"]},components:[l.asSpec(),{dom:{tag:"img",attributes:{src:t}}},{dom:{tag:"div"},behaviours:Q([re("image-panel-crop-events",[na(function(e){c.getOpt(e).each(function(e){e=e.element.dom,e=XT.create({x:10,y:10,w:100,h:100},{x:0,y:0,w:200,h:200},{x:0,y:0,w:200,h:200},e,G);e.toggleVisibility(!1),e.on("updateRect",function(e){var e=e.rect,t=f.get(),e={x:Math.round(e.x/t),y:Math.round(e.y/t),w:Math.round(e.w/t),h:Math.round(e.h/t)};m.set(e)}),d.set(e)})}),ra(function(){d.clear()})])])}],containerBehaviours:Q([ne.config({}),re("image-panel-events",[na(function(e){n(e,t)})])])}),c=ie(e);return{memContainer:c,updateSrc:n,zoom:function(e,t){var n=f.get(),t=0<t?Math.min(2,n+.1):Math.max(.1,n-.1);f.set(t),c.getOpt(e).each(function(e){var t=e.components()[1].element;u(e,t)})},showCrop:function(){d.run(function(e){e.toggleVisibility(!0)})},hideCrop:function(){d.run(function(e){e.toggleVisibility(!1)})},getRect:function(){return m.get()},getMeasurements:function(){var e=a.get();return{width:e.w,height:e.h}}}}var KT=0,XT={create:function(u,t,a,e,n){function r(e,t){return{x:t.x+e.x,y:t.y+e.y,w:t.w,h:t.h}}function c(e,t,n,r){var o=t.x+n*e.deltaX,i=t.y+r*e.deltaY,n=Math.max(20,t.w+n*e.deltaW),t=Math.max(20,t.h+r*e.deltaH),r=(u=HT.clamp({x:o,y:i,w:n,h:t},a,"move"===e.name),p(a,u));y.fire("updateRect",{rect:r}),h(r)}function o(n){function e(e,t){hs(d,"#"+f+"-"+e).each(function(e){Kr(e,{left:t.x+"px",top:t.y+"px",width:Math.max(0,t.w)+"px",height:Math.max(0,t.h)+"px"})})}w(m,function(t){hs(d,"#"+f+"-"+t.name).each(function(e){Kr(e,{left:n.w*t.xMul+n.x+"px",top:n.h*t.yMul+n.y+"px"})})}),e("top",{x:t.x,y:t.y,w:t.w,h:n.y-t.y}),e("right",{x:n.x+n.w,y:n.y,w:t.w-n.x-n.w+t.x,h:n.h}),e("bottom",{x:t.x,y:n.y+n.h,w:t.w,h:t.h-n.y-n.h+t.y}),e("left",{x:t.x,y:n.y,w:n.x-t.x,h:n.h}),e("move",n)}function i(e){o(u=e)}var s,l=[],f="tox-crid-"+KT++,d=S.fromDom(e),m=[{name:"move",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:0,deltaH:0,label:"Crop Mask"},{name:"nw",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:-1,deltaH:-1,label:"Top Left Crop Handle"},{name:"ne",xMul:1,yMul:0,deltaX:0,deltaY:1,deltaW:1,deltaH:-1,label:"Top Right Crop Handle"},{name:"sw",xMul:0,yMul:1,deltaX:1,deltaY:0,deltaW:-1,deltaH:1,label:"Bottom Left Crop Handle"},{name:"se",xMul:1,yMul:1,deltaX:0,deltaY:0,deltaW:1,deltaH:1,label:"Bottom Right Crop Handle"}],g=["top","right","bottom","left"],p=function(e,t){return{x:t.x-e.x,y:t.y-e.y,w:t.w,h:t.h}},h=function(e){i(r(a,e))};function v(e){k(e.target,"aria-grabbed","focus"===e.raw.type?"true":"false")}var b=S.fromTag("div"),y=(Vr(b,{id:f,class:"tox-croprect-container",role:"grid","aria-dropeffect":"execute"}),ko(d,b),w(g,function(n){hs(d,"#"+f).each(function(e){var t=S.fromTag("div");Vr(t,{id:f+"-"+n,class:"tox-croprect-block","data-mce-bogus":"all"}),D(t,"display","none"),ko(e,t)})}),w(m,function(n){hs(d,"#"+f).each(function(e){var t=S.fromTag("div");Vr(t,{id:f+"-"+n.name,"aria-label":n.label,"aria-grabbed":"false","data-mce-bogus":"all",role:"gridcell",tabindex:"-1",title:n.label}),vc(t,["tox-croprect-handle","tox-croprect-handle-"+n.name]),D(t,"display","none"),ko(e,t)})}),s=x(m,function(t){var n;return qT(f,{document:e.ownerDocument,root:Nr(d).dom,handle:f+"-"+t.name,start:function(){n=u},drag:function(e){c(t,n,e.deltaX,e.deltaY)}})}),o(u),l.push(nf(d,"focusin",v),nf(d,"focusout",v),nf(d,"keydown",function(t){function e(e,t,n,r,o){e.stopPropagation(),e.preventDefault(),c(i,n,r,o)}var i;w(m,function(e){if(jr(t.target,"id")===f+"-"+e.name)return i=e,!1});switch(t.raw.keyCode){case jT.LEFT:e(t,0,u,-10,0);break;case jT.RIGHT:e(t,0,u,10,0);break;case jT.UP:e(t,0,u,0,-10);break;case jT.DOWN:e(t,0,u,0,10);break;case jT.ENTER:case jT.SPACEBAR:t.prevent(),n()}})),A(A({},VT),{toggleVisibility:function(e){var t=ae(ae([],x(m,function(e){return"#"+f+"-"+e.name}),!0),x(g,function(e){return"#"+f+"-"+e}),!0).join(","),t=Sg(d,t);w(t,e?function(e){return to(e,"display")}:function(e){return D(e,"display","none")})},setClampRect:function(e){a=e,o(u)},setRect:i,getInnerRect:function(){return p(a,u)},setInnerRect:h,setViewPortRect:function(e){t=e,o(u)},destroy:function(){w(s,function(e){return e.destroy()}),s=[],w(l,function(e){return e.unbind()}),l=[]}}));return y}},YT=function(n){return new q1(function(e){var t=function(){n.removeEventListener("load",t),e(n)};n.complete?e(n):n.addEventListener("load",t)})},JT=function(e,t,n,r,o){return TT({name:e,icon:X.some(t),disabled:n,tooltip:X.some(e),primary:!1,borderless:!1},r,o)},ZT=function(e,t){t?te.enable(e):te.disable(e)};function QT(e){var n,r,t=T(e),o=ef(),i=(r=-1,{data:n=[],add:function(e){var t=n.splice(++r);return n.push(e),{state:e,removed:t}},undo:function(){if(0<r)return n[--r]},redo:function(){if(a())return n[++r]},canUndo:u,canRedo:a});function u(){return 0<r}function a(){return-1!==r&&r<n.length-1}function c(e){t.set(e)}function s(e){return{blob:e,url:URL.createObjectURL(e)}}function l(){o.on(d),o.clear()}function f(e){var e=s(e),t=(c(e),i.add(e).removed);return $S.each(t,d),e.url}i.add(e);var d=function(e){URL.revokeObjectURL(e.url)};return{getBlobState:function(){return t.get()},setBlobState:c,addBlobState:f,getTempState:function(){return o.get().getOrThunk(t.get)},updateTempState:function(e){e=s(e);return l(),o.set(e),e.url},addTempState:function(e){e=s(e);return o.set(e),e.url},applyTempState:function(t){return o.get().fold(G,function(e){f(e.blob),t()})},destroyTempState:l,undo:function(){var e=i.undo();return c(e),e.url},redo:function(){var e=i.redo();return c(e),e.url},getHistoryStates:function(){return{undoEnabled:i.canUndo(),redoEnabled:i.canRedo()}}}}function eO(e,t){function o(e,t,n){var r=u.getBlobState().blob;d(e,r,t,function(e){return u.updateTempState(e)},n)}var r,i,u=QT(e.currentState),a=function(e){var t=u.getHistoryStates();p.updateButtonUndoStates(e,t.undoEnabled,t.redoEnabled),J(e,FT.formActionEvent,{name:FT.saveState(),value:t.undoEnabled})},c=function(e){return e.toBlob()},s=function(e){J(e,FT.formActionEvent,{name:FT.disable(),value:{}})},l=function(e){n.getApplyButton(e).each(function(e){te.enable(e)}),J(e,FT.formActionEvent,{name:FT.enable(),value:{}})},f=function(e,t){return s(e),g.updateSrc(e,t)},d=function(t,e,n,r,o){s(t),bk(e).then(n).then(c).then(r).then(function(e){return f(t,e)}).then(function(){a(t),o(),l(t)}).catch(function(e){console.log(e),t.getSystem().isConnected()&&l(t)})},m=function(e){var t=u.getBlobState().url;return u.destroyTempState(),a(e),t},g=GT(e.currentState.url),p=(r=ie(JT("Undo","undo",!0,function(e){J(e,LT.undo(),{direction:1})},e=t)),i=ie(JT("Redo","redo",!0,function(e){J(e,LT.redo(),{direction:1})},e)),{container:L2.sketch({dom:{tag:"div",classes:["tox-image-tools__toolbar","tox-image-tools__sidebar"]},components:[r.asSpec(),i.asSpec(),JT("Zoom in","zoom-in",!1,function(e){J(e,LT.zoom(),{direction:1})},e),JT("Zoom out","zoom-out",!1,function(e){J(e,LT.zoom(),{direction:-1})},e)]}),updateButtonUndoStates:function(e,t,n){r.getOpt(e).each(function(e){ZT(e,t)}),i.getOpt(e).each(function(e){ZT(e,n)})}}),n=yx(g,t);return{dom:{tag:"div",attributes:{role:"presentation"}},components:[n.memContainer.asSpec(),g.memContainer.asSpec(),p.container],behaviours:Q([ee.config({store:{mode:"manual",getValue:function(){return u.getBlobState()}}}),re("image-tools-events",[Z(LT.undo(),function(t,e){var n=u.undo();f(t,n).then(function(e){l(t),a(t)})}),Z(LT.redo(),function(t,e){var n=u.redo();f(t,n).then(function(e){l(t),a(t)})}),Z(LT.zoom(),function(e,t){t=t.event.direction;g.zoom(e,t)}),Z(LT.back(),function(e,t){var n;e=m(n=e),f(n,e).then(function(e){l(n)}),(0,t.event.swap)(),g.hideCrop()}),Z(LT.apply(),function(e,t){u.applyTempState(function(){m(e),(0,t.event.swap)()})}),Z(LT.transform(),function(e,t){return o(e,t.event.transform,G)}),Z(LT.tempTransform(),function(e,t){var n;e=e,t=t.event.transform,n=u.getTempState().blob,d(e,n,t,function(e){return u.addTempState(e)},G)}),Z(LT.transformApply(),function(e,t){var n,r;n=e,e=t.event.transform,t=t.event.swap,r=u.getBlobState().blob,d(n,r,e,function(e){e=u.addBlobState(e);return m(n),e},t)}),Z(LT.swap(),function(t,e){p.updateButtonUndoStates(t,!1,!1);var n=e.event.transform,r=e.event.swap;n.fold(function(){r()},function(e){o(t,e,r)})})]),VS.self()])}}function tO(e,t){function n(e){return{dom:{tag:"tr"},components:x(e,o)}}var r,o=function(e){return{dom:{tag:"td",innerHtml:t.translate(e)}}};return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[(r=e.header,{dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:x(r,function(e){return{dom:{tag:"th",innerHtml:t.translate(e)}}})}]}),(r=e.cells,{dom:{tag:"tbody"},components:x(r,n)})],behaviours:Q([V2.config({}),oe.config({})])}}function nO(n,t){var e=n.label.map(function(e){return q2(e,t)}),r=[te.config({disabled:function(){return n.disabled||t.isDisabled()}}),fy(),N.config({mode:"execution",useEnter:!0!==n.multiline,useControlEnter:!0===n.multiline,execute:function(e){return Y(e,J2),X.some(!0)}}),re("textfield-change",[Z(pu(),function(e,t){J(e,G2,{name:n.name})}),Z(ku(),function(e,t){J(e,G2,{name:n.name})})]),V2.config({})],o=n.validation.map(function(n){return dC.config({getRoot:function(e){return Cr(e.element)},invalidClass:"tox-invalid",validator:{validate:function(e){var e=ee.getValue(e),t=n.validator(e);return lC.pure(!0===t?M.value(e):M.error(t))},validateOnLoad:n.validateOnLoad}})}).toArray(),i=n.placeholder.fold(K({}),function(e){return{placeholder:t.translate(e)}}),u=n.inputMode.fold(K({}),function(e){return{inputmode:e}}),i=A(A({},i),u),u=E.parts.field({tag:!0===n.multiline?"textarea":"input",inputAttributes:i,inputClasses:[n.classname],inputBehaviours:Q(Rt([r,o])),selectOnFocus:!1,factory:rC}),i=(n.flex?["tox-form__group--stretched"]:[]).concat(n.maximized?["tox-form-group--maximize"]:[]),r=[te.config({disabled:function(){return n.disabled||t.isDisabled()},onDisabled:function(e){E.getField(e).each(te.disable)},onEnabled:function(e){E.getField(e).each(te.enable)}}),fy()];return U2(e,u,i,r)}function rO(e){var t=T(null);return za({readState:function(){return{timer:null!==t.get()?"set":"unset"}},setTimer:function(e){t.set(e)},cancel:function(){var e=t.get();null!==e&&e.cancel()}})}function oO(e,t,n){n=ee.getValue(n),ee.setValue(t,n),iO(t)}function iO(e){JO(e,function(e,t){return e.setSelectionRange(t.length,t.length)})}function uO(e,t,r){var o,n;return e.selectsOver&&(n=ee.getValue(t),o=e.getDisplayText(n),n=ee.getValue(r),0===e.getDisplayText(n).indexOf(o))?X.some(function(){var n;oO(0,t,r),n=o.length,JO(t,function(e,t){return e.setSelectionRange(n,t.length)})}):X.none()}function aO(e){return e4(lC.nu(e))}function cO(i,t,u){function o(e){e=ee.getValue(e),u.addToHistory(e.value,i.filetype)}var e,n,r,a=t.shared.providers,c=E.parts.field({factory:QO,dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":p4,type:"url"},minChars:0,responseTime:0,fetch:function(e){n=i.filetype,e=e,r=u,e=ee.getValue(e),o=void 0!==e.meta.text?e.meta.text:e.value;var n,r,o,e=r.getLinkInformation().fold(function(){return[]},function(e){var t=g4(o,d4(r.getHistory(n)));return"file"===n?m4([t,g4(o,c4(e)),g4(o,Rt([l4(e),s4(e),f4(e)]))]):t}),e=yT(e,b0.BUBBLE_TO_SANDBOX,t,!1);return lC.pure(e)},getHotspot:function(e){return g.getOpt(e)},onSetValue:function(e,t){e.hasConfigured(dC)&&dC.run(e).get(G)},typeaheadBehaviours:Q(Rt([u.getValidationHandler().map(function(r){return dC.config({getRoot:function(e){return Cr(e.element)},invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:function(e,t){l.getOpt(e).each(function(e){k(e.element,"title",a.translate(t))})}},validator:{validate:function(e){var t=ee.getValue(e);return t4(function(n){r({type:i.filetype,url:t.value},function(e){var t;"invalid"===e.status?(t=M.error(e.message),n(t)):(t=M.value(e.message),n(t))})})},validateOnLoad:!1}})}).toArray(),[te.config({disabled:function(){return i.disabled||a.isDisabled()}}),V2.config({}),re("urlinput-events",Rt(["file"===i.filetype?[Z(pu(),function(e){J(e,G2,{name:i.name})})]:[],[Z(hu(),function(e){J(e,G2,{name:i.name}),o(e)}),Z(ku(),function(e){J(e,G2,{name:i.name}),o(e)})]]))]])),eventOrder:((c={})[pu()]=["streaming","urlinput-events","invalidating"],c),model:{getDisplayText:function(e){return e.value},selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:t.shared.getSink,parts:{menu:W0(!1,1,"normal")},onExecute:function(e,t,n){J(t,J2,{})},onItemExecute:function(e,t,n,r){o(e),J(e,G2,{name:i.name})}}),s=i.label.map(function(e){return q2(e,a)}),l=ie((e="invalid",n=X.some(p4),S1(f=void 0===(f="warning")?e:f,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+e],attributes:A({title:a.translate(r=void 0===r?e:r),"aria-live":"polite"},n.fold(function(){return{}},function(e){return{id:e}}))},a.icons))),f=ie({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[l.asSpec()]}),d=u.getUrlPicker(i.filetype),m=O("browser.url.event"),g=ie({dom:{tag:"div",classes:["tox-control-wrap"]},components:[c,f.asSpec()],behaviours:Q([te.config({disabled:function(){return i.disabled||a.isDisabled()}})])}),p=ie(ET({name:i.name,icon:X.some("browse"),text:i.label.getOr(""),disabled:i.disabled,primary:!1,borderless:!0},function(e){return Y(e,m)},a,[],["tox-browse-url"]));return E.sketch({dom:$2([]),components:s.toArray().concat([{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:Rt([[g.asSpec()],d.map(function(){return p.asSpec()}).toArray()])}]),fieldBehaviours:Q([te.config({disabled:function(){return i.disabled||a.isDisabled()},onDisabled:function(e){E.getField(e).each(te.disable),p.getOpt(e).each(te.disable)},onEnabled:function(e){E.getField(e).each(te.enable),p.getOpt(e).each(te.enable)}}),fy(),re("url-input-events",[Z(m,function(r){y.getCurrent(r).each(function(t){var e=ee.getValue(t),n=A({fieldname:i.name},e);d.each(function(e){e(n).get(function(e){ee.setValue(t,e),J(r,G2,{name:i.name})})})})})])])})}function sO(n,t){function e(e){return e.element.dom.click(),X.some(!0)}function r(e){return S1("checked"===e?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+e]},t.icons)}var o=ee.config({store:{mode:"manual",getValue:function(e){return e.element.dom.checked},setValue:function(e,t){e.element.dom.checked=t}}}),o=E.parts.field({factory:{sketch:v},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:Q([VS.self(),te.config({disabled:function(){return n.disabled||t.isDisabled()}}),V2.config({}),oe.config({}),o,N.config({mode:"special",onEnter:e,onSpace:e,stopSpaceKeyup:!0}),re("checkbox-events",[Z(hu(),function(e,t){J(e,G2,{name:n.name})})])])}),i=E.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"],innerHtml:t.translate(n.label)},behaviours:Q([kC.config({})])}),u=ie({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[r("checked"),r("unchecked")]});return E.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[o,u.asSpec(),i],fieldBehaviours:Q([te.config({disabled:function(){return n.disabled||t.isDisabled()},disableClass:"tox-checkbox--disabled",onDisabled:function(e){E.getField(e).each(te.disable)},onEnabled:function(e){E.getField(e).each(te.enable)}}),fy()])})}function lO(o){return function(t,n,r){return C(n,"name").fold(function(){return o(n,r)},function(e){return t.field(e,o(n,r))})}}function fO(n){return function(e){if(z(t=e)&&1===t.nodeType){if(e.contentEditable===n)return!0;if(e.getAttribute("data-mce-contenteditable")===n)return!0}var t;return!1}}function dO(e){return 0<q4(e.title).length}function mO(t,n,r){var o=n.lazyViewport(t);r.isDocked()&&Q3(t,n,r,o),X3(t,o,r).each(function(e){e.fold(function(){return J3(t,n,r)},function(e){return Z3(t,n,r,e)},function(e){Q3(t,n,r,o,!0),Z3(t,n,r,e)})})}function gO(e,t,n){var r,o,i,u;n.isDocked()&&(o=t,i=n,u=(r=e).element,i.setDocked(!1),Y3(r,i).each(function(e){e.fold(function(){return J3(r,o,i)},function(e){return Z3(r,o,i,e)},G)}),i.setVisible(!0),o.contextual.each(function(e){bc(u,[e.fadeInClass,e.fadeOutClass,e.transitionClass]),e.onShow(r)}),eE(r,o,i))}function pO(e,t){return xt(tE.getModes(e),t)}function hO(e,t){t?(pc(e,rE.fadeOutClass),vc(e,[rE.transitionClass,rE.fadeInClass])):(pc(e,rE.fadeInClass),vc(e,[rE.fadeOutClass,rE.transitionClass]))}function vO(e,t){e=S.fromDom(e.getContainer()),t?(mc(e,oE),pc(e,iE)):(mc(e,iE),pc(e,oE))}function bO(o,e){function n(t){r().each(function(e){return t(e.element)})}function t(e){o.inline||uE(e),vO(o,tE.isDocked(e)),e.getSystem().broadcastOn([ip()],{}),r().each(function(e){return e.getSystem().broadcastOn([ip()],{})})}var i=ef(),r=e.getSink,u=o.inline?[]:[Cl.config({channels:((u={})[nE()]={onReceive:uE},u)})];return ae([oe.config({}),tE.config({contextual:A({lazyContext:function(e){var t=io(e.element),n=o.inline?o.getContentAreaContainer():o.getContainer(),n=Vo(S.fromDom(n)),r=n.height-t,e=n.y+(pO(e,"top")?0:t);return X.some(Ho(n.x,e,n.width,r))},onShow:function(){n(function(e){return hO(e,!0)})},onShown:function(o){n(function(e){return bc(e,[rE.transitionClass,rE.fadeInClass])}),i.get().each(function(e){var t,n,r;t=o.element,r=br(n=e),Ol(r).filter(function(e){return!gr(n,e)}).filter(function(e){return gr(e,S.fromDom(r.dom.body))||vr(t,e)}).each(function(){return kl(n)}),i.clear()})},onHide:function(e){var t;e=e.element,t=r,El(e).orThunk(function(){return t().toOptional().bind(function(e){return El(e.element)})}).fold(i.clear,i.set),n(function(e){return hO(e,!1)})},onHidden:function(){n(function(e){return bc(e,[rE.transitionClass])})}},rE),lazyViewport:function(e){var t=Uo(),n=o.getParam("toolbar_sticky_offset",0,"number"),r=t.y+(pO(e,"top")?n:0),e=t.height-(pO(e,"bottom")?n:0);return Ho(t.x,r,t.width,e)},modes:[e.header.getDockingMode()],onDocked:t,onUndocked:t})],u,!0)}function yO(e){return Si("menubutton",sE,e)}function wO(e,t,n){var r=gE(t,e.element);("0px"===r?bE:yE)(e,t,n,X.some(r))}function xO(e,t,n){var r=dE(e,t),o=hc(r,t.shrinkingClass),i=gE(t,e.element),u=(vE(e,t),gE(t,e.element));(o?function(){D(e.element,mE(t),i),no(e.element)}:function(){hE(e,t)})(),pc(r,t.shrinkingClass),mc(r,t.growingClass),vE(e,t),D(e.element,mE(t),u),n.setExpanded(),t.onStartGrow(e)}function CO(e,t,n){return e=dE(e,t),!0===hc(e,t.growingClass)}function SO(e,t,n){return e=dE(e,t),!0===hc(e,t.shrinkingClass)}function kO(e){return"<alloy.field."+e+">"}function TO(o,e){function t(e){return Fp(o)}function n(n,r){return function(e,t){return Pp(e,o,t).map(function(e){return n(e,t)}).getOr(r)}}function r(e,t){return"true"!==jr(e.element,"aria-hidden")}var i,u=n(r,!1),a=n(function(e,t){var n;r(e)&&(n=e.element,D(n,"display","none"),k(n,"aria-hidden","true"),J(e,Vu(),{name:t,visible:!1}))}),c=function(t,e){w(e,function(e){return i(t,e)})},s=n(function(e,t){var n;r(e)||(n=e.element,to(n,"display"),$r(n,"aria-hidden"),J(e,Vu(),{name:t,visible:!0}))}),u={getSlotNames:t,getSlot:function(e,t){return Pp(e,o,t)},isShowing:u,hideSlot:i=a,hideAllSlots:function(e){return c(e,t())},showSlot:s};return{uid:o.uid,dom:o.dom,components:e,behaviours:fp(o.slotBehaviours),apis:u}}function OO(e){return y.getCurrent(e).bind(function(e){return wE.isGrowing(e)||wE.hasGrown(e)?y.getCurrent(e).bind(function(t){return Mt(CE.getSlotNames(t),function(e){return CE.isShowing(t,e)})}):X.none()})}function EO(e,t){e=mC.getCoupled(e,"toolbarSandbox"),c.isOpen(e)?c.close(e):c.open(e,t.toolbar())}function _O(e,n,r){YE(e,r,function(t){r.overflowGroups.set(t),n.getOpt(e).each(function(e){e_.setGroups(e,n_(t))})})}function AO(t,n){Pp(t,n,"overflow-button").bind(function(){return Pp(t,n,"overflow")}).each(function(e){o_(t,n),wE.toggleGrow(e)})}function DO(r){var e=s_(r),t=r_.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return r_.sketch(A(A({},e),{lazySink:r.getSink,getOverflowBounds:function(){var e=r.moreDrawerData.lazyHeader().element,t=jo(e),e=wr(e),n=jo(e),e=Math.max(e.dom.scrollHeight,n.height);return Ho(t.x+4,n.y,t.width-8,e)},parts:A(A({},e.parts),{overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:r.attributes}}}),components:[t],markers:{overflowToggledClass:"tox-tbtn--enabled"}}))}function MO(e){var t=i_.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),n=i_.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),e=s_(e);return i_.sketch(A(A({},e),{components:[t,n],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:function(e){e.getSystem().broadcastOn([nE()],{type:"opened"})},onClosed:function(e){e.getSystem().broadcastOn([nE()],{type:"closed"})}}))}function NO(t,n){var r=A(A({},m_),n.menus),o=0<qt(n.menus).length,e=void 0===n.menubar||!0===n.menubar?p_(d_):p_(!1===n.menubar?"":n.menubar),e=Et(e,function(e){var t=rn(m_,e);return o?t||C(n.menus,e).exists(function(e){return rn(e,"items")}):t}),e=x(e,function(e){e=r[e];return g_({title:e.title,items:p_(e.items)},n,t)});return Et(e,function(e){return 0<e.getItems().length&&Ct(e.getItems(),function(e){return"separator"!==e.type})})}function RO(e){function t(){e._skinLoaded=!0,lw(e)}return function(){e.initialized?t():e.on("init",t)}}function zO(e,t){o=(u=t).getParam("skin"),i=u.getParam("skin_url"),!1!==o&&(o=o||"oxide",i=i?u.documentBaseURI.toAbsolute(i):kb.baseURL+"/skins/ui/"+o);var n,r,o,i,u=i;u&&t.contentCSS.push(u+(e?"/content.inline":"/content")+".min.css"),!1===t.getParam("skin")==!1&&d(u)?q1.all([h_(t,u+"/skin.min.css",t.ui.styleSheetLoader),(o=t,i=u,zr(S.fromDom(o.getElement()))?h_(o,i+"/skin.shadowdom.min.css",Sb.DOM.styleSheetLoader):q1.resolve())]).then(RO(t),(n=t,r="Skin could not be loaded",function(){return fw(n,{message:r})})):RO(t)()}function BO(e,t,n){var r=(o=k_(e,t,n)).items,o=o.getStyleItems,e=w_(e,"NodeChange",function(e){e=e.getComponent();n.updateText(e)});return sT({text:n.icon.isSome()?X.none():n.text,icon:n.icon,tooltip:X.from(n.tooltip),role:X.none(),fetch:r.getFetch(t,o),onSetup:e,getApi:function(e){return{getComponent:K(e)}},columns:1,presets:"normal",classes:n.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[]},"tox-tbtn",t.shared)}function PO(t,e){function n(n){return{isDisabled:function(){return te.isDisabled(n)},setDisabled:function(e){return te.set(n,e)},setIconFill:function(e,t){hs(n.element,'svg path[id="'+e+'"], rect[id="'+e+'"]').each(function(e){k(e,"fill",t)})},setIconStroke:function(e,t){hs(n.element,'svg path[id="'+e+'"], rect[id="'+e+'"]').each(function(e){k(e,"stroke",t)})},setActive:function(t){k(n.element,"aria-pressed",t),hs(n.element,"span").each(function(e){n.getSystem().getByDom(e).each(function(e){return g.set(e,t)})})},isActive:function(){return hs(n.element,"span").exists(function(e){return n.getSystem().getByDom(e).exists(g.isOn)})}}}var r,o,i,u=O("channel-update-split-dropdown-display"),a=T(G),c={getApi:n,onSetup:t.onSetup};return Q_.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:A({"aria-pressed":!1},nA(t.tooltip,e.providers))},onExecute:function(e){t.onAction(n(e))},onItemExecute:function(e,t,n){},splitDropdownBehaviours:Q([dy.splitButton(e.providers.isDisabled),fy(),re("split-dropdown-events",[Z(rA,oe.focus),gy(c,a),py(c,a)]),kC.config({})]),eventOrder:((c={})[Iu()]=["alloy.base.behaviour","split-dropdown-events"],c),toggleClass:"tox-tbtn--enabled",lazySink:e.getSink,fetch:(r=n,o=t,i=e.providers,function(t){return lC.nu(function(e){return o.fetch(e)}).map(function(e){return X.from(l2(Go(Kx(O("menu-value"),e,function(e){o.onItemAction(r(t),e)},o.columns,o.presets,b0.CLOSE_ON_EXECUTE,o.select.getOr(W),i),{movement:Yx(o.columns,o.presets),menuBehaviours:vb.unnamedEvents("auto"!==o.columns?[]:[na(function(n,e){hb(n,4,L0(o.presets)).each(function(e){var t=e.numRows,e=e.numColumns;N.setGridSize(n,t,e)})})])})))})}),parts:{menu:W0(!1,t.columns,t.presets)},components:[Q_.parts.button(oA(t.icon,t.text,X.none(),X.some(u),X.some([g.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),e.providers)),Q_.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:l1("chevron-down",e.providers.icons)},buttonBehaviours:Q([dy.splitButton(e.providers.isDisabled),fy(),x1()])}),Q_.parts["aria-descriptor"]({text:e.providers.translate("To open the popup, press Shift+Enter")})]})}function IO(r,o){return function(e,t,n){e=r(e).mapError(function(e){return Oi(e)}).getOrDie();return o(e,t,n)}}function LO(t,e,n,r){var e=e.outerContainer,o=n.toolbar,i=n.buttons;I(o,d)?(o=o.map(function(e){e={toolbar:e,buttons:i,allowToolbarGroups:n.allowToolbarGroups};return pA(t,e,{backstage:r},X.none())}),f_.setToolbars(e,o)):f_.setToolbar(e,pA(t,n,{backstage:r},X.none()))}function FO(n,e){function t(){var e=c.get();e.left===u.innerWidth&&e.top===u.innerHeight||(c.set(uo(u.innerWidth,u.innerHeight)),mw(n))}function r(){var e=n.getDoc().documentElement,t=s.get();t.left===e.offsetWidth&&t.top===e.offsetHeight||(s.set(uo(e.offsetWidth,e.offsetHeight)),mw(n))}function o(e){return gw(n,e)}var i=n.dom,u=n.getWin(),a=n.getDoc().documentElement,c=T(uo(u.innerWidth,u.innerHeight)),s=T(uo(a.offsetWidth,a.offsetHeight)),l=(i.bind(u,"resize",t),i.bind(u,"scroll",o),rf(S.fromDom(n.getBody()),"load",r)),f=e.uiMothership.element;n.on("hide",function(){D(f,"display","none")}),n.on("show",function(){to(f,"display")}),n.on("NodeChange",r),n.on("remove",function(){l.unbind(),i.unbind(u,"resize",t),i.unbind(u,"scroll",o),u=null})}function HO(o,i,e,t,r){function n(e){var t,n;void 0===e&&(e=!0),!s&&l&&h()&&(t=d.getDockingMode(),(n=b(r.get()))!==t)&&(y(n),e)&&S(!0)}var u=e.uiMothership,a=e.outerContainer,c=Sb.DOM,s=Gb(o),l=Yb(o),f=Db(o).or(SA(o)),d=t.shared.header,m=d.isPositionedAtTop,g=(t=Hb(o))===D1.sliding||t===D1.floating,p=T(!1),h=function(){return p.get()&&!o.removed},v=function(e){return g?e.fold(K(0),function(e){return 1<e.components().length?oo(e.components()[1].element):0}):0},b=function(e){switch(jb(o)){case M1.auto:var t,n=f_.getToolbar(a),n=v(n),n=oo(e.element)-n,r=Vo(i);return!(r.y>n)&&(t=wr(i),t=Math.max(t.dom.scrollHeight,oo(t)),r.bottom<t-n||Uo().bottom<r.bottom-n)?"bottom":"top";case M1.bottom:return"bottom";default:M1.top;return"top"}},y=function(e){var t=r.get(),e=(tE.setModes(t,[e]),d.setDockingMode(e),m()?us.TopToBottom:us.BottomToTop);k(t.element,Rf,e)},w=function(){var e=f.getOrThunk(function(){var e=bA(Yr(Lr(),"margin-left")).getOr(0);return go(Lr())-so(i).left+e});D(r.get().element,"max-width",e+"px")},x=function(){var e=f_.getToolbar(a),e=v(e),t=Vo(i),e=m()?Math.max(t.y-oo(r.get().element)+e,0):t.bottom;Kr(a.element,{position:"absolute",top:Math.round(e)+"px",left:Math.round(t.x)+"px"})},C=function(){u.broadcastOn([ip()],{})},S=function(e){var t;void 0===e&&(e=!1),h()&&(s||w(),g&&f_.refreshToolbar(a),s||x(),l&&(t=r.get(),e?tE.reset(t):tE.refresh(t)),C())};return{isVisible:h,isPositionedAtTop:m,show:function(){p.set(!0),D(a.element,"display","flex"),c.addClass(o.getBody(),"mce-edit-focus"),to(u.element,"display"),n(!1),S()},hide:function(){p.set(!1),e.outerContainer&&(D(a.element,"display","none"),c.removeClass(o.getBody(),"mce-edit-focus")),D(u.element,"display","none")},update:S,updateMode:n,repositionPopups:C}}function VO(i,u,a,e){function t(e){var t=(n=TA(u,a.isPositionedAtTop())).pos,n=n.bounds,r=(o=c.get()).pos,o=o.bounds,o=n.height!==o.height||n.width!==o.width;c.set({pos:t,bounds:n}),o&&mw(i,e),a.isVisible()&&(r!==t?a.update(!0):o&&(a.updateMode(),a.repositionPopups()))}var c=T(TA(u,a.isPositionedAtTop())),n=(e||(i.on("activate",a.show),i.on("deactivate",a.hide)),i.on("SkinLoaded ResizeWindow",function(){return a.update(!0)}),i.on("NodeChange keydown",function(e){fv.requestAnimationFrame(function(){return t(e)})}),i.on("ScrollWindow",function(){return a.updateMode()}),Zl());n.set(rf(S.fromDom(i.getBody()),"load",t)),i.on("remove",function(){n.clear()})}function jO(e,t){var n=e.label.fold(function(){return{}},function(e){return{"aria-label":e}}),n=ie(rC.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:e.initValue(),inputAttributes:n,selectOnFocus:!0,inputBehaviours:Q([N.config({mode:"special",onEnter:function(e){return r.findPrimary(e).map(function(e){return qu(e),!0})},onLeft:function(e,t){return t.cut(),X.none()},onRight:function(e,t){return t.cut(),X.none()}})])})),r=zA(n,e.commands,t);return[{title:X.none(),items:[n.asSpec()]},{title:X.none(),items:r.asSpecs()}]}var UO,WO,$O=function(e){return!rn(e,"items")},qO="data-value",GO=function(t,n,e,r){return x(e,function(e){return $O(e)?{type:"togglemenuitem",text:e.text,value:e.value,active:e.value===r,onAction:function(){ee.setValue(t,e.value),J(t,G2,{name:n}),oe.focus(t)}}:{type:"nestedmenuitem",text:e.text,getSubmenuItems:function(){return GO(t,n,e.items,r)}}})},KO=function(e,t){return $t(e,function(e){return $O(e)?fn(e.value===t,e):KO(e.items,t)})},XO=Kp({name:"HtmlSelect",configFields:[i("options"),Rd("selectBehaviours",[oe,ee]),s("selectClasses",[]),s("selectAttributes",{}),Mi("data")],factory:function(n,e){var t=x(n.options,function(e){return{dom:{tag:"option",value:e.value,innerHtml:e.text}}}),r=n.data.map(function(e){return Hi("initialValue",e)}).getOr({});return{uid:n.uid,dom:{tag:"select",classes:n.selectClasses,attributes:n.selectAttributes},components:t,behaviours:dp(n.selectBehaviours,[oe.config({}),ee.config({store:A({mode:"manual",getValue:function(e){return wc(e.element)},setValue:function(e,t){Mt(n.options,function(e){return e.value===t}).isSome()&&xc(e.element,t)}},r)})])}}}),Op=Object.freeze({__proto__:null,events:function(e,t){var n=e.stream.streams.setup(e,t);return Yu([Z(e.event,n),ra(function(){return t.cancel()})].concat(e.cancelEvent.map(function(e){return[Z(e,function(){return t.cancel()})]}).getOr([])))}}),Ch=Object.freeze({__proto__:null,throttle:rO,init:function(e){return e.stream.streams.state(e)}}),ma=[Ai("stream",$e("mode",{throttle:[i("delay"),s("stopEvent",!0),Ns("streams",{setup:function(e,t){var n=e.stream,r=N1(e.onStream,n.delay);return t.setTimer(r),function(e,t){r.throttle(e,t),n.stopEvent&&t.stop()}},state:rO})]})),s("event","input"),Mi("cancelEvent"),jc("onStream")],YO=yl({fields:ma,name:"streaming",active:Op,state:Ch}),JO=function(e,t){var e=e.element,n=wc(e),r=e.dom;"number"!==jr(e,"type")&&t(r,n)},ZO=K("alloy.typeahead.itemexecute"),ha=K([Mi("lazySink"),i("fetch"),s("minChars",5),s("responseTime",1e3),e("onOpen"),s("getHotspot",X.some),s("getAnchorOverrides",K({})),s("layouts",X.none()),s("eventOrder",{}),at("model",{},[s("getDisplayText",function(e){return void 0!==e.meta&&void 0!==e.meta.text?e.meta.text:e.value}),s("selectsOver",!0),s("populateFromBrowse",!0)]),e("onSetValue"),Vc("onExecute"),e("onItemExecute"),s("inputClasses",[]),s("inputAttributes",{}),s("inputStyles",{}),s("matchWidth",!0),s("useMinWidth",!1),s("dismissOnBlur",!0),Fc(["openClass"]),Mi("initialData"),Rd("typeaheadBehaviours",[oe,ee,YO,N,g,mC]),_i("previewing",function(){return T(!0)})].concat(tu()).concat(Vw())),Eh=K([gl({schema:[Lc()],name:"menu",overrides:function(r){return{fakeFocus:!0,onHighlight:function(t,n){r.previewing.get()?t.getSystem().getByUid(r.uid).each(function(e){uO(r.model,e,n).fold(function(){return Yp.dehighlight(t,n)},function(e){return e()})}):t.getSystem().getByUid(r.uid).each(function(e){r.model.populateFromBrowse&&oO(r.model,e,n)}),r.previewing.set(!1)},onExecute:function(e,t){return e.getSystem().getByUid(r.uid).toOptional().map(function(e){return J(e,ZO(),{item:t}),!0})},onHover:function(e,t){r.previewing.set(!1),e.getSystem().getByUid(r.uid).each(function(e){r.model.populateFromBrowse&&oO(r.model,e,t)})}}}})]),QO=Gd({name:"Typeahead",configFields:ha(),partFields:Eh(),factory:function(o,e,t,i){function n(e,t,n){o.previewing.set(!1);var r=mC.getCoupled(e,"sandbox");c.isOpen(r)?y.getCurrent(r).each(function(e){Yp.getHighlighted(e).fold(function(){n(e)},function(){Xu(r,e.element,"keydown",t)})}):bC(o,u(e),e,r,i,function(e){y.getCurrent(e).each(n)},xx.HighlightFirst).get(G)}function u(n){return function(e){return e.map(function(e){var t=nn(e.menus),t=zt(t,function(e){return Et(e.items,function(e){return"item"===e.type})});return ee.getState(n).update(x(t,function(e){return e.data})),e})}}var r=nC(o),a=[oe.config({}),ee.config({onSetValue:o.onSetValue,store:A({mode:"dataset",getDataKey:function(e){return wc(e.element)},getFallbackEntry:function(e){return{value:e,meta:{}}},setValue:function(e,t){xc(e.element,o.model.getDisplayText(t))}},o.initialData.map(function(e){return Hi("initialValue",e)}).getOr({}))}),YO.config({stream:{mode:"throttle",delay:o.responseTime,stopEvent:!1},onStream:function(e,t){var n,r=mC.getCoupled(e,"sandbox");oe.isFocused(e)&&wc(e.element).length>=o.minChars&&(n=y.getCurrent(r).bind(function(e){return Yp.getHighlighted(e).map(ee.getValue)}),o.previewing.set(!0),bC(o,u(e),e,r,i,function(e){y.getCurrent(r).each(function(e){n.fold(function(){o.model.selectsOver&&Yp.highlightFirst(e)},function(t){Yp.highlightBy(e,function(e){return ee.getValue(e).value===t.value}),Yp.getHighlighted(e).orThunk(function(){return Yp.highlightFirst(e),X.none()})})})},xx.HighlightFirst).get(G))},cancelEvent:Mu()}),N.config({mode:"special",onDown:function(e,t){return n(e,t,Yp.highlightFirst),X.some(!0)},onEscape:function(e){e=mC.getCoupled(e,"sandbox");return c.isOpen(e)?(c.close(e),X.some(!0)):X.none()},onUp:function(e,t){return n(e,t,Yp.highlightLast),X.some(!0)},onEnter:function(t){var e,n=mC.getCoupled(t,"sandbox"),r=c.isOpen(n);return r&&!o.previewing.get()?y.getCurrent(n).bind(function(e){return Yp.getHighlighted(e)}).map(function(e){return J(t,ZO(),{item:e}),!0}):(e=ee.getValue(t),Y(t,Mu()),o.onExecute(n,t,e),r&&c.close(n),X.some(!0))}}),g.config({toggleClass:o.markers.openClass,aria:{mode:"expanded"}}),mC.config({others:{sandbox:function(e){return Fw(o,e,{onOpen:function(){return g.on(e)},onClose:function(){return g.off(e)}})}}}),re("typeaheadevents",[ia(function(e){Lw(o,u(e),e,i,G,xx.HighlightFirst).get(G)}),Z(ZO(),function(e,t){var n=mC.getCoupled(e,"sandbox");oO(o.model,e,t.event.item),Y(e,Mu()),o.onItemExecute(e,n,t.event.item,ee.getValue(e)),c.close(n),iO(e)})].concat(o.dismissOnBlur?[Z(Su(),function(e){e=mC.getCoupled(e,"sandbox");El(e.element).isNone()&&c.close(e)})]:[]))];return{uid:o.uid,dom:Mw(Go(o,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:A(A({},r),dp(o.typeaheadBehaviours,a)),eventOrder:o.eventOrder}}}),e4=function(i){return A(A({},i),{toCached:function(){return e4(i.toCached())},bindFuture:function(t){return e4(i.bind(function(e){return e.fold(function(e){return lC.pure(M.error(e))},function(e){return t(e)})}))},bindResult:function(t){return e4(i.map(function(e){return e.bind(t)}))},mapResult:function(t){return e4(i.map(function(e){return e.map(t)}))},mapError:function(t){return e4(i.map(function(e){return e.mapError(t)}))},foldResult:function(t,n){return i.map(function(e){return e.fold(t,n)})},withTimeout:function(e,o){return e4(lC.nu(function(t){var n=!1,r=setTimeout(function(){n=!0,t(M.error(o()))},e);i.get(function(e){n||(clearTimeout(r),t(e))})}))}})},t4=aO,n4={type:"separator"},r4=function(e){return{type:"menuitem",value:e.url,text:e.title,meta:{attach:e.attach},onAction:G}},o4=function(e,t){return{type:"menuitem",value:t,text:e,meta:{attach:void 0},onAction:G}},i4=function(e){return x(e,r4)},u4=function(t,e){return Et(e,function(e){return e.type===t})},a4=function(e,t){return i4(u4(e,t))},c4=function(e){return a4("header",e.targets)},s4=function(e){return a4("anchor",e.targets)},l4=function(e){return X.from(e.anchorTop).map(function(e){return o4("<top>",e)}).toArray()},f4=function(e){return X.from(e.anchorBottom).map(function(e){return o4("<bottom>",e)}).toArray()},d4=function(e){return x(e,function(e){return o4(e,e)})},m4=function(e){return At(e,function(e,t){return 0===e.length||0===t.length?e.concat(t):e.concat(n4,t)},[])},g4=function(e,t){var n=e.toLowerCase();return Et(t,function(e){var t=(void 0!==e.meta&&void 0!==e.meta.text?e.meta:e).text;return vn(t.toLowerCase(),n)||vn(e.value.toLowerCase(),n)})},p4=O("aria-invalid"),h4={bar:lO(function(e,t){return t=t.shared,{dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:x(e.items,t.interpreter)}}),collection:lO(function(e,t){return Dw(e,t.shared.providers)}),alertbanner:lO(function(e,t){return n=e,e=t.shared.providers,L2.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in","tox-notification--"+n.level]},components:[{dom:{tag:"div",classes:["tox-notification__icon"]},components:[dv.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:l1(n.icon,e.icons),attributes:{title:e.translate(n.iconTooltip)}},action:function(e){J(e,Y2,{name:"alert-banner",value:n.url})},buttonBehaviours:Q([x1()])})]},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:e.translate(n.text)}}]});var n}),input:lO(function(e,t){return e=e,t=t.shared.providers,nO({name:e.name,multiline:!1,label:e.label,inputMode:e.inputMode,placeholder:e.placeholder,flex:!1,disabled:e.disabled,classname:"tox-textfield",validation:X.none(),maximized:e.maximized},t)}),textarea:lO(function(e,t){return e=e,t=t.shared.providers,nO({name:e.name,multiline:!0,label:e.label,inputMode:X.none(),placeholder:e.placeholder,flex:!0,disabled:e.disabled,classname:"tox-textarea",validation:X.none(),maximized:e.maximized},t)}),label:lO(function(e,t){return e=e,t=t.shared,n={dom:{tag:"label",innerHtml:t.providers.translate(e.label),classes:["tox-label"]}},e=x(e.items,t.interpreter),{dom:{tag:"div",classes:["tox-form__group"]},components:[n].concat(e),behaviours:Q([VS.self(),ne.config({}),GS.domHtml(X.none()),N.config({mode:"acyclic"})])};var n}),iframe:(UO=function(e,t){return mx(e,t.shared.providers)},function(e,t,n){t=Go(t,{source:"dynamic"});return lO(UO)(e,t,n)}),button:lO(function(e,t){return px(e,t.shared.providers)}),checkbox:lO(function(e,t){return sO(e,t.shared.providers)}),colorinput:lO(function(e,t){return jw(e,t.shared,t.colorinput)}),colorpicker:lO(function(e){function t(e){return"tox-"+e}var n=cx(sx,t),r=ie(n.sketch({dom:{tag:"div",classes:["tox-color-picker-container"],attributes:{role:"presentation"}},onValidHex:function(e){J(e,Y2,{name:"hex-valid",value:!0})},onInvalidHex:function(e){J(e,Y2,{name:"hex-valid",value:!1})}}));return{dom:{tag:"div"},components:[r.asSpec()],behaviours:Q([ee.config({store:{mode:"manual",getValue:function(e){e=r.get(e);return y.getCurrent(e).bind(function(e){return ee.getValue(e).hex}).map(function(e){return"#"+e}).getOr("")},setValue:function(e,t){var n=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/.exec(t),t=r.get(e);y.getCurrent(t).fold(function(){console.log("Can not find form")},function(e){ee.setValue(e,{hex:X.from(n[1]).getOr("")}),zS.getField(e,"hex").each(function(e){Y(e,pu())})})}}}),VS.self()])}}),dropzone:lO(function(e,t){return dx(e,t.shared.providers)}),grid:lO(function(e,t){return t=t.shared,{dom:{tag:"div",classes:["tox-form__grid","tox-form__grid--"+e.columns+"col"]},components:x(e.items,t.interpreter)}}),listbox:lO(function(e,t){return n=e,o=(r=t).shared.providers,i=jt(n.items).filter($O),e=n.label.map(function(e){return q2(e,o)}),t={dom:{tag:"div",classes:["tox-listboxfield"]},components:[E.parts.field({dom:{},factory:{sketch:function(e){return sT({uid:e.uid,text:i.map(function(e){return e.text}),icon:X.none(),tooltip:n.label,role:X.none(),fetch:function(e,t){e=GO(e,n.name,n.items,ee.getValue(e));t(yT(e,b0.CLOSE_ON_EXECUTE,r,!1))},onSetup:K(G),getApi:K({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[V2.config({}),ee.config({store:{mode:"manual",initialValue:i.map(function(e){return e.value}).getOr(""),getValue:function(e){return jr(e.element,qO)},setValue:function(t,e){KO(n.items,e).each(function(e){k(t.element,qO,e.value),J(t,aT,{text:e.text})})}}})]},"tox-listbox",r.shared)}}})]},E.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Rt([e.toArray(),[t]]),fieldBehaviours:Q([te.config({disabled:K(n.disabled),onDisabled:function(e){E.getField(e).each(te.disable)},onEnabled:function(e){E.getField(e).each(te.enable)}})])});var n,r,o,i}),selectbox:lO(function(e,t){return n=e,r=t.shared.providers,e=x(n.items,function(e){return{text:r.translate(e.text),value:e.value}}),t=n.label.map(function(e){return q2(e,r)}),e=E.parts.field({dom:{},selectAttributes:{size:n.size},options:e,factory:XO,selectBehaviours:Q([te.config({disabled:function(){return n.disabled||r.isDisabled()}}),V2.config({}),re("selectbox-change",[Z(hu(),function(e,t){J(e,G2,{name:n.name})})])])}),o=1<n.size?X.none():X.some(S1("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},r.icons)),e={dom:{tag:"div",classes:["tox-selectfield"]},components:Rt([[e],o.toArray()])},E.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Rt([t.toArray(),[e]]),fieldBehaviours:Q([te.config({disabled:function(){return n.disabled||r.isDisabled()},onDisabled:function(e){E.getField(e).each(te.disable)},onEnabled:function(e){E.getField(e).each(te.enable)}}),fy()])});var n,r,o}),sizeinput:lO(function(e,t){return IT(e,t.shared.providers)}),urlinput:lO(function(e,t){return cO(e,t,t.urlinput)}),customeditor:lO(function(n){var r=ef(),t=ie({dom:{tag:n.tag}}),o=ef();return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:Q([re("custom-editor-events",[na(function(e){t.getOpt(e).each(function(t){(rn(n,"init")?n.init(t.element.dom):WS.load(n.scriptId,n.scriptUrl).then(function(e){return e(t.element.dom,n.settings)})).then(function(t){o.on(function(e){t.setValue(e)}),o.clear(),r.set(t)})})})]),ee.config({store:{mode:"manual",getValue:function(){return r.get().fold(function(){return o.get().getOr("")},function(e){return e.getValue()})},setValue:function(e,t){r.get().fold(function(){o.set(t)},function(e){return e.setValue(t)})}}}),VS.self()]),components:[t.asSpec()]}}),htmlpanel:lO(function(e){return"presentation"===e.presets?L2.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:e.html}}):L2.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:e.html,attributes:{role:"document"}},containerBehaviours:Q([V2.config({}),oe.config({})])})}),imagetools:lO(function(e,t){return eO(e,t.shared.providers)}),table:lO(function(e,t){return tO(e,t.shared.providers)}),panel:lO(function(e,t){return{dom:{tag:"div",classes:e.classes},components:x(e.items,t.shared.interpreter)}})},v4={field:function(e,t){return t}},b4=function(t,e,n){var r=Go(n,{shared:{interpreter:function(e){return y4(t,e,r)}}});return y4(t,e,r)},y4=function(t,n,r){return C(h4,n.type).fold(function(){return console.error('Unknown factory type "'+n.type+'", defaulting to container: ',n),n},function(e){return e(t,n,r)})},w4=function(e,t){return y4(v4,e,t)},x4={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},C4=function(e,t,n){var r={maxHeightFunction:Sf()};return function(){return n()?{type:"node",root:Rr(e()),node:X.from(e()),bubble:_f(12,12,x4),layouts:{onRtl:function(){return[nv]},onLtr:function(){return[tv]}},overrides:r}:{type:"hotspot",hotspot:t(),bubble:_f(-12,12,x4),layouts:{onRtl:function(){return[nl]},onLtr:function(){return[rl]}},overrides:r}}},S4=function(e,t,n){return function(){return n()?{type:"node",root:Rr(e()),node:X.from(e()),layouts:{onRtl:function(){return[rv]},onLtr:function(){return[rv]}}}:{type:"hotspot",hotspot:t(),layouts:{onRtl:function(){return[al]},onLtr:function(){return[al]}}}}},k4=function(t,e){return function(){return{type:"selection",root:e(),getSelection:function(){var e=t.selection.getRng();return X.some(Jf.range(S.fromDom(e.startContainer),e.startOffset,S.fromDom(e.endContainer),e.endOffset))}}}},T4=function(t){return function(e){return{type:"node",root:t(),node:e}}},O4=function(e,t,n){function r(){return S.fromDom(e.getBody())}function o(){return S.fromDom(e.getContentAreaContainer())}function i(){return u||!n()}var u=Gb(e);return{inlineDialog:C4(o,t,i),banner:S4(o,t,i),cursor:k4(e,r),node:T4(r)}},E4=function(n){return function(e,t){qx(n)(e,t)}},_4=function(e){return function(){return Ex(e)}},A4=function(e){return function(){return Ax(e)}},D4=function(e){return function(){return Lx(e)}},M4=function(e){return{colorPicker:E4(e),hasCustomColors:_4(e),getColors:A4(e),getColorCols:D4(e)}},N4=function(e){return function(){return Jb(e)}},R4=function(e){return{isDraggableModal:N4(e)}},z4=function(e){var t=T(Ub(e)?"bottom":"top");return{isPositionedAtTop:function(){return"top"===t.get()},getDockingMode:t.get,setDockingMode:t.set}},B4=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],P4=function(e){return rn(e,"items")},I4=function(e){return rn(e,"block")},L4=function(e){return rn(e,"inline")},F4=function(e){return rn(e,"selector")},H4=function(e){return At(e,function(e,t){var n;return P4(t)?(n=H4(t.items),{customFormats:e.customFormats.concat(n.customFormats),formats:e.formats.concat([{title:t.title,items:n.formats}])}):L4(t)||I4(t)||F4(t)?(n="custom-"+(d(t.name)?t.name:t.title.toLowerCase()),{customFormats:e.customFormats.concat([{name:n,format:t}]),formats:e.formats.concat([{title:t.title,format:n,icon:t.icon}])}):A(A({},e),{formats:e.formats.concat(t)})},{customFormats:[],formats:[]})},V4=function(t,e){function n(e){w(e,function(e){t.formatter.has(e.name)||t.formatter.register(e.name,e.format)})}var r=H4(e);return t.formatter?n(r.customFormats):t.on("init",function(){n(r.customFormats)}),r.formats},j4=function(t){return Nb(t).map(function(e){e=V4(t,e);return Rb(t)?B4.concat(e):e}).getOr(B4)},U4=function(e,t,n){t={type:"formatter",isSelected:t(e.format),getStylePreview:n(e.format)};return Go(e,t)},W4=function(r,e,o,i){function u(e){return x(e,function(e){var t,n=qt(e);return on(e,"items")?(t=u(e.items),Go(Go(e,{type:"submenu"}),{getStyleItems:K(t)})):on(e,"format")?U4(e,o,i):1===n.length&&xt(n,"title")?Go(e,{type:"separator"}):(n=d((t=e).name)?t.name:O(t.title),e={type:"formatter",format:e="custom-"+n,isSelected:o(e),getStylePreview:i(e)},t=Go(t,e),r.formatter.register(n,t),t)})}return u(e)},$4=function(n){function r(e){return function(){return n.formatter.match(e)}}function o(t){return function(){var e=n.formatter.get(t);return void 0!==e?X.some({tag:0<e.length&&(e[0].inline||e[0].block)||"div",styles:n.dom.parseStyle(n.formatter.getCssText(t))}):X.none()}}function i(e){var t=e.items;return void 0!==t&&0<t.length?zt(t,i):[e.format]}var u=T([]),a=T([]),c=T([]),s=T([]),l=T(!1);n.on("PreInit",function(e){var t=j4(n),t=W4(n,t,r,o);u.set(t),a.set(zt(t,i))}),n.on("addStyleModifications",function(e){var t=W4(n,e.items,r,o);c.set(t),l.set(e.replace),s.set(zt(t,i))});return{getData:function(){var e=l.get()?[]:u.get(),t=c.get();return e.concat(t)},getFlattenedKeys:function(){var e=l.get()?[]:a.get(),t=s.get();return e.concat(t)}}},q4=$S.trim,G4=fO("true"),K4=fO("false"),X4=function(e,t,n,r,o){return{type:e,title:t,url:n,level:r,attach:o}},Y4=function(e){for(;e=e.parentNode;){var t=e.contentEditable;if(t&&"inherit"!==t)return G4(e)}return!1},J4=function(e,t){return x(Sg(S.fromDom(t),e),function(e){return e.dom})},Z4=function(e){return e.innerText||e.textContent},Q4=function(e){return e.id||O("h")},e3=function(e){return e&&"A"===e.nodeName&&void 0!==(e.id||e.name)},t3=function(e){return e3(e)&&r3(e)},n3=function(e){return e&&/^(H[1-6])$/.test(e.nodeName)},r3=function(e){return Y4(e)&&!K4(e)},o3=function(e){return n3(e)&&r3(e)},i3=function(e){return n3(e)?parseInt(e.nodeName.substr(1),10):0},u3=function(e){var t=Q4(e);return X4("header",Z4(e),"#"+t,i3(e),function(){e.id=t})},a3=function(e){var t=e.id||e.name,e=Z4(e);return X4("anchor",e||"#"+t,"#"+t,0,G)},c3={find:function(e){e=J4("h1,h2,h3,h4,h5,h6,a:not([href])",e);return Et(x(Et(e,o3),u3).concat(x(Et(e,t3),a3)),dO)}},s3="tinymce-url-history",l3=5,f3=function(e){return d(e)&&/^https?/.test(e)},d3=function(e){return p(e)&&e.length<=l3&&Bt(e,f3)},m3=function(e){return a(e)&&tn(e,function(e){return!d3(e)}).isNone()},g3=function(){var e,t=xw.getItem(s3);if(null===t)return{};try{e=JSON.parse(t)}catch(e){if(e instanceof SyntaxError)return console.log("Local storage "+s3+" was not valid JSON",e),{};throw e}return m3(e)?e:(console.log("Local storage "+s3+" was not valid format",e),{})},p3=function(e){if(!m3(e))throw new Error("Bad format for history:\n"+JSON.stringify(e));xw.setItem(s3,JSON.stringify(e))},h3=function(e){var t=g3();return C(t,e).getOr([])},v3=function(t,e){var n,r;f3(t)&&(n=g3(),r=C(n,e).getOr([]),r=Et(r,function(e){return e!==t}),n[e]=[t].concat(r).slice(0,l3),p3(n))},b3=function(e){return!!e},y3=function(e){return Xt($S.makeMap(e,/[, ]/),b3)},w3=function(e){return X.from(ty(e)).filter(B)},x3=function(e){var t=X.some(ny(e)).filter(b3),n=X.some(ry(e)).filter(b3),r=t.or(n).map(y3);return w3(e).fold(W,function(e){return r.fold($,function(e){return 0<qt(e).length&&e})})},C3=function(e,t){var n=x3(e);return b(n)?n?w3(e):X.none():n[t]?w3(e):X.none()},S3=function(o,i){return C3(o,i).map(function(r){return function(t){return lC.nu(function(n){var e=A({filetype:i,fieldname:t.fieldname},X.from(t.meta).getOr({}));r.call(o,function(e,t){if(!d(e))throw new Error("Expected value to be string");if(void 0!==t&&!a(t))throw new Error("Expected meta to be a object");n({value:e,meta:t})},t.value,e)})}})},k3=function(e){return X.from(e).filter(d).getOrUndefined()},T3=function(e){return oy(e)?X.none():X.some({targets:c3.find(e.getBody()),anchorTop:k3(iy(e)),anchorBottom:k3(uy(e))})},O3=function(e){return X.from(ay(e))},E3=function(t){return{getHistory:h3,addToHistory:v3,getLinkInformation:function(){return T3(t)},getValidationHandler:function(){return O3(t)},getUrlPicker:function(e){return S3(t,e)}}},_3=function(e,t,n){var r=T(!1),o=z4(t),i={shared:{providers:{icons:function(){return t.ui.registry.getAll().icons},menuItems:function(){return t.ui.registry.getAll().menuItems},translate:m1.translate,isDisabled:function(){return t.mode.isReadOnly()||t.ui.isDisabled()},getSetting:t.getParam.bind(t)},interpreter:function(e){return w4(e,i)},anchors:O4(t,n,o.isPositionedAtTop),header:o,getSink:function(){return M.value(e)}},urlinput:E3(t),styleselect:$4(t),colorinput:M4(t),dialog:R4(t),isContextMenuOpen:function(){return r.get()},setContextMenuState:function(e){return r.set(e)}};return i},A3=function(t,e,r){function n(t,n){w([e,r],function(e){e.broadcastEvent(t,n)})}function o(t,n){w([e,r],function(e){e.broadcastOn([t],n)})}function i(e){return o(op(),{target:e.target})}function u(e){return o(op(),{target:S.fromDom(e.target)})}function a(e){0===e.button&&o(up(),{target:S.fromDom(e.target)})}function c(){w(t.editorManager.get(),function(e){t!==e&&e.fire("DismissPopups",{relatedTarget:t})})}function s(e){return n(Bu(),of(e))}function l(e){o(ip(),{}),n(Pu(),of(e))}function f(){return o(ip(),{})}function d(e){e.state&&o(op(),{target:S.fromDom(t.getContainer())})}function m(e){o(op(),{target:S.fromDom(e.relatedTarget.getContainer())})}var g=Sl(),p=nf(g,"touchstart",i),h=nf(g,"touchmove",function(e){return n(Ru(),e)}),v=nf(g,"touchend",function(e){return n(zu(),e)}),b=nf(g,"mousedown",i),y=nf(g,"mouseup",function(e){0===e.raw.button&&o(up(),{target:e.target})});t.on("PostRender",function(){t.on("click",u),t.on("tap",u),t.on("mouseup",a),t.on("mousedown",c),t.on("ScrollWindow",s),t.on("ResizeWindow",l),t.on("ResizeEditor",f),t.on("AfterProgressState",d),t.on("DismissPopups",m)}),t.on("remove",function(){t.off("click",u),t.off("tap",u),t.off("mouseup",a),t.off("mousedown",c),t.off("ScrollWindow",s),t.off("ResizeWindow",l),t.off("ResizeEditor",f),t.off("AfterProgressState",d),t.off("DismissPopups",m),b.unbind(),p.unbind(),h.unbind(),v.unbind(),y.unbind()}),t.on("detach",function(){rp(e),rp(r),e.destroy(),r.destroy()})},D3=Tp,xh=If,Ep=K([s("shell",!1),i("makeItem"),s("setupItem",G),mp.field("listBehaviours",[ne])]),H2=Dp({name:"items",overrides:function(){return{behaviours:Q([ne.config({})])}}}),yh=K([H2]),M3=Gd({name:K("CustomList")(),configFields:Ep(),partFields:yh(),factory:function(u,e,t,n){e=u.shell?{behaviours:[ne.config({})],components:[]}:{behaviours:[],components:e};return{uid:u.uid,dom:u.dom,components:e.components,behaviours:dp(u.listBehaviours,e.behaviours),apis:{setItems:function(o,i){var e;e=o,(u.shell?X.some(e):Pp(e,u,"items")).fold(function(){throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},function(t){var e=ne.contents(t),n=i.length,r=n-e.length,r=0<r?St(r,function(){return u.makeItem()}):[],e=e.slice(n),n=(w(e,function(e){return ne.remove(t,e)}),w(r,function(e){return ne.append(t,e)}),ne.contents(t));w(n,function(e,t){u.setupItem(o,e,i[t],t)})})}}}},apis:{setItems:function(e,t,n){e.setItems(t,n)}}}),Kf=K([i("dom"),s("shell",!0),Rd("toolbarBehaviours",[ne])]),_p=K([Dp({name:"groups",overrides:function(){return{behaviours:Q([ne.config({})])}}})]),N3=Gd({name:"Toolbar",configFields:Kf(),partFields:_p(),factory:function(n,e,t,r){e=n.shell?{behaviours:[ne.config({})],components:[]}:{behaviours:[],components:e};return{uid:n.uid,dom:n.dom,components:e.components,behaviours:dp(n.toolbarBehaviours,e.behaviours),apis:{setGroups:function(e,t){e=e,(n.shell?X.some(e):Pp(e,n,"groups")).fold(function(){throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},function(e){ne.set(e,t)})}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(e,t,n){e.setGroups(t,n)}}}),bh=G,Pf=W,R3=K([]),z3=Object.freeze({__proto__:null,setup:bh,isDocked:Pf,getBehaviours:R3}),B3=function(e){return(un(Zr(e,"position"),"fixed")?X.none():Sr(e)).orThunk(function(){var t=S.fromTag("span");return Cr(e).bind(function(e){ko(e,t);e=Sr(t);return _o(t),e})})},P3=function(e){return B3(e).map(so).getOrThunk(function(){return uo(0,0)})},I3=Pi([{static:[]},{absolute:["positionCss"]},{fixed:["positionCss"]}]),L3=function(e,t){var n=e.element;mc(n,t.transitionClass),pc(n,t.fadeOutClass),mc(n,t.fadeInClass),t.onShow(e)},F3=function(e,t){var n=e.element;mc(n,t.transitionClass),pc(n,t.fadeInClass),mc(n,t.fadeOutClass),t.onHide(e)},H3=function(e,t){return e.y<t.bottom&&e.bottom>t.y},V3=function(e,t){return e.y>=t.y},j3=function(e,t){return e.bottom<=t.bottom},U3=function(e,t,n){return Bt(e,function(e){switch(e){case"bottom":return j3(t,n);case"top":return V3(t,n)}})},W3=function(t,e){return e.getInitialPos().map(function(e){return Ho(e.bounds.x,e.bounds.y,go(t),oo(t))})},$3=function(e,t,n){n.setInitialPos({style:Qr(e),position:Yr(e,"position")||"static",bounds:t})},q3=function(n,r,o){return o.getInitialPos().bind(function(e){switch(o.clearInitialPos(),e.position){case"static":return X.some(I3.static());case"absolute":var t=B3(n).map(Vo).getOrThunk(function(){return Vo(Lr())});return X.some(I3.absolute(_l("absolute",C(e.style,"left").map(function(e){return r.x-t.x}),C(e.style,"top").map(function(e){return r.y-t.y}),C(e.style,"right").map(function(e){return t.right-r.right}),C(e.style,"bottom").map(function(e){return t.bottom-r.bottom}))));default:return X.none()}})},G3=function(t,n,r){return W3(t,r).filter(function(e){return U3(r.getModes(),e,n)}).bind(function(e){return q3(t,e,r)})},K3=function(e,t,n){var r,o=Vo(e);return U3(n.getModes(),o,t)?X.none():($3(e,o,n),e=Uo(),n=o.x-e.x,r=t.y-e.y,e=e.bottom-t.bottom,o=o.y<=t.y,X.some(I3.fixed(_l("fixed",X.some(n),o?X.some(r):X.none(),X.none(),o?X.none():X.some(e)))))},X3=function(e,t,n){e=e.element;return(un(Zr(e,"position"),"fixed")?G3:K3)(e,t,n)},Y3=function(e,t){var n=e.element;return W3(n,t).bind(function(e){return q3(n,e,t)})},J3=function(t,e,n){n.setDocked(!1),w(["left","right","top","bottom","position"],function(e){return to(t.element,e)}),e.onUndocked(t)},Z3=function(e,t,n,r){var o="fixed"===r.position;n.setDocked(o),Dl(e.element,r),(o?t.onDocked:t.onUndocked)(e)},Q3=function(n,e,r,o,i){void 0===i&&(i=!1),e.contextual.each(function(t){t.lazyContext(n).each(function(e){e=H3(e,o);e!==r.isVisible()&&(r.setVisible(e),i&&!e?(vc(n.element,[t.fadeOutClass]),t.onHide(n)):(e?L3:F3)(n,t))})})},eE=function(e,t,n){e.getSystem().isConnected()&&mO(e,t,n)},ma=Object.freeze({__proto__:null,refresh:eE,reset:gO,isDocked:function(e,t,n){return n.isDocked()},getModes:function(e,t,n){return n.getModes()},setModes:function(e,t,n,r){return n.setModes(r)}}),Op=Object.freeze({__proto__:null,events:function(r,o){return Yu([ta(yu(),function(t,n){r.contextual.each(function(e){hc(t.element,e.transitionClass)&&(bc(t.element,[e.transitionClass,e.fadeInClass]),(o.isVisible()?e.onShown:e.onHidden)(t)),n.stop()})}),Z(Bu(),function(e,t){eE(e,r,o)}),Z(Pu(),function(e,t){gO(e,r,o)})])}}),Ch=[Ri("contextual",[t("fadeInClass"),t("fadeOutClass"),t("transitionClass"),Ke("lazyContext"),e("onShow"),e("onShown"),e("onHide"),e("onHidden")]),it("lazyViewport",Uo),ut("modes",["top","bottom"],vi),e("onDocked"),e("onUndocked")],tE=yl({fields:Ch,name:"docking",active:Op,apis:ma,state:Object.freeze({__proto__:null,init:function(e){var t=T(!1),n=T(!0),r=ef(),o=T(e.modes);return za({isDocked:t.get,setDocked:t.set,getInitialPos:r.get,setInitialPos:r.set,clearInitialPos:r.clear,isVisible:n.get,setVisible:n.set,getModes:o.get,setModes:o.set,readState:function(){return"docked:  "+t.get()+", visible: "+n.get()+", modes: "+o.get().join(",")}})}})}),nE=K(O("toolbar-height-change")),rE={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},oE="tox-tinymce--toolbar-sticky-on",iE="tox-tinymce--toolbar-sticky-off",uE=function(r){var o=r.element;Cr(o).each(function(e){var t,n="padding-"+tE.getModes(r)[0];tE.isDocked(r)?(t=go(e),D(o,"width",t+"px"),D(e,n,io(t=o)+(parseInt(Yr(t,"margin-top"),10)||0)+(parseInt(Yr(t,"margin-bottom"),10)||0)+"px")):(to(o,"width"),to(e,n))})},aE=Object.freeze({__proto__:null,setup:function(e,t,n){e.inline||(t.header.isPositionedAtTop()||e.on("ResizeEditor",function(){n().each(tE.reset)}),e.on("ResizeWindow ResizeEditor",function(){n().each(uE)}),e.on("SkinLoaded",function(){n().each(function(e){tE.isDocked(e)?tE.reset(e):tE.refresh(e)})}),e.on("FullscreenStateChanged",function(){n().each(tE.reset)})),e.on("AfterScrollIntoView",function(f){n().each(function(e){tE.refresh(e);var t,n,r,o,i,u,a,c,s,l,e=e.element;gh(e)&&(t=f,n=br(e=e),r=n.dom.defaultView.innerHeight,o=Ao(n),t=S.fromDom(t.elm),i=jo(t),t=oo(t),i=i.y,u=i+t,a=so(e),e=oo(e),a=a.top,c=a+e,s=Math.abs(a-o.top)<2,l=Math.abs(c-(o.top+r))<2,s&&i<c?Do(o.left,i-e,n):l&&a<u&&Do(o.left,i-r+t+e,n))})}),e.on("PostRender",function(){vO(e,!1)})},isDocked:function(e){return e().map(tE.isDocked).getOr(!1)},getBehaviours:bO}),cE=m([t("type"),Ai("items",Fe([gi([t("name"),Ye("items",vi)]),vi]))].concat(wh)),tu=[Ze("text"),Ze("tooltip"),Ze("icon"),Ke("fetch"),it("onSetup",function(){return G})],sE=m(ae([t("type")],tu,!0)),lE=m([t("type"),Ze("tooltip"),Ze("icon"),Ze("text"),Qe("select"),Ke("fetch"),it("onSetup",function(){return G}),rt("presets","normal",["normal","color","listpreview"]),s("columns",1),Ke("onAction"),Ke("onItemAction")]),fE=Kp({factory:function(t,n){var e={focus:N.focusIn,setMenus:function(e,t){t=x(t,function(t){var e={type:"menubutton",text:t.text,fetch:function(e){e(t.getItems())}},e=yO(e).mapError(function(e){return Oi(e)}).getOrDie();return xT(e,"tox-mbtn",n.backstage,X.some("menuitem"))});ne.set(e,t)}};return{uid:t.uid,dom:t.dom,components:[],behaviours:Q([ne.config({}),re("menubar-events",[na(function(e){t.onSetup(e)}),Z(lu(),function(n,e){hs(n.element,".tox-mbtn--active").each(function(t){vs(e.event.target,".tox-mbtn").each(function(e){gr(t,e)||n.getSystem().getByDom(t).each(function(t){n.getSystem().getByDom(e).each(function(e){SC.expand(e),SC.close(t),oe.focus(e)})})})})}),Z(Hu(),function(n,e){e.event.prevFocus.bind(function(e){return n.getSystem().getByDom(e).toOptional()}).each(function(t){e.event.newFocus.bind(function(e){return n.getSystem().getByDom(e).toOptional()}).each(function(e){SC.isOpen(t)&&(SC.expand(e),SC.close(t))})})})]),N.config({mode:"flow",selector:".tox-mbtn",onEscape:function(e){return t.onEscape(e),X.some(!0)}}),V2.config({})]),apis:e,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[i("dom"),i("uid"),i("onEscape"),i("backstage"),s("onSetup",G)],apis:{focus:function(e,t){e.focus(t)},setMenus:function(e,t,n){e.setMenus(t,n)}}}),dE=function(t,e){return e.getAnimationRoot.fold(function(){return t.element},function(e){return e(t)})},mE=function(e){return e.dimension.property},gE=function(e,t){return e.dimension.getDimension(t)},pE=function(e,t){e=dE(e,t);bc(e,[t.shrinkingClass,t.growingClass])},hE=function(e,t){pc(e.element,t.openClass),mc(e.element,t.closedClass),D(e.element,mE(t),"0px"),no(e.element)},vE=function(e,t){pc(e.element,t.closedClass),mc(e.element,t.openClass),to(e.element,mE(t))},bE=function(e,t,n,r){n.setCollapsed(),D(e.element,mE(t),gE(t,e.element)),no(e.element),pE(e,t),hE(e,t),t.onStartShrink(e),t.onShrunk(e)},yE=function(e,t,n,r){r=r.getOrThunk(function(){return gE(t,e.element)}),n.setCollapsed(),D(e.element,mE(t),r),no(e.element),n=dE(e,t);pc(n,t.growingClass),mc(n,t.shrinkingClass),hE(e,t),t.onStartShrink(e)},ha=Object.freeze({__proto__:null,refresh:function(e,t,n){n.isExpanded()&&(to(e.element,mE(t)),n=gE(t,e.element),D(e.element,mE(t),n))},grow:function(e,t,n){n.isExpanded()||xO(e,t,n)},shrink:function(e,t,n){n.isExpanded()&&wO(e,t,n)},immediateShrink:function(e,t,n){n.isExpanded()&&bE(e,t,n)},hasGrown:function(e,t,n){return n.isExpanded()},hasShrunk:function(e,t,n){return n.isCollapsed()},isGrowing:CO,isShrinking:SO,isTransitioning:function(e,t,n){return CO(e,t)||SO(e,t)},toggleGrow:function(e,t,n){(n.isExpanded()?wO:xO)(e,t,n)},disableTransitions:pE}),Eh=Object.freeze({__proto__:null,exhibit:function(e,t,n){var r=t.expanded;return Fa(r?{classes:[t.openClass],styles:{}}:{classes:[t.closedClass],styles:Hi(t.dimension.property,"0px")})},events:function(n,r){return Yu([ta(yu(),function(e,t){t.event.raw.propertyName===n.dimension.property&&(pE(e,n),r.isExpanded()&&to(e.element,n.dimension.property),(r.isExpanded()?n.onGrown:n.onShrunk)(e))})])}}),Tp=[i("closedClass"),i("openClass"),i("shrinkingClass"),i("growingClass"),Mi("getAnimationRoot"),e("onShrunk"),e("onStartShrink"),e("onGrown"),e("onStartGrow"),s("expanded",!1),Ai("dimension",$e("property",{width:[Ns("property","width"),Ns("getDimension",function(e){return go(e)+"px"})],height:[Ns("property","height"),Ns("getDimension",function(e){return oo(e)+"px"})]}))],wE=yl({fields:Tp,name:"sliding",active:Eh,apis:ha,state:Object.freeze({__proto__:null,init:function(e){var t=T(e.expanded);return za({isExpanded:function(){return!0===t.get()},isCollapsed:function(){return!1===t.get()},setCollapsed:V(t.set,!1),setExpanded:V(t.set,!0),readState:function(){return"expanded: "+t.get()}})}})}),xE=[Rd("slotBehaviours",[])],If=Xt({getSlotNames:function(e,t){return e.getSlotNames(t)},getSlot:function(e,t,n){return e.getSlot(t,n)},isShowing:function(e,t,n){return e.isShowing(t,n)},hideSlot:function(e,t,n){return e.hideSlot(t,n)},hideAllSlots:function(e,t){return e.hideAllSlots(t)},showSlot:function(e,t,n){return e.showSlot(t,n)}},mt),CE=A(A({},If),{sketch:function(e){var n,t={slot:function(e,t){return n.push(e),Hd("container",kO(e),t)},record:K(n=[])},e=e(t),t=t.record(),t=x(t,function(e){return Ap({name:e,pname:kO(e)})});return qd("container",xE,t,TO,e)}}),SE=m([Ze("icon"),Ze("tooltip"),it("onShow",G),it("onHide",G),it("onSetup",function(){return G})]),kE=function(e){return Si("sidebar",SE,e)},TE=function(r){var o=r.ui.registry.getAll().sidebars;w(qt(o),function(t){function n(){return un(X.from(r.queryCommandValue("ToggleSidebar")),t)}var e=o[t];r.ui.registry.addToggleButton(t,{icon:e.icon,tooltip:e.tooltip,onAction:function(e){r.execCommand("ToggleSidebar",!1,t),e.setActive(n())},onSetup:function(e){function t(){return e.setActive(n())}return r.on("ToggleSidebar",t),function(){r.off("ToggleSidebar",t)}}})})},OE=function(e){return{element:function(){return e.element.dom}}},EE=function(n,r){var o=x(qt(r),function(e){var t=r[e],t=ki(kE(t));return{name:e,getApi:OE,onSetup:t.onSetup,onShow:t.onShow,onHide:t.onHide}});return x(o,function(e){var t=T(G);return n.slot(e.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:vb.unnamedEvents([gy(e,t),py(e,t),Z(Vu(),function(t,e){var n=e.event;Mt(o,function(e){return e.name===n.name}).each(function(e){(n.visible?e.onShow:e.onHide)(e.getApi(t))})})])})})},_E=function(t){return CE.sketch(function(e){return{dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:EE(e,t),slotBehaviours:vb.unnamedEvents([na(function(e){return CE.hideAllSlots(e)})])}})},AE=O("FixSizeEvent"),DE=O("AutoSizeEvent"),H2=Object.freeze({__proto__:null,block:function(e,t,n,r){k(e.element,"aria-busy",!0);var o=t.getRoot(e).getOr(e),i=Q([N.config({mode:"special",onTab:function(){return X.some(!0)},onShiftTab:function(){return X.some(!0)}}),oe.config({})]),r=r(o,i),u=o.getSystem().build(r);ne.append(o,Pc(u)),u.hasConfigured(N)&&t.focus&&N.focusIn(u),n.isBlocked()||t.onBlock(e),n.blockWith(function(){return ne.remove(o,u)})},unblock:function(e,t,n){$r(e.element,"aria-busy"),n.isBlocked()&&t.onUnblock(e),n.clear()}}),Ep=[it("getRoot",X.none),ot("focus",!0),e("onBlock"),e("onUnblock")],ME=yl({fields:Ep,name:"blocking",apis:H2,state:Object.freeze({__proto__:null,init:function(){var t=Jl();return za({readState:t.isSet,blockWith:function(e){t.set({destroy:e})},clear:t.clear,isBlocked:t.isSet})}})}),NE=function(n){return function(e,t){return{dom:{tag:"div",attributes:{"aria-label":n.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:pv('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}}},RE=function(e){return y.getCurrent(e).each(function(e){return kl(e.element)})},zE=function(e,n){var r="tabindex",o="data-mce-"+r;X.from(e.iframeElement).map(S.fromDom).each(function(t){n?(Ur(t,r).each(function(e){return k(t,o,e)}),k(t,r,-1)):($r(t,r),Ur(t,o).each(function(e){k(t,r,e),$r(t,o)}))})},BE=function(e,t,n,r){var o=t.element;zE(e,n),n?(ME.block(t,NE(r)),to(o,"display"),$r(o,"aria-hidden"),e.hasFocus()&&RE(t)):(n=y.getCurrent(t).exists(function(e){return Tl(e.element)}),ME.unblock(t),D(o,"display","none"),k(o,"aria-hidden","true"),n&&e.focus())},PE=function(e){return"focusin"===e.type},IE=function(e){return!!PE(e)&&(e.composed?jt(e.composedPath()):X.from(e.target)).map(S.fromDom).filter(An).exists(function(e){return hc(e,"mce-pastebin")})},LE=function(n,t,r){function o(e){u.get()&&!IE(e)&&(e.preventDefault(),RE(t()),n.editorManager.setActive(n))}function i(e){e!==u.get()&&(u.set(e),BE(n,t(),e,r.providers),n.fire("AfterProgressState",{state:e}))}var u=T(!1),a=ef();n.inline||n.on("PreInit",function(){n.dom.bind(n.getWin(),"focusin",o),n.on("BeforeExecCommand",function(e){"mcefocus"===e.command.toLowerCase()&&!0!==e.value&&o(e)})});n.on("ProgressState",function(e){var t;a.on(fv.clearTimeout),P(e.time)?(t=fv.setEditorTimeout(n,function(){return i(e.state)},e.time),a.set(t)):(i(e.state),a.clear())})},FE=function(e,n){return At(e,function(t,e){return n(e,t.len).fold(K(t),function(e){return{len:e.finish,list:t.list.concat([e])}})},{len:0,list:[]}).list},HE=function(e,t,n){return{within:e,extra:t,withinWidth:n}},VE=function(e,t,r){var e=FE(e,function(e,t){var n=r(e);return X.some({element:e,start:t,finish:t+n,width:n})}),n=Et(e,function(e){return e.finish<=t}),o=_t(n,function(e,t){return e+t.width},0);return{within:n,extra:e.slice(n.length),withinWidth:o}},jE=function(e){return x(e,function(e){return e.element})},UE=function(e,t,n){e=jE(e.concat(t));return HE(e,[],n)},WE=function(e,t,n,r){e=jE(e).concat([n]);return HE(e,jE(t),r)},$E=function(e,t,n){return HE(jE(e),[],n)},qE=function(e,t,n){t=VE(t,e,n);return 0===t.extra.length?X.some(t):X.none()},GE=function(e,t,n,r){var o=qE(e,t,n).getOrThunk(function(){return VE(t,e-n(r),n)}),i=o.within,u=o.extra,o=o.withinWidth;return 1===u.length&&u[0].width<=n(r)?UE(i,u,o):1<=u.length?WE(i,u,r,o):$E(i,u,o)},KE=function(e,t){t=x(t,function(e){return Pc(e)});N3.setGroups(e,t)},XE=function(e){return $t(e,function(t){return El(t.element).bind(function(e){return t.getSystem().getByDom(e).toOptional()})})},YE=function(e,t,n){var r,o,i=t.builtGroups.get();0!==i.length&&(r=Ip(e,t,"primary"),e=mC.getCoupled(e,"overflowGroup"),D(r.element,"visibility","hidden"),i=i.concat([e]),o=XE(i),n([]),KE(r,i),i=go(r.element),0===(i=GE(i,t.builtGroups.get(),function(e){return go(e.element)},e)).extra.length?(ne.remove(r,e),n([])):(KE(r,i.within),n(i.extra)),to(r.element,"visibility"),no(r.element),o.each(oe.focus))},yh=K([Rd("splitToolbarBehaviours",[mC]),_i("builtGroups",function(){return T([])})]),_p=K([Fc(["overflowToggledClass"]),Qe("getOverflowBounds"),i("lazySink"),_i("overflowGroups",function(){return T([])})].concat(yh())),bh=K([Ap({factory:N3,schema:Kf(),name:"primary"}),gl({schema:Kf(),name:"overflow"}),gl({name:"overflow-button"}),gl({name:"overflow-group"})]),JE=K(function(e,t){t=Math.floor(t);t=fo.max(e,t,["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"]),D(e,"max-width",t+"px")}),Pf=K([Fc(["toggledClass"]),i("lazySink"),Ke("fetch"),Qe("getBounds"),Ri("fireDismissalEventInstead",[s("event",Fu())]),ts()]),Ch=K([gl({name:"button",overrides:function(e){return{dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:Q([g.config({toggleClass:e.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])}}}),gl({factory:N3,schema:Kf(),name:"toolbar",overrides:function(t){return{toolbarBehaviours:Q([N.config({mode:"cyclic",onEscape:function(e){return Pp(e,t,"button").each(oe.focus),X.none()}})])}}})]),ZE=function(e,t,n,r){var o=n.getBounds.map(function(e){return e()}),n=n.lazySink(e).getOrDie();qg.positionWithinBounds(n,t,{anchor:{type:"hotspot",hotspot:e,layouts:r,overrides:{maxWidthFunction:JE()}}},o)},QE=function(e,t,n,r,o){N3.setGroups(t,o),ZE(e,t,n,r),g.on(e)},e_=Gd({name:"FloatingToolbarButton",factory:function(u,e,a,t){return A(A({},dv.sketch(A(A({},t.button()),{action:function(e){EO(e,t)},buttonBehaviours:mp.augment({dump:t.button().buttonBehaviours},[mC.config({others:{toolbarSandbox:function(e){return r=e,n=a,o=u,{dom:{tag:"div",attributes:{id:(i=ys()).id}},behaviours:Q([N.config({mode:"special",onEscape:function(e){return c.close(e),X.some(!0)}}),c.config({onOpen:function(e,t){o.fetch().get(function(e){QE(r,t,o,n.layouts,e),i.link(r.element),N.focusIn(t)})},onClose:function(){g.off(r),oe.focus(r),i.unlink(r.element)},isPartOf:function(e,t,n){return xs(t,n)||xs(r,n)},getAttachPoint:function(){return o.lazySink(r).getOrDie()}}),Cl.config({channels:A(A({},cp(A({isExtraPart:W},o.fireDismissalEventInstead.map(function(e){return{fireEventInstead:{event:e.event}}}).getOr({})))),lp({doReposition:function(){c.getState(mC.getCoupled(r,"toolbarSandbox")).each(function(e){ZE(r,e,o,n.layouts)})}}))})])};var r,n,o,i}}})])}))),{apis:{setGroups:function(t,n){c.getState(mC.getCoupled(t,"toolbarSandbox")).each(function(e){QE(t,e,u,a.layouts,n)})},reposition:function(t){c.getState(mC.getCoupled(t,"toolbarSandbox")).each(function(e){ZE(t,e,u,a.layouts)})},toggle:function(e){EO(e,t)},getToolbar:function(e){return c.getState(mC.getCoupled(e,"toolbarSandbox"))},isOpen:function(e){return c.isOpen(mC.getCoupled(e,"toolbarSandbox"))}}})},configFields:Pf(),partFields:Ch(),apis:{setGroups:function(e,t,n){e.setGroups(t,n)},reposition:function(e,t){e.reposition(t)},toggle:function(e,t){e.toggle(t)},getToolbar:function(e,t){return e.getToolbar(t)},isOpen:function(e,t){return e.isOpen(t)}}}),Op=K([i("items"),Fc(["itemSelector"]),Rd("tgroupBehaviours",[N])]),ma=K([Bs({name:"items",unit:"item"})]),t_=Gd({name:"ToolbarGroup",configFields:Op(),partFields:ma(),factory:function(e,t,n,r){return{uid:e.uid,dom:e.dom,components:t,behaviours:dp(e.tgroupBehaviours,[N.config({mode:"flow",selector:e.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}}}),n_=function(e){return x(e,function(e){return Pc(e)})},r_=Gd({name:"SplitFloatingToolbar",configFields:_p(),partFields:bh(),factory:function(n,e,t,r){var o=ie(e_.sketch({fetch:function(){return lC.nu(function(e){e(n_(n.overflowGroups.get()))})},layouts:{onLtr:function(){return[rl,nl]},onRtl:function(){return[nl,rl]},onBottomLtr:function(){return[il,ol]},onBottomRtl:function(){return[ol,il]}},getBounds:t.getOverflowBounds,lazySink:n.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:n.markers.overflowToggledClass},parts:{button:r["overflow-button"](),toolbar:r.overflow()}}));return{uid:n.uid,dom:n.dom,components:e,behaviours:dp(n.splitToolbarBehaviours,[mC.config({others:{overflowGroup:function(){return t_.sketch(A(A({},r["overflow-group"]()),{items:[o.asSpec()]}))}}})]),apis:{setGroups:function(e,t){n.builtGroups.set(x(t,e.getSystem().build)),_O(e,o,n)},refresh:function(e){return _O(e,o,n)},toggle:function(e){o.getOpt(e).each(function(e){e_.toggle(e)})},isOpen:function(e){return o.getOpt(e).map(e_.isOpen).getOr(!1)},reposition:function(e){o.getOpt(e).each(function(e){e_.reposition(e)})},getOverflow:function(e){return o.getOpt(e).bind(e_.getToolbar)}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(e,t,n){e.setGroups(t,n)},refresh:function(e,t){e.refresh(t)},reposition:function(e,t){e.reposition(t)},toggle:function(e,t){e.toggle(t)},isOpen:function(e,t){return e.isOpen(t)},getOverflow:function(e,t){return e.getOverflow(t)}}}),wh=K([Fc(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),e("onOpened"),e("onClosed")].concat(yh())),tu=K([Ap({factory:N3,schema:Kf(),name:"primary"}),Ap({factory:N3,schema:Kf(),name:"overflow",overrides:function(t){return{toolbarBehaviours:Q([wE.config({dimension:{property:"height"},closedClass:t.markers.closedClass,openClass:t.markers.openClass,shrinkingClass:t.markers.shrinkingClass,growingClass:t.markers.growingClass,onShrunk:function(e){Pp(e,t,"overflow-button").each(function(e){g.off(e),oe.focus(e)}),t.onClosed(e)},onGrown:function(e){N.focusIn(e),t.onOpened(e)},onStartGrow:function(e){Pp(e,t,"overflow-button").each(g.on)}}),N.config({mode:"acyclic",onEscape:function(e){return Pp(e,t,"overflow-button").each(oe.focus),X.some(!0)}})])}}}),gl({name:"overflow-button",overrides:function(e){return{buttonBehaviours:Q([g.config({toggleClass:e.markers.overflowToggledClass,aria:{mode:"pressed"},toggleOnExecute:!1})])}}}),gl({name:"overflow-group"})]),o_=function(e,n){Pp(e,n,"overflow").each(function(t){YE(e,n,function(e){e=x(e,function(e){return Pc(e)});N3.setGroups(t,e)}),Pp(e,n,"overflow-button").each(function(e){wE.hasGrown(t)&&g.on(e)}),wE.refresh(t)})},i_=Gd({name:"SplitSlidingToolbar",configFields:wh(),partFields:tu(),factory:function(r,e,t,n){var o="alloy.toolbar.toggle";return{uid:r.uid,dom:r.dom,components:e,behaviours:dp(r.splitToolbarBehaviours,[mC.config({others:{overflowGroup:function(t){return t_.sketch(A(A({},n["overflow-group"]()),{items:[dv.sketch(A(A({},n["overflow-button"]()),{action:function(e){Y(t,o)}}))]}))}}}),re("toolbar-toggle-events",[Z(o,function(e){AO(e,r)})])]),apis:{setGroups:function(e,t){var n=t;n=x(t,e.getSystem().build),r.builtGroups.set(n),o_(e,r)},refresh:function(e){return o_(e,r)},toggle:function(e){return AO(e,r)},isOpen:function(e){return Pp(e,r,"overflow").map(wE.hasGrown).getOr(!1)}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(e,t,n){e.setGroups(t,n)},refresh:function(e,t){e.refresh(t)},toggle:function(e,t){e.toggle(t)},isOpen:function(e,t){return e.isOpen(t)}}}),u_=function(e){var t=e.title.fold(function(){return{}},function(e){return{attributes:{title:e}}});return{dom:A({tag:"div",classes:["tox-toolbar__group"]},t),components:[t_.parts.items({})],items:e.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled])"},tgroupBehaviours:Q([V2.config({}),oe.config({})])}},a_=function(e){return t_.sketch(u_(e))},c_=function(n,e){var t=na(function(e){var t=x(n.initGroups,a_);N3.setGroups(e,t)});return Q([dy.toolbarButton(n.providers.isDisabled),fy(),N.config({mode:e,onEscape:n.onEscape,selector:".tox-toolbar__group"}),re("toolbar-events",[t])])},s_=function(e){var t=e.cyclicKeying?"cyclic":"acyclic";return{uid:e.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":u_({title:X.none(),items:[]}),"overflow-button":kT({name:"more",icon:X.some("more-drawer"),disabled:!1,tooltip:X.some("More..."),primary:!1,borderless:!1},X.none(),e.providers)},splitToolbarBehaviours:c_(e,t)}},l_=function(e){var t=e.cyclicKeying?"cyclic":"acyclic";return N3.sketch({uid:e.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(e.type===D1.scrolling?["tox-toolbar--scrolling"]:[])},components:[N3.parts.groups({})],toolbarBehaviours:c_(e,t)})},Tp=xh.optional({factory:fE,name:"menubar",schema:[i("backstage")]}),Eh=xh.optional({factory:{sketch:function(e){return M3.sketch({uid:e.uid,dom:e.dom,listBehaviours:Q([N.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:function(){return l_({type:e.type,uid:O("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:e.providers,onEscape:function(){return e.onEscape(),X.some(!0)}})},setupItem:function(e,t,n,r){N3.setGroups(t,n)},shell:!0})}},name:"multiple-toolbar",schema:[i("dom"),i("onEscape")]}),ha=xh.optional({factory:{sketch:function(e){var t;return((t=e).type===D1.sliding?MO:t.type===D1.floating?DO:l_)({type:e.type,uid:e.uid,onEscape:function(){return e.onEscape(),X.some(!0)},cyclicKeying:!1,initGroups:[],getSink:e.getSink,providers:e.providers,moreDrawerData:{lazyToolbar:e.lazyToolbar,lazyMoreButton:e.lazyMoreButton,lazyHeader:e.lazyHeader},attributes:e.attributes})}},name:"toolbar",schema:[i("dom"),i("onEscape"),i("getSink")]}),If=xh.optional({factory:{sketch:function(e){var t=e.editor,n=e.sticky?bO:R3;return{uid:e.uid,dom:e.dom,components:e.components,behaviours:Q(n(t,e.sharedBackstage))}}},name:"header",schema:[i("dom")]}),Ep=xh.optional({name:"socket",schema:[i("dom")]}),H2=xh.optional({factory:{sketch:function(e){return{uid:e.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"complementary"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:Q([V2.config({}),oe.config({}),wE.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:function(e){y.getCurrent(e).each(CE.hideAllSlots),Y(e,DE)},onGrown:function(e){Y(e,DE)},onStartGrow:function(e){J(e,AE,{width:Zr(e.element,"width").getOr("")})},onStartShrink:function(e){J(e,AE,{width:go(e.element)+"px"})}}),ne.config({}),y.config({find:function(e){e=ne.contents(e);return jt(e)}})])}],behaviours:Q([VS.childAt(0),re("sidebar-sliding-events",[Z(AE,function(e,t){D(e.element,"width",t.event.width)}),Z(DE,function(e,t){to(e.element,"width")})])])}}},name:"sidebar",schema:[i("dom")]}),Pf=xh.optional({factory:{sketch:function(e){return{uid:e.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:Q([ne.config({}),ME.config({focus:!1}),y.config({find:function(e){return jt(e.components())}})]),components:[]}}},name:"throbber",schema:[i("dom")]}),f_=Gd({name:"OuterContainer",factory:function(r,e,t){return{uid:r.uid,dom:r.dom,components:e,apis:{getSocket:function(e){return D3.getPart(e,r,"socket")},setSidebar:function(e,n){D3.getPart(e,r,"sidebar").each(function(e){var t;t=n,y.getCurrent(e).each(function(e){return ne.set(e,[_E(t)])})})},toggleSidebar:function(e,t){D3.getPart(e,r,"sidebar").each(function(e){var n;n=t,y.getCurrent(e).each(function(t){y.getCurrent(t).each(function(e){wE.hasGrown(t)?CE.isShowing(e,n)?wE.shrink(t):(CE.hideAllSlots(e),CE.showSlot(e,n)):(CE.hideAllSlots(e),CE.showSlot(e,n),wE.grow(t))})})})},whichSidebar:function(e){return D3.getPart(e,r,"sidebar").bind(OO).getOrNull()},getHeader:function(e){return D3.getPart(e,r,"header")},getToolbar:function(e){return D3.getPart(e,r,"toolbar")},setToolbar:function(e,t){D3.getPart(e,r,"toolbar").each(function(e){e.getApis().setGroups(e,t)})},setToolbars:function(e,t){D3.getPart(e,r,"multiple-toolbar").each(function(e){M3.setItems(e,t)})},refreshToolbar:function(e){D3.getPart(e,r,"toolbar").each(function(e){return e.getApis().refresh(e)})},toggleToolbarDrawer:function(e){D3.getPart(e,r,"toolbar").each(function(t){var e,n;e=t.getApis().toggle,n=function(e){return e(t)},null!=e?X.some(n(e)):X.none()})},isToolbarDrawerToggled:function(e){return D3.getPart(e,r,"toolbar").bind(function(t){return X.from(t.getApis().isOpen).map(function(e){return e(t)})}).getOr(!1)},getThrobber:function(e){return D3.getPart(e,r,"throbber")},focusToolbar:function(e){D3.getPart(e,r,"toolbar").orThunk(function(){return D3.getPart(e,r,"multiple-toolbar")}).each(function(e){N.focusIn(e)})},setMenubar:function(e,t){D3.getPart(e,r,"menubar").each(function(e){fE.setMenus(e,t)})},focusMenubar:function(e){D3.getPart(e,r,"menubar").each(function(e){fE.focus(e)})}},behaviours:r.behaviours}},configFields:[i("dom"),i("behaviours")],partFields:[If,Tp,ha,Eh,Ep,H2,Pf],apis:{getSocket:function(e,t){return e.getSocket(t)},setSidebar:function(e,t,n){e.setSidebar(t,n)},toggleSidebar:function(e,t,n){e.toggleSidebar(t,n)},whichSidebar:function(e,t){return e.whichSidebar(t)},getHeader:function(e,t){return e.getHeader(t)},getToolbar:function(e,t){return e.getToolbar(t)},setToolbar:function(e,t,n){n=x(n,function(e){return a_(e)});e.setToolbar(t,n)},setToolbars:function(e,t,n){n=x(n,function(e){return x(e,a_)});e.setToolbars(t,n)},refreshToolbar:function(e,t){return e.refreshToolbar(t)},toggleToolbarDrawer:function(e,t){e.toggleToolbarDrawer(t)},isToolbarDrawerToggled:function(e,t){return e.isToolbarDrawerToggled(t)},getThrobber:function(e,t){return e.getThrobber(t)},setMenubar:function(e,t,n){e.setMenubar(t,n)},focusMenubar:function(e,t){e.focusMenubar(t)},focusToolbar:function(e,t){e.focusToolbar(t)}}}),d_="file edit view insert format tools table help",m_={file:{title:"File",items:"newdocument restoredraft | preview | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed template codesample inserttable | charmap emoticons hr | pagebreak nonbreaking anchor toc | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | formats blockformats fontformats fontsizes align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | a11ycheck code wordcount"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},g_=function(e,n,t){var r=Bb(t).split(/[ ,]/);return{text:e.title,getItems:function(){return zt(e.items,function(e){var t=e.toLowerCase();return 0===t.trim().length||Ct(r,function(e){return e===t})?[]:"separator"===t||"|"===t?[{type:"separator"}]:n.menuItems[t]?[n.menuItems[t]]:[]})}}},p_=function(e){return"string"==typeof e?e.split(" "):e},h_=function(n,r,o){return new q1(function(e,t){o.load(r,e,t),n.on("remove",function(){return o.unload(r)})})},v_=V(zO,!1),b_=V(zO,!0),y_=function(r,o){return function(t){function e(){t.setActive(r.formatter.match(o));var e=r.formatter.formatChanged(o,t.setActive);n.set(e)}var n=Zl();return r.initialized?e():r.once("init",e),function(){r.off("init",e),n.clear()}}},w_=function(r,o,i){return function(e){function t(){i(e),r.on(o,n)}var n=function(){return i(e)};return r.initialized?t():r.once("init",t),function(){r.off("init",t),r.off(o,n)}}},x_=function(t){return function(e){return function(){t.undoManager.transact(function(){t.focus(),t.execCommand("mceToggleFormat",!1,e.format)})}}},C_=function(e,t){return function(){return e.execCommand(t)}},S_=function(e,u,a){function i(e){var t=a.getCurrentValue(),n=a.shouldHide?0:1;return zt(e,function(e){return c(e,n,t)})}var o=function(e,t,n,r){var o,i=u.shared.providers.translate(e.title);return"separator"===e.type?X.some({type:"separator",text:i}):"submenu"===e.type?(o=zt(e.getStyleItems(),function(e){return c(e,t,r)}),0===t&&o.length<=0?X.none():X.some({type:"nestedmenuitem",text:i,disabled:o.length<=0,getSubmenuItems:function(){return zt(e.getStyleItems(),function(e){return c(e,t,r)})}})):X.some(A({type:"togglemenuitem",text:i,icon:e.icon,active:e.isSelected(r),disabled:n,onAction:a.onAction(e)},e.getStylePreview().fold(function(){return{}},function(e){return{meta:{style:e}}})))},c=function(e,t,n){var r="formatter"===e.type&&a.isInvalid(e);return 0===t?r?[]:o(e,t,!1,n).toArray():o(e,t,r,n).toArray()};return{validateItems:i,getFetch:function(r,o){return function(e,t){var n=o(),n=i(n);t(yT(n,b0.CLOSE_ON_EXECUTE,r,!1))}}}},k_=function(e,t,n){var r=n.dataset,o="basic"===r.type?function(){return x(r.data,function(e){return U4(e,n.isSelectedFor,n.getPreviewFor)})}:r.getData;return{items:S_(e,t,n),getStyleItems:o}},T_=function(e){return x(e,function(e){var t=e,n=e,e=e.split("=");return 1<e.length&&(t=e[0],n=e[1]),{title:t,format:n}})},O_=function(e){return{type:"basic",data:e}},E_=((Ch=WO=WO||{})[Ch.SemiColon=0]="SemiColon",Ch[Ch.Space=1]="Space",function(e,t){return t===WO.SemiColon?e.replace(/;$/,"").split(";"):e.split(" ")}),__=function(e,t,n,r){e=e.getParam(t,n,"string");return{type:"basic",data:T_(E_(e,r))}},A_=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],D_=function(n){var e=O_(A_);return{tooltip:"Align",text:X.none(),icon:X.some("align-left"),isSelectedFor:function(e){return function(){return n.formatter.match(e)}},getCurrentValue:X.none,getPreviewFor:function(e){return X.none},onAction:function(t){return function(){return Mt(A_,function(e){return e.format===t.format}).each(function(e){return n.execCommand(e.command)})}},updateText:function(e){var t=Mt(A_,function(e){return n.formatter.match(e.format)}).fold(K("left"),function(e){return e.title.toLowerCase()});J(e,cT,{icon:"align-"+t})},dataset:e,shouldHide:!1,isInvalid:function(e){return!n.formatter.canApply(e.format)}}},M_=function(e,t){var n=k_(e,t,D_(e));e.ui.registry.addNestedMenuItem("align",{text:t.shared.providers.translate("Align"),getSubmenuItems:function(){return n.items.validateItems(n.getStyleItems())}})},N_="Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats",R_=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],z_=function(e){e=e.split(/\s*,\s*/);return x(e,function(e){return e.replace(/^['"]+|['"]+$/g,"")})},B_=function(e){var t;return 0===e.indexOf("-apple-system")&&(t=z_(e.toLowerCase()),Bt(R_,function(e){return-1<t.indexOf(e.toLowerCase())}))},P_=function(o){function r(){function t(e){return e?z_(e)[0]:""}var e=o.queryCommandValue("FontName"),n=u.data,r=e?e.toLowerCase():"";return{matchOpt:Mt(n,function(e){e=e.format;return e.toLowerCase()===r||t(e).toLowerCase()===t(r).toLowerCase()}).orThunk(function(){return fn(B_(r),{title:i,format:r})}),font:e}}var i="System Font",u=__(o,"font_formats",N_,WO.SemiColon);return{tooltip:"Fonts",text:X.some(i),icon:X.none(),isSelectedFor:function(t){return function(e){return e.exists(function(e){return e.format===t})}},getCurrentValue:function(){return r().matchOpt},getPreviewFor:function(e){return function(){return X.some({tag:"div",styles:-1===e.indexOf("dings")?{"font-family":e}:{}})}},onAction:function(e){return function(){o.undoManager.transact(function(){o.focus(),o.execCommand("FontName",!1,e.format)})}},updateText:function(e){var t=r(),n=t.matchOpt,t=t.font,n=n.fold(K(t),function(e){return e.title});J(e,aT,{text:n})},dataset:u,shouldHide:!1,isInvalid:W}},I_=function(e,t){var n=k_(e,t,P_(e));e.ui.registry.addNestedMenuItem("fontformats",{text:t.shared.providers.translate("Fonts"),getSubmenuItems:function(){return n.items.validateItems(n.getStyleItems())}})},L_="8pt 10pt 12pt 14pt 18pt 24pt 36pt",F_={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},H_={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},V_=function(e,t){t=Math.pow(10,t);return Math.round(e*t)/t},j_=function(e,t){return/[0-9.]+px$/.test(e)?V_(72*parseInt(e,10)/96,t||0)+"pt":C(H_,e).getOr(e)},U_=function(e){return C(F_,e).getOr("")},W_=function(t){function r(){var r=X.none(),o=n.data,i=t.queryCommandValue("FontSize");if(i)for(var e=3;r.isNone()&&0<=e;e--)!function(e){var t=j_(i,e),n=U_(t);r=Mt(o,function(e){return e.format===i||e.format===t||e.format===n})}(e);return{matchOpt:r,size:i}}var e=K(X.none),n=__(t,"fontsize_formats",L_,WO.Space);return{tooltip:"Font sizes",text:X.some("12pt"),icon:X.none(),isSelectedFor:function(t){return function(e){return e.exists(function(e){return e.format===t})}},getPreviewFor:e,getCurrentValue:function(){return r().matchOpt},onAction:function(e){return function(){t.undoManager.transact(function(){t.focus(),t.execCommand("FontSize",!1,e.format)})}},updateText:function(e){var t=r(),n=t.matchOpt,t=t.size,n=n.fold(K(t),function(e){return e.title});J(e,aT,{text:n})},dataset:n,shouldHide:!1,isInvalid:W}},$_=function(e,t){var n=k_(e,t,W_(e));e.ui.registry.addNestedMenuItem("fontsizes",{text:"Font sizes",getSubmenuItems:function(){return n.items.validateItems(n.getStyleItems())}})},q_=function(e,t){var n=t(),t=x(n,function(e){return e.format});return X.from(e.formatter.closest(t)).bind(function(t){return Mt(n,function(e){return e.format===t})}).orThunk(function(){return fn(e.formatter.match("p"),{title:"Paragraph",format:"p"})})},G_="Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre",K_=function(n){var r=__(n,"block_formats",G_,WO.SemiColon);return{tooltip:"Blocks",text:X.some("Paragraph"),icon:X.none(),isSelectedFor:function(e){return function(){return n.formatter.match(e)}},getCurrentValue:X.none,getPreviewFor:function(t){return function(){var e=n.formatter.get(t);return X.some({tag:0<e.length&&(e[0].inline||e[0].block)||"div",styles:n.dom.parseStyle(n.formatter.getCssText(t))})}},onAction:x_(n),updateText:function(e){var t=q_(n,function(){return r.data}).fold(K("Paragraph"),function(e){return e.title});J(e,aT,{text:t})},dataset:r,shouldHide:!1,isInvalid:function(e){return!n.formatter.canApply(e.format)}}},X_=function(e,t){var n=k_(e,t,K_(e));e.ui.registry.addNestedMenuItem("blockformats",{text:"Blocks",getSubmenuItems:function(){return n.items.validateItems(n.getStyleItems())}})},Y_=function(r,e){return{tooltip:"Formats",text:X.some("Paragraph"),icon:X.none(),isSelectedFor:function(e){return function(){return r.formatter.match(e)}},getCurrentValue:X.none,getPreviewFor:function(t){return function(){var e=r.formatter.get(t);return void 0!==e?X.some({tag:0<e.length&&(e[0].inline||e[0].block)||"div",styles:r.dom.parseStyle(r.formatter.getCssText(t))}):X.none()}},onAction:x_(r),updateText:function(e){function n(e){var t=e.items;return void 0!==t&&0<t.length?zt(t,n):[{title:e.title,format:e.format}]}var t=zt(j4(r),n),t=q_(r,K(t)).fold(K("Paragraph"),function(e){return e.title});J(e,aT,{text:t})},shouldHide:r.getParam("style_formats_autohide",!1,"boolean"),isInvalid:function(e){return!r.formatter.canApply(e.format)},dataset:e}},J_=function(e,t){var n=A({type:"advanced"},t.styleselect),r=k_(e,t,Y_(e,n));e.ui.registry.addNestedMenuItem("formats",{text:"Formats",getSubmenuItems:function(){return r.items.validateItems(r.getStyleItems())}})},Op=Object.freeze({__proto__:null,events:function(r,o){function i(t,n){r.updateState.each(function(e){e=e(t,n);o.set(e)}),r.renderComponents.each(function(e){e=e(n,o.get()),e=x(e,t.getSystem().build);wd(t,e)})}return Yu([Z(Tu(),function(e,t){var n;t.universal||(n=r.channel,xt(t.channels,n)&&i(e,t.data))}),na(function(t,e){r.initialData.each(function(e){i(t,e)})})])}}),ma=Object.freeze({__proto__:null,getState:function(e,t,n){return n}}),_p=[i("channel"),Mi("renderComponents"),Mi("updateState"),Mi("initialData")],Z_=yl({fields:_p,name:"reflecting",active:Op,apis:ma,state:Object.freeze({__proto__:null,init:function(){var e=T(X.none());return{readState:function(){return e.get().getOr("none")},get:e.get,set:e.set,clear:function(){return e.set(X.none())}}}})}),bh=K([i("toggleClass"),i("fetch"),jc("onExecute"),s("getHotspot",X.some),s("getAnchorOverrides",K({})),ts(),jc("onItemExecute"),Mi("lazySink"),i("dom"),e("onOpen"),Rd("splitDropdownBehaviours",[mC,N,oe]),s("matchWidth",!1),s("useMinWidth",!1),s("eventOrder",{}),Mi("role")].concat(Vw())),yh=Ap({factory:dv,schema:[i("dom")],name:"arrow",defaults:function(){return{buttonBehaviours:Q([oe.revoke()])}},overrides:function(t){return{dom:{tag:"span",attributes:{role:"presentation"}},action:function(e){e.getSystem().getByUid(t.uid).each(qu)},buttonBehaviours:Q([g.config({toggleOnExecute:!1,toggleClass:t.toggleClass})])}}}),Kf=Ap({factory:dv,schema:[i("dom")],name:"button",defaults:function(){return{buttonBehaviours:Q([oe.revoke()])}},overrides:function(n){return{dom:{tag:"span",attributes:{role:"presentation"}},action:function(t){t.getSystem().getByUid(n.uid).each(function(e){n.onExecute(e,t)})}}}}),wh=K([yh,Kf,Dp({factory:{sketch:function(e){return{uid:e.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:e.text}}}},schema:[i("text")],name:"aria-descriptor"}),gl({schema:[Lc()],name:"menu",defaults:function(r){return{onExecute:function(t,n){t.getSystem().getByUid(r.uid).each(function(e){r.onItemExecute(e,t,n)})}}}}),_h()]),Q_=Gd({name:"SplitDropdown",configFields:bh(),partFields:wh(),factory:function(r,e,t,n){function o(e){y.getCurrent(e).each(function(e){Yp.highlightFirst(e),N.focusIn(e)})}function i(e){Lw(r,v,e,n,o,xx.HighlightFirst).get(G)}function u(e){return e=Ip(e,r,"button"),qu(e),X.some(!0)}var a=A(A({},Yu([na(function(n,e){Pp(n,r,"aria-descriptor").each(function(e){var t=O("aria");k(e.element,"id",t),k(n.element,"aria-describedby",t)})})])),ug(X.some(i)));return{uid:r.uid,dom:r.dom,components:e,apis:{repositionMenus:function(e){g.isOn(e)&&Hw(e)}},eventOrder:A(A({},r.eventOrder),((e={})[Ou()]=["disabling","toggling","alloy.base.behaviour"],e)),events:a,behaviours:dp(r.splitDropdownBehaviours,[mC.config({others:{sandbox:function(e){var t=Ip(e,r,"arrow");return Fw(r,e,{onOpen:function(){g.on(t),g.on(e)},onClose:function(){g.off(t),g.off(e)}})}}}),N.config({mode:"special",onSpace:u,onEnter:u,onDown:function(e){return i(e),X.some(!0)}}),oe.config({}),g.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:r.role.getOr("button"),"aria-haspopup":!0}}}},apis:{repositionMenus:function(e,t){return e.repositionMenus(t)}}}),eA=function(t){return{isDisabled:function(){return te.isDisabled(t)},setDisabled:function(e){return te.set(t,e)}}},tA=function(t){return{setActive:function(e){g.set(t,e)},isActive:function(){return g.isOn(t)},isDisabled:function(){return te.isDisabled(t)},setDisabled:function(e){return te.set(t,e)}}},nA=function(e,t){return e.map(function(e){return{"aria-label":t.translate(e),title:t.translate(e)}}).getOr({})},rA=O("focus-button"),oA=function(t,n,e,r,o,i){return{dom:{tag:"button",classes:["tox-tbtn"].concat(n.isSome()?["tox-tbtn--select"]:[]),attributes:nA(e,i)},components:by([t.map(function(e){return tT(e,i.icons)}),n.map(function(e){return rT(e,"tox-tbtn",i)})]),eventOrder:((e={})[uu()]=["focusing","alloy.base.behaviour","common-button-display-events"],e),buttonBehaviours:Q([dy.toolbarButton(i.isDisabled),fy(),re("common-button-display-events",[Z(uu(),function(e,t){t.event.prevent(),Y(e,rA)})])].concat(r.map(function(e){return Z_.config({channel:e,initialData:{icon:t,text:n},renderComponents:function(e,t){return by([e.icon.map(function(e){return tT(e,i.icons)}),e.text.map(function(e){return rT(e,"tox-tbtn",i)})])}})}).toArray()).concat(o.getOr([])))}},iA=function(e,t,n){var r=T(G),o=oA(e.icon,e.text,e.tooltip,X.none(),X.none(),n);return dv.sketch({dom:o.dom,components:o.components,eventOrder:uT,buttonBehaviours:Q([re("toolbar-button-events",[iT({onAction:e.onAction,getApi:t.getApi}),gy(t,r),py(t,r)]),dy.toolbarButton(function(){return e.disabled||n.isDisabled()}),fy()].concat(t.toolbarButtonBehaviours))})},uA=function(e,t,n){return iA(e,{toolbarButtonBehaviours:[].concat(0<n.length?[re("toolbarButtonWith",n)]:[]),getApi:eA,onSetup:e.onSetup},t)},aA=function(e,t,n){return Go(iA(e,{toolbarButtonBehaviours:[ne.config({}),g.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(0<n.length?[re("toolbarToggleButtonWith",n)]:[]),getApi:tA,onSetup:e.onSetup},t))},cA=[{name:"history",items:["undo","redo"]},{name:"styles",items:["styleselect"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],sA={button:IO(l0,function(e,t){return t=t.backstage.shared.providers,uA(e,t,[])}),togglebutton:IO(d0,function(e,t){return t=t.backstage.shared.providers,aA(e,t,[])}),menubutton:IO(yO,function(e,t){return xT(e,"tox-tbtn",t.backstage,X.none())}),splitbutton:IO(function(e){return Si("SplitButton",lE,e)},function(e,t){return PO(e,t.backstage.shared)}),grouptoolbarbutton:IO(function(e){return Si("GroupToolbarButton",cE,e)},function(e,t,n){var r=n.ui.registry.getAll().buttons;(o={})[Rf]=t.backstage.shared.header.isPositionedAtTop()?us.TopToBottom:us.BottomToTop;if(Hb(n)!==D1.floating)throw new Error("Toolbar groups are only supported when using floating toolbar mode");var o,i=e,e=t.backstage,u=function(e){return pA(n,{buttons:r,toolbar:e,allowToolbarGroups:!1},t,X.none())};return e=e.shared,e_.sketch({lazySink:e.getSink,fetch:function(){return lC.nu(function(e){e(x(u(i.items),a_))})},markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:oA(i.icon,i.text,i.tooltip,X.none(),X.none(),e.providers),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:o}}}})}),styleSelectButton:function(e,t){return e=e,t=t.backstage,n=A({type:"advanced"},t.styleselect),BO(e,t,Y_(e,n));var n},fontsizeSelectButton:function(e,t){return t=t.backstage,BO(e,t,W_(e))},fontSelectButton:function(e,t){return t=t.backstage,BO(e,t,P_(e))},formatButton:function(e,t){return t=t.backstage,BO(e,t,K_(e))},alignMenuButton:function(e,t){return t=t.backstage,BO(e,t,D_(e))}},lA=function(t,n,r){return C(sA,t.type).fold(function(){return console.error("skipping button defined by",t),X.none()},function(e){return X.some(e(t,n,r))})},fA={styleselect:sA.styleSelectButton,fontsizeselect:sA.fontsizeSelectButton,fontselect:sA.fontSelectButton,formatselect:sA.formatButton,align:sA.alignMenuButton},dA=function(n){var e=x(cA,function(e){var t=Et(e.items,function(e){return rn(n,e)||rn(fA,e)});return{name:e.name,items:t}});return Et(e,function(e){return 0<e.items.length})},mA=function(e){e=e.split("|");return x(e,function(e){return{items:e.trim().split(" ")}})},gA=function(e){return I(e,function(e){return rn(e,"name")&&rn(e,"items")})},pA=function(a,c,s,l){t=(e=c).toolbar,e=c.buttons;var e=!1===t?[]:void 0===t||!0===t?dA(e):d(t)?mA(t):gA(t)?t:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[]),t=x(e,function(e){var t=zt(e.items,function(e){return 0===e.trim().length?[]:(t=a,n=c.buttons,r=e,o=c.allowToolbarGroups,i=s,u=l,C(n,r.toLowerCase()).orThunk(function(){return u.bind(function(e){return $t(e,function(e){return C(n,e+r.toLowerCase())})})}).fold(function(){return C(fA,r.toLowerCase()).map(function(e){return e(t,i)}).orThunk(function(){return X.none()})},function(e){return"grouptoolbarbutton"!==e.type||o?lA(e,i,t):(console.warn("Ignoring the '"+r+"' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested."),X.none())}).toArray());var t,n,r,o,i,u});return{title:X.from(a.translate(e.name)),items:t}});return Et(t,function(e){return 0<e.items.length})},tu=ar(),hA=tu.os.isiOS()&&tu.os.version.major<=12,vA=Object.freeze({__proto__:null,render:function(n,t,e,r,o){var i,u,a,c=T(0),s=t.outerContainer,o=(v_(n),S.fromDom(o.targetNode)),l=Rr(Nr(o)),o=(f=t.mothership,np(o,f,So),xd(l,t.uiMothership),n.on("PostRender",function(){LO(n,t,e,r),c.set(n.getWin().innerWidth),f_.setMenubar(s,NO(n,e)),f_.setSidebar(s,e.sidebar),FO(n,t)}),f_.getSocket(s).getOrDie("Could not find expected socket element")),l=(hA&&(Kr(o.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"}),i=function(){n.fire("ScrollContent")},u=20,a=null,f=nf(o.element,"scroll",{cancel:function(){h(a)||(clearTimeout(a),a=null)},throttle:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];h(a)&&(a=setTimeout(function(){a=null,i.apply(null,e)},u))}}.throttle),n.on("remove",f.unbind)),A1(n,t),n.addCommand("ToggleSidebar",function(e,t){f_.toggleSidebar(s,t),n.fire("ToggleSidebar")}),n.addQueryValueHandler("ToggleSidebar",function(){return f_.whichSidebar(s)}),Hb(n)),f=(l!==D1.sliding&&l!==D1.floating||n.on("ResizeWindow ResizeEditor ResizeContent",function(){var e=n.getWin().innerWidth;e!==c.get()&&(f_.refreshToolbar(t.outerContainer),c.set(e))}),{enable:function(){ly(t,!1)},disable:function(){ly(t,!0)},isDisabled:function(){return te.isDisabled(s)}});return{iframeContainer:o.element.dom,editorContainer:s.element.dom,api:f}}}),bA=function(e){return/^[0-9\.]+(|px)$/i.test(""+e)?X.some(parseInt(""+e,10)):X.none()},yA=function(e){return P(e)?e+"px":e},wA=function(t,e,n){e=e.filter(function(e){return t<e}),n=n.filter(function(e){return e<t});return e.or(n).getOr(t)},xA=function(e){var t=Ob(e),n=Ab(e),r=Mb(e);return bA(t).map(function(e){return wA(e,n,r)})},CA=function(e){return xA(e).getOr(Ob(e))},SA=function(e){var t=Eb(e),n=_b(e),r=Db(e);return bA(t).map(function(e){return wA(e,n,r)})},kA=function(e){return SA(e).getOr(Eb(e))},TA=function(e,t){e=Vo(e);return{pos:t?e.y:e.bottom,bounds:e}},OA=Object.freeze({__proto__:null,render:function(t,n,r,o,e){function i(){var e;s.get()?f.show():(s.set(f_.getHeader(c).getOrDie()),e=Kb(t),xd(e,u),xd(e,a),LO(t,n,r,o),f_.setMenubar(c,NO(t,r)),f.show(),VO(t,l,f,d),t.nodeChanged())}var u=n.mothership,a=n.uiMothership,c=n.outerContainer,s=T(null),l=S.fromDom(e.targetNode),f=HO(t,l,n,o,s),d=t.getParam("toolbar_persist",!1,"boolean");b_(t);return t.on("show",i),t.on("hide",f.hide),d||(t.on("focus",i),t.on("blur",f.hide)),t.on("init",function(){(t.hasFocus()||d)&&i()}),A1(t,n),{editorContainer:c.element.dom,api:{show:function(){f.show()},hide:function(){f.hide()},enable:function(){ly(n,!1)},disable:function(){ly(n,!0)},isDisabled:function(){return te.isDisabled(c)}}}}}),EA="contexttoolbar-show",_A="contexttoolbar-hide",AA=function(e){return{hide:function(){return Y(e,Du())},getValue:function(){return ee.getValue(e)}}},DA=function(n,r){return Z(oT,function(e,t){e=n.get(e),e=AA(e);r.onAction(e,t.event.buttonApi)})},MA=function(e,t,n){var r=t.original,r=(r.primary,ue(r,["primary"])),r=ki(l0(A(A({},r),{type:"button",onAction:G})));return uA(r,n.backstage.shared.providers,[DA(e,t)])},NA=function(e,t,n){var r=t.original,r=(r.primary,ue(r,["primary"])),r=ki(d0(A(A({},r),{type:"togglebutton",onAction:G})));return aA(r,n.backstage.shared.providers,[DA(e,t)])},RA=function(e,t,n){n={backstage:{shared:{providers:n}}};return("contextformtogglebutton"===t.type?NA:MA)(e,t,n)},zA=function(t,e,n){var r=x(e,function(e){return ie(RA(t,e,n))});return{asSpecs:function(){return x(r,function(e){return e.asSpec()})},findPrimary:function(n){return $t(e,function(e,t){return e.primary?X.from(r[t]).bind(function(e){return e.getOpt(n)}).filter(j(te.isDisabled)):X.none()})}}},BA={renderContextForm:function(e,t,n){return l_({type:e,uid:O("context-toolbar"),initGroups:jO(t,n),onEscape:X.none,cyclicKeying:!0,providers:n})},buildInitGroups:jO},PA=function(e,t,n){return t.bottom-e.y>=(n=void 0===n?.01:n)&&e.bottom-t.y>=n},IA=function(e){var t=e.getBoundingClientRect();return t.height<=0&&t.width<=0?(e=Ar(S.fromDom(e.startContainer),e.startOffset).element,(Dn(e)?Cr(e):X.some(e)).filter(An).map(function(e){return e.dom.getBoundingClientRect()}).getOr(t)):t},LA=function(e){var t,n=e.selection.getRng(),n=IA(n);return e.inline?(t=Ao(),Ho(t.left+n.left,t.top+n.top,n.width,n.height)):(t=jo(S.fromDom(e.getBody())),Ho(t.x+n.left,t.y+n.top,n.width,n.height))},FA=function(e,t){return t.filter(Ir).map(jo).getOrThunk(function(){return LA(e)})},HA=function(e,t,n){var r=Math.max(e.x+n,t.x);return{x:r,width:Math.min(e.right-n,t.right)-r}},VA=function(e,t,n,r,o,i){var u=S.fromDom(e.getContainer()),a=hs(u,".tox-editor-header").getOr(u),a=Vo(a),c=a.y>=t.bottom,r=r&&!c;return e.inline&&r?{y:Math.max(a.bottom+i,n.y),bottom:n.bottom}:e.inline&&!r?{y:n.y,bottom:Math.min(a.y-i,n.bottom)}:(c="line"===o?Vo(u):t,r?{y:Math.max(a.bottom+i,n.y),bottom:Math.min(c.bottom-i,n.bottom)}:{y:Math.max(c.y+i,n.y),bottom:Math.min(a.y-i,n.bottom)})},jA=function(e,t,n,r){void 0===r&&(r=0);var o=Ro(window),i=Vo(S.fromDom(e.getContentAreaContainer())),u=Pb(e)||Ib(e)||Fb(e),a=HA(i,o,r),c=a.x,a=a.width;return e.inline&&!u?Ho(c,o.y,a,o.height):(u=t.header.isPositionedAtTop(),e=(t=VA(e,i,o,u,n,r)).y,i=t.bottom,Ho(c,e,a,i-e))},UA=12,WA={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},$A={maxHeightFunction:Sf(),maxWidthFunction:JE()},qA=function(e,t){var e=e.selection.getRng(),n=Ar(S.fromDom(e.startContainer),e.startOffset);return e.startContainer===e.endContainer&&e.startOffset===e.endOffset-1&&gr(n.element,t)},GA=function(t,e,n){var r=Zr(t,"position"),e=(D(t,"position",e),n(t));return r.each(function(e){return D(t,"position",e)}),e},KA=function(e){return"node"===e},XA=function(e,t,n,r,o){var i=LA(e),u=r.lastElement().exists(function(e){return gr(n,e)});return qA(e,n)?u?cv:rv:u?GA(t,r.getMode(),function(){return PA(i,Vo(t))&&!r.isReposition()?lv:cv}):("fixed"===r.getMode()?o.y+Ao().top:o.y)+(oo(t)+UA)<=i.y?rv:ov},YA=function(a,e,c,t){function n(e){return KA(t)?[(u=e,function(e,t,n,r,o){var i=XA(a,r,u,c,o),e=A(A({},e),{y:o.y,height:o.height});return A(A({},i(e,t,n,r,o)),{alwaysFit:!0})})]:[];var u}return e?{onLtr:function(e){return[al,nl,rl,ol,il,ul].concat(n(e))},onRtl:function(e){return[al,rl,nl,il,ol,ul].concat(n(e))}}:{onLtr:function(e){return[ul,al,ol,nl,il,rl].concat(n(e))},onRtl:function(e){return[ul,al,il,rl,ol,nl].concat(n(e))}}},JA=function(e,t,n,r){return"line"===t?{bubble:_f(UA,0,WA),layouts:{onLtr:function(){return[cl]},onRtl:function(){return[sl]}},overrides:$A}:{bubble:_f(0,UA,WA,1/UA),layouts:YA(e,n,r,t),overrides:$A}},ZA=function(t,e){e=Et(e,function(e){return e.predicate(t.dom)}),e=Ot(e,function(e){return"contexttoolbar"===e.type});return{contextToolbars:e.pass,contextForms:e.fail}},QA=function(e){var t,n,r,o;return e.length<=1?e:(t=function(t){return Et(e,function(e){return e.position===t})},n=(r=function(t){return Ct(e,function(e){return e.position===t})})("selection"),r=r("node"),n||r?r&&n?(r=t("node"),o=x(t("selection"),function(e){return A(A({},e),{position:"node"})}),r.concat(o)):t(n?"selection":"node"):t("line"))},eD=function(e){var t;return e.length<=1?e:(t=function(t){return Mt(e,function(e){return e.position===t})})("selection").orThunk(function(){return t("node")}).orThunk(function(){return t("line")}).map(function(e){return e.position}).fold(function(){return[]},function(t){return Et(e,function(e){return e.position===t})})},tD=function(e,t,n){var t=ZA(e,t);return 0<t.contextForms.length?X.some({elem:e,toolbars:[t.contextForms[0]]}):0<(n=ZA(e,n)).contextForms.length?X.some({elem:e,toolbars:[n.contextForms[0]]}):0<t.contextToolbars.length||0<n.contextToolbars.length?(t=QA(t.contextToolbars.concat(n.contextToolbars)),X.some({elem:e,toolbars:t})):X.none()},nD=function(e,t,r){return e(t)?X.none():qi(t,function(e){var t,n;return An(e)&&(t=(n=ZA(e,r.inNodeScope)).contextToolbars,0<(n=0<(n=n.contextForms).length?n:eD(t)).length)?X.some({elem:e,toolbars:n}):X.none()},e)},rD=function(e,t){function n(e){return gr(e,r)}var r=S.fromDom(t.getBody()),o=S.fromDom(t.selection.getNode());return n(t=o)||vr(r,t)?tD(o,e.inNodeScope,e.inEditorScope).orThunk(function(){return nD(n,o,e)}):X.none()},oD=function(a,c){var s={},l=[],f=[],d={},m={},e=qt(a);return w(e,function(e){var t,n,r,o,i,u=a[e];"contextform"===u.type?(r=e,i=ki(g0(o=u)),(s[r]=i).launch.map(function(e){d["form:"+r]=A(A({},o.launch),{type:"contextformtogglebutton"===e.type?"togglebutton":"button",onAction:function(){c(i)}})}),("editor"===i.scope?f:l).push(i),m[r]=i):"contexttoolbar"===u.type&&(t=e,h0(n=u).each(function(e){("editor"===n.scope?f:l).push(e),m[t]=e}))}),{forms:s,inNodeScope:l,inEditorScope:f,lookupTable:m,formNavigators:d}},iD=O("forward-slide"),uD=O("backward-slide"),aD=O("change-slide-event"),cD="tox-pop--resizing",sD=function(e){var n=T([]);return Kh.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:function(e){n.set([]),Kh.getContent(e).each(function(e){to(e.element,"visibility")}),pc(e.element,cD),to(e.element,"width")},inlineBehaviours:Q([re("context-toolbar-events",[ta(yu(),function(e,t){"width"===t.event.raw.propertyName&&(pc(e.element,cD),to(e.element,"width"))}),Z(aD,function(e,t){var n=e.element,r=(to(n,"width"),go(n)),o=(Kh.setContent(e,t.event.contents),mc(n,cD),go(n));D(n,"width",r+"px"),Kh.getContent(e).each(function(e){t.event.focus.bind(function(e){return kl(e),El(n)}).orThunk(function(){return N.focusIn(e),Ol(Nr(n))})}),fv.setTimeout(function(){D(e.element,"width",o+"px")},0)}),Z(iD,function(t,e){Kh.getContent(t).each(function(e){n.set(n.get().concat([{bar:e,focus:Ol(Nr(t.element))}]))}),J(t,aD,{contents:e.event.forwardContents,focus:X.none()})}),Z(uD,function(t,e){Ut(n.get()).each(function(e){n.set(n.get().slice(0,n.get().length-1)),J(t,aD,{contents:Pc(e.bar),focus:e.focus})})})]),N.config({mode:"special",onEscape:function(t){return Ut(n.get()).fold(function(){return e.onEscape()},function(e){return Y(t,uD),X.some(!0)})}})]),lazySink:function(){return M.value(e.sink)}})},lD="tox-pop--transition",fD=function(o,e,i,u){function a(){var e,t;return!v()||(e=h(),t=un(g.get(),"node")?FA(o,d.get()):LA(o),e.height<=0)||!PA(t,e)}function t(){d.clear(),m.clear(),g.clear(),Kh.hide(p)}function n(){var e;Kh.isOpen(p)&&(e=p.element,to(e,"display"),a()?D(e,"display","none"):(m.set(0),Kh.reposition(p)))}function c(e){return{dom:{tag:"div",classes:["tox-pop__dialog"]},components:[e],behaviours:Q([N.config({mode:"acyclic"}),re("pop-dialog-wrap-events",[na(function(e){o.shortcuts.add("ctrl+F9","focus statusbar",function(){return N.focusIn(e)})}),ra(function(e){o.shortcuts.remove("ctrl+F9")})])])}}function r(e,t){var n,r;w.cancel(),v()&&(n=y(e),r=function(e,t){t="node"===e?l.anchors.node(t):l.anchors.cursor(),e=JA(o,e,f(),{lastElement:d.get,isReposition:function(){return un(m.get(),0)},getMode:function(){return qg.getMode(i)}});return Go(t,e)}(e=e[0].position,t),g.set(e),m.set(1),e=p.element,to(e,"display"),un(sn(t,d.get(),gr),!0)||(pc(e,lD),qg.reset(i,p)),Kh.showWithinBounds(p,c(n),{anchor:r,transition:{classes:[lD],mode:"placement"}},function(){return X.some(h())}),t.fold(d.clear,d.set),a())&&D(e,"display","none")}var s=u.backstage,l=s.shared,f=ar().deviceType.isTouch,d=ef(),m=ef(),g=ef(),p=Bc(sD({sink:i,onEscape:function(){return o.focus(),X.some(!0)}})),h=function(){var e=g.get().getOr("node"),t=KA(e)?1:0;return jA(o,l,e,t)},v=function(){return!(o.removed||f()&&s.isContextMenuOpen())},b=Rn(function(){return oD(e,function(e){e=y([e]);J(p,iD,{forwardContents:c(e)})})}),y=function(e){var t=o.ui.registry.getAll().buttons,n=b(),r=A(A({},t),n.formNavigators),t=Hb(o)===D1.scrolling?D1.scrolling:D1.default,n=Rt(x(e,function(e){return"contexttoolbar"===e.type?pA(o,{buttons:r,toolbar:e.items,allowToolbarGroups:!1},u,X.some(["form:"])):(t=l.providers,BA.buildInitGroups(e,t));var t}));return l_({type:t,uid:O("context-toolbar"),initGroups:n,onEscape:X.none,cyclicKeying:!0,providers:l.providers})},w=N1(function(){var e;o.hasFocus()&&!o.removed&&(hc(p.element,lD)?w.throttle():(e=b(),rD(e,o).fold(t,function(e){r(e.toolbars,X.some(e.elem))})))},17);o.on("init",function(){o.on("remove",t),o.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",n),o.on("click keyup focus SetContent",w.throttle),o.on(_A,t),o.on(EA,function(t){var e=b();C(e.lookupTable,t.toolbarKey).each(function(e){r([e],fn(t.target!==o,t.target)),Kh.getContent(p).each(N.focusIn)})}),o.on("focusout",function(e){fv.setEditorTimeout(o,function(){El(i.element).isNone()&&El(p.element).isNone()&&t()},0)}),o.on("SwitchMode",function(){o.mode.isReadOnly()&&t()}),o.on("AfterProgressState",function(e){e.state?t():o.hasFocus()&&w.throttle()}),o.on("NodeChange",function(e){El(p.element).fold(w.throttle,G)})})},dD=function(t){w([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],function(e){t.ui.registry.addToggleButton(e.name,{tooltip:e.text,icon:e.icon,onAction:C_(t,e.cmd),onSetup:y_(t,e.name)})}),t.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onAction:C_(t,"JustifyNone")})},mD={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},gD=(xh=["Infinity",(xh="[0-9]+")+"\\."+pD(xh)+pD(If="[eE][+-]?[0-9]+"),"\\."+xh+pD(If),xh+pD(If)].join("|"),new RegExp("^("+("[+-]?(?:"+xh+")")+")(.*)$"));function pD(e){return"(?:"+e+")?"}function hD(e,t){return n=t,X.from(gD.exec(e)).bind(function(e){var t=Number(e[1]),e=e[2];return ND(e,n)?X.some({value:t,unit:e}):X.none()}).map(function(e){return e.value+e.unit});var n}function vD(e,t){e.getSystem().addToGui(t),l5(t)}function bD(e,t,n){return e.getSystem().build(L2.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[t]},events:n}))}function yD(t,n,e,r,o){var r=e.update(r,o),i=e.getStartData().getOrThunk(function(){return h5(n,t)});r.each(function(e){p5(t,n,i,e)})}function wD(t,e,n,r){e.each(f5),n.snaps.each(function(e){o5(t,e)}),e=n.getTarget(t.element),r.reset(),n.onDrop(t,e)}function xD(e){return function(t,n){function r(e){n.setStartData(h5(t,e))}return Yu(ae([Z(Bu(),function(e){n.getStartData().each(function(){return r(e)})})],e(t,n,r),!0))}}function CD(i,u,a){return[Z(uu(),function(t,e){var n,r,o;0===e.event.raw.button&&(e.stop(),e={drop:e=function(){return wD(t,X.some(r),i,u)},delayDrop:(n=m2(e,200)).schedule,forceDrop:e,move:function(e){n.cancel(),yD(t,i,u,v5,e)}},r=bD(t,i.blockerClass,(o=e,Yu([Z(uu(),o.forceDrop),Z(su(),o.drop),Z(au(),function(e,t){o.move(t.event)}),Z(cu(),o.delayDrop)]))),a(t),vD(t,r))})]}function SD(o,i,u){function a(e){wD(e,c.get(),o,i),c.clear()}var c=ef();return[Z(nu(),function(t,e){e.stop();function n(){return a(t)}var r,e={drop:n,delayDrop:G,forceDrop:n,move:function(e){yD(t,o,i,b5,e)}},e=bD(t,o.blockerClass,(r=e,Yu([Z(nu(),r.forceDrop),Z(ou(),r.drop),Z(iu(),r.drop),Z(ru(),function(e,t){r.move(t.event)})])));c.set(e);u(t),vD(t,e)}),Z(ru(),function(e,t){t.stop(),yD(e,o,i,b5,t.event)}),Z(ou(),function(e,t){t.stop(),a(e)}),Z(iu(),a)]}function kD(i){function e(){D(_.element,"width",document.body.clientWidth+"px")}function u(){return M.value(p)}function a(){return n.bind(function(e){return f_.getThrobber(e)}).getOrDie("Could not find throbber element")}var t=i.inline,c=t?OA:vA,s=Yb(i)?aE:z3,n=X.none(),r=(o=ar()).browser.isIE()?["tox-platform-ie"]:[],o=o.deviceType.isTouch()?["tox-platform-touch"]:[],l=Ub(i),f=Kb(i),d=m1.isRtl()?{attributes:{dir:"rtl"}}:{},m={attributes:((m={})[Rf]=l?us.BottomToTop:us.TopToBottom,m)},g=function(){return n.bind(f_.getHeader)},p=Bc((f=gr(Lr(),f)&&"grid"===Yr(f,"display"),d={dom:A({tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(r).concat(o)},d),behaviours:Q([qg.config({useFixed:function(){return s.isDocked(g)}})])},y={dom:{styles:{width:document.body.clientWidth+"px"}},events:Yu([Z(Pu(),e)])},Go(d,f?y:{}))),h=ie({dom:{tag:"div",classes:["tox-anchorbar"]}}),v=_3(p,i,function(){return n.bind(function(e){return h.getOpt(e)}).getOrDie("Could not find a anchor bar element")}),d=f_.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:v,onEscape:function(){i.focus()}}),b=Hb(i),f=f_.parts.toolbar(A({dom:{tag:"div",classes:["tox-toolbar"]},getSink:u,providers:v.shared.providers,onEscape:function(){i.focus()},type:b,lazyToolbar:function(){return n.bind(function(e){return f_.getToolbar(e)}).getOrDie("Could not find more toolbar element")},lazyHeader:function(){return g().getOrDie("Could not find header element")}},m)),y=f_.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:v.shared.providers,onEscape:function(){i.focus()},type:b}),w=f_.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),x=f_.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}}),C=f_.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:v}),S=i.getParam("statusbar",!0,"boolean")&&!t?X.some(z5(i,v.shared.providers)):X.none(),w={dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[w,x]},x=Fb(i),k=Ib(i),T=Pb(i),m=f_.parts.header({dom:A({tag:"div",classes:["tox-editor-header"]},m),components:Rt([T?[d]:[],x?[y]:k?[f]:[],Gb(i)?[]:[h.asSpec()]]),sticky:Yb(i),editor:i,sharedBackstage:v.shared}),T=Rt([l?[]:[m],t?[]:[w],l?[m]:[]]),d=Rt([[{dom:{tag:"div",classes:["tox-editor-container"]},components:T}],t?[]:S.toArray(),[C]]),x=Xb(i),y=A(A({role:"application"},m1.isRtl()?{dir:"rtl"}:{}),x?{"aria-hidden":"true"}:{}),O=Bc(f_.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(t?["tox-tinymce-inline"]:[]).concat(l?["tox-tinymce--toolbar-bottom"]:[]).concat(o).concat(r),styles:A({visibility:"hidden"},x?{opacity:"0",border:"0"}:{}),attributes:y},components:d,behaviours:Q([fy(),te.config({disableClass:"tox-tinymce--disabled"}),N.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),n=X.some(O),E=(i.shortcuts.add("alt+F9","focus menubar",function(){f_.focusMenubar(O)}),i.shortcuts.add("alt+F10","focus toolbar",function(){f_.focusToolbar(O)}),i.addCommand("ToggleToolbarDrawer",function(){f_.toggleToolbarDrawer(O)}),i.addQueryStateHandler("ToggleToolbarDrawer",function(){return f_.isToolbarDrawerToggled(O)}),F2(O)),_=F2(p);return A3(i,E,_),{mothership:E,uiMothership:_,backstage:v,renderUI:function(){s.setup(i,v.shared,g),nM(i,v),IM(i,u,v),TE(i),LE(i,a,v.shared),Xt(Vb(i),function(e,t){i.ui.registry.addGroupToolbarButton(t,e)});var e=i.ui.registry.getAll(),t=e.buttons,n=e.menuItems,r=e.contextToolbars,e=e.sidebars,o=Lb(i),n={menuItems:n,menus:Zb(i),menubar:Qb(i),toolbar:o.getOrThunk(function(){return ey(i)}),allowToolbarGroups:b===D1.floating,buttons:t,sidebar:e},o=(fD(i,r,p,{backstage:v}),T5(i,p),i.getElement()),r=(t=yA(CA(i)),e=yA(kA(i)),i.inline||(eo("div","width",e)&&D(O.element,"width",e),eo("div","height",t)?D(O.element,"height",t):D(O.element,"height","200px")),t),e={mothership:E,uiMothership:_,outerContainer:O};return c.render(i,e,n,v,{targetNode:o,height:r})},getUi:function(){return{channels:{broadcastAll:_.broadcast,broadcastOn:_.broadcastOn,register:G}}}}}function TD(e){return[t("type"),Ai("columns",hi),e]}function OD(t){return Ei("items","items",Xo(),mi(xi(function(e){return Si("Checking item of "+t,rN,e).fold(function(e){return M.error(Oi(e))},function(e){return M.value(e)})})))}function ED(e){return{internalDialog:ki(Si("dialog",iN,e)),dataValidator:function(e){e=fN(e),e=zt(e,function(t){return lN(t).fold(function(){return[]},function(e){return[Ai(t.name,e)]})});return m(e)}(e),initialData:e.initialData}}function _D(e,n){return[Qu(fu(),ek),e(K2,function(e,t){n.onClose(),t.onClose()}),e(X2,function(e,t,n,r){t.onCancel(e),Y(r,K2)}),Z(Q2,function(e,t){return n.onUnblock()}),Z(Z2,function(e,t){return n.onBlock(t.event)})]}function AD(e){function r(e,a,c,s){return dN.open(function(e,t,n){function r(){return o.on(function(e){Kh.reposition(e),tE.refresh(e)})}var t=kR(t,n),o=ef(),i=l.shared.header.isPositionedAtTop(),u=gR({dataValidator:n,initialData:t,internalDialog:e},{redial:dN.redial,closeWindow:function(){o.on(Kh.hide),f.off("ResizeEditor",r),o.clear(),c(u.instanceApi)}},l,s),n=Bc(Kh.sketch(A(A({lazySink:l.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:{}},i?{}:{fireRepositionEventInstead:{}}),{inlineBehaviours:Q(ae([re("window-manager-inline-events",[Z(Fu(),function(e,t){Y(u.dialog,X2)})])],OR(f,d,i),!0)),isExtraPart:function(e,t){return TR(t)}})));return o.set(n),Kh.showWithin(n,Pc(u.dialog),{anchor:a},X.some(Lr())),d&&i||(tE.refresh(n),f.on("ResizeEditor",r)),u.instanceApi.setData(t),N.focusIn(u.dialog),u.instanceApi},e)}var l=e.backstage,f=e.editor,d=Yb(f),n=CR(e),o=SR(e);return{open:function(e,t,n){return void 0!==t&&"toolbar"===t.inline?r(e,l.shared.anchors.inlineDialog(),n,t.ariaAttrs):void 0!==t&&"cursor"===t.inline?r(e,l.shared.anchors.cursor(),n,t.ariaAttrs):(o=n,dN.open(function(e,t,n){var r=mR({dataValidator:n,initialData:t,internalDialog:e},{redial:dN.redial,closeWindow:function(){B5.hide(r.dialog),o(r.instanceApi)}},l);return B5.show(r.dialog),r.instanceApi.setData(t),r.instanceApi},e));var o},openUrl:function(e,t){return n=t,dN.openUrl(function(e){var t=xR(e,{closeWindow:function(){B5.hide(t.dialog),n(t.instanceApi)}},f,l);return B5.show(t.dialog),t.instanceApi},e);var n},alert:function(e,t){n.open(e,function(){t()})},close:function(e){e.close()},confirm:function(e,t){o.open(e,function(e){t(e)})}}}var DD,MD,ND=function(t,e){return Ct(e,function(e){return Ct(mD[e],function(e){return t===e})})},RD=function(u,a){function t(){var e=a.getOptions(u),o=a.getCurrent(u).map(a.hash),i=ef();return x(e,function(r){return{type:"togglemenuitem",text:a.display(r),onSetup:function(t){function e(e){e&&(i.on(function(e){return e.setActive(!1)}),i.set(t)),t.setActive(e)}e(un(o,a.hash(r)));var n=a.watcher(u,r,e);return function(){i.clear(),n()}},onAction:function(){return a.setCurrent(u,r)}}})}u.ui.registry.addMenuButton(a.name,{tooltip:a.text,icon:a.icon,fetch:function(e){return e(t())},onSetup:a.onToolbarSetup}),u.ui.registry.addNestedMenuItem(a.name,{type:"nestedmenuitem",text:a.text,getSubmenuItems:t,onSetup:a.onMenuSetup})},zD={name:"lineheight",text:"Line height",icon:"line-height",getOptions:function(e){return e.getParam("lineheight_formats","1 1.1 1.2 1.3 1.4 1.5 2","string").split(" ")},hash:function(e){return hD(e,["fixed","relative","empty"]).getOr(e)},display:v,watcher:function(e,t,n){return e.formatter.formatChanged("lineheight",n,!1,{value:t}).unbind},getCurrent:function(e){return X.from(e.queryCommandValue("LineHeight"))},setCurrent:function(e,t){return e.execCommand("LineHeight",!1,t)}},BD=function(n){return X.from(zb(n)).map(function(e){return{name:"language",text:"Language",icon:"language",getOptions:K(e),hash:function(e){return _(e.customCode)?e.code:e.code+"/"+e.customCode},display:function(e){return e.title},watcher:function(e,t,n){return e.formatter.formatChanged("lang",n,!1,{value:t.code,customValue:t.customCode}).unbind},getCurrent:function(e){e=S.fromDom(e.selection.getNode());return Gi(e,function(e){return X.some(e).filter(An).bind(function(t){return Ur(t,"lang").map(function(e){return{code:e,customCode:Ur(t,"data-mce-lang").getOrUndefined(),title:""}})})})},setCurrent:function(e,t){return e.execCommand("Lang",!1,t)},onToolbarSetup:function(e){var t=Zl();return e.setActive(n.formatter.match("lang",{},void 0,!0)),t.set(n.formatter.formatChanged("lang",e.setActive,!0)),t.clear}}})},PD=function(t){RD(t,zD),BD(t).each(function(e){return RD(t,e)})},ID=function(e,t){M_(e,t),I_(e,t),J_(e,t),X_(e,t),$_(e,t)},LD=function(t){return w_(t,"NodeChange",function(e){e.setDisabled(!t.queryCommandState("outdent"))})},FD=function(e){e.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:LD(e),onAction:C_(e,"outdent")}),e.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onAction:C_(e,"indent")})},HD=function(e){FD(e)},VD=function(e,t){return function(){e.execCommand("mceToggleFormat",!1,t)}},jD=function(n){$S.each([{name:"bold",text:"Bold",icon:"bold"},{name:"italic",text:"Italic",icon:"italic"},{name:"underline",text:"Underline",icon:"underline"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],function(e,t){n.ui.registry.addToggleButton(e.name,{tooltip:e.text,icon:e.icon,onSetup:y_(n,e.name),onAction:VD(n,e.name)})});for(var e=1;e<=6;e++){var t="h"+e;n.ui.registry.addToggleButton(t,{text:t.toUpperCase(),tooltip:"Heading "+e,onSetup:y_(n,t),onAction:VD(n,t)})}},UD=function(t){$S.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"help",text:"Help",action:"mceHelp",icon:"help"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"}],function(e){t.ui.registry.addButton(e.name,{tooltip:e.text,icon:e.icon,onAction:C_(t,e.action)})})},WD=function(t){$S.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],function(e){t.ui.registry.addToggleButton(e.name,{tooltip:e.text,icon:e.icon,onAction:C_(t,e.action),onSetup:y_(t,e.name)})})},$D=function(e){jD(e),UD(e),WD(e)},qD=function(t){$S.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through",shortcut:""},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript",shortcut:""},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript",shortcut:""},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting",shortcut:""},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document",shortcut:""},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"}],function(e){t.ui.registry.addMenuItem(e.name,{text:e.text,icon:e.icon,shortcut:e.shortcut,onAction:C_(t,e.action)})}),t.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onAction:VD(t,"code")})},GD=function(e){$D(e),qD(e)},KD=function(t,n){return w_(t,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",function(e){e.setDisabled(t.mode.isReadOnly()||!t.undoManager[n]())})},XD=function(e){e.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:KD(e,"hasUndo"),onAction:C_(e,"undo")}),e.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:KD(e,"hasRedo"),onAction:C_(e,"redo")})},YD=function(e){e.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",disabled:!0,onSetup:KD(e,"hasUndo"),onAction:C_(e,"undo")}),e.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",disabled:!0,onSetup:KD(e,"hasRedo"),onAction:C_(e,"redo")})},JD=function(e){XD(e),YD(e)},ZD=function(t){return w_(t,"VisualAid",function(e){e.setActive(t.hasVisual)})},QD=function(e){e.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:ZD(e),onAction:C_(e,"mceToggleVisualAid")})},eM=function(e){e.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:C_(e,"mceToggleVisualAid")})},tM=function(e){eM(e),QD(e)},nM=function(e,t){dD(e),GD(e),ID(e,t),JD(e),Gx(e),tM(e),HD(e),PD(e)},rM=function(e,t){return{type:"makeshift",x:e,y:t}},oM=function(e,t,n){return rM(e.x+t,e.y+n)},iM=function(e){return"longpress"===e.type||0===e.type.indexOf("touch")},uM=function(e){var t;return iM(e)?(t=e.touches[0],rM(t.pageX,t.pageY)):rM(e.pageX,e.pageY)},aM=function(e){var t;return iM(e)?(t=e.touches[0],rM(t.clientX,t.clientY)):rM(e.clientX,e.clientY)},cM=function(e,t){e=Sb.DOM.getPos(e);return oM(t,e.x,e.y)},sM=function(e,t){return"contextmenu"===t.type||"longpress"===t.type?e.inline?uM(t):cM(e.getContentAreaContainer(),aM(t)):lM(e)},lM=function(e){return{type:"selection",root:S.fromDom(e.selection.getNode())}},fM=function(e){return{type:"node",node:X.some(S.fromDom(e.selection.getNode())),root:S.fromDom(e.getBody())}},dM=function(e,t,n){switch(n){case"node":return fM(e);case"point":return sM(e,t);case"selection":return lM(e)}},mM=function(e,t,n,r,o,i){var n=n(),u=dM(e,t,i);yT(n,b0.CLOSE_ON_EXECUTE,r,!1).map(function(e){t.preventDefault(),Kh.showMenuAt(o,{anchor:u},{menu:{markers:V0("normal")},data:e})})},gM={onLtr:function(){return[al,nl,rl,ol,il,ul,rv,ov,nv,ev,tv,Qh]},onRtl:function(){return[al,rl,nl,il,ol,ul,rv,ov,tv,Qh,nv,ev]}},pM=12,hM={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},vM=function(e,t){var n,r=e.selection;return!(r.isCollapsed()||t.touches.length<1)&&(n=t.touches[0],t=r.getRng(),Dg(e.getWin(),Jf.domRange(t)).exists(function(e){return e.left<=n.clientX&&e.right>=n.clientX&&e.top<=n.clientY&&e.bottom>=n.clientY}))},bM=function(e){function t(){fv.setEditorTimeout(e,function(){e.selection.setRng(o)},10),i()}function n(e){e.preventDefault(),e.stopImmediatePropagation()}function r(){return i()}var o=e.selection.getRng(),i=(e.once("touchend",t),e.on("mousedown",n,!0),e.once("longpresscancel",r),function(){e.off("touchend",t),e.off("longpresscancel",r),e.off("mousedown",n)})},yM=function(e,t,n){e=dM(e,t,n);return A({bubble:_f(0,"point"===n?pM:0,hM),layouts:gM,overrides:{maxWidthFunction:JE(),maxHeightFunction:Sf()}},e)},wM=function(t,n,e,r,o,i,u){var a=yM(t,n,i);yT(e,b0.CLOSE_ON_EXECUTE,r,!0).map(function(e){n.preventDefault(),Kh.showMenuWithinBounds(o,{anchor:a},{menu:{markers:V0("normal"),highlightImmediately:u},data:e,type:"horizontal"},function(){return X.some(jA(t,r.shared,"node"===i?"node":"selection"))}),t.fire(_A)})},xM=function(t,n,r,o,i,u){function e(){var e=r();wM(t,n,e,o,i,u,m())}var a,c=ar(),s=c.os.isiOS(),l=c.os.isOSX(),f=c.os.isAndroid(),d=c.deviceType.isTouch(),m=function(){return!(f||s||l&&d)};(l||s)&&"node"!==u?(a=function(){bM(t),e()},vM(t,n)?a():(t.once("selectionchange",a),t.once("touchend",function(){return t.off("selectionchange",a)}))):e()},CM=function(e){return"string"==typeof e?e.split(/[ ,]/):e},SM=function(e){return e.getParam("contextmenu_never_use_native",!1,"boolean")},kM=function(e,t,n){var r=e.ui.registry.getAll().contextMenus;return X.from(e.getParam(t)).map(CM).getOrThunk(function(){return Et(CM(n),function(e){return rn(r,e)})})},TM=function(e){return!1===e.getParam("contextmenu")},OM=function(e){return kM(e,"contextmenu","link linkchecker image imagetools table spellchecker configurepermanentpen")},EM=function(e){return e.getParam("contextmenu_avoid_overlap","","string")},_M=function(e){return d(e)?"|"===e:"separator"===e.type},AM={type:"separator"},DM=function(t){function e(e){return{text:e.text,icon:e.icon,disabled:e.disabled,shortcut:e.shortcut}}if(d(t))return t;switch(t.type){case"separator":return AM;case"submenu":return A(A({type:"nestedmenuitem"},e(t)),{getSubmenuItems:function(){var e=t.getSubmenuItems();return d(e)?e:x(e,DM)}});default:return A(A({type:"menuitem"},e(t)),{onAction:L(t.onAction)})}},MM=function(e,t){var n;return 0===t.length?e:(n=Ut(e).filter(function(e){return!_M(e)}).fold(function(){return[]},function(e){return[AM]}),e.concat(n).concat(t).concat([AM]))},NM=function(n,e,r){e=At(e,function(t,e){return C(n,e.toLowerCase()).map(function(e){var e=e.update(r);return d(e)?MM(t,e.split(" ")):0<e.length?(e=x(e,DM),MM(t,e)):t}).getOrThunk(function(){return t.concat([e])})},[]);return 0<e.length&&_M(e[e.length-1])&&e.pop(),e},RM=function(e,t){return t.ctrlKey&&!SM(e)},zM=function(e,t){return"longpress"!==t.type&&(2!==t.button||t.target===e.getBody()&&""===t.pointerType)},BM=function(e,t){return zM(e,t)?e.selection.getStart(!0):t.target},PM=function(e,t){var n=EM(e),r=zM(e,t)?"selection":"point";return xn(n)&&(e=BM(e,t),d2(S.fromDom(e),n))?"node":r},IM=function(o,e,t){function n(e){return Kh.hide(u)}function r(r){var e;SM(o)&&r.preventDefault(),RM(o,r)||TM(o)||(e=PM(o,r),(i()?xM:mM)(o,r,function(){var e=BM(o,r),t=o.ui.registry.getAll(),n=OM(o);return NM(t.contextMenus,n,e)},t,u,e))}var i=ar().deviceType.isTouch,u=Bc(Kh.sketch({dom:{tag:"div"},lazySink:e,onEscape:function(){return o.focus()},onShow:function(){return t.setContextMenuState(!0)},onHide:function(){return t.setContextMenuState(!1)},fireDismissalEventInstead:{},inlineBehaviours:Q([re("dismissContextMenu",[Z(Fu(),function(e,t){c.close(e),o.focus()})])])}));o.on("init",function(){var e="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(i()?"":" ResizeWindow");o.on(e,n),o.on("longpress contextmenu",r)})},Tp=Pi([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),LM=function(t){return function(e){return e.translate(-t.left,-t.top)}},FM=function(t){return function(e){return e.translate(t.left,t.top)}},HM=function(n){return function(e,t){return At(n,function(e,t){return t(e)},uo(e,t))}},VM=function(e,t,n){return e.fold(HM([FM(n),LM(t)]),HM([LM(t)]),HM([]))},jM=function(e,t,n){return e.fold(HM([FM(n)]),HM([]),HM([FM(t)]))},UM=function(e,t,n){return e.fold(HM([]),HM([LM(n)]),HM([FM(t),LM(n)]))},WM=function(e,t,n,r,o,i){e=jM(e,o,i),t=jM(t,o,i);return Math.abs(e.left-t.left)<=n&&Math.abs(e.top-t.top)<=r},$M=function(e,t,n,r,o,i){e=jM(e,o,i),t=jM(t,o,i),o=Math.abs(e.left-t.left),i=Math.abs(e.top-t.top);return uo(o,i)},qM=function(e,t,n){e=e.fold(function(e,t){return{position:X.some("absolute"),left:X.some(e+"px"),top:X.some(t+"px")}},function(e,t){return{position:X.some("absolute"),left:X.some(e-n.left+"px"),top:X.some(t-n.top+"px")}},function(e,t){return{position:X.some("fixed"),left:X.some(e+"px"),top:X.some(t+"px")}});return A({right:X.none(),bottom:X.none()},e)},GM=function(e,n,r){return e.fold(function(e,t){return XM(e+n,t+r)},function(e,t){return YM(e+n,t+r)},function(e,t){return JM(e+n,t+r)})},KM=function(e,i,u,a){function t(r,o){return function(e,t){var n=r(i,u,a);return o(e.getOr(n.left),t.getOr(n.top))}}return e.fold(t(UM,XM),t(jM,YM),t(VM,JM))},XM=Tp.offset,YM=Tp.absolute,JM=Tp.fixed,ZM=function(e,t){e=jr(e,t);return _(e)?NaN:parseInt(e,10)},QM=function(e,t){var e=e.element,n=ZM(e,t.leftAttr),e=ZM(e,t.topAttr);return isNaN(n)||isNaN(e)?X.none():X.some(uo(n,e))},e5=function(e,t,n){e=e.element;k(e,t.leftAttr,n.left+"px"),k(e,t.topAttr,n.top+"px")},t5=function(e,t){e=e.element;$r(e,t.leftAttr),$r(e,t.topAttr)},n5=function(e,t,n,r){return QM(e,t).fold(function(){return n},function(e){return JM(e.left+r.left,e.top+r.top)})},r5=function(e,t,n,r,o,i){var n=n5(e,t,n,r),r=(t.mustSnap?u5:a5)(e,t,n,o,i),u=VM(n,o,i);return e5(e,t,u),r.fold(function(){return{coord:JM(u.left,u.top),extra:X.none()}},function(e){return{coord:e.output,extra:e.extra}})},o5=function(e,t){t5(e,t)},i5=function(e,n,r,o){return $t(e,function(e){var t=e.sensor;return WM(n,t,e.range.left,e.range.top,r,o)?X.some({output:KM(e.output,n,r,o),extra:e.extra}):X.none()})},u5=function(e,t,o,i,u){var n=t.getSnapPoints(e);return i5(n,o,i,u).orThunk(function(){return At(n,function(t,n){var e=n.sensor,r=$M(o,e,n.range.left,n.range.top,i,u);return t.deltas.fold(function(){return{deltas:X.some(r),snap:X.some(n)}},function(e){return(r.left+r.top)/2<=(e.left+e.top)/2?{deltas:X.some(r),snap:X.some(n)}:t})},{deltas:X.none(),snap:X.none()}).snap.map(function(e){return{output:KM(e.output,o,i,u),extra:e.extra}})})},a5=function(e,t,n,r,o){t=t.getSnapPoints(e);return i5(t,n,r,o)},ha=Object.freeze({__proto__:null,snapTo:function(e,t,n,r){var o=t.getTarget(e.element);t.repositionTarget&&(t=br(e.element),e=Ao(t),t=P3(o),r={coord:KM((r=r).output,r.output,e,t),extra:r.extra},r=qM(r.coord,e,t),Xr(o,r))}}),c5="data-initial-z-index",s5=function(e){Cr(e.element).filter(An).each(function(t){Ur(t,c5).fold(function(){return to(t,"z-index")},function(e){return D(t,"z-index",e)}),$r(t,c5)})},l5=function(e){Cr(e.element).filter(An).each(function(t){Zr(t,"z-index").each(function(e){k(t,c5,e)}),D(t,"z-index",Yr(e.element,"z-index"))})},f5=function(e){s5(e),e.getSystem().removeFromGui(e)},Eh=Ri("snaps",[i("getSnapPoints"),e("onSensor"),i("leftAttr"),i("topAttr"),s("lazyViewport",Uo),s("mustSnap",!1)]),Ep=[s("useFixed",W),i("blockerClass"),s("getTarget",v),s("onDrag",G),s("repositionTarget",!0),s("onDrop",G),it("getBounds",Uo),Eh],d5=function(t){return ln(Zr(t,"left"),Zr(t,"top"),Zr(t,"position"),function(e,t,n){return("fixed"===n?JM:XM)(parseInt(e,10),parseInt(t,10))}).getOrThunk(function(){var e=so(t);return YM(e.left,e.top)})},m5=function(e,t,n,r,o){var i=o.bounds,u=jM(t,n,r),a=Ks(u.left,i.x,i.x+i.width-o.width),u=Ks(u.top,i.y,i.y+i.height-o.height),c=YM(a,u);return t.fold(function(){var e=UM(c,n,r);return XM(e.left,e.top)},K(c),function(){var e=VM(c,n,r);return JM(e.left,e.top)})},g5=function(n,e,r,o,i,u,t){e=e.fold(function(){var e=GM(r,u.left,u.top),e=VM(e,o,i);return JM(e.left,e.top)},function(t){var e=r5(n,t,r,u,o,i);return e.extra.each(function(e){t.onSensor(n,e)}),e.coord});return m5(n,e,o,i,t)},p5=function(e,t,n,r){var o,i,u,a=t.getTarget(e.element);t.repositionTarget&&(o=br(e.element),o=Ao(o),i=P3(a),u=d5(a),u=g5(e,t.snaps,u,o,i,r,n),n=qM(u,o,i),Xr(a,n)),t.onDrag(e,a,r)},h5=function(e,t){return{bounds:e.getBounds(),height:io(t.element),width:po(t.element)}},v5=Object.freeze({__proto__:null,getData:function(e){return X.from(uo(e.x,e.y))},getDelta:function(e,t){return uo(t.left-e.left,t.top-e.top)}}),H2=ae(ae([],Ep,!0),[Ns("dragger",{handlers:xD(CD)})],!1),b5=Object.freeze({__proto__:null,getData:function(e){var e=e.raw.touches;return 1===e.length?(e=(e=e)[0],X.some(uo(e.clientX,e.clientY))):X.none()},getDelta:function(e,t){return uo(t.left-e.left,t.top-e.top)}}),Pf=ae(ae([],Ep,!0),[Ns("dragger",{handlers:xD(SD)})],!1),Ch=ae(ae([],Ep,!0),[Ns("dragger",{handlers:xD(function(e,t,n){return ae(ae([],CD(e,t,n),!0),SD(e,t,n),!0)})})],!1),y5=Zc({branchKey:"mode",branches:Object.freeze({__proto__:null,mouse:H2,touch:Pf,mouseOrTouch:Ch}),name:"dragging",active:{events:function(e,t){return e.dragger.handlers(e,t)}},extra:{snap:function(e){return{sensor:e.sensor,range:e.range,output:e.output,extra:X.from(e.extra)}}},state:Object.freeze({__proto__:null,init:function(){var o=X.none(),t=X.none(),e=K({});return za({readState:e,reset:function(){o=X.none(),t=X.none()},update:function(r,e){return r.getData(e).bind(function(e){return t=r,n=e,e=o.map(function(e){return t.getDelta(e,n)}),o=X.some(n),e;var t,n})},getStartData:function(){return t},setStartData:function(e){t=X.some(e)}})}}),apis:ha}),w5=40,x5=w5/2,C5=function(e,i,u,a,t,n){return e.fold(function(){return y5.snap({sensor:YM(u-x5,a-x5),range:uo(t,n),output:YM(X.some(u),X.some(a)),extra:{td:i}})},function(e){var t=u-x5,n=a-x5,r=w5,o=w5,e=e.element.dom.getBoundingClientRect();return y5.snap({sensor:YM(t,n),range:uo(r,o),output:YM(X.some(u-e.width/2),X.some(a-e.height/2)),extra:{td:i}})})},S5=function(e,o,i){return{getSnapPoints:e,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:function(e,t){var n,r,t=t.td;n=o.get(),r=t,n.exists(function(e){return gr(e,r)})||(o.set(t),i(t))},mustSnap:!0}},k5=function(e){return ie(dv.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:Q([y5.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:e}),kC.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}}))},T5=function(i,n){function t(e){var t=jo(e);return C5(g.getOpt(n),e,t.x,t.y,t.width,t.height)}function r(e){var t=jo(e);return C5(p.getOpt(n),e,t.right,t.bottom,t.width,t.height)}function o(e,t,n,r){n=n(t),y5.snapTo(e,n),b(e,t,function(e){return e[r]<0},function(e,t){return e[r]>t})}function u(e){return o(h,e,t,"top")}function a(e){return o(v,e,r,"bottom")}var c=T([]),s=T([]),e=T(!1),l=ef(),f=ef(),d=S5(function(){return x(c.get(),t)},l,function(t){f.get().each(function(e){i.fire("TableSelectorChange",{start:t,finish:e})})}),m=S5(function(){return x(s.get(),r)},f,function(t){l.get().each(function(e){i.fire("TableSelectorChange",{start:e,finish:t})})}),g=k5(d),p=k5(m),h=Bc(g.asSpec()),v=Bc(p.asSpec()),b=function(e,t,n,r){var t=t.dom.getBoundingClientRect(),o=(to(e.element,"display"),xr(S.fromDom(i.getBody())).dom.innerHeight),n=n(t),r=r(t,o);(n||r)&&D(e.element,"display","none")};ar().deviceType.isTouch()&&(i.on("TableSelectionChange",function(t){e.get()||(Jg(n,h),Jg(n,v),e.set(!0)),l.set(t.start),f.set(t.finish),t.otherCells.each(function(e){c.set(e.upOrLeftCells),s.set(e.downOrRightCells),u(t.start),a(t.finish)})}),i.on("ResizeEditor ResizeWindow ScrollContent",function(){l.get().each(u),f.get().each(a)}),i.on("TableSelectionClear",function(){e.get()&&(ep(h),ep(v),e.set(!1)),l.clear(),f.clear()}))},O5=function(e){if(1===e.nodeType){if("BR"===e.nodeName||e.getAttribute("data-mce-bogus"))return!0;if("bookmark"===e.getAttribute("data-mce-type"))return!0}return!1},E5=function(i,r,o){r.delimiter||(r.delimiter="");return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:Q([N.config({mode:"flow",selector:"div[role=button]"}),te.config({disabled:o.isDisabled}),fy(),V2.config({}),ne.config({}),re("elementPathEvents",[na(function(t,e){i.shortcuts.add("alt+F11","focus statusbar elementpath",function(){return N.focusIn(t)}),i.on("NodeChange",function(e){var n,e=function(e){for(var t=[],n=e.length;0<n--;){var r=e[n];if(1===r.nodeType&&!O5(r)){var o=i.fire("ResolveName",{name:r.nodeName.toLowerCase(),target:r});if(o.isDefaultPrevented()||t.push({name:o.name,element:r}),o.isPropagationStopped())break}}return t}(e.parents);0<e.length?ne.set(t,(e=x((e=e)||[],function(t,e){return dv.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{role:"button","data-index":e,"tab-index":-1,"aria-level":e+1},innerHtml:t.name},action:function(e){i.focus(),i.selection.select(t.element),i.nodeChanged()},buttonBehaviours:Q([dy.button(o.isDisabled),fy()])})}),n={dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0},innerHtml:" "+r.delimiter+" "}},At(e.slice(1),function(e,t){return e.push(n),e.push(t),e},[e[0]]))):ne.set(t,[])})})])]),components:[]}},_5=((_p=DD=DD||{})[_p.None=0]="None",_p[_p.Both=1]="Both",_p[_p.Vertical=2]="Vertical",function(e,t,n,r,o){var i={};return i.height=wA(r+t.top,Ab(e),Mb(e)),n===DD.Both&&(i.width=wA(o+t.left,_b(e),Db(e))),i}),A5=function(e,t,n){var r=S.fromDom(e.getContainer()),t=_5(e,t,n,oo(r),go(r));Kt(t,function(e,t){return D(r,t,yA(e))}),dw(e)},D5=function(e){var t=!e.hasPlugin("autoresize"),e=e.getParam("resize",t);return!1===e?DD.None:"both"===e?DD.Both:DD.Vertical},M5=function(e,t,n,r){n=uo(20*n,20*r);return A5(e,n,t),X.some(!0)},N5=function(r,e){var o=D5(r);return o===DD.None?X.none():X.some(S1("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{title:e.translate("Resize")},behaviours:[y5.config({mode:"mouse",repositionTarget:!1,onDrag:function(e,t,n){return A5(r,n,o)},blockerClass:"tox-blocker"}),N.config({mode:"special",onLeft:function(){return M5(r,o,-1,0)},onRight:function(){return M5(r,o,1,0)},onUp:function(){return M5(r,o,0,-1)},onDown:function(){return M5(r,o,0,1)}}),V2.config({}),oe.config({})]},e.icons))},R5=function(e,r){function o(e,t,n){ne.set(e,[Mc(r.translate(["{0} "+n,t[n]]))])}var t;return dv.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:Q([dy.button(r.isDisabled),fy(),V2.config({}),ne.config({}),ee.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),re("wordcount-events",[ia(function(e){var t=ee.getValue(e),n="words"===t.mode?"characters":"words";ee.setValue(e,{mode:n,count:t.count}),o(e,t.count,n)}),na(function(n){e.on("wordCountUpdate",function(e){var t=ee.getValue(n).mode;ee.setValue(n,{mode:t,count:e.wordCount}),o(n,e.wordCount,t)})})])]),eventOrder:((t={})[Ou()]=["disabling","alloy.base.behaviour","wordcount-events"],t)})},z5=function(e,t){var n,r=function(){var e=m1.translate(["Powered by {0}","Tiny"]);return{dom:{tag:"span",classes:["tox-statusbar__branding"],innerHtml:'<a href="https://www.tiny.cloud/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce&amp;utm_content=v5" rel="noopener" target="_blank" tabindex="-1" aria-label="'+e+'">'+e+"</a>"}}};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(n=[],e.getParam("elementpath",!0,"boolean")&&n.push(E5(e,{},t)),e.hasPlugin("wordcount")&&n.push(R5(e,t)),e.getParam("branding",!0,"boolean")&&n.push(r()),n=0<n.length?[{dom:{tag:"div",classes:["tox-statusbar__text-container"]},components:n}]:[],r=N5(e,t),n.concat(r.toArray()))}},Op=K([i("lazySink"),Mi("dragBlockClass"),it("getBounds",Uo),s("useTabstopAt",$),s("eventOrder",{}),Rd("modalBehaviours",[N]),Vc("onExecute"),Uc("onEscape")]),ma={sketch:v},yh=K([Dp({name:"draghandle",overrides:function(e,t){return{behaviours:Q([y5.config({mode:"mouse",getTarget:function(e){return gs(e,'[role="dialog"]').getOr(e)},blockerClass:e.dragBlockClass.getOrDie(new Error("The drag blocker class was not specified for a dialog with a drag handle: \n"+JSON.stringify(t,null,2)).message),getBounds:e.getDragBounds})])}}}),Ap({schema:[i("dom")],name:"title"}),Ap({factory:ma,schema:[i("dom")],name:"close"}),Ap({factory:ma,schema:[i("dom")],name:"body"}),Dp({factory:ma,schema:[i("dom")],name:"footer"}),gl({factory:{sketch:function(e,t){return A(A({},e),{dom:t.dom,components:t.components})}},schema:[s("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),s("components",[])],name:"blocker"})]),B5=Gd({name:"ModalDialog",configFields:Op(),partFields:yh(),factory:function(i,e,t,r){var o=ef(),n=O("modal-events"),u=A(A({},i.eventOrder),((u={})[Iu()]=[n].concat(i.eventOrder["alloy.system.attached"]||[]),u));return{uid:i.uid,dom:i.dom,components:e,apis:{show:function(e){o.set(e);var t=i.lazySink(e).getOrDie(),n=r.blocker(),n=t.getSystem().build(A(A({},n),{components:n.components.concat([Pc(e)]),behaviours:Q([oe.config({}),re("dialog-blocker-events",[ta(fu(),function(){N.focusIn(e)})])])}));Jg(t,n),N.focusIn(e)},hide:function(t){o.clear(),Cr(t.element).each(function(e){t.getSystem().getByDom(e).each(function(e){ep(e)})})},getBody:function(e){return Ip(e,i,"body")},getFooter:function(e){return Ip(e,i,"footer")},setIdle:function(e){ME.unblock(e)},setBusy:function(e,t){ME.block(e,t)}},eventOrder:u,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:dp(i.modalBehaviours,[ne.config({}),N.config({mode:"cyclic",onEnter:i.onExecute,onEscape:i.onEscape,useTabstopAt:i.useTabstopAt}),ME.config({getRoot:o.get}),re(n,[na(function(e){var t,n,r,o;n=e.element,t=Ip(e,i,"title").element,o=Ur(n,"id").fold(function(){var e=O("dialog-label");return k(t,"id",e),e},v),k(n,"aria-labelledby",o),n=e.element,r=Ip(e,i,"body").element,o=X.from(jr(n,"id")).fold(function(){var e=O("dialog-describe");return k(r,"id",e),e},v),k(n,"aria-describedby",o)})])])}},apis:{show:function(e,t){e.show(t)},hide:function(e,t){e.hide(t)},getBody:function(e,t){return e.getBody(t)},getFooter:function(e,t){return e.getFooter(t)},setBusy:function(e,t,n){e.setBusy(t,n)},setIdle:function(e,t){e.setIdle(t)}}}),Kf=m([t("type"),t("name")].concat(Ug)),_h=bi,bh=[Ei("name","name",Yo(function(){return O("button-name")}),vi),Ze("icon"),rt("align","end",["start","end"]),ot("primary",!1),ot("disabled",!1)],wh=ae(ae([],bh,!0),[t("text")],!1),tu=ae([Ge("type",["submit","cancel","custom"])],wh,!0),If=ae([Ge("type",["menu"]),Ze("text"),Ze("tooltip"),Ze("icon"),Ye("items",Kf)],bh,!0),xh=$e("type",{submit:tu,cancel:tu,custom:tu,menu:If}),Pi=[t("type"),t("text"),Ge("level",["info","warn","error","success"]),t("icon"),s("url","")],P5=m(Pi),Tp=[t("type"),t("text"),ot("disabled",!1),ot("primary",!1),Ei("name","name",Yo(function(){return O("button-name")}),vi),Ze("icon"),ot("borderless",!1)],I5=m(Tp),Eh=[t("type"),t("name"),t("label"),ot("disabled",!1)],L5=m(Eh),Ep=bi,H2=[t("type"),t("name")],Pf=H2.concat([Ze("label")]),Ch=Pf.concat([s("columns","auto")]),F5=m(Ch),ha=gi([t("value"),t("text"),t("icon")]),H5=m(Pf),_p=vi,V5=m(Pf),ma=vi,j5=H2.concat([nt("tag","textarea"),t("scriptId"),t("scriptUrl"),Bi("settings",void 0,Fn)]),U5=H2.concat([nt("tag","textarea"),Ke("init")]),W5=xi(function(e){return Si("customeditor.old",di(U5),e).orThunk(function(){return Si("customeditor.new",di(j5),e)})}),gl=vi,$5=m(Pf),Op=mi(Ln),yh=[t("type"),t("html"),rt("presets","presentation",["presentation","document"])],q5=m(yh),Ug=Pf.concat([ot("sandboxed",!0)]),G5=m(Ug),Kf=vi,bh=Pf.concat([Ai("currentState",m([i("blob"),t("url")]))]),K5=m(bh),tu=Pf.concat([Ze("inputMode"),Ze("placeholder"),ot("maximized",!1),ot("disabled",!1)]),X5=m(tu),If=vi,Pi=[t("text"),t("value")],Tp=[t("text"),Ye("items",(MD=Rn(function(){return Y5}),{extract:function(e,t){return MD().extract(e,t)},toString:function(){return MD().toString()}}))],Y5=Fe([m(Pi),m(Tp)]),Eh=Pf.concat([Ye("items",Y5),ot("disabled",!1)]),J5=m(Eh),Ch=vi,Fn=Pf.concat([Xe("items",[t("text"),t("value")]),tt("size",1),ot("disabled",!1)]),Z5=m(Fn),H2=vi,Ln=Pf.concat([ot("constrain",!0),ot("disabled",!1)]),Q5=m(Ln),yh=m([t("width"),t("height")]),Ug=[t("type"),Ye("header",vi),Ye("cells",mi(vi))],eN=m(Ug),bh=Pf.concat([Ze("placeholder"),ot("maximized",!1),ot("disabled",!1)]),tN=m(bh),tu=vi,Pi=Pf.concat([rt("filetype","file",["image","media","file"]),s("disabled",!1)]),nN=m(Pi),Tp=m([t("value"),s("meta",{})]),rN=Ie(function(){return Ue("type",{alertbanner:P5,bar:m((e=OD("bar"),[t("type"),e])),button:I5,checkbox:L5,colorinput:H5,colorpicker:V5,dropzone:$5,grid:m(TD(OD("grid"))),iframe:G5,input:X5,listbox:J5,selectbox:Z5,sizeinput:Q5,textarea:tN,urlinput:nN,customeditor:W5,htmlpanel:q5,imagetools:K5,collection:F5,label:m((e=OD("label"),[t("type"),t("label"),e])),table:eN,panel:oN});var e}),Eh=[t("type"),s("classes",[]),Ye("items",rN)],oN=m(Eh),Fn=[Ei("name","name",Yo(function(){return O("tab-name")}),vi),t("title"),Ye("items",rN)],Ln=[t("type"),Xe("tabs",Fn)],Ug=m(Ln),bh=wh,Pf=xh,iN=m([t("title"),Ai("body",Ue("type",{panel:oN,tabpanel:Ug})),nt("size","normal"),Ye("buttons",Pf),s("initialData",{}),it("onAction",G),it("onChange",G),it("onSubmit",G),it("onClose",G),it("onCancel",G),s("onTabChange",G)]),Pi=m(ae([Ge("type",["cancel","custom"])],bh,!0)),uN=m([t("title"),t("url"),Je("height"),Je("width"),et("buttons",Pi),it("onAction",G),it("onCancel",G),it("onClose",G),it("onMessage",G)]),aN=function(e){return a(e)?[e].concat(zt(nn(e),aN)):p(e)?zt(e,aN):[]},cN=function(e){return d(e.type)&&d(e.name)},sN={checkbox:Ep,colorinput:_p,colorpicker:ma,dropzone:Op,input:If,iframe:Kf,sizeinput:yh,selectbox:H2,listbox:Ch,size:yh,textarea:tu,urlinput:Tp,customeditor:gl,collection:ha,togglemenuitem:_h},lN=function(e){return X.from(sN[e.type])},fN=function(e){return Et(aN(e),cN)},dN={open:function(e,t){t=ED(t);return e(t.internalDialog,t.initialData,t.dataValidator)},openUrl:function(e,t){return e(ki(Si("dialog",uN,t)))},redial:ED},mN=function(e){var n=[],r={};return Kt(e,function(e,t){e.fold(function(){n.push(t)},function(e){r[t]=e})}),0<n.length?M.error(n):M.value(r)},gN=function(e,n){var t=ie(zS.sketch(function(t){return{dom:{tag:"div",classes:["tox-form"].concat(e.classes)},components:x(e.items,function(e){return b4(t,e,n)})}}));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[t.asSpec()]}],behaviours:Q([N.config({mode:"acyclic",useTabstopAt:j(tk)}),VS.memento(t),GS.memento(t,{postprocess:function(e){return mN(e).fold(function(e){return console.error(e),{}},v)}})])}},Eh=Kp({name:"TabButton",configFields:[s("uid",void 0),i("value"),Ei("dom","dom",Ne(function(){return{attributes:{role:"tab",id:O("aria"),"aria-selected":"false"}}}),pi()),Mi("action"),s("domModification",{}),Rd("tabButtonBehaviours",[oe,N,ee]),i("view")],factory:function(e,t){return{uid:e.uid,dom:e.dom,components:e.components,events:ug(e.action),behaviours:dp(e.tabButtonBehaviours,[oe.config({}),N.config({mode:"execution",useSpace:!0,useEnter:!0}),ee.config({store:{mode:"memory",initialValue:e.value}})]),domModification:e.domModification}}}),Fn=K([i("tabs"),i("dom"),s("clickToDismiss",!1),Rd("tabbarBehaviours",[Yp,N]),Fc(["tabClass","selectedClass"])]),Ln=Bs({factory:Eh,name:"tabs",unit:"tab",overrides:function(r){function o(e,t){Yp.dehighlight(e,t),J(e,Uu(),{tabbar:e,button:t})}function i(e,t){Yp.highlight(e,t),J(e,ju(),{tabbar:e,button:t})}return{action:function(e){var t=e.getSystem().getByUid(r.uid).getOrDie(),n=Yp.isHighlighted(t,e);(n&&r.clickToDismiss?o:n?G:i)(t,e)},domModification:{classes:[r.markers.tabClass]}}}}),wh=K([Ln]),pN=Gd({name:"Tabbar",configFields:Fn(),partFields:wh(),factory:function(e,t,n,r){return{uid:e.uid,dom:e.dom,components:t,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:dp(e.tabbarBehaviours,[Yp.config({highlightClass:e.markers.selectedClass,itemClass:e.markers.tabClass,onHighlight:function(e,t){k(t.element,"aria-selected","true")},onDehighlight:function(e,t){k(t.element,"aria-selected","false")}}),N.config({mode:"flow",getInitial:function(e){return Yp.getHighlighted(e).map(function(e){return e.element})},selector:"."+e.markers.tabClass,executeOnMove:!0})])}}}),xh=Kp({name:"Tabview",configFields:[Rd("tabviewBehaviours",[ne])],factory:function(e,t){return{uid:e.uid,dom:e.dom,behaviours:dp(e.tabviewBehaviours,[ne.config({})]),domModification:{attributes:{role:"tabpanel"}}}}}),Ug=K([s("selectFirst",!0),e("onChangeTab"),e("onDismissTab"),s("tabs",[]),Rd("tabSectionBehaviours",[])]),Pf=Ap({factory:pN,schema:[i("dom"),Di("markers",[i("tabClass"),i("selectedClass")])],name:"tabbar",defaults:function(e){return{tabs:e.tabs}}}),bh=Ap({factory:xh,name:"tabview"}),Pi=K([Pf,bh]),hN=Gd({name:"TabSection",configFields:Ug(),partFields:Pi(),factory:function(o,e,t,n){function r(e,t){Pp(e,o,"tabbar").each(function(e){t(e).each(qu)})}return{uid:o.uid,dom:o.dom,components:e,behaviours:fp(o.tabSectionBehaviours),events:Yu(Rt([o.selectFirst?[na(function(e,t){r(e,Yp.getFirst)})]:[],[Z(ju(),function(e,t){var n,r,t=t.event.button;n=t,r=ee.getValue(n),Pp(n,o,"tabview").each(function(t){Mt(o.tabs,function(e){return e.value===r}).each(function(e){e=e.view();Ur(n.element,"id").each(function(e){k(t.element,"aria-labelledby",e)}),ne.set(t,e),o.onChangeTab(t,n,e)})})}),Z(Uu(),function(e,t){t=t.event.button;o.onDismissTab(e,t)})]])),apis:{getViewItems:function(e){return Pp(e,o,"tabview").map(function(e){return ne.contents(e)}).getOr([])},showTab:function(e,n){r(e,function(t){var e=Yp.getCandidates(t);return Mt(e,function(e){return ee.getValue(e)===n}).filter(function(e){return!Yp.isHighlighted(t,e)})})}}}},apis:{getViewItems:function(e,t){return e.getViewItems(t)},showTab:function(e,t,n){e.showTab(t,n)}}}),vN=function(n,r,o){return x(n,function(e,t){ne.set(o,n[t].view());t=r.dom.getBoundingClientRect();return ne.set(o,[]),t.height})},bN=function(e){return jt(Ht(e,function(e,t){return t<e?-1:e<t?1:0}))},yN=function(e,t,n){var r=wr(e).dom,o=gs(e,".tox-dialog-wrap").getOr(e),o="fixed"===Yr(o,"position")?Math.max(r.clientHeight,window.innerHeight):Math.max(r.offsetHeight,r.scrollHeight),r=oo(t),t=t.dom.offsetLeft>=n.dom.offsetLeft+go(n)?Math.max(oo(n),r):r,n=parseInt(Yr(e,"margin-top"),10)||0,r=parseInt(Yr(e,"margin-bottom"),10)||0;return o-(oo(e)+n+r-t)},wN=function(e,t){jt(e).each(function(e){return hN.showTab(t,e.value)})},xN=function(e,t){D(e,"height",t+"px"),ar().browser.isIE()?to(e,"flex-basis"):D(e,"flex-basis",t+"px")},CN=function(e,r,o){gs(e,'[role="dialog"]').each(function(n){hs(n,'[role="tablist"]').each(function(t){o.get().map(function(e){return D(r,"height","0"),D(r,"flex-basis","0"),Math.min(e,yN(n,r,t))}).each(function(e){xN(r,e)})})})},SN=function(e){return hs(e,'[role="tabpanel"]')},kN=function(r){var i;return i=ef(),{smartTabHeight:{extraEvents:[na(function(e){var n=e.element;SN(n).each(function(t){D(t,"visibility","hidden"),e.getSystem().getByDom(t).toOptional().each(function(e){e=vN(r,t,e);bN(e).fold(i.clear,i.set)}),CN(n,t,i),to(t,"visibility"),wN(r,e),fv.requestAnimationFrame(function(){CN(n,t,i)})})}),Z(Pu(),function(e){var t=e.element;SN(t).each(function(e){CN(t,e,i)})}),Z(tC,function(e,t){var o=e.element;SN(o).each(function(t){var e=Ol(Nr(t)),n=(D(t,"visibility","hidden"),Zr(t,"height").map(function(e){return parseInt(e,10)})),r=(to(t,"height"),to(t,"flex-basis"),t.dom.getBoundingClientRect().height);n.forall(function(e){return e<r})?(i.set(r),CN(o,t,i)):n.each(function(e){xN(t,e)}),to(t,"visibility"),e.each(kl)})})],selectFirst:!1},naiveTabHeight:{extraEvents:[],selectFirst:!0}}},TN="send-data-to-section",ON="send-data-to-view",EN=function(e,n){function r(e){var e=ee.getValue(e),e=mN(e).getOr({}),t=i.get(),t=Go(t,e);i.set(t)}function o(e){var t=i.get();ee.setValue(e,t)}var i=T({}),u=T(null),e=x(e.tabs,function(e){return{value:e.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"],innerHtml:n.shared.providers.translate(e.title)},view:function(){return[zS.sketch(function(t){return{dom:{tag:"div",classes:["tox-form"]},components:x(e.items,function(e){return b4(t,e,n)}),formBehaviours:Q([N.config({mode:"acyclic",useTabstopAt:j(tk)}),re("TabView.form.events",[na(o),ra(r)]),Cl.config({channels:Vi([{key:TN,value:{onReceive:r}},{key:ON,value:{onReceive:o}}])})])}})]}}}),t=kN(e).smartTabHeight;return hN.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:function(e,t,n){t=ee.getValue(t);J(e,eC,{name:t,oldName:u.get()}),u.set(t)},tabs:e,components:[hN.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[pN.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:Q([V2.config({})])}),hN.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:t.selectFirst,tabSectionBehaviours:Q([re("tabpanel",t.extraEvents),N.config({mode:"acyclic"}),y.config({find:function(e){return jt(hN.getViewItems(e))}}),ee.config({store:{mode:"manual",getValue:function(e){return e.getSystem().broadcastOn([TN],{}),i.get()},setValue:function(e,t){i.set(t),e.getSystem().broadcastOn([ON],{})}}})])})},_N=O("update-dialog"),AN=O("update-title"),DN=O("update-body"),MN=O("update-footer"),NN=O("body-send-message"),RN=function(e,t,n,r){return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:A(A({},t.map(function(e){return{id:e}}).getOr({})),r?{"aria-live":"polite"}:{})},components:[],behaviours:Q([VS.childAt(0),Z_.config({channel:DN,updateState:function(e,t){return X.some({isTabPanel:function(){return"tabpanel"===t.body.type}})},renderComponents:function(e){return"tabpanel"!==e.body.type?[gN(e.body,n)]:[EN(e.body,n)]},initialData:e})])}},zN=function(e,t,n,r){return RN(e,X.some(t),n,r)},BN=function(e,t){e=RN(e,X.none(),t,!1);return B5.parts.body(e)},PN=function(e){e={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[ZS({dom:{tag:"iframe",attributes:{src:e.url}},behaviours:Q([V2.config({}),oe.config({})])})]}],behaviours:Q([N.config({mode:"acyclic",useTabstopAt:j(tk)})])};return B5.parts.body(e)},IN=xy.deviceType.isTouch(),LN=function(e,t){return{dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[e,t]}},FN=function(e,t){return B5.parts.close(dv.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close")}},action:e,buttonBehaviours:Q([V2.config({})])}))},HN=function(){return B5.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}})},VN=function(e,t){return B5.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:pv("<p>"+d1(t.translate(e))+"</p>")}]}]})},jN=function(e){return B5.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:e})},UN=function(e,t){return[L2.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:e}),L2.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:t})]},WN=function(t){var e="tox-dialog",n=e+"-wrap",r=n+"__backdrop",o=e+"__disable-scroll";return B5.sketch({lazySink:t.lazySink,onEscape:function(e){return t.onEscape(e),X.some(!0)},useTabstopAt:function(e){return!tk(e)},dom:{tag:"div",classes:[e].concat(t.extraClasses),styles:A({position:"relative"},t.extraStyles)},components:ae([t.header,t.body],t.footer.toArray(),!0),parts:{blocker:{dom:pv('<div class="'+n+'"></div>'),components:[{dom:{tag:"div",classes:IN?[r,r+"--opaque"]:[r]}}]}},dragBlockClass:n,modalBehaviours:Q(ae([oe.config({}),re("dialog-events",t.dialogEvents.concat([ta(fu(),function(e,t){N.focusIn(e)})])),re("scroll-lock",[na(function(){mc(Lr(),o)}),ra(function(){pc(Lr(),o)})])],t.extraBehaviours,!0)),eventOrder:A(((e={})[Ou()]=["dialog-events"],e[Iu()]=["scroll-lock","dialog-events","alloy.base.behaviour"],e[Lu()]=["alloy.base.behaviour","dialog-events","scroll-lock"],e),t.eventOrder)})},$N=function(e){return dv.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":e.translate("Close"),title:e.translate("Close")}},components:[S1("close",{tag:"div",classes:["tox-icon"]},e.icons)],action:function(e){Y(e,X2)}})},qN=function(e,t,n){function r(e){return[Mc(n.translate(e.title))]}return{dom:{tag:"div",classes:["tox-dialog__title"],attributes:A({},t.map(function(e){return{id:e}}).getOr({}))},components:r(e),behaviours:Q([Z_.config({channel:AN,renderComponents:r})])}},GN=function(){return{dom:pv('<div class="tox-dialog__draghandle"></div>')}},KN=function(e,t,n){return L2.sketch({dom:pv('<div class="tox-dialog__header"></div>'),components:[qN(e,X.some(t),n),GN(),$N(n)],containerBehaviours:Q([y5.config({mode:"mouse",blockerClass:"blocker",getTarget:function(e){return vs(e,'[role="dialog"]').getOrDie()},snaps:{getSnapPoints:function(){return[]},leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])})},XN=function(e,t){var n=B5.parts.title(qN(e,X.none(),t)),r=B5.parts.draghandle(GN()),t=B5.parts.close($N(t)),n=[n].concat(e.draggable?[r]:[]).concat([t]);return L2.sketch({dom:pv('<div class="tox-dialog__header"></div>'),components:n})},YN=function(e,t){return XN({title:t.shared.providers.translate(e),draggable:t.dialog.isDraggableModal()},t.shared.providers)},JN=function(e,t,n){return{dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":n.translate(e)},styles:{left:"0px",right:"0px",bottom:"0px",top:"0px",position:"absolute"}},behaviours:t,components:[{dom:pv('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}},ZN=function(e,r,t){return{onClose:function(){return t.closeWindow()},onBlock:function(n){B5.setBusy(e(),function(e,t){return JN(n.message,t,r)})},onUnblock:function(){B5.setIdle(e())}}},QN=function(e,t,n,r){return Bc(WN(A(A({},e),{lazySink:r.shared.getSink,extraBehaviours:ae([Z_.config({channel:_N,updateState:function(e,t){return X.some(t)},initialData:t}),GS.memory({})],e.extraBehaviours,!0),onEscape:function(e){Y(e,X2)},dialogEvents:n,eventOrder:((r={})[Tu()]=[Z_.name(),Cl.name()],r[Iu()]=["scroll-lock",Z_.name(),"messages","dialog-events","alloy.base.behaviour"],r[Lu()]=["alloy.base.behaviour","dialog-events","messages",Z_.name(),"scroll-lock"],r)})))},eR=function(e){return x(e,function(e){var t,n;return"menu"===e.type?(n=x((t=e).items,function(e){var t=T(!1);return A(A({},e),{storage:t})}),A(A({},t),{items:n})):e})},tR=function(e){return At(e,function(e,t){return"menu"===t.type?At(t.items,function(e,t){return e[t.name]=t.storage,e},e):e},{})},nR={initUrlDialog:function(u,e){function t(e,i){return Z(e,function(n,r){var t,o;t=n,o=function(e,t){i(u(),e,r.event,n)},Z_.getState(t).get().each(function(e){o(e,t)})})}return ae(ae([],_D(t,e),!0),[t(Y2,function(e,t,n){t.onAction(e,{name:n.name})})],!1)},initDialog:function(u,e,c){function t(e,i){return Z(e,function(n,r){var t,o;t=n,o=function(e,t){i(u(),e,r.event,n)},Z_.getState(t).get().each(function(e){o(e.internalDialog,t)})})}return ae(ae([],_D(t,e),!0),[t(J2,function(e,t){t.onSubmit(e)}),t(G2,function(e,t,n){t.onChange(e,{name:n.name})}),t(Y2,function(e,t,n,r){function o(){return N.focusIn(r)}function i(e){return Wr(e,"disabled")||Ur(e,"aria-disabled").exists(function(e){return"true"===e})}var u=Nr(r.element),a=Ol(u);t.onAction(e,{name:n.name,value:n.value}),Ol(u).fold(o,function(t){i(t)||a.exists(function(e){return vr(t,e)&&i(e)})?o():c().toOptional().filter(function(e){return!vr(e.element,t)}).each(o)})}),t(eC,function(e,t,n){t.onTabChange(e,{newTabName:n.name,oldTabName:n.oldName})}),ra(function(e){var t=u();ee.setValue(e,t.getData())})],!1)}},rR=function(e,t){return MT(e,e.type,t)},oR=function(t,e,n){return Mt(e,function(e){return e.name===n}).bind(function(e){return e.memento.getOpt(t)})},iR=function(e,t){function n(e,t){return L2.sketch({dom:{tag:"div",classes:["tox-dialog__footer-"+e]},components:x(t,function(e){return e.memento.asSpec()})})}t=t.map(function(e){return e.footerButtons}).getOr([]),t=Ot(t,function(e){return"start"===e.align});return[n("start",t.pass),n("end",t.fail)]},uR=function(e,r){return{dom:pv('<div class="tox-dialog__footer"></div>'),components:[],behaviours:Q([Z_.config({channel:MN,initialData:e,updateState:function(e,t){var n=x(t.buttons,function(e){var t=ie(rR(e,r));return{name:e.name,align:e.align,memento:t}});return X.some({lookupByName:function(e,t){return oR(e,n,t)},footerButtons:n})},renderComponents:iR})])}},aR=function(e,t){return uR(e,t)},cR=function(e,t){return B5.parts.footer(uR(e,t))},sR=function(t,n){var r;return t.getRoot().getSystem().isConnected()?(r=y.getCurrent(t.getFormWrapper()).getOr(t.getFormWrapper()),zS.getField(r,n).fold(function(){var e=t.getFooter();return Z_.getState(e).get().bind(function(e){return e.lookupByName(r,n)})},function(e){return X.some(e)})):X.none()},lR=function(e,t){e=e.getRoot();return Z_.getState(e).get().map(function(e){return ki(Si("data",e.dataValidator,t))}).getOr(t)},fR=function(i,r,u){function e(e){var t=i.getRoot();t.getSystem().isConnected()&&e(t)}var a={getData:function(){var e=i.getRoot(),e=e.getSystem().isConnected()?i.getFormWrapper():e,e=ee.getValue(e),t=Xt(u,function(e){return e.get()});return A(A({},e),t)},setData:function(o){e(function(e){var t=a.getData(),n=A(A({},t),o),t=lR(i,n),r=i.getFormWrapper();ee.setValue(r,t),Kt(u,function(e,t){rn(n,t)&&e.set(n[t])})})},disable:function(e){sR(i,e).each(te.disable)},enable:function(e){sR(i,e).each(te.enable)},focus:function(e){sR(i,e).each(oe.focus)},block:function(t){if(!d(t))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");e(function(e){J(e,Z2,{message:t})})},unblock:function(){e(function(e){Y(e,Q2)})},showTab:function(n){e(function(e){var t=i.getBody();Z_.getState(t).get().exists(function(e){return e.isTabPanel()})&&y.getCurrent(t).each(function(e){hN.showTab(e,n)})})},redial:function(n){e(function(e){var t=r(n);e.getSystem().broadcastOn([_N],t),e.getSystem().broadcastOn([AN],t.internalDialog),e.getSystem().broadcastOn([DN],t.internalDialog),e.getSystem().broadcastOn([MN],t.internalDialog),a.setData(t.initialData)})},close:function(){e(function(e){Y(e,K2)})}};return a},dR=function(e){switch(e){case"large":return["tox-dialog--width-lg"];case"medium":return["tox-dialog--width-md"];default:return[]}},mR=function(e,t,n){var r=YN(e.internalDialog.title,n),o=BN({body:e.internalDialog.body},n),i=eR(e.internalDialog.buttons),u=tR(i),i=cR({buttons:i},n),a=nR.initDialog(function(){return l},ZN(function(){return s},n.shared.providers,t),n.shared.getSink),c=dR(e.internalDialog.size),r={header:r,body:o,footer:X.some(i),extraClasses:c,extraBehaviours:[],extraStyles:{}},s=QN(r,e,a,n),o={getRoot:K(s),getBody:function(){return B5.getBody(s)},getFooter:function(){return B5.getFooter(s)},getFormWrapper:function(){var e=B5.getBody(s);return y.getCurrent(e).getOr(e)}},l=fR(o,t.redial,u);return{dialog:s,instanceApi:l}},gR=function(e,t,r,n){var o,i=O("dialog-label"),u=O("dialog-content"),a=ie(KN({title:e.internalDialog.title,draggable:!0},i,r.shared.providers)),c=ie(zN({body:e.internalDialog.body},u,r,n)),n=eR(e.internalDialog.buttons),s=tR(n),l=ie(aR({buttons:n},r)),n=nR.initDialog(function(){return d},{onBlock:function(n){ME.block(f,function(e,t){return JN(n.message,t,r.shared.providers)})},onUnblock:function(){ME.unblock(f)},onClose:function(){return t.closeWindow()}},r.shared.getSink),f=Bc({dom:{tag:"div",classes:["tox-dialog","tox-dialog-inline"],attributes:((o={role:"dialog"})["aria-labelledby"]=i,o["aria-describedby"]=u,o)},eventOrder:((i={})[Tu()]=[Z_.name(),Cl.name()],i[Ou()]=["execute-on-form"],i[Iu()]=["reflecting","execute-on-form"],i),behaviours:Q([N.config({mode:"cyclic",onEscape:function(e){return Y(e,K2),X.some(!0)},useTabstopAt:function(e){return!tk(e)&&("button"!==_n(e)||"disabled"!==jr(e,"disabled"))}}),Z_.config({channel:_N,updateState:function(e,t){return X.some(t)},initialData:e}),oe.config({}),re("execute-on-form",n.concat([ta(fu(),function(e,t){N.focusIn(e)})])),ME.config({getRoot:function(){return X.some(f)}}),ne.config({}),GS.memory({})]),components:[a.asSpec(),c.asSpec(),l.asSpec()]}),d=fR({getRoot:K(f),getFooter:function(){return l.get(f)},getBody:function(){return c.get(f)},getFormWrapper:function(){var e=c.get(f);return y.getCurrent(e).getOr(e)}},t.redial,s);return{dialog:f,instanceApi:d}},pR=tinymce.util.Tools.resolve("tinymce.util.URI"),hR=function(t){function e(e){t.getSystem().isConnected()&&e(t)}return{block:function(t){if(!d(t))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");e(function(e){J(e,Z2,{message:t})})},unblock:function(){e(function(e){Y(e,Q2)})},close:function(){e(function(e){Y(e,K2)})},sendMessage:function(t){e(function(e){e.getSystem().broadcastOn([NN],t)})}}},vR=["insertContent","setContent","execCommand","close","block","unblock"],bR=function(e){return a(e)&&-1!==vR.indexOf(e.mceAction)},yR=function(e){return!bR(e)&&a(e)&&rn(e,"mceAction")},wR=function(e,t,n){switch(n.mceAction){case"insertContent":e.insertContent(n.content);break;case"setContent":e.setContent(n.content);break;case"execCommand":var r=!!b(n.ui)&&n.ui;e.execCommand(n.cmd,r,n.value);break;case"close":t.close();break;case"block":t.block(n.message);break;case"unblock":t.unblock()}},xR=function(t,e,n,r){var o=YN(t.title,r),i=PN(t),u=t.buttons.bind(function(e){return 0===e.length?X.none():X.some(cR({buttons:e},r))}),e=nR.initUrlDialog(function(){return g},ZN(function(){return m},r.shared.providers,e)),a=A(A({},t.height.fold(function(){return{}},function(e){return{height:e+"px","max-height":e+"px"}})),t.width.fold(function(){return{}},function(e){return{width:e+"px","max-width":e+"px"}})),c=t.width.isNone()&&t.height.isNone()?["tox-dialog--width-lg"]:[],s=new pR(t.url,{base_uri:new pR(window.location.href)}),l=s.protocol+"://"+s.host+(s.port?":"+s.port:""),f=Zl(),d=[re("messages",[na(function(){var e=nf(S.fromDom(window),"message",function(e){s.isSameOrigin(new pR(e.raw.origin))&&(e=e.raw.data,bR(e)?wR(n,g,e):yR(e)&&t.onMessage(g,e))});f.set(e)}),ra(f.clear)]),Cl.config({channels:((d={})[NN]={onReceive:function(e,t){hs(e.element,"iframe").each(function(e){e.dom.contentWindow.postMessage(t,l)})}},d)})],m=QN({header:o,body:i,footer:u,extraClasses:c,extraBehaviours:d,extraStyles:a},t,e,r),g=hR(m);return{dialog:m,instanceApi:g}},CR=function(a){var c=a.backstage.shared;return{open:function(e,t){function n(){B5.hide(u),t()}var r=ie(MT({name:"close-alert",text:"OK",primary:!0,align:"end",disabled:!1,icon:X.none()},"cancel",a.backstage)),o=HN(),i=FN(n,c.providers),u=Bc(WN({lazySink:function(){return c.getSink()},header:LN(o,i),body:VN(e,c.providers),footer:X.some(jN(UN([],[r.asSpec()]))),onEscape:n,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Z(X2,n)],eventOrder:{}})),o=(B5.show(u),r.get(u));oe.focus(o)}}},SR=function(c){var s=c.backstage.shared;return{open:function(e,t){function n(e){B5.hide(a),t(e)}var r=ie(MT({name:"yes",text:"Yes",primary:!0,align:"end",disabled:!1,icon:X.none()},"submit",c.backstage)),o=MT({name:"no",text:"No",primary:!1,align:"end",disabled:!1,icon:X.none()},"cancel",c.backstage),i=HN(),u=FN(function(){return n(!1)},s.providers),a=Bc(WN({lazySink:function(){return s.getSink()},header:LN(i,u),body:VN(e,s.providers),footer:X.some(jN(UN([],[o,r.asSpec()]))),onEscape:function(){return n(!1)},extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Z(X2,function(){return n(!1)}),Z(J2,function(){return n(!0)})],eventOrder:{}})),i=(B5.show(a),r.get(a));oe.focus(i)}}},kR=function(e,t){return ki(Si("data",t,e))},TR=function(e){return d2(e,".tox-alert-dialog")||d2(e,".tox-confirm-dialog")},OR=function(e,t,n){return t&&n?[]:[tE.config({contextual:{lazyContext:function(){return X.some(Vo(S.fromDom(e.getContentAreaContainer())))},fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"]})]};q.add("silver",function(e){var t=kD(e),n=t.uiMothership,r=t.backstage,o=t.renderUI,t=t.getUi,i=(f2(e,r.shared),AD({editor:e,backstage:r}));return{renderUI:o,getWindowManagerImpl:K(i),getNotificationManagerImpl:function(){return O1(e,{backstage:r},n)},ui:t()}})}(),function(){var y=function(){return(y=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function r(e,t){var n={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n}function o(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||((r=r||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}function u(n){return function(e){return t=typeof(e=e),(null===e?"null":"object"==t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"==t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t)===n;var t}}function a(t){return function(e){return typeof e===t}}function H(t){return function(e){return t===e}}function V(t,n){return function(e){return t(n(e))}}var j=u("string"),U=u("object"),W=u("array"),$=H(null),q=a("boolean"),G=H(void 0),K=function(e){return null==e},X=function(e){return!K(e)},Y=a("function"),J=a("number"),C=function(){},Z=function(n,r){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n(r.apply(null,e))}},h=function(e){return function(){return e}},w=function(e){return e},Q=function(e,t){return e===t};function ee(r){for(var o=[],e=1;e<arguments.length;e++)o[e-1]=arguments[e];return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=o.concat(e);return r.apply(null,n)}}function te(){return ue}var ne=function(t){return function(e){return!t(e)}},re=function(e){return function(){throw new Error(e)}},oe=function(e){return e()},ie=h(!1),x=h(!0),ue={fold:function(e,t){return e()},isSome:ie,isNone:x,getOr:e=w,getOrThunk:ae,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:h(null),getOrUndefined:h(void 0),or:e,orThunk:ae,map:te,each:C,bind:te,exists:ie,forall:x,filter:function(){return ue},toArray:function(){return[]},toString:h("none()")};function ae(e){return e()}function ce(n){function e(){return o}function t(e){return e(n)}var r=h(n),o={fold:function(e,t){return t(n)},isSome:x,isNone:ie,getOr:r,getOrThunk:r,getOrDie:r,getOrNull:r,getOrUndefined:r,or:e,orThunk:e,map:function(e){return ce(e(n))},each:function(e){e(n)},bind:t,exists:t,forall:t,filter:function(e){return e(n)?o:ue},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return o}function se(){return zt(0,0)}function le(e,t){return-1!==e.indexOf(t)}function fe(t){return function(e){return le(e,t)}}function de(e){function t(e){return function(){return n===e}}var n=e.current,e=e.version;return{current:n,version:e,isEdge:t(jt),isChrome:t(Ut),isIE:t(Wt),isOpera:t($t),isFirefox:t(qt),isSafari:t(Gt)}}function me(e){function t(e){return function(){return n===e}}var n=e.current,e=e.version;return{current:n,version:e,isWindows:t(Yt),isiOS:t(Jt),isAndroid:t(Zt),isOSX:t(en),isLinux:t(Qt),isSolaris:t(tn),isFreeBSD:t(nn),isChromeOS:t(rn)}}function ge(e){return window.matchMedia(e).matches}function pe(e){return h("alloy."+e)}function he(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}}function ve(t){return function(e){return e.dom.nodeType===t}}function be(t,n){lr(t).fold(function(){mr(t,n)},function(e){t.dom.insertBefore(n.dom,e.dom)})}function ye(e){return e=yr(e),vr(e)?S.some(e):S.none()}function we(e){return O.fromDom(e.dom.host)}function xe(e,t,n){ao(e,n),io(e,t)}function Ce(n){return{isValue:x,isError:ie,getOr:h(n),getOrThunk:h(n),getOrDie:h(n),or:function(e){return Ce(n)},orThunk:function(e){return Ce(n)},fold:function(e,t){return t(n)},map:function(e){return Ce(e(n))},mapError:function(e){return Ce(n)},each:function(e){e(n)},bind:function(e){return e(n)},exists:function(e){return e(n)},forall:function(e){return e(n)},toOptional:function(){return S.some(n)}}}function Se(n){return{isValue:ie,isError:x,getOr:w,getOrThunk:function(e){return e()},getOrDie:function(){return re(String(n))()},or:w,orThunk:function(e){return e()},fold:function(e,t){return e(n)},map:function(e){return Se(n)},mapError:function(e){return Se(e(n))},each:C,bind:function(e){return Se(n)},exists:ie,forall:x,toOptional:S.none}}function ke(e,t,n){return e.stype===rt.Error?t(e.serror):n(e.svalue)}function Te(e){return{stype:rt.Value,svalue:e}}function Oe(e){return{stype:rt.Error,serror:e}}function Ee(u){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)throw new Error("Can't merge zero objects");for(var n={},r=0;r<e.length;r++){var o,i=e[r];for(o in i)$r(i,o)&&(n[o]=u(n[o],i[o]))}return n}}function _e(e){return po(h(e))}function Ae(e){return{tag:"mergeWithThunk",process:e}}function De(e){return Z(c.serror,St)(e)}function Me(e,t){return wo(e,function(){return"There are unsupported fields: ["+t.join(", ")+"] specified"})}function Ne(e,t){return wo(e,h(t))}function Re(e){return Pr(Ur(e,X))}function ze(o,i){return{extract:function(t,n){var e=Pr(n),r=(r=t,e=e,Ro(ko(o)).extract(r,e));return c.bind(r,function(e){e=k(e,function(e){return so(e,e,go(),i)});return No(e).extract(t,n)})},toString:function(){return"setOf("+i.toString()+")"}}}function Be(t,e){return ze(function(e){return c.fromResult(t(e))},e)}function Pe(e,t){return r=e,o=Fr(t,No),{extract:function(t,n){return p(n,r).fold(function(){return Co(t,r)},function(e){return Bo(t,n,o,e)})},toString:function(){return"chooseOn("+r+"). Possible values: "+Pr(o)}};var r,o}function Ie(e,t){return jo(e,e,go(),t)}function Le(e,t){return{key:e,value:hi({abort:t})}}function Fe(e,n,r){return{key:e,value:hi({run:function(e,t){n.apply(void 0,[e,t].concat(r))}})}}function He(e,t,n){var r,o,t=t.partUids[n];return o=t,D(r=e,function(e,t){e.getSystem().getByUid(o).each(function(e){Un(e,e.element,r,t)})})}function Ve(n,r,o){return Ti(function(e,t){o(e,n,r)})}function je(e,t,n,r,o,i){var u=Mo(e),e=qo(t,[Go("config",e)]);return Bi(u,e,t,n,r,o,i)}function Ue(e,t,n){return yu(),jo(t,t,n,Po(function(n){return b.value(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.apply(void 0,e)})}))}function We(e){return Ue(0,e,_e(C))}function $e(e){return Ue(0,e,_e(S.none))}function qe(e){return Ue(0,e,go())}function Ge(e){return Ue(0,e,go())}function Ke(e,t,n){(t=t.aria).update(e,t,n.get())}function Xe(t,e,n){e.toggleClass.each(function(e){(n.get()?io:ao)(t.element,e)})}function Ye(e,t,n){Je(e,t,n,!n.get())}function Je(e,t,n,r){(r?Au:Du)(e,t,n)}function Ze(e,t,n){Je(e,t,n,t.selected)}function Qe(e,t,n){E(e.element,"aria-expanded",n)}function et(e,t){t.ignore||(Wi(e.element),t.onFocus(e))}function tt(n,r){function e(e){var t=r(e);return t<=0||null===t?(e=Vu(e,n),parseFloat(e)||0):t}function o(n,e){return yt(e,function(e,t){t=Vu(n,t),t=void 0===t?0:parseInt(t,10);return isNaN(t)?e:e+t},0)}return{set:function(e,t){if(!J(t)&&!t.match(/^[0-9]+$/))throw new Error(n+".set accepts only positive integer values. Value was "+t);e=e.dom;Iu(e)&&(e.style[n]=t+"px")},get:e,getOuter:e,aggregate:o,max:function(e,t,n){e=o(e,n);return e<t?t-e:0}}}var nt,rt,ot,it,ut,at,ct,S={some:ce,none:te,from:function(e){return null==e?ue:ce(e)}},st=function(n){var r,o=!1;return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o||(o=!0,r=n.apply(null,e)),r}},lt=Array.prototype.slice,ft=Array.prototype.indexOf,dt=Array.prototype.push,mt=function(e,t){return ft.call(e,t)},gt=function(e,t){return-1<mt(e,t)},pt=function(e,t){for(var n=0,r=e.length;n<r;n++)if(t(e[n],n))return!0;return!1},k=function(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o)}return r},T=function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)},ht=function(e,t){for(var n=e.length-1;0<=n;n--)t(e[n],n)},vt=function(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r)&&n.push(i)}return n},bt=function(e,n,r){return ht(e,function(e,t){r=n(r,e,t)}),r},yt=function(e,n,r){return T(e,function(e,t){r=n(r,e,t)}),r},wt=function(e,t,n){for(var r=0,o=e.length;r<o;r++){var i=e[r];if(t(i,r))return S.some(i);if(n(i,r))break}return S.none()},xt=function(e,t){return wt(e,t,ie)},Ct=function(e,t){for(var n=0,r=e.length;n<r;n++)if(t(e[n],n))return S.some(n);return S.none()},St=function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!W(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);dt.apply(t,e[n])}return t},kt=function(e,t){return St(k(e,t))},Tt=function(e,t){for(var n=0,r=e.length;n<r;++n)if(!0!==t(e[n],n))return!1;return!0},Ot=function(e){e=lt.call(e,0);return e.reverse(),e},Et=function(e,t){return vt(e,function(e){return!gt(t,e)})},_t=function(e){return[e]},At=function(e,t){e=lt.call(e,0);return e.sort(t),e},Dt=function(e,t){return 0<=t&&t<e.length?S.some(e[t]):S.none()},Mt=function(e){return Dt(e,0)},Nt=function(e,t){for(var n=0;n<e.length;n++){var r=t(e[n],n);if(r.isSome())return r}return S.none()},Rt=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t))return r}},zt=function(e,t){return{major:e,minor:t}},Bt={nu:zt,detect:function(e,t){var n,r,t=String(t).toLowerCase();return 0===e.length?se():(r=Rt(e=e,n=t))?zt((e=function(e){return Number(n.replace(r,"$"+e))})(1),e(2)):{major:0,minor:0}},unknown:se},Pt=function(e,t){var n=String(t).toLowerCase();return xt(e,function(e){return e.search(n)})},It=function(e,t,n){return""===t||e.length>=t.length&&e.substr(n,n+t.length)===t},Lt=function(e,n){return e.replace(/\$\{([^{}]*)\}/g,function(e,t){t=n[t];return function(e){e=typeof e;return"string"==e||"number"==e}(t)?t.toString():e})},Ft=function(e,t){return It(e,t,e.length-t.length)},Ht=(nt=/^\s+|\s+$/g,function(e){return e.replace(nt,"")}),e=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,e=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return le(e,"edge/")&&le(e,"chrome")&&le(e,"safari")&&le(e,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,e],search:function(e){return le(e,"chrome")&&!le(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return le(e,"msie")||le(e,"trident")}},{name:"Opera",versionRegexes:[e,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:fe("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:fe("firefox")},{name:"Safari",versionRegexes:[e,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(le(e,"safari")||le(e,"mobile/"))&&le(e,"applewebkit")}}],t=[{name:"Windows",search:fe("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return le(e,"iphone")||le(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:fe("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:fe("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:fe("linux"),versionRegexes:[]},{name:"Solaris",search:fe("sunos"),versionRegexes:[]},{name:"FreeBSD",search:fe("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:fe("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Vt={browsers:h(e),oses:h(t)},jt="Edge",Ut="Chrome",Wt="IE",$t="Opera",qt="Firefox",Gt="Safari",Kt=function(){return de({current:void 0,version:Bt.unknown()})},Xt=de,Yt=(h(jt),h(Ut),h(Wt),h($t),h(qt),h(Gt),"Windows"),Jt="iOS",Zt="Android",Qt="Linux",en="OSX",tn="Solaris",nn="FreeBSD",rn="ChromeOS",on=function(){return me({current:void 0,version:Bt.unknown()})},un=me,an=(h(Yt),h(Jt),h(Zt),h(Qt),h(en),h(tn),h(nn),h(rn),function(e,t,n){var r,o,i,u,a,c,s,l=Vt.browsers(),f=Vt.oses(),t=t.bind(function(e){return r=l,Nt(e.brands,function(t){var n=t.brand.toLowerCase();return xt(r,function(e){return n===(null==(e=e.brand)?void 0:e.toLowerCase())}).map(function(e){return{current:e.name,version:Bt.nu(parseInt(t.version,10),0)}})});var r}).orThunk(function(){return Pt(l,n=e).map(function(e){var t=Bt.detect(e.versionRegexes,n);return{current:e.name,version:t}});var n}).fold(Kt,Xt),f=Pt(f,r=e).map(function(e){var t=Bt.detect(e.versionRegexes,r);return{current:e.name,version:t}}).fold(on,un),d=(i=t,u=e,n=n,d=(o=f).isiOS()&&!0===/ipad/i.test(u),a=o.isiOS()&&!d,c=o.isiOS()||o.isAndroid(),s=c||n("(pointer:coarse)"),n=d||!a&&c&&n("(min-device-width:768px)"),c=a||c&&!n,i=i.isSafari()&&o.isiOS()&&!1===/safari/i.test(u),u=!c&&!n&&!i,{isiPad:h(d),isiPhone:h(a),isTablet:h(n),isPhone:h(c),isTouch:h(s),isAndroid:o.isAndroid,isiOS:o.isiOS,isWebView:h(i),isDesktop:h(u)});return{browser:t,os:f,deviceType:d}}),cn=st(function(){return an(navigator.userAgent,S.from(navigator.userAgentData),ge)}),sn=function(){return cn()},e=h,ln=e("touchstart"),fn=e("touchmove"),dn=e("touchend"),mn=e("mousedown"),gn=e("mousemove"),pn=e("mouseup"),hn=e("mouseover"),vn=e("keydown"),bn=e("keyup"),yn=e("input"),wn=e("change"),xn=e("click"),Cn=e("transitionend"),Sn=e("selectstart"),t={tap:pe("tap")},kn=pe("focus"),Tn=pe("blur.post"),On=pe("paste.post"),En=pe("receive"),_n=pe("execute"),An=pe("focus.item"),Dn=t.tap,Mn=pe("longpress"),Nn=pe("system.init"),Rn=pe("system.attached"),zn=pe("system.detached"),Bn=pe("focusmanager.shifted"),Pn=pe("highlight"),In=pe("dehighlight"),Ln=function(e,t){jn(e,e.element,t,{})},Fn=function(e,t,n){jn(e,e.element,t,n)},Hn=function(e){Ln(e,_n())},Vn=function(e,t,n){jn(e,t,n,{})},jn=function(e,t,n,r){r=y({target:t},r);e.getSystem().triggerEvent(n,t,r)},Un=function(e,t,n,r){e.getSystem().triggerEvent(n,t,r.event)},Wn=9,$n=11,qn=1,O={fromHtml:function(e,t){t=(t||document).createElement("div");if(t.innerHTML=e,!t.hasChildNodes()||1<t.childNodes.length)throw console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node");return he(t.childNodes[0])},fromTag:function(e,t){t=(t||document).createElement(e);return he(t)},fromText:function(e,t){t=(t||document).createTextNode(e);return he(t)},fromDom:he,fromPoint:function(e,t,n){return S.from(e.dom.elementFromPoint(t,n)).map(he)}},Gn=function(e,t){e=e.dom;if(e.nodeType!==qn)return!1;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},Kn=function(e){return e.nodeType!==qn&&e.nodeType!==Wn&&e.nodeType!==$n||0===e.childElementCount},Xn=function(e,t){t=void 0===t?document:t.dom;return Kn(t)?[]:k(t.querySelectorAll(e),O.fromDom)},Yn=function(e,t){t=void 0===t?document:t.dom;return Kn(t)?S.none():S.from(t.querySelector(e)).map(O.fromDom)},v=function(e,t){return e.dom===t.dom},Jn=("undefined"!=typeof window||Function("return this;")(),function(e){return e.dom.nodeName.toLowerCase()}),Zn=ve(qn),Qn=ve(3),er=ve(Wn),tr=ve($n),nr=function(e){return O.fromDom(e.dom.ownerDocument)},rr=function(e){return er(e)?e:nr(e)},or=function(e){return S.from(e.dom.parentNode).map(O.fromDom)},ir=function(e,t){for(var n=Y(t)?t:ie,r=e.dom,o=[];null!==r.parentNode&&void 0!==r.parentNode;){var i=r.parentNode,u=O.fromDom(i);if(o.push(u),!0===n(u))break;r=i}return o},ur=function(t){return or(t).map(cr).map(function(e){return vt(e,function(e){return!v(t,e)})}).getOr([])},ar=function(e){return S.from(e.dom.nextSibling).map(O.fromDom)},cr=function(e){return k(e.dom.childNodes,O.fromDom)},sr=function(e,t){e=e.dom.childNodes;return S.from(e[t]).map(O.fromDom)},lr=function(e){return sr(e,0)},fr=function(t,n){or(t).each(function(e){e.dom.insertBefore(n.dom,t.dom)})},dr=function(e,t){ar(e).fold(function(){or(e).each(function(e){mr(e,t)})},function(e){fr(e,t)})},mr=function(e,t){e.dom.appendChild(t.dom)},gr=function(t,e){T(e,function(e){mr(t,e)})},pr=function(e){e.dom.textContent="",T(cr(e),function(e){hr(e)})},hr=function(e){e=e.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},vr=function(e){return tr(e)&&X(e.dom.host)},e=Y(Element.prototype.attachShadow)&&Y(Node.prototype.getRootNode),br=h(e),yr=e?function(e){return O.fromDom(e.dom.getRootNode())}:rr,wr=function(e){if(br()&&X(e.target)){var t=O.fromDom(e.target);if(Zn(t)&&xr(t)&&e.composed&&e.composedPath){t=e.composedPath();if(t)return Mt(t)}}return S.from(e.target)},xr=function(e){return X(e.dom.shadowRoot)},Cr=function(e){var t,n=Qn(e)?e.dom.parentNode:e.dom;return null!=n&&null!==n.ownerDocument&&(t=n.ownerDocument,ye(O.fromDom(n)).fold(function(){return t.body.contains(n)},V(Cr,we)))},Sr=function(){return kr(O.fromDom(document))},kr=function(e){e=e.dom.body;if(null==e)throw new Error("Body is not available yet");return O.fromDom(e)},Tr=function(e){Ln(e,zn());e=e.components();T(e,Tr)},Or=function(e){var t=e.components();T(t,Or),Ln(e,Rn())},Er=function(e,t){mr(e.element,t.element)},_r=function(e){T(e.components(),function(e){return hr(e.element)}),pr(e.element),e.syncComponents()},Ar=function(e,t){Dr(e,t,mr)},Dr=function(e,t,n){e.getSystem().addToWorld(t),n(e.element,t.element),Cr(e.element)&&Or(t),e.syncComponents()},Mr=function(e){Tr(e),hr(e.element),e.getSystem().removeFromWorld(e)},Nr=function(t){var e=or(t.element).bind(function(e){return t.getSystem().getByDom(e).toOptional()});Mr(t),e.each(function(e){e.syncComponents()})},Rr=function(e,t){zr(e,t,dr)},zr=function(e,t,n){n(e,t.element);n=cr(t.element);T(n,function(e){t.getByDom(e).each(Or)})},Br=function(t){var e=cr(t.element);T(e,function(e){t.getByDom(e).each(Tr)}),hr(t.element)},Pr=Object.keys,Ir=Object.hasOwnProperty,Lr=function(e,t){for(var n=Pr(e),r=0,o=n.length;r<o;r++){var i=n[r];t(e[i],i)}},Fr=function(e,n){return Hr(e,function(e,t){return{k:t,v:n(e,t)}})},Hr=function(e,n){var r={};return Lr(e,function(e,t){e=n(e,t);r[e.k]=e.v}),r},Vr=function(n){return function(e,t){n[t]=e}},jr=function(e,n,r,o){return Lr(e,function(e,t){(n(e,t)?r:o)(e,t)}),{}},Ur=function(e,t){var n={};return jr(e,t,Vr(n),C),n},Wr=function(e,n){var r=[];return Lr(e,function(e,t){r.push(n(e,t))}),r},p=function(e,t){return $r(e,t)?S.from(e[t]):S.none()},$r=function(e,t){return Ir.call(e,t)},qr=function(e,t){return $r(e,t)&&void 0!==e[t]&&null!==e[t]},Gr=function(e,t,n){if(!(j(n)||q(n)||J(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},E=function(e,t,n){Gr(e.dom,t,n)},Kr=function(e,t){var n=e.dom;Lr(t,function(e,t){Gr(n,t,e)})},_=function(e,t){e=e.dom.getAttribute(t);return null===e?void 0:e},Xr=function(e,t){return S.from(_(e,t))},Yr=function(e,t){e=e.dom;return!(!e||!e.hasAttribute)&&e.hasAttribute(t)},Jr=function(e,t){e.dom.removeAttribute(t)},Zr=function(e,t){e=_(e,t);return void 0===e||""===e?[]:e.split(" ")},Qr=function(e,t,n){n=Zr(e,t).concat([n]);return E(e,t,n.join(" ")),!0},eo=function(e,t,n){var r=vt(Zr(e,t),function(e){return e!==n});return 0<r.length?E(e,t,r.join(" ")):Jr(e,t),!1},to=function(e){return void 0!==e.dom.classList},no=function(e){return Zr(e,"class")},ro=function(e,t){return Qr(e,"class",t)},oo=function(e,t){return eo(e,"class",t)},io=function(e,t){to(e)?e.dom.classList.add(t):ro(e,t)},uo=function(e){0===(to(e)?e.dom.classList:no(e)).length&&Jr(e,"class")},ao=function(e,t){to(e)?e.dom.classList.remove(t):oo(e,t),uo(e)},co=function(e,t){return to(e)&&e.dom.classList.contains(t)},t=Object.freeze({__proto__:null,toAlpha:function(e,t,n){xe(e.element,t.alpha,t.omega)},toOmega:function(e,t,n){xe(e.element,t.omega,t.alpha)},isAlpha:function(e,t,n){return co(e.element,t.alpha)},isOmega:function(e,t,n){return co(e.element,t.omega)},clear:function(e,t,n){ao(e.element,t.alpha),ao(e.element,t.omega)}}),b={value:Ce,error:Se,fromOption:function(e,t){return e.fold(function(){return Se(t)},Ce)}},c=((e=rt=rt||{})[e.Error=0]="Error",e[e.Value=1]="Value",{fromResult:function(e){return e.fold(Oe,Te)},toResult:function(e){return ke(e,b.error,b.value)},svalue:Te,partition:function(e){var t=[],n=[];return T(e,function(e){ke(e,function(e){return n.push(e)},function(e){return t.push(e)})}),{values:t,errors:n}},serror:Oe,bind:function(e,t){return e.stype===rt.Value?t(e.svalue):e},bindError:function(e,t){return e.stype===rt.Error?t(e.serror):e},map:function(e,t){return e.stype===rt.Value?{stype:rt.Value,svalue:t(e.svalue)}:e},mapError:function(e,t){return e.stype===rt.Error?{stype:rt.Error,serror:t(e.serror)}:e},fold:ke}),so=function(e,t,n,r){return{tag:"field",key:e,newKey:t,presence:n,prop:r}},lo=function(e,t,n){switch(e.tag){case"field":return t(e.key,e.newKey,e.presence,e.prop);case"custom":return n(e.newKey,e.instantiator)}},fo=Ee(function(e,t){return U(e)&&U(t)?fo(e,t):t}),mo=Ee(function(e,t){return t}),go=function(){return{tag:"required",process:{}}},po=function(e){return{tag:"defaultedThunk",process:e}},ho=function(){return{tag:"option",process:{}}},vo={consolidateObj:function(e,t){var e=c.partition(e);return 0<e.errors.length?De(e.errors):(e=e.values,t=t,0<e.length?c.svalue(fo(t,mo.apply(void 0,e))):c.svalue(t))},consolidateArr:function(e){e=c.partition(e);return 0<e.errors.length?De(e.errors):c.svalue(e.values)}},bo=function(e){return U(e)&&100<Pr(e).length?" removed due to size":JSON.stringify(e,null,2)},yo=function(e){e=10<e.length?e.slice(0,10).concat([{path:[],getErrorInfo:h("... (only showing first ten failures)")}]):e;return k(e,function(e){return"Failed path: ("+e.path.join(" > ")+")\n"+e.getErrorInfo()})},wo=function(e,t){return c.serror([{path:e,getErrorInfo:t}])},xo=function(e,t,n){return wo(e,function(){return'Could not find valid *required* value for "'+t+'" in '+bo(n)})},Co=function(e,t){return wo(e,function(){return'Choice schema did not contain choice key: "'+t+'"'})},So=function(e,t,n){return wo(e,function(){return'The chosen schema: "'+n+'" did not exist in branches: '+bo(t)})},ko=function(n){return{extract:function(t,e){return c.bindError(n(e),function(e){return Ne(t,e)})},toString:h("val")}},e=ko(c.svalue),To=function(e,t,n,r){return p(t,n).fold(function(){return xo(e,n,t)},r)},Oo=function(e,t,n,r){return r(p(e,t).getOrThunk(function(){return n(e)}))},Eo=function(e,t,n){return n(p(e,t))},_o=function(t,e,n,r){return r(p(t,e).map(function(e){return!0===e?n(t):e}))},Ao=function(t,n,r,o,i){function u(e){return i.extract(n.concat([o]),e)}function e(e){return e.fold(function(){return c.svalue(S.none())},function(e){e=i.extract(n.concat([o]),e);return c.map(e,S.some)})}switch(t.tag){case"required":return To(n,r,o,u);case"defaultedThunk":return Oo(r,o,t.process,u);case"option":return Eo(r,o,e);case"defaultedOptionThunk":return _o(r,o,t.process,e);case"mergeWithThunk":return Oo(r,o,h({}),function(e){e=fo(t.process(r),e);return u(e)})}},Do=function(o,i,e){for(var u={},a=[],t=0,n=e;t<n.length;t++){var r=n[t];lo(r,function(e,t,n,r){n=Ao(n,o,i,e,r);c.fold(n,function(e){a.push.apply(a,e)},function(e){u[t]=e})},function(e,t){u[e]=t(i)})}return 0<a.length?c.serror(a):c.svalue(u)},Mo=function(e){var r=No(e),o=bt(e,function(n,e){return lo(e,function(e){var t;return fo(n,((t={})[e]=!0,t))},h(n))},{});return{extract:function(e,t){var n=q(t)?[]:Re(t),n=vt(n,function(e){return!qr(o,e)});return 0===n.length?r.extract(e,t):Me(e,n)},toString:r.toString}},No=function(n){return{extract:function(e,t){return Do(e,t,n)},toString:function(){return"obj{\n"+k(n,function(e){return lo(e,function(e,t,n,r){return e+" -> "+r.toString()},function(e,t){return"state("+e+")"})}).join("\n")+"}"}}},Ro=function(r){return{extract:function(n,e){e=k(e,function(e,t){return r.extract(n.concat(["["+t+"]"]),e)});return vo.consolidateArr(e)},toString:function(){return"array("+r.toString()+")"}}},zo=h(e),e=(ot=Y,it="function",ko(function(e){var t=typeof e;return ot(e)?c.svalue(e):c.serror("Expected type: "+it+" but got: "+t)})),Bo=function(t,n,e,r){return p(e,r).fold(function(){return So(t,e,r)},function(e){return e.extract(t.concat(["branch: "+r]),n)})},Po=function(t){return ko(function(e){return t(e).fold(c.serror,c.svalue)})},Io=function(e,t,n){t=t.extract([e],n);return c.mapError(t,function(e){return{input:n,errors:e}})},Lo=function(e,t,n){return c.toResult(Io(e,t,n))},Fo=function(e){return e.fold(function(e){throw new Error(Vo(e))},w)},Ho=function(e,t,n){return Fo(Lo(e,t,n))},Vo=function(e){return"Errors: \n"+yo(e.errors).join("\n")+"\n\nInput object: "+bo(e.input)},jo=so,Uo=function(e,t){return{tag:"custom",newKey:e,instantiator:t}},l=function(e){return jo(e,e,go(),zo())},Wo=function(e,t){return jo(e,e,go(),No(t))},s=function(e){return jo(e,e,ho(),zo())},$o=function(e,t){return jo(e,e,ho(),t)},qo=function(e,t){return $o(e,No(t))},Go=function(e,t){return $o(e,Mo(t))},f=function(e,t){return jo(e,e,_e(t),zo())},Ko=function(e,t,n){return jo(e,e,_e(t),n)},Xo=[l("alpha"),l("omega")],Yo=function(u){if(!W(u))throw new Error("cases must be an array");if(0===u.length)throw new Error("there must be at least one case");var a=[],n={};return T(u,function(e,r){var t=Pr(e);if(1!==t.length)throw new Error("one and only one name per case");var o=t[0],i=e[o];if(void 0!==n[o])throw new Error("duplicate key detected:"+o);if("cata"===o)throw new Error("cannot have a case named cata (sorry)");if(!W(i))throw new Error("case arguments must be an array");a.push(o),n[o]=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=n.length;if(t!==i.length)throw new Error("Wrong number of arguments to case "+o+". Expected "+i.length+" ("+i+"), got "+t);return{fold:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(e.length!==u.length)throw new Error("Wrong number of arguments to fold. Expected "+u.length+", got "+e.length);return e[r].apply(null,n)},match:function(e){var t=Pr(e);if(a.length!==t.length)throw new Error("Wrong number of arguments to match. Expected: "+a.join(",")+"\nActual: "+t.join(","));if(Tt(a,function(e){return gt(t,e)}))return e[o].apply(null,n);throw new Error("Not all branches were specified when using match. Specified: "+t.join(", ")+"\nRequired: "+a.join(", "))},log:function(e){console.log(e,{constructors:a,constructor:o,params:n})}}}}),n},Jo=(Yo([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]),function(e){var t=[],n=[];return T(e,function(e){e.fold(function(e){t.push(e)},function(e){n.push(e)})}),{errors:t,values:n}}),Zo=function(e,n){var r={};return Lr(e,function(e,t){gt(n,t)||(r[t]=e)}),r},Qo=function(e,t){var n={};return n[e]=t,n},ei=function(e){var t={};return T(e,function(e){t[e.key]=e.value}),t},ti=function(e,t){return Zo(e,t)},ni=function(e,t){return Qo(e,t)},ri=function(e){return ei(e)},oi=function(e,t){return 0===e.length?b.value(t):b.value(fo(t,mo.apply(void 0,e)))},ii=function(e){return b.error(St(e))},ui=function(e,t){e=Jo(e);return 0<e.errors.length?ii(e.errors):oi(e.values,t)},ai=function(e,t,n){return void 0===n&&(n=Q),e.exists(function(e){return n(e,t)})},ci=function(e){for(var t=[],n=function(e){t.push(e)},r=0;r<e.length;r++)e[r].each(n);return t},si=function(e,t,n){return e.isSome()&&t.isSome()?S.some(n(e.getOrDie(),t.getOrDie())):S.none()},li=function(e,t){return e?S.some(t):S.none()},fi=function(e){return Y(e)?e:ie},di=function(e,t,n){for(var r=e.dom,o=fi(n);r.parentNode;){var r=r.parentNode,i=O.fromDom(r),u=t(i);if(u.isSome())return u;if(o(i))break}return S.none()},mi=function(e,t,n){var r=t(e),o=fi(n);return r.orThunk(function(){return o(e)?S.none():di(e,t,o)})},gi=function(e,t){return v(e.element,t.event.target)},pi={can:x,abort:ie,run:C},hi=function(e){if(qr(e,"can")||qr(e,"abort")||qr(e,"run"))return y(y({},pi),e);throw new Error("EventHandler defined by: "+JSON.stringify(e,null,2)+" does not have can, abort, or run!")},vi=function(t,r){return function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return yt(t,function(e,t){return e&&r(t).apply(void 0,n)},!0)}},bi=function(t,r){return function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return yt(t,function(e,t){return e||r(t).apply(void 0,n)},!1)}},yi=function(e){return Y(e)?{can:x,abort:ie,run:e}:e},wi=function(n){return{can:vi(n,function(e){return e.can}),abort:bi(n,function(e){return e.abort}),run:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];T(n,function(e){e.run.apply(void 0,t)})}}},A=function(e){return ri(e)},D=function(e,t){return{key:e,value:hi({run:t})}},xi=function(e){return function(n){return{key:e,value:hi({run:function(e,t){gi(e,t)&&n(e,t)}})}}},Ci=function(e){return D(e,function(e,t){t.cut()})},Si=xi(Rn()),ki=xi(zn()),Ti=xi(Nn()),Oi=(ut=_n(),function(e){return D(ut,e)}),Ei=function(e,t,n){var n=n.toString(),r=n.indexOf(")")+1,o=n.indexOf("("),i=n.substring(o+1,r-1).split(/,\s*/);return e.toFunctionAnnotation=function(){return{name:t,parameters:_i(i.slice(0,1).concat(i.slice(3)))}},e},_i=function(e){return k(e,function(e){return Ft(e,"/*")?e.substring(0,e.length-"/*".length):e})},Ai=function(e,t){var n=e.toString(),r=n.indexOf(")")+1,o=n.indexOf("("),i=n.substring(o+1,r-1).split(/,\s*/);return e.toFunctionAnnotation=function(){return{name:t,parameters:_i(i)}},e},Di=function(e,t){var t=t.toString(),n=t.indexOf(")")+1,r=t.indexOf("("),o=t.substring(r+1,n-1).split(/,\s*/);return e.toFunctionAnnotation=function(){return{name:"OVERRIDE",parameters:_i(o.slice(1))}},e},Mi=function(e){return{classes:G(e.classes)?[]:e.classes,attributes:G(e.attributes)?{}:e.attributes,styles:G(e.styles)?{}:e.styles}},Ni=function(e,t){return y(y({},e),{attributes:y(y({},e.attributes),t.attributes),styles:y(y({},e.styles),t.styles),classes:e.classes.concat(t.classes)})},Ri=function(o,i,u){return Ei(function(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];var r=[n].concat(e);return n.config({name:h(o)}).fold(function(){throw new Error("We could not find any behaviour configuration for: "+o+". Using API: "+u)},function(e){var t=Array.prototype.slice.call(r,1);return i.apply(void 0,[n,e.config,e.state].concat(t))})},u,i)},zi=function(e){return{key:e,value:void 0}},Bi=function(n,e,r,t,o,i,u){function a(e){return qr(e,r)?e[r]():S.none()}var o=Fr(o,function(e,t){return Ri(r,e,t)}),i=Fr(i,function(e,t){return Ai(e,t)}),c=y(y(y({},i),o),{revoke:ee(zi,r),config:function(e){var t=Ho(r+"-config",n,e);return{key:r,value:{config:t,me:c,configAsRaw:st(function(){return Ho(r+"-config",n,e)}),initialConfig:e,state:u}}},schema:h(e),exhibit:function(e,n){return si(a(e),p(t,"exhibit"),function(e,t){return t(n,e.config,e.state)}).getOrThunk(function(){return Mi({})})},name:h(r),handlers:function(e){return a(e).map(function(e){return p(t,"events").getOr(function(){return{}})(e.config,e.state)}).getOr({})}});return c},Pi={init:function(){return Ii({readState:h("No State required")})}},Ii=function(e){return e},M=function(e){return ri(e)},Li=Mo([l("fields"),l("name"),f("active",{}),f("apis",{}),f("state",Pi),f("extra",{})]),Fi=function(e){e=Ho("Creating behaviour: "+e.name,Li,e);return je(e.fields,e.name,e.active,e.apis,e.extra,e.state)},Hi=Mo([l("branchKey"),l("branches"),l("name"),f("active",{}),f("apis",{}),f("state",Pi),f("extra",{})]),Vi=h(void 0),ji=Fi({fields:Xo,name:"swapping",apis:t}),N=function(e){var t=e;return{get:function(){return t},set:function(e){t=e}}},Ui=function(){return O.fromDom(document)},Wi=function(e){return e.dom.focus()},$i=function(e){return e.dom.blur()},qi=function(e){return void 0===e&&(e=Ui()),S.from(e.dom.activeElement).map(O.fromDom)},Gi=function(t){return qi(yr(t)).filter(function(e){return t.dom.contains(e.dom)})},Ki=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Xo=tinymce.util.Tools.resolve("tinymce.ThemeManager"),Xi=function(e){var t=document.createElement("a"),e=(t.target="_blank",t.href=e.href,t.rel="noreferrer noopener",document.createEvent("MouseEvents"));e.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),document.body.appendChild(t),t.dispatchEvent(e),document.body.removeChild(t)},Yi=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}],Ji=["undo","bold","italic","link","image","bullist","styleselect"],Zi=function(e){return!1===e.getParam("skin")},Qi=function(e){return!1},eu=function(e){return e.getParam("toolbar",Ji,"array")},tu=function(e){return e.getParam("style_formats",Yi,"array")},nu=function(e){return e.getParam("skin_url")},ru="formatChanged",ou="orientationChanged",iu="dropupDismissed",uu=function(e,t){t=(t||document).createElement("div");return t.innerHTML=e,cr(O.fromDom(t))},au=function(e){return e.dom.innerHTML},cu=function(e,t){var n=nr(e).dom,r=O.fromDom(n.createDocumentFragment()),t=uu(t,n);gr(r,t),pr(e),mr(e,r)},su=function(e){var t=O.fromTag("div"),e=O.fromDom(e.dom.cloneNode(!0));return mr(t,e),au(t)},lu=function(e,t){return O.fromDom(e.dom.cloneNode(t))},fu=function(e){return lu(e,!1)},du=function(e){return vr(e)?"#shadow-root":(e=fu(e),su(e))},mu=function(e){return du(e)},t=Object.freeze({__proto__:null,events:function(u){return A([D(En(),function(r,e){var t,o=u.channels,n=Pr(o),i=e,n=(e=n,(t=i).universal?e:vt(e,function(e){return gt(t.channels,e)}));T(n,function(e){var t=o[e],n=t.schema,e=Ho("channel["+e+"] data\nReceiver: "+mu(r.element),n,i.data);t.onReceive(r,e)})})])}}),gu="unknown",pu=((Cu=at=at||{})[Cu.STOP=0]="STOP",Cu[Cu.NORMAL=1]="NORMAL",Cu[Cu.LOGGING=2]="LOGGING",N({})),hu=function(t,n){var r=[],o=(new Date).getTime();return{logEventCut:function(e,t,n){r.push({outcome:"cut",target:t,purpose:n})},logEventStopped:function(e,t,n){r.push({outcome:"stopped",target:t,purpose:n})},logNoParent:function(e,t,n){r.push({outcome:"no-parent",target:t,purpose:n})},logEventNoHandlers:function(e,t){r.push({outcome:"no-handlers-left",target:t})},logEventResponse:function(e,t,n){r.push({outcome:"response",purpose:n,target:t})},write:function(){var e=(new Date).getTime();gt(["mousemove","mouseover","mouseout",Nn()],t)||console.log(t,{event:t,time:e-o,target:n.dom,sequence:k(r,function(e){return gt(["cut","stopped","response"],e.outcome)?"{"+e.purpose+"} "+e.outcome+" at ("+mu(e.target)+")":e.outcome})})}}},vu=function(t,e,n){switch(p(pu.get(),t).orThunk(function(){var e=Pr(pu.get());return Nt(e,function(e){return-1<t.indexOf(e)?S.some(pu.get()[e]):S.none()})}).getOr(at.NORMAL)){case at.NORMAL:return n(xu());case at.LOGGING:var r=hu(t,e),o=n(r);return r.write(),o;case at.STOP:return!0}},bu=["alloy/data/Fields","alloy/debugging/Debugging"],yu=function(){var e=new Error;return void 0!==e.stack?(e=e.stack.split("\n"),xt(e,function(t){return 0<t.indexOf("alloy")&&!pt(bu,function(e){return-1<t.indexOf(e)})}).getOr(gu)):gu},wu=function(e,t,n){return vu(e,t,n)},xu=h({logEventCut:C,logEventStopped:C,logNoParent:C,logEventNoHandlers:C,logEventResponse:C,write:C}),Cu=h([l("menu"),l("selectedMenu")]),Su=h([l("item"),l("selectedItem")]),ku=(h(No(Su().concat(Cu()))),h(No(Su()))),Tu=Wo("initSize",[l("numColumns"),l("numRows")]),i=function(e,t){return Uo(e,h(t))},Ou=function(e){return Uo(e,w)},Tu=h(Tu),Eu=[Ie("channels",Be(b.value,Mo([qe("onReceive"),f("schema",zo())])))],_u=Fi({fields:Eu,name:"receiving",active:t}),Au=function(e,t,n){n.set(!0),Xe(e,t,n),Ke(e,t,n)},Du=function(e,t,n){n.set(!1),Xe(e,t,n),Ke(e,t,n)},Eu=Object.freeze({__proto__:null,onLoad:Ze,toggle:Ye,isOn:function(e,t,n){return n.get()},on:Au,off:Du,set:Je}),t=Object.freeze({__proto__:null,exhibit:function(){return Mi({})},events:function(e,t){n=e,r=t,o=Ye;var n,r,o,i=Oi(function(e){o(e,n,r)}),t=Ve(e,t,Ze);return A(St([e.toggleOnExecute?[i]:[],[t]]))}}),n=[f("selected",!1),s("toggleClass"),f("toggleOnExecute",!0),Ko("aria",{mode:"none"},Pe("mode",{pressed:[f("syncWithExpanded",!1),i("update",function(e,t,n){E(e.element,"aria-pressed",n),t.syncWithExpanded&&Qe(e,0,n)})],checked:[i("update",function(e,t,n){E(e.element,"aria-checked",n)})],expanded:[i("update",Qe)],selected:[i("update",function(e,t,n){E(e.element,"aria-selected",n)})],none:[i("update",C)]}))],R=Fi({fields:n,name:"toggling",active:t,apis:Eu,state:(ct=!1,{init:function(){var t=N(ct);return{get:function(){return t.get()},set:function(e){return t.set(e)},clear:function(){return t.set(ct)},readState:function(){return t.get()}}}})}),Mu=function(n,r){return _u.config({channels:ni(ru,{onReceive:function(e,t){t.command===n&&r(e,t.state)}})})},Nu=function(e){return _u.config({channels:ni(ou,{onReceive:e})})},Ru=function(e,t){return{key:e,value:{onReceive:t}}},zu="tinymce-mobile",z=function(e){return zu+"-"+e},Bu=function(){function e(e,t){t.stop(),Hn(e)}return[D(xn(),e),D(Dn(),e),Ci(ln()),Ci(mn())]},n=Object.freeze({__proto__:null,focus:et,blur:function(e,t){t.ignore||$i(e.element)},isFocused:function(e){return e=e.element,t=yr(e).dom,e.dom===t.activeElement;var t}}),t=Object.freeze({__proto__:null,exhibit:function(e,t){t=t.ignore?{}:{attributes:{tabindex:"-1"}};return Mi(t)},events:function(n){return A([D(kn(),function(e,t){et(e,n),t.stop()})].concat(n.stopMousedown?[D(mn(),function(e,t){t.event.prevent()})]:[]))}}),Eu=[We("onFocus"),f("stopMousedown",!1),f("ignore",!1)],Pu=Fi({fields:Eu,name:"focusing",active:t,apis:n}),Iu=function(e){return void 0!==e.style&&Y(e.style.getPropertyValue)},Lu=function(e,t,n){if(!j(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);Iu(e)&&e.style.setProperty(t,n)},Fu=function(e,t){Iu(e)&&e.style.removeProperty(t)},B=function(e,t,n){e=e.dom;Lu(e,t,n)},Hu=function(e,t){var n=e.dom;Lr(t,function(e,t){Lu(n,t,e)})},Vu=function(e,t){var n=e.dom,r=window.getComputedStyle(n).getPropertyValue(t);return""!==r||Cr(e)?r:ju(n,t)},ju=function(e,t){return Iu(e)?e.style.getPropertyValue(t):""},Uu=function(e,t){e=e.dom,e=ju(e,t);return S.from(e).filter(function(e){return 0<e.length})},Wu=function(e,t){var n=e.dom;Fu(n,t),ai(Xr(e,"style").map(Ht),"")&&Jr(e,"style")},$u=function(e){return e.dom.offsetWidth},qu=tt("height",function(e){var t=e.dom;return Cr(e)?t.getBoundingClientRect().height:t.offsetHeight}),Gu=function(e){return qu.get(e)},Ku=function(e,t,n){return vt(ir(e,n),t)},Xu=function(e,t){return vt(ur(e),t)},Yu=function(e){return Xn(e)},Ju=function(e,t,n){return Ku(e,function(e){return Gn(e,t)},n)},Zu=function(e,t){return Xu(e,function(e){return Gn(e,t)})},Qu=function(e,t){return Xn(t,e)};function ea(e,t,n,r,o){return e(n,r)?S.some(n):Y(o)&&o(n)?S.none():t(n,r,o)}function ta(e,t,n){var r=Ot(e.slice(0,t)),e=Ot(e.slice(t+1));return xt(r.concat(e),n)}function na(e,t,n){return e=Ot(e.slice(0,t)),xt(e,n)}function ra(e,t,n){var r=e.slice(0,t),e=e.slice(t+1);return xt(e.concat(r),n)}function oa(e,t,n){return e=e.slice(t+1),xt(e,n)}function ia(e){return function(t){return Tt(e,function(e){return e(t)})}}function ua(e){return!0===e.raw.shiftKey}function aa(e){return!0===e.raw.ctrlKey}function d(e,t){return{matches:e,classification:t}}function ca(n,r,e,o){var t=Qu(n.element,"."+r.highlightClass);T(t,function(t){pt(o,function(e){return e.element===t})||(ao(t,r.highlightClass),n.getSystem().getByDom(t).each(function(e){r.onDehighlight(n,e),Ln(e,In())}))})}function sa(e,t,n,r){ca(e,t,0,[r]),la(0,t,0,r)||(io(r.element,t.highlightClass),t.onHighlight(e,r),Ln(r,Pn()))}function la(e,t,n,r){return co(r.element,t.highlightClass)}function fa(t,e,n){return us(t.element,"."+e.itemClass).bind(function(e){return t.getSystem().getByDom(e).toOptional()})}function da(t,e,n){return(0<(e=Qu(t.element,"."+e.itemClass)).length?S.some(e[e.length-1]):S.none()).bind(function(e){return t.getSystem().getByDom(e).toOptional()})}function ma(t,n,e,r){var o=Qu(t.element,"."+n.itemClass);return Ct(o,function(e){return co(e,n.highlightClass)}).bind(function(e){e=ys(e,r,0,o.length-1);return t.getSystem().getByDom(o[e]).toOptional()})}function ga(t,e,n){return e=Qu(t.element,"."+e.itemClass),ci(k(e,function(e){return t.getSystem().getByDom(e).toOptional()}))}function pa(){function r(e){return P.getHighlighted(e).map(function(e){return e.element})}return{get:r,set:function(t,e){var n=r(t),e=(t.getSystem().getByDom(e).fold(C,function(e){P.highlight(t,e)}),r(t));xs(t,n,e)}}}function ha(e,t,n,r,a){function c(t,n,e,r,o){return e=e(t,n,r,o),bs(e,n.event).bind(function(e){return e(t,n,r,o)})}var o={schema:function(){return e.concat([f("focusManager",Cs()),Ko("focusInside","onFocus",Po(function(e){return gt(["onFocus","onEnterOrSpace","onApi"],e)?b.value(e):b.error("Invalid value for focusInside")})),i("handler",o),i("state",t),i("sendFocusIn",a)])},processKey:c,toEvents:function(i,u){var e=i.focusInside!==Zc.OnFocusMode?S.none():a(i).map(function(n){return D(kn(),function(e,t){n(e,i,u),t.stop()})}),t=[D(vn(),function(r,o){c(r,o,n,i,u).fold(function(){var t,n,e;t=r,n=o,e=m(ds.concat(ls))(n.event),i.focusInside===Zc.OnEnterOrSpaceMode&&e&&gi(t,n)&&a(i).each(function(e){e(t,i,u),n.stop()})},function(e){o.stop()})}),D(bn(),function(e,t){c(e,t,r,i,u).each(function(e){t.stop()})})];return A(e.toArray().concat(t))}};return o}function va(e){function t(t,n,e){!function(e,t){e=Qu(e.element,t.selector),e=vt(e,function(e){return r(t,e)});return S.from(e[t.firstTabstop])}(t,n).each(function(e){n.focusManager.set(t,e)})}function o(t,e,n,r){var o=Qu(t.element,n.selector);return i(t,n).bind(function(e){return Ct(o,ee(v,e)).bind(function(e){return a(t,o,e,n,r)})})}var e=[s("onEscape"),s("onEnter"),f("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),f("firstTabstop",0),f("useTabstopAt",x),s("visibilitySelector")].concat([e]),r=function(e,t){e=e.visibilitySelector.bind(function(e){return as(t,e)}).getOr(t);return 0<Gu(e)},i=function(e,t){return t.focusManager.get(e).bind(function(e){return as(e,t.selector)})},u=function(e,t){return r(e,t)&&e.useTabstopAt(t)},a=function(t,e,n,r,o){return o(e,n,function(e){return u(r,e)}).fold(function(){return r.cyclic?S.some(!0):S.none()},function(e){return r.focusManager.set(t,e),S.some(!0)})},n=h([d(ia([ua,m(ss)]),function(e,t,n){var r=n.cyclic?ta:na;return o(e,0,n,r)}),d(m(ss),function(e,t,n){var r=n.cyclic?ra:oa;return o(e,0,n,r)}),d(m(fs),function(t,n,e){return e.onEscape.bind(function(e){return e(t,n)})}),d(ia([vs,m(ls)]),function(t,n,e){return e.onEnter.bind(function(e){return e(t,n)})})]),c=h([]);return ha(e,Pi.init,n,c,function(){return S.some(t)})}function ba(e){return"input"===Jn(e)&&"radio"!==_(e,"type")||"textarea"===Jn(e)}function ya(e,t,n){return ba(n)&&m(ds)(t.event)?S.none():(Vn(e,n,_n()),S.some(!0))}function wa(e,t){return S.some(!0)}function xa(e,t,n){return n.execute(e,t,e.element)}function Ca(){var n=Os();return Ii({readState:function(){return n.get().map(function(e){return{numRows:String(e.numRows),numColumns:String(e.numColumns)}}).getOr({numRows:"?",numColumns:"?"})},setGridSize:function(e,t){n.set({numRows:e,numColumns:t})},getNumRows:function(){return n.get().map(function(e){return e.numRows})},getNumColumns:function(){return n.get().map(function(e){return e.numColumns})}})}function Sa(t,n){return function(e){return"rtl"===_s(e)?n:t}}function ka(i){return function(e,t,n,r){var o=i(e.element);return As(o,e,t,n,r)}}function Ta(e,t){return e=Sa(e,t),ka(e)}function Oa(e,t){return t=Sa(t,e),ka(t)}function Ea(o){return function(e,t,n,r){return As(o,e,t,n,r)}}function _a(e,t){return Ct(e,function(e){return v(t,e)})}function Aa(r,e,o,i,u){return Is(r,e,i,function(e,t){var n=e===o-1?r.length-e*i:i,t=ys(t,u,0,n-1);return S.some({row:e,column:t})})}function Da(r,e,o,i,u){return Is(r,e,i,function(e,t){var e=ys(e,u,0,o-1),n=e===o-1?r.length-e*i:i,t=ws(t,0,n-1);return S.some({row:e,column:t})})}function Ma(t,n,e){us(t.element,n.selector).each(function(e){n.focusManager.set(t,e)})}function Na(o){return function(e,t,n,r){return Ps(e,t,n.selector).bind(function(e){return o(e.candidates,e.index,r.getNumRows().getOr(n.initSize.numRows),r.getNumColumns().getOr(n.initSize.numColumns))})}}function Ra(e,t,n){return n.captureTab?S.some(!0):S.none()}function za(t,n,e){n.getInitial(t).orThunk(function(){return us(t.element,n.selector)}).each(function(e){n.focusManager.set(t,e)})}function Ba(e,t,n){return Us(e,n.selector,t,-1)}function Pa(e,t,n){return Us(e,n.selector,t,1)}function Ia(o){return function(e,t,n,r){return o(e,t,n,r).bind(function(){return n.executeOnMove?$s(e,t,n):S.some(!0)})}}function La(e,t,n){return n.onEscape(e,t)}function Fa(e,t,n,r){var o=e[t].length,n=ys(n,r,0,o-1);return qs(e,t,n)}function Ha(e,t,n,r){return n=ys(n,r,0,e.length-1),r=e[n].length,t=ws(t,0,r-1),qs(e,n,t)}function Va(e,t,n,r){var o=e[t].length,n=ws(n+r,0,o-1);return qs(e,t,n)}function ja(e,t,n,r){return n=ws(n+r,0,e.length-1),r=e[n].length,t=ws(t,0,r-1),qs(e,n,t)}function Ua(t,n,e){n.previousSelector(t).orThunk(function(){var e=n.selectors;return us(t.element,e.cell)}).each(function(e){n.focusManager.set(t,e)})}function Wa(e,t){return function(n,r,i){var u=i.cycles?e:t;return as(r,i.selectors.row).bind(function(e){var t=Qu(e,i.selectors.cell);return _a(t,r).bind(function(r){var o=Qu(n,i.selectors.row);return _a(o,e).bind(function(e){t=i;var t,n=k(o,function(e){return Qu(e,t.selectors.cell)});return u(n,e,r).map(function(e){return e.cell})})})})}}function $a(t,n,r){return r.focusManager.get(t).bind(function(e){return r.execute(t,n,e)})}function qa(t,n,e){us(t.element,n.selector).each(function(e){n.focusManager.set(t,e)})}function Ga(e,t,n){return Us(e,n.selector,t,-1)}function Ka(e,t,n){return Us(e,n.selector,t,1)}function Xa(r,e){return t=r,n={},e=k(e,function(e){return t=e.name(),n="Cannot configure "+e.name()+" for "+r,jo(t,t,ho(),ko(function(e){return c.serror("The field: "+t+" is forbidden. "+n)}));var t,n}).concat([Uo("dump",w)]),Ko(t,n,No(e));var t,n}function Ya(t,n){return function(e){e=Ho("Converting part type",n,e);return t(e)}}function Ja(e,t,n){return Sl(e,t,n).getOrDie("Could not find part: "+n)}function Za(t,e){return e=wl(e),ri(k(e,function(e){return{key:e,value:t+"-"+e}}))}function Qa(r){return Di(function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return r.apply(void 0,o([e.getApis(),e],t,!1))},r)}function ec(e,t,n,r,o){var o=Ll(o),i=yl(n),u=Tl(n),t=Pl(e,t,o,i,[u]),i=xl(e,t,n);return r(t,Cl(e,t,i.internals()),o,i.externals())}function tc(e){var o=Ho("Sketcher for "+e.name,Hl,e),e=Fr(o.apis,Qa),t=Fr(o.extraApis,function(e,t){return Ai(e,t)});return y(y({name:o.name,configFields:o.configFields,sketch:function(e){var t=o.name,n=o.configFields,r=o.factory;return e=Ll(e),r(Pl(t,n,e,[],[]),e)}},e),t)}function nc(e){var o,t,n=Ho("Sketcher for "+e.name,Vl,e),e=(o=n.name,e=n.partFields,t={},T(e,function(e){fl(e).each(function(n){var r=bl(o,n.pname);t[n.name]=function(e){var t=Ho("Part: "+n.name+" in "+o,No(n.schema),e);return y(y({},r),{config:e,validated:t})}})}),t),r=Fr(n.apis,Qa),i=Fr(n.extraApis,function(e,t){return Ai(e,t)});return y(y({name:n.name,partFields:n.partFields,configFields:n.configFields,sketch:function(e){return ec(n.name,n.configFields,n.partFields,n.factory,e)},parts:e},r),i)}function rc(t){return gl({name:t+"-edge",overrides:function(e){return e.model.manager.edgeActions[t].fold(function(){return{}},function(r){return{events:A([Fe(ln(),function(e,t,n){return r(e,n)},[e]),Fe(mn(),function(e,t,n){return r(e,n)},[e]),Fe(gn(),function(e,t,n){n.mouseIsDown.get()&&r(e,n)},[e])])}})}})}function oc(e,t,n){t.store.manager.onLoad(e,t,n)}function ic(e,t,n){t.store.manager.onUnload(e,t,n)}function uc(){var e=N(null);return Ii({set:e.set,get:e.get,isNotSet:function(){return null===e.get()},clear:function(){e.set(null)},readState:function(){return{mode:"memory",value:e.get()}}})}function ac(){var i=N({}),u=N({});return Ii({readState:function(){return{mode:"dataset",dataByValue:i.get(),dataByText:u.get()}},lookup:function(e){return p(i.get(),e).orThunk(function(){return p(u.get(),e)})},update:function(e){var t=i.get(),n=u.get(),r={},o={};T(e,function(t){r[t.value]=t,p(t,"meta").each(function(e){p(e,"text").each(function(e){o[e]=t})})}),i.set(y(y({},t),r)),u.set(y(y({},n),o))},clear:function(){i.set({}),u.set({})}})}function cc(e,t,n,r){var o=t.store;n.update([r]),o.setValue(e,r),t.onSetValue(e,r)}function sc(n,r){return{left:n,top:r,translate:function(e,t){return sc(n+e,r+t)}}}function lc(e){return e=e.event.raw,uf(e)?void 0!==e.touches&&1===e.touches.length?S.some(e.touches[0]).map(function(e){return rf(e.clientX,e.clientY)}):S.none():void 0!==e.clientX?S.some(e).map(function(e){return rf(e.clientX,e.clientY)}):S.none()}function fc(e){return e.model.minX-1}function dc(e){return e.model.minY-1}function mc(e){return e.model.maxX+1}function gc(e){return e.model.maxY+1}function pc(e){return hf(e)/2}function hc(e){return vf(e)/2}function vc(e,t){return{x:e,y:t}}function bc(e,t){Fn(e,of(),{value:t})}function yc(e,t,n){return n={min:ff(t),max:mf(t),range:hf(t),value:n,step:bf(t),snap:yf(t),snapStart:wf(t),rounded:xf(t),hasMinEdge:Sf(t),hasMaxEdge:kf(t),minBound:Uf(e),maxBound:Wf(e),screenRange:Gf(e)},Rf(n)}function wc(n){return function(e,t){return function(e,t,n){e=(0<e?Af:_f)(Ef(n).x,ff(n),mf(n),bf(n));return Zf(t,Qf(e)),S.some(e)}(n,e,t).map(x)}}function xc(e,t,n,r,o,i){i=i,n=n,r=r,o=o,a=Gf(u=t),r=r.bind(function(e){return S.some(Yf(e,u))}).getOr(0),o=o.bind(function(e){return S.some(Yf(e,u))}).getOr(a),n={min:ff(i),max:mf(i),range:hf(i),value:n,hasMinEdge:Sf(i),hasMaxEdge:kf(i),minBound:Uf(u),minOffset:0,maxBound:Wf(u),maxOffset:a,centerMinEdge:r,centerMaxEdge:o};var u,a,i=zf(n);return Uf(t)-Uf(e)+i}function Cc(e,t,n){return n={min:df(t),max:gf(t),range:vf(t),value:n,step:bf(t),snap:yf(t),snapStart:wf(t),rounded:xf(t),hasMinEdge:Tf(t),hasMaxEdge:Of(t),minBound:$f(e),maxBound:qf(e),screenRange:Kf(e)},Rf(n)}function Sc(n){return function(e,t){return function(e,t,n){e=(0<e?Af:_f)(Ef(n).y,df(n),gf(n),bf(n));return ed(t,td(e)),S.some(e)}(n,e,t).map(x)}}function kc(e,t,n,r,o,i){i=i,n=n,r=r,o=o,a=Kf(u=t),r=r.bind(function(e){return S.some(Jf(e,u))}).getOr(0),o=o.bind(function(e){return S.some(Jf(e,u))}).getOr(a),n={min:df(i),max:gf(i),range:vf(i),value:n,hasMinEdge:Tf(i),hasMaxEdge:Of(i),minBound:$f(u),minOffset:0,maxBound:qf(u),maxOffset:a,centerMinEdge:r,centerMaxEdge:o};var u,a,i=zf(n);return $f(t)-$f(e)+i}function Tc(i,u){return function(e,t){return e=e,t=t,n=0<(n=i)?Af:_f,o=(r=u)?Ef(t).x:n(Ef(t).x,ff(t),mf(t),bf(t)),r=r?n(Ef(t).y,df(t),gf(t),bf(t)):Ef(t).y,nd(e,rd(o,r)),S.some(o).map(x);var n,r,o}}function Oc(e){return Vd(e).fold(function(){return{url:"",text:e.selection.getContent({format:"text"}),title:"",target:"",link:S.none()}},function(e){return t=Id(e=e),n=_(e,"href"),r=_(e,"title"),o=_(e,"target"),{url:Fd(n),text:t!==n?Fd(t):"",title:Fd(r),target:Fd(o),link:S.some(e)};var t,n,r,o})}function Ec(n,u){u.url.toOptional().filter(Ld).fold(function(){var t;t=n,u.link.bind(w).each(function(e){t.execCommand("unlink")})},function(o){e=u,(t={}).href=o,e.title.toOptional().filter(Ld).each(function(e){t.title=e}),e.target.toOptional().filter(Ld).each(function(e){t.target=e});var e,t,i=t;u.link.bind(w).fold(function(){var e=u.text.toOptional().filter(Ld).getOr(o);n.insertContent(n.dom.createHTML("a",i,n.dom.encode(e)))},function(t){e=t,n=o;var e,n,r=u.text.toOptional().filter(Ld).fold(function(){return Hd(e)?S.some(n):S.none()},S.some);Kr(t,i),r.each(function(e){t.dom.textContent=e})})})}function _c(e,t){var n=Ed(Qd.sketch({inputAttributes:{placeholder:tm.translate(t)},onSetValue:function(e,t){Ln(e,yn())},inputBehaviours:M([Gd.config({find:S.some}),em.config({}),I.config({mode:"execution"})]),selectOnFocus:!1})),t=Ed(jl.sketch({dom:g('<button class="${prefix}-input-container-x ${prefix}-icon-cancel-circle ${prefix}-icon"></button>'),action:function(e){e=n.get(e);L.setValue(e,"")}}));return{name:e,spec:Kd.sketch({dom:g('<div class="${prefix}-input-container"></div>'),components:[n.asSpec(),t.asSpec()],containerBehaviours:M([R.config({toggleClass:z("input-container-empty")}),Gd.config({find:function(e){return S.some(n.get(e))}}),qd("input-clearing",[D(yn(),function(e){var t=n.get(e);(0<L.getValue(t).length?R.off:R.on)(e)})])])})}}function Ac(e,t,n){(t.disabled()?Bc:Pc)(e,t)}function Dc(e,t){return!0===t.useNative&&gt(nm,Jn(e.element))}function Mc(e){E(e.element,"disabled","disabled")}function Nc(e){Jr(e.element,"disabled")}function Rc(e){E(e.element,"aria-disabled","true")}function zc(e){E(e.element,"aria-disabled","false")}function Bc(t,e,n){e.disableClass.each(function(e){io(t.element,e)}),(Dc(t,e)?Mc:Rc)(t),e.onDisabled(t)}function Pc(t,e,n){e.disableClass.each(function(e){ao(t.element,e)}),(Dc(t,e)?Nc:zc)(t),e.onEnabled(t)}function Ic(e,t){return Dc(e,t)?Yr(e.element,"disabled"):"true"===_(e.element,"aria-disabled")}function Lc(e){return"<alloy.field."+e+">"}function Fc(r,e){return{uid:r.uid,dom:r.dom,components:e,behaviours:Xs(r.formBehaviours,[L.config({store:{mode:"manual",getValue:function(e){e=kl(e,r);return Fr(e,function(e,n){return e().bind(function(e){var t=Gd.getCurrent(e);return im(t,new Error("Cannot find a current component to extract the value from for form part '"+n+"': "+mu(e.element)))}).map(L.getValue)})},setValue:function(n,e){Lr(e,function(t,e){Sl(n,r,e).each(function(e){Gd.getCurrent(e).each(function(e){L.setValue(e,t)})})})}}})]),apis:{getField:function(e,t){return Sl(e,r,t).bind(Gd.getCurrent)}}}}function Hc(e){function r(t,e,n){return jl.sketch({dom:g('<span class="${prefix}-icon-'+e+' ${prefix}-icon"></span>'),action:function(e){Fn(e,u,{direction:t})},buttonBehaviours:M([rm.config({disableClass:z("toolbar-navigation-disabled"),disabled:function(){return!n}})])})}function o(e,r){var o=Qu(e.element,"."+z("serialised-dialog-screen"));us(e.element,"."+z("serialised-dialog-chain")).each(function(n){0<=a.state.currentScreen.get()+r&&a.state.currentScreen.get()+r<o.length&&(Uu(n,"left").each(function(e){var e=parseInt(e,10),t=nf(o[0]);B(n,"left",e-r*t+"px")}),a.state.currentScreen.set(a.state.currentScreen.get()+r))})}function i(n){var e=Qu(n.element,"input"),e=(S.from(e[a.state.currentScreen.get()]).each(function(e){n.getSystem().getByDom(e).each(function(e){var t;t=n,e=e.element,t.getSystem().triggerFocus(e,t.element)})}),s.get(n));P.highlightAt(e,a.state.currentScreen.get())}var u="navigateEvent",t=No([l("fields"),f("maxFieldIndex",e.fields.length-1),l("onExecute"),l("getInitialValue"),Uo("state",function(){return{dialogSwipeState:Os(),currentScreen:N(0)}})]),a=Ho("SerialisedDialog",t,e),c=Ed(um(function(n){return{dom:g('<div class="${prefix}-serialised-dialog"></div>'),components:[Kd.sketch({dom:g('<div class="${prefix}-serialised-dialog-chain" style="left: 0px; position: absolute;"></div>'),components:k(a.fields,function(e,t){return t<=a.maxFieldIndex?Kd.sketch({dom:g('<div class="${prefix}-serialised-dialog-screen"></div>'),components:[r(-1,"previous",0<t),n.field(e.name,e.spec),r(1,"next",t<a.maxFieldIndex)]}):n.field(e.name,e.spec)})})],formBehaviours:M([Nu(function(e,t){var n;n=t,us(e.element,"."+z("serialised-dialog-chain")).each(function(e){B(e,"left",-a.state.currentScreen.get()*n.width+"px")})}),I.config({mode:"special",focusIn:function(e,t){i(e)},onTab:function(e,t){return o(e,1),S.some(!0)},onShiftTab:function(e,t){return o(e,-1),S.some(!0)}}),qd("form-events",[Si(function(t,e){a.state.currentScreen.set(0),a.state.dialogSwipeState.clear();var n=s.get(t);P.highlightFirst(n),a.getInitialValue(t).each(function(e){L.setValue(t,e)})}),Oi(a.onExecute),D(Cn(),function(e,t){"left"===t.event.raw.propertyName&&i(e)}),D(u,function(e,t){t=t.event.direction;o(e,t)})])])}})),s=Ed({dom:g('<div class="${prefix}-dot-container"></div>'),behaviours:M([P.config({highlightClass:z("dot-active"),itemClass:z("dot-item")})]),components:kt(a.fields,function(e,t){return t<=a.maxFieldIndex?[Gl('<div class="${prefix}-dot-item ${prefix}-icon-full-dot ${prefix}-icon"></div>')]:[]})});return{dom:g('<div class="${prefix}-serializer-wrapper"></div>'),components:[c.asSpec(),s.asSpec()],behaviours:M([I.config({mode:"special",focusIn:function(e){e=c.get(e);I.focusIn(e)}}),qd("serializer-wrapper-events",[D(ln(),function(e,t){t=t.event;a.state.dialogSwipeState.set({xValue:t.raw.touches[0].clientX,points:[]})}),D(fn(),function(e,o){var i=o.event;a.state.dialogSwipeState.on(function(e){var t,n,r;o.event.prevent(),a.state.dialogSwipeState.set((e=e,(t=i.raw.touches[0].clientX)===e.xValue?e:(r={direction:n=0<t-e.xValue?am:cm,xValue:t},{xValue:t,points:(0===e.points.length?[]:e.points[e.points.length-1].direction===n?e.points.slice(0,e.points.length-1):e.points).concat([r])})))})}),D(dn(),function(r,e){a.state.dialogSwipeState.on(function(e){var t=c.get(r),n=-1*(0===(e=e).points.length?sm:(n=e.points[0].direction,e=e.points[e.points.length-1].direction,n===cm&&e===cm?cm:n===am&&e===am?am:sm));o(t,n)})})])])}}function Vc(t,e){T(e,function(e){ao(t,e)})}function jc(e){(Gi(e.element).isNone()||Pu.isFocused(e))&&(Pu.isFocused(e)||Pu.focus(e),Fn(e,tg,{item:e}))}function Uc(e){Fn(e,ng,{item:e})}function Wc(e,n){var r=yr(n),t=qi(r).bind(function(t){function e(e){return v(t,e)}return e(n)?S.some(n):rs(n,e)}),e=e(n);t.each(function(t){qi(r).filter(function(e){return v(e,t)}).fold(function(){Wi(t)},C)})}function $c(e,t,n,r){r=e.getSystem().build(r),Dr(e,r,n)}function qc(e,t,n,r){e=Gc(e),xt(e,function(e){return v(r.element,e.element)}).each(Nr)}function Gc(e,t){return e.components()}function Kc(t,e,n,o,r){var i=Gc(t);return S.from(i[o]).map(function(e){return qc(t,0,0,e),r.each(function(e){$c(t,0,function(e,t){var n,r;r=t,sr(n=e,o).fold(function(){mr(n,r)},function(e){fr(e,r)})},e)}),e})}function Xc(e){return"prepared"===e.type?S.some(e.menu):S.none()}function Yc(t,n,e){var r,o,i;i=e,yg(r=t,o=n).bind(function(e){return bg(r,o,i,e)}).each(function(e){e=e.transition;ao(t.element,e.transitionClass),Jr(t.element,n.destinationAttr)})}function Jc(e,t,n,r){Yc(e,t,n),Yr(e.element,t.stateAttr)&&_(e.element,t.stateAttr)!==r&&t.onFinish(e,r),E(e.element,t.stateAttr,r)}var Zc,Qc,es,ts=function(e,t,n){for(var r=e.dom,o=Y(n)?n:ie;r.parentNode;){var r=r.parentNode,i=O.fromDom(r);if(t(i))return S.some(i);if(o(i))break}return S.none()},ns=function(e,t,n){return ea(function(e,t){return t(e)},ts,e,t,n)},rs=function(e,r){function o(e){for(var t=0;t<e.childNodes.length;t++){var n=O.fromDom(e.childNodes[t]);if(r(n))return S.some(n);n=o(e.childNodes[t]);if(n.isSome())return n}return S.none()}return o(e.dom)},os=function(e){return Yn(e)},is=function(e,t,n){return ts(e,function(e){return Gn(e,t)},n)},us=function(e,t){return Yn(t,e)},as=function(e,t,n){return ea(function(e,t){return Gn(e,t)},is,e,t,n)},cs=[8],ss=[9],ls=[13],fs=[27],ds=[32],ms=[37],gs=[38],ps=[39],hs=[40],m=function(t){return function(e){e=e.raw;return gt(t,e.which)}},vs=ne(ua),bs=function(e,t){return xt(e,function(e){return e.matches(t)}).map(function(e){return e.classification})},ys=function(e,t,n,r){e+=t;return r<e?n:e<n?r:e},ws=function(e,t,n){return Math.min(Math.max(e,t),n)},Eu=Object.freeze({__proto__:null,dehighlightAll:function(e,t,n){return ca(e,t,0,[])},dehighlight:function(e,t,n,r){la(0,t,0,r)&&(ao(r.element,t.highlightClass),t.onDehighlight(e,r),Ln(r,In()))},highlight:sa,highlightFirst:function(t,n,r){fa(t,n).each(function(e){sa(t,n,r,e)})},highlightLast:function(t,n,r){da(t,n).each(function(e){sa(t,n,r,e)})},highlightAt:function(t,n,r,e){var o,i;o=e,i=Qu((e=t).element,"."+n.itemClass),S.from(i[o]).fold(function(){return b.error(new Error("No element found with index "+o))},e.getSystem().getByDom).fold(function(e){throw e},function(e){sa(t,n,r,e)})},highlightBy:function(t,n,r,e){var o=ga(t,n);xt(o,e).each(function(e){sa(t,n,r,e)})},isHighlighted:la,getHighlighted:function(t,e,n){return us(t.element,"."+e.highlightClass).bind(function(e){return t.getSystem().getByDom(e).toOptional()})},getFirst:fa,getLast:da,getPrevious:function(e,t,n){return ma(e,t,0,-1)},getNext:function(e,t,n){return ma(e,t,0,1)},getCandidates:ga}),t=[l("highlightClass"),l("itemClass"),We("onHighlight"),We("onDehighlight")],P=Fi({fields:t,name:"highlighting",apis:Eu}),xs=function(e,t,n){t.exists(function(t){return n.exists(function(e){return v(e,t)})})||Fn(e,Bn(),{prevFocus:t,newFocus:n})},Cs=function(){function r(e){return Gi(e.element)}return{get:r,set:function(e,t){var n=r(e),t=(e.getSystem().triggerFocus(t,e.element),r(e));xs(e,n,t)}}},t=((n=Zc=Zc||{}).OnFocusMode="onFocus",n.OnEnterOrSpaceMode="onEnterOrSpace",n.OnApiMode="onApi",va(Uo("cyclic",ie))),Eu=va(Uo("cyclic",x)),n=[f("execute",ya),f("useSpace",!1),f("useEnter",!0),f("useControlEnter",!1),f("useDown",!1)],n=ha(n,Pi.init,function(e,t,n,r){var e=n.useSpace&&!ba(e.element)?ds:[],o=n.useEnter?ls:[],i=n.useDown?hs:[],e=e.concat(o).concat(i);return[d(m(e),xa)].concat(n.useControlEnter?[d(ia([aa,m(ls)]),xa)]:[])},function(e,t,n,r){return n.useSpace&&!ba(e.element)?[d(m(ds),wa)]:[]},function(){return S.none()}),Ss=function(e){function t(){n.get().each(e)}var n=N(S.none());return{clear:function(){t(),n.set(S.none())},isSet:function(){return n.get().isSome()},get:function(){return n.get()},set:function(e){t(),n.set(S.some(e))}}},ks=function(){return Ss(function(e){return e.destroy()})},Ts=function(){var t=ks();return y(y({},t),{run:function(e){return t.get().each(e)}})},Os=function(){var t=Ss(C);return y(y({},t),{on:function(e){return t.get().each(e)}})},Es=Object.freeze({__proto__:null,flatgrid:Ca,init:function(e){return e.state(e)}}),_s=function(e){return"rtl"===Vu(e,"direction")?"rtl":"ltr"},As=function(t,n,e,r,o){return r.focusManager.get(n).bind(function(e){return t(n.element,e,r,o)}).map(function(e){return r.focusManager.set(n,e),!0})},Ds=Ea,Ms=Ea,Ns=Ea,Rs=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},zs=function(e){return!Rs(e.dom)},Bs=function(t,e){return Ct(t,e).map(function(e){return{index:e,candidates:t}})},Ps=function(e,t,n){e=Qu(e,n),n=vt(e,zs);return Bs(n,function(e){return v(e,t)})},Is=function(t,e,n,r){return r(Math.floor(e/n),e%n).bind(function(e){e=e.row*n+e.column;return 0<=e&&e<t.length?S.some(t[e]):S.none()})},Ls=[l("selector"),f("execute",ya),$e("onEscape"),f("captureTab",!1),Tu()],Fs=Na(function(e,t,n,r){return Aa(e,t,n,r,-1)}),Hs=Na(function(e,t,n,r){return Aa(e,t,n,r,1)}),Vs=Na(function(e,t,n,r){return Da(e,t,n,r,-1)}),js=Na(function(e,t,n,r){return Da(e,t,n,r,1)}),Fs=h([d(m(ms),Ta(Fs,Hs)),d(m(ps),Oa(Fs,Hs)),d(m(gs),Ds(Vs)),d(m(hs),Ms(js)),d(ia([ua,m(ss)]),Ra),d(ia([vs,m(ss)]),Ra),d(m(fs),function(e,t,n){return n.onEscape(e,t)}),d(m(ds.concat(ls)),function(t,n,r,e){return(o=r).focusManager.get(t).bind(function(e){return as(e,o.selector)}).bind(function(e){return r.execute(t,n,e)});var o})]),Hs=h([d(m(ds),wa)]),Vs=ha(Ls,Ca,Fs,Hs,function(){return S.some(Ma)}),Us=function(e,t,n,o){function i(e,t,n){var r;return(t=ys(t,o,0,n.length-1))===e?S.none():(r=n[t],"button"===Jn(r)&&"disabled"===_(r,"disabled")?i(e,t,n):S.from(n[t]))}return Ps(e,n,t).bind(function(e){var t=e.index,e=e.candidates;return i(t,t,e)})},js=[l("selector"),f("getInitial",S.none),f("execute",ya),$e("onEscape"),f("executeOnMove",!1),f("allowVertical",!0)],Ws=function(e,t){return t.focusManager.get(e).bind(function(e){return as(e,t.selector)})},$s=function(t,n,r){return Ws(t,r).bind(function(e){return r.execute(t,n,e)})},Ls=h([d(m(ds),wa)]),Fs=ha(js,Pi.init,function(e,t,n,r){var o=ms.concat(n.allowVertical?gs:[]),n=ps.concat(n.allowVertical?hs:[]);return[d(m(o),Ia(Ta(Ba,Pa))),d(m(n),Ia(Oa(Ba,Pa))),d(m(ls),$s),d(m(ds),$s),d(m(fs),La)]},Ls,function(){return S.some(za)}),qs=function(e,t,n){return S.from(e[t]).bind(function(e){return S.from(e[n]).map(function(e){return{rowIndex:t,columnIndex:n,cell:e}})})},Hs=[Wo("selectors",[l("row"),l("cell")]),f("cycles",!0),f("previousSelector",S.none),f("execute",ya)],js=Wa(function(e,t,n){return Fa(e,t,n,-1)},function(e,t,n){return Va(e,t,n,-1)}),Ls=Wa(function(e,t,n){return Fa(e,t,n,1)},function(e,t,n){return Va(e,t,n,1)}),Gs=Wa(function(e,t,n){return Ha(e,n,t,-1)},function(e,t,n){return ja(e,n,t,-1)}),Ks=Wa(function(e,t,n){return Ha(e,n,t,1)},function(e,t,n){return ja(e,n,t,1)}),js=h([d(m(ms),Ta(js,Ls)),d(m(ps),Oa(js,Ls)),d(m(gs),Ds(Gs)),d(m(hs),Ms(Ks)),d(m(ds.concat(ls)),function(t,n,r){return Gi(t.element).bind(function(e){return r.execute(t,n,e)})})]),Ls=h([d(m(ds),wa)]),Ds=ha(Hs,Pi.init,js,Ls,function(){return S.some(Ua)}),Gs=[l("selector"),f("execute",ya),f("moveOnTab",!1)],Ms=h([d(m(gs),Ns(Ga)),d(m(hs),Ns(Ka)),d(ia([ua,m(ss)]),function(e,t,n,r){return n.moveOnTab?Ns(Ga)(e,t,n,r):S.none()}),d(ia([vs,m(ss)]),function(e,t,n,r){return n.moveOnTab?Ns(Ka)(e,t,n,r):S.none()}),d(m(ls),$a),d(m(ds),$a)]),Ks=h([d(m(ds),wa)]),Hs=ha(Gs,Pi.init,Ms,Ks,function(){return S.some(qa)}),js=[$e("onSpace"),$e("onEnter"),$e("onShiftEnter"),$e("onLeft"),$e("onRight"),$e("onTab"),$e("onShiftTab"),$e("onUp"),$e("onDown"),$e("onEscape"),f("stopSpaceKeyup",!1),s("focusIn")],Ls=ha(js,Pi.init,function(e,t,n){return[d(m(ds),n.onSpace),d(ia([vs,m(ls)]),n.onEnter),d(ia([ua,m(ls)]),n.onShiftEnter),d(ia([ua,m(ss)]),n.onShiftTab),d(ia([vs,m(ss)]),n.onTab),d(m(gs),n.onUp),d(m(hs),n.onDown),d(m(ms),n.onLeft),d(m(ps),n.onRight),d(m(ds),n.onSpace),d(m(fs),n.onEscape)]},function(e,t,n){return n.stopSpaceKeyup?[d(m(ds),wa)]:[]},function(e){return e.focusIn}),Gs=t.schema(),Ms=Eu.schema(),Ks=Fs.schema(),js=Vs.schema(),t=Ds.schema(),Eu=n.schema(),Fs=Hs.schema(),Vs=Ls.schema(),I=(Ds=Ho("Creating behaviour: "+(Ds={branchKey:"mode",branches:Object.freeze({__proto__:null,acyclic:Gs,cyclic:Ms,flow:Ks,flatgrid:js,matrix:t,execution:Eu,menu:Fs,special:Vs}),name:"keying",active:{events:function(e,t){return e.handler.toEvents(e,t)}},apis:{focusIn:function(t,n,r){n.sendFocusIn(n).fold(function(){t.getSystem().triggerFocus(t.element,t.element)},function(e){e(t,n,r)})},setGridSize:function(e,t,n,r,o){qr(n,"setGridSize")?n.setGridSize(r,o):console.error("Layout does not support setGridSize")}},state:Es}).name,Hi,Ds),n=Pe(Ds.branchKey,Ds.branches),Hs=Ds.name,Ls=Ds.active,Gs=Ds.apis,Ms=Ds.extra,Ds=Ds.state,n=qo(Hs,[$o("config",Ks=n)]),Bi(Ks,n,Hs,Ls,Gs,Ms,Ds)),Xs=function(e,t){return y(y({},M(t)),e.dump)},js=Xa,Ys=Xs,Js="placeholder",Zs=Yo([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),Qs=function(e){return $r(e,"uiType")},el=function(e,t,n,r){return e.exists(function(e){return e!==n.owner})?Zs.single(!0,h(n)):p(r,n.name).fold(function(){throw new Error("Unknown placeholder component: "+n.name+"\nKnown: ["+Pr(r)+"]\nNamespace: "+e.getOr("none")+"\nSpec: "+JSON.stringify(n,null,2))},function(e){return e.replace()})},tl=function(e,t,n,r){return Qs(n)&&n.uiType===Js?el(e,t,n,r):Zs.single(!1,h(n))},nl=function(r,o,i,u){return tl(r,o,i,u).fold(function(e,t){var t=Qs(i)?t(o,i.config,i.validated):t(o),n=p(t,"components").getOr([]),n=kt(n,function(e){return nl(r,o,e,u)});return[y(y({},t),{components:n})]},function(e,t){var n;return Qs(i)?(n=t(o,i.config,i.validated),i.validated.preprocess.getOr(w)(n)):t(o)})},rl=function(t,n,e,r){return kt(e,function(e){return nl(t,n,e,r)})},ol=function(e,t){var n=!1;return{name:h(e),required:function(){return t.fold(function(e,t){return e},function(e,t){return e})},used:function(){return n},replace:function(){if(n)throw new Error("Trying to use the same placeholder more than once: "+e);return n=!0,t}}},il=function(t,n,e,r){r=Fr(r,function(e,t){return ol(t,e)}),e=rl(t,n,e,r);return Lr(r,function(e){if(!1===e.used()&&e.required())throw new Error("Placeholder: "+e.name()+" was not found in components list\nNamespace: "+t.getOr("none")+"\nComponents: "+JSON.stringify(n.components,null,2))}),e},ul=Zs.single,al=Zs.multiple,cl=h(Js),sl=0,ll=function(e){var t=(new Date).getTime();return e+"_"+Math.floor(1e9*Math.random())+ ++sl+String(t)},t=Yo([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),Eu=f("factory",{sketch:w}),Fs=f("schema",[]),Vs=l("name"),Es=jo("pname","pname",po(function(e){return"<alloy."+ll(e.name)+">"}),zo()),Hi=Uo("schema",function(){return[s("preprocess")]}),Ks=f("defaults",h({})),n=f("overrides",h({})),Hs=No([Eu,Fs,Vs,Es,Ks,n]),Ls=No([Eu,Fs,Vs,Ks,n]),Gs=No([Eu,Fs,Vs,Es,Ks,n]),Ms=No([Eu,Hi,Vs,l("unit"),Es,Ks,n]),fl=function(e){return e.fold(S.some,S.none,S.some,S.some)},dl=function(e){function t(e){return e.name}return e.fold(t,t,t,t)},ml=Ya(t.required,Hs),gl=(Ya(t.external,Ls),Ya(t.optional,Gs)),Ds=Ya(t.group,Ms),pl=h("entirety"),hl=function(e,t,n,r){return fo(t.defaults(e,n,r),n,{uid:e.partUids[t.name]},t.overrides(e,n,r))},vl=function(e,n,t){var i={},r={};return T(t,function(e){e.fold(function(r){i[r.pname]=ul(!0,function(e,t,n){return r.factory.sketch(hl(e,r,t,n))})},function(e){var t=n.parts[e.name];r[e.name]=h(e.factory.sketch(hl(n,e,t[pl()]),t))},function(r){i[r.pname]=ul(!1,function(e,t,n){return r.factory.sketch(hl(e,r,t,n))})},function(o){i[o.pname]=al(!0,function(t,e,n){var r=t[o.name];return k(r,function(e){return o.factory.sketch(fo(o.defaults(t,e,n),e,o.overrides(t,e)))})})})}),{internals:h(i),externals:h(r)}},bl=function(e,t){return{uiType:cl(),owner:e,name:t}},yl=function(e){return kt(e,function(e){return e.fold(S.none,S.some,S.none,S.none).map(function(e){return Wo(e.name,e.schema.concat([Ou(pl())]))}).toArray()})},wl=function(e){return k(e,dl)},xl=function(e,t,n){return vl(e,t,n)},Cl=function(e,t,n){return il(S.some(e),t,t.components,n)},Sl=function(e,t,n){t=t.partUids[n];return e.getSystem().getByUid(t).toOptional()},kl=function(e,t){var n=e.getSystem();return Fr(t.partUids,function(e,t){return h(n.getByUid(e))})},Tl=function(t){return jo("partUids","partUids",Ae(function(e){return Za(e.uid,t)}),zo())},Ol=ll("alloy-premade"),El=function(e){return ni(Ol,e)},_l=function(e){return p(e,Ol)},Fs=h("alloy-id-"),Eu=h("data-alloy-id"),Al=Fs(),Dl=Eu(),Ml=function(e,t){e=ll(Al+e);return Nl(t,e),e},Nl=function(e,t){Object.defineProperty(e.dom,Dl,{value:t,writable:!0})},Rl=function(e){e=Zn(e)?e.dom[Dl]:null;return S.from(e)},zl=function(e){return ll(e)},Bl=function(e,t){return(0<e.length?[Wo("parts",e)]:[]).concat([l("uid"),f("dom",{}),f("components",[]),Ou("originalSpec"),f("debug.sketcher",{})]).concat(t)},Pl=function(e,t,n,r,o){r=Bl(r,o);return Ho(e+" [SpecSchema]",Mo(r.concat(t)),n)},Il=function(e){return $r(e,"uid")},Ll=function(e){return Il(e)?e:y(y({},e),{uid:zl("uid")})},Fl=function(e){return void 0!==e.uid},Hl=Mo([l("name"),l("factory"),l("configFields"),f("apis",{}),f("extraApis",{})]),Vl=Mo([l("name"),l("factory"),l("configFields"),l("partFields"),f("apis",{}),f("extraApis",{})]),jl=tc({name:"Button",factory:function(e){function t(t){return p(e.dom,"attributes").bind(function(e){return p(e,t)})}n=e.action;var n=A(St([n.map(function(n){return Oi(function(e,t){n(e),t.stop()})}).toArray(),Bu()])),r=e.dom.tag;return{uid:e.uid,dom:e.dom,components:e.components,events:n,behaviours:Ys(e.buttonBehaviours,[Pu.config({}),I.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:"button"===r?(n=t("type").getOr("button"),r=t("role").map(function(e){return{role:e}}).getOr({}),y({type:n},r)):{role:t("role").getOr("button")}},eventOrder:e.eventOrder}},configFields:[f("uid",void 0),l("dom"),f("components",[]),js("buttonBehaviours",[Pu,I]),s("action"),s("role"),f("eventOrder",{})]}),Ul=Fi({fields:[],name:"unselecting",active:Object.freeze({__proto__:null,events:function(){return A([Le(Sn(),x)])},exhibit:function(){return Mi({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})}})}),Wl=function(e){e=void 0!==e.dom.attributes?e.dom.attributes:[];return yt(e,function(e,t){return"class"===t.name?e:y(y({},e),((e={})[t.name]=t.value,e))},{})},$l=function(e){return Array.prototype.slice.call(e.dom.classList,0)},ql=function(e){var e=O.fromHtml(e),t=cr(e),n=Wl(e),r=$l(e),t=0===t.length?{}:{innerHtml:au(e)};return y({tag:Jn(e),classes:r,attributes:n},t)},g=function(e){e=Lt(e,{prefix:zu});return ql(e)},Gl=function(e){return{dom:g(e)}},Kl=function(e,t){return Ql(t,function(){e.execCommand(t)},{},e)},Xl=function(e){return M([R.config({toggleClass:z("toolbar-button-selected"),toggleOnExecute:!1,aria:{mode:"pressed"}}),Mu(e,function(e,t){(t?R.on:R.off)(e)})])},Yl=function(e,t){var n=Xl(t);return Ql(t,function(){e.execCommand(t)},n,e)},Jl=function(e,t,n,r){n=Xl(n);return Ql(t,r,n,e)},Zl=function(e,t){t=t.ui.registry.getAll().icons;return S.from(t[e]).fold(function(){return g('<span class="${prefix}-toolbar-button ${prefix}-toolbar-group-item ${prefix}-icon-'+e+' ${prefix}-icon"></span>')},function(e){return g('<span class="${prefix}-toolbar-button ${prefix}-toolbar-group-item">'+e+"</span>")})},Ql=function(e,t,n,r){return jl.sketch({dom:Zl(e,r),action:t,buttonBehaviours:fo(M([Ul.config({})]),n)})},Hi=gl({schema:[l("dom")],name:"label"}),Vs=rc("top-left"),Es=rc("top"),Ks=rc("top-right"),n=rc("right"),Hs=rc("bottom-right"),Ls=rc("bottom"),Gs=rc("bottom-left"),t=[Hi,rc("left"),n,Es,Ls,Vs,Ks,Gs,Hs,ml({name:"thumb",defaults:h({dom:{styles:{position:"absolute"}}}),overrides:function(e){return{events:A([He(ln(),e,"spectrum"),He(fn(),e,"spectrum"),He(dn(),e,"spectrum"),He(mn(),e,"spectrum"),He(gn(),e,"spectrum"),He(pn(),e,"spectrum")])}}}),ml({schema:[Uo("mouseIsDown",function(){return N(!1)})],name:"spectrum",overrides:function(n){function r(t,e){return o.getValueFromEvent(e).map(function(e){return o.setValueFrom(t,n,e)})}var o=n.model.manager;return{behaviours:M([I.config({mode:"special",onLeft:function(e){return o.onLeft(e,n)},onRight:function(e){return o.onRight(e,n)},onUp:function(e){return o.onUp(e,n)},onDown:function(e){return o.onDown(e,n)}}),Pu.config({})]),events:A([D(ln(),r),D(fn(),r),D(mn(),r),D(gn(),function(e,t){n.mouseIsDown.get()&&r(e,t)})])}}})],Ms=Object.freeze({__proto__:null,onLoad:oc,onUnload:ic,setValue:function(e,t,n,r){t.store.manager.setValue(e,t,n,r)},getValue:function(e,t,n){return t.store.manager.getValue(e,t,n)},getState:function(e,t,n){return n}}),Fs=Object.freeze({__proto__:null,events:function(n,r){var e=n.resetOnDom?[Si(function(e,t){oc(e,n,r)}),ki(function(e,t){ic(e,n,r)})]:[Ve(n,r,oc)];return A(e)}}),Eu=Object.freeze({__proto__:null,memory:uc,dataset:ac,manual:function(){return Ii({readState:C})},init:function(e){return e.store.manager.state(e)}}),Hi=[s("initialValue"),l("getFallbackEntry"),l("getDataKey"),l("setValue"),i("manager",{setValue:cc,getValue:function(e,t,n){var r=t.store,o=r.getDataKey(e);return n.lookup(o).getOrThunk(function(){return r.getFallbackEntry(o)})},onLoad:function(t,n,r){n.store.initialValue.each(function(e){cc(t,n,r,e)})},onUnload:function(e,t,n){n.clear()},state:ac})],n=[l("getValue"),f("setValue",C),s("initialValue"),i("manager",{setValue:function(e,t,n,r){t.store.setValue(e,r),t.onSetValue(e,r)},getValue:function(e,t,n){return t.store.getValue(e)},onLoad:function(t,n,e){n.store.initialValue.each(function(e){n.store.setValue(t,e)})},onUnload:C,state:Pi.init})],Es=[s("initialValue"),i("manager",{setValue:function(e,t,n,r){n.set(r),t.onSetValue(e,r)},getValue:function(e,t,n){return n.get()},onLoad:function(e,t,n){t.store.initialValue.each(function(e){n.isNotSet()&&n.set(e)})},onUnload:function(e,t,n){n.clear()},state:uc})],Ls=[Ko("store",{mode:"memory"},Pe("mode",{memory:Es,manual:n,dataset:Hi})),We("onSetValue"),f("resetOnDom",!1)],L=Fi({fields:Ls,name:"representing",active:Fs,apis:Ms,extra:{setValueFrom:function(e,t){t=L.getValue(t);L.setValue(e,t)}},state:Eu}),ef=tt("width",function(e){return e.dom.offsetWidth}),tf=function(e,t){return ef.set(e,t)},nf=function(e){return ef.get(e)},rf=sc,of=h("slider.change.value"),uf=function(e){return-1!==e.type.indexOf("touch")},af="top",cf="right",sf="bottom",lf="left",ff=function(e){return e.model.minX},df=function(e){return e.model.minY},mf=function(e){return e.model.maxX},gf=function(e){return e.model.maxY},pf=function(e,t,n){return t(e)-n(e)},hf=function(e){return pf(e,mf,ff)},vf=function(e){return pf(e,gf,df)},bf=function(e){return e.stepSize},yf=function(e){return e.snapToGrid},wf=function(e){return e.snapStart},xf=function(e){return e.rounded},Cf=function(e,t){return void 0!==e[t+"-edge"]},Sf=function(e){return Cf(e,lf)},kf=function(e){return Cf(e,cf)},Tf=function(e){return Cf(e,af)},Of=function(e){return Cf(e,sf)},Ef=function(e){return e.model.value.get()},_f=function(e,t,n,r){return e<t?e:n<e?n:e===t?t-1:Math.max(t,e-r)},Af=function(e,t,n,r){return n<e?e:e<t?t:e===n?n+1:Math.min(n,e+r)},Df=function(e,t,n){return Math.max(t,Math.min(n,e))},Mf=function(o,t,i,u,e){return e.fold(function(){var e=Math.round((o-t)/u)*u;return Df(t+e,t-1,i+1)},function(e){var t=Math.round((o-e)%u/u),n=Math.floor((o-e)/u),r=Math.floor((i-e)/u),r=Math.min(r,n+t);return Math.max(e,e+r*u)})},Nf=function(e,t,n){return Math.min(n,Math.max(e,t))-t},Rf=function(e){var t=e.min,n=e.max,r=e.range,o=e.value,i=e.step,u=e.snap,a=e.snapStart,c=e.rounded,s=e.hasMinEdge,l=e.hasMaxEdge,f=e.minBound,d=e.maxBound,e=e.screenRange,s=s?t-1:t,l=l?n+1:n;return o<f?s:d<o?l:(o=Nf(o,f,d),f=Df(o/e*r+t,s,l),u&&t<=f&&f<=n?Mf(f,t,n,i,a):c?Math.round(f):f)},zf=function(e){var t=e.min,n=e.max,r=e.range,o=e.value,i=e.hasMinEdge,u=e.hasMaxEdge,a=e.maxBound,c=e.maxOffset,s=e.centerMinEdge,e=e.centerMaxEdge;return o<t?i?0:s:n<o?u?a:e:(o-t)/r*c},Bf="top",Pf="right",If="bottom",Lf="left",Ff="width",Hf="height",Vf=function(e){return e.element.dom.getBoundingClientRect()},jf=function(e,t){return e[t]},Uf=function(e){e=Vf(e);return jf(e,Lf)},Wf=function(e){e=Vf(e);return jf(e,Pf)},$f=function(e){e=Vf(e);return jf(e,Bf)},qf=function(e){e=Vf(e);return jf(e,If)},Gf=function(e){e=Vf(e);return jf(e,Ff)},Kf=function(e){e=Vf(e);return jf(e,Hf)},Xf=function(e,t,n){return(e+t)/2-n},Yf=function(e,t){var e=Vf(e),t=Vf(t),n=jf(e,Lf),e=jf(e,Pf),t=jf(t,Lf);return Xf(n,e,t)},Jf=function(e,t){var e=Vf(e),t=Vf(t),n=jf(e,Bf),e=jf(e,If),t=jf(t,Bf);return Xf(n,e,t)},Zf=function(e,t){Fn(e,of(),{value:t})},Qf=function(e){return{x:e}},Vs=wc(-1),Ks=wc(1),Gs=S.none,Hs=S.none,Es={"top-left":S.none(),top:S.none(),"top-right":S.none(),right:S.some(function(e,t){bc(e,{x:mc(t)})}),"bottom-right":S.none(),bottom:S.none(),"bottom-left":S.none(),left:S.some(function(e,t){bc(e,{x:fc(t)})})},n=Object.freeze({__proto__:null,setValueFrom:function(e,t,n){t=yc(e,t,n),n=Qf(t);return Zf(e,n),t},setToMin:function(e,t){t=ff(t);Zf(e,Qf(t))},setToMax:function(e,t){t=mf(t);Zf(e,Qf(t))},findValueOfOffset:yc,getValueFromEvent:function(e){return lc(e).map(function(e){return e.left})},findPositionOfValue:xc,setPositionFromValue:function(e,t,n,r){var o=Ef(n),o=xc(e,r.getSpectrum(e),o.x,r.getLeftEdge(e),r.getRightEdge(e),n),r=nf(t.element)/2;B(t.element,"left",o-r+"px")},onLeft:Vs,onRight:Ks,onUp:Gs,onDown:Hs,edgeActions:Es}),ed=function(e,t){Fn(e,of(),{value:t})},td=function(e){return{y:e}},Hi=S.none,Ls=S.none,Fs=Sc(-1),Ms=Sc(1),Eu={"top-left":S.none(),top:S.some(function(e,t){bc(e,{y:dc(t)})}),"top-right":S.none(),right:S.none(),"bottom-right":S.none(),bottom:S.some(function(e,t){bc(e,{y:gc(t)})}),"bottom-left":S.none(),left:S.none()},Vs=Object.freeze({__proto__:null,setValueFrom:function(e,t,n){t=Cc(e,t,n),n=td(t);return ed(e,n),t},setToMin:function(e,t){t=df(t);ed(e,td(t))},setToMax:function(e,t){t=gf(t);ed(e,td(t))},findValueOfOffset:Cc,getValueFromEvent:function(e){return lc(e).map(function(e){return e.top})},findPositionOfValue:kc,setPositionFromValue:function(e,t,n,r){var o=Ef(n),o=kc(e,r.getSpectrum(e),o.y,r.getTopEdge(e),r.getBottomEdge(e),n),r=Gu(t.element)/2;B(t.element,"top",o-r+"px")},onLeft:Hi,onRight:Ls,onUp:Fs,onDown:Ms,edgeActions:Eu}),nd=function(e,t){Fn(e,of(),{value:t})},rd=function(e,t){return{x:e,y:t}},Ks=lc,Gs=Tc(-1,!1),Hs=Tc(1,!1),Es=Tc(-1,!0),Hi=Tc(1,!0),Ls={"top-left":S.some(function(e,t){bc(e,vc(fc(t),dc(t)))}),top:S.some(function(e,t){bc(e,vc(pc(t),dc(t)))}),"top-right":S.some(function(e,t){bc(e,vc(mc(t),dc(t)))}),right:S.some(function(e,t){bc(e,vc(mc(t),hc(t)))}),"bottom-right":S.some(function(e,t){bc(e,vc(mc(t),gc(t)))}),bottom:S.some(function(e,t){bc(e,vc(pc(t),gc(t)))}),"bottom-left":S.some(function(e,t){bc(e,vc(fc(t),gc(t)))}),left:S.some(function(e,t){bc(e,vc(fc(t),hc(t)))})},Fs=Object.freeze({__proto__:null,setValueFrom:function(e,t,n){var r=yc(e,t,n.left),t=Cc(e,t,n.top),n=rd(r,t);return nd(e,n),n},setToMin:function(e,t){var n=ff(t),t=df(t);nd(e,rd(n,t))},setToMax:function(e,t){var n=mf(t),t=gf(t);nd(e,rd(n,t))},getValueFromEvent:Ks,setPositionFromValue:function(e,t,n,r){var o=Ef(n),i=xc(e,r.getSpectrum(e),o.x,r.getLeftEdge(e),r.getRightEdge(e),n),o=kc(e,r.getSpectrum(e),o.y,r.getTopEdge(e),r.getBottomEdge(e),n),r=nf(t.element)/2,e=Gu(t.element)/2;B(t.element,"left",i-r+"px"),B(t.element,"top",o-e+"px")},onLeft:Gs,onRight:Hs,onUp:Es,onDown:Hi,edgeActions:Ls}),Ms=[f("stepSize",1),f("onChange",C),f("onChoose",C),f("onInit",C),f("onDragStart",C),f("onDragEnd",C),f("snapToGrid",!1),f("rounded",!0),s("snapStart"),Ie("model",Pe("mode",{x:[f("minX",0),f("maxX",100),Uo("value",function(e){return N(e.mode.minX)}),l("getInitialValue"),i("manager",n)],y:[f("minY",0),f("maxY",100),Uo("value",function(e){return N(e.mode.minY)}),l("getInitialValue"),i("manager",Vs)],xy:[f("minX",0),f("maxX",100),f("minY",0),f("maxY",100),Uo("value",function(e){return N({x:e.mode.minX,y:e.mode.minY})}),l("getInitialValue"),i("manager",Fs)]})),Xa("sliderBehaviours",[I,L]),Uo("mouseIsDown",function(){return N(!1)})],od=h("mouse.released"),id=nc({name:"Slider",configFields:Ms,partFields:t,factory:function(o,e,t,n){function i(e){return Ja(e,o,"spectrum")}function r(e){return Sl(e,o,"left-edge")}function u(e){return Sl(e,o,"right-edge")}function a(e){return Sl(e,o,"top-edge")}function c(e){return Sl(e,o,"bottom-edge")}function s(e,t){g.value.set(t),t=m(e),h(e,t)}function l(n){var e=o.mouseIsDown.get();o.mouseIsDown.set(!1),e&&Sl(n,o,"thumb").each(function(e){var t=g.value.get();o.onChoose(n,e,t)})}function f(e,t){t.stop(),o.mouseIsDown.set(!0),o.onDragStart(e,m(e))}function d(e,t){t.stop(),o.onDragEnd(e,m(e)),l(e)}var m=function(e){return Ja(e,o,"thumb")},g=o.model,p=g.manager,h=function(e,t){p.setPositionFromValue(e,t,o,{getLeftEdge:r,getRightEdge:u,getTopEdge:a,getBottomEdge:c,getSpectrum:i})};return{uid:o.uid,dom:o.dom,components:e,behaviours:Xs(o.sliderBehaviours,[I.config({mode:"special",focusIn:function(e){return Sl(e,o,"spectrum").map(I.focusIn).map(x)}}),L.config({store:{mode:"manual",getValue:function(e){return g.value.get()}}}),_u.config({channels:((e={})[od()]={onReceive:l},e)})]),events:A([D(of(),function(e,t){var n;e=e,t=t.event.value,s(e,t),n=m(e),o.onChange(e,n,t),S.some(!0)}),Si(function(e,t){var n=g.getInitialValue(),n=(g.value.set(n),m(e)),r=(h(e,n),i(e));o.onInit(e,n,r,g.value.get())}),D(ln(),f),D(dn(),d),D(mn(),f),D(pn(),d)]),apis:{resetToMin:function(e){p.setToMin(e,o)},resetToMax:function(e){p.setToMax(e,o)},setValue:s,refresh:h},domModification:{styles:{position:"relative"}}}},apis:{setValue:function(e,t,n){e.setValue(t,n)},resetToMin:function(e,t){e.resetToMin(t)},resetToMax:function(e,t){e.resetToMax(t)},refresh:function(e,t){e.refresh(t)}}}),ud=function(t,n,r,e){return Ql(n,function(){var e=r();t.setContextToolbar([{label:n+" group",items:e}])},{},e)},ad=-1,cd=function(r){function o(e){return e<0?"black":360<e?"white":"hsl("+e+", 100%, 50%)"}return id.sketch({dom:g('<div class="${prefix}-slider ${prefix}-hue-slider-container"></div>'),components:[id.parts["left-edge"](Gl('<div class="${prefix}-hue-slider-black"></div>')),id.parts.spectrum({dom:g('<div class="${prefix}-slider-gradient-container"></div>'),components:[Gl('<div class="${prefix}-slider-gradient"></div>')],behaviours:M([R.config({toggleClass:z("thumb-active")})])}),id.parts["right-edge"](Gl('<div class="${prefix}-hue-slider-white"></div>')),id.parts.thumb({dom:g('<div class="${prefix}-slider-thumb"></div>'),behaviours:M([R.config({toggleClass:z("thumb-active")})])})],onChange:function(e,t,n){n=o(n.x());B(t.element,"background-color",n),r.onChange(e,t,n)},onDragStart:function(e,t){R.on(t)},onDragEnd:function(e,t){R.off(t)},onInit:function(e,t,n,r){r=o(r.x());B(t.element,"background-color",r)},stepSize:10,model:{mode:"x",minX:0,maxX:360,getInitialValue:function(){return{x:r.getInitialValue()}}},sliderBehaviours:M([Nu(id.refresh)])})},sd=function(e){return[cd(e)]},ld=function(e,r){var t={onChange:function(e,t,n){r.undoManager.transact(function(){r.formatter.apply("forecolor",{value:n}),r.nodeChanged()})},getInitialValue:h(ad)};return ud(e,"color-levels",function(){return sd(t)},r)},fd=["9px","10px","11px","12px","14px","16px","18px","20px","24px","32px","36px"],dd="medium",md=2,gd=function(e){return S.from(fd[e])},pd=function(t){return Ct(fd,function(e){return e===t})},hd=function(t,e){return(Zn(e)?S.some(e):or(e).filter(Zn)).map(function(e){return ns(e,function(e){return Uu(e,"font-size").isSome()},t).bind(function(e){return Uu(e,"font-size")}).getOrThunk(function(){return Vu(e,"font-size")})}).getOr("")},vd=function(e){var t=e.selection.getStart(),t=O.fromDom(t),n=O.fromDom(e.getBody()),r=hd(function(e){return v(n,e)},t);return xt(fd,function(e){return r===e}).getOr(dd)},bd=function(e,t){vd(e)!==t&&e.execCommand("fontSize",!1,t)},yd=function(e){e=vd(e);return pd(e).getOr(md)},wd=function(t,e){gd(e).each(function(e){bd(t,e)})},Eu=h(fd),xd=Mo([l("getInitialValue"),l("onChange"),l("category"),l("sizes")]),Cd=function(e){var o=Ho("SizeSlider",xd,e);return id.sketch({dom:{tag:"div",classes:[z("slider-"+o.category+"-size-container"),z("slider"),z("slider-size-container")]},onChange:function(e,t,n){var r,n=n.x();0<=(r=n)&&r<o.sizes.length&&o.onChange(n)},onDragStart:function(e,t){R.on(t)},onDragEnd:function(e,t){R.off(t)},model:{mode:"x",minX:0,maxX:o.sizes.length-1,getInitialValue:function(){return{x:o.getInitialValue()}}},stepSize:1,snapToGrid:!0,sliderBehaviours:M([Nu(id.refresh)]),components:[id.parts.spectrum({dom:g('<div class="${prefix}-slider-size-container"></div>'),components:[Gl('<div class="${prefix}-slider-size-line"></div>')]}),id.parts.thumb({dom:g('<div class="${prefix}-slider-thumb"></div>'),behaviours:M([R.config({toggleClass:z("thumb-active")})])})]})},Sd=Eu(),kd=function(e){return Cd({onChange:e.onChange,sizes:Sd,category:"font",getInitialValue:e.getInitialValue})},Td=function(e){return[Gl('<span class="${prefix}-toolbar-button ${prefix}-icon-small-font ${prefix}-icon"></span>'),kd(e),Gl('<span class="${prefix}-toolbar-button ${prefix}-icon-large-font ${prefix}-icon"></span>')]},Od=function(e,t){var n={onChange:function(e){wd(t,e)},getInitialValue:function(){return yd(t)}};return ud(e,"font-size",function(){return Td(n)},t)},Ed=function(e){var t=Fl(e)&&qr(e,"uid")?e.uid:zl("memento");return{get:function(e){return e.getSystem().getByUid(t).getOrDie()},getOpt:function(e){return e.getSystem().getByUid(t).toOptional()},asSpec:function(){return y(y({},e),{uid:t})}}},_d={},Ad={exports:_d},Dd=(!function(e){var t,n;t=this,n=function(){var t,e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n={exports:{}};function r(){}function i(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],l(e,this)}function o(n,r){for(;3===n._state;)n=n._value;0===n._state?n._deferreds.push(r):(n._handled=!0,i._immediateFn(function(){var e,t=1===n._state?r.onFulfilled:r.onRejected;if(null===t)(1===n._state?u:a)(r.promise,n._value);else{try{e=t(n._value)}catch(e){return void a(r.promise,e)}u(r.promise,e)}}))}function u(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof i)return t._state=3,t._value=e,void c(t);if("function"==typeof n)return void l((r=n,o=e,function(){r.apply(o,arguments)}),t)}t._state=1,t._value=e,c(t)}catch(e){a(t,e)}var r,o}function a(e,t){e._state=2,e._value=t,c(e)}function c(e){2===e._state&&0===e._deferreds.length&&i._immediateFn(function(){e._handled||i._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)o(e,e._deferreds[t]);e._deferreds=null}function s(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function l(e,t){var n=!1;try{e(function(e){n||(n=!0,u(t,e))},function(e){n||(n=!0,a(t,e))})}catch(e){n||(n=!0,a(t,e))}}f=n,e=e,t=setTimeout,i.prototype.catch=function(e){return this.then(null,e)},i.prototype.then=function(e,t){var n=new this.constructor(r);return o(this,new s(e,t,n)),n},i.all=function(e){var a=Array.prototype.slice.call(e);return new i(function(o,i){if(0===a.length)return o([]);var u=a.length;for(var e=0;e<a.length;e++)!function t(n,e){try{if(e&&("object"==typeof e||"function"==typeof e)){var r=e.then;if("function"==typeof r)return void r.call(e,function(e){t(n,e)},i)}a[n]=e,0==--u&&o(a)}catch(e){i(e)}}(e,a[e])})},i.resolve=function(t){return t&&"object"==typeof t&&t.constructor===i?t:new i(function(e){e(t)})},i.reject=function(n){return new i(function(e,t){t(n)})},i.race=function(o){return new i(function(e,t){for(var n=0,r=o.length;n<r;n++)o[n].then(e,t)})},i._immediateFn="function"==typeof setImmediate?function(e){setImmediate(e)}:function(e){t(e,0)},i._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},i._setImmediateFn=function(e){i._immediateFn=e},i._setUnhandledRejectionFn=function(e){i._unhandledRejectionFn=e},f.exports?f.exports=i:e.Promise||(e.Promise=i);var f=n.exports;return{boltExport:("undefined"!=typeof window?window:Function("return this;")()).Promise||f}},"object"==typeof _d&&void 0!==Ad?Ad.exports=n():"function"==typeof e&&e.amd?e(n):(t="undefined"!=typeof globalThis?globalThis:t||self).EphoxContactWrapper=n()}(void 0),Ad.exports.boltExport),Md=function(n){return new Dd(function(e){var t=new FileReader;t.onloadend=function(){e(t.result)},t.readAsDataURL(n)})},Nd=function(e){return Md(e).then(function(e){return e.split(",")[1]})},Rd=function(e){return Nd(e)},zd=function(r,o){Rd(o).then(function(n){r.undoManager.transact(function(){var e=r.editorUpload.blobCache,t=e.create(ll("mceu"),o,n),e=(e.add(t),r.dom.createHTML("img",{src:t.blobUri()}));r.insertContent(e)})})},Bd=function(e){e=e.event.raw,e=e.target.files||e.dataTransfer.files;return S.from(e[0])},Pd=function(n){var t=Ed({dom:{tag:"input",attributes:{accept:"image/*",type:"file",title:""},styles:{visibility:"hidden",position:"absolute"}},events:A([Ci(xn()),D(wn(),function(e,t){Bd(t).each(function(e){zd(n,e)})})])});return jl.sketch({dom:Zl("image",n),components:[t.asSpec()],action:function(e){t.get(e).element.dom.click()}})},Id=function(e){return e.dom.textContent},Ld=function(e){return 0<e.length},Fd=function(e){return null==e?"":e},Hd=function(e){return _(e,"href")===Id(e)},Vd=function(e){e=O.fromDom(e.selection.getStart());return as(e,"a")},jd=sn(),Ud=function(e,t){var n=t.selection.getRng();e(),t.selection.setRng(n)},Wd=function(e,t){(jd.os.isAndroid()?Ud:oe)(t,e)},$d=function(e,t){t=A(t);return Fi({fields:[l("enabled")],name:e,active:{events:h(t)}})},qd=function(e,t){return{key:e,value:{config:{},me:$d(e,t),configAsRaw:h({}),initialConfig:{},state:Pi}}},Ks=Object.freeze({__proto__:null,getCurrent:function(e,t,n){return t.find(e)}}),Gs=[l("find")],Gd=Fi({fields:Gs,name:"composing",apis:Ks}),Kd=tc({name:"Container",factory:function(e){var t=e.dom,n=t.attributes,t=r(t,["attributes"]);return{uid:e.uid,dom:y({tag:"div",attributes:y({role:"presentation"},n)},t),components:e.components,behaviours:e.containerBehaviours.dump,events:e.events,domModification:e.domModification,eventOrder:e.eventOrder}},configFields:[f("components",[]),Xa("containerBehaviours",[]),f("events",{}),f("domModification",{}),f("eventOrder",{})]}),Xd=tc({name:"DataField",factory:function(n){return{uid:n.uid,dom:n.dom,behaviours:Ys(n.dataBehaviours,[L.config({store:{mode:"memory",initialValue:n.getInitialValue()}}),Gd.config({find:S.some})]),events:A([Si(function(e,t){L.setValue(e,n.getInitialValue())})])}},configFields:[l("uid"),l("dom"),l("getInitialValue"),js("dataBehaviours",[L,Gd])]}),Yd=function(e){return e.dom.value},Jd=function(e,t){if(void 0===t)throw new Error("Value.set was undefined");e.dom.value=t},Hs=h([s("data"),f("inputAttributes",{}),f("inputStyles",{}),f("tag","input"),f("inputClasses",[]),We("onSetValue"),f("styles",{}),f("eventOrder",{}),Xa("inputBehaviours",[L,Pu]),f("selectOnFocus",!0)]),Zd=function(e){return M([Pu.config({onFocus:e.selectOnFocus?function(e){var e=e.element,t=Yd(e);e.dom.setSelectionRange(0,t.length)}:C})])},Qd=tc({name:"Input",configFields:Hs(),factory:function(e,t){return{uid:e.uid,dom:{tag:(n=e).tag,attributes:y({type:"text"},n.inputAttributes),styles:n.inputStyles,classes:n.inputClasses},components:[],behaviours:y(y({},Zd(n=e)),Xs(n.inputBehaviours,[L.config({store:y(y({mode:"manual"},n.data.map(function(e){return{initialValue:e}}).getOr({})),{getValue:function(e){return Yd(e.element)},setValue:function(e,t){Yd(e.element)!==t&&Jd(e.element,t)}}),onSetValue:n.onSetValue})])),eventOrder:e.eventOrder};var n}}),Es=Object.freeze({__proto__:null,exhibit:function(e,t){return Mi({attributes:ri([{key:t.tabAttr,value:"true"}])})}}),Hi=[f("tabAttr","data-alloy-tabstop")],em=Fi({fields:Hi,name:"tabstopping",active:Es}),tm=tinymce.util.Tools.resolve("tinymce.util.I18n"),nm=["input","button","textarea","select"],Ls=Object.freeze({__proto__:null,enable:Pc,disable:Bc,isDisabled:Ic,onLoad:Ac,set:function(e,t,n,r){(r?Bc:Pc)(e,t)}}),n=Object.freeze({__proto__:null,exhibit:function(e,t){return Mi({classes:t.disabled()?t.disableClass.toArray():[]})},events:function(n,e){return A([Le(_n(),function(e,t){return Ic(e,n)}),Ve(n,e,Ac)])}}),Vs=[Ko("disabled",ie,e),f("useNative",!0),s("disableClass"),We("onDisabled"),We("onEnabled")],rm=Fi({fields:Vs,name:"disabling",active:n,apis:Ls}),om=[Xa("formBehaviours",[L])],im=function(e,t){return e.fold(function(){return b.error(t)},b.value)},um=(Qa(function(e,t,n){return e.getField(t,n)}),function(e){var r,t={field:function(e,t){return r.push(e),n="form",e=Lc(e),t=t,{uiType:cl(),owner:n,name:e,config:t,validated:{}};var n},record:h(r=[])},e=e(t),t=t.record(),t=k(t,function(e){return ml({name:e,pname:Lc(e)})});return ec("form",om,t,Fc,e)}),am=1,cm=-1,sm=0,lm=st(function(n,r){return[{label:"the link group",items:[Hc({fields:[_c("url","Type or paste URL"),_c("text","Link text"),_c("title","Link title"),_c("target","Link target"),{name:"link",spec:Xd.sketch({dom:{tag:"span",styles:{display:"none"}},getInitialValue:function(){return S.none()}})}],maxFieldIndex:["url","text","title","target"].length-1,getInitialValue:function(){return S.some(Oc(r))},onExecute:function(e,t){e=L.getValue(e);Ec(r,e),n.restoreToolbar(),r.focus()}})]}]}),fm=function(t,n){return Jl(n,"link","link",function(){var e=lm(t,n);t.setContextToolbar(e),Wd(n,function(){t.focusToolbar()}),Vd(n).each(function(e){n.selection.select(e.dom)})})},Fs=A([{key:kn(),value:hi({can:function(e,t){var n,r,t=t.event,o=t.originator,t=t.target;return r=t,!(v(n=o,e.element)&&!v(n,r)&&(console.warn(kn()+" did not get interpreted by the desired target. \nOriginator: "+mu(o)+"\nTarget: "+mu(t)+"\nCheck the "+kn()+" event handlers"),1))}})}]),dm=Object.freeze({__proto__:null,events:Fs}),mm=w,gm=function(t){function n(e){return"The component must be in a context to execute: "+e+(t?"\n"+mu(t().element)+" is not in context.":"")}function e(e){return function(){throw new Error(n(e))}}function r(e){return function(){console.warn(n(e))}}return{debugInfo:h("fake"),triggerEvent:r("triggerEvent"),triggerFocus:r("triggerFocus"),triggerEscape:r("triggerEscape"),broadcast:r("broadcast"),broadcastOn:r("broadcastOn"),broadcastEvent:r("broadcastEvent"),build:e("build"),addToWorld:e("addToWorld"),removeFromWorld:e("removeFromWorld"),addToGui:e("addToGui"),removeFromGui:e("removeFromGui"),getByUid:e("getByUid"),getByDom:e("getByDom"),isConnected:ie}},pm=gm(),hm=function(t,e){var n=k(e,function(e){return qo(e.name(),[l("config"),f("state",Pi)])}),n=Lo("component.behaviours",No(n),t.behaviours).fold(function(e){throw new Error(Vo(e)+"\nComplete spec:\n"+JSON.stringify(t,null,2))},w);return{list:e,data:Fr(n,function(e){e=e.map(function(e){return{config:e.config,state:e.state.init(e.config)}});return h(e)})}},vm=function(e){return e.list},bm=function(e){return e.data},ym=function(e,o){var i={};return Lr(e,function(e,r){Lr(e,function(e,t){var n=p(i,t).getOr([]);i[t]=n.concat([o(r,e)])})}),i},wm=function(t,e,n,r){function o(e){return bt(e,function(e,t){return y(y({},t.modification),e)},{})}var i=y({},e),e=(T(n,function(e){i[e.name()]=e.exhibit(t,r)}),ym(i,function(e,t){return{name:e,modification:t}})),n=bt(e.classes,function(e,t){return t.modification.concat(e)},[]),u=o(e.attributes),e=o(e.styles);return Mi({classes:n,attributes:u,styles:e})},xm=function(o,i,e,u){try{var t=At(e,function(e,t){var e=e[i],t=t[i],n=u.indexOf(e),r=u.indexOf(t);if(-1===n)throw new Error("The ordering for "+o+" does not have an entry for "+e+".\nOrder specified: "+JSON.stringify(u,null,2));if(-1===r)throw new Error("The ordering for "+o+" does not have an entry for "+t+".\nOrder specified: "+JSON.stringify(u,null,2));return n<r?-1:r<n?1:0});return b.value(t)}catch(e){return b.error([e])}},Cm=function(e,t){return{handler:e,purpose:t}},Sm=function(e,t){return{cHandler:e,purpose:t}},km=function(e,t){return Sm(ee.apply(void 0,[e.handler].concat(t)),e.purpose)},Tm=function(e){return e.cHandler},Om=function(e,t){return{name:e,handler:t}},Em=function(e,t){var n={};return T(e,function(e){n[e.name()]=e.handlers(t)}),n},_m=function(e,t,n){n=y(y({},n),Em(t,e));return ym(n,Om)},Am=function(e,t,n,r){e=_m(e,n,r);return Rm(e,t)},Dm=function(e){var o=yi(e);return function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];e=[e,t].concat(n);o.abort.apply(void 0,e)?t.stop():o.can.apply(void 0,e)&&o.run.apply(void 0,e)}},Mm=function(e,t){return b.error(["The event ("+e+') has more than one behaviour that listens to it.\nWhen this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).\nThe behaviours that can trigger it are: '+JSON.stringify(k(t,function(e){return e.name}),null,2)])},Nm=function(e,t,n){t=t[n];return t?xm("Event: "+n,"name",e,t).map(function(e){e=k(e,function(e){return e.handler});return wi(e)}):Mm(n,e)},Rm=function(e,o){e=Wr(e,function(n,r){return(1===n.length?b.value(n[0].handler):Nm(n,o,r)).map(function(e){var e=Dm(e),t=1<n.length?vt(o[r],function(t){return pt(n,function(e){return e.name===t})}).join(" > "):n[0].name;return ni(r,Cm(e,t))})});return ui(e,{})},Ms="alloy.base.behaviour",zm=No([jo("dom","dom",go(),No([l("tag"),f("styles",{}),f("classes",[]),f("attributes",{}),s("value"),s("innerHtml")])),l("components"),l("uid"),f("events",{}),f("apis",{}),jo("eventOrder","eventOrder",((t={})[_n()]=["disabling",Ms,"toggling","typeaheadevents"],t[kn()]=[Ms,"focusing","keying"],t[Nn()]=[Ms,"disabling","toggling","representing"],t[yn()]=[Ms,"representing","streaming","invalidating"],t[zn()]=[Ms,"representing","item-events","tooltipping"],t[mn()]=["focusing",Ms,"item-type-events"],t[ln()]=["focusing",Ms,"item-type-events"],t[hn()]=["item-type-events","tooltipping"],t[En()]=["receiving","reflecting","tooltipping"],t,Ae(h(t))),zo()),s("domModification")]),Bm=function(e){return Lo("custom.definition",zm,e)},Pm=function(e){return y(y({},e.dom),{uid:e.uid,domChildren:k(e.components,function(e){return e.element})})},Im=function(e){return e.domModification.fold(function(){return Mi({})},Mi)},Lm=function(e){return e.events},Fm=function(t,e){T(e,function(e){io(t,e)})},Hm=function(e){var t=O.fromTag(e.tag),n=(Kr(t,e.attributes),Fm(t,e.classes),Hu(t,e.styles),e.innerHtml.each(function(e){return cu(t,e)}),e.domChildren);return gr(t,n),e.value.each(function(e){Jd(t,e)}),e.uid,Nl(t,e.uid),t},Vm=function(e){var t=p(e,"behaviours").getOr({});return kt(Pr(t),function(e){e=t[e];return X(e)?[e.me]:[]})},jm=function(e,t){return hm(e,t)},Um=function(e){var t=Vm(e);return jm(e,t)},Wm=function(e,t,n){var r=Pm(e),e=Im(e),n=0<t.length?wm(n,{"alloy.base.modification":e},t,r):e;return Ni(r,n)},$m=function(e,t,n){var r={"alloy.base.behaviour":Lm(e)};return Am(n,e.eventOrder,t,r).getOrDie()},qm=function(n){function e(){return s}var t=N(pm),r=Fo(Bm(n)),o=Um(n),i=vm(o),u=bm(o),o=Wm(r,i,u),a=Hm(o),o=$m(r,i,u),c=N(r.components),s={uid:n.uid,getSystem:t.get,config:function(e){var t=u;return(Y(t[e.name()])?t[e.name()]:function(){throw new Error("Could not find "+e.name()+" in "+JSON.stringify(n,null,2))})()},hasConfigured:function(e){return Y(u[e.name()])},spec:n,readState:function(e){return u[e]().map(function(e){return e.state.readState()}).getOr("not enabled")},getApis:function(){return r.apis},connect:function(e){t.set(e)},disconnect:function(){t.set(gm(e))},element:a,syncComponents:function(){var e=cr(a),e=kt(e,function(e){return t.get().getByDom(e).fold(function(){return[]},_t)});c.set(e)},components:c.get,events:o};return s},Gm=function(e){e=p(e,"components").getOr([]);return k(e,Qm)},Km=function(e){var e=mm(e),t=e.events,e=r(e,["events"]),n=Gm(e),e=y(y({},e),{events:y(y({},dm),t),components:n});return b.value(qm(e))},Xm=function(e){e=O.fromText(e);return Ym({element:e})},Ym=function(e){var t=Ho("external.component",Mo([l("element"),s("uid")]),e),n=N(gm()),r=t.uid.getOrThunk(function(){return zl("external")}),o=(Nl(t.element,r),{uid:r,getSystem:n.get,config:S.none,hasConfigured:ie,connect:function(e){n.set(e)},disconnect:function(){n.set(gm(function(){return o}))},getApis:function(){return{}},element:t.element,spec:e,readState:h("No state"),syncComponents:C,components:h([]),events:{}});return El(o)},Jm=zl,Zm=function(e){return $r(e,"uid")},Qm=function(t){return _l(t).getOrThunk(function(){var e=Zm(t)?t:y({uid:Jm("")},t);return Km(e).getOrDie()})},eg=El,tg="alloy.item-hover",ng="alloy.item-focus",rg=h(tg),og=h(ng),Eu=[l("data"),l("components"),l("dom"),f("hasSubmenu",!1),s("toggling"),js("itemBehaviours",[R,Pu,I,L]),f("ignoreFocus",!1),f("domModification",{}),i("builder",function(e){return{dom:e.dom,domModification:y(y({},e.domModification),{attributes:y(y(y({role:e.toggling.isSome()?"menuitemcheckbox":"menuitem"},e.domModification.attributes),{"aria-haspopup":e.hasSubmenu}),e.hasSubmenu?{"aria-expanded":!1}:{})}),behaviours:Ys(e.itemBehaviours,[e.toggling.fold(R.revoke,function(e){return R.config(y({aria:{mode:"checked"}},e))}),Pu.config({ignore:e.ignoreFocus,stopMousedown:e.ignoreFocus,onFocus:function(e){Uc(e)}}),I.config({mode:"execution"}),L.config({store:{mode:"memory",initialValue:e.data}}),qd("item-type-events",o(o([],Bu(),!0),[D(hn(),jc),D(An(),Pu.focus)],!1))]),components:e.components,eventOrder:e.eventOrder}}),f("eventOrder",{})],Gs=[l("dom"),l("components"),i("builder",function(e){return{dom:e.dom,components:e.components,events:A([(e=An(),D(e,function(e,t){t.stop()}))])}})],ig=h("item-widget"),ug=h([ml({name:"widget",overrides:function(t){return{behaviours:M([L.config({store:{mode:"manual",getValue:function(e){return t.data},setValue:C}})])}}})]),Ks=[l("uid"),l("data"),l("components"),l("dom"),f("autofocus",!1),f("ignoreFocus",!1),js("widgetBehaviours",[L,Pu,I]),f("domModification",{}),Tl(ug()),i("builder",function(n){function r(e){return Sl(e,n,"widget").map(function(e){return I.focusIn(e),e})}function e(e,t){return ba(t.event.target)||n.autofocus&&t.setSource(e.element),S.none()}var t=xl(ig(),n,ug()),t=Cl(ig(),n,t.internals());return{dom:n.dom,components:t,domModification:n.domModification,events:A([Oi(function(e,t){r(e).each(function(e){t.stop()})}),D(hn(),jc),D(An(),function(e,t){n.autofocus?r(e):Pu.focus(e)})]),behaviours:Ys(n.widgetBehaviours,[L.config({store:{mode:"memory",initialValue:n.data}}),Pu.config({ignore:n.ignoreFocus,onFocus:function(e){Uc(e)}}),I.config({mode:"special",focusIn:n.autofocus?function(e){r(e)}:Vi(),onLeft:e,onRight:e,onEscape:function(e,t){return Pu.isFocused(e)||n.autofocus?(n.autofocus&&t.setSource(e.element),S.none()):(Pu.focus(e),S.some(!0))}})])}})],ag=Pe("type",{widget:Ks,item:Eu,separator:Gs}),Hs=h([Ds({factory:{sketch:function(e){e=Ho("menu.spec item",ag,e);return e.builder(e)}},name:"items",unit:"item",defaults:function(e,t){return $r(t,"uid")?t:y(y({},t),{uid:zl("item")})},overrides:function(e,t){return{type:t.type,ignoreFocus:e.fakeFocus,domModification:{classes:[e.markers.item]}}}})]),Hi=h([l("value"),l("items"),l("dom"),l("components"),f("eventOrder",{}),Xa("menuBehaviours",[P,L,Gd,I]),Ko("movement",{mode:"menu",moveOnTab:!0},Pe("mode",{grid:[Tu(),i("config",function(e,t){return{mode:"flatgrid",selector:"."+e.markers.item,initSize:{numColumns:t.initSize.numColumns,numRows:t.initSize.numRows},focusManager:e.focusManager}})],matrix:[i("config",function(e,t){return{mode:"matrix",selectors:{row:t.rowSelector,cell:"."+e.markers.item},focusManager:e.focusManager}}),l("rowSelector")],menu:[f("moveOnTab",!0),i("config",function(e,t){return{mode:"menu",selector:"."+e.markers.item,moveOnTab:t.moveOnTab,focusManager:e.focusManager}})]})),Ie("markers",ku()),f("fakeFocus",!1),f("focusManager",Cs()),We("onHighlight")]),cg=h("alloy.menu-focus"),sg=nc({name:"Menu",configFields:Hi(),partFields:Hs(),factory:function(e,t,n,r){return{uid:e.uid,dom:e.dom,markers:e.markers,behaviours:Xs(e.menuBehaviours,[P.config({highlightClass:e.markers.selectedItem,itemClass:e.markers.item,onHighlight:e.onHighlight}),L.config({store:{mode:"memory",initialValue:e.value}}),Gd.config({find:S.some}),I.config(e.movement.config(e,e.movement))]),events:A([D(og(),function(t,n){var e=n.event;t.getSystem().getByDom(e.target).each(function(e){P.highlight(t,e),n.stop(),Fn(t,cg(),{menu:t,item:e})})}),D(rg(),function(e,t){t=t.event.item;P.highlight(e,t)})]),components:t,eventOrder:e.eventOrder,domModification:{attributes:{role:"menu"}}}}}),lg=Fi({fields:[],name:"replacing",apis:Object.freeze({__proto__:null,append:function(e,t,n,r){$c(e,0,mr,r)},prepend:function(e,t,n,r){$c(e,0,be,r)},remove:qc,replaceAt:Kc,replaceBy:function(t,e,n,r,o){var i=Gc(t);return Ct(i,r).bind(function(e){return Kc(t,0,0,e,o)})},set:function(r,e,t,o){Wc(function(){var t,e,n=k(o,r.getSystem().build);n=n,e=(t=r).components(),_r(t),e=Et(e,n),T(e,function(e){Tr(e),t.getSystem().removeFromWorld(e)}),T(n,function(e){e.getSystem().isConnected()?Er(t,e):(t.getSystem().addToWorld(e),Er(t,e),Cr(t.element)&&Or(e)),t.syncComponents()})},r.element)},contents:Gc})}),fg=function(e){return Hr(e,function(e,t){return{k:e,v:t}})},dg=function(n,r,o,e){return p(o,e).bind(function(e){return p(n,e).bind(function(e){var t=dg(n,r,o,e);return S.some([e].concat(t))})}).getOr([])},mg=function(){function t(e){return p(c.get(),e)}var c=N({}),s=N({}),l=N({}),f=Os(),d=N({}),m=function(n){for(var e=c.get(),t=function(e,t){return e===n},r=Pr(e),o=0,i=r.length;o<i;o++){var u=r[o],a=e[u];if(t(a,u,e))return S.some(a)}return S.none()},g=function(e){return n(e).bind(Xc)},n=function(e){return p(s.get(),e)};return{setMenuBuilt:function(e,t){var n;s.set(y(y({},s.get()),((n={})[e]={type:"prepared",menu:t},n)))},setContents:function(e,t,n,r){f.set(e),c.set(n),s.set(t),d.set(r);e=n,o={},Lr(r,function(e,t){T(e,function(e){o[e]=t})}),u=fg(i=e),a=Fr(u,function(e,t){return[t].concat(dg(o,i,u,t))});var o,i,u,a,t=Fr(o,function(e){return p(a,e).getOr([e])});l.set(t)},expand:function(n){return p(c.get(),n).map(function(e){var t=p(l.get(),n).getOr([]);return[e].concat(t)})},refresh:function(e){return p(l.get(),e)},collapse:function(e){return p(l.get(),e).bind(function(e){return 1<e.length?S.some(e.slice(1)):S.none()})},lookupMenu:n,lookupItem:t,otherMenus:function(e){var t=d.get();return Et(Pr(t),e)},getPrimary:function(){return f.get().bind(g)},getMenus:function(){return s.get()},clear:function(){c.set({}),s.set({}),l.set({}),f.clear()},isClear:function(){return f.get().isNone()},getTriggeringPath:function(e,u){var a=vt(t(e).toArray(),function(e){return g(e).isSome()});return p(l.get(),e).bind(function(e){for(var i=Ot(a.concat(e)),t=kt(i,function(e,t){return n=e,r=u,o=i.slice(0,t+1),g(n).bind(function(t){return m(n).bind(function(e){return r(e).map(function(e){return{triggeredMenu:t,triggeringItem:e,triggeringPath:o}})})}).fold(function(){return ai(f.get(),e)?[]:[S.none()]},function(e){return[S.some(e)]});var n,r,o}),n=[],r=0;r<t.length;r++){var o=t[r];if(!o.isSome())return S.none();n.push(o.getOrDie())}return S.some(n)})}}},gg=Xc,pg=h("collapse-item"),hg=tc({name:"TieredMenu",configFields:[Ge("onExecute"),Ge("onEscape"),qe("onOpenMenu"),qe("onOpenSubmenu"),We("onRepositionMenu"),We("onCollapseMenu"),f("highlightImmediately",!0),Wo("data",[l("primary"),l("menus"),l("expansions")]),f("fakeFocus",!1),We("onHighlight"),We("onHover"),Wo("markers",[l("backgroundMenu")].concat(Cu()).concat(Su())),l("dom"),f("navigateOnHover",!0),f("stayInDom",!1),Xa("tmenuBehaviours",[I,P,Gd,lg]),f("eventOrder",{})],apis:{collapseMenu:function(e,t){e.collapseMenu(t)},highlightPrimary:function(e,t){e.highlightPrimary(t)},repositionMenus:function(e,t){e.repositionMenus(t)}},factory:function(c,e){function n(e){r=e,o=c.data.primary,e=c.data.menus;var r,o,e=Fr(e,function(e,t){function n(){return sg.sketch(y(y({},e),{value:t,markers:c.markers,fakeFocus:c.fakeFocus,onHighlight:c.onHighlight,focusManager:(c.fakeFocus?pa:Cs)()}))}return t===o?{type:"prepared",menu:r.getSystem().build(n())}:{type:"notbuilt",nbMenu:n}}),t=Fr(c.data.menus,function(e,t){return kt(e.items,function(e){return"separator"===e.type?[]:[e.data.value]})});return d.setContents(c.data.primary,e,c.data.expansions,t),d.getPrimary()}function s(e,n){e=h(e),Lr(e,function(e,t){t=gt(n,t);E(e.element,"aria-expanded",t)})}function l(n,r,o){return S.from(o[0]).bind(function(e){return r.lookupMenu(e).bind(function(e){var t;return"notbuilt"===e.type?S.none():(e=e.menu,t=g(r,o.slice(1)),T(t,function(e){io(e.element,c.markers.backgroundMenu)}),Cr(e.element)||lg.append(n,eg(e)),Vc(e.element,[c.markers.backgroundMenu]),a(n,e),p(n,r,o),S.some(e))})})}function o(i,u,a){var e;return void 0===a&&(a=f.HighlightSubmenu),u.hasConfigured(rm)&&rm.isDisabled(u)?S.some(u):(e=m(u),d.expand(e).bind(function(o){return s(i,o),S.from(o[0]).bind(function(r){return d.lookupMenu(r).bind(function(e){t=i,n=r;var t,n="notbuilt"===(e=e).type?(t=t.getSystem().build(e.nbMenu()),d.setMenuBuilt(n,t),t):e.menu;return Cr(n.element)||lg.append(i,eg(n)),c.onOpenSubmenu(i,u,n,Ot(o)),a===f.HighlightSubmenu?(P.highlightFirst(n),l(i,d,o)):(P.dehighlightAll(n),S.some(u))})})}))}function r(t,n){var e=m(n);return d.collapse(e).bind(function(e){return s(t,e),l(t,d,e).map(function(e){return c.onCollapseMenu(t,n,e),e})})}function t(n){return function(t,e){return as(e.getSource(),"."+c.markers.item).bind(function(e){return t.getSystem().getByDom(e).toOptional().bind(function(e){return n(t,e).map(x)})})}}function i(e){return P.getHighlighted(e).bind(P.getHighlighted)}var f,u=Os(),d=mg(),m=function(e){return L.getValue(e).value},a=function(t,e){P.highlight(t,e),P.getHighlighted(e).orThunk(function(){return P.getFirst(e)}).each(function(e){Vn(t,e.element,An())})},g=function(t,e){return ci(k(e,function(e){return t.lookupMenu(e).bind(function(e){return"prepared"===e.type?S.some(e.menu):S.none()})}))},p=function(t,e,n){e=g(e,e.otherMenus(n));T(e,function(e){Vc(e.element,[c.markers.backgroundMenu]),c.stayInDom||lg.remove(t,e)})},h=function(t){return u.get().getOrThunk(function(){var n={},e=Qu(t.element,"."+c.markers.item),e=vt(e,function(e){return"true"===_(e,"aria-haspopup")});return T(e,function(e){t.getSystem().getByDom(e).each(function(e){var t=m(e);n[t]=e})}),u.set(n),n})},v=((v=f=f||{})[v.HighlightSubmenu=0]="HighlightSubmenu",v[v.HighlightParent=1]="HighlightParent",A([D(cg(),function(t,n){var e=n.event.item;d.lookupItem(m(e)).each(function(){var e=n.event.menu,e=(P.highlight(t,e),m(n.event.item));d.refresh(e).each(function(e){return p(t,d,e)})})}),Oi(function(t,e){e=e.event.target;t.getSystem().getByDom(e).each(function(e){0===m(e).indexOf("collapse-item")&&r(t,e),o(t,e,f.HighlightSubmenu).fold(function(){c.onExecute(t,e)},C)})}),Si(function(t,e){n(t).each(function(e){lg.append(t,eg(e)),c.onOpenMenu(t,e),c.highlightImmediately&&a(t,e)})})].concat(c.navigateOnHover?[D(rg(),function(e,t){var t=t.event.item,n=e,r=t;r=m(t),d.refresh(r).bind(function(e){return s(n,e),l(n,d,e)}),o(e,t,f.HighlightParent),c.onHover(e,t)})]:[]))),b={collapseMenu:function(t){i(t).each(function(e){r(t,e)})},highlightPrimary:function(t){d.getPrimary().each(function(e){a(t,e)})},repositionMenus:function(n){d.getPrimary().bind(function(t){return i(n).bind(function(e){var e=m(e),t=(t=d.getMenus(),Wr(t,w)),n=ci(k(t,gg));return d.getTriggeringPath(e,function(e){return t=e,Nt(n,function(e){return e.getSystem().isConnected()?(e=P.getCandidates(e),xt(e,function(e){return m(e)===t})):S.none()});var t})}).map(function(e){return{primary:t,triggeringPath:e}})}).fold(function(){S.from(n.components()[0]).filter(function(e){return"menu"===_(e.element,"role")}).each(function(e){c.onRepositionMenu(n,e,[])})},function(e){var t=e.primary,e=e.triggeringPath;c.onRepositionMenu(n,t,e)})}};return{uid:c.uid,dom:c.dom,markers:c.markers,behaviours:Xs(c.tmenuBehaviours,[I.config({mode:"special",onRight:t(function(e,t){return ba(t.element)?S.none():o(e,t,f.HighlightSubmenu)}),onLeft:t(function(e,t){return ba(t.element)?S.none():r(e,t)}),onEscape:t(function(e,t){return r(e,t).orThunk(function(){return c.onEscape(e,t).map(function(){return e})})}),focusIn:function(t,e){d.getPrimary().each(function(e){Vn(t,e.element,An())})}}),P.config({highlightClass:c.markers.selectedMenu,itemClass:c.markers.menu}),Gd.config({find:function(e){return P.getHighlighted(e)}}),lg.config({})]),eventOrder:c.eventOrder,apis:b,events:v}},extraApis:{tieredData:function(e,t,n){return{primary:e,menus:t,expansions:n}},singleData:function(e,t){return{primary:e,menus:ni(e,t),expansions:{}}},collapseItem:function(e){return{value:ll(pg()),meta:{text:e}}}}}),vg=function(e,t,n,r){return p(t.routes,r.start).bind(function(e){return p(e,r.destination)})},bg=function(e,t,n,r){return vg(e,t,n,r).bind(function(t){return t.transition.map(function(e){return{transition:e,route:t}})})},yg=function(t,n,e){var r=t.element;return Xr(r,n.destinationAttr).map(function(e){return{start:_(t.element,n.stateAttr),destination:e}})},Es=Object.freeze({__proto__:null,findRoute:vg,disableTransition:Yc,getCurrentRoute:yg,jumpTo:Jc,progressTo:function(t,n,r,o){u=n,Yr((i=t).element,u.destinationAttr)&&(Xr(i.element,u.destinationAttr).each(function(e){E(i.element,u.stateAttr,e)}),Jr(i.element,u.destinationAttr)),e=o;var i,u,e={start:_(t.element,n.stateAttr),destination:e};bg(t,n,r,e).fold(function(){Jc(t,n,r,o)},function(e){Yc(t,n,r);e=e.transition;io(t.element,e.transitionClass),E(t.element,n.destinationAttr,o)})},getState:function(e,t,n){return Xr(e.element,t.stateAttr)}}),e=Object.freeze({__proto__:null,events:function(o,i){return A([D(Cn(),function(n,e){var r=e.event.raw;yg(n,o).each(function(t){vg(n,o,i,t).each(function(e){e.transition.each(function(e){r.propertyName===e.property&&(Jc(n,o,i,t.destination),o.onTransition(n,t))})})})}),Si(function(e,t){Jc(e,o,i,o.initialState)})])}}),Vs=[f("destinationAttr","data-transitioning-destination"),f("stateAttr","data-transitioning-state"),l("initialState"),We("onTransition"),We("onFinish"),Ie("routes",Be(b.value,Be(b.value,Mo([Go("transition",[l("property"),l("transitionClass")])]))))],wg=Fi({fields:Vs,name:"transitioning",active:e,apis:Es,extra:{createRoutes:function(e){var n={};return Lr(e,function(e,t){t=t.split("<->");n[t[0]]=ni(t[1],e),n[t[1]]=ni(t[0],e)}),n},createBistate:function(e,t,n){return ri([{key:e,value:ni(t,n)},{key:t,value:ni(e,n)}])},createTristate:function(e,t,n,r){return ri([{key:e,value:ri([{key:t,value:r},{key:n,value:r}])},{key:t,value:ri([{key:e,value:r},{key:n,value:r}])},{key:n,value:ri([{key:e,value:r},{key:t,value:r}])}])}}}),xg=z("scrollable"),Cg=function(e){io(e,xg)},Sg=function(e){ao(e,xg)},kg=xg,Tg=function(e){return p(e,"format").getOr(e.title)},Og=function(n,r){var e=_g("Styles",[].concat(k(n.items,function(e){return Eg(Tg(e),e.title,e.isSelected(),e.getPreview(),qr(n.expansions,Tg(e)))})),r,!1),t=Fr(n.menus,function(e,t){e=k(e,function(e){return Eg(Tg(e),e.title,void 0!==e.isSelected&&e.isSelected(),void 0!==e.getPreview?e.getPreview():"",qr(n.expansions,Tg(e)))});return _g(t,e,r,!0)}),t=fo(t,ni("styles",e));return{tmenu:hg.tieredData("styles",t,n.expansions)}},Eg=function(e,t,n,r,o){return{data:{value:e,text:t},type:"item",dom:{tag:"div",classes:o?[z("styles-item-is-menu")]:[]},toggling:{toggleOnExecute:!1,toggleClass:z("format-matches"),selected:n},itemBehaviours:M(o?[]:[Mu(e,function(e,t){(t?R.on:R.off)(e)})]),components:[{dom:{tag:"div",attributes:{style:r},innerHtml:t}}]}},_g=function(e,t,n,r){return{value:e,dom:{tag:"div"},components:[jl.sketch({dom:{tag:"div",classes:[z("styles-collapser")]},components:r?[{dom:{tag:"span",classes:[z("styles-collapse-icon")]}},Xm(e)]:[Xm(e)],action:function(e){r&&(e=n().get(e),hg.collapseMenu(e))}}),{dom:{tag:"div",classes:[z("styles-menu-items-container")]},components:[sg.parts.items({})],behaviours:M([qd("adhoc-scrollable-menu",[Si(function(e,t){B(e.element,"overflow-y","auto"),B(e.element,"-webkit-overflow-scrolling","touch"),Cg(e.element)}),ki(function(e){Wu(e.element,"overflow-y"),Wu(e.element,"-webkit-overflow-scrolling"),Sg(e.element)})])])}],items:t,menuBehaviours:M([wg.config({initialState:"after",routes:wg.createTristate("before","current","after",{transition:{property:"transform",transitionClass:"transitioning"}})})])}},Ag=function(r){var e=Og(r.formats,function(){return t}),t=Ed(hg.sketch({dom:{tag:"div",classes:[z("styles-menu")]},components:[],fakeFocus:!0,stayInDom:!0,onExecute:function(e,t){var n=L.getValue(t);return r.handle(t,n.value),S.none()},onEscape:function(){return S.none()},onOpenMenu:function(e,t){e=nf(e.element);tf(t.element,e),wg.jumpTo(t,"current")},onOpenSubmenu:function(e,t,n){var r=nf(e.element),t=is(t.element,'[role="menu"]').getOrDie("hacky"),e=e.getSystem().getByDom(t).getOrDie();tf(n.element,r),wg.progressTo(e,"before"),wg.jumpTo(n,"after"),wg.progressTo(n,"current")},onCollapseMenu:function(e,t,n){t=is(t.element,'[role="menu"]').getOrDie("hacky"),e=e.getSystem().getByDom(t).getOrDie();wg.progressTo(e,"after"),wg.progressTo(n,"current")},navigateOnHover:!1,highlightImmediately:!0,data:e.tmenu,markers:{backgroundMenu:z("styles-background-menu"),menu:z("styles-menu"),selectedMenu:z("styles-selected-menu"),item:z("styles-item"),selectedItem:z("styles-selected-item")}}));return t.asSpec()},Dg=function(e){var t=fo(ti(e,["items"]),{menu:!0}),n=Ng(e.items);return{item:t,menus:fo(n.menus,ni(e.title,n.items)),expansions:fo(n.expansions,ni(e.title,e.title))}},Mg=function(e){return qr(e,"items")?Dg(e):{item:e,menus:{},expansions:{}}},Ng=function(e){return bt(e,function(e,t){t=Mg(t);return{menus:fo(e.menus,t.menus),items:[t.item].concat(e.items),expansions:fo(e.expansions,t.expansions)}},{menus:{},expansions:{},items:[]})},Rg=function(r){function o(e){return k(e,function(e){var t,n;return qr(e,"items")?(n=o(e.items),fo(fo(e,{isSelected:ie,getPreview:h("")}),{items:n})):qr(e,"format")?fo(n=e,{isSelected:i(n.format),getPreview:u(n.format)}):(t=ll((e=e).title),e=fo(e,{format:t,isSelected:i(t),getPreview:u(t)}),r.formatter.register(t,e),e)})}var i=function(e){return function(){return r.formatter.match(e)}},u=function(e){return function(){return r.formatter.getCssText(e)}};return o(tu(r))},zg=function(t,e){function n(e){return kt(e,function(e){return void 0!==e.items?0<n(e.items).length?[e]:[]:!qr(e,"format")||t.formatter.canApply(e.format)?[e]:[]})}e=n(e);return Ng(e)},Bg=function(n,e,r){e=zg(n,e);return Ag({formats:e,handle:function(e,t){n.undoManager.transact(function(){R.isOn(e)?n.formatter.remove(t):n.formatter.apply(t)}),r()}})},Pg=function(e){e=e.replace(/\|/g," ").trim();return 0<e.length?e.split(/\s+/):[]},Ig=function(e){return kt(e,function(e){return(W(e)?Ig:Pg)(e)})},Lg=function(e){e=eu(e);return(W(e)?Ig:Pg)(e)},Fg=function(t,r){function e(e){return function(){return Kl(r,e)}}function n(e){return function(){return Yl(r,e)}}function o(e,t,n){return function(){return Jl(r,e,t,n)}}function i(){return Bg(r,h,function(){r.fire("scrollIntoView")})}function u(e,t){return{isSupported:function(){var t=r.ui.registry.getAll().buttons;return e.forall(function(e){return qr(t,e)})},sketch:t}}var a=e("undo"),c=e("redo"),s=n("bold"),l=n("italic"),f=n("underline"),d=e("removeformat"),m=o("unlink","link",function(){r.execCommand("unlink",null,!1)}),g=o("unordered-list","ul",function(){r.execCommand("InsertUnorderedList",null,!1)}),p=o("ordered-list","ol",function(){r.execCommand("InsertOrderedList",null,!1)}),h=Rg(r);return{undo:u(S.none(),a),redo:u(S.none(),c),bold:u(S.none(),s),italic:u(S.none(),l),underline:u(S.none(),f),removeformat:u(S.none(),d),link:u(S.none(),function(){return fm(t,r)}),unlink:u(S.none(),m),image:u(S.none(),function(){return Pd(r)}),bullist:u(S.some("bullist"),g),numlist:u(S.some("numlist"),p),fontsizeselect:u(S.none(),function(){return Od(t,r)}),forecolor:u(S.none(),function(){return ld(t,r)}),styleselect:u(S.none(),function(){return Ql("style-formats",function(e){r.fire("toReading"),t.dropup.appear(i,R.on,e)},M([R.config({toggleClass:z("toolbar-button-selected"),toggleOnExecute:!1,aria:{mode:"pressed"}}),_u.config({channels:ri([Ru(ou,R.off),Ru(iu,R.off)])})]),r)})}},Hg=function(e,n){var e=Lg(e),r={};return kt(e,function(e){var t=!qr(r,e)&&qr(n,e)&&n[e].isSupported()?[n[e].sketch()]:[];return r[e]=!0,t})},Vg=function(e,t,n,r,o,i,u){return{target:e,x:t,y:n,stop:r,prevent:o,kill:i,raw:u}},jg=function(e){function t(){return e.stopPropagation()}function n(){return e.preventDefault()}var r=O.fromDom(wr(e).getOr(e.target)),o=Z(n,t);return Vg(r,e.clientX,e.clientY,t,n,o,e)},Ug=function(t,n){return function(e){t(e)&&n(jg(e))}},Wg=function(e,t,n,r,o){n=Ug(n,r);return e.dom.addEventListener(t,n,o),{unbind:ee(Gg,e,t,n,o)}},$g=function(e,t,n,r){return Wg(e,t,n,r,!1)},qg=function(e,t,n,r){return Wg(e,t,n,r,!0)},Gg=function(e,t,n,r){e.dom.removeEventListener(t,n,r)},Kg=x,F=function(e,t,n){return $g(e,t,Kg,n)},Xg=function(e,t,n){return qg(e,t,Kg,n)},Yg=tinymce.util.Tools.resolve("tinymce.util.Delay"),Jg=50,Zg=1e3/Jg,Qg=function(e){e=e.matchMedia("(orientation: portrait)").matches;return{isPortrait:h(e)}},ep=function(e){var t=sn().os.isiOS(),n=Qg(e).isPortrait();return t&&!n?e.screen.height:e.screen.width},tp=function(r,t){var e=O.fromDom(r),o=null,n=F(e,"orientationchange",function(){Yg.clearInterval(o);var e=Qg(r);t.onChange(e),i(function(){t.onReady(e)})}),i=function(e){Yg.clearInterval(o);var t=r.innerHeight,n=0;o=Yg.setInterval(function(){t!==r.innerHeight?(Yg.clearInterval(o),e(S.some(r.innerHeight))):Zg<n&&(Yg.clearInterval(o),e(S.none())),n++},Jg)};return{onAdjustment:i,destroy:function(){n.unbind()}}},np=function(n,e){e.fold(function(e){n.setStartBefore(e.dom)},function(e,t){n.setStart(e.dom,t)},function(e){n.setStartAfter(e.dom)})},rp=function(n,e){e.fold(function(e){n.setEndBefore(e.dom)},function(e,t){n.setEnd(e.dom,t)},function(e){n.setEndAfter(e.dom)})},op=function(e,t,n){e=e.document.createRange();return np(e,t),rp(e,n),e},ip=function(e,t,n,r,o){e=e.document.createRange();return e.setStart(t.dom,n),e.setEnd(r.dom,o),e},up=function(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom,width:e.width,height:e.height}},ap=function(e){var t=e.getClientRects(),t=0<t.length?t[0]:e.getBoundingClientRect();return 0<t.width||0<t.height?S.some(t).map(up):S.none()},cp=Yo([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),sp=function(e,t,n){return t(O.fromDom(n.startContainer),n.startOffset,O.fromDom(n.endContainer),n.endOffset)},lp=function(o,e){return e.match({domRange:function(e){return{ltr:h(e),rtl:S.none}},relative:function(e,t){return{ltr:st(function(){return op(o,e,t)}),rtl:st(function(){return S.some(op(o,t,e))})}},exact:function(e,t,n,r){return{ltr:st(function(){return ip(o,e,t,n,r)}),rtl:st(function(){return S.some(ip(o,n,r,e,t))})}}})},fp=function(e,t){var n=t.ltr();return n.collapsed?t.rtl().filter(function(e){return!1===e.collapsed}).map(function(e){return cp.rtl(O.fromDom(e.endContainer),e.endOffset,O.fromDom(e.startContainer),e.startOffset)}).getOrThunk(function(){return sp(e,cp.ltr,n)}):sp(e,cp.ltr,n)},dp=function(e,t){t=lp(e,t);return fp(e,t)},mp=function(i,e){return dp(i,e).match({ltr:function(e,t,n,r){var o=i.document.createRange();return o.setStart(e.dom,t),o.setEnd(n.dom,r),o},rtl:function(e,t,n,r){var o=i.document.createRange();return o.setStart(n.dom,r),o.setEnd(e.dom,t),o}})},gp=(cp.ltr,cp.rtl,{create:function(e,t,n,r){return{start:e,soffset:t,finish:n,foffset:r}}}),pp=(Qc=Qn,es="text",{get:function(e){if(Qc(e))return hp(e).getOr("");throw new Error("Can only get "+es+" value of a "+es+" node")},getOption:hp,set:function(e,t){if(!Qc(e))throw new Error("Can only set raw "+es+" value of a "+es+" node");e.dom.nodeValue=t}});function hp(e){return Qc(e)?S.from(e.dom.nodeValue):S.none()}function vp(e,t,n){var r=ov(t,e.element);("0px"===r?cv:sv)(e,t,n,S.some(r))}function bp(e,t,n){var r=nv(e,t),o=co(r,t.shrinkingClass),i=ov(t,e.element),u=(av(e,t),ov(t,e.element));(o?function(){B(e.element,rv(t),i),$u(e.element)}:function(){uv(e,t)})(),ao(r,t.shrinkingClass),io(r,t.growingClass),av(e,t),B(e.element,rv(t),u),n.setExpanded(),t.onStartGrow(e)}function yp(e,t,n){return e=nv(e,t),!0===co(e,t.growingClass)}function wp(e,t,n){return e=nv(e,t),!0===co(e,t.shrinkingClass)}var xp,Cp,Sp=function(e){return pp.getOption(e)},kp=function(e){return"img"===Jn(e)?1:Sp(e).fold(function(){return cr(e).length},function(e){return e.length})},n=Yo([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Tp={before:n.before,on:n.on,after:n.after,cata:function(e,t,n,r){return e.fold(t,n,r)},getStart:function(e){return e.fold(w,w,w)}},Op=Yo([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Ep={domRange:Op.domRange,relative:Op.relative,exact:Op.exact,exactFromRange:function(e){return Op.exact(e.start,e.soffset,e.finish,e.foffset)},getWin:function(e){e=e.match({domRange:function(e){return O.fromDom(e.startContainer)},relative:function(e,t){return Tp.getStart(e)},exact:function(e,t,n,r){return e}});return O.fromDom(rr(e).dom.defaultView)},range:gp.create},_p=function(e,t){var n=Jn(e);return"input"===n?Tp.after(e):gt(["br","img"],n)?0===t?Tp.before(e):Tp.after(e):Tp.on(e,t)},Ap=function(e,t,n,r){e=_p(e,t),t=_p(n,r);return Ep.relative(e,t)},Dp=function(e,t,n,r){var o=nr(e).dom.createRange();return o.setStart(e.dom,t),o.setEnd(n.dom,r),o},Mp=function(e,t,n,r){var o=Dp(e,t,n,r),e=v(e,n)&&t===r;return o.collapsed&&!e},Np=function(e){return S.from(e.getSelection())},Rp=function(e,t){Np(e).each(function(e){e.removeAllRanges(),e.addRange(t)})},zp=function(e,t,n,r,o){t=ip(e,t,n,r,o);Rp(e,t)},Bp=function(e,t,n,r,o,i){t.collapse(n.dom,r),t.extend(o.dom,i)},Pp=function(i,e){return dp(i,e).match({ltr:function(e,t,n,r){zp(i,e,t,n,r)},rtl:function(t,n,r,o){Np(i).each(function(e){if(e.setBaseAndExtent)e.setBaseAndExtent(t.dom,n,r.dom,o);else if(e.extend)try{Bp(i,e,t,n,r,o)}catch(e){zp(i,r,o,t,n)}else zp(i,r,o,t,n)})}})},Ip=function(e,t,n,r,o){t=Ap(t,n,r,o);Pp(e,t)},Lp=function(e){var t;return 0<e.rangeCount?(t=e.getRangeAt(0),e=e.getRangeAt(e.rangeCount-1),S.some(gp.create(O.fromDom(t.startContainer),t.startOffset,O.fromDom(e.endContainer),e.endOffset))):S.none()},Fp=function(e){var t,n;return null!==e.anchorNode&&null!==e.focusNode&&(t=O.fromDom(e.anchorNode),n=O.fromDom(e.focusNode),Mp(t,e.anchorOffset,n,e.focusOffset))?S.some(gp.create(t,e.anchorOffset,n,e.focusOffset)):Lp(e)},Hp=function(e){return Np(e).filter(function(e){return 0<e.rangeCount}).bind(Fp)},Vp=function(e){return Hp(e).map(function(e){return Ep.exact(e.start,e.soffset,e.finish,e.foffset)})},jp=function(e,t){e=mp(e,t);return ap(e)},Up=function(e){Np(e).each(function(e){return e.removeAllRanges()})},Wp=function(e){return S.some(O.fromDom(e.dom.contentWindow.document.body))},$p=function(e){return S.some(O.fromDom(e.dom.contentWindow.document))},qp=function(e){return S.from(e.dom.contentWindow)},Gp=function(e){return qp(e).bind(Hp)},Kp=function(e){return e.getFrame()},Xp=function(e,t,n,r){return e[n].getOrThunk(function(){return function(e){return F(t,r,e)}})},Yp=function(a){var c=Kp(a);return Wp(c).bind(function(u){return $p(c).bind(function(i){return qp(c).map(function(o){var e=O.fromDom(i.dom.documentElement),t=a.getCursorBox.getOrThunk(function(){return function(){return Vp(o).bind(function(e){return jp(o,e).orThunk(function(){return Hp(o).filter(function(e){return v(e.start,e.finish)&&e.soffset===e.foffset}).bind(function(e){e=e.start.dom.getBoundingClientRect();return 0<e.width||0<e.height?S.some(e):S.none()})})})}}),n=a.setSelection.getOrThunk(function(){return function(e,t,n,r){Ip(o,e,t,n,r)}}),r=a.clearSelection.getOrThunk(function(){return function(){Up(o)}});return{body:u,doc:i,win:o,html:e,getSelection:ee(Gp,c),setSelection:n,clearSelection:r,frame:c,onKeyup:Xp(a,i,"onKeyup","keyup"),onNodeChanged:Xp(a,i,"onNodeChanged","SelectionChange"),onDomChanged:a.onDomChanged,onScrollToCursor:a.onScrollToCursor,onScrollToElement:a.onScrollToElement,onToReading:a.onToReading,onToEditing:a.onToEditing,onToolbarScrollStart:a.onToolbarScrollStart,onTouchContent:a.onTouchContent,onTapContent:a.onTapContent,onTouchToolstrip:a.onTouchToolstrip,getCursorBox:t}})})})},Jp=(xp="getWin",Cp=qp,function(t){return t[xp].getOrThunk(function(){var e=Kp(t);return function(){return Cp(e)}})()}),Zp=function(){var t=os("head").getOrDie(),e=os('meta[name="viewport"]').getOrThunk(function(){var e=O.fromTag("meta");return E(e,"name","viewport"),mr(t,e),e}),n=_(e,"content");return{maximize:function(){E(e,"content","width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0")},restore:function(){null!=n&&0<n.length?E(e,"content",n):E(e,"content","user-scalable=yes")}}},Qp="data-ephox-mobile-fullscreen-style",eh="display:none!important;",th="position:absolute!important;",nh="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",rh="background-color:rgb(255,255,255)!important;",oh=sn().os.isAndroid(),ih=function(e){e=Vu(e,"background-color");return void 0!==e&&""!==e?"background-color:"+e+"!important":rh},uh=function(e,t){function n(n){return function(e){var t=_(e,"style"),t=void 0===t?"no-styles":t.trim();t!==n&&(E(e,Qp,t),E(e,"style",n))}}var r=Ju(e,"*"),o=kt(r,function(e){return Zu(e,"*")}),t=ih(t);T(o,n(eh)),T(r,n(th+nh+t)),n((!0===oh?"":th)+nh+t)(e)},ah=function(){var e=Yu("["+Qp+"]");T(e,function(e){var t=_(e,Qp);"no-styles"!==t?E(e,"style",t):Jr(e,"style"),Jr(e,Qp)})},ch=function(n,r){var o=null;return{cancel:function(){null!==o&&(clearTimeout(o),o=null)},schedule:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];o=setTimeout(function(){n.apply(null,e),o=null},r)}}},sh=5,lh=400,fh=function(e){e=e.raw;return void 0===e.touches||1!==e.touches.length?S.none():S.some(e.touches[0])},dh=function(e,t){var n=Math.abs(e.clientX-t.x),e=Math.abs(e.clientY-t.y);return sh<n||sh<e},mh=function(n){var r=Os(),o=N(!1),i=ch(function(e){n.triggerEvent(Mn(),e),o.set(!0)},lh),u=ri([{key:ln(),value:function(t){return fh(t).each(function(e){i.cancel();e={x:e.clientX,y:e.clientY,target:t.target};i.schedule(t),o.set(!1),r.set(e)}),S.none()}},{key:fn(),value:function(e){return i.cancel(),fh(e).each(function(t){r.on(function(e){dh(t,e)&&r.clear()})}),S.none()}},{key:dn(),value:function(t){i.cancel();return r.get().filter(function(e){return v(e.target,t.target)}).map(function(e){return o.get()?(t.prevent(),!1):n.triggerEvent(Dn(),t)})}}]);return{fireIfReady:function(t,e){return p(u,e).bind(function(e){return e(t)})}}},gh=function(n){var t=mh({triggerEvent:function(e,t){n.onTapContent(t)}});return{fireTouchstart:function(e){t.fireIfReady(e,"touchstart")},onTouchend:function(){return F(n.body,"touchend",function(e){t.fireIfReady(e,"touchend")})},onTouchmove:function(){return F(n.body,"touchmove",function(e){t.fireIfReady(e,"touchmove")})}}},ph=6<=sn().os.version.major,hh=function(n,t,r){function o(e){return!v(e.start,e.finish)||e.soffset!==e.foffset}function e(){var e=n.doc.dom.hasFocus()&&n.getSelection().exists(o);r.getByDom(t).each(!0===(e||qi(u).filter(function(e){return"input"===Jn(e)}).exists(function(e){return e.dom.selectionStart!==e.dom.selectionEnd}))?R.on:R.off)}var i=gh(n),u=nr(t),a=[F(n.body,"touchstart",function(e){n.onTouchContent(),i.fireTouchstart(e)}),i.onTouchmove(),i.onTouchend(),F(t,"touchstart",function(e){n.onTouchToolstrip()}),n.onToReading(function(){$i(n.body)}),n.onToEditing(C),n.onScrollToCursor(function(e){e.preventDefault(),n.getCursorBox().each(function(e){var t=n.win,e=e.top>t.innerHeight||e.bottom>t.innerHeight?e.bottom-t.innerHeight+50:0;0!=e&&t.scrollTo(t.pageXOffset,t.pageYOffset+e)})})].concat(!0===ph?[]:[F(O.fromDom(n.win),"blur",function(){r.getByDom(t).each(R.off)}),F(u,"select",e),F(n.doc,"selectionchange",e)]);return{destroy:function(){T(a,function(e){e.unbind()})}}},vh=function(e,t){e=parseInt(_(e,t),10);return isNaN(e)?0:e},bh=2,yh=function(e){return y(y({},e),{width:bh})},wh=function(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom,width:e.width,height:e.height}},xh=function(t){var n;return t.collapsed?(n=O.fromDom(t.startContainer),or(n).bind(function(e){e=Ep.exact(n,t.startOffset,e,kp(e));return jp(t.startContainer.ownerDocument.defaultView,e).map(yh).map(_t)}).getOr([])):k(t.getClientRects(),wh)},Ch=function(e){e=e.getSelection();return void 0!==e&&0<e.rangeCount?xh(e.getRangeAt(0)):[]},Sh=function(){return function(e){Yg.setTimeout(function(){e()},0)}},kh=function(e){e.focus();var t=O.fromDom(e.document.body);(qi().exists(function(e){return gt(["input","textarea"],Jn(e))})?Sh():oe)(function(){qi().each($i),Wi(t)})},Th=50,Oh="data-"+z("last-outer-height"),Eh=function(e,t){E(e,Oh,t)},_h=function(e){return vh(e,Oh)},Ah=function(e){return{top:e.top,bottom:e.top+e.height}},Dh=function(e){e=Ch(e);return 0<e.length?S.some(e[0]).map(Ah):S.none()},Mh=function(e,t){t=_h(t),e=e.innerHeight;return e<t?S.some(t-e):S.none()},Nh=function(e,t,n){return t.top>e.innerHeight||t.bottom>e.innerHeight?Math.min(n,t.bottom-e.innerHeight+Th):0},Rh=function(e,n){var t=O.fromDom(n.document.body),r=F(O.fromDom(e),"resize",function(){Mh(e,t).each(function(t){Dh(n).each(function(e){e=Nh(n,e,t);0!==e&&n.scrollTo(n.pageXOffset,n.pageYOffset+e)})}),Eh(t,e.innerHeight)});Eh(t,e.innerHeight);return{toEditing:function(){kh(n)},destroy:function(){r.unbind()}}},zh=function(t,e){var n=Zp(),r=Ts(),o=Ts();return{enter:function(){e.hide(),io(t.container,z("fullscreen-maximized")),io(t.container,z("android-maximized")),n.maximize(),io(t.body,z("android-scroll-reload")),r.set(Rh(t.win,Jp(t.editor).getOrDie("no"))),Yp(t.editor).each(function(e){uh(t.container,e.body),o.set(hh(e,t.toolstrip,t.alloy))})},exit:function(){n.restore(),e.show(),ao(t.container,z("fullscreen-maximized")),ao(t.container,z("android-maximized")),ah(),ao(t.body,z("android-scroll-reload")),o.clear(),r.clear()}}},Bh=function(n,r){var o=null;return{cancel:function(){$(o)||(clearTimeout(o),o=null)},throttle:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];$(o)&&(o=setTimeout(function(){o=null,n.apply(null,e)},r))}}},Ph=function(n,r){function o(){$(i)||(clearTimeout(i),i=null)}var i=null;return{cancel:o,throttle:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];o(),i=setTimeout(function(){i=null,n.apply(null,e)},r)}}},Ih=function(e,t){var n=Ed(Kd.sketch({dom:g('<div aria-hidden="true" class="${prefix}-mask-tap-icon"></div>'),containerBehaviours:M([R.config({toggleClass:z("mask-tap-icon-selected"),toggleOnExecute:!1})])})),r=Bh(e,200);return Kd.sketch({dom:g('<div class="${prefix}-disabled-mask"></div>'),components:[Kd.sketch({dom:g('<div class="${prefix}-content-container"></div>'),components:[jl.sketch({dom:g('<div class="${prefix}-content-tap-section"></div>'),components:[n.asSpec()],action:function(e){r.throttle()},buttonBehaviours:M([R.config({toggleClass:z("mask-tap-icon-selected")})])})]})]})},Ls=h({unbind:C}),Lh=No([Wo("editor",[l("getFrame"),s("getBody"),s("getDoc"),s("getWin"),s("getSelection"),s("setSelection"),s("clearSelection"),s("cursorSaver"),s("onKeyup"),s("onNodeChanged"),s("getCursorBox"),l("onDomChanged"),f("onTouchContent",C),f("onTapContent",C),f("onTouchToolstrip",C),f("onScrollToCursor",Ls),f("onScrollToElement",Ls),f("onToEditing",Ls),f("onToReading",Ls),f("onToolbarScrollStart",w)]),l("socket"),l("toolstrip"),l("dropup"),l("toolbar"),l("container"),l("alloy"),Uo("win",function(e){return nr(e.socket).dom.defaultView}),Uo("body",function(e){return O.fromDom(e.socket.dom.ownerDocument.body)}),f("translate",w),f("setReadOnly",C),f("readOnlyOnInit",x)]),Fh=function(e){var t=Ho("Getting AndroidWebapp schema",Lh,e),n=(B(t.toolstrip,"width","100%"),Qm(Ih(function(){t.setReadOnly(t.readOnlyOnInit()),r.enter()},t.translate))),e=(t.alloy.add(n),{show:function(){t.alloy.add(n)},hide:function(){t.alloy.remove(n)}}),r=(mr(t.container,n.element),zh(t,e));return{setReadOnly:t.setReadOnly,refreshStructure:C,enter:r.enter,exit:r.exit,destroy:C}},Fs=h([l("dom"),f("shell",!0),Xa("toolbarBehaviours",[lg])]),Ms=h([gl({name:"groups",overrides:function(){return{behaviours:M([lg.config({})])}}})]),Hh=nc({name:"Toolbar",configFields:Fs(),partFields:Ms(),factory:function(n,e,t,r){e=n.shell?{behaviours:[lg.config({})],components:[]}:{behaviours:[],components:e};return{uid:n.uid,dom:n.dom,components:e.components,behaviours:Xs(n.toolbarBehaviours,e.behaviours),apis:{setGroups:function(e,t){e=e,(n.shell?S.some(e):Sl(e,n,"groups")).fold(function(){throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},function(e){lg.set(e,t)})}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(e,t,n){e.setGroups(t,n)}}}),t=h([l("items"),Wo("markers",k(["itemSelector"],l)),Xa("tgroupBehaviours",[I])]),js=h([Ds({name:"items",unit:"item"})]),Vh=nc({name:"ToolbarGroup",configFields:t(),partFields:js(),factory:function(e,t,n,r){return{uid:e.uid,dom:e.dom,components:t,behaviours:Xs(e.tgroupBehaviours,[I.config({mode:"flow",selector:e.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}}}),jh="data-"+z("horizontal-scroll"),Uh=function(e){e.dom.scrollTop=1;var t=0!==e.dom.scrollTop;return e.dom.scrollTop=0,t},Wh=function(e){e.dom.scrollLeft=1;var t=0!==e.dom.scrollLeft;return e.dom.scrollLeft=0,t},$h=function(e){return 0<e.dom.scrollTop||Uh(e)},qh=function(e){return 0<e.dom.scrollLeft||Wh(e)},Gh=function(e){E(e,jh,"true")},Kh=function(e){return("true"===_(e,jh)?qh:$h)(e)},Xh=function(e,t){return F(e,"touchmove",function(e){as(e.target,t).filter(Kh).fold(function(){e.prevent()},C)})},Yh=function(){function t(e){var t=!0===e.scrollable?"${prefix}-toolbar-scrollable-group":"";return{dom:g('<div aria-label="'+e.label+'" class="${prefix}-toolbar-group '+t+'"></div>'),tgroupBehaviours:M([qd("adhoc-scrollable-toolbar",!0===e.scrollable?[Ti(function(e,t){B(e.element,"overflow-x","auto"),Gh(e.element),Cg(e.element)})]:[])]),components:[Kd.sketch({components:[Vh.parts.items({})]})],markers:{itemSelector:"."+z("toolbar-group-item")},items:e.items}}function n(){Hh.setGroups(r,o.get()),R.off(r)}var r=Qm(Hh.sketch({dom:g('<div class="${prefix}-toolbar"></div>'),components:[Hh.parts.groups({})],toolbarBehaviours:M([R.config({toggleClass:z("context-toolbar"),toggleOnExecute:!1,aria:{mode:"none"}}),I.config({mode:"cyclic"})]),shell:!0})),e=Qm(Kd.sketch({dom:{classes:[z("toolstrip")]},components:[eg(r)],containerBehaviours:M([R.config({toggleClass:z("android-selection-context-toolbar"),toggleOnExecute:!1})])})),o=N([]);return{wrapper:e,toolbar:r,createGroups:function(e){return k(e,Z(Vh.sketch,t))},setGroups:function(e){o.set(e),n()},setContextToolbar:function(e){R.on(r),Hh.setGroups(r,e)},restoreToolbar:function(){R.isOn(r)&&n()},refresh:function(){},focus:function(){I.focusIn(r)}}},Jh=function(e){return Qm(jl.sketch({dom:g('<div class="${prefix}-mask-edit-icon ${prefix}-icon"></div>'),action:function(){e.run(function(e){e.setReadOnly(!1)})}}))},Zh=function(){return Qm(Kd.sketch({dom:g('<div class="${prefix}-editor-socket"></div>'),components:[],containerBehaviours:M([lg.config({})])}))},Qh=function(e,t){lg.append(e,eg(t))},ev=function(e,t){lg.remove(e,t)},tv=function(e,t,n,r){(!0===n?ji.toAlpha:ji.toOmega)(r),(n?Qh:ev)(e,t)},nv=function(t,e){return e.getAnimationRoot.fold(function(){return t.element},function(e){return e(t)})},rv=function(e){return e.dimension.property},ov=function(e,t){return e.dimension.getDimension(t)},iv=function(e,t){e=nv(e,t);Vc(e,[t.shrinkingClass,t.growingClass])},uv=function(e,t){ao(e.element,t.openClass),io(e.element,t.closedClass),B(e.element,rv(t),"0px"),$u(e.element)},av=function(e,t){ao(e.element,t.closedClass),io(e.element,t.openClass),Wu(e.element,rv(t))},cv=function(e,t,n,r){n.setCollapsed(),B(e.element,rv(t),ov(t,e.element)),$u(e.element),iv(e,t),uv(e,t),t.onStartShrink(e),t.onShrunk(e)},sv=function(e,t,n,r){r=r.getOrThunk(function(){return ov(t,e.element)}),n.setCollapsed(),B(e.element,rv(t),r),$u(e.element),n=nv(e,t);ao(n,t.growingClass),io(n,t.shrinkingClass),uv(e,t),t.onStartShrink(e)},Ks=Object.freeze({__proto__:null,refresh:function(e,t,n){n.isExpanded()&&(Wu(e.element,rv(t)),n=ov(t,e.element),B(e.element,rv(t),n))},grow:function(e,t,n){n.isExpanded()||bp(e,t,n)},shrink:function(e,t,n){n.isExpanded()&&vp(e,t,n)},immediateShrink:function(e,t,n){n.isExpanded()&&cv(e,t,n)},hasGrown:function(e,t,n){return n.isExpanded()},hasShrunk:function(e,t,n){return n.isCollapsed()},isGrowing:yp,isShrinking:wp,isTransitioning:function(e,t,n){return yp(e,t)||wp(e,t)},toggleGrow:function(e,t,n){(n.isExpanded()?vp:bp)(e,t,n)},disableTransitions:iv}),Eu=Object.freeze({__proto__:null,exhibit:function(e,t,n){var r=t.expanded;return Mi(r?{classes:[t.openClass],styles:{}}:{classes:[t.closedClass],styles:ni(t.dimension.property,"0px")})},events:function(n,r){return A([(e=Cn(),t=function(e,t){t.event.raw.propertyName===n.dimension.property&&(iv(e,n),r.isExpanded()&&Wu(e.element,n.dimension.property),(r.isExpanded()?n.onGrown:n.onShrunk)(e))},xi(e)(t))]);var e,t}}),Gs=[l("closedClass"),l("openClass"),l("shrinkingClass"),l("growingClass"),s("getAnimationRoot"),We("onShrunk"),We("onStartShrink"),We("onGrown"),We("onStartGrow"),f("expanded",!1),Ie("dimension",Pe("property",{width:[i("property","width"),i("getDimension",function(e){return nf(e)+"px"})],height:[i("property","height"),i("getDimension",function(e){return Gu(e)+"px"})]}))],lv=Fi({fields:Gs,name:"sliding",active:Eu,apis:Ks,state:Object.freeze({__proto__:null,init:function(e){var t=N(e.expanded);return Ii({isExpanded:function(){return!0===t.get()},isCollapsed:function(){return!1===t.get()},setCollapsed:ee(t.set,!1),setExpanded:ee(t.set,!0),readState:function(){return"expanded: "+t.get()}})}})}),fv=function(t,n){var r=Qm(Kd.sketch({dom:{tag:"div",classes:[z("dropup")]},components:[],containerBehaviours:M([lg.config({}),lv.config({closedClass:z("dropup-closed"),openClass:z("dropup-open"),shrinkingClass:z("dropup-shrinking"),growingClass:z("dropup-growing"),dimension:{property:"height"},onShrunk:function(e){t(),n(),lg.set(e,[])},onGrown:function(e){t(),n()}}),Nu(function(e,t){o(C)})])})),o=function(e){window.requestAnimationFrame(function(){e(),lv.shrink(r)})};return{appear:function(e,t,n){!0===lv.hasShrunk(r)&&!1===lv.isTransitioning(r)&&window.requestAnimationFrame(function(){t(n),lg.set(r,[e()]),lv.grow(r)})},disappear:o,component:r,element:r.element}},dv=function(e,t,n){return as(e,t,n).isSome()},mv=function(e){return e.raw.which===cs[0]&&!gt(["input","textarea"],Jn(e.target))&&!dv(e.target,'[contenteditable="true"]')},gv=function(){return sn().browser.isFirefox()},pv=function(e,t){return gv()?Xg(e,"focus",t):F(e,"focusin",t)},hv=function(e,t){return gv()?Xg(e,"blur",t):F(e,"focusout",t)},vv=function(t,e){var n=y({stopBackspace:!0},e),r=mh(n),o=k(["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"].concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),function(e){return F(t,e,function(t){r.fireIfReady(t,e).each(function(e){e&&t.kill()}),n.triggerEvent(e,t)&&t.kill()})}),i=Os(),u=F(t,"paste",function(t){r.fireIfReady(t,"paste").each(function(e){e&&t.kill()}),n.triggerEvent("paste",t)&&t.kill(),i.set(setTimeout(function(){n.triggerEvent(On(),t)},0))}),a=F(t,"keydown",function(e){n.triggerEvent("keydown",e)?e.kill():n.stopBackspace&&mv(e)&&e.prevent()}),c=pv(t,function(e){n.triggerEvent("focusin",e)&&e.kill()}),s=Os(),l=hv(t,function(e){n.triggerEvent("focusout",e)&&e.kill(),s.set(setTimeout(function(){n.triggerEvent(Tn(),e)},0))});return{unbind:function(){T(o,function(e){e.unbind()}),a.unbind(),c.unbind(),l.unbind(),u.unbind(),i.on(clearTimeout),s.on(clearTimeout)}}},bv=function(e,t){e=p(e,"target").getOr(t);return N(e)},yv=function(e,t){var n=N(!1),r=N(!1);return{stop:function(){n.set(!0)},cut:function(){r.set(!0)},isStopped:n.get,isCut:r.get,event:e,setSource:t.set,getSource:t.get}},wv=function(e){var t=N(!1);return{stop:function(){t.set(!0)},cut:C,isStopped:t.get,isCut:ie,event:e,setSource:re("Cannot set source of a broadcasted event"),getSource:re("Cannot get source of a broadcasted event")}},xv=Yo([{stopped:[]},{resume:["element"]},{complete:[]}]),Cv=function(e,r,t,n,o,i){var e=e(r,n),u=yv(t,o);return e.fold(function(){return i.logEventNoHandlers(r,n),xv.complete()},function(t){var n=t.descHandler;return Tm(n)(u),u.isStopped()?(i.logEventStopped(r,t.element,n.purpose),xv.stopped()):u.isCut()?(i.logEventCut(r,t.element,n.purpose),xv.complete()):or(t.element).fold(function(){return i.logNoParent(r,t.element,n.purpose),xv.complete()},function(e){return i.logEventResponse(r,t.element,n.purpose),xv.resume(e)})})},Sv=function(t,n,r,e,o,i){return Cv(t,n,r,e,o,i).fold(x,function(e){return Sv(t,n,r,e,o,i)},ie)},kv=function(e,t,n,r,o){var i=bv(n,r);return Cv(e,t,n,r,i,o)},Tv=function(e,t,n){var r=wv(t);return T(e,function(e){e=e.descHandler;Tm(e)(r)}),r.isStopped()},Ov=function(e,t,n,r){return Ev(e,t,n,n.target,r)},Ev=function(e,t,n,r,o){var i=bv(n,r);return Sv(e,t,n,r,i,o)},_v=function(e,t){return{element:e,descHandler:t}},Av=function(e,t){return{id:e,descHandler:t}},Dv=function(){var i={};return{registerId:function(r,o,e){Lr(e,function(e,t){var n=void 0!==i[t]?i[t]:{};n[o]=km(e,r),i[t]=n})},unregisterId:function(n){Lr(i,function(e,t){$r(e,n)&&delete e[n]})},filterByType:function(e){return p(i,e).map(function(e){return Wr(e,function(e,t){return Av(t,e)})}).getOr([])},find:function(e,t,n){return p(i,t).bind(function(r){return mi(n,function(e){return t=r,Rl(n=e).bind(function(e){return p(t,e)}).map(function(e){return _v(n,e)});var t,n},e)})}}},Mv=function(){var u=Dv(),a={},c=function(e){Rl(e.element).each(function(e){delete a[e],u.unregisterId(e)})};return{find:function(e,t,n){return u.find(e,t,n)},filter:function(e){return u.filterByType(e)},register:function(e){n=(t=e).element;var t,n=Rl(n).getOrThunk(function(){return Ml("uid-",t.element)});if(qr(a,n)){var r=e,o=n,i=a[o];if(i!==r)throw new Error('The tagId "'+o+'" is already used by: '+mu(i.element)+"\nCannot use it for: "+mu(r.element)+"\nThe conflicting element is"+(Cr(i.element)?" ":" not ")+"already in the DOM");c(r)}u.registerId([e],n,e.events),a[n]=e},unregister:c,getById:function(e){return p(a,e)}}},Nv=function(n){function r(t){return or(n.element).fold(x,function(e){return v(t,e)})}function o(e,t){return u.find(r,e,t)}function i(t){var e=u.filter(En());T(e,function(e){e=e.descHandler;Tm(e)(t)})}var u=Mv(),e=vv(n.element,{triggerEvent:function(t,n){return wu(t,n.target,function(e){return Ov(o,t,n,e)})}}),a={debugInfo:h("real"),triggerEvent:function(t,n,r){wu(t,n,function(e){return Ev(o,t,r,n,e)})},triggerFocus:function(t,n){Rl(t).fold(function(){Wi(t)},function(e){wu(kn(),t,function(e){return kv(o,kn(),{originator:n,kill:C,prevent:C,target:t},t,e),!1})})},triggerEscape:function(e,t){a.triggerEvent("keydown",e.element,t.event)},getByUid:function(e){return g(e)},getByDom:function(e){return p(e)},build:Qm,addToGui:function(e){s(e)},removeFromGui:function(e){l(e)},addToWorld:function(e){t(e)},removeFromWorld:function(e){c(e)},broadcast:function(e){f(e)},broadcastOn:function(e,t){d(e,t)},broadcastEvent:function(e,t){m(e,t)},isConnected:x},t=function(e){e.connect(a),Qn(e.element)||(u.register(e),T(e.components(),t),a.triggerEvent(Nn(),e.element,{target:e.element}))},c=function(e){Qn(e.element)||(T(e.components(),c),u.unregister(e)),e.disconnect()},s=function(e){Ar(n,e)},l=function(e){Nr(e)},f=function(e){i({universal:!0,data:e})},d=function(e,t){i({universal:!1,channels:e,data:t})},m=function(e,t){e=u.filter(e);return Tv(e,t)},g=function(e){return u.getById(e).fold(function(){return b.error(new Error('Could not find component with uid: "'+e+'" in system.'))},b.value)},p=function(e){e=Rl(e).getOr("not found");return g(e)};return t(n),{root:n,element:n.element,destroy:function(){e.unbind(),hr(n.element)},add:s,remove:l,getByUid:g,getByDom:p,addToWorld:t,removeFromWorld:c,broadcast:f,broadcastOn:d,broadcastEvent:m}},Rv=z("readonly-mode"),zv=z("edit-mode");function Bv(e){e=Qm(Kd.sketch({dom:{classes:[z("outer-container")].concat(e.classes)},containerBehaviours:M([ji.config({alpha:Rv,omega:zv})])}));return Nv(e)}var Pv=function(e,t){var n=O.fromTag("input");Hu(n,{opacity:"0",position:"absolute",top:"-1000px",left:"-1000px"}),mr(e,n),Wi(n),t(n),hr(n)},Iv=function(e){var t,n=e.getSelection();0<n.rangeCount&&(t=n.getRangeAt(0),(e=e.document.createRange()).setStart(t.startContainer,t.startOffset),e.setEnd(t.endContainer,t.endOffset),n.removeAllRanges(),n.addRange(e))},Lv=function(e,t){qi().each(function(e){v(e,t)||$i(e)}),e.focus(),Wi(O.fromDom(e.document.body)),Iv(e)},Fv=function(e,t,n,r){function o(){Lv(t,r)}var i=F(n,"keydown",function(e){gt(["input","textarea"],Jn(e.target))||o()});return{toReading:function(){Pv(e,$i)},toEditing:o,onToolbarTouch:C,destroy:function(){i.unbind()}}},Hv=function(n,r,o,i,e){function u(){r.run(function(e){e.refreshSelection()})}function t(){r.run(function(e){e.clearSelection()})}function a(){n.getCursorBox().each(function(e){c(e.top,e.height)}),r.run(function(e){e.syncHeight()})}var c=function(e,t){var n=e-i.dom.scrollTop;r.run(function(e){e.scrollIntoView(n,n+t)})},s=gh(n),l=Ph(a,300),f=[n.onKeyup(function(){t(),l.throttle()}),n.onNodeChanged(u),n.onDomChanged(l.throttle),n.onDomChanged(u),n.onScrollToCursor(function(e){e.preventDefault(),l.throttle()}),n.onScrollToElement(function(e){e.element,c(r,i)}),n.onToEditing(function(){r.run(function(e){e.toEditing()})}),n.onToReading(function(){r.run(function(e){e.toReading()})}),F(n.doc,"touchend",function(e){v(n.html,e.target)||v(n.body,e.target)}),F(o,"transitionend",function(e){var t;"height"===e.raw.propertyName&&(t=Gu(o),r.run(function(e){e.setViewportOffset(t)}),u(),a())}),Xg(o,"touchstart",function(e){var t;r.run(function(e){e.highlightSelection()}),t=e,r.run(function(e){e.onToolbarTouch(t)}),n.onTouchToolstrip()}),F(n.body,"touchstart",function(e){t(),n.onTouchContent(),s.fireTouchstart(e)}),s.onTouchmove(),s.onTouchend(),F(n.body,"click",function(e){e.kill()}),F(o,"touchmove",function(){n.onToolbarScrollStart()})];return{destroy:function(){T(f,function(e){e.unbind()})}}};function Vv(t,n){function r(e){var t=O.fromTag("span");return Fm(t,[z("layer-editor"),z("unfocused-selection")]),Hu(t,{left:e.left+"px",top:e.top+"px",width:e.width+"px",height:e.height+"px"}),t}var e=t.document,o=O.fromTag("div"),i=(io(o,z("unfocused-selections")),mr(O.fromDom(e.documentElement),o),F(o,"touchstart",function(e){e.prevent(),Lv(t,n),u()})),u=function(){pr(o)};return{update:function(){u();var e=Ch(t),e=k(e,r);gr(o,e)},isActive:function(){return 0<cr(o).length},destroy:function(){i.unbind(),hr(o)},clear:u}}function jv(e){function r(e){t()?i(e):o.push(e)}function t(){return n.isSome()}var n=S.none(),o=[],i=function(t){n.each(function(e){setTimeout(function(){t(e)},0)})};return e(function(e){t()||(n=S.some(e),T(o,i),o=[])}),{get:r,map:function(n){return jv(function(t){r(function(e){t(n(e))})})},isReady:t}}var Uv,Wv={nu:jv,pure:function(t){return jv(function(e){e(t)})}},$v=function(e){setTimeout(function(){throw e},0)},qv=function(n){function e(e){n().then(e,$v)}return{map:function(e){return qv(function(){return n().then(e)})},bind:function(t){return qv(function(){return n().then(function(e){return t(e).toPromise()})})},anonBind:function(e){return qv(function(){return n().then(function(){return e.toPromise()})})},toLazy:function(){return Wv.nu(e)},toCached:function(){var e=null;return qv(function(){return e=null===e?n():e})},toPromise:n,get:e}},Gv={nu:function(e){return qv(function(){return new Dd(e)})},pure:function(e){return qv(function(){return Dd.resolve(e)})}},Kv=function(t,n){return Nt([{width:320,height:480,keyboard:{portrait:300,landscape:240}},{width:320,height:568,keyboard:{portrait:300,landscape:240}},{width:375,height:667,keyboard:{portrait:305,landscape:240}},{width:414,height:736,keyboard:{portrait:320,landscape:240}},{width:768,height:1024,keyboard:{portrait:320,landscape:400}},{width:1024,height:1366,keyboard:{portrait:380,landscape:460}}],function(e){return li(t<=e.width&&n<=e.height,e.keyboard)}).getOr({portrait:n/5,landscape:t/4})},Xv=function(e){return Kv(e.screen.width,e.screen.height)},Yv=function(e){var t=Qg(e).isPortrait(),n=Xv(e),n=t?n.portrait:n.landscape;return(t?e.screen.height:e.screen.width)-e.innerHeight>n?0:n},Jv=function(e,t){var n=nr(e).dom.defaultView;return Gu(e)+Gu(t)-Yv(n)},Zv=function(e,t,n){var r=Jv(t,n),t=Gu(t)+Gu(n)-r;B(e,"padding-bottom",t+"px")},Qv=Yo([{fixed:["element","property","offsetY"]},{scroller:["element","offsetY"]}]),e1="data-"+z("position-y-fixed"),t1="data-"+z("y-property"),n1="data-"+z("scrolling"),r1="data-"+z("last-window-height"),o1=function(e){return vh(e,e1)},i1=function(e){return _(e,t1)},u1=function(e){return vh(e,r1)},a1=function(e,t){var n=i1(e);return Qv.fixed(e,n,t)},c1=function(e,t){return Qv.scroller(e,t)},s1=function(e){var t=o1(e);return("true"===_(e,n1)?c1:a1)(e,t)},l1=function(e){e=Qu(e,"["+e1+"]");return k(e,s1)},f1=function(e){var t=_(e,"style");Hu(e,{position:"absolute",top:"0px"}),E(e,e1,"0px"),E(e,t1,"top");return{restore:function(){E(e,"style",t||""),Jr(e,e1),Jr(e,t1)}}},d1=function(e,t,n){var r=_(n,"style");Cg(n),Hu(n,{position:"absolute",height:t+"px",width:"100%",top:e+"px"}),E(n,e1,e+"px"),E(n,n1,"true"),E(n,t1,"top");return{restore:function(){Sg(n),E(n,"style",r||""),Jr(n,e1),Jr(n,n1),Jr(n,t1)}}},m1=function(e){var t=_(e,"style");Hu(e,{position:"absolute",bottom:"0px"}),E(e,e1,"0px"),E(e,t1,"bottom");return{restore:function(){E(e,"style",t||""),Jr(e,e1),Jr(e,t1)}}},g1=function(e,t,n){var r=nr(e).dom.defaultView.innerHeight;return E(e,r1,r+"px"),r-t-n},p1=function(n,r,o,i){function e(){var e=u.innerHeight;return u1(n)<e}function t(){var e,t;d&&(e=Gu(o),t=Gu(i),t=g1(n,e,t),E(n,e1,e+"px"),B(n,"height",t+"px"),Zv(r,n,i))}var u=nr(n).dom.defaultView,a=f1(o),c=Gu(o),s=Gu(i),s=g1(n,c,s),l=d1(c,s,n),f=m1(i),d=!0;return Zv(r,n,i),{setViewportOffset:function(e){E(n,e1,e+"px"),t()},isExpanding:e,isShrinking:ne(e),refresh:t,restore:function(){d=!1,a.restore(),l.restore(),f.restore()}}},h1=(Uv=null,{animate:function(o,i,u,a,t,e){function c(e){l=!0,t(e)}function s(e){Yg.clearInterval(Uv),c(e)}var l=!1;Yg.clearInterval(Uv);Uv=Yg.setInterval(function(){var e,t,n,r=o();e=r,t=i,n=u,(Math.abs(e-t)<=n?S.none():e<t?S.some(e+n):S.some(e-n)).fold(function(){Yg.clearInterval(Uv),c(i)},function(e){var t;a(e,s),!l&&((t=o())!==e||Math.abs(t-i)>Math.abs(r-i))&&(Yg.clearInterval(Uv),c(i))})},e)}}),v1=15,b1=10,y1=10,w1="data-"+z("last-scroll-top"),x1=function(e){e=Uu(e,"top").getOr("0");return parseInt(e,10)},C1=function(e){return parseInt(e.dom.scrollTop,10)},S1=function(n,r,o){return Gv.nu(function(e){var t=ee(C1,n);h1.animate(t,r,v1,function(e){n.dom.scrollTop=e,B(n,"top",x1(n)+v1+"px")},function(){n.dom.scrollTop=r,B(n,"top",o+"px"),e(r)},y1)})},k1=function(r,o){return Gv.nu(function(e){var t=ee(C1,r),n=(E(r,w1,t()),Math.abs(o-t())),n=Math.ceil(n/b1);h1.animate(t,o,n,function(e,t){vh(r,w1)!==r.dom.scrollTop?t(r.dom.scrollTop):(r.dom.scrollTop=e,E(r,w1,e))},function(){r.dom.scrollTop=o,E(r,w1,o),e(o)},y1)})},T1=function(o,i){return Gv.nu(function(e){var t=ee(x1,o),n=function(e){B(o,"top",e+"px")},r=Math.abs(i-t()),r=Math.ceil(r/b1);h1.animate(t,i,r,n,function(){n(i),e(i)},y1)})},O1=function(e,t){t=t+o1(e)+"px";B(e,"top",t)},E1=function(t,n,r){var o=nr(t).dom.defaultView;return Gv.nu(function(e){O1(t,r),O1(n,r),o.scrollTo(0,r),e(r)})};var _1=function(e,t,n,r,o){n=Jv(t,n),e=ee(Iv,e);n<r||n<o?k1(t,t.dom.scrollTop-n+o).get(e):r<0&&k1(t,t.dom.scrollTop+r).get(e)},A1=function(u,e){return e(function(r){var o=[],i=0;0===u.length?r([]):T(u,function(e,t){var n;e.get((n=t,function(e){o[n]=e,++i>=u.length&&r(o)}))})})},D1=function(e){return A1(e,Gv.nu)},M1=function(e,t,n,r){return B(e,t,n+r+"px"),Gv.pure(r)},N1=function(e,t,n){t+=n,n=Uu(e,"top").getOr(n),n=t-parseInt(n,10),n=e.dom.scrollTop+n;return S1(e,n,t)},R1=function(e,r){return e.fold(function(e,t,n){return M1(e,t,r,n)},function(e,t){return N1(e,r,t)})},z1=function(e,t){e=l1(e),e=k(e,function(e){return R1(e,t)});return D1(e)},B1=5,P1=function(t,n,e,r,o,i){u=function(e){return E1(t,n,e)},a=N(Wv.pure({}));var u,a,c={start:function(t){var e=Wv.nu(function(e){return u(t).get(e)});a.set(e)},idle:function(e){a.get().get(function(){e()})}},s=Ph(function(){c.idle(function(){z1(e,r.pageYOffset).get(function(){var e;e=Ch(i),S.from(e[0]).bind(function(e){var t=e.top-n.dom.scrollTop;return t>r.innerHeight+B1||t<-B1?S.some({top:t,bottom:t+e.height}):S.none()}).each(function(e){n.dom.scrollTop=n.dom.scrollTop+e.top}),c.start(0),o.refresh()})})},1e3),l=F(O.fromDom(r),"scroll",function(){r.pageYOffset<0||s.throttle()});return z1(e,r.pageYOffset).get(w),{unbind:l.unbind}},I1=function(e){function t(){p.clear()}var n=e.cWin,r=e.ceBody,o=e.socket,i=e.toolstrip,u=e.contentElement,a=e.keyboardType,c=e.outerWindow,s=e.dropup,e=e.outerBody,l=p1(o,r,i,s),f=a(e,n,Sr(),u),d=tp(c,{onChange:C,onReady:l.refresh}),m=(d.onAdjustment(function(){l.refresh()}),F(O.fromDom(c),"resize",function(){l.isExpanding()&&l.refresh()})),g=P1(i,o,e,c,l,n),p=Vv(n,u);return{toEditing:function(){f.toEditing(),t()},toReading:function(){f.toReading()},onToolbarTouch:function(e){f.onToolbarTouch()},refreshSelection:function(){p.isActive()&&p.update()},clearSelection:t,highlightSelection:function(){p.update()},scrollIntoView:function(e,t){_1(n,o,s,e,t)},updateToolbarPadding:C,setViewportOffset:function(e){l.setViewportOffset(e),T1(o,e).get(w)},syncHeight:function(){B(u,"height",u.dom.contentWindow.document.body.scrollHeight+"px")},refreshStructure:l.refresh,destroy:function(){l.restore(),d.destroy(),g.unbind(),m.unbind(),f.destroy(),p.destroy(),Pv(Sr(),$i)}}},L1=function(n,e){var r=Zp(),o=Os(),i=Os(),u=Ts(),a=Ts();return{enter:function(){e.hide();var t=O.fromDom(document);Yp(n.editor).each(function(e){o.set({socketHeight:Uu(n.socket,"height"),iframeHeight:Uu(e.frame,"height"),outerScroll:document.body.scrollTop}),i.set({exclusives:Xh(t,"."+kg)}),io(n.container,z("fullscreen-maximized")),uh(n.container,e.body),r.maximize(),B(n.socket,"overflow","scroll"),B(n.socket,"-webkit-overflow-scrolling","touch"),Wi(e.body),u.set(I1({cWin:e.win,ceBody:e.body,socket:n.socket,toolstrip:n.toolstrip,dropup:n.dropup.element,contentElement:e.frame,outerBody:n.body,outerWindow:n.win,keyboardType:Fv})),u.run(function(e){e.syncHeight()}),a.set(Hv(e,u,n.toolstrip,n.socket,n.dropup))})},refreshStructure:function(){u.run(function(e){e.refreshStructure()})},exit:function(){r.restore(),a.clear(),u.clear(),e.show(),o.on(function(e){e.socketHeight.each(function(e){B(n.socket,"height",e)}),e.iframeHeight.each(function(e){B(n.editor.getFrame(),"height",e)}),document.body.scrollTop=e.scrollTop}),o.clear(),i.on(function(e){e.exclusives.unbind()}),i.clear(),ao(n.container,z("fullscreen-maximized")),ah(),Sg(n.toolbar),Wu(n.socket,"overflow"),Wu(n.socket,"-webkit-overflow-scrolling"),$i(n.editor.getFrame()),Yp(n.editor).each(function(e){e.clearSelection()})}}},F1=function(e){var t=Ho("Getting IosWebapp schema",Lh,e),n=(B(t.toolstrip,"width","100%"),B(t.container,"position","relative"),Qm(Ih(function(){t.setReadOnly(t.readOnlyOnInit()),r.enter()},t.translate))),e=(t.alloy.add(n),{show:function(){t.alloy.add(n)},hide:function(){t.alloy.remove(n)}}),r=L1(t,e);return{setReadOnly:t.setReadOnly,refreshStructure:r.refreshStructure,enter:r.enter,exit:r.exit,destroy:C}};var H1=tinymce.util.Tools.resolve("tinymce.EditorManager"),V1=function(e){e=S.from(nu(e)).getOrThunk(function(){return H1.baseURL+"/skins/ui/oxide"});return{content:e+"/content.mobile.min.css",ui:e+"/skin.mobile.min.css"}},j1=function(e,t,n){e.system.broadcastOn([ru],{command:t,state:n})},U1=function(r,e){var t=Pr(e.formatter.get());T(t,function(t){e.formatter.formatChanged(t,function(e){j1(r,t,e)})}),T(["ul","ol"],function(n){e.selection.selectorChanged(n,function(e,t){j1(r,n,e)})})},W1=function(t){return function(){function e(){t._skinLoaded=!0,t.fire("SkinLoaded")}t.initialized?e():t.on("init",e)}},$1="toReading",q1="toEditing";Xo.add("mobile",function(x){return{getNotificationManagerImpl:function(){return{open:h({progressBar:{value:C},close:C,text:C,getEl:h(null),moveTo:C,moveRel:C,settings:{}}),close:C,reposition:C,getArgs:h({})}},renderUI:function(){function e(){x.fire("ScrollIntoView")}function c(e,t,n,r){!1===r&&x.selection.collapse(),t=t,n=n,t={readOnly:(e=e.get()).backToMask.concat(t.get()),main:e.backToMask.concat(n.get())},v.setToolbarGroups(!0===r?t.readOnly:t.main),x.setMode(!0===r?"readonly":"design"),x.fire(!0===r?$1:q1),v.updateMode(r)}function s(e,t){return x.on(e,t),{unbind:function(){x.off(e)}}}var t,n,r,o,i,u,a,l,f,d,m,g,p=x.getElement(),h=V1(x),v=(!1===Zi(x)?(t=Ki.DOM.styleSheetLoader,x.contentCSS.push(h.content),t.load(h.ui,W1(x)),x.on("remove",function(){return t.unload(h.ui)})):W1(x)(),sn().os.isAndroid()?(a=e,l=Bv({classes:[z("android-container")]}),f=Yh(),d=Ts(),m=Jh(d),g=Zh(),a=fv(C,a),l.add(f.wrapper),l.add(g),l.add(a.component),{system:l,element:l.element,init:function(e){d.set(Fh(e))},exit:function(){d.run(function(e){e.exit(),lg.remove(g,m)})},setToolbarGroups:function(e){e=f.createGroups(e);f.setGroups(e)},setContextToolbar:function(e){e=f.createGroups(e);f.setContextToolbar(e)},focusToolbar:function(){f.focus()},restoreToolbar:function(){f.restoreToolbar()},updateMode:function(e){tv(g,m,e,l.root)},socket:g,dropup:a}):(a=e,n=Bv({classes:[z("ios-container")]}),r=Yh(),o=Ts(),i=Jh(o),u=Zh(),a=fv(function(){o.run(function(e){e.refreshStructure()})},a),n.add(r.wrapper),n.add(u),n.add(a.component),{system:n,element:n.element,init:function(e){o.set(F1(e))},exit:function(){o.run(function(e){lg.remove(u,i),e.exit()})},setToolbarGroups:function(e){e=r.createGroups(e);r.setGroups(e)},setContextToolbar:function(e){e=r.createGroups(e);r.setContextToolbar(e)},focusToolbar:function(){r.focus()},restoreToolbar:function(){r.restoreToolbar()},updateMode:function(e){tv(u,i,e,n.root)},socket:u,dropup:a})),b=O.fromDom(p),y=(Rr(b,v.system),p.ownerDocument.defaultView),w=tp(y,{onChange:function(){v.system.broadcastOn([ou],{width:ep(y)})},onReady:C});return x.on("init",function(){v.init({editor:{getFrame:function(){return O.fromDom(x.contentAreaContainer.querySelector("iframe"))},onDomChanged:function(){return{unbind:C}},onToReading:function(e){return s($1,e)},onToEditing:function(e){return s(q1,e)},onScrollToCursor:function(t){x.on("ScrollIntoView",function(e){t(e)});return{unbind:function(){x.off("ScrollIntoView"),w.destroy()}}},onTouchToolstrip:function(){t()},onTouchContent:function(){var e=O.fromDom(x.editorContainer.querySelector("."+z("toolbar")));Gi(e).bind(function(e){return v.system.getByDom(e).toOptional()}).each(Hn),v.restoreToolbar(),t()},onTapContent:function(e){var t=e.target;"img"===Jn(t)?(x.selection.select(t.dom),e.kill()):"a"===Jn(t)&&v.system.getByDom(O.fromDom(x.editorContainer)).each(function(e){ji.isAlpha(e)&&Xi(t.dom)})}},container:O.fromDom(x.editorContainer),socket:O.fromDom(x.contentAreaContainer),toolstrip:O.fromDom(x.editorContainer.querySelector("."+z("toolstrip"))),toolbar:O.fromDom(x.editorContainer.querySelector("."+z("toolbar"))),dropup:v.dropup,alloy:v.system,translate:C,setReadOnly:function(e){c(a,u,i,e)},readOnlyOnInit:function(){return Qi()}});var t=function(){v.dropup.disappear(function(){v.system.broadcastOn([iu],{})})},e={label:"The first group",scrollable:!1,items:[Ql("back",function(){x.selection.collapse(),v.exit()},{},x)]},n={label:"Back to read only",scrollable:!1,items:[Ql("readonly-back",function(){c(a,u,i,!0)},{},x)]},r=Fg(v,x),r=Hg(x,r),o={label:"The extra group",scrollable:!1,items:[]},i=N([{label:"the action group",scrollable:!0,items:r},o]),u=N([{label:"The read only mode group",scrollable:!0,items:[]},o]),a=N({backToMask:[e],backToReadOnly:[n]});U1(v,x)}),x.on("remove",function(){v.exit()}),x.on("detach",function(){Br(v.system),v.system.destroy()}),{iframeContainer:v.socket.element.dom,editorContainer:v.element.dom}}}})}(),tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 012 2 2 2 0 01-2 2 2 2 0 01-2-2c0-1.1.9-2 2-2zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 01-1-1v-5c0-.6-.4-1-1-1a1 1 0 00-1 1v5c0 .6-.4 1-1 1a1 1 0 01-1-1V9H4a1 1 0 110-2h16c.6 0 1 .4 1 1s-.4 1-1 1z" fill-rule="nonzero"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 00-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 10-1.4-1.4L12 13.6 5.7 7.3z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 001.4-1.4L12 6.6l-7.7 7.7a1 1 0 001.4 1.4L12 9.4l6.3 6.3z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 110-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5L13 7H5a1 1 0 110-2h9.2zm4 0h.8a1 1 0 010 2h-2l1.2-2zm-6.4 4l-1.2 2H5a1 1 0 010-2h6.8zm4 0H19a1 1 0 010 2h-4.4l1.2-2zm-6.4 4l-1.2 2H5a1 1 0 010-2h4.4zm4 0H19a1 1 0 010 2h-6.8l1.2-2zM7 17l-1.2 2H5a1 1 0 010-2h2zm4 0h8a1 1 0 010 2H9.8l1.2-2zm5.2-13.5l1.3.7-9.7 16.3-1.3-.7 9.7-16.3z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="M5.6 13l12 6a1 1 0 001.4-1V6a1 1 0 00-1.4-.9l-12 6a1 1 0 000 1.8z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="M18.5 13l-12 6A1 1 0 015 18V6a1 1 0 011.4-.9l12 6a1 1 0 010 1.8z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 01-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 00-1 1z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 01-.7.3 1 1 0 01-.7-.3 1 1 0 01-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3zm0-10a1 1 0 01-.7-.3A1 1 0 0111 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 01-.7.3zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 01-.7.3h-1a1 1 0 01-.7-.3 1 1 0 01-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1zM7 12c0 .3-.1.5-.3.7a1 1 0 01-.7.3H5a1 1 0 01-.7-.3A1 1 0 014 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7zm10 3.5l.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 01-.8.3 1 1 0 01-.6-.3l-.8-.7a1 1 0 01-.3-.8c0-.2.1-.5.3-.7a1 1 0 011.4 0zm-10-7l-.7-.8a1 1 0 01-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 01-.7.3 1 1 0 01-.8-.3zm10 0a1 1 0 01-.8.3 1 1 0 01-.7-.3 1 1 0 01-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 010 1.4l-.8.8a1 1 0 01-.6.3 1 1 0 01-.8-.3 1 1 0 01-.3-.8c0-.2.1-.5.3-.6l.7-.8zM12 8a4 4 0 013.7 2.4 4 4 0 010 3.2A4 4 0 0112 16a4 4 0 01-3.7-2.4 4 4 0 010-3.2A4 4 0 0112 8zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7z" fill-rule="evenodd"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-8 9.4l-2.3 2.3a1 1 0 11-1.4-1.4l4-4a1 1 0 011.4 0l4 4a1 1 0 01-1.4 1.4L13 13.4V20a1 1 0 01-2 0v-6.6z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 110 14.8 7.4 7.4 0 010-14.8zM12 3a9 9 0 100 18 9 9 0 000-18zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="M15.7 2l1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 01-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2zM18 12l-4.5-4L9 12h9zM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 01-2-2v-5h2zm8-7V4h6a2 2 0 012 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1l.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="M13 11l-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="M18.4 8l1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 01-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8zm1.6 7l-3-3-3 3h6z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 01-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 01-1 .7h-.2a.7.7 0 01-.7-1l4-12a1 1 0 012 0l4 12a.7.7 0 01-.8 1h-.2a1 1 0 01-1-.7l-.8-2.6zm-.3-1.5l-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1zm4.8-6.8V10H7.7V5.8h-1v-1h2zM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1zM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2v-.1-.2l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 01-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 00-.5-.1 1 1 0 00-.4 0l-.3.4h-1zm2.3.8h-.2l-.2.1-.4.1a1 1 0 00-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 001.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 00-.6-.3l-.6.3-.2.8zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 00-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 01-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 01-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8a1 1 0 010 2h-8a1 1 0 010-2zM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 011.6 1.2l-8 12a1 1 0 01-1.5.1l-5-5a1 1 0 111.4-1.4l4.1 4.1 7.4-11z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 010-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3L4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 010-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 010-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 010-1.1L6 5 2.2 1.3z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8L5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 010-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2L13.4 12l3.9 3.8a1 1 0 01-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 01-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 011.5-1.5l3.8 3.9 3.8-3.9a1 1 0 011.5 1.5z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 01-.8 2 2.8 2.8 0 01.8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 01-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 01-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 01-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 01.8-2 2.8 2.8 0 01-.8-2zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2zM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 01-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 01-.5-.5V17a3 3 0 001-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0118 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 01-3.7 3 5.7 5.7 0 01-3.2 0A5.9 5.9 0 017.6 18a6.2 6.2 0 01-1.4-2.6 6.7 6.7 0 010-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 012.3-4A20 20 0 0112 4a26.4 26.4 0 013.2 3.4 18.2 18.2 0 012.3 4zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 00-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 01-1.3 3 5.3 5.3 0 01-2.3 1.5 4.9 4.9 0 01-2 .1 4.3 4.3 0 002.4.8 4 4 0 002-.6 4 4 0 001.5-1.5z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 000 18 1.5 1.5 0 001.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 005-5c0-4.4-4-8-9-8zm-5.5 9a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm3-4a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm5 0a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm3 4a1.5 1.5 0 110-3 1.5 1.5 0 010 3z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24"><path stroke="#000" stroke-width="2" d="M21 3L3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9 19l3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 00-1 1v10c0 .6.4 1 1 1h4v2zm-2 4v-4H5a3 3 0 01-3-3V6a3 3 0 013-3h14a3 3 0 013 3v10a3 3 0 01-3 3h-6.4L7 23z"/><path d="M13 10h2a1 1 0 010 2h-2v2a1 1 0 01-2 0v-2H9a1 1 0 010-2h2V8a1 1 0 012 0v2z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="M9 19l3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 00-1 1v10c0 .6.4 1 1 1h4v2zm-2 4v-4H5a3 3 0 01-3-3V6a3 3 0 013-3h14a3 3 0 013 3v10a3 3 0 01-3 3h-6.4L7 23z"/></svg>',contrast:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 015.7 2.3A8 8 0 1112 4zm-6 8a6 6 0 006 6V6a6 6 0 00-6 6z" fill-rule="evenodd"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 00-2 2v11h2V5h10V3zm1 4a2 2 0 012 2v10a2 2 0 01-2 2h-7a2 2 0 01-2-2V9c0-1.2.9-2 2-2h7zm0 12V9h-7v10h7z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 01-1-1v-2H7V9H5a1 1 0 110-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3zM9 9v5l5-5H9zm1 6h5v-5l-5 5z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0110.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 012 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 017 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7zm12.3 5h-3v10h3v-10zM8 13.8h-.3l-.4.2a2.8 2.8 0 00-.7.4v.1a2.8 2.8 0 00-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 00.8-.3 2.4 2.4 0 00.7-.7 2.5 2.5 0 00.3-.8 1.5 1.5 0 000-.8 1 1 0 00-.2-.4 1 1 0 00-.5-.2H8zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4zM7 5.8h-.4a1 1 0 00-.5.3 1 1 0 00-.2.5v.7a2.5 2.5 0 00.3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 000-.8 2.6 2.6 0 00-.3-.8A2.5 2.5 0 007.7 6l-.4-.1H7z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 01-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 018.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 010-2c0-.4.3-.7.5-1l2 2V3h14zM8.5 15.3h-.3a2.6 2.6 0 00-.8.4 2.5 2.5 0 00-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 00.8-.3L9 18V18l.4-.4.2-.4.1-.4v-.3-.4a1 1 0 00-.2-.5 1 1 0 00-.4-.2h-.5zm7 0H15a1 1 0 00-.4.3 1 1 0 00-.2.5 1.5 1.5 0 000 .7v.4a2.8 2.8 0 00.5.7h.1a2.8 2.8 0 00.8.6l.4.1h.7l.5-.2.2-.5v-.4-.3a2.6 2.6 0 00-.3-.8 2.4 2.4 0 00-.7-.7 2.5 2.5 0 00-.8-.3h-.3zM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4zm8.5-7.1h-11v2h11v-2z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 01-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 018.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 010-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 010 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8zm-8.5 2.2l.1-.4v-.3-.4a1 1 0 00-.2-.5 1 1 0 00-.4-.2 1.6 1.6 0 00-.8 0 2.6 2.6 0 00-.8.3 2.5 2.5 0 00-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 00.8-.3 2.8 2.8 0 001-1zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4zm5.4 4l.2-.5v-.4-.3a2.6 2.6 0 00-.3-.8 2.4 2.4 0 00-.7-.7 2.5 2.5 0 00-.8-.3 1.5 1.5 0 00-.8 0 1 1 0 00-.4.2 1 1 0 00-.2.5 1.5 1.5 0 000 .7v.4l.3.4.3.4a2.8 2.8 0 00.8.5l.4.1h.7l.5-.2z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 00-2 2v14c0 1.1.9 2 2 2h10a2 2 0 002-2V7.6L14.4 3zM17 19H7V5h6v4h4v10z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5zm0 4h2v2h-2V9zM9 9h2v2H9V9zm4 4h2v2h-2v-2zm-4 0h2v2H9v-2zm0 4h2v2H9v-2zm4 0h2v2h-2v-2zM9 5h2v2H9V5z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7zm-2 2h-3v12h3V8zm-2-6v2H8v15H6V2h7z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16zm-2 2H8v3h12v-3zm-1-6v2H4v5H2V7h17z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10zm3 8h-2V9h-7v10h9a2 2 0 01-2 2h-7a2 2 0 01-2-2V9c0-1.2.9-2 2-2h7a2 2 0 012 2v2z"/><path d="M17 14h1a1 1 0 010 2h-1v1a1 1 0 01-2 0v-1h-1a1 1 0 010-2h1v-1a1 1 0 012 0v1z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19.8 8.8l-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5zm-2-.2l1-.9v-.3l-2.2-2.2a.3.3 0 00-.3 0l-1 1L18 8.5zm-1 1l-2.5-2.4-6 6 2.5 2.5 6-6zm-7 7.1l-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 00-2-2H7v2h11v9zM6 17h15a1 1 0 010 2h-1v1a1 1 0 01-2 0v-1H6a2 2 0 01-2-2V7H3a1 1 0 110-2h1V4a1 1 0 112 0v13zm3-5.3l1.3 2 3-4.7 3.7 6H7l2-3.3z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0119 6zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 008 19h3zM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 00-4 4.5h2.2zm-3.4 0a12 12 0 012.8-4 12 12 0 00-5 4h2.2z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm1 2v14h14V5H5zm4.8 2.6l5.6 4a.5.5 0 010 .8l-5.6 4A.5.5 0 019 16V8a.5.5 0 01.8-.4z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 00-1 1c0 .6.4 1 1 1zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 00-1 1c0 .6.4 1 1 1zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5zM12 4a8 8 0 100 16 8 8 0 000-16zm0 14.5a6.5 6.5 0 110-13 6.5 6.5 0 010 13z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3L18 7v1h-5V5H7v14h9a1 1 0 012 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3z"/><path d="M16.4 9.2a1 1 0 011.4.2l2.4 3.6-2.4 3.6a1 1 0 01-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 01.2-1.4z"/></g></svg>',fill:'<svg width="24" height="26"><path d="M16.6 12l-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 002.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2zM5.2 13L10 8.2l4.8 4.8H5.2zM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 002-2c0-1.3-2-3.5-2-3.5z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2zm4-8h2V9h-2v2zM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 00-2 2zm14-2v2h2a2 2 0 00-2-2zm-7 16h2V3h-2v18zm7-6h2v-2h-2v2zm-4-8h2V5h-2v2zm4 12a2 2 0 002-2h-2v2z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5zm8 4v2h2v-2h-2zm4-14H7a2 2 0 00-2 2v3h2V6h10v3h2V6a2 2 0 00-2-2zm2 14h-2v2a2 2 0 002-2zM3 11v2h18v-2H3zm6 7v2h2v-2H9zm8-4v2h2v-2h-2zM5 18c0 1.1.9 2 2 2v-2H5z" fill-rule="nonzero"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 00-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 010 2h-4v11a1 1 0 01-2 0V7H7a1 1 0 110-2h10z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="M15.3 10l-1.2-1.3 2.9-3h-2.3a.9.9 0 110-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 11-1.8 0V7l-2.9 3zm0 4l3 3v-2.3a.9.9 0 111.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 110-1.8H17l-3-2.9 1.3-1.2zM10 15.4l-2.9 3h2.3a.9.9 0 110 1.7H5a.9.9 0 01-.9-.9v-4.4a.9.9 0 111.8 0V17l2.9-3 1.2 1.3zM8.7 10L5.7 7v2.3a.9.9 0 01-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 010 1.8H7l3 2.9-1.3 1.2z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="M5 15.7l2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7zM5 18V19h3l1.8-1.9-2-2L5 17.9zm14-3l-2.5-2.4-6.4 6.5H19v-4zM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 01-1-1V7c0-.6.4-1 1-1zm6 7a2 2 0 110-4 2 2 0 010 4zM4.5 4h15a.5.5 0 110 1h-15a.5.5 0 010-1zm2-2h11a.5.5 0 110 1h-11a.5.5 0 010-1z"/></svg>',gamma:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm1 2v14h14V5H5zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 00-.4-.8l-.1-.2H8 8v-1l.3-.1.3-.1h.7a1 1 0 01.6.5l.1.3a8.5 8.5 0 01.3.6l1.9 4.6 2-5.2a1 1 0 011-.6.5.5 0 01.5.6L13 14v2.8a.7.7 0 01-1.4 0z" fill-rule="nonzero"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 00-6 9 6.3 6.3 0 001.4 2l1 1a6.3 6.3 0 003.6 1 6.5 6.5 0 006-9 6.3 6.3 0 00-1.4-2l-1-1a6.3 6.3 0 00-3.6-1zM12 4a7.8 7.8 0 015.7 2.3A8 8 0 1112 4z"/><path d="M9.6 9.7a.7.7 0 01-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 00-.8.8.8.8 0 01-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path id="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 012.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm12 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm-6 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="M5 15.7l3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7zM5 18V19h3l2.8-2.9-2-2L5 17.9zm14-3l-2.5-2.4-6.4 6.5H19v-4zM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm6 8a2 2 0 100-4 2 2 0 000 4z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 110-2zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm-5 4h12a1 1 0 010 2H7a1 1 0 010-2zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 011.2-1.6l3 2a1 1 0 010 1.6l-3 2a1 1 0 11-1.2-1.6z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 015.7 2.3A8 8 0 1112 4zm-1 3v2h2V7h-2zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 001.8-2.9 6.3 6.3 0 00-.1-4.1 5.8 5.8 0 00-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 00-3.9 1.8 6.3 6.3 0 00-1.3 6 6.2 6.2 0 001.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 014 11c0-1 .2-1.9.6-2.7A7 7 0 016.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 015.7 2 7 7 0 011.7 2.3 6 6 0 01.2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 01-3.6 2.5v.5z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 100-14 7 7 0 000 14zm0 2a9 9 0 110-18 9 9 0 010 18z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 00-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1z"/></g></svg>',invert:'<svg width="24" height="24"><path d="M18 19.3L16.5 18a5.8 5.8 0 01-3.1 1.9 6.1 6.1 0 01-5.5-1.6A5.8 5.8 0 016 14v-.3l.1-1.2A13.9 13.9 0 017.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 00.2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 00-3-4.2L12 6a26.1 26.1 0 00-2.2 2.5l-1-1a20.9 20.9 0 012.9-3.3L12 4l1 .8a22.2 22.2 0 014 5.4c.6 1.2 1 2.4 1 3.6z" fill-rule="evenodd"/></svg>',italic:'<svg width="24" height="24"><path d="M16.7 4.7l-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 110 18 9 9 0 010-18zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 003.2-2.1l-.2-.2a6 6 0 00-1-.6zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 01-2-2.8zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 01-.3-2zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1zm3-1.4l-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 00-1.3-3.5zm-9 0l2 .2V5.5a9 9 0 00-2 2.2zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 00-2-2.3zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 011.9-2.5zm4.4 0l.1.1a10 10 0 011.8 2.4l1.1-.7a7.5 7.5 0 00-3-1.8z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zm0 4a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zm0 4a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zm0 4a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zM7 3.6l3.7 3.7a1 1 0 01-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 011.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 011.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 01-1.3 0h-.1a1 1 0 010-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="M15 9l-8 8H4v-3l8-8 3 3zm1-1l-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1zM4 18h16v2H4v-2z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 011.4 1.4l-2.1 2a2 2 0 102.7 2.8l4.8-4.8a1 1 0 000-1.4 1 1 0 111.4-1.3 2.9 2.9 0 010 4L9.6 20a3.9 3.9 0 01-5.5-5.5l2-2zm11.6-.6a1 1 0 01-1.4-1.4l2-2a2 2 0 10-2.6-2.8L11 10.3a1 1 0 000 1.4A1 1 0 119.6 13a2.9 2.9 0 010-4L14.4 4a3.9 3.9 0 015.5 5.5l-2 2z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M11 16a2 2 0 100-4 2 2 0 000 4zm0 1a3 3 0 110-6 3 3 0 010 6zM11 26a2 2 0 100-4 2 2 0 000 4zm0 1a3 3 0 110-6 3 3 0 010 6zM11 36a2 2 0 100-4 2 2 0 000 4zm0 1a3 3 0 110-6 3 3 0 010 6z" fill-rule="nonzero"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-default":'<svg width="48" height="48"><g fill-rule="evenodd"><circle cx="11" cy="14" r="3"/><circle cx="11" cy="24" r="3"/><circle cx="11" cy="34" r="3"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-square":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8l-1.6 1v-1.1l1.6-1h1.2V17zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6zM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3zM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4zM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3zM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zM37.1 34.6L34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2zm.7 1a2 2 0 00-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1zM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3zM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2zm.7 1a2 2 0 00-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33zm0 10v-1.2h-1.3V26H33zm0 10v-1.2h-1.3V36H33z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15zm0 10v-1.2h1.3V26H15zm0 10v-1.2h1.3V36H15z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M39.3 17l-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3zm-1.6-4.7l-.7 2.3h1.6l-.8-2.3zM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26zM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M12.6 17l-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3zM11 12.3l-.7 2.3h1.6l-.8-2.3zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7zM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3zm0 10v-1.2H33V27h-1.3zm0 10v-1.2H33V37h-1.3z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15zm0 10v-1.2h1.3V27H15zm0 10v-1.2h1.3V37H15z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3zM10 8v3h4V8a1 1 0 00-.3-.7A1 1 0 0013 7h-2a1 1 0 00-.7.3 1 1 0 00-.3.7z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 010 2h-1v11a1 1 0 01-2 0V7h-2v11a1 1 0 01-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 017.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L11 5zM4.4 16.2L6.2 15l-1.8-1.2a1 1 0 011.2-1.6l3 2a1 1 0 010 1.6l-3 2a1 1 0 11-1.2-1.6z" fill-rule="evenodd"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm12 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm-6 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 00-2 2v14c0 1.1.9 2 2 2h10a2 2 0 002-2V7.6L14.4 3zM17 19H7V5h6v4h4v10z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="M15 13l2-2v8H5V7h8l-2 2H7v8h8v-4zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 110-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 01-1-1v-3zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M17.8 9.8L15.4 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7l2.3 5.8zm0 0l2.2 5.7-2.3-5.8zM13 17v-2h-2v2h2zm0-4V7h-2v6h2z" fill-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 010 2H6a1 1 0 010-2zm0-6h8a1 1 0 010 2H6a1 1 0 010-2zm0-6h8a1 1 0 010 2H6a1 1 0 110-2zm13-1v3.5a.5.5 0 11-1 0V5h-.5a.5.5 0 110-1H19zm-1 8.8l.2.2h1.3a.5.5 0 110 1h-1.6a1 1 0 01-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 00-.2-.2h-1.3a.5.5 0 01-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 010-1h1.2a.3.3 0 100-.6h-1.3a.4.4 0 110-.8h1.3a.3.3 0 000-.6h-1.2a.5.5 0 110-1H19c.6 0 1 .4 1 1z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 110-2zM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 01-.5-.5V5h-.5a.5.5 0 010-1H6zm-1 8.8l.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 01-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 00-.2-.2H4.5a.5.5 0 01-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3zM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 010-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 110-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 110-1H6c.6 0 1 .4 1 1z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4L1 13l6.4 6.5 6.5-6.5-6.5-6.5zM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7zM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 010-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 11-4.3 16.9l1.5-1.5A7 7 0 1013 6h-1z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 110-2zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm-5 4h12a1 1 0 010 2H7a1 1 0 010-2zm1.6-3.8a1 1 0 01-1.2 1.6l-3-2a1 1 0 010-1.6l3-2a1 1 0 011.2 1.6L6.8 12l1.8 1.2z" fill-rule="evenodd"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 010-2zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1zM6 22a1 1 0 01-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 01-1-1v-5H7v5c0 .6-.4 1-1 1z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 010 2h-1v11a1 1 0 01-2 0V7h-2v11a1 1 0 01-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 016.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L10 5z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm8 7v12h-6V8h6zm-1.5 1.5h-3v9h3v-9zM12 3a1 1 0 100 2 1 1 0 000-2z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm-2 7v12H4V8h6zM8.5 9.5h-3v9h3v-9zM12 3a1 1 0 100 2 1 1 0 000-2z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm10 11v5H8v-5h14zm-1.5 1.5h-11v2h11v-2zM12 3a1 1 0 100 2 1 1 0 000-2z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm10 7v5H8V8h14zm-1.5 1.5h-11v2h11v-2zM12 3a1 1 0 100 2 1 1 0 000-2z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h3V9h9zM9 20H6a2 2 0 01-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0112 1a3 3 0 012.8 2H18a2 2 0 012 2v4h1v12H9v-1zm1.5-9.5v9h9v-9h-9zM12 3a1 1 0 00-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h3V9h9zM9 20H6a2 2 0 01-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0112 1a3 3 0 012.8 2H18a2 2 0 012 2v4h1v12H9v-1zm1.5-9.5v9h9v-9h-9zM12 3a1 1 0 00-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5L8 20H3v-3l3.5-3.5a2 2 0 010-3L14 3l1 1-7.3 7.3a1 1 0 000 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 01-2.8 0l-.1-.1z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 01.1 2H13v6a1 1 0 01-2 .1V13H5a1 1 0 01-.1-2H11V5c0-.6.4-1 1-1z"/></svg>',preferences:'<svg width="24" height="24"><path d="M20.1 13.5l-1.9.2a5.8 5.8 0 01-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 01-1.4 0l-1.5-1.2a6.2 6.2 0 01-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 01-1-.9l-.2-1.9a5.8 5.8 0 01-1.5-.6l-1.5 1.2a1 1 0 01-1.4 0l-.7-.7a1 1 0 010-1.4l1.2-1.5a6.2 6.2 0 01-.6-1.5l-1.9-.2a1 1 0 01-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 01.6-1.5L5.2 7.3a1 1 0 010-1.4l.7-.7a1 1 0 011.4 0l1.5 1.2a6.2 6.2 0 011.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 011.5.6l1.5-1.2a1 1 0 011.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 01.6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1zM12 15a3 3 0 100-6 3 3 0 000 6z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 002.1-2.8 15.7 15.7 0 00-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 00-6.7 3.2A16.2 16.2 0 003.2 12c0 .2.2.3.3.5zm-2.4-1l.7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 012.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 01-2.8-3.7 1 1 0 010-1zm12-3.3a2 2 0 102.7 2.6 4 4 0 11-2.6-2.6z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 00-3 3v6h2v3h14v-3h2v-6a3 3 0 00-3-3zm-1 10H7v-4h10v4zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5zm.5-8H6v2h12V5z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 00-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 00.8 1.3zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 00-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 00.8 1.3z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 11-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 111.4-1.4l5 5a1 1 0 010 1.4l-5 5a1 1 0 01-1.4-1.4l3.3-3.3z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M5 22.1l-1.2-4.7v-.2a1 1 0 011-1l5 .4a1 1 0 11-.2 2l-2.2-.2a7.8 7.8 0 008.4.2 7.5 7.5 0 003.5-6.4 1 1 0 112 0 9.5 9.5 0 01-4.5 8 9.9 9.9 0 01-10.2 0l.4 1.4a1 1 0 11-2 .5zM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 00-9.5-1 7.5 7.5 0 00-3.6 7 1 1 0 01-2 0 9.5 9.5 0 014.5-8.6 10 10 0 0110.9.3l-.3-1a1 1 0 012-.5l1.1 4.8a1 1 0 01-1 1.2l-5-.4a1 1 0 01-.9-1z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 010 .2l-2.6 10a1 1 0 01-1 .8h-.2a.8.8 0 01-.8-1l2.6-10H8a1 1 0 110-2h9a1 1 0 010 2h-3.8zM5 18h7a1 1 0 010 2H5a1 1 0 010-2zm13 1.5L16.5 18 15 19.5a.7.7 0 01-1-1l1.5-1.5-1.5-1.5a.7.7 0 011-1l1.5 1.5 1.5-1.5a.7.7 0 011 1L17.5 17l1.5 1.5a.7.7 0 01-1 1z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 010 2h-1v9a3 3 0 01-3 3H9a3 3 0 01-3-3V9H5a1 1 0 110-2h3V6a3 3 0 013-3h2a3 3 0 013 3v1zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 00-1 1v1h4zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9zm-7 3a1 1 0 012 0v4a1 1 0 01-2 0v-4zm4 0a1 1 0 012 0v4a1 1 0 01-2 0v-4z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 119 2l-7 7A.5.5 0 111 8l7-7zM8.1 5.1A.5.5 0 119 6l-3 3A.5.5 0 115 8l3-3z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 01-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 01-.7.3h-6a1 1 0 01-.7-.3 1 1 0 01-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 01-.7.3 1 1 0 01-.7-.3A1 1 0 014 11V5z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1z"/><path d="M4.7 10H9a1 1 0 010 2H3a1 1 0 01-1-1V5a1 1 0 112 0v3l2.5-2.4a9.2 9.2 0 0110.8-1.5A9 9 0 0113.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 111.3-1.5 7.2 7.2 0 0011.6-3.7 7 7 0 00-3.5-7.7A7.2 7.2 0 008 7L4.7 10z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 010 2H3a1 1 0 01-1-1V5a1 1 0 112 0v3l2.5-2.4a9.2 9.2 0 0110.8-1.5A9 9 0 0113.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 111.3-1.5 7.2 7.2 0 0011.6-3.7 7 7 0 00-3.5-7.7A7.2 7.2 0 008 7L4.7 10z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 012 0v6c0 .6-.4 1-1 1h-6a1 1 0 010-2h4.3L16 7A7.2 7.2 0 007.7 6a7 7 0 003 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 011.4 1.5A9.2 9.2 0 012.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 014.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L8 5zm12 11.2a1 1 0 11-1 1.6l-3-2a1 1 0 010-1.6l3-2a1 1 0 111 1.6L18.4 15l1.8 1.2z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 012 2v2a2 2 0 01-2 2H5a2 2 0 01-2-2v-2c0-1.1.9-2 2-2zm0 2v2h14v-2H5zm10 0h2v2h-2v-2zm-4-6.4L8.7 9.3a1 1 0 10-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 10-1.4-1.4L13 11.6V4a1 1 0 00-2 0v7.6z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 111.4-1.4l4.3 4.4a1 1 0 01-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 100-12 6 6 0 000 12z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 00-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2a2 2 0 00-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8a2 2 0 002-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2zM7 17h10V7H7v10zm2-8h6v6H9V9z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6c0-1.1.9-2 2-2zm3.6 10.9L7 12.3a.7.7 0 00-1 1L9.6 17 18 8.6a.7.7 0 000-1 .7.7 0 00-1 0l-7.4 7.3z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6V8H5a1 1 0 110-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6zM8 8h2V6H8v2zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6V13H5a1 1 0 010-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6zM14 13h2v-2h-2v2zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6V18H5a1 1 0 010-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6zM8 18h2v-2H8v2z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path d="M16 6l4 4-8 9-8-9 4-4h8zm-4 10.2l5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2z" fill-rule="evenodd"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 010-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7zM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 00-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6zm0-3v2h2V5H6zm13 0h-3v5h3v1h-3a1 1 0 01-.7-.3 1 1 0 01-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1zm-5 1.5l-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 01-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5zM13 10V8h-2v2h2zm0-3V5h-2v2h2zm3 5l1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 017 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1z"/><path d="M5 11h14a1 1 0 010 2H5a1 1 0 010-2z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="M10.4 10l4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10zM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 00-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 01-1.3 1.3l-.6.6h2.6V19z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4L10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2v-8c0-1.1.9-2 2-2h14zM5 15v3h6v-3H5zm14 0h-6v3h6v-3zm0-5h-6v3h6v-3zM5 13h6v-3H5v3z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8zm-2 2H5v5h6V6z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 012 2v7h-8v-2h6V6h-6V4z" opacity=".2"/><path d="M18 20l-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3 .2-2.3 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-8 9H5v5h6v-5zm8 0h-6v5h6v-5zm-8-7H5v5h6V6z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 2H5v12h14V6z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 2H5v12h14V6z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v7h-8v7H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-8 9H5v5h6v-5zm8-7h-6v5h6V6zm-8 0H5v5h6V6z"/><path d="M18 20l-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3 .2-2.3 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2zm.3.5l1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6zm-4.7 1.8l1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 6v12h14V6H5z"/><path d="M14.4 8.6l1 1-2.3 2.4 2.3 2.4-1 1-2.4-2.3-2.4 2.3-1-1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 01-2 0V6h-8v12h8v-1a1 1 0 012 0v2c0 .5-.4 1-.9 1H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h15zM9 13H5v5h4v-5zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 01.1 2H17v2a1 1 0 01-2 .1V13h-2a1 1 0 01-.1-2H15V9c0-.6.4-1 1-1zM9 6H5v5h4V6z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H4a1 1 0 01-1-1v-2a1 1 0 012 0v1h8V6H5v1a1 1 0 11-2 0V5c0-.6.4-1 1-1h15zm0 9h-4v5h4v-5zM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 01.1 2H9v2a1 1 0 01-2 .1V13H5a1 1 0 01-.1-2H7V9c0-.6.4-1 1-1zm11-2h-4v5h4V6z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 110 2H5v6h14V6h-1a1 1 0 010-2h2c.6 0 1 .4 1 1v13a2 2 0 01-2 2H5a2 2 0 01-2-2V5c0-.6.4-1 1-1h2zm5 10H5v4h6v-4zm8 0h-6v4h6v-4zM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 010 2h-2v2a1 1 0 01-2 .1V8H9a1 1 0 010-2h2V4c0-.6.4-1 1-1z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 01.1 2H13v2a1 1 0 01-2 .1V18H9a1 1 0 01-.1-2H11v-2c0-.6.4-1 1-1zm6 7a1 1 0 010-2h1v-6H5v6h1a1 1 0 010 2H4a1 1 0 01-1-1V6c0-1.1.9-2 2-2h14a2 2 0 012 2v13c0 .5-.4 1-.9 1H18zM11 6H5v4h6V6zm8 0h-6v4h6V6z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 9h-4v5h4v-5zm-6 0H9v5h4v-5zm0-7H9v5h4V6zm6 0h-4v5h4V6z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 15.5V18h3v-2.5H5zm14-5h-9V18h9v-7.5zM19 6h-4v2.5h4V6zM8 6H5v2.5h3V6zm5 0h-3v2.5h3V6zm-8 7.5h3v-3H5v3z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 00-2 2v13c0 1.1.9 2 2 2h12a2 2 0 002-2V6a2 2 0 00-2-2H6zm0 12h8v3H6v-3zm11 0c.6 0 1 .4 1 1v1a1 1 0 01-2 0v-1c0-.6.4-1 1-1zM6 11h8v3H6v-3zm11 0c.6 0 1 .4 1 1v1a1 1 0 01-2 0v-1c0-.6.4-1 1-1zM6 6h8v3H6V6zm11 0c.6 0 1 .4 1 1v1a1 1 0 11-2 0V7c0-.6.4-1 1-1z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 012 2v13a2 2 0 01-2 2H6a2 2 0 01-2-2V6c0-1.1.9-2 2-2h12zm0 12h-8v3h8v-3zM7 16a1 1 0 00-1 1v1a1 1 0 002 0v-1c0-.6-.4-1-1-1zm11-5h-8v3h8v-3zM7 11a1 1 0 00-1 1v1a1 1 0 002 0v-1c0-.6-.4-1-1-1zm11-5h-8v3h8V6zM7 6a1 1 0 00-1 1v1a1 1 0 102 0V7c0-.6-.4-1-1-1z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 15v3h6v-3H5zm14 0h-6v3h6v-3zm0-9h-6v3h6V6zM5 9h6V6H5v3z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM8 15.5H5V18h3v-2.5zm11-5h-9V18h9v-7.5zm-2.5 1l1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2zm-8.5-1H5v3h3v-3zM19 6h-4v2.5h4V6zM8 6H5v2.5h3V6zm5 0h-3v2.5h3V6z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-8 11H5v3h6v-3zm8 0h-6v3h6v-3zm0-5h-6v3h6v-3zM5 13h6v-3H5v3z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 14v4h6v-4H5zm14 0h-6v4h6v-4zm0-6h-6v4h6V8zM5 12h6V8H5v4z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14zM9 16v-4a5 5 0 116 0v4h4a2 2 0 012 2v3H3v-3c0-1.1.9-2 2-2h4zm4 0v-5l.8-.6a3 3 0 10-3.6 0l.8.6v5h2z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 111 0V6H15v1.6a8 8 0 11-6 0zm-2.6 5.3a.5.5 0 00.3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 013.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 00-4.1 3.7z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path id="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 01-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 01-.5.6h-.8a.5.5 0 01-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4zm2.6-7.6l-.6 2a.5.5 0 00.5.6h1.6a.5.5 0 00.5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4z"/></g></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 110-2zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 110-2zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 110-2zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="M12.7 14.3l-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 010-1l3.1-3A12.4 12.4 0 016.7 9H8a10.1 10.1 0 001.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 110-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 01-1 2.4 13.5 13.5 0 01-1.7 2.3l1.9 1.8zm4.3-3l2.7 7.3a.5.5 0 01-.4.7 1 1 0 01-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 01-1 .7.5.5 0 01-.4-.7l2.7-7.4a1 1 0 012 0zm-2.2 4.4h2.4L16 12.5l-1.2 3.2z" fill-rule="evenodd"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 01-.4 1.8l-1 1.4a5.3 5.3 0 01-5.5 1 5 5 0 01-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 01-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 002.2.8 3.4 3.4 0 002.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1zM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 01-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 11-1.4 1.4l-5-5a1 1 0 010-1.4l5-5a1 1 0 011.4 1.4L6.4 8z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 011.4 1.4l-2 2a2 2 0 102.6 2.8l4.8-4.8a1 1 0 000-1.4 1 1 0 111.4-1.3 2.9 2.9 0 010 4L9.6 20a3.9 3.9 0 01-5.5-5.5l2-2zm11.6-.6a1 1 0 01-1.4-1.4l2.1-2a2 2 0 10-2.7-2.8L11 10.3a1 1 0 000 1.4A1 1 0 119.6 13a2.9 2.9 0 010-4L14.4 4a3.9 3.9 0 015.5 5.5l-2 2zM7.6 6.3a.8.8 0 01-1 1.1L3.3 4.2a.7.7 0 111-1l3.2 3.1zM5.1 8.6a.8.8 0 010 1.5H3a.8.8 0 010-1.5H5zm5-3.5a.8.8 0 01-1.5 0V3a.8.8 0 011.5 0V5zm6 11.8a.8.8 0 011-1l3.2 3.2a.8.8 0 01-1 1L16 17zm-2.2 2a.8.8 0 011.5 0V21a.8.8 0 01-1.5 0V19zm5-3.5a.7.7 0 110-1.5H21a.8.8 0 010 1.5H19z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 00-.3-.7A1 1 0 0016 7h-2a1 1 0 00-.7.3 1 1 0 00-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6c0-1.1.9-2 2-2zm0 1a1 1 0 00-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 012 0v3c0 .6-.4 1-1 1H5a1 1 0 01-1-1v-3a1 1 0 012 0v2h12zM11 6.4L8.7 8.7a1 1 0 01-1.4-1.4l4-4a1 1 0 011.4 0l4 4a1 1 0 11-1.4 1.4L13 6.4V16a1 1 0 01-2 0V6.4z" fill-rule="nonzero"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 110-24 12 12 0 010 24zm-8.7-5.3a11 11 0 0017.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7zM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 011.2 1.5l-.1.1-4.1 3-4-3a1 1 0 011-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8l4 2.9a1 1 0 01-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 01-1-1v-4l-2 1.3a1 1 0 01-1.2-.1l-.1-.1a1 1 0 01.1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2zm-4 0v2a2 2 0 01-2-2h2zm8 0v2h-2v-2h2zm8 0a2 2 0 01-2 2v-2h2zm-4 0v2h-2v-2h2zM15 7a1 1 0 010 2v7a1 1 0 01-2 0V9h-1v7a1 1 0 01-2 0v-4a2.5 2.5 0 01-.2-5H15zM5 15v2H3v-2h2zm16 0v2h-2v-2h2zM5 11v2H3v-2h2zm16 0v2h-2v-2h2zM5 7v2H3V7h2zm16 0v2h-2V7h2zM5 3v2H3c0-1.1.9-2 2-2zm8 0v2h-2V3h2zm6 0a2 2 0 012 2h-2V3zM9 3v2H7V3h2zm8 0v2h-2V3h2z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 010 2h-1v11a1 1 0 01-2 0V7h-2v11a1 1 0 01-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 016.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L10 5z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6zM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 00-.3-.7 1 1 0 00-.7-.3 1 1 0 00-.7.3 1 1 0 00-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3zm.7-3l.3-4a1 1 0 00-.3-.7 1 1 0 00-.7-.3 1 1 0 00-.7.3 1 1 0 00-.3.7l.3 4h1.4z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 111.4-1.4l4.3 4.4a1 1 0 01-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 100-12 6 6 0 000 12zm-1-9a1 1 0 012 0v6a1 1 0 01-2 0V8zm-2 4a1 1 0 010-2h6a1 1 0 010 2H8z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 111.4-1.4l4.3 4.4a1 1 0 01-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 100-12 6 6 0 000 12zm-3-5a1 1 0 010-2h6a1 1 0 010 2H8z" fill-rule="nonzero"/></svg>'}}),function(){function i(e){return function(){return e}}function e(e){return e}function t(){return l}var n=tinymce.util.Tools.resolve("tinymce.PluginManager"),u=function(e,t,n){e.execCommand("UL"===t?"InsertUnorderedList":"InsertOrderedList",!1,!1===n?null:{"list-style-type":n})},a=tinymce.util.Tools.resolve("tinymce.util.Tools"),r=function(e){e=e.getParam("advlist_number_styles","default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman");return e?e.split(/[ ,]/):[]},o=function(e){e=e.getParam("advlist_bullet_styles","default,circle,square");return e?e.split(/[ ,]/):[]},c=i(!1),s=i(!0),l={fold:function(e,t){return e()},isSome:c,isNone:s,getOr:e,getOrThunk:f,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:i(null),getOrUndefined:i(void 0),or:e,orThunk:f,map:t,each:function(){},bind:t,exists:c,forall:s,filter:function(){return l},toArray:function(){return[]},toString:i("none()")};function f(e){return e()}function d(n){function e(){return o}function t(e){return e(n)}var r=i(n),o={fold:function(e,t){return t(n)},isSome:s,isNone:c,getOr:r,getOrThunk:r,getOrDie:r,getOrNull:r,getOrUndefined:r,or:e,orThunk:e,map:function(e){return d(e(n))},each:function(e){e(n)},bind:t,exists:t,forall:t,filter:function(e){return e(n)?o:l},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return o}var m={some:d,none:t,from:function(e){return null==e?l:d(e)}},g=function(e,t){return e.$.contains(e.getBody(),t)},p=function(e){return e&&/^(TH|TD)$/.test(e.nodeName)},h=function(t){return function(e){return e&&/^(OL|UL|DL)$/.test(e.nodeName)&&g(t,e)}},v=function(e){var t=e.dom.getParent(e.selection.getNode(),"ol,ul"),e=e.dom.getStyle(t,"listStyleType");return m.from(e)},b=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1},y=function(e){return e.replace(/\-/g," ").replace(/\b\w/g,function(e){return e.toUpperCase()})},w=function(e,t,n){var r=b(t.parents,p),r=-1!==r?t.parents.slice(0,r):t.parents,t=a.grep(r,h(e));return 0<t.length&&t[0].nodeName===n},x=function(n,r){return function(t){function e(e){t.setActive(w(n,e,r))}return n.on("NodeChange",e),function(){return n.off("NodeChange",e)}}},C=function(n,e,t,r,o,i){n.ui.registry.addSplitButton(e,{tooltip:t,icon:"OL"===o?"ordered-list":"unordered-list",presets:"listpreview",columns:3,fetch:function(e){e(a.map(i,function(e){return{type:"choiceitem",value:"default"===e?"":e,icon:"list-"+("OL"===o?"num":"bull")+"-"+("disc"===e||"decimal"===e?"default":e),text:y(e)}}))},onAction:function(){return n.execCommand(r)},onItemAction:function(e,t){u(n,o,t)},select:function(t){return v(n).map(function(e){return t===e}).getOr(!1)},onSetup:x(n,o)})},S=function(e,t,n,r,o,i){e.ui.registry.addToggleButton(t,{active:!1,tooltip:n,icon:"OL"===o?"ordered-list":"unordered-list",onSetup:x(e,o),onAction:function(){return e.execCommand(r)}})},k=function(e,t,n,r,o,i){1<i.length?C(e,t,n,r,o,i):S(e,t,n,r,o)};n.add("advlist",function(e){var n,t;e.hasPlugin("lists")?(k(t=e,"numlist","Numbered list","InsertOrderedList","OL",r(t)),k(t,"bullist","Bullet list","InsertUnorderedList","UL",o(t)),(n=e).addCommand("ApplyUnorderedListStyle",function(e,t){u(n,"UL",t["list-style-type"])}),n.addCommand("ApplyOrderedListStyle",function(e,t){u(n,"OL",t["list-style-type"])})):console.error("Please use the Lists plugin together with the Advanced List plugin.")})}(),function(){var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),r=tinymce.util.Tools.resolve("tinymce.util.Tools"),o=function(e){return e.getParam("allow_html_in_named_anchor",!1,"boolean")},i="a:not([href])",t=function(e){return!e},u=function(e){return e.getAttribute("id")||e.getAttribute("name")||""},a=function(e){return e&&"a"===e.nodeName.toLowerCase()},c=function(e){return a(e)&&!e.getAttribute("href")&&""!==u(e)},s=function(e){return c(e)&&!e.firstChild},l=function(e){var t=e.dom;n(t).walk(e.selection.getRng(),function(e){r.each(e,function(e){s(e)&&t.remove(e,!1)})})},f=function(e){return/^[A-Za-z][A-Za-z0-9\-:._]*$/.test(e)},d=function(e){return e.dom.getParent(e.selection.getStart(),i)},m=function(e){e=d(e);return e?u(e):""},g=function(e,t){e.undoManager.transact(function(){o(e)||e.selection.collapse(!0),e.selection.isCollapsed()?e.insertContent(e.dom.createHTML("a",{id:t})):(l(e),e.formatter.remove("namedAnchor",null,null,!0),e.formatter.apply("namedAnchor",{value:t}),e.addVisual())})},p=function(e,t,n){n.removeAttribute("name"),n.id=t,e.addVisual(),e.undoManager.add()},h=function(e,t){var n=d(e);n?p(e,t,n):g(e,t),e.focus()},v=function(e,t){return f(t)?(h(e,t),!0):(e.windowManager.alert("Id should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores."),!1)},b=function(t){var e=m(t);t.windowManager.open({title:"Anchor",size:"normal",body:{type:"panel",items:[{name:"id",type:"input",label:"ID",placeholder:"example"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{id:e},onSubmit:function(e){v(t,e.getData().id)&&e.close()}})},y=function(e){return e&&t(e.attr("href"))&&!t(e.attr("id")||e.attr("name"))},w=function(e){return y(e)&&!e.firstChild},x=function(r){return function(e){for(var t=0;t<e.length;t++){var n=e[t];w(n)&&n.attr("contenteditable",r)}}};e.add("anchor",function(e){var t,n,r;(t=e).on("PreInit",function(){t.parser.addNodeFilter("a",x("false")),t.serializer.addNodeFilter("a",x(null))}),(n=e).addCommand("mceAnchor",function(){b(n)}),(r=e).ui.registry.addToggleButton("anchor",{icon:"bookmark",tooltip:"Anchor",onAction:function(){return r.execCommand("mceAnchor")},onSetup:function(e){return r.selection.selectorChangedWithUnbind("a:not([href])",e.setActive).unbind}}),r.ui.registry.addMenuItem("anchor",{icon:"bookmark",text:"Anchor...",onAction:function(){return r.execCommand("mceAnchor")}}),e.on("PreInit",function(){e.formatter.register("namedAnchor",{inline:"a",selector:i,remove:"all",split:!0,deep:!0,attributes:{id:"%value"},onmatch:function(e,t,n){return c(e)}})})})}(),function(){var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=function(e,t,n){return""===t||e.length>=t.length&&e.substr(n,n+t.length)===t},l=function(e,t){return-1!==e.indexOf(t)},f=function(e,t){return n(e,t,0)},r=tinymce.util.Tools.resolve("tinymce.Env"),t=new RegExp("^"+/(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)[A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?/g.source+"$","i"),d=function(e){return e.getParam("autolink_pattern",t)},m=function(e){return e.getParam("default_link_target",!1)},g=function(e){return e.getParam("link_default_protocol","http","string")},p=function(e){return/^[(\[{ \u00a0]$/.test(e)},h=function(e){return 3===e.nodeType},o=function(e){return 1===e.nodeType},i=function(e){return s(e,-1)},u=function(e){return s(e,0)},a=function(e){return s(e,-1)},c=function(e,t){return t<0&&(t=0),t=h(e)&&(e=e.data.length)<t?e:t},v=function(e,t,n){!o(t)||t.hasChildNodes()?e.setStart(t,c(t,n)):e.setStartBefore(t)},b=function(e,t,n){!o(t)||t.hasChildNodes()?e.setEnd(t,c(t,n)):e.setEndAfter(t)},y=function(e){return/^([A-Za-z][A-Za-z\d.+-]*:\/\/)|mailto:/.test(e)},w=function(e){return/[?!,.;:]/.test(e)},s=function(e,t){var n,r,o,i=d(e),u=m(e);if(null===e.dom.getParent(e.selection.getNode(),"a[href]")){var a=e.selection.getRng().cloneRange();if(a.startOffset<5){if(!(s=a.endContainer.previousSibling)){if(!a.endContainer.firstChild||!a.endContainer.firstChild.nextSibling)return;s=a.endContainer.firstChild.nextSibling}if(c=s.length,v(a,s,c),b(a,s,c),a.endOffset<5)return;n=a.endOffset,r=s}else{if(r=a.endContainer,!h(r)&&r.firstChild){for(;!h(r)&&r.firstChild;)r=r.firstChild;h(r)&&(v(a,r,0),b(a,r,r.nodeValue.length))}n=1===a.endOffset?2:a.endOffset-1-t}for(var c=n;v(a,r,2<=n?n-2:0),b(a,r,1<=n?n-1:0),--n,o=a.toString(),!p(o)&&0<=n-2;);p(a.toString())?(v(a,r,n),b(a,r,c),n+=1):(0===a.startOffset?v(a,r,0):v(a,r,n),b(a,r,c)),s=a.toString(),w(s.charAt(s.length-1))&&b(a,r,c-1);var s,t=(s=a.toString().trim()).match(i),c=g(e);t&&(s=t[0],f(s,"www.")?s=c+"://"+s:l(s,"@")&&!y(s)&&(s="mailto:"+s),i=e.selection.getBookmark(),e.selection.setRng(a),e.execCommand("createlink",!1,s),!1!==u&&e.dom.setAttrib(e.selection.getNode(),"target",u),e.selection.moveToBookmark(i),e.nodeChanged())}};e.add("autolink",function(e){var t,n;(t=e).on("keydown",function(e){if(13===e.keyCode)return a(t)}),r.browser.isIE()?t.on("focus",function(){if(!n){n=!0;try{t.execCommand("AutoUrlDetect",!1,!0)}catch(e){}}}):(t.on("keypress",function(e){if(41===e.keyCode||93===e.keyCode||125===e.keyCode)return i(t)}),t.on("keyup",function(e){if(32===e.keyCode)return u(t)}))})}(),function(){var c=Object.hasOwnProperty,e=tinymce.util.Tools.resolve("tinymce.PluginManager"),s=tinymce.util.Tools.resolve("tinymce.Env"),i=tinymce.util.Tools.resolve("tinymce.util.Delay"),l=function(e){return e.fire("ResizeEditor")},f=function(e){return e.getParam("min_height",e.getElement().offsetHeight,"number")},d=function(e){return e.getParam("max_height",0,"number")},m=function(e){return e.getParam("autoresize_overflow_padding",1,"number")},g=function(e){return e.getParam("autoresize_bottom_margin",50,"number")},p=function(e){return e.getParam("autoresize_on_init",!0,"boolean")},h=function(e){return e.plugins.fullscreen&&e.plugins.fullscreen.isFullscreen()},v=function(e,t,n,r,o){i.setEditorTimeout(e,function(){x(e,t),n--?v(e,t,n,r,o):o&&o()},r)},b=function(e,t){e=e.getBody();e&&(e.style.overflowY=t?"":"hidden",t||(e.scrollTop=0))},y=function(e,t,n,r){e=parseInt(e.getStyle(t,n,r),10);return isNaN(e)?0:e},w=function(e){return"setcontent"===(null==e?void 0:e.type.toLowerCase())&&(!0===e.selection||!0===e.paste)},x=function(e,t,n){var r,o,i,u,a=e.dom,c=e.getDoc();c&&(h(e)?b(e,!0):(c=c.documentElement,u=g(e),r=f(e),o=y(a,c,"margin-top",!0),i=y(a,c,"margin-bottom",!0),(c=(c=c.offsetHeight+o+i+u)<0?0:c)+(o=e.getContainer().offsetHeight-e.getContentAreaContainer().offsetHeight)>f(e)&&(r=c+o),(i=d(e))&&i<r?(r=i,b(e,!0)):b(e,!1),r!==t.get()&&(u=r-t.get(),a.setStyle(e.getContainer(),"height",r+"px"),t.set(r),l(e),s.browser.isSafari()&&s.mac&&(c=e.getWin()).scrollTo(c.pageXOffset,c.pageYOffset),e.hasFocus()&&w(n)&&e.selection.scrollIntoView(),s.webkit)&&u<0&&x(e,t,n)))};e.add("autoresize",function(e){var t,n,r,o,i,u,a;n=e.settings,t="resize",c.call(n,t)||(e.settings.resize=!1),e.inline||(a=0,u=n={get:function(){return a},set:function(e){a=e}},(i=e).addCommand("mceAutoResize",function(){x(i,u)}),o=n,(r=e).on("init",function(){var e=m(r),t=r.dom;t.setStyles(r.getDoc().documentElement,{height:"auto"}),t.setStyles(r.getBody(),{paddingLeft:e,paddingRight:e,"min-height":0})}),r.on("NodeChange SetContent keyup FullscreenStateChanged ResizeContent",function(e){x(r,o,e)}),p(r)&&r.on("init",function(){v(r,o,20,100,function(){v(r,o,5,1e3)})}))})}(),function(){var t,e=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=(t=void 0,function(e){return t===e}),r=tinymce.util.Tools.resolve("tinymce.util.Delay"),o=tinymce.util.Tools.resolve("tinymce.util.LocalStorage"),i=tinymce.util.Tools.resolve("tinymce.util.Tools"),u=function(e){return e.fire("RestoreDraft")},a=function(e){return e.fire("StoreDraft")},c=function(e){return e.fire("RemoveDraft")},s=function(e,t){e=e||t,t=/^(\d+)([ms]?)$/.exec(""+e);return(t[2]?{s:1e3,m:6e4}[t[2]]:1)*parseInt(e,10)},l=function(e){return e.getParam("autosave_ask_before_unload",!0)},f=function(e){var t=document.location;return e.getParam("autosave_prefix","tinymce-autosave-{path}{query}{hash}-{id}-").replace(/{path}/g,t.pathname).replace(/{query}/g,t.search).replace(/{hash}/g,t.hash).replace(/{id}/g,e.id)},d=function(e){return s(e.getParam("autosave_interval"),"30s")},m=function(e){return s(e.getParam("autosave_retention"),"20m")},g=function(e,t){return n(t)?e.dom.isEmpty(e.getBody()):""===(t=i.trim(t))||(t=(new DOMParser).parseFromString(t,"text/html"),e.dom.isEmpty(t))},p=function(e){var t=parseInt(o.getItem(f(e)+"time"),10)||0;return!((new Date).getTime()-t>m(e)&&(h(e,!1),1))},h=function(e,t){var n=f(e);o.removeItem(n+"draft"),o.removeItem(n+"time"),!1!==t&&c(e)},v=function(e){var t=f(e);!g(e)&&e.isDirty()&&(o.setItem(t+"draft",e.getContent({format:"raw",no_events:!0})),o.setItem(t+"time",(new Date).getTime().toString()),a(e))},b=function(e){var t=f(e);p(e)&&(e.setContent(o.getItem(t+"draft"),{format:"raw"}),u(e))},y=function(e){var t=d(e);r.setEditorInterval(e,function(){v(e)},t)},w=function(e){e.undoManager.transact(function(){b(e),h(e)}),e.focus()},x=tinymce.util.Tools.resolve("tinymce.EditorManager"),C=function(n){return function(e){e.setDisabled(!p(n));function t(){return e.setDisabled(!p(n))}return n.on("StoreDraft RestoreDraft RemoveDraft",t),function(){return n.off("StoreDraft RestoreDraft RemoveDraft",t)}}};e.add("autosave",function(e){var t,n;return e.editorManager.on("BeforeUnload",function(e){var t;i.each(x.get(),function(e){e.plugins.autosave&&e.plugins.autosave.storeDraft(),!t&&e.isDirty()&&l(e)&&(t=e.translate("You have unsaved changes are you sure you want to navigate away?"))}),t&&(e.preventDefault(),e.returnValue=t)}),y(t=e),t.ui.registry.addButton("restoredraft",{tooltip:"Restore last draft",icon:"restore-draft",onAction:function(){w(t)},onSetup:C(t)}),t.ui.registry.addMenuItem("restoredraft",{text:"Restore last draft",icon:"restore-draft",onAction:function(){w(t)},onSetup:C(t)}),e.on("init",function(){e.getParam("autosave_restore_when_empty",!1)&&e.dom.isEmpty(e.getBody())&&b(e)}),n=e,{hasDraft:function(){return p(n)},storeDraft:function(){return v(n)},restoreDraft:function(){return b(n)},removeDraft:function(e){return h(n,e)},isEmpty:function(e){return g(n,e)}}})}(),function(){function t(n){function e(e,t){n=n.replace(e,t)}return n=r.trim(n),e(/<a.*?href=\"(.*?)\".*?>(.*?)<\/a>/gi,"[url=$1]$2[/url]"),e(/<font.*?color=\"(.*?)\".*?class=\"codeStyle\".*?>(.*?)<\/font>/gi,"[code][color=$1]$2[/color][/code]"),e(/<font.*?color=\"(.*?)\".*?class=\"quoteStyle\".*?>(.*?)<\/font>/gi,"[quote][color=$1]$2[/color][/quote]"),e(/<font.*?class=\"codeStyle\".*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[code][color=$1]$2[/color][/code]"),e(/<font.*?class=\"quoteStyle\".*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[quote][color=$1]$2[/color][/quote]"),e(/<span style=\"color: ?(.*?);\">(.*?)<\/span>/gi,"[color=$1]$2[/color]"),e(/<font.*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[color=$1]$2[/color]"),e(/<span style=\"font-size:(.*?);\">(.*?)<\/span>/gi,"[size=$1]$2[/size]"),e(/<font>(.*?)<\/font>/gi,"$1"),e(/<img.*?src=\"(.*?)\".*?\/>/gi,"[img]$1[/img]"),e(/<span class=\"codeStyle\">(.*?)<\/span>/gi,"[code]$1[/code]"),e(/<span class=\"quoteStyle\">(.*?)<\/span>/gi,"[quote]$1[/quote]"),e(/<strong class=\"codeStyle\">(.*?)<\/strong>/gi,"[code][b]$1[/b][/code]"),e(/<strong class=\"quoteStyle\">(.*?)<\/strong>/gi,"[quote][b]$1[/b][/quote]"),e(/<em class=\"codeStyle\">(.*?)<\/em>/gi,"[code][i]$1[/i][/code]"),e(/<em class=\"quoteStyle\">(.*?)<\/em>/gi,"[quote][i]$1[/i][/quote]"),e(/<u class=\"codeStyle\">(.*?)<\/u>/gi,"[code][u]$1[/u][/code]"),e(/<u class=\"quoteStyle\">(.*?)<\/u>/gi,"[quote][u]$1[/u][/quote]"),e(/<\/(strong|b)>/gi,"[/b]"),e(/<(strong|b)>/gi,"[b]"),e(/<\/(em|i)>/gi,"[/i]"),e(/<(em|i)>/gi,"[i]"),e(/<\/u>/gi,"[/u]"),e(/<span style=\"text-decoration: ?underline;\">(.*?)<\/span>/gi,"[u]$1[/u]"),e(/<u>/gi,"[u]"),e(/<blockquote[^>]*>/gi,"[quote]"),e(/<\/blockquote>/gi,"[/quote]"),e(/<br \/>/gi,"\n"),e(/<br\/>/gi,"\n"),e(/<br>/gi,"\n"),e(/<p>/gi,""),e(/<\/p>/gi,"\n"),e(/&nbsp;|\u00a0/gi," "),e(/&quot;/gi,'"'),e(/&lt;/gi,"<"),e(/&gt;/gi,">"),e(/&amp;/gi,"&"),n}function n(n){function e(e,t){n=n.replace(e,t)}return n=r.trim(n),e(/\n/gi,"<br />"),e(/\[b\]/gi,"<strong>"),e(/\[\/b\]/gi,"</strong>"),e(/\[i\]/gi,"<em>"),e(/\[\/i\]/gi,"</em>"),e(/\[u\]/gi,"<u>"),e(/\[\/u\]/gi,"</u>"),e(/\[url=([^\]]+)\](.*?)\[\/url\]/gi,'<a href="$1">$2</a>'),e(/\[url\](.*?)\[\/url\]/gi,'<a href="$1">$1</a>'),e(/\[img\](.*?)\[\/img\]/gi,'<img src="$1" />'),e(/\[color=(.*?)\](.*?)\[\/color\]/gi,'<font color="$1">$2</font>'),e(/\[code\](.*?)\[\/code\]/gi,'<span class="codeStyle">$1</span>&nbsp;'),e(/\[quote.*?\](.*?)\[\/quote\]/gi,'<span class="quoteStyle">$1</span>&nbsp;'),n}var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),r=tinymce.util.Tools.resolve("tinymce.util.Tools");e.add("bbcode",function(e){e.on("BeforeSetContent",function(e){e.content=n(e.content)}),e.on("PostProcess",function(e){e.set&&(e.content=n(e.content)),e.get&&(e.content=t(e.content))})})}(),function(){function i(e){return function(){return e}}function e(e){return e}function t(){return d}var n,r,o=tinymce.util.Tools.resolve("tinymce.PluginManager"),u=function(e,t){return e.fire("insertCustomChar",{chr:t})},c=function(e,t){t=u(e,t).chr;e.execCommand("mceInsertContent",!1,t)},a=function(e){return t=typeof(e=e),(null===e?"null":"object"==t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"==t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t)===n;var t},s=function(e){return r===e},l=i(!(n="array")),f=i(!(r=null)),d={fold:function(e,t){return e()},isSome:l,isNone:f,getOr:e,getOrThunk:m,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:i(null),getOrUndefined:i(void 0),or:e,orThunk:m,map:t,each:function(){},bind:t,exists:l,forall:f,filter:function(){return d},toArray:function(){return[]},toString:i("none()")};function m(e){return e()}function g(n){function e(){return o}function t(e){return e(n)}var r=i(n),o={fold:function(e,t){return t(n)},isSome:f,isNone:l,getOr:r,getOrThunk:r,getOrDie:r,getOrNull:r,getOrUndefined:r,or:e,orThunk:e,map:function(e){return g(e(n))},each:function(e){e(n)},bind:t,exists:t,forall:t,filter:function(e){return e(n)?o:d},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return o}var p={some:g,none:t,from:function(e){return null==e?d:g(e)}},h=Array.prototype.push,v=function(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o)}return r},b=function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)},y=function(e,t,n){for(var r=0,o=e.length;r<o;r++){var i=e[r];if(t(i,r))return p.some(i);if(n(i,r))break}return p.none()},w=function(e,t){return y(e,t,l)},x=function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!a(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);h.apply(t,e[n])}return t},C=function(e,t){return x(v(e,t))},S=tinymce.util.Tools.resolve("tinymce.util.Tools"),k=function(e){return e.getParam("charmap")},T=function(e){return e.getParam("charmap_append")},O=S.isArray,E="User Defined",P=function(){return[{name:"Currency",characters:[[36,"dollar sign"],[162,"cent sign"],[8364,"euro sign"],[163,"pound sign"],[165,"yen sign"],[164,"currency sign"],[8352,"euro-currency sign"],[8353,"colon sign"],[8354,"cruzeiro sign"],[8355,"french franc sign"],[8356,"lira sign"],[8357,"mill sign"],[8358,"naira sign"],[8359,"peseta sign"],[8360,"rupee sign"],[8361,"won sign"],[8362,"new sheqel sign"],[8363,"dong sign"],[8365,"kip sign"],[8366,"tugrik sign"],[8367,"drachma sign"],[8368,"german penny symbol"],[8369,"peso sign"],[8370,"guarani sign"],[8371,"austral sign"],[8372,"hryvnia sign"],[8373,"cedi sign"],[8374,"livre tournois sign"],[8375,"spesmilo sign"],[8376,"tenge sign"],[8377,"indian rupee sign"],[8378,"turkish lira sign"],[8379,"nordic mark sign"],[8380,"manat sign"],[8381,"ruble sign"],[20870,"yen character"],[20803,"yuan character"],[22291,"yuan character, in hong kong and taiwan"],[22278,"yen/yuan character variant one"]]},{name:"Text",characters:[[169,"copyright sign"],[174,"registered sign"],[8482,"trade mark sign"],[8240,"per mille sign"],[181,"micro sign"],[183,"middle dot"],[8226,"bullet"],[8230,"three dot leader"],[8242,"minutes / feet"],[8243,"seconds / inches"],[167,"section sign"],[182,"paragraph sign"],[223,"sharp s / ess-zed"]]},{name:"Quotations",characters:[[8249,"single left-pointing angle quotation mark"],[8250,"single right-pointing angle quotation mark"],[171,"left pointing guillemet"],[187,"right pointing guillemet"],[8216,"left single quotation mark"],[8217,"right single quotation mark"],[8220,"left double quotation mark"],[8221,"right double quotation mark"],[8218,"single low-9 quotation mark"],[8222,"double low-9 quotation mark"],[60,"less-than sign"],[62,"greater-than sign"],[8804,"less-than or equal to"],[8805,"greater-than or equal to"],[8211,"en dash"],[8212,"em dash"],[175,"macron"],[8254,"overline"],[164,"currency sign"],[166,"broken bar"],[168,"diaeresis"],[161,"inverted exclamation mark"],[191,"turned question mark"],[710,"circumflex accent"],[732,"small tilde"],[176,"degree sign"],[8722,"minus sign"],[177,"plus-minus sign"],[247,"division sign"],[8260,"fraction slash"],[215,"multiplication sign"],[185,"superscript one"],[178,"superscript two"],[179,"superscript three"],[188,"fraction one quarter"],[189,"fraction one half"],[190,"fraction three quarters"]]},{name:"Mathematical",characters:[[402,"function / florin"],[8747,"integral"],[8721,"n-ary sumation"],[8734,"infinity"],[8730,"square root"],[8764,"similar to"],[8773,"approximately equal to"],[8776,"almost equal to"],[8800,"not equal to"],[8801,"identical to"],[8712,"element of"],[8713,"not an element of"],[8715,"contains as member"],[8719,"n-ary product"],[8743,"logical and"],[8744,"logical or"],[172,"not sign"],[8745,"intersection"],[8746,"union"],[8706,"partial differential"],[8704,"for all"],[8707,"there exists"],[8709,"diameter"],[8711,"backward difference"],[8727,"asterisk operator"],[8733,"proportional to"],[8736,"angle"]]},{name:"Extended Latin",characters:[[192,"A - grave"],[193,"A - acute"],[194,"A - circumflex"],[195,"A - tilde"],[196,"A - diaeresis"],[197,"A - ring above"],[256,"A - macron"],[198,"ligature AE"],[199,"C - cedilla"],[200,"E - grave"],[201,"E - acute"],[202,"E - circumflex"],[203,"E - diaeresis"],[274,"E - macron"],[204,"I - grave"],[205,"I - acute"],[206,"I - circumflex"],[207,"I - diaeresis"],[298,"I - macron"],[208,"ETH"],[209,"N - tilde"],[210,"O - grave"],[211,"O - acute"],[212,"O - circumflex"],[213,"O - tilde"],[214,"O - diaeresis"],[216,"O - slash"],[332,"O - macron"],[338,"ligature OE"],[352,"S - caron"],[217,"U - grave"],[218,"U - acute"],[219,"U - circumflex"],[220,"U - diaeresis"],[362,"U - macron"],[221,"Y - acute"],[376,"Y - diaeresis"],[562,"Y - macron"],[222,"THORN"],[224,"a - grave"],[225,"a - acute"],[226,"a - circumflex"],[227,"a - tilde"],[228,"a - diaeresis"],[229,"a - ring above"],[257,"a - macron"],[230,"ligature ae"],[231,"c - cedilla"],[232,"e - grave"],[233,"e - acute"],[234,"e - circumflex"],[235,"e - diaeresis"],[275,"e - macron"],[236,"i - grave"],[237,"i - acute"],[238,"i - circumflex"],[239,"i - diaeresis"],[299,"i - macron"],[240,"eth"],[241,"n - tilde"],[242,"o - grave"],[243,"o - acute"],[244,"o - circumflex"],[245,"o - tilde"],[246,"o - diaeresis"],[248,"o slash"],[333,"o macron"],[339,"ligature oe"],[353,"s - caron"],[249,"u - grave"],[250,"u - acute"],[251,"u - circumflex"],[252,"u - diaeresis"],[363,"u - macron"],[253,"y - acute"],[254,"thorn"],[255,"y - diaeresis"],[563,"y - macron"],[913,"Alpha"],[914,"Beta"],[915,"Gamma"],[916,"Delta"],[917,"Epsilon"],[918,"Zeta"],[919,"Eta"],[920,"Theta"],[921,"Iota"],[922,"Kappa"],[923,"Lambda"],[924,"Mu"],[925,"Nu"],[926,"Xi"],[927,"Omicron"],[928,"Pi"],[929,"Rho"],[931,"Sigma"],[932,"Tau"],[933,"Upsilon"],[934,"Phi"],[935,"Chi"],[936,"Psi"],[937,"Omega"],[945,"alpha"],[946,"beta"],[947,"gamma"],[948,"delta"],[949,"epsilon"],[950,"zeta"],[951,"eta"],[952,"theta"],[953,"iota"],[954,"kappa"],[955,"lambda"],[956,"mu"],[957,"nu"],[958,"xi"],[959,"omicron"],[960,"pi"],[961,"rho"],[962,"final sigma"],[963,"sigma"],[964,"tau"],[965,"upsilon"],[966,"phi"],[967,"chi"],[968,"psi"],[969,"omega"]]},{name:"Symbols",characters:[[8501,"alef symbol"],[982,"pi symbol"],[8476,"real part symbol"],[978,"upsilon - hook symbol"],[8472,"Weierstrass p"],[8465,"imaginary part"]]},{name:"Arrows",characters:[[8592,"leftwards arrow"],[8593,"upwards arrow"],[8594,"rightwards arrow"],[8595,"downwards arrow"],[8596,"left right arrow"],[8629,"carriage return"],[8656,"leftwards double arrow"],[8657,"upwards double arrow"],[8658,"rightwards double arrow"],[8659,"downwards double arrow"],[8660,"left right double arrow"],[8756,"therefore"],[8834,"subset of"],[8835,"superset of"],[8836,"not a subset of"],[8838,"subset of or equal to"],[8839,"superset of or equal to"],[8853,"circled plus"],[8855,"circled times"],[8869,"perpendicular"],[8901,"dot operator"],[8968,"left ceiling"],[8969,"right ceiling"],[8970,"left floor"],[8971,"right floor"],[9001,"left-pointing angle bracket"],[9002,"right-pointing angle bracket"],[9674,"lozenge"],[9824,"black spade suit"],[9827,"black club suit"],[9829,"black heart suit"],[9830,"black diamond suit"],[8194,"en space"],[8195,"em space"],[8201,"thin space"],[8204,"zero width non-joiner"],[8205,"zero width joiner"],[8206,"left-to-right mark"],[8207,"right-to-left mark"]]}]},I=function(e){return S.grep(e,function(e){return O(e)&&2===e.length})},_=function(e){return O(e)?I(e):"function"==typeof e?e():[]},L=function(e,t){var n=k(e),n=(n&&(t=[{name:E,characters:_(n)}]),T(e));return n?(e=S.grep(t,function(e){return e.name===E})).length?(e[0].characters=[].concat(e[0].characters).concat(_(n)),t):t.concat({name:E,characters:_(n)}):t},A=function(e){e=L(e,P());return 1<e.length?[{name:"All",characters:C(e,function(e){return e.characters})}].concat(e):e},D=function(e){var t=e;return{get:function(){return t},set:function(e){t=e}}},F=function(n,r){function o(){s(i)||(clearTimeout(i),i=null)}var i=null;return{cancel:o,throttle:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];o(),i=setTimeout(function(){i=null,n.apply(null,e)},r)}}},M=String.fromCodePoint,N=function(e,t){return-1!==e.indexOf(t)},R=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(M)return M.apply(void 0,e);for(var n=[],r="",o=0,i=e.length;o!==i;++o){var u=+e[o];if(!(u<1114111&&u>>>0==u))throw RangeError("Invalid code point: "+u);16383<=(u<=65535?n.push(u):n.push(55296+((u-=65536)>>10),u%1024+56320))&&(r+=String.fromCharCode.apply(null,n),n.length=0)}return r+String.fromCharCode.apply(null,n)},H=function(e,t,n){return!!N(R(e).toLowerCase(),n)||N(t.toLowerCase(),n)||N(t.toLowerCase().replace(/\s+/g,""),n)},z=function(e,t){var n=[],r=t.toLowerCase();return b(e.characters,function(e){H(e[0],e[1],r)&&n.push(e)}),v(n,function(e){return{text:e[1],value:R(e[0]),icon:R(e[0])}})},B="pattern",V=function(n,o){var t=function(){return[{label:"Search",type:"input",name:B},{type:"collection",name:"results"}]},i=1===o.length?D(E):D("All"),r=F(function(e){var t,n,r=e.getData().pattern;t=e,n=r,w(o,function(e){return e.name===i.get()}).each(function(e){e=z(e,n);t.setData({results:e})})},40),e=1===o.length?{type:"panel",items:t()}:{type:"tabpanel",tabs:v(o,function(e){return{title:e.name,name:e.name,items:t()}})},u={pattern:"",results:z(o[0],"")};n.windowManager.open({title:"Special Character",size:"normal",body:e,buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:u,onAction:function(e,t){"results"===t.name&&(c(n,t.value),e.close())},onTabChange:function(e,t){i.set(t.newTabName),r.throttle(e)},onChange:function(e,t){t.name===B&&r.throttle(e)}}).focus(B)},j=tinymce.util.Tools.resolve("tinymce.util.Promise");o.add("charmap",function(e){var t,n,r,o,i,u,a=A(e);return n=a,(t=e).addCommand("mceShowCharmap",function(){V(t,n)}),(r=e).ui.registry.addButton("charmap",{icon:"insert-character",tooltip:"Special character",onAction:function(){return r.execCommand("mceShowCharmap")}}),r.ui.registry.addMenuItem("charmap",{icon:"insert-character",text:"Special character...",onAction:function(){return r.execCommand("mceShowCharmap")}}),o=e,i=a[0],o.ui.registry.addAutocompleter("charmap",{ch:":",columns:"auto",minChars:2,fetch:function(n,e){return new j(function(e,t){e(z(i,n))})},onAction:function(e,t,n){o.selection.setRng(t),o.insertContent(n),e.hide()}}),u=e,{getCharMap:function(){return A(u)},insertChar:function(e){c(u,e)}}})}(),function(){var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=function(e,t){e.focus(),e.undoManager.transact(function(){e.setContent(t)}),e.selection.setCursorLocation(),e.nodeChanged()},r=function(e){return e.getContent({source_view:!0})},o=function(t){var e=r(t);t.windowManager.open({title:"Source Code",size:"large",body:{type:"panel",items:[{type:"textarea",name:"code"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{code:e},onSubmit:function(e){n(t,e.getData().code),e.close()}})};e.add("code",function(e){var t,n;function r(){return n.execCommand("mceCodeEditor")}return(t=e).addCommand("mceCodeEditor",function(){o(t)}),(n=e).ui.registry.addButton("code",{icon:"sourcecode",tooltip:"Source code",onAction:r}),n.ui.registry.addMenuItem("code",{icon:"sourcecode",text:"Source code",onAction:r}),{}})}(),function(){function e(){}function t(e){return e}function n(){return c}var r=tinymce.util.Tools.resolve("tinymce.PluginManager"),i=function(e){return function(){return e}},u=i(!1),a=i(!0),c={fold:function(e,t){return e()},isSome:u,isNone:a,getOr:b=t,getOrThunk:o,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:i(null),getOrUndefined:i(void 0),or:b,orThunk:o,map:n,each:e,bind:n,exists:u,forall:a,filter:function(){return c},toArray:function(){return[]},toString:i("none()")};function o(e){return e()}function s(n){function e(){return o}function t(e){return e(n)}var r=i(n),o={fold:function(e,t){return t(n)},isSome:a,isNone:u,getOr:r,getOrThunk:r,getOrDie:r,getOrNull:r,getOrUndefined:r,or:e,orThunk:e,map:function(e){return s(e(n))},each:function(e){e(n)},bind:t,exists:t,forall:t,filter:function(e){return e(n)?o:c},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return o}var l={some:s,none:n,from:function(e){return null==e?c:s(e)}},f=function(e,t){return 0<=t&&t<e.length?l.some(e[t]):l.none()},d=function(e){return f(e,0)},m=function(e,t){return e?l.some(t):l.none()},g=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),p=function(e){return e&&"PRE"===e.nodeName&&-1!==e.className.indexOf("language-")},h=function(n){return function(e,t){return n(t)}},v="undefined"!=typeof window?window:Function("return this;")(),b={},y={exports:b},I={},w=(!function(e,t,n){var r,o,i=window.Prism;window.Prism={manual:!0},r=this,o=function(){var c,n,t,D,m,e,r,o,i,u,a,s,l,f,d,g,p,h,v,b,y,w,x,C="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==I?I:"undefined"!=typeof self?self:{},S={exports:{}};function M(e,t,n,r){this.type=e,this.content=t,this.alias=n,this.length=0|(r||"").length}function N(e,t,n,r){e.lastIndex=t;t=e.exec(n);return t&&r&&t[1]&&(e=t[1].length,t.index+=e,t[0]=t[0].slice(e)),t}function k(){var e={value:null,prev:null,next:null},t={value:null,prev:e,next:null};e.next=t,this.head=e,this.tail=t,this.length=0}function R(e,t,n){var r=t.next,n={value:n,prev:t,next:r};return t.next=n,r.prev=n,e.length++,n}function P(e,t,n){for(var r=t.next,o=0;o<n&&r!==e.tail;o++)r=r.next;(t.next=r).prev=t,e.length-=o}function T(){D.manual||D.highlightAll()}function O(e,t){return"___"+e.toUpperCase()+t+"___"}function E(e,n){return e.replace(/<<(\d+)>>/g,function(e,t){return"(?:"+n[+t]+")"})}function _(e,t,n){return RegExp(E(e,t),n||"")}function A(e,t){for(var n=0;n<t;n++)e=e.replace(/<<self>>/g,function(){return"(?:"+e+")"});return e.replace(/<<self>>/g,"[^\\s\\S]")}function z(e){return"\\b(?:"+e.trim().replace(/ /g,"|")+")\\b"}function B(e,t){return{interpolation:{pattern:_(/((?:^|[^{])(?:\{\{)*)<<0>>/.source,[e]),lookbehind:!0,inside:{"format-string":{pattern:_(/(^\{(?:(?![}:])<<0>>)*)<<1>>(?=\}$)/.source,[t,i]),lookbehind:!0,inside:{punctuation:/^:/}},punctuation:/^\{|\}$/,expression:{pattern:/[\s\S]+/,alias:"language-csharp",inside:o.languages.csharp}}},string:/[\s\S]+/}}return d=S,p="undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{},n=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,t=0,l={},D={manual:(c=p).Prism&&c.Prism.manual,disableWorkerMessageHandler:c.Prism&&c.Prism.disableWorkerMessageHandler,util:{encode:function e(t){return t instanceof M?new M(t.type,e(t.content),t.alias):Array.isArray(t)?t.map(e):t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).slice(8,-1)},objId:function(e){return e.__id||Object.defineProperty(e,"__id",{value:++t}),e.__id},clone:function n(e,r){var o,t;switch(r=r||{},D.util.type(e)){case"Object":if(t=D.util.objId(e),r[t])return r[t];for(var i in o={},r[t]=o,e)e.hasOwnProperty(i)&&(o[i]=n(e[i],r));return o;case"Array":return(t=D.util.objId(e),r[t])?r[t]:(o=[],r[t]=o,e.forEach(function(e,t){o[t]=n(e,r)}),o);default:return e}},getLanguage:function(e){for(;e;){var t=n.exec(e.className);if(t)return t[1].toLowerCase();e=e.parentElement}return"none"},setLanguage:function(e,t){e.className=e.className.replace(RegExp(n.source,"gi"),""),e.classList.add("language-"+t)},currentScript:function(){if("undefined"==typeof document)return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(e){var t=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(e.stack)||[])[1];if(t){var n,r=document.getElementsByTagName("script");for(n in r)if(r[n].src==t)return r[n]}return null}},isActive:function(e,t,n){for(var r="no-"+t;e;){var o=e.classList;if(o.contains(t))return!0;if(o.contains(r))return!1;e=e.parentElement}return!!n}},languages:{plain:l,plaintext:l,text:l,txt:l,extend:function(e,t){var n,r=D.util.clone(D.languages[e]);for(n in t)r[n]=t[n];return r},insertBefore:function(n,e,t,r){var o,i=(r=r||D.languages)[n],u={};for(o in i)if(i.hasOwnProperty(o)){if(o==e)for(var a in t)t.hasOwnProperty(a)&&(u[a]=t[a]);t.hasOwnProperty(o)||(u[o]=i[o])}var c=r[n];return r[n]=u,D.languages.DFS(D.languages,function(e,t){t===c&&e!=n&&(this[e]=u)}),u},DFS:function e(t,n,r,o){o=o||{};var i,u,a,c=D.util.objId;for(i in t)t.hasOwnProperty(i)&&(n.call(t,i,t[i],r||i),u=t[i],"Object"!==(a=D.util.type(u))||o[c(u)]?"Array"!==a||o[c(u)]||(o[c(u)]=!0,e(u,n,i,o)):(o[c(u)]=!0,e(u,n,null,o)))}},plugins:{},highlightAll:function(e,t){D.highlightAllUnder(document,e,t)},highlightAllUnder:function(e,t,n){var r={callback:n,container:e,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};D.hooks.run("before-highlightall",r),r.elements=Array.prototype.slice.apply(r.container.querySelectorAll(r.selector)),D.hooks.run("before-all-elements-highlight",r);for(var o,i=0;o=r.elements[i++];)D.highlightElement(o,!0===t,r.callback)},highlightElement:function(e,t,n){var r=D.util.getLanguage(e),o=D.languages[r],i=(D.util.setLanguage(e,r),e.parentElement);i&&"pre"===i.nodeName.toLowerCase()&&D.util.setLanguage(i,r);var u={element:e,language:r,grammar:o,code:e.textContent};function a(e){u.highlightedCode=e,D.hooks.run("before-insert",u),u.element.innerHTML=u.highlightedCode,D.hooks.run("after-highlight",u),D.hooks.run("complete",u),n&&n.call(u.element)}D.hooks.run("before-sanity-check",u),(i=u.element.parentElement)&&"pre"===i.nodeName.toLowerCase()&&!i.hasAttribute("tabindex")&&i.setAttribute("tabindex","0"),u.code?(D.hooks.run("before-highlight",u),u.grammar?t&&c.Worker?((r=new Worker(D.filename)).onmessage=function(e){a(e.data)},r.postMessage(JSON.stringify({language:u.language,code:u.code,immediateClose:!0}))):a(D.highlight(u.code,u.grammar,u.language)):a(D.util.encode(u.code))):(D.hooks.run("complete",u),n&&n.call(u.element))},highlight:function(e,t,n){e={code:e,grammar:t,language:n};if(D.hooks.run("before-tokenize",e),e.grammar)return e.tokens=D.tokenize(e.code,e.grammar),D.hooks.run("after-tokenize",e),M.stringify(D.util.encode(e.tokens),e.language);throw new Error('The language "'+e.language+'" has no grammar.')},tokenize:function(e,t){var n=t.rest;if(n){for(var r in n)t[r]=n[r];delete t.rest}for(var o=new k,i=(R(o,o.head,e),!function e(t,n,r,o,i,u){for(var a in r)if(r.hasOwnProperty(a)&&r[a]){var c=r[a];c=Array.isArray(c)?c:[c];for(var s=0;s<c.length;++s){if(u&&u.cause==a+","+s)return;for(var l,f=c[s],d=f.inside,m=!!f.lookbehind,g=!!f.greedy,p=f.alias,h=(g&&!f.pattern.global&&(l=f.pattern.toString().match(/[imsuy]*$/)[0],f.pattern=RegExp(f.pattern.source,l+"g")),f.pattern||f),v=o.next,b=i;v!==n.tail&&!(u&&b>=u.reach);b+=v.value.length,v=v.next){var y=v.value;if(n.length>t.length)return;if(!(y instanceof M)){var w,x=1;if(g){if(!(w=N(h,b,t,m))||w.index>=t.length)break;var C=w.index,S=w.index+w[0].length,k=b;for(k+=v.value.length;k<=C;)v=v.next,k+=v.value.length;if(k-=v.value.length,b=k,v.value instanceof M)continue;for(var T=v;T!==n.tail&&(k<S||"string"==typeof T.value);T=T.next)x++,k+=T.value.length;x--,y=t.slice(b,k),w.index-=b}else if(!(w=N(h,0,y,m)))continue;var C=w.index,O=w[0],E=y.slice(0,C),_=y.slice(C+O.length),y=b+y.length,A=(u&&y>u.reach&&(u.reach=y),v.prev),E=(E&&(A=R(n,A,E),b+=E.length),P(n,A,x),new M(a,d?D.tokenize(O,d):O,p,O));v=R(n,A,E),_&&R(n,v,_),1<x&&(O={cause:a+","+s,reach:y},e(t,n,r,v.prev,b,O),u)&&O.reach>u.reach&&(u.reach=O.reach)}}}}}(e,o,t,o.head,0),o),u=[],a=i.head.next;a!==i.tail;)u.push(a.value),a=a.next;return u},hooks:{all:{},add:function(e,t){var n=D.hooks.all;n[e]=n[e]||[],n[e].push(t)},run:function(e,t){var n=D.hooks.all[e];if(n&&n.length)for(var r,o=0;r=n[o++];)r(t)}},Token:M},c.Prism=D,M.stringify=function t(e,n){if("string"==typeof e)return e;var r;if(Array.isArray(e))return r="",e.forEach(function(e){r+=t(e,n)}),r;var o,i={type:e.type,content:t(e.content,n),tag:"span",classes:["token",e.type],attributes:{},language:n},e=e.alias,u=(e&&(Array.isArray(e)?Array.prototype.push.apply(i.classes,e):i.classes.push(e)),D.hooks.run("wrap",i),"");for(o in i.attributes)u+=" "+o+'="'+(i.attributes[o]||"").replace(/"/g,"&quot;")+'"';return"<"+i.tag+' class="'+i.classes.join(" ")+'"'+u+">"+i.content+"</"+i.tag+">"},c.document?((l=D.util.currentScript())&&(D.filename=l.src,l.hasAttribute("data-manual"))&&(D.manual=!0),D.manual||("loading"===(p=document.readyState)||"interactive"===p&&l&&l.defer?document.addEventListener("DOMContentLoaded",T):window.requestAnimationFrame?window.requestAnimationFrame(T):window.setTimeout(T,16))):c.addEventListener&&!D.disableWorkerMessageHandler&&c.addEventListener("message",function(e){var e=JSON.parse(e.data),t=e.language,n=e.code,e=e.immediateClose;c.postMessage(D.highlight(n,D.languages[t],t)),e&&c.close()},!1),p=D,d.exports&&(d.exports=p),void 0!==C&&(C.Prism=p),Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},m=Prism,Object.defineProperties(m.languages["markup-templating"]={},{buildPlaceholders:{value:function(r,o,e,i){var u;r.language===o&&(u=r.tokenStack=[],r.code=r.code.replace(e,function(e){if("function"==typeof i&&!i(e))return e;for(var t,n=u.length;-1!==r.code.indexOf(t=O(o,n));)++n;return u[n]=e,t}),r.grammar=m.languages.markup)}},tokenizePlaceholders:{value:function(s,l){var f,d;s.language===l&&s.tokenStack&&(s.grammar=m.languages[l],f=0,d=Object.keys(s.tokenStack),function e(t){for(var n=0;n<t.length&&!(f>=d.length);n++){var r,o,i,u,a,c=t[n];"string"==typeof c||c.content&&"string"==typeof c.content?(r=d[f],i=s.tokenStack[r],u="string"==typeof c?c:c.content,r=O(l,r),-1<(a=u.indexOf(r))&&(++f,o=u.substring(0,a),i=new m.Token(l,m.tokenize(i,s.grammar),"language-"+l,i),u=u.substring(a+r.length),a=[],o&&a.push.apply(a,e([o])),a.push(i),u&&a.push.apply(a,e([u])),"string"==typeof c?t.splice.apply(t,[n,1].concat(a)):c.content=a)):c.content&&e(c.content)}return t}(s.tokens))}}}),Prism.languages.c=Prism.languages.extend("clike",{comment:{pattern:/\/\/(?:[^\r\n\\]|\\(?:\r\n?|\n|(?![\r\n])))*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},"class-name":{pattern:/(\b(?:enum|struct)\s+(?:__attribute__\s*\(\([\s\S]*?\)\)\s*)?)\w+|\b[a-z]\w*_t\b/,lookbehind:!0},keyword:/\b(?:_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|__attribute__|asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|inline|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|typeof|union|unsigned|void|volatile|while)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,number:/(?:\b0x(?:[\da-f]+(?:\.[\da-f]*)?|\.[\da-f]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[ful]{0,4}/i,operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|[-+*/%&|^!=<>]=?/}),Prism.languages.insertBefore("c","string",{char:{pattern:/'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n]){0,32}'/,greedy:!0}}),Prism.languages.insertBefore("c","string",{macro:{pattern:/(^[\t ]*)#\s*[a-z](?:[^\r\n\\/]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,greedy:!0,alias:"property",inside:{string:[{pattern:/^(#\s*include\s*)<[^>]+>/,lookbehind:!0},Prism.languages.c.string],char:Prism.languages.c.char,comment:Prism.languages.c.comment,"macro-name":[{pattern:/(^#\s*define\s+)\w+\b(?!\()/i,lookbehind:!0},{pattern:/(^#\s*define\s+)\w+\b(?=\()/i,lookbehind:!0,alias:"function"}],directive:{pattern:/^(#\s*)[a-z]+/,lookbehind:!0,alias:"keyword"},"directive-hash":/^#/,punctuation:/##|\\(?=[\r\n])/,expression:{pattern:/\S[\s\S]*/,inside:Prism.languages.c}}}}),Prism.languages.insertBefore("c","function",{constant:/\b(?:EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|__DATE__|__FILE__|__LINE__|__TIMESTAMP__|__TIME__|__func__|stderr|stdin|stdout)\b/}),delete Prism.languages.c.boolean,l=Prism,e=/\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|char8_t|class|co_await|co_return|co_yield|compl|concept|const|const_cast|consteval|constexpr|constinit|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|final|float|for|friend|goto|if|import|inline|int|int16_t|int32_t|int64_t|int8_t|long|module|mutable|namespace|new|noexcept|nullptr|operator|override|private|protected|public|register|reinterpret_cast|requires|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|uint16_t|uint32_t|uint64_t|uint8_t|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,r=/\b(?!<keyword>)\w+(?:\s*\.\s*\w+)*\b/.source.replace(/<keyword>/g,function(){return e.source}),l.languages.cpp=l.languages.extend("c",{"class-name":[{pattern:RegExp(/(\b(?:class|concept|enum|struct|typename)\s+)(?!<keyword>)\w+/.source.replace(/<keyword>/g,function(){return e.source})),lookbehind:!0},/\b[A-Z]\w*(?=\s*::\s*\w+\s*\()/,/\b[A-Z_]\w*(?=\s*::\s*~\w+\s*\()/i,/\b\w+(?=\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>\s*::\s*\w+\s*\()/],keyword:e,number:{pattern:/(?:\b0b[01']+|\b0x(?:[\da-f']+(?:\.[\da-f']*)?|\.[\da-f']+)(?:p[+-]?[\d']+)?|(?:\b[\d']+(?:\.[\d']*)?|\B\.[\d']+)(?:e[+-]?[\d']+)?)[ful]{0,4}/i,greedy:!0},operator:/>>=?|<<=?|->|--|\+\+|&&|\|\||[?:~]|<=>|[-+*/%&|^!=<>]=?|\b(?:and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/,boolean:/\b(?:false|true)\b/}),l.languages.insertBefore("cpp","string",{module:{pattern:RegExp(/(\b(?:import|module)\s+)/.source+"(?:"+/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|<[^<>\r\n]*>/.source+"|"+/<mod-name>(?:\s*:\s*<mod-name>)?|:\s*<mod-name>/.source.replace(/<mod-name>/g,function(){return r})+")"),lookbehind:!0,greedy:!0,inside:{string:/^[<"][\s\S]+/,operator:/:/,punctuation:/\./}},"raw-string":{pattern:/R"([^()\\ ]{0,16})\([\s\S]*?\)\1"/,alias:"string",greedy:!0}}),l.languages.insertBefore("cpp","keyword",{"generic-function":{pattern:/\b(?!operator\b)[a-z_]\w*\s*<(?:[^<>]|<[^<>]*>)*>(?=\s*\()/i,inside:{function:/^\w+/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:l.languages.cpp}}}}),l.languages.insertBefore("cpp","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}}),l.languages.insertBefore("cpp","class-name",{"base-clause":{pattern:/(\b(?:class|struct)\s+\w+\s*:\s*)[^;{}"'\s]+(?:\s+[^;{}"'\s]+)*(?=\s*[;{])/,lookbehind:!0,greedy:!0,inside:l.languages.extend("cpp",{})}}),l.languages.insertBefore("inside","double-colon",{"class-name":/\b[a-z_]\w*\b(?!\s*::)/i},l.languages.cpp["base-clause"]),o=Prism,d="bool byte char decimal double dynamic float int long object sbyte short string uint ulong ushort var void",C="add alias and ascending async await by descending from(?=\\s*(?:\\w|$)) get global group into init(?=\\s*;) join let nameof not notnull on or orderby partial remove select set unmanaged value when where with(?=\\s*{)",p="abstract as base break case catch checked const continue default delegate do else event explicit extern finally fixed for foreach goto if implicit in internal is lock namespace new null operator out override params private protected public readonly ref return sealed sizeof stackalloc static switch this throw try typeof unchecked unsafe using virtual volatile while yield",s=z(l="class enum interface record struct"),b=RegExp(z(d+" "+l+" "+C+" "+p)),C=z(l+" "+C+" "+p),d=z(d+" "+l+" "+p),l=A(/<(?:[^<>;=+\-*/%&|^]|<<self>>)*>/.source,2),p=A(/\((?:[^()]|<<self>>)*\)/.source,2),h=E(/<<0>>(?:\s*<<1>>)?/.source,[u=/@?\b[A-Za-z_]\w*\b/.source,l]),C=E(/(?!<<0>>)<<1>>(?:\s*\.\s*<<1>>)*/.source,[C,h]),g=E(/<<0>>(?:\s*(?:\?\s*)?<<1>>)*(?:\s*\?)?/.source,[C,w=/\[\s*(?:,\s*)*\]/.source]),v=E(/[^,()<>[\];=+\-*/%&|^]|<<0>>|<<1>>|<<2>>/.source,[l,p,w]),v=E(/\(<<0>>+(?:,<<0>>+)+\)/.source,[v]),v=E(/(?:<<0>>|<<1>>)(?:\s*(?:\?\s*)?<<2>>)*(?:\s*\?)?/.source,[v,C,w]),w={keyword:b,punctuation:/[<>()?,.:[\]]/},y=/'(?:[^\r\n'\\]|\\.|\\[Uux][\da-fA-F]{1,8})'/.source,x=/"(?:\\.|[^\\"\r\n])*"/.source,o.languages.csharp=o.languages.extend("clike",{string:[{pattern:_(/(^|[^$\\])<<0>>/.source,[/@"(?:""|\\[\s\S]|[^\\"])*"(?!")/.source]),lookbehind:!0,greedy:!0},{pattern:_(/(^|[^@$\\])<<0>>/.source,[x]),lookbehind:!0,greedy:!0}],"class-name":[{pattern:_(/(\busing\s+static\s+)<<0>>(?=\s*;)/.source,[C]),lookbehind:!0,inside:w},{pattern:_(/(\busing\s+<<0>>\s*=\s*)<<1>>(?=\s*;)/.source,[u,v]),lookbehind:!0,inside:w},{pattern:_(/(\busing\s+)<<0>>(?=\s*=)/.source,[u]),lookbehind:!0},{pattern:_(/(\b<<0>>\s+)<<1>>/.source,[s,h]),lookbehind:!0,inside:w},{pattern:_(/(\bcatch\s*\(\s*)<<0>>/.source,[C]),lookbehind:!0,inside:w},{pattern:_(/(\bwhere\s+)<<0>>/.source,[u]),lookbehind:!0},{pattern:_(/(\b(?:is(?:\s+not)?|as)\s+)<<0>>/.source,[g]),lookbehind:!0,inside:w},{pattern:_(/\b<<0>>(?=\s+(?!<<1>>|with\s*\{)<<2>>(?:\s*[=,;:{)\]]|\s+(?:in|when)\b))/.source,[v,d,u]),inside:w}],keyword:b,number:/(?:\b0(?:x[\da-f_]*[\da-f]|b[01_]*[01])|(?:\B\.\d+(?:_+\d+)*|\b\d+(?:_+\d+)*(?:\.\d+(?:_+\d+)*)?)(?:e[-+]?\d+(?:_+\d+)*)?)(?:[dflmu]|lu|ul)?\b/i,operator:/>>=?|<<=?|[-=]>|([-+&|])\1|~|\?\?=?|[-+*/%&|^!=<>]=?/,punctuation:/\?\.?|::|[{}[\];(),.:]/}),o.languages.insertBefore("csharp","number",{range:{pattern:/\.\./,alias:"operator"}}),o.languages.insertBefore("csharp","punctuation",{"named-parameter":{pattern:_(/([(,]\s*)<<0>>(?=\s*:)/.source,[u]),lookbehind:!0,alias:"punctuation"}}),o.languages.insertBefore("csharp","class-name",{namespace:{pattern:_(/(\b(?:namespace|using)\s+)<<0>>(?:\s*\.\s*<<0>>)*(?=\s*[;{])/.source,[u]),lookbehind:!0,inside:{punctuation:/\./}},"type-expression":{pattern:_(/(\b(?:default|sizeof|typeof)\s*\(\s*(?!\s))(?:[^()\s]|\s(?!\s)|<<0>>)*(?=\s*\))/.source,[p]),lookbehind:!0,alias:"class-name",inside:w},"return-type":{pattern:_(/<<0>>(?=\s+(?:<<1>>\s*(?:=>|[({]|\.\s*this\s*\[)|this\s*\[))/.source,[v,C]),inside:w,alias:"class-name"},"constructor-invocation":{pattern:_(/(\bnew\s+)<<0>>(?=\s*[[({])/.source,[v]),lookbehind:!0,inside:w,alias:"class-name"},"generic-method":{pattern:_(/<<0>>\s*<<1>>(?=\s*\()/.source,[u,l]),inside:{function:_(/^<<0>>/.source,[u]),generic:{pattern:RegExp(l),alias:"class-name",inside:w}}},"type-list":{pattern:_(/\b((?:<<0>>\s+<<1>>|record\s+<<1>>\s*<<5>>|where\s+<<2>>)\s*:\s*)(?:<<3>>|<<4>>|<<1>>\s*<<5>>|<<6>>)(?:\s*,\s*(?:<<3>>|<<4>>|<<6>>))*(?=\s*(?:where|[{;]|=>|$))/.source,[s,h,u,v,b.source,p,/\bnew\s*\(\s*\)/.source]),lookbehind:!0,inside:{"record-arguments":{pattern:_(/(^(?!new\s*\()<<0>>\s*)<<1>>/.source,[h,p]),lookbehind:!0,greedy:!0,inside:o.languages.csharp},keyword:b,"class-name":{pattern:RegExp(v),greedy:!0,inside:w},punctuation:/[,()]/}},preprocessor:{pattern:/(^[\t ]*)#.*/m,lookbehind:!0,alias:"property",inside:{directive:{pattern:/(#)\b(?:define|elif|else|endif|endregion|error|if|line|nullable|pragma|region|undef|warning)\b/,lookbehind:!0,alias:"keyword"}}}}),d=E(/\/(?![*/])|\/\/[^\r\n]*[\r\n]|\/\*(?:[^*]|\*(?!\/))*\*\/|<<0>>/.source,[g=x+"|"+y]),l=A(E(/[^"'/()]|<<0>>|\(<<self>>*\)/.source,[d]),2),s=/\b(?:assembly|event|field|method|module|param|property|return|type)\b/.source,u=E(/<<0>>(?:\s*\(<<1>>*\))?/.source,[C,l]),o.languages.insertBefore("csharp","class-name",{attribute:{pattern:_(/((?:^|[^\s\w>)?])\s*\[\s*)(?:<<0>>\s*:\s*)?<<1>>(?:\s*,\s*<<1>>)*(?=\s*\])/.source,[s,u]),lookbehind:!0,greedy:!0,inside:{target:{pattern:_(/^<<0>>(?=\s*:)/.source,[s]),alias:"keyword"},"attribute-arguments":{pattern:_(/\(<<0>>*\)/.source,[l]),inside:o.languages.csharp},"class-name":{pattern:RegExp(C),inside:{punctuation:/\./}},punctuation:/[:,]/}}}),i=/:[^}\r\n]+/.source,h=A(E(/[^"'/()]|<<0>>|\(<<self>>*\)/.source,[d]),2),p=E(/\{(?!\{)(?:(?![}:])<<0>>)*<<1>>?\}/.source,[h,i]),b=A(E(/[^"'/()]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|<<0>>|\(<<self>>*\)/.source,[g]),2),v=E(/\{(?!\{)(?:(?![}:])<<0>>)*<<1>>?\}/.source,[b,i]),o.languages.insertBefore("csharp","string",{"interpolation-string":[{pattern:_(/(^|[^\\])(?:\$@|@\$)"(?:""|\\[\s\S]|\{\{|<<0>>|[^\\{"])*"/.source,[p]),lookbehind:!0,greedy:!0,inside:B(p,h)},{pattern:_(/(^|[^@\\])\$"(?:\\.|\{\{|<<0>>|[^\\"{])*"/.source,[v]),lookbehind:!0,greedy:!0,inside:B(v,b)}],char:{pattern:RegExp(y),greedy:!0}}),o.languages.dotnet=o.languages.cs=o.languages.csharp,w=Prism,x=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/,w.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+x.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+x.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+x.source+"$"),alias:"url"}}},selector:{pattern:RegExp("(^|[{}\\s])[^{}\\s](?:[^{};\"'\\s]|\\s+(?![\\s{])|"+x.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:x,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},w.languages.css.atrule.inside.rest=w.languages.css,(x=w.languages.markup)&&(x.tag.addInlined("style","css"),x.tag.addAttribute("style","css")),u=Prism,a=/\b(?:abstract|assert|boolean|break|byte|case|catch|char|class|const|continue|default|do|double|else|enum|exports|extends|final|finally|float|for|goto|if|implements|import|instanceof|int|interface|long|module|native|new|non-sealed|null|open|opens|package|permits|private|protected|provides|public|record(?!\s*[(){}[\]<>=%~.:,;?+\-*/&|^])|requires|return|sealed|short|static|strictfp|super|switch|synchronized|this|throw|throws|to|transient|transitive|try|uses|var|void|volatile|while|with|yield)\b/,s=/(?:[a-z]\w*\s*\.\s*)*(?:[A-Z]\w*\s*\.\s*)*/.source,l={pattern:RegExp(/(^|[^\w.])/.source+s+/[A-Z](?:[\d_A-Z]*[a-z]\w*)?\b/.source),lookbehind:!0,inside:{namespace:{pattern:/^[a-z]\w*(?:\s*\.\s*[a-z]\w*)*(?:\s*\.)?/,inside:{punctuation:/\./}},punctuation:/\./}},u.languages.java=u.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"/,lookbehind:!0,greedy:!0},"class-name":[l,{pattern:RegExp(/(^|[^\w.])/.source+s+/[A-Z]\w*(?=\s+\w+\s*[;,=()]|\s*(?:\[[\s,]*\]\s*)?::\s*new\b)/.source),lookbehind:!0,inside:l.inside},{pattern:RegExp(/(\b(?:class|enum|extends|implements|instanceof|interface|new|record|throws)\s+)/.source+s+/[A-Z]\w*\b/.source),lookbehind:!0,inside:l.inside}],keyword:a,function:[u.languages.clike.function,{pattern:/(::\s*)[a-z_]\w*/,lookbehind:!0}],number:/\b0b[01][01_]*L?\b|\b0x(?:\.[\da-f_p+-]+|[\da-f_]+(?:\.[\da-f_p+-]+)?)\b|(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?\d[\d_]*)?[dfl]?/i,operator:{pattern:/(^|[^.])(?:<<=?|>>>?=?|->|--|\+\+|&&|\|\||::|[?:~]|[-+*/%&|^!=<>]=?)/m,lookbehind:!0},constant:/\b[A-Z][A-Z_\d]+\b/}),u.languages.insertBefore("java","string",{"triple-quoted-string":{pattern:/"""[ \t]*[\r\n](?:(?:"|"")?(?:\\.|[^"\\]))*"""/,greedy:!0,alias:"string"},char:{pattern:/'(?:\\.|[^'\\\r\n]){1,6}'/,greedy:!0}}),u.languages.insertBefore("java","class-name",{annotation:{pattern:/(^|[^.])@\w+(?:\s*\.\s*\w+)*/,lookbehind:!0,alias:"punctuation"},generics:{pattern:/<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&))*>)*>)*>)*>/,inside:{"class-name":l,keyword:a,punctuation:/[<>(),.:]/,operator:/[?&|]/}},import:[{pattern:RegExp(/(\bimport\s+)/.source+s+/(?:[A-Z]\w*|\*)(?=\s*;)/.source),lookbehind:!0,inside:{namespace:l.inside.namespace,punctuation:/\./,operator:/\*/,"class-name":/\w+/}},{pattern:RegExp(/(\bimport\s+static\s+)/.source+s+/(?:\w+|\*)(?=\s*;)/.source),lookbehind:!0,alias:"static",inside:{namespace:l.inside.namespace,static:/\b\w+$/,punctuation:/\./,operator:/\*/,"class-name":/\w+/}}],namespace:{pattern:RegExp(/(\b(?:exports|import(?:\s+static)?|module|open|opens|package|provides|requires|to|transitive|uses|with)\s+)(?!<keyword>)[a-z]\w*(?:\.[a-z]\w*)*\.?/.source.replace(/<keyword>/g,function(){return a.source})),lookbehind:!0,inside:{punctuation:/\./}}}),Prism.languages.javascript=Prism.languages.extend("clike",{"class-name":[Prism.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),Prism.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:Prism.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:Prism.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),Prism.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),Prism.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),Prism.languages.markup&&(Prism.languages.markup.tag.addInlined("script","javascript"),Prism.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),Prism.languages.js=Prism.languages.javascript,Prism.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},Prism.languages.markup.tag.inside["attr-value"].inside.entity=Prism.languages.markup.entity,Prism.languages.markup.doctype.inside["internal-subset"].inside=Prism.languages.markup,Prism.hooks.add("wrap",function(e){"entity"===e.type&&(e.attributes.title=e.content.replace(/&amp;/,"&"))}),Object.defineProperty(Prism.languages.markup.tag,"addInlined",{value:function(e,t){var n={},n=(n["language-"+t]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:Prism.languages[t]},n.cdata=/^<!\[CDATA\[|\]\]>$/i,{"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:n}}),t=(n["language-"+t]={pattern:/[\s\S]+/,inside:Prism.languages[t]},{});t[e]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return e}),"i"),lookbehind:!0,greedy:!0,inside:n},Prism.languages.insertBefore("markup","cdata",t)}}),Object.defineProperty(Prism.languages.markup.tag,"addAttribute",{value:function(e,t){Prism.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+e+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[t,"language-"+t],inside:Prism.languages[t]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),Prism.languages.html=Prism.languages.markup,Prism.languages.mathml=Prism.languages.markup,Prism.languages.svg=Prism.languages.markup,Prism.languages.xml=Prism.languages.extend("markup",{}),Prism.languages.ssml=Prism.languages.xml,Prism.languages.atom=Prism.languages.xml,Prism.languages.rss=Prism.languages.xml,f=Prism,C=/\/\*[\s\S]*?\*\/|\/\/.*|#(?!\[).*/,d=[{pattern:/\b(?:false|true)\b/i,alias:"boolean"},{pattern:/(::\s*)\b[a-z_]\w*\b(?!\s*\()/i,greedy:!0,lookbehind:!0},{pattern:/(\b(?:case|const)\s+)\b[a-z_]\w*(?=\s*[;=])/i,greedy:!0,lookbehind:!0},/\b(?:null)\b/i,/\b[A-Z_][A-Z0-9_]*\b(?!\s*\()/],g=/\b0b[01]+(?:_[01]+)*\b|\b0o[0-7]+(?:_[0-7]+)*\b|\b0x[\da-f]+(?:_[\da-f]+)*\b|(?:\b\d+(?:_\d+)*\.?(?:\d+(?:_\d+)*)?|\B\.\d+)(?:e[+-]?\d+)?/i,p=/<?=>|\?\?=?|\.{3}|\??->|[!=]=?=?|::|\*\*=?|--|\+\+|&&|\|\||<<|>>|[?~]|[/^|%*&<>.+-]=?/,h=/[{}\[\](),:;]/,f.languages.php={delimiter:{pattern:/\?>$|^<\?(?:php(?=\s)|=)?/i,alias:"important"},comment:C,variable:/\$+(?:\w+\b|(?=\{))/,package:{pattern:/(namespace\s+|use\s+(?:function\s+)?)(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,lookbehind:!0,inside:{punctuation:/\\/}},"class-name-definition":{pattern:/(\b(?:class|enum|interface|trait)\s+)\b[a-z_]\w*(?!\\)\b/i,lookbehind:!0,alias:"class-name"},"function-definition":{pattern:/(\bfunction\s+)[a-z_]\w*(?=\s*\()/i,lookbehind:!0,alias:"function"},keyword:[{pattern:/(\(\s*)\b(?:array|bool|boolean|float|int|integer|object|string)\b(?=\s*\))/i,alias:"type-casting",greedy:!0,lookbehind:!0},{pattern:/([(,?]\s*)\b(?:array(?!\s*\()|bool|callable|(?:false|null)(?=\s*\|)|float|int|iterable|mixed|object|self|static|string)\b(?=\s*\$)/i,alias:"type-hint",greedy:!0,lookbehind:!0},{pattern:/(\)\s*:\s*(?:\?\s*)?)\b(?:array(?!\s*\()|bool|callable|(?:false|null)(?=\s*\|)|float|int|iterable|mixed|never|object|self|static|string|void)\b/i,alias:"return-type",greedy:!0,lookbehind:!0},{pattern:/\b(?:array(?!\s*\()|bool|float|int|iterable|mixed|object|string|void)\b/i,alias:"type-declaration",greedy:!0},{pattern:/(\|\s*)(?:false|null)\b|\b(?:false|null)(?=\s*\|)/i,alias:"type-declaration",greedy:!0,lookbehind:!0},{pattern:/\b(?:parent|self|static)(?=\s*::)/i,alias:"static-context",greedy:!0},{pattern:/(\byield\s+)from\b/i,lookbehind:!0},/\bclass\b/i,{pattern:/((?:^|[^\s>:]|(?:^|[^-])>|(?:^|[^:]):)\s*)\b(?:abstract|and|array|as|break|callable|case|catch|clone|const|continue|declare|default|die|do|echo|else|elseif|empty|enddeclare|endfor|endforeach|endif|endswitch|endwhile|enum|eval|exit|extends|final|finally|fn|for|foreach|function|global|goto|if|implements|include|include_once|instanceof|insteadof|interface|isset|list|match|namespace|never|new|or|parent|print|private|protected|public|readonly|require|require_once|return|self|static|switch|throw|trait|try|unset|use|var|while|xor|yield|__halt_compiler)\b/i,lookbehind:!0}],"argument-name":{pattern:/([(,]\s*)\b[a-z_]\w*(?=\s*:(?!:))/i,lookbehind:!0},"class-name":[{pattern:/(\b(?:extends|implements|instanceof|new(?!\s+self|\s+static))\s+|\bcatch\s*\()\b[a-z_]\w*(?!\\)\b/i,greedy:!0,lookbehind:!0},{pattern:/(\|\s*)\b[a-z_]\w*(?!\\)\b/i,greedy:!0,lookbehind:!0},{pattern:/\b[a-z_]\w*(?!\\)\b(?=\s*\|)/i,greedy:!0},{pattern:/(\|\s*)(?:\\?\b[a-z_]\w*)+\b/i,alias:"class-name-fully-qualified",greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/(?:\\?\b[a-z_]\w*)+\b(?=\s*\|)/i,alias:"class-name-fully-qualified",greedy:!0,inside:{punctuation:/\\/}},{pattern:/(\b(?:extends|implements|instanceof|new(?!\s+self\b|\s+static\b))\s+|\bcatch\s*\()(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,alias:"class-name-fully-qualified",greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/\b[a-z_]\w*(?=\s*\$)/i,alias:"type-declaration",greedy:!0},{pattern:/(?:\\?\b[a-z_]\w*)+(?=\s*\$)/i,alias:["class-name-fully-qualified","type-declaration"],greedy:!0,inside:{punctuation:/\\/}},{pattern:/\b[a-z_]\w*(?=\s*::)/i,alias:"static-context",greedy:!0},{pattern:/(?:\\?\b[a-z_]\w*)+(?=\s*::)/i,alias:["class-name-fully-qualified","static-context"],greedy:!0,inside:{punctuation:/\\/}},{pattern:/([(,?]\s*)[a-z_]\w*(?=\s*\$)/i,alias:"type-hint",greedy:!0,lookbehind:!0},{pattern:/([(,?]\s*)(?:\\?\b[a-z_]\w*)+(?=\s*\$)/i,alias:["class-name-fully-qualified","type-hint"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/(\)\s*:\s*(?:\?\s*)?)\b[a-z_]\w*(?!\\)\b/i,alias:"return-type",greedy:!0,lookbehind:!0},{pattern:/(\)\s*:\s*(?:\?\s*)?)(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,alias:["class-name-fully-qualified","return-type"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}}],constant:d,function:{pattern:/(^|[^\\\w])\\?[a-z_](?:[\w\\]*\w)?(?=\s*\()/i,lookbehind:!0,inside:{punctuation:/\\/}},property:{pattern:/(->\s*)\w+/,lookbehind:!0},number:g,operator:p,punctuation:h},v=[{pattern:/<<<'([^']+)'[\r\n](?:.*[\r\n])*?\1;/,alias:"nowdoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<<'[^']+'|[a-z_]\w*;$/i,alias:"symbol",inside:{punctuation:/^<<<'?|[';]$/}}}},{pattern:/<<<(?:"([^"]+)"[\r\n](?:.*[\r\n])*?\1;|([a-z_]\w*)[\r\n](?:.*[\r\n])*?\2;)/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<<(?:"[^"]+"|[a-z_]\w*)|[a-z_]\w*;$/i,alias:"symbol",inside:{punctuation:/^<<<"?|[";]$/}},interpolation:v={pattern:/\{\$(?:\{(?:\{[^{}]+\}|[^{}]+)\}|[^{}])+\}|(^|[^\\{])\$+(?:\w+(?:\[[^\r\n\[\]]+\]|->\w+)?)/,lookbehind:!0,inside:f.languages.php}}},{pattern:/`(?:\\[\s\S]|[^\\`])*`/,alias:"backtick-quoted-string",greedy:!0},{pattern:/'(?:\\[\s\S]|[^\\'])*'/,alias:"single-quoted-string",greedy:!0},{pattern:/"(?:\\[\s\S]|[^\\"])*"/,alias:"double-quoted-string",greedy:!0,inside:{interpolation:v}}],f.languages.insertBefore("php","variable",{string:v,attribute:{pattern:/#\[(?:[^"'\/#]|\/(?![*/])|\/\/.*$|#(?!\[).*$|\/\*(?:[^*]|\*(?!\/))*\*\/|"(?:\\[\s\S]|[^\\"])*"|'(?:\\[\s\S]|[^\\'])*')+\](?=\s*[a-z$#])/im,greedy:!0,inside:{"attribute-content":{pattern:/^(#\[)[\s\S]+(?=\]$)/,lookbehind:!0,inside:{comment:C,string:v,"attribute-class-name":[{pattern:/([^:]|^)\b[a-z_]\w*(?!\\)\b/i,alias:"class-name",greedy:!0,lookbehind:!0},{pattern:/([^:]|^)(?:\\?\b[a-z_]\w*)+/i,alias:["class-name","class-name-fully-qualified"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}}],constant:d,number:g,operator:p,punctuation:h}},delimiter:{pattern:/^#\[|\]$/,alias:"punctuation"}}}}),f.hooks.add("before-tokenize",function(e){/<\?/.test(e.code)&&f.languages["markup-templating"].buildPlaceholders(e,"php",/<\?(?:[^"'/#]|\/(?![*/])|("|')(?:\\[\s\S]|(?!\1)[^\\])*\1|(?:\/\/|#(?!\[))(?:[^?\n\r]|\?(?!>))*(?=$|\?>|[\r\n])|#\[|\/\*(?:[^*]|\*(?!\/))*(?:\*\/|$))*?(?:\?>|$)/g)}),f.hooks.add("after-tokenize",function(e){f.languages["markup-templating"].tokenizePlaceholders(e,"php")}),Prism.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},Prism.languages.python["string-interpolation"].inside.interpolation.inside.rest=Prism.languages.python,Prism.languages.py=Prism.languages.python,(b=Prism).languages.ruby=b.languages.extend("clike",{comment:{pattern:/#.*|^=begin\s[\s\S]*?^=end/m,greedy:!0},"class-name":{pattern:/(\b(?:class|module)\s+|\bcatch\s+\()[\w.\\]+|\b[A-Z_]\w*(?=\s*\.\s*new\b)/,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:BEGIN|END|alias|and|begin|break|case|class|def|define_method|defined|do|each|else|elsif|end|ensure|extend|for|if|in|include|module|new|next|nil|not|or|prepend|private|protected|public|raise|redo|require|rescue|retry|return|self|super|then|throw|undef|unless|until|when|while|yield)\b/,operator:/\.{2,3}|&\.|===|<?=>|[!=]?~|(?:&&|\|\||<<|>>|\*\*|[+\-*/%<>!^&|=])=?|[?:]/,punctuation:/[(){}[\].,;]/}),b.languages.insertBefore("ruby","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}}),y={pattern:/((?:^|[^\\])(?:\\{2})*)#\{(?:[^{}]|\{[^{}]*\})*\}/,lookbehind:!0,inside:{content:{pattern:/^(#\{)[\s\S]+(?=\}$)/,lookbehind:!0,inside:b.languages.ruby},delimiter:{pattern:/^#\{|\}$/,alias:"punctuation"}}},delete b.languages.ruby.function,w="(?:"+[/([^a-zA-Z0-9\s{(\[<=])(?:(?!\1)[^\\]|\\[\s\S])*\1/.source,/\((?:[^()\\]|\\[\s\S]|\((?:[^()\\]|\\[\s\S])*\))*\)/.source,/\{(?:[^{}\\]|\\[\s\S]|\{(?:[^{}\\]|\\[\s\S])*\})*\}/.source,/\[(?:[^\[\]\\]|\\[\s\S]|\[(?:[^\[\]\\]|\\[\s\S])*\])*\]/.source,/<(?:[^<>\\]|\\[\s\S]|<(?:[^<>\\]|\\[\s\S])*>)*>/.source].join("|")+")",x=/(?:"(?:\\.|[^"\\\r\n])*"|(?:\b[a-zA-Z_]\w*|[^\s\0-\x7F]+)[?!]?|\$.)/.source,b.languages.insertBefore("ruby","keyword",{"regex-literal":[{pattern:RegExp(/%r/.source+w+/[egimnosux]{0,6}/.source),greedy:!0,inside:{interpolation:y,regex:/[\s\S]+/}},{pattern:/(^|[^/])\/(?!\/)(?:\[[^\r\n\]]+\]|\\.|[^[/\\\r\n])+\/[egimnosux]{0,6}(?=\s*(?:$|[\r\n,.;})#]))/,lookbehind:!0,greedy:!0,inside:{interpolation:y,regex:/[\s\S]+/}}],variable:/[@$]+[a-zA-Z_]\w*(?:[?!]|\b)/,symbol:[{pattern:RegExp(/(^|[^:]):/.source+x),lookbehind:!0,greedy:!0},{pattern:RegExp(/([\r\n{(,][ \t]*)/.source+x+/(?=:(?!:))/.source),lookbehind:!0,greedy:!0}],"method-definition":{pattern:/(\bdef\s+)\w+(?:\s*\.\s*\w+)?/,lookbehind:!0,inside:{function:/\b\w+$/,keyword:/^self\b/,"class-name":/^\w+/,punctuation:/\./}}}),b.languages.insertBefore("ruby","string",{"string-literal":[{pattern:RegExp(/%[qQiIwWs]?/.source+w),greedy:!0,inside:{interpolation:y,string:/[\s\S]+/}},{pattern:/("|')(?:#\{[^}]+\}|#(?!\{)|\\(?:\r\n|[\s\S])|(?!\1)[^\\#\r\n])*\1/,greedy:!0,inside:{interpolation:y,string:/[\s\S]+/}},{pattern:/<<[-~]?([a-z_]\w*)[\r\n](?:.*[\r\n])*?[\t ]*\1/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<[-~]?[a-z_]\w*|\b[a-z_]\w*$/i,inside:{symbol:/\b\w+/,punctuation:/^<<[-~]?/}},interpolation:y,string:/[\s\S]+/}},{pattern:/<<[-~]?'([a-z_]\w*)'[\r\n](?:.*[\r\n])*?[\t ]*\1/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<[-~]?'[a-z_]\w*'|\b[a-z_]\w*$/i,inside:{symbol:/\b\w+/,punctuation:/^<<[-~]?'|'$/}},string:/[\s\S]+/}}],"command-literal":[{pattern:RegExp(/%x/.source+w),greedy:!0,inside:{interpolation:y,command:{pattern:/[\s\S]+/,alias:"string"}}},{pattern:/`(?:#\{[^}]+\}|#(?!\{)|\\(?:\r\n|[\s\S])|[^\\`#\r\n])*`/,greedy:!0,inside:{interpolation:y,command:{pattern:/[\s\S]+/,alias:"string"}}}]}),delete b.languages.ruby.string,b.languages.insertBefore("ruby","number",{builtin:/\b(?:Array|Bignum|Binding|Class|Continuation|Dir|Exception|FalseClass|File|Fixnum|Float|Hash|IO|Integer|MatchData|Method|Module|NilClass|Numeric|Object|Proc|Range|Regexp|Stat|String|Struct|Symbol|TMS|Thread|ThreadGroup|Time|TrueClass)\b/,constant:/\b[A-Z][A-Z0-9_]*(?:[?!]|\b)/}),b.languages.rb=b.languages.ruby,{boltExport:S.exports}},"object"==typeof t&&void 0!==n?n.exports=o():"function"==typeof e&&e.amd?e(o):(r="undefined"!=typeof globalThis?globalThis:r||self).EphoxContactWrapper=o(),window.Prism;window.Prism=i}(void 0,b,y),y.exports.boltExport),x=function(e){return e.getParam("codesample_languages")},C=function(e){return e.getParam("codesample_global_prismjs",!1,"boolean")},S=function(e){return v.Prism&&C(e)?v.Prism:w},k=function(e){e=e.selection?e.selection.getNode():null;return m(p(e),e)},T=function(t,n,r){t.undoManager.transact(function(){var e=k(t);return r=g.DOM.encode(r),e.fold(function(){t.insertContent('<pre id="__new" class="language-'+n+'">'+r+"</pre>"),t.selection.select(t.$("#__new").removeAttr("id")[0])},function(e){t.dom.setAttrib(e,"class","language-"+n),e.innerHTML=r,S(t).highlightElement(e),t.selection.select(e)})})},O=function(e){return k(e).fold(i(""),function(e){return e.textContent})},E=function(e){e=x(e);return e||[{text:"HTML/XML",value:"markup"},{text:"JavaScript",value:"javascript"},{text:"CSS",value:"css"},{text:"PHP",value:"php"},{text:"Ruby",value:"ruby"},{text:"Python",value:"python"},{text:"Java",value:"java"},{text:"C",value:"c"},{text:"C#",value:"csharp"},{text:"C++",value:"cpp"}]},_=function(e,t){return k(e).fold(function(){return t},function(e){e=e.className.match(/language-(\w+)/);return e?e[1]:t})},A=function(n){var e=E(n),t=d(e).fold(i(""),function(e){return e.value}),t=_(n,t),r=O(n);n.windowManager.open({title:"Insert/Edit Code Sample",size:"large",body:{type:"panel",items:[{type:"selectbox",name:"language",label:"Language",items:e},{type:"textarea",name:"code",label:"Code view"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{language:t,code:r},onSubmit:function(e){var t=e.getData();T(n,t.language,t.code),e.close()}})},D=function(e){var t=e.selection.getStart();return e.dom.is(t,'pre[class*="language-"]')};r.add("codesample",function(t){var n,o,r,i;function e(){return r.execCommand("codesample")}o=(n=t).$,n.on("PreProcess",function(e){o("pre[contenteditable=false]",e.node).filter(h(p)).each(function(e,t){var n=o(t),r=t.textContent;n.attr("class",o.trim(n.attr("class"))),n.removeAttr("contentEditable"),n.empty().append(o("<code></code>").each(function(){this.textContent=r}))})}),n.on("SetContent",function(){var e=o("pre").filter(h(p)).filter(function(e,t){return"false"!==t.contentEditable});e.length&&n.undoManager.transact(function(){e.each(function(e,t){o(t).find("br").each(function(e,t){t.parentNode.replaceChild(n.getDoc().createTextNode("\n"),t)}),t.contentEditable="false",t.innerHTML=n.dom.encode(t.textContent),S(n).highlightElement(t),t.className=o.trim(t.className)})})}),(r=t).ui.registry.addToggleButton("codesample",{icon:"code-sample",tooltip:"Insert/edit code sample",onAction:e,onSetup:function(e){function t(){e.setActive(D(r))}return r.on("NodeChange",t),function(){return r.off("NodeChange",t)}}}),r.ui.registry.addMenuItem("codesample",{text:"Code sample...",icon:"code-sample",onAction:e}),(i=t).addCommand("codesample",function(){var e=i.selection.getNode();i.selection.isCollapsed()||p(e)?A(i):i.formatter.toggle("code")}),t.on("dblclick",function(e){p(e.target)&&A(t)})})}(),tinymce.util.Tools.resolve("tinymce.PluginManager").add("colorpicker",function(){}),tinymce.util.Tools.resolve("tinymce.PluginManager").add("contextmenu",function(){}),function(){function e(t){return function(e){return typeof e===t}}function i(e){return function(){return e}}function t(e){return e}function n(){return p}var r,o=tinymce.util.Tools.resolve("tinymce.PluginManager"),u=function(e){return t=typeof(e=e),(null===e?"null":"object"==t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"==t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t)===r;var t},a=e("boolean"),c=function(e){return null==e},s=function(e){return!c(e)},l=e("function"),f=e("number"),d=function(t,n){return function(e){return t(n(e))}},m=i(!(r="string")),g=i(!0),p={fold:function(e,t){return e()},isSome:m,isNone:g,getOr:t,getOrThunk:h,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:i(null),getOrUndefined:i(void 0),or:t,orThunk:h,map:n,each:function(){},bind:n,exists:m,forall:g,filter:function(){return p},toArray:function(){return[]},toString:i("none()")};function h(e){return e()}function v(n){function e(){return o}function t(e){return e(n)}var r=i(n),o={fold:function(e,t){return t(n)},isSome:g,isNone:m,getOr:r,getOrThunk:r,getOrDie:r,getOrNull:r,getOrUndefined:r,or:e,orThunk:e,map:function(e){return v(e(n))},each:function(e){e(n)},bind:t,exists:t,forall:t,filter:function(e){return e(n)?o:p},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return o}function b(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}}function y(t){return function(e){return e.dom.nodeType===t}}var w,x={some:v,none:n,from:function(e){return null==e?p:v(e)}},C=function(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o)}return r},S=function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)},k=function(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r)&&n.push(i)}return n},T=1,O={fromHtml:function(e,t){t=(t||document).createElement("div");if(t.innerHTML=e,!t.hasChildNodes()||1<t.childNodes.length)throw console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node");return b(t.childNodes[0])},fromTag:function(e,t){t=(t||document).createElement(e);return b(t)},fromText:function(e,t){t=(t||document).createTextNode(e);return b(t)},fromDom:b,fromPoint:function(e,t,n){return x.from(e.dom.elementFromPoint(t,n)).map(b)}},E=function(e,t){e=e.dom;if(e.nodeType!==T)return!1;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},_=("undefined"==typeof window&&Function("return this;")(),y(T)),A=y(3),D=y(9),P=y(11),I=function(e){return x.from(e.dom.parentNode).map(O.fromDom)},L=function(e){return C(e.dom.childNodes,O.fromDom)},F=function(e,t,n){if(!(u(n)||a(n)||f(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},H=function(e,t,n){F(e.dom,t,n)},M=function(e,t){e.dom.removeAttribute(t)},V=function(e){return P(e)&&s(e.dom.host)},j=l(Element.prototype.attachShadow)&&l(Node.prototype.getRootNode)?function(e){return O.fromDom(e.dom.getRootNode())}:function(e){return D(e)?e:O.fromDom(e.dom.ownerDocument)},U=function(e){e=j(e);return V(e)?x.some(e):x.none()},W=function(e){return O.fromDom(e.dom.host)},N=function(e){var t,n=A(e)?e.dom.parentNode:e.dom;return null!=n&&null!==n.ownerDocument&&(t=n.ownerDocument,U(O.fromDom(n)).fold(function(){return t.body.contains(n)},d(N,W)))},$=function(e,t,n){for(var r=e.dom,o=l(n)?n:m;r.parentNode;){var r=r.parentNode,i=O.fromDom(r);if(t(i))return x.some(i);if(o(i))break}return x.none()},q=function(e,t,n){return $(e,function(e){return E(e,t)},n)},G=function(e){return void 0!==e.style&&l(e.style.getPropertyValue)},K=function(e,t){var n=e.dom,r=window.getComputedStyle(n).getPropertyValue(t);return""!==r||N(e)?r:X(n,t)},X=function(e,t){return G(e)?e.style.getPropertyValue(t):""},R=function(e){return"rtl"===K(e,"direction")?"rtl":"ltr"},Y=function(e,t){return k(L(e),t)},J=function(e,t){return Y(e,function(e){return E(e,t)})},Z=function(e){return I(e).filter(_)},Q=function(e,t){return(t?q(e,"ol,ul"):x.some(e)).getOr(e)},ee=(w="li",function(e){return _(e)&&e.dom.nodeName.toLowerCase()===w}),z=function(e,r){var t=e.selection.getSelectedBlocks();0<t.length&&(S(t,function(e){var e=O.fromDom(e),t=ee(e),n=Q(e,t);Z(n).each(function(e){R(e)!==r?H(n,"dir",r):R(n)!==r&&M(n,"dir"),t&&(e=J(n,"li[dir]"),S(e,function(e){return M(e,"dir")}))})}),e.nodeChanged())},B=function(n,r){return function(t){function e(e){e=O.fromDom(e.element),t.setActive(R(e)===r)}return n.on("NodeChange",e),function(){return n.off("NodeChange",e)}}};o.add("directionality",function(e){var t,n;(t=e).addCommand("mceDirectionLTR",function(){z(t,"ltr")}),t.addCommand("mceDirectionRTL",function(){z(t,"rtl")}),(n=e).ui.registry.addToggleButton("ltr",{tooltip:"Left to right",icon:"ltr",onAction:function(){return n.execCommand("mceDirectionLTR")},onSetup:B(n,"ltr")}),n.ui.registry.addToggleButton("rtl",{tooltip:"Right to left",icon:"rtl",onAction:function(){return n.execCommand("mceDirectionRTL")},onSetup:B(n,"rtl")})})}(),function(){function i(e){return function(){return e}}function e(e){return e}function t(){return s}var n,r=tinymce.util.Tools.resolve("tinymce.PluginManager"),u=function(e){return n===e},o=function(){},a=i(!1),c=i(!(n=null)),s={fold:function(e,t){return e()},isSome:a,isNone:c,getOr:e,getOrThunk:l,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:i(null),getOrUndefined:i(void 0),or:e,orThunk:l,map:t,each:o,bind:t,exists:a,forall:c,filter:function(){return s},toArray:function(){return[]},toString:i("none()")};function l(e){return e()}function f(n){function e(){return o}function t(e){return e(n)}var r=i(n),o={fold:function(e,t){return t(n)},isSome:c,isNone:a,getOr:r,getOrThunk:r,getOrDie:r,getOrNull:r,getOrUndefined:r,or:e,orThunk:e,map:function(e){return f(e(n))},each:function(e){e(n)},bind:t,exists:t,forall:t,filter:function(e){return e(n)?o:s},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return o}function d(n,o,e){function r(e){var n={},r=[];k(e,function(e,t){t={title:t,keywords:e.keywords,char:L((t=e).char,"<img")?t.char.replace(/src="([^"]+)"/,function(e,t){return'src="'+c+t+'"'}):t.char,category:$(W,e.category)},e=void 0!==n[t.category]?n[t.category]:[];n[t.category]=e.concat([t]),r.push(t)}),a.set(n),t.set(r)}function i(){return t.get().getOr([])}function u(){return a.isSet()&&t.isSet()}var a=A(),t=A(),c=U(n);return n.on("init",function(){F.load(e,o).then(function(e){var t=q(n);r(_(e,t))},function(e){console.log("Failed to load emoticons: "+e),a.set({}),t.set([])})}),{listCategories:function(){return[R].concat(C(a.get().getOr({})))},hasLoaded:u,waitForLoad:function(){return u()?N.resolve(!0):new N(function(e,t){var n=15,r=M.setInterval(function(){u()?(M.clearInterval(r),e(!0)):--n<0&&(console.log("Could not load emojis from url: "+o),M.clearInterval(r),t(!1))},100)})},listAll:i,listCategory:function(t){return t===R?i():a.get().bind(function(e){return g.from(e[t])}).getOr([])}}}var m,g={some:f,none:t,from:function(e){return null==e?s:f(e)}},p=function(e,t){for(var n=0,r=e.length;n<r;n++)if(t(e[n],n))return!0;return!1},h=function(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o)}return r},v=function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)},b=function(e){var t=e;return{get:function(){return t},set:function(e){t=e}}},y=function(n,r){function o(){u(i)||(clearTimeout(i),i=null)}var i=null;return{cancel:o,throttle:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];o(),i=setTimeout(function(){i=null,n.apply(null,e)},r)}}},w=function(e,t){e.insertContent(t)},x=function(){return(x=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},C=Object.keys,S=Object.hasOwnProperty,k=function(e,t){for(var n=C(e),r=0,o=n.length;r<o;r++){var i=n[r];t(e[i],i)}},T=function(e,n){return O(e,function(e,t){return{k:t,v:n(e,t)}})},O=function(e,n){var r={};return k(e,function(e,t){e=n(e,t);r[e.k]=e.v}),r},E=function(e,t){return S.call(e,t)},_=(m=function(e,t){return t},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)throw new Error("Can't merge zero objects");for(var n={},r=0;r<e.length;r++){var o,i=e[r];for(o in i)E(i,o)&&(n[o]=m(n[o],i[o]))}return n}),P=function(e){function t(){n.get().each(e)}var n=b(g.none());return{clear:function(){t(),n.set(g.none())},isSet:function(){return n.get().isSome()},get:function(){return n.get()},set:function(e){t(),n.set(g.some(e))}}},A=function(){var t=P(o);return x(x({},t),{on:function(e){return t.get().each(e)}})},I=function(e,t,n){return""===t||e.length>=t.length&&e.substr(n,n+t.length)===t},D=function(e,t){return-1!==e.indexOf(t)},L=function(e,t){return I(e,t,0)},F=tinymce.util.Tools.resolve("tinymce.Resource"),M=tinymce.util.Tools.resolve("tinymce.util.Delay"),N=tinymce.util.Tools.resolve("tinymce.util.Promise"),H="tinymce.plugins.emoticons",V=function(e){return e.getParam("emoticons_database","emojis","string")},j=function(e){return e.getParam("emoticons_append",{},"object")},U=function(e){return e.getParam("emoticons_images_url","https://twemoji.maxcdn.com/v/13.0.1/72x72/","string")},R="All",W={symbols:"Symbols",people:"People",animals_and_nature:"Animals and Nature",food_and_drink:"Food and Drink",activity:"Activity",travel_and_places:"Travel and Places",objects:"Objects",flags:"Flags",user:"User Defined"},$=function(e,t){return E(e,t)?e[t]:t},q=function(e){e=j(e);return T(e,function(e){return x({keywords:[],category:"user"},e)})},G=function(e,t){return D(e.title.toLowerCase(),t)||p(e.keywords,function(e){return D(e.toLowerCase(),t)})},z=function(e,t,n){for(var r=[],o=t.toLowerCase(),i=n.fold(function(){return a},function(t){return function(e){return t<=e}}),u=0;u<e.length&&(0!==t.length&&!G(e[u],o)||(r.push({value:e[u].char,text:e[u].title,icon:e[u].char}),!i(r.length)));u++);return r},B="pattern",K=function(n,o){function e(){return{title:"Emoticons",size:"normal",body:{type:"tabpanel",tabs:h(o.listCategories(),function(e){return{title:e,name:e,items:[u,a]}})},initialData:t,onTabChange:function(e,t){i.set(t.newTabName),r.throttle(e)},onChange:r.throttle,onAction:function(e,t){"results"===t.name&&(w(n,t.value),e.close())},buttons:[{type:"cancel",text:"Close",primary:!0}]}}var t={pattern:"",results:z(o.listAll(),"",g.some(300))},i=b(R),r=y(function(e){var t,n,r;t=(e=e).getData(),n=i.get(),r=o.listCategory(n),r=z(r,t[B],n===R?g.some(300):g.none()),e.setData({results:r})},200),u={label:"Search",type:"input",name:B},a={type:"collection",name:"results"},c=n.windowManager.open(e());c.focus(B),o.hasLoaded()||(c.block("Loading emoticons..."),o.waitForLoad().then(function(){c.redial(e()),r.throttle(c),c.focus(B),c.unblock()}).catch(function(e){c.redial({title:"Emoticons",body:{type:"panel",items:[{type:"alertbanner",level:"error",icon:"warning",text:"<p>Could not load emoticons</p>"}]},buttons:[{type:"cancel",text:"Close",primary:!0}],initialData:{pattern:"",results:[]}}),c.focus(B),c.unblock()}))};r.add("emoticons",function(e,t){t=t,c=V(s=e);var n,r,o,i,u,a,t=s.getParam("emoticons_database_url",t+"/js/"+c+s.suffix+".js","string"),c=e.getParam("emoticons_database_id",H,"string"),s=d(e,t,c);function l(){return o.execCommand("mceEmoticons")}r=s,(n=e).addCommand("mceEmoticons",function(){return K(n,r)}),(o=e).ui.registry.addButton("emoticons",{tooltip:"Emoticons",icon:"emoji",onAction:l}),o.ui.registry.addMenuItem("emoticons",{text:"Emoticons...",icon:"emoji",onAction:l}),u=s,(i=e).ui.registry.addAutocompleter("emoticons",{ch:":",columns:"auto",minChars:2,fetch:function(t,n){return u.waitForLoad().then(function(){var e=u.listAll();return z(e,t,g.some(n))})},onAction:function(e,t,n){i.selection.setRng(t),i.insertContent(n),e.hide()}}),(a=e).on("PreInit",function(){a.parser.addAttributeFilter("data-emoticon",function(e){v(e,function(e){e.attr("data-mce-resize","false"),e.attr("data-mce-placeholder","1")})})})})}(),function(){function s(e){var t=e;return{get:function(){return t},set:function(e){t=e}}}var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=function(){return(t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},f=tinymce.util.Tools.resolve("tinymce.util.Tools"),n=tinymce.util.Tools.resolve("tinymce.html.DomParser"),l=tinymce.util.Tools.resolve("tinymce.html.Node"),d=tinymce.util.Tools.resolve("tinymce.html.Serializer"),m=function(e){return e.getParam("fullpage_hide_in_source_view")},o=function(e){return e.getParam("fullpage_default_xml_pi")},i=function(e){return e.getParam("fullpage_default_encoding")},u=function(e){return e.getParam("fullpage_default_font_family")},a=function(e){return e.getParam("fullpage_default_font_size")},c=function(e){return e.getParam("fullpage_default_text_color")},g=function(e){return e.getParam("fullpage_default_title")},p=function(e){return e.getParam("fullpage_default_doctype","<!DOCTYPE html>")},h=function(e){return e.getParam("protect")},v=function(e,t){return n({validate:!1,root_name:"#document"},e.schema).parse(t,{format:"xhtml"})},b=function(e,t){function n(e,t){return e.attr(t)||""}var r,t=v(e,t),o={};return o.fontface=u(e),o.fontsize=a(e),7===(e=t.firstChild).type&&(o.xml_pi=!0,r=/encoding="([^"]+)"/.exec(e.value))&&(o.docencoding=r[1]),(e=t.getAll("#doctype")[0])&&(o.doctype="<!DOCTYPE"+e.value+">"),(e=t.getAll("title")[0])&&e.firstChild&&(o.title=e.firstChild.value),f.each(t.getAll("meta"),function(e){var t=e.attr("name"),n=e.attr("http-equiv");t?o[t.toLowerCase()]=e.attr("content"):"Content-Type"===n&&(t=/charset\s*=\s*(.*)\s*/gi.exec(e.attr("content")))&&(o.docencoding=t[1])}),(e=t.getAll("html")[0])&&(o.langcode=n(e,"lang")||n(e,"xml:lang")),o.stylesheets=[],f.each(t.getAll("link"),function(e){"stylesheet"===e.attr("rel")&&o.stylesheets.push(e.attr("href"))}),(e=t.getAll("body")[0])&&(o.langdir=n(e,"dir"),o.style=n(e,"style"),o.visited_color=n(e,"vlink"),o.link_color=n(e,"link"),o.active_color=n(e,"alink")),o},y=function(e,i,t){function n(e,t,n){e.attr(t,n||void 0)}function u(e){o.firstChild?o.insert(e,o.firstChild):o.append(e)}var a,r=e.dom,c=v(e,t),o=c.getAll("head")[0],s=(o||(a=c.getAll("html")[0],o=new l("head",1),a.firstChild?a.insert(o,a.firstChild,!0):a.append(o)),a=c.firstChild,i.xml_pi?(t='version="1.0"',i.docencoding&&(t+=' encoding="'+i.docencoding+'"'),7!==a.type&&(a=new l("xml",7),c.insert(a,c.firstChild,!0)),a.value=t):a&&7===a.type&&a.remove(),a=c.getAll("#doctype")[0],i.doctype?(a||(a=new l("#doctype",10),i.xml_pi?c.insert(a,c.firstChild):u(a)),a.value=i.doctype.substring(9,i.doctype.length-1)):a&&a.remove(),a=null,f.each(c.getAll("meta"),function(e){"Content-Type"===e.attr("http-equiv")&&(a=e)}),i.docencoding?(a||((a=new l("meta",1)).attr("http-equiv","Content-Type"),a.shortEnded=!0,u(a)),a.attr("content","text/html; charset="+i.docencoding)):a&&a.remove(),a=c.getAll("title")[0],i.title?(a?a.empty():(a=new l("title",1),u(a)),a.append(new l("#text",3)).value=i.title):a&&a.remove(),f.each("keywords,description,author,copyright,robots".split(","),function(e){for(var t,n=c.getAll("meta"),r=i[e],o=0;o<n.length;o++)if((t=n[o]).attr("name")===e)return void(r?t.attr("content",r):t.remove());r&&((a=new l("meta",1)).attr("name",e),a.attr("content",r),a.shortEnded=!0,u(a))}),{}),t=(f.each(c.getAll("link"),function(e){"stylesheet"===e.attr("rel")&&(s[e.attr("href")]=e)}),f.each(i.stylesheets,function(e){s[e]||((a=new l("link",1)).attr({rel:"stylesheet",text:"text/css",href:e}),a.shortEnded=!0,u(a)),delete s[e]}),f.each(s,function(e){e.remove()}),(a=c.getAll("body")[0])&&(n(a,"dir",i.langdir),n(a,"style",i.style),n(a,"vlink",i.visited_color),n(a,"link",i.link_color),n(a,"alink",i.active_color),r.setAttribs(e.getBody(),{style:i.style,dir:i.dir,vLink:i.visited_color,link:i.link_color,aLink:i.active_color})),(a=c.getAll("html")[0])&&(n(a,"lang",i.langcode),n(a,"xml:lang",i.langcode)),o.firstChild||o.remove(),d({validate:!1,indent:!0,indent_before:"head,html,body,meta,title,script,link,style",indent_after:"head,html,body,meta,title,script,link,style"}).serialize(c));return t.substring(0,t.indexOf("</body>"))},w=function(n,r){var o=b(n,r.get()),e=t(t({},{title:"",keywords:"",description:"",robots:"",author:"",docencoding:""}),o);n.windowManager.open({title:"Metadata and Document Properties",size:"normal",body:{type:"panel",items:[{name:"title",type:"input",label:"Title"},{name:"keywords",type:"input",label:"Keywords"},{name:"description",type:"input",label:"Description"},{name:"robots",type:"input",label:"Robots"},{name:"author",type:"input",label:"Author"},{name:"docencoding",type:"input",label:"Encoding"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:e,onSubmit:function(e){var t=e.getData(),t=y(n,f.extend(o,t),r.get());r.set(t),e.close()}})},x=function(e,t){return f.each(e,function(e){t=t.replace(e,function(e){return"\x3c!--mce:protected "+escape(e)+"--\x3e"})}),t},C=function(e){return e.replace(/<!--mce:protected ([\s\S]*?)-->/g,function(e,t){return unescape(t)})},S=f.each,k=function(e){return e.replace(/<\/?[A-Z]+/g,function(e){return e.toLowerCase()})},T=function(e,t,n,r){var o,i,u,a,c,s="",l=e.dom;r.selection||(c=x(h(e),r.content),"raw"===r.format&&t.get())||r.source_view&&m(e)||(-1!==(i=(c=(c=0!==c.length||r.source_view?c:f.trim(t.get())+"\n"+f.trim(c)+"\n"+f.trim(n.get())).replace(/<(\/?)BODY/gi,"<$1body")).indexOf("<body"))?(i=c.indexOf(">",i),t.set(k(c.substring(0,i+1))),-1===(o=c.indexOf("</body",i))&&(o=c.length),r.content=f.trim(c.substring(i+1,o)),n.set(k(c.substring(o)))):(t.set(O(e)),n.set("\n</body>\n</html>")),r=v(e,t.get()),S(r.getAll("style"),function(e){e.firstChild&&(s+=e.firstChild.value)}),(i=r.getAll("body")[0])&&l.setAttribs(e.getBody(),{style:i.attr("style")||"",dir:i.attr("dir")||"",vLink:i.attr("vlink")||"",link:i.attr("link")||"",aLink:i.attr("alink")||""}),l.remove("fullpage_styles"),u=e.getDoc().getElementsByTagName("head")[0],s&&l.add(u,"style",{id:"fullpage_styles"}).appendChild(document.createTextNode(s)),a={},f.each(u.getElementsByTagName("link"),function(e){"stylesheet"===e.rel&&e.getAttribute("data-mce-fullpage")&&(a[e.href]=e)}),f.each(r.getAll("link"),function(e){var t=e.attr("href");if(!t)return!0;a[t]||"stylesheet"!==e.attr("rel")||l.add(u,"link",{rel:"stylesheet",text:"text/css",href:t,"data-mce-fullpage":"1"}),delete a[t]}),f.each(a,function(e){e.parentNode.removeChild(e)}))},O=function(e){var t,n="",r="";return o(e)&&(n+='<?xml version="1.0" encoding="'+(i(e)||"ISO-8859-1")+'" ?>\n'),n=n+p(e)+"\n<html>\n<head>\n",(t=g(e))&&(n+="<title>"+t+"</title>\n"),(t=i(e))&&(n+='<meta http-equiv="Content-Type" content="text/html; charset='+t+'" />\n'),(t=u(e))&&(r+="font-family: "+t+";"),(t=a(e))&&(r+="font-size: "+t+";"),(t=c(e))&&(r+="color: "+t+";"),n+="</head>\n<body"+(r?' style="'+r+'"':"")+">\n"},E=function(e,t,n,r){"html"!==r.format||r.selection||r.source_view&&m(e)||(r.content=C(f.trim(t)+"\n"+f.trim(r.content)+"\n"+f.trim(n)))};e.add("fullpage",function(e){var t,n,r,o,i,u,a=s(""),c=s("");n=a,(t=e).addCommand("mceFullPageProperties",function(){w(t,n)}),(r=e).ui.registry.addButton("fullpage",{tooltip:"Metadata and document properties",icon:"document-properties",onAction:function(){r.execCommand("mceFullPageProperties")}}),r.ui.registry.addMenuItem("fullpage",{text:"Metadata and document properties",icon:"document-properties",onAction:function(){r.execCommand("mceFullPageProperties")}}),i=a,u=c,(o=e).on("BeforeSetContent",function(e){T(o,i,u,e)}),o.on("GetContent",function(e){E(o,i.get(),u.get(),e)})})}(),function(){function P(e){return{isFullscreen:function(){return null!==e.get()}}}function e(n){return function(e){return t=typeof(e=e),(null===e?"null":"object"==t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"==t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t)===n;var t}}function t(t){return function(e){return typeof e===t}}function I(e){return e}var a=function(e){var t=e;return{get:function(){return t},set:function(e){t=e}}},L=tinymce.util.Tools.resolve("tinymce.PluginManager"),r=e("string"),F=e("array"),H=t("boolean"),V=function(e){return null==e},n=function(e){return!V(e)},c=t("function"),j=t("number"),s=function(){},U=function(n,r){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n(r.apply(null,e))}},W=function(t,n){return function(e){return t(n(e))}},m=function(e){return function(){return e}};function o(){return u}var l=m(!1),i=m(!0),u={fold:function(e,t){return e()},isSome:l,isNone:i,getOr:_=I,getOrThunk:f,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:m(null),getOrUndefined:m(void 0),or:_,orThunk:f,map:o,each:s,bind:o,exists:l,forall:i,filter:function(){return u},toArray:function(){return[]},toString:m("none()")};function f(e){return e()}function d(n){function e(){return o}function t(e){return e(n)}var r=m(n),o={fold:function(e,t){return t(n)},isSome:i,isNone:l,getOr:r,getOrThunk:r,getOrDie:r,getOrNull:r,getOrUndefined:r,or:e,orThunk:e,map:function(e){return d(e(n))},each:function(e){e(n)},bind:t,exists:t,forall:t,filter:function(e){return e(n)?o:u},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return o}function $(e){function t(){n.get().each(e)}var n=a(y.none());return{clear:function(){t(),n.set(y.none())},isSet:function(){return n.get().isSome()},get:function(){return n.get()},set:function(e){t(),n.set(y.some(e))}}}function q(){return $(function(e){return e.unbind()})}function g(e,t){return-1!==e.indexOf(t)}function p(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}}function h(t){return function(e){return e.dom.nodeType===t}}function G(){return O(0,0)}function v(t){return function(e){return g(e,t)}}function K(e){function t(e){return function(){return n===e}}var n=e.current,e=e.version;return{current:n,version:e,isEdge:t(Ce),isChrome:t(Se),isIE:t(ke),isOpera:t(Te),isFirefox:t(Oe),isSafari:t(Ee)}}function X(e){function t(e){return function(){return n===e}}var n=e.current,e=e.version;return{current:n,version:e,isWindows:t(De),isiOS:t(Me),isAndroid:t(Ne),isOSX:t(ze),isLinux:t(Re),isSolaris:t(Be),isFreeBSD:t(Pe),isChromeOS:t(Ie)}}function Y(e){return window.matchMedia(e).matches}function J(n,r){return{left:n,top:r,translate:function(e,t){return J(n+e,r+t)}}}function Z(n,r,e){return R(e).map(function(e){function t(e){return r(ft(e))}return e.addEventListener(n,t),{unbind:function(){return e.removeEventListener(n,t)}}}).getOrThunk(function(){return{unbind:s}})}var Q,ee,b,y={some:d,none:o,from:function(e){return null==e?u:d(e)}},w=function(){return(w=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},te=Array.prototype.push,x=function(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o)}return r},C=function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)},S=function(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r)&&n.push(i)}return n},ne=function(e,t,n){for(var r=0,o=e.length;r<o;r++){var i=e[r];if(t(i,r))return y.some(i);if(n(i,r))break}return y.none()},re=function(e,t){return ne(e,t,l)},oe=function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!F(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);te.apply(t,e[n])}return t},ie=function(e,t){return oe(x(e,t))},ue=function(e,t){return 0<=t&&t<e.length?y.some(e[t]):y.none()},ae=function(e){return ue(e,0)},ce=function(e,t){for(var n=0;n<e.length;n++){var r=t(e[n],n);if(r.isSome())return r}return y.none()},se=Object.keys,le=function(e,t){for(var n=se(e),r=0,o=n.length;r<o;r++){var i=n[r];t(e[i],i)}},fe=function(e){return void 0!==e.style&&c(e.style.getPropertyValue)},k={fromHtml:function(e,t){t=(t||document).createElement("div");if(t.innerHTML=e,!t.hasChildNodes()||1<t.childNodes.length)throw console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node");return p(t.childNodes[0])},fromTag:function(e,t){t=(t||document).createElement(e);return p(t)},fromText:function(e,t){t=(t||document).createTextNode(e);return p(t)},fromDom:p,fromPoint:function(e,t,n){return y.from(e.dom.elementFromPoint(t,n)).map(p)}},de=("undefined"!=typeof window||Function("return this;")(),9),me=11,T=1,ge=h(T),pe=h(3),he=h(de),ve=h(me),be=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t))return r}},O=function(e,t){return{major:e,minor:t}},E={nu:O,detect:function(e,t){var n,r,t=String(t).toLowerCase();return 0===e.length?G():(r=be(e=e,n=t))?O((e=function(e){return Number(n.replace(r,"$"+e))})(1),e(2)):{major:0,minor:0}},unknown:G},ye=function(e,t){var n=String(t).toLowerCase();return re(e,function(e){return e.search(n)})},_=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,_=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return g(e,"edge/")&&g(e,"chrome")&&g(e,"safari")&&g(e,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,_],search:function(e){return g(e,"chrome")&&!g(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return g(e,"msie")||g(e,"trident")}},{name:"Opera",versionRegexes:[_,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:v("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:v("firefox")},{name:"Safari",versionRegexes:[_,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(g(e,"safari")||g(e,"mobile/"))&&g(e,"applewebkit")}}],we=[{name:"Windows",search:v("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return g(e,"iphone")||g(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:v("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:v("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:v("linux"),versionRegexes:[]},{name:"Solaris",search:v("sunos"),versionRegexes:[]},{name:"FreeBSD",search:v("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:v("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],xe={browsers:m(_),oses:m(we)},Ce="Edge",Se="Chrome",ke="IE",Te="Opera",Oe="Firefox",Ee="Safari",_e=function(){return K({current:void 0,version:E.unknown()})},Ae=K,De=(m(Ce),m(Se),m(ke),m(Te),m(Oe),m(Ee),"Windows"),Me="iOS",Ne="Android",Re="Linux",ze="OSX",Be="Solaris",Pe="FreeBSD",Ie="ChromeOS",Le=function(){return X({current:void 0,version:E.unknown()})},Fe=X,He=(m(De),m(Me),m(Ne),m(Re),m(ze),m(Be),m(Pe),m(Ie),function(e,t,n){var r,o,i,u,a,c,s,l=xe.browsers(),f=xe.oses(),t=t.bind(function(e){return r=l,ce(e.brands,function(t){var n=t.brand.toLowerCase();return re(r,function(e){return n===(null==(e=e.brand)?void 0:e.toLowerCase())}).map(function(e){return{current:e.name,version:E.nu(parseInt(t.version,10),0)}})});var r}).orThunk(function(){return ye(l,n=e).map(function(e){var t=E.detect(e.versionRegexes,n);return{current:e.name,version:t}});var n}).fold(_e,Ae),f=ye(f,r=e).map(function(e){var t=E.detect(e.versionRegexes,r);return{current:e.name,version:t}}).fold(Le,Fe),d=(i=t,u=e,n=n,d=(o=f).isiOS()&&!0===/ipad/i.test(u),a=o.isiOS()&&!d,c=o.isiOS()||o.isAndroid(),s=c||n("(pointer:coarse)"),n=d||!a&&c&&n("(min-device-width:768px)"),c=a||c&&!n,i=i.isSafari()&&o.isiOS()&&!1===/safari/i.test(u),u=!c&&!n&&!i,{isiPad:m(d),isiPhone:m(a),isTablet:m(n),isPhone:m(c),isTouch:m(s),isAndroid:o.isAndroid,isiOS:o.isiOS,isWebView:m(i),isDesktop:m(u)});return{browser:t,os:f,deviceType:d}}),Ve=(b=!(Q=function(){return He(navigator.userAgent,y.from(navigator.userAgentData),Y)}),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return b||(b=!0,ee=Q.apply(null,e)),ee}),je=function(e,t){e=e.dom;if(e.nodeType!==T)return!1;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},Ue=function(e){return e.nodeType!==T&&e.nodeType!==de&&e.nodeType!==me||0===e.childElementCount},We=function(e,t){t=void 0===t?document:t.dom;return Ue(t)?[]:x(t.querySelectorAll(e),k.fromDom)},$e=function(e,t){return e.dom===t.dom},A=function(e){return k.fromDom(e.dom.ownerDocument)},qe=function(e){return y.from(e.dom.parentNode).map(k.fromDom)},Ge=function(e,t){for(var n=c(t)?t:l,r=e.dom,o=[];null!==r.parentNode&&void 0!==r.parentNode;){var i=r.parentNode,u=k.fromDom(i);if(o.push(u),!0===n(u))break;r=i}return o},Ke=function(t){return qe(t).map(Xe).map(function(e){return S(e,function(e){return!$e(t,e)})}).getOr([])},Xe=function(e){return x(e.dom.childNodes,k.fromDom)},Ye=function(e){return ve(e)&&n(e.dom.host)},_=c(Element.prototype.attachShadow)&&c(Node.prototype.getRootNode),Je=m(_),Ze=_?function(e){return k.fromDom(e.dom.getRootNode())}:function(e){return he(e)?e:A(e)},D=function(e){e=Ze(e);return Ye(e)?y.some(e):y.none()},M=function(e){return k.fromDom(e.dom.host)},Qe=function(e){if(Je()&&n(e.target)){var t=k.fromDom(e.target);if(ge(t)&&et(t)&&e.composed&&e.composedPath){t=e.composedPath();if(t)return ae(t)}}return y.from(e.target)},et=function(e){return n(e.dom.shadowRoot)},tt=function(e){var t,n=pe(e)?e.dom.parentNode:e.dom;return null!=n&&null!==n.ownerDocument&&(t=n.ownerDocument,D(k.fromDom(n)).fold(function(){return t.body.contains(n)},W(tt,M)))},nt=function(e){e=e.dom.body;if(null==e)throw new Error("Body is not available yet");return k.fromDom(e)},rt=function(e,t,n){if(!(r(n)||H(n)||j(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},ot=function(e,t,n){rt(e.dom,t,n)},it=function(e,t){e=e.dom.getAttribute(t);return null===e?void 0:e},ut=function(e,t){e.dom.removeAttribute(t)},at=function(e,t,n){if(!r(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);fe(e)&&e.style.setProperty(t,n)},N=function(e,t){var n=e.dom;le(t,function(e,t){at(n,t,e)})},ct=function(e,t){var n=e.dom,r=window.getComputedStyle(n).getPropertyValue(t);return""!==r||tt(e)?r:st(n,t)},st=function(e,t){return fe(e)?e.style.getPropertyValue(t):""},lt=function(e,t,n,r,o,i,u){return{target:e,x:t,y:n,stop:r,prevent:o,kill:i,raw:u}},ft=function(e){function t(){return e.stopPropagation()}function n(){return e.preventDefault()}var r=k.fromDom(Qe(e).getOr(e.target)),o=U(n,t);return lt(r,e.clientX,e.clientY,t,n,o,e)},dt=function(t,n){return function(e){t(e)&&n(ft(e))}},mt=function(e,t,n,r,o){n=dt(n,r);return e.dom.addEventListener(t,n,o),{unbind:function(r){for(var o=[],e=1;e<arguments.length;e++)o[e-1]=arguments[e];return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=o.concat(e);return r.apply(null,n)}}(pt,e,t,n,o)}},gt=function(e,t,n,r){return mt(e,t,n,r,!1)},pt=function(e,t,n,r){e.dom.removeEventListener(t,n,r)},ht=i,vt=function(e,t,n){return gt(e,t,ht,n)},bt=J,yt=function(e){var e=void 0!==e?e.dom:document,t=e.body.scrollLeft||e.documentElement.scrollLeft,e=e.body.scrollTop||e.documentElement.scrollTop;return bt(t,e)},R=function(e){e=void 0===e?window:e;return Ve().browser.isFirefox()?y.none():y.from(e.visualViewport)},wt=function(e,t,n,r){return{x:e,y:t,width:n,height:r,right:e+n,bottom:t+r}},xt=function(e){var n=void 0===e?window:e,e=n.document,r=yt(k.fromDom(e));return R(n).fold(function(){var e=n.document.documentElement,t=e.clientWidth,e=e.clientHeight;return wt(r.left,r.top,t,e)},function(e){return wt(Math.max(e.pageLeft,r.left),Math.max(e.pageTop,r.top),e.width,e.height)})},we=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Ct=tinymce.util.Tools.resolve("tinymce.Env"),St=tinymce.util.Tools.resolve("tinymce.util.Delay"),kt=function(e,t){e.fire("FullscreenStateChanged",{state:t}),e.fire("ResizeEditor")},z=function(e){return e.getParam("fullscreen_native",!1,"boolean")},Tt=function(e){var t=k.fromDom(e.getElement());return D(t).map(M).getOrThunk(function(){return nt(A(t))})},Ot=function(e){return void 0!==e.fullscreenElement?e.fullscreenElement:void 0!==e.msFullscreenElement?e.msFullscreenElement:void 0!==e.webkitFullscreenElement?e.webkitFullscreenElement:null},Et=function(){return void 0!==document.fullscreenElement?"fullscreenchange":void 0!==document.msFullscreenElement?"MSFullscreenChange":void 0!==document.webkitFullscreenElement?"webkitfullscreenchange":"fullscreenchange"},_t=function(e){e=e.dom;e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.webkitRequestFullScreen&&e.webkitRequestFullScreen()},At=function(e){e=e.dom;e.exitFullscreen?e.exitFullscreen():e.msExitFullscreen?e.msExitFullscreen():e.webkitCancelFullScreen&&e.webkitCancelFullScreen()},Dt=function(e){return e.dom===Ot(A(e).dom)},Mt=function(e,t,n){return S(Ge(e,n),t)},Nt=function(e,t){return S(Ke(e),t)},Rt=function(e){return We(e)},zt=function(e,t,n){return Mt(e,function(e){return je(e,t)},n)},Bt=function(e,t){return Nt(e,function(e){return je(e,t)})},B="data-ephox-mobile-fullscreen-style",Pt="display:none!important;",It="position:absolute!important;",Lt="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",Ft="background-color:rgb(255,255,255)!important;",Ht=Ct.os.isAndroid(),Vt=function(e){e=ct(e,"background-color");return void 0!==e&&""!==e?"background-color:"+e+"!important":Ft},jt=function(r,e,t){function n(n){return function(e){var t=it(e,"style"),t=void 0===t?"no-styles":t.trim();t!==n&&(ot(e,B,t),N(e,r.parseStyle(n)))}}var o=zt(e,"*"),i=ie(o,function(e){return Bt(e,"*:not(.tox-silver-sink)")}),t=Vt(t);C(i,n(Pt)),C(o,n(It+Lt+t)),n((!0===Ht?"":It)+Lt+t)(e)},Ut=function(n){var e=Rt("["+B+"]");C(e,function(e){var t=it(e,B);"no-styles"!==t?N(e,n.parseStyle(t)):ut(e,"style"),ut(e,B)})},Wt=we.DOM,$t=function(){return xt(window)},qt=function(e){return window.scrollTo(e.x,e.y)},Gt=R().fold(function(){return{bind:s,unbind:s}},function(t){n=$(s);var n,r=w(w({},n),{on:function(e){return n.get().each(e)}}),o=q(),i=q(),u=St.throttle(function(){document.body.scrollTop=0,document.documentElement.scrollTop=0,window.requestAnimationFrame(function(){r.on(function(e){return N(e,{top:t.offsetTop+"px",left:t.offsetLeft+"px",height:t.height+"px",width:t.width+"px"})})})},50);return{bind:function(e){r.set(e),u(),o.set(Z("resize",u)),i.set(Z("scroll",u))},unbind:function(){r.on(function(){o.clear(),i.clear()}),r.clear()}}}),Kt=function(t,n){function e(t){t(o,"tox-fullscreen"),t(i,"tox-fullscreen"),t(u,"tox-fullscreen"),D(a).map(function(e){return M(e).dom}).each(function(e){t(e,"tox-fullscreen"),t(e,"tox-shadowhost")})}function r(){f&&Ut(t.dom),e(Wt.removeClass),Gt.unbind(),y.from(n.get()).each(function(e){return e.fullscreenChangeHandler.unbind()})}var o=document.body,i=document.documentElement,u=t.getContainer(),a=k.fromDom(u),c=Tt(t),s=n.get(),l=k.fromDom(t.getBody()),f=Ct.deviceType.isTouch(),d=u.style,m=t.iframeElement.style;s?(s.fullscreenChangeHandler.unbind(),z(t)&&Dt(c)&&At(A(c)),m.width=s.iframeWidth,m.height=s.iframeHeight,d.width=s.containerWidth,d.height=s.containerHeight,d.top=s.containerTop,d.left=s.containerLeft,r(),qt(s.scrollPos),n.set(null),kt(t,!1),t.off("remove",r)):(s=vt(A(c),Et(),function(e){!z(t)||Dt(c)||null===n.get()||Kt(t,n)}),s={scrollPos:$t(),containerWidth:d.width,containerHeight:d.height,containerTop:d.top,containerLeft:d.left,iframeWidth:m.width,iframeHeight:m.height,fullscreenChangeHandler:s},f&&jt(t.dom,a,l),m.width=m.height="100%",d.width=d.height="",e(Wt.addClass),Gt.bind(a),t.on("remove",r),n.set(s),z(t)&&_t(c),kt(t,!0))},Xt=function(n,r){return function(t){t.setActive(null!==r.get());function e(e){return t.setActive(e.state)}return n.on("FullscreenStateChanged",e),function(){return n.off("FullscreenStateChanged",e)}}};L.add("fullscreen",function(e){var t,n,r,o,i=a(null);return e.inline||(n=i,(t=e).addCommand("mceFullScreen",function(){Kt(t,n)}),o=i,(r=e).ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",icon:"fullscreen",shortcut:"Meta+Shift+F",onAction:u,onSetup:Xt(r,o)}),r.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction:u,onSetup:Xt(r,o)}),e.addShortcut("Meta+Shift+F","","mceFullScreen")),P(i);function u(){return r.execCommand("mceFullScreen")}})}(),function(){function i(e){return function(){return e}}function e(e){return e}function t(){return s}var n=tinymce.util.Tools.resolve("tinymce.PluginManager"),c=function(){return(c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},u=i(!1),a=i(!0),s={fold:function(e,t){return e()},isSome:u,isNone:a,getOr:e,getOrThunk:r,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:i(null),getOrUndefined:i(void 0),or:e,orThunk:r,map:t,each:function(){},bind:t,exists:u,forall:a,filter:function(){return s},toArray:function(){return[]},toString:i("none()")};function r(e){return e()}function l(n){function e(){return o}function t(e){return e(n)}var r=i(n),o={fold:function(e,t){return t(n)},isSome:a,isNone:u,getOr:r,getOrThunk:r,getOrDie:r,getOrNull:r,getOrUndefined:r,or:e,orThunk:e,map:function(e){return l(e(n))},each:function(e){e(n)},bind:t,exists:t,forall:t,filter:function(e){return e(n)?o:s},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return o}var f={some:l,none:t,from:function(e){return null==e?s:l(e)}},o=Array.prototype.indexOf,d=function(e,t){return o.call(e,t)},m=function(e,t){return-1<d(e,t)},g=function(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o)}return r},p=function(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r)&&n.push(i)}return n},h=function(e,t,n){for(var r=0,o=e.length;r<o;r++){var i=e[r];if(t(i,r))return f.some(i);if(n(i,r))break}return f.none()},v=function(e,t){return h(e,t,u)},b=Object.keys,y=Object.hasOwnProperty,w=function(e,t){return x(e,t)?f.from(e[t]):f.none()},x=function(e,t){return y.call(e,t)},C=function(e){for(var t=[],n=function(e){t.push(e)},r=0;r<e.length;r++)e[r].each(n);return t},S=function(e){return f.from(e.getParam("help_tabs"))},k=function(e){return e.getParam("forced_plugins")},T="<h1>Editor UI keyboard navigation</h1>\n\n<h2>Activating keyboard navigation</h2>\n\n<p>The sections of the outer UI of the editor - the menubar, toolbar, sidebar and footer - are all keyboard navigable. As such, there are multiple ways to activate keyboard navigation:</p>\n<ul>\n  <li>Focus the menubar: Alt + F9 (Windows) or &#x2325;F9 (MacOS)</li>\n  <li>Focus the toolbar: Alt + F10 (Windows) or &#x2325;F10 (MacOS)</li>\n  <li>Focus the footer: Alt + F11 (Windows) or &#x2325;F11 (MacOS)</li>\n</ul>\n\n<p>Focusing the menubar or toolbar will start keyboard navigation at the first item in the menubar or toolbar, which will be highlighted with a gray background. Focusing the footer will start keyboard navigation at the first item in the element path, which will be highlighted with an underline. </p>\n\n<h2>Moving between UI sections</h2>\n\n<p>When keyboard navigation is active, pressing tab will move the focus to the next major section of the UI, where applicable. These sections are:</p>\n<ul>\n  <li>the menubar</li>\n  <li>each group of the toolbar </li>\n  <li>the sidebar</li>\n  <li>the element path in the footer </li>\n  <li>the wordcount toggle button in the footer </li>\n  <li>the branding link in the footer </li>\n  <li>the editor resize handle in the footer</li>\n</ul>\n\n<p>Pressing shift + tab will move backwards through the same sections, except when moving from the footer to the toolbar. Focusing the element path then pressing shift + tab will move focus to the first toolbar group, not the last.</p>\n\n<h2>Moving within UI sections</h2>\n\n<p>Keyboard navigation within UI sections can usually be achieved using the left and right arrow keys. This includes:</p>\n<ul>\n  <li>moving between menus in the menubar</li>\n  <li>moving between buttons in a toolbar group</li>\n  <li>moving between items in the element path</li>\n</ul>\n\n<p>In all these UI sections, keyboard navigation will cycle within the section. For example, focusing the last button in a toolbar group then pressing right arrow will move focus to the first item in the same toolbar group. </p>\n\n<h1>Executing buttons</h1>\n\n<p>To execute a button, navigate the selection to the desired button and hit space or enter.</p>\n\n<h1>Opening, navigating and closing menus</h1>\n\n<p>When focusing a menubar button or a toolbar button with a menu, pressing space, enter or down arrow will open the menu. When the menu opens the first item will be selected. To move up or down the menu, press the up or down arrow key respectively. This is the same for submenus, which can also be opened and closed using the left and right arrow keys.</p>\n\n<p>To close any active menu, hit the escape key. When a menu is closed the selection will be restored to its previous selection. This also works for closing submenus.</p>\n\n<h1>Context toolbars and menus</h1>\n\n<p>To focus an open context toolbar such as the table context toolbar, press Ctrl + F9 (Windows) or &#x2303;F9 (MacOS).</p>\n\n<p>Context toolbar navigation is the same as toolbar navigation, and context menu navigation is the same as standard menu navigation.</p>\n\n<h1>Dialog navigation</h1>\n\n<p>There are two types of dialog UIs in TinyMCE: tabbed dialogs and non-tabbed dialogs.</p>\n\n<p>When a non-tabbed dialog is opened, the first interactive component in the dialog will be focused. Users can navigate between interactive components by pressing tab. This includes any footer buttons. Navigation will cycle back to the first dialog component if tab is pressed while focusing the last component in the dialog. Pressing shift + tab will navigate backwards.</p>\n\n<p>When a tabbed dialog is opened, the first button in the tab menu is focused. Pressing tab will navigate to the first interactive component in that tab, and will cycle through the tabs components, the footer buttons, then back to the tab button. To switch to another tab, focus the tab button for the current tab, then use the arrow keys to cycle through the tab buttons.</p>",O=function(){return{name:"keyboardnav",title:"Keyboard Navigation",items:[{type:"htmlpanel",presets:"document",html:T}]}},E=tinymce.util.Tools.resolve("tinymce.Env"),_=function(e){var n=E.mac?{alt:"&#x2325;",ctrl:"&#x2303;",shift:"&#x21E7;",meta:"&#x2318;",access:"&#x2303;&#x2325;"}:{meta:"Ctrl ",access:"Shift + Alt "},e=e.split("+"),e=g(e,function(e){var t=e.toLowerCase().trim();return x(n,t)?n[t]:e});return E.mac?e.join("").replace(/\s/,""):e.join("+")},A=[{shortcuts:["Meta + B"],action:"Bold"},{shortcuts:["Meta + I"],action:"Italic"},{shortcuts:["Meta + U"],action:"Underline"},{shortcuts:["Meta + A"],action:"Select all"},{shortcuts:["Meta + Y","Meta + Shift + Z"],action:"Redo"},{shortcuts:["Meta + Z"],action:"Undo"},{shortcuts:["Access + 1"],action:"Heading 1"},{shortcuts:["Access + 2"],action:"Heading 2"},{shortcuts:["Access + 3"],action:"Heading 3"},{shortcuts:["Access + 4"],action:"Heading 4"},{shortcuts:["Access + 5"],action:"Heading 5"},{shortcuts:["Access + 6"],action:"Heading 6"},{shortcuts:["Access + 7"],action:"Paragraph"},{shortcuts:["Access + 8"],action:"Div"},{shortcuts:["Access + 9"],action:"Address"},{shortcuts:["Alt + 0"],action:"Open help dialog"},{shortcuts:["Alt + F9"],action:"Focus to menubar"},{shortcuts:["Alt + F10"],action:"Focus to toolbar"},{shortcuts:["Alt + F11"],action:"Focus to element path"},{shortcuts:["Ctrl + F9"],action:"Focus to contextual toolbar"},{shortcuts:["Shift + Enter"],action:"Open popup menu for split buttons"},{shortcuts:["Meta + K"],action:"Insert link (if link plugin activated)"},{shortcuts:["Meta + S"],action:"Save (if save plugin activated)"},{shortcuts:["Meta + F"],action:"Find (if searchreplace plugin activated)"},{shortcuts:["Meta + Shift + F"],action:"Switch to or from fullscreen mode"}],D=function(){return{name:"shortcuts",title:"Handy Shortcuts",items:[{type:"table",header:["Action","Shortcut"],cells:g(A,function(e){var t=g(e.shortcuts,_).join(" or ");return[e.action,t]})}]}},M=tinymce.util.Tools.resolve("tinymce.util.I18n"),N=g([{key:"advlist",name:"Advanced List"},{key:"anchor",name:"Anchor"},{key:"autolink",name:"Autolink"},{key:"autoresize",name:"Autoresize"},{key:"autosave",name:"Autosave"},{key:"bbcode",name:"BBCode"},{key:"charmap",name:"Character Map"},{key:"code",name:"Code"},{key:"codesample",name:"Code Sample"},{key:"colorpicker",name:"Color Picker"},{key:"directionality",name:"Directionality"},{key:"emoticons",name:"Emoticons"},{key:"fullpage",name:"Full Page"},{key:"fullscreen",name:"Full Screen"},{key:"help",name:"Help"},{key:"hr",name:"Horizontal Rule"},{key:"image",name:"Image"},{key:"imagetools",name:"Image Tools"},{key:"importcss",name:"Import CSS"},{key:"insertdatetime",name:"Insert Date/Time"},{key:"legacyoutput",name:"Legacy Output"},{key:"link",name:"Link"},{key:"lists",name:"Lists"},{key:"media",name:"Media"},{key:"nonbreaking",name:"Nonbreaking"},{key:"noneditable",name:"Noneditable"},{key:"pagebreak",name:"Page Break"},{key:"paste",name:"Paste"},{key:"preview",name:"Preview"},{key:"print",name:"Print"},{key:"quickbars",name:"Quick Toolbars"},{key:"save",name:"Save"},{key:"searchreplace",name:"Search and Replace"},{key:"spellchecker",name:"Spell Checker"},{key:"tabfocus",name:"Tab Focus"},{key:"table",name:"Table"},{key:"template",name:"Template"},{key:"textcolor",name:"Text Color"},{key:"textpattern",name:"Text Pattern"},{key:"toc",name:"Table of Contents"},{key:"visualblocks",name:"Visual Blocks"},{key:"visualchars",name:"Visual Characters"},{key:"wordcount",name:"Word Count"},{key:"a11ychecker",name:"Accessibility Checker",type:"premium"},{key:"advcode",name:"Advanced Code Editor",type:"premium"},{key:"advtable",name:"Advanced Tables",type:"premium"},{key:"autocorrect",name:"Autocorrect",type:"premium"},{key:"casechange",name:"Case Change",type:"premium"},{key:"checklist",name:"Checklist",type:"premium"},{key:"export",name:"Export",type:"premium"},{key:"mediaembed",name:"Enhanced Media Embed",type:"premium"},{key:"formatpainter",name:"Format Painter",type:"premium"},{key:"linkchecker",name:"Link Checker",type:"premium"},{key:"mentions",name:"Mentions",type:"premium"},{key:"pageembed",name:"Page Embed",type:"premium"},{key:"permanentpen",name:"Permanent Pen",type:"premium"},{key:"powerpaste",name:"PowerPaste",type:"premium"},{key:"rtc",name:"Real-Time Collaboration",type:"premium"},{key:"tinymcespellchecker",name:"Spell Checker Pro",type:"premium"},{key:"tinycomments",name:"Tiny Comments",type:"premium",slug:"comments"},{key:"tinydrive",name:"Tiny Drive",type:"premium"}],function(e){return c(c({},e),{type:e.type||"opensource",slug:e.slug||e.key})}),R=function(e){var t,n,r=function(e){return'<a href="'+e.url+'" target="_blank" rel="noopener">'+e.name+"</a>"},o=function(t,n){return v(N,function(e){return e.key===n}).fold(function(){var e=t.plugins[n].getMetadata;return"function"==typeof e?r(e()):n},function(e){var t="premium"===e.type?e.name+"*":e.name;return r({name:t,url:"https://www.tiny.cloud/docs/plugins/"+e.type+"/"+e.slug})})};return{name:"plugins",title:"Plugins",items:[{type:"htmlpanel",presets:"document",html:[null==(e=e)?"":'<div data-mce-tabstop="1" tabindex="-1">'+(e=function(e){var t=b(e.plugins),n=k(e);return void 0===n?t:p(t,function(e){return!m(n,e)})}(t=e),e=g(e,function(e){return"<li>"+o(t,e)+"</li>"}),n=e.length,e=e.join(""),"<p><b>")+M.translate(["Plugins installed ({0}):",n])+"</b></p><ul>"+e+"</ul></div>",(n=p(N,function(e){var t=e.key,e=e.type;return"autocorrect"!==t&&"premium"===e}),n=g(n,function(e){return"<li>"+M.translate(e.name)+"</li>"}).join(""),'<div data-mce-tabstop="1" tabindex="-1"><p><b>'+M.translate("Premium plugins:")+"</b></p><ul>"+n+'<li class="tox-help__more-link" "><a href="https://www.tiny.cloud/pricing/?utm_campaign=editor_referral&utm_medium=help_dialog&utm_source=tinymce" target="_blank">'+M.translate("Learn more...")+"</a></li></ul></div>")].join("")}]}},z=tinymce.util.Tools.resolve("tinymce.EditorManager"),B=function(){t=z.majorVersion,e=z.minorVersion;var e,t=0===t.indexOf("@")?"X.X.X":t+"."+e;return{name:"versions",title:"Version",items:[{type:"htmlpanel",html:"<p>"+M.translate(["You are using {0}",'<a href="https://www.tiny.cloud/docs/changelog/?utm_campaign=editor_referral&utm_medium=help_dialog&utm_source=tinymce" target="_blank">TinyMCE '+t+"</a>"])+"</p>",presets:"document"}]}},P=function(e,t){var n={},e=g(e,function(e){return"string"==typeof e?(x(t,e)&&(n[e]=t[e]),e):(n[e.name]=e).name});return{tabs:n,names:e}},I=function(e){var t=b(e),n=t.indexOf("versions");return-1!==n&&(t.splice(n,1),t.push("versions")),{tabs:e,names:t}},L=function(e,t){var n,r=D(),o=O(),i=R(e),u=B(),a=c(((n={})[r.name]=r,n[o.name]=o,n[i.name]=i,n[u.name]=u,n),t.get());return S(e).fold(function(){return I(a)},function(e){return P(e,a)})};n.add("help",function(e){function t(){var t=(e=L(o,i)).tabs,e=e.names,e=g(e,function(e){return w(t,e)}),e=C(e);o.windowManager.open({title:"Help",size:"medium",body:{type:"tabpanel",tabs:e},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:{}})}n={};var n,r,o,i,u,a={get:function(){return n},set:function(e){n=e}},c={addTab:function(e){var t=r.get();t[e.name]=e,r.set(t)}};i=r=a;return a=t,(u=o=e).ui.registry.addButton("help",{icon:"help",tooltip:"Help",onAction:a}),u.ui.registry.addMenuItem("help",{text:"Help",icon:"help",shortcut:"Alt+0",onAction:a}),e.addCommand("mceHelp",t),e.shortcuts.add("Alt+0","Open help dialog","mceHelp"),c})}(),function(){var e=tinymce.util.Tools.resolve("tinymce.PluginManager");e.add("hr",function(e){var t,n;function r(){return n.execCommand("InsertHorizontalRule")}(t=e).addCommand("InsertHorizontalRule",function(){t.execCommand("mceInsertContent",!1,"<hr />")}),(n=e).ui.registry.addButton("hr",{icon:"horizontal-rule",tooltip:"Horizontal line",onAction:r}),n.ui.registry.addMenuItem("hr",{icon:"horizontal-rule",text:"Horizontal line",onAction:r})})}(),function(){function e(n){return function(e){return t=typeof(e=e),(null===e?"null":"object"==t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"==t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t)===n;var t}}function t(t){return function(e){return typeof e===t}}function i(e){return function(){return e}}function n(e){return e}function r(){return f}var o,P=tinymce.util.Tools.resolve("tinymce.PluginManager"),u=function(){return(u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},h=e("string"),a=e("object"),I=e("array"),L=function(e){return o===e},F=t("boolean"),H=function(e){return null==e},c=function(e){return!H(e)},V=t("function"),j=t("number"),U=function(){},s=i(!1),l=i(!(o=null)),f={fold:function(e,t){return e()},isSome:s,isNone:l,getOr:n,getOrThunk:W,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:i(null),getOrUndefined:i(void 0),or:n,orThunk:W,map:r,each:U,bind:r,exists:s,forall:l,filter:function(){return f},toArray:function(){return[]},toString:i("none()")};function W(e){return e()}function d(n){function e(){return o}function t(e){return e(n)}var r=i(n),o={fold:function(e,t){return t(n)},isSome:l,isNone:s,getOr:r,getOrThunk:r,getOrDie:r,getOrNull:r,getOrUndefined:r,or:e,orThunk:e,map:function(e){return d(e(n))},each:function(e){e(n)},bind:t,exists:t,forall:t,filter:function(e){return e(n)?o:f},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return o}function m(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}}function $(e){return h(e.value)?e.value:""}function q(t){return void 0===t&&(t=$),function(e){return e?v.from(e).map(function(e){return ht(e,t)}):v.none()}}function G(e){var t=e.imageList.map(function(e){return{name:"images",type:"listbox",label:"Image list",items:e}}),n={name:"alt",type:"input",label:"Alternative description",disabled:e.hasAccessibilityOptions&&e.image.isDecorative},r=e.classList.map(function(e){return{name:"classes",type:"listbox",label:"Class",items:e}});return b([[{name:"src",type:"urlinput",filetype:"image",label:"Source"}],t.toArray(),e.hasAccessibilityOptions&&e.hasDescription?[{type:"label",label:"Accessibility",items:[{name:"isDecorative",type:"checkbox",label:"Image is decorative"}]}]:[],e.hasDescription?[n]:[],e.hasImageTitle?[{name:"title",type:"input",label:"Image title"}]:[],e.hasDimensions?[{name:"dimensions",type:"sizeinput"}]:[],[u(u({},e.classList.isSome()&&e.hasImageCaption?{type:"grid",columns:2}:{type:"panel"}),{items:b([r.toArray(),e.hasImageCaption?[{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[]])})]])}var K,v={some:d,none:r,from:function(e){return null==e?f:d(e)}},X=Object.keys,Y=Object.hasOwnProperty,J=function(e,t){for(var n=X(e),r=0,o=n.length;r<o;r++){var i=n[r];t(e[i],i)}},Z=function(n){return function(e,t){n[t]=e}},Q=function(e,n,r,o){return J(e,function(e,t){(n(e,t)?r:o)(e,t)}),{}},ee=function(e,t){var n={};return Q(e,t,Z(n),U),n},g=function(e,t){return Y.call(e,t)},te=function(e,t){return g(e,t)&&void 0!==e[t]&&null!==e[t]},ne=Array.prototype.push,b=function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!I(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);ne.apply(t,e[n])}return t},re=function(e,t){return 0<=t&&t<e.length?v.some(e[t]):v.none()},oe=function(e){return re(e,0)},ie=function(e,t){for(var n=0;n<e.length;n++){var r=t(e[n],n);if(r.isSome())return r}return v.none()},ue=("undefined"!=typeof window||Function("return this;")(),function(e,t,n){if(!(h(n)||F(n)||j(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")}),ae=function(e,t,n){ue(e.dom,t,n)},ce=function(e,t){e.dom.removeAttribute(t)},p={fromHtml:function(e,t){t=(t||document).createElement("div");if(t.innerHTML=e,!t.hasChildNodes()||1<t.childNodes.length)throw console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node");return m(t.childNodes[0])},fromTag:function(e,t){t=(t||document).createElement(e);return m(t)},fromText:function(e,t){t=(t||document).createTextNode(e);return m(t)},fromDom:m,fromPoint:function(e,t,n){return v.from(e.dom.elementFromPoint(t,n)).map(m)}},se=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),y=tinymce.util.Tools.resolve("tinymce.util.Promise"),le=tinymce.util.Tools.resolve("tinymce.util.URI"),fe=tinymce.util.Tools.resolve("tinymce.util.XHR"),de=function(e){return e.getParam("image_dimensions",!0,"boolean")},me=function(e){return e.getParam("image_advtab",!1,"boolean")},ge=function(e){return e.getParam("image_uploadtab",!0,"boolean")},pe=function(e){return e.getParam("image_prepend_url","","string")},he=function(e){return e.getParam("image_class_list")},ve=function(e){return e.getParam("image_description",!0,"boolean")},be=function(e){return e.getParam("image_title",!1,"boolean")},ye=function(e){return e.getParam("image_caption",!1,"boolean")},we=function(e){return e.getParam("image_list",!1)},xe=function(e){return c(e.getParam("images_upload_url"))},Ce=function(e){return c(e.getParam("images_upload_handler"))},Se=function(e){return e.getParam("a11y_advanced_options",!1,"boolean")},ke=function(e){return e.getParam("automatic_uploads",!0,"boolean")},Te=function(e,t){return Math.max(parseInt(e,10),parseInt(t,10))},Oe=function(o){return new y(function(t){function n(e){r.onload=r.onerror=null,r.parentNode&&r.parentNode.removeChild(r),t(e)}var r=document.createElement("img"),e=(r.onload=function(){var e=Te(r.width,r.clientWidth),t=Te(r.height,r.clientHeight);n(y.resolve({width:e,height:t}))},r.onerror=function(){n(y.reject("Failed to get image dimensions for: "+o))},r.style);e.visibility="hidden",e.position="fixed",e.bottom=e.left="0px",e.width=e.height="auto",document.body.appendChild(r),r.src=o})},w=function(e){return e=e&&e.replace(/px$/,"")},x=function(e){return 0<e.length&&/^[0-9]+$/.test(e)&&(e+="px"),e},Ee=function(e){if(e.margin){var t=String(e.margin).split(" ");switch(t.length){case 1:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[0],e["margin-bottom"]=e["margin-bottom"]||t[0],e["margin-left"]=e["margin-left"]||t[0];break;case 2:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[0],e["margin-left"]=e["margin-left"]||t[1];break;case 3:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[2],e["margin-left"]=e["margin-left"]||t[1];break;case 4:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[2],e["margin-left"]=e["margin-left"]||t[3]}delete e.margin}return e},_e=function(e,t){e=we(e);h(e)?fe.send({url:e,success:function(e){t(JSON.parse(e))}}):V(e)?e(t):t(e)},Ae=function(e,t,n){function r(){n.onload=n.onerror=null,e.selection&&(e.selection.select(n),e.nodeChanged())}n.onload=function(){t.width||t.height||!de(e)||e.dom.setAttribs(n,{width:String(n.clientWidth),height:String(n.clientHeight)}),r()},n.onerror=r},De=function(r){return new y(function(e,t){var n=new FileReader;n.onload=function(){e(n.result)},n.onerror=function(){t(n.error.message)},n.readAsDataURL(r)})},Me=function(e){return"IMG"===e.nodeName&&(e.hasAttribute("data-mce-object")||e.hasAttribute("data-mce-placeholder"))},Ne=function(e,t){return le.isDomSafe(t,"img",e.settings)},C=se.DOM,Re=function(e){return e.style.marginLeft&&e.style.marginRight&&e.style.marginLeft===e.style.marginRight?w(e.style.marginLeft):""},ze=function(e){return e.style.marginTop&&e.style.marginBottom&&e.style.marginTop===e.style.marginBottom?w(e.style.marginTop):""},Be=function(e){return e.style.borderWidth?w(e.style.borderWidth):""},S=function(e,t){return e.hasAttribute(t)?e.getAttribute(t):""},Pe=function(e,t){return e.style[t]||""},Ie=function(e){return null!==e.parentNode&&"FIGURE"===e.parentNode.nodeName},k=function(e,t,n){""===n?e.removeAttribute(t):e.setAttribute(t,n)},Le=function(e){var t=C.create("figure",{class:"image"});C.insertAfter(t,e),t.appendChild(e),t.appendChild(C.create("figcaption",{contentEditable:"true"},"Caption")),t.contentEditable="false"},Fe=function(e){var t=e.parentNode;C.insertAfter(e,t),C.remove(t)},He=function(e){(Ie(e)?Fe:Le)(e)},Ve=function(e,t){var n=e.getAttribute("style"),t=t(null!==n?n:"");0<t.length?(e.setAttribute("style",t),e.setAttribute("data-mce-style",t)):e.removeAttribute("style")},je=function(e,r){return function(e,t,n){e.style[t]?(e.style[t]=x(n),Ve(e,r)):k(e,t,n)}},Ue=function(e,t){return e.style[t]?w(e.style[t]):S(e,t)},We=function(e,t){t=x(t);e.style.marginLeft=t,e.style.marginRight=t},$e=function(e,t){t=x(t);e.style.marginTop=t,e.style.marginBottom=t},qe=function(e,t){t=x(t);e.style.borderWidth=t},Ge=function(e,t){e.style.borderStyle=t},Ke=function(e){return Pe(e,"borderStyle")},T=function(e){return"FIGURE"===e.nodeName},Xe=function(e){return"IMG"===e.nodeName},Ye=function(e){return 0===C.getAttrib(e,"alt").length&&"presentation"===C.getAttrib(e,"role")},Je=function(e){return Ye(e)?"":S(e,"alt")},Ze=function(){return{src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}},Qe=function(e,t){var n=document.createElement("img");return k(n,"style",t.style),!Re(n)&&""===t.hspace||We(n,t.hspace),!ze(n)&&""===t.vspace||$e(n,t.vspace),!Be(n)&&""===t.border||qe(n,t.border),!Ke(n)&&""===t.borderStyle||Ge(n,t.borderStyle),e(n.getAttribute("style"))},et=function(e,t){var n=document.createElement("img");return rt(e,u(u({},t),{caption:!1}),n),tt(n,t.alt,t.isDecorative),t.caption?((e=C.create("figure",{class:"image"})).appendChild(n),e.appendChild(C.create("figcaption",{contentEditable:"true"},"Caption")),e.contentEditable="false",e):n},O=function(e,t){return{src:S(t,"src"),alt:Je(t),title:S(t,"title"),width:Ue(t,"width"),height:Ue(t,"height"),class:S(t,"class"),style:e(S(t,"style")),caption:Ie(t),hspace:Re(t),vspace:ze(t),border:Be(t),borderStyle:Pe(t,"borderStyle"),isDecorative:Ye(t)}},E=function(e,t,n,r,o){n[r]!==t[r]&&o(e,r,n[r])},tt=function(e,t,n){var r;n?(C.setAttrib(e,"role","presentation"),r=p.fromDom(e),ae(r,"alt","")):(L(t)?(r=p.fromDom(e),ce(r,"alt")):(r=p.fromDom(e),ae(r,"alt",t)),"presentation"===C.getAttrib(e,"role")&&C.setAttrib(e,"role",""))},nt=function(e,t,n){n.alt===t.alt&&n.isDecorative===t.isDecorative||tt(e,n.alt,n.isDecorative)},_=function(r,o){return function(e,t,n){r(e,n),Ve(e,o)}},rt=function(e,t,n){var r=O(e,n);E(n,r,t,"caption",function(e,t,n){return He(e)}),E(n,r,t,"src",k),E(n,r,t,"title",k),E(n,r,t,"width",je("width",e)),E(n,r,t,"height",je("height",e)),E(n,r,t,"class",k),E(n,r,t,"style",_(function(e,t){return k(e,"style",t)},e)),E(n,r,t,"hspace",_(We,e)),E(n,r,t,"vspace",_($e,e)),E(n,r,t,"border",_(qe,e)),E(n,r,t,"borderStyle",_(Ge,e)),nt(n,r,t)},A=function(e,t){t=e.dom.styles.parse(t),t=Ee(t),t=e.dom.styles.parse(e.dom.styles.serialize(t));return e.dom.styles.serialize(t)},D=function(e){var t=e.selection.getNode(),n=e.dom.getParent(t,"figure.image");return n?e.dom.select("img",n)[0]:t&&("IMG"!==t.nodeName||Me(t))?null:t},ot=function(n,e){var t=n.dom,r=ee(n.schema.getTextBlockElements(),function(e,t){return!n.schema.isValidChild(t,"figure")}),o=t.getParent(e.parentNode,function(e){return te(r,e.nodeName)},n.getBody());return o?t.split(o,e):e},it=function(t){var e=D(t);return e?O(function(e){return A(t,e)},e):Ze()},ut=function(t,e){var n,e=et(function(e){return A(t,e)},e),e=(t.dom.setAttrib(e,"data-mce-id","__mcenew"),t.focus(),t.selection.setContent(e.outerHTML),t.dom.select('*[data-mce-id="__mcenew"]')[0]);t.dom.setAttrib(e,"data-mce-id",null),T(e)?(n=ot(t,e),t.selection.select(n)):t.selection.select(e)},at=function(e,t){e.dom.setAttrib(t,"src",t.getAttribute("src"))},ct=function(e,t){t&&(t=e.dom.is(t.parentNode,"figure.image")?t.parentNode:t,e.dom.remove(t),e.focus(),e.nodeChanged(),e.dom.isEmpty(e.getBody()))&&(e.setContent(""),e.selection.setCursorLocation())},st=function(t,e){var n,r=D(t);rt(function(e){return A(t,e)},e,r),at(t,r),T(r.parentNode)?(n=r.parentNode,ot(t,n),t.selection.select(r.parentNode)):(t.selection.select(r),Ae(t,e,r))},lt=function(e,t){var n=t.src;return u(u({},t),{src:Ne(e,n)?n:""})},ft=function(t,e){var n,r,o=D(t);o?(n=O(function(e){return A(t,e)},o),n=u(u({},n),e),r=lt(t,n),n.src?st(t,r):ct(t,o)):e.src&&ut(t,u(u({},Ze()),e))},M=(K=function(e,t){return a(e)&&a(t)?M(e,t):t},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)throw new Error("Can't merge zero objects");for(var n={},r=0;r<e.length;r++){var o,i=e[r];for(o in i)g(i,o)&&(n[o]=K(n[o],i[o]))}return n}),dt=function(e){return 0<e.length},mt=tinymce.util.Tools.resolve("tinymce.util.ImageUploader"),gt=tinymce.util.Tools.resolve("tinymce.util.Tools"),pt=function(e){return h(e.text)?e.text:h(e.title)?e.title:""},ht=function(e,r){var o=[];return gt.each(e,function(e){var t,n=pt(e);void 0!==e.menu?(t=ht(e.menu,r),o.push({text:n,items:t})):(t=r(e),o.push({text:n,value:t}))}),o},vt=function(e){return g(e,"items")},bt=function(e,t){return ie(e,function(e){return vt(e)?bt(e.items,t):e.value===t?v.some(e):v.none()})},N={sanitizer:q,sanitize:function(e){return q($)(e)},findEntry:function(e,t){return e.bind(function(e){return bt(e,t)})}},yt={makeTab:function(e){return{title:"Advanced",name:"advanced",items:[{type:"input",label:"Style",name:"style"},{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace",inputMode:"numeric"},{type:"input",label:"Horizontal space",name:"hspace",inputMode:"numeric"},{type:"input",label:"Border width",name:"border",inputMode:"numeric"},{type:"listbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]}}},wt=function(n){var r=N.sanitizer(function(e){return n.convertURL(e.value||e.url,"src")}),e=new y(function(t){_e(n,function(e){t(r(e).map(function(e){return b([[{text:"None",value:""}],e])}))})}),t=N.sanitize(he(n)),o=me(n),i=ge(n),u=xe(n),a=Ce(n),c=it(n),s=ve(n),l=be(n),f=de(n),d=ye(n),m=Se(n),g=ke(n),p=v.some(pe(n)).filter(function(e){return h(e)&&0<e.length});return e.then(function(e){return{image:c,imageList:e,classList:t,hasAdvTab:o,hasUploadTab:i,hasUploadUrl:u,hasUploadHandler:a,hasDescription:s,hasImageTitle:l,hasDimensions:f,hasImageCaption:d,prependURL:p,hasAccessibilityOptions:m,automaticUploads:g}})},xt={makeTab:function(e){return{title:"General",name:"general",items:G(e)}},makeItems:G},Ct={makeTab:function(e){return{title:"Upload",name:"upload",items:[{type:"dropzone",name:"fileinput"}]}}},St=function(e){return{prevImage:N.findEntry(e.imageList,e.image.src),prevAlt:e.image.alt,open:!0}},R=function(e){return{src:{value:e.src,meta:{}},images:e.src,alt:e.alt,title:e.title,dimensions:{width:e.width,height:e.height},classes:e.class,caption:e.caption,style:e.style,vspace:e.vspace,border:e.border,hspace:e.hspace,borderstyle:e.borderStyle,fileinput:[],isDecorative:e.isDecorative}},kt=function(e,t){return{src:e.src.value,alt:0===e.alt.length&&t?null:e.alt,title:e.title,width:e.dimensions.width,height:e.dimensions.height,class:e.classes,style:e.style,caption:e.caption,hspace:e.hspace,vspace:e.vspace,border:e.border,borderStyle:e.borderstyle,isDecorative:e.isDecorative}},Tt=function(e,t){return/^(?:[a-zA-Z]+:)?\/\//.test(t)?v.none():e.prependURL.bind(function(e){return t.substring(0,e.length)!==e?v.some(e+t):v.none()})},Ot=function(e,t){var n=t.getData();Tt(e,n.src.value).each(function(e){t.setData({src:{value:e,meta:n.src.meta}})})},Et=function(e,t,n){e.hasDescription&&h(n.alt)&&(t.alt=n.alt),e.hasAccessibilityOptions&&(t.isDecorative=n.isDecorative||t.isDecorative||!1),e.hasImageTitle&&h(n.title)&&(t.title=n.title),e.hasDimensions&&(h(n.width)&&(t.dimensions.width=n.width),h(n.height))&&(t.dimensions.height=n.height),h(n.class)&&N.findEntry(e.classList,n.class).each(function(e){t.classes=e.value}),e.hasImageCaption&&F(n.caption)&&(t.caption=n.caption),e.hasAdvTab&&(h(n.style)&&(t.style=n.style),h(n.vspace)&&(t.vspace=n.vspace),h(n.border)&&(t.border=n.border),h(n.hspace)&&(t.hspace=n.hspace),h(n.borderstyle))&&(t.borderstyle=n.borderstyle)},_t=function(e,t){var n=t.getData(),r=n.src.meta;void 0!==r&&(n=M({},n),Et(e,n,r),t.setData(n))},At=function(e,t,n,r){var o=r.getData(),i=o.src.value,o=o.src.meta||{};o.width||o.height||!t.hasDimensions||(dt(i)?e.imageSize(i).then(function(e){n.open&&r.setData({dimensions:e})}).catch(function(e){return console.error(e)}):r.setData({dimensions:{width:"",height:""}}))},Dt=function(e,t,n){var r=n.getData(),e=N.findEntry(e.imageList,r.src.value);t.prevImage=e,n.setData({images:e.map(function(e){return e.value}).getOr("")})},z=function(e,t,n,r){Ot(t,r),_t(t,r),At(e,t,n,r),Dt(t,n,r)},Mt=function(e,t,n,r){var o=r.getData(),i=N.findEntry(t.imageList,o.images);i.each(function(e){""===o.alt||n.prevImage.map(function(e){return e.text===o.alt}).getOr(!1)?""===e.value?r.setData({src:e,alt:n.prevAlt}):r.setData({src:e,alt:e.text}):r.setData({src:e})}),n.prevImage=i,z(e,t,n,r)},Nt=function(e){return e["margin-top"]&&e["margin-bottom"]&&e["margin-top"]===e["margin-bottom"]?w(String(e["margin-top"])):""},Rt=function(e){return e["margin-right"]&&e["margin-left"]&&e["margin-right"]===e["margin-left"]?w(String(e["margin-right"])):""},zt=function(e){return e["border-width"]?w(String(e["border-width"])):""},Bt=function(e){return e["border-style"]?String(e["border-style"]):""},Pt=function(e,t,n){return t(e(t(n)))},It=function(e,t,n){var r=Ee(e(n.style)),n=M({},n);return n.vspace=Nt(r),n.hspace=Rt(r),n.border=zt(r),n.borderstyle=Bt(r),n.style=Pt(e,t,r),n},Lt=function(e,t){var n=t.getData(),e=It(e.parseStyle,e.serializeStyle,n);t.setData(e)},Ft=function(e,t,n){t=M(R(t.image),n.getData()),e=Qe(e.normalizeCss,kt(t,!1));n.setData({style:e})},Ht=function(i,u,a,c){var e=c.getData();c.block("Uploading image"),oe(e.fileinput).fold(function(){c.unblock()},function(t){function n(){c.unblock(),URL.revokeObjectURL(o)}function r(e){c.setData({src:{value:e,meta:{}}}),c.showTab("general"),z(i,u,a,c)}var o=URL.createObjectURL(t);De(t).then(function(e){e=i.createBlobCache(t,o,e);u.automaticUploads?i.uploadImage(e).then(function(e){r(e.url),n()}).catch(function(e){n(),i.alertErr(e)}):(i.addToBlobCache(e),r(e.blobUri()),c.unblock())})})},Vt=function(n,r,o){return function(e,t){"src"===t.name?z(n,r,o,e):"images"===t.name?Mt(n,r,o,e):"alt"===t.name?o.prevAlt=e.getData().alt:"style"===t.name?Lt(n,e):"vspace"===t.name||"hspace"===t.name||"border"===t.name||"borderstyle"===t.name?Ft(n,r,e):"fileinput"===t.name?Ht(n,r,o,e):"isDecorative"===t.name&&(e.getData().isDecorative?e.disable("alt"):e.enable("alt"))}},jt=function(e){return function(){e.open=!1}},Ut=function(e){return e.hasAdvTab||e.hasUploadUrl||e.hasUploadHandler?{type:"tabpanel",tabs:b([[xt.makeTab(e)],e.hasAdvTab?[yt.makeTab(e)]:[],e.hasUploadTab&&(e.hasUploadUrl||e.hasUploadHandler)?[Ct.makeTab(e)]:[]])}:{type:"panel",items:xt.makeItems(e)}},Wt=function(n){return function(e){var t=St(e);return{title:"Insert/Edit Image",size:"normal",body:Ut(e),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:R(e.image),onSubmit:n.onSubmit(e),onChange:Vt(n,e,t),onClose:jt(t)}}},$t=function(r){return function(n){return function(e){var t=M(R(n.image),e.getData());r.execCommand("mceUpdateImage",!1,kt(t,n.hasAccessibilityOptions)),r.editorUpload.uploadImagesAuto(),e.close()}}},qt=function(t){return function(e){return Ne(t,e)?Oe(t.documentBaseURI.toAbsolute(e)).then(function(e){return{width:String(e.width),height:String(e.height)}}):y.resolve({width:"",height:""})}},Gt=function(r){return function(e,t,n){return r.editorUpload.blobCache.create({blob:e,blobUri:t,name:e.name?e.name.replace(/\.[^\.]+$/,""):null,filename:e.name,base64:n.split(",")[1]})}},Kt=function(t){return function(e){t.editorUpload.blobCache.add(e)}},Xt=function(t){return function(e){t.windowManager.alert(e)}},Yt=function(t){return function(e){return A(t,e)}},Jt=function(t){return function(e){return t.dom.parseStyle(e)}},Zt=function(n){return function(e,t){return n.dom.serializeStyle(e,t)}},Qt=function(t){return function(e){return mt(t).upload([e],!1).then(function(e){return 0===e.length?y.reject("Failed to upload image"):!1===e[0].status?y.reject(e[0].error.message):e[0]})}},B=function(e){var t={onSubmit:$t(e),imageSize:qt(e),addToBlobCache:Kt(e),createBlobCache:Gt(e),alertErr:Xt(e),normalizeCss:Yt(e),parseStyle:Jt(e),serializeStyle:Zt(e),uploadImage:Qt(e)};return{open:function(){wt(e).then(Wt(t)).then(e.windowManager.open)}}},en=function(e){e=e.attr("class");return e&&/\bimage\b/.test(e)},tn=function(o){return function(e){for(var t=e.length,n=function(e){e.attr("contenteditable",o?"true":null)};t--;){var r=e[t];en(r)&&(r.attr("contenteditable",o?"false":null),gt.each(r.getAll("figcaption"),n))}}};P.add("image",function(e){var t,n,r;(t=e).on("PreInit",function(){t.parser.addNodeFilter("figure",tn(!0)),t.serializer.addNodeFilter("figure",tn(!1))}),(n=e).ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:B(n).open,onSetup:function(e){return e.setActive(c(D(n))),n.selection.selectorChangedWithUnbind("img:not([data-mce-object],[data-mce-placeholder]),figure.image",e.setActive).unbind}}),n.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:B(n).open}),n.ui.registry.addContextMenu("image",{update:function(e){return T(e)||Xe(e)&&!Me(e)?["image"]:[]}}),(r=e).addCommand("mceImage",B(r).open),r.addCommand("mceUpdateImage",function(e,t){r.undoManager.transact(function(){return ft(r,t)})})})}(),function(){function s(e){var t=e;return{get:function(){return t},set:function(e){t=e}}}function P(e){return e}function e(){return d}var n,t,r,I=tinymce.util.Tools.resolve("tinymce.PluginManager"),l=tinymce.util.Tools.resolve("tinymce.util.Tools"),c=(n="array",function(e){return t=typeof(e=e),(null===e?"null":"object"==t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"==t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t)===n;var t}),L=function(e){return null==e},g=function(e){return!L(e)},F=function(e){return typeof e===t},a=function(){},u=function(e){return function(){return e}},i=u(!(t="function")),f=u(!0),d={fold:function(e,t){return e()},isSome:i,isNone:f,getOr:r=P,getOrThunk:o,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:u(null),getOrUndefined:u(void 0),or:r,orThunk:o,map:e,each:a,bind:e,exists:i,forall:f,filter:function(){return d},toArray:function(){return[]},toString:u("none()")};function o(e){return e()}function m(n){function e(){return o}function t(e){return e(n)}var r=u(n),o={fold:function(e,t){return t(n)},isSome:f,isNone:i,getOr:r,getOrThunk:r,getOrDie:r,getOrNull:r,getOrUndefined:r,or:e,orThunk:e,map:function(e){return m(e(n))},each:function(e){e(n)},bind:t,exists:t,forall:t,filter:function(e){return e(n)?o:d},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return o}function p(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}}function H(t){function n(e){return function(){return t.execCommand(e)}}function e(){return B(t).exists(function(e){return z(t,e.dom).isSome()})}function r(t){function n(e){return t.setDisabled(!e)}return n(e()),o=o.concat([n]),function(){o=ne(o,function(e){return e!==n})}}var o=[];t.on("NodeChange",function(){var t=e();T(o,function(e){return e(t)})}),t.ui.registry.addButton("rotateleft",{tooltip:"Rotate counterclockwise",icon:"rotate-left",onAction:n("mceImageRotateLeft"),onSetup:r}),t.ui.registry.addButton("rotateright",{tooltip:"Rotate clockwise",icon:"rotate-right",onAction:n("mceImageRotateRight"),onSetup:r}),t.ui.registry.addButton("flipv",{tooltip:"Flip vertically",icon:"flip-vertically",onAction:n("mceImageFlipVertical"),onSetup:r}),t.ui.registry.addButton("fliph",{tooltip:"Flip horizontally",icon:"flip-horizontally",onAction:n("mceImageFlipHorizontal"),onSetup:r}),t.ui.registry.addButton("editimage",{tooltip:"Edit image",icon:"edit-image",onAction:n("mceEditImage"),onSetup:r}),t.ui.registry.addButton("imageoptions",{tooltip:"Image options",icon:"image",onAction:n("mceImage")}),t.ui.registry.addContextMenu("imagetools",{update:function(e){return z(t,e).map(function(e){return{text:"Edit image",icon:"edit-image",onAction:n("mceEditImage")}}).toArray()}})}var h={some:m,none:e,from:function(e){return null==e?d:m(e)}},v={},b={exports:v},y=(!function(e){var t,n;t=this,n=function(){var t,e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n={exports:{}};function r(){}function i(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],l(e,this)}function o(n,r){for(;3===n._state;)n=n._value;0===n._state?n._deferreds.push(r):(n._handled=!0,i._immediateFn(function(){var e,t=1===n._state?r.onFulfilled:r.onRejected;if(null===t)(1===n._state?u:a)(r.promise,n._value);else{try{e=t(n._value)}catch(e){return void a(r.promise,e)}u(r.promise,e)}}))}function u(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof i)return t._state=3,t._value=e,void c(t);if("function"==typeof n)return void l((r=n,o=e,function(){r.apply(o,arguments)}),t)}t._state=1,t._value=e,c(t)}catch(e){a(t,e)}var r,o}function a(e,t){e._state=2,e._value=t,c(e)}function c(e){2===e._state&&0===e._deferreds.length&&i._immediateFn(function(){e._handled||i._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)o(e,e._deferreds[t]);e._deferreds=null}function s(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function l(e,t){var n=!1;try{e(function(e){n||(n=!0,u(t,e))},function(e){n||(n=!0,a(t,e))})}catch(e){n||(n=!0,a(t,e))}}f=n,e=e,t=setTimeout,i.prototype.catch=function(e){return this.then(null,e)},i.prototype.then=function(e,t){var n=new this.constructor(r);return o(this,new s(e,t,n)),n},i.all=function(e){var a=Array.prototype.slice.call(e);return new i(function(o,i){if(0===a.length)return o([]);var u=a.length;for(var e=0;e<a.length;e++)!function t(n,e){try{if(e&&("object"==typeof e||"function"==typeof e)){var r=e.then;if("function"==typeof r)return void r.call(e,function(e){t(n,e)},i)}a[n]=e,0==--u&&o(a)}catch(e){i(e)}}(e,a[e])})},i.resolve=function(t){return t&&"object"==typeof t&&t.constructor===i?t:new i(function(e){e(t)})},i.reject=function(n){return new i(function(e,t){t(n)})},i.race=function(o){return new i(function(e,t){for(var n=0,r=o.length;n<r;n++)o[n].then(e,t)})},i._immediateFn="function"==typeof setImmediate?function(e){setImmediate(e)}:function(e){t(e,0)},i._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},i._setImmediateFn=function(e){i._immediateFn=e},i._setUnhandledRejectionFn=function(e){i._unhandledRejectionFn=e},f.exports?f.exports=i:e.Promise||(e.Promise=i);var f=n.exports;return{boltExport:("undefined"!=typeof window?window:Function("return this;")()).Promise||f}},"object"==typeof v&&void 0!==b?b.exports=n():"function"==typeof e&&e.amd?e(n):(t="undefined"!=typeof globalThis?globalThis:t||self).EphoxContactWrapper=n()}(void 0),b.exports.boltExport),w=function(e,t){return j(document.createElement("canvas"),e,t)},V=function(e){var t=w(e.width,e.height);return x(t).drawImage(e,0,0),t},x=function(e){return e.getContext("2d")},j=function(e,t,n){return e.width=t,e.height=n,e},U=function(e){return e.naturalWidth||e.width},W=function(e){return e.naturalHeight||e.height},$=function(e){e=e.src;return(0===e.indexOf("data:")?S:q)(e)},C=function(a){return new y(function(e,t){var n=URL.createObjectURL(a),r=new Image,o=function(){r.removeEventListener("load",i),r.removeEventListener("error",u)},i=function(){o(),e(r)},u=function(){o(),t("Unable to load data of type "+a.type+": "+n)};r.addEventListener("load",i),r.addEventListener("error",u),r.src=n,r.complete&&setTimeout(i,0)})},q=function(r){return new y(function(e,n){var t=new XMLHttpRequest;t.open("GET",r,!0),t.responseType="blob",t.onload=function(){200===this.status&&e(this.response)},t.onerror=function(){var e,t=this;n(0===this.status?((e=new Error("No access to download image")).code=18,e.name="SecurityError",e):new Error("Error "+t.status+" downloading image"))},t.send()})},G=function(e){var e=e.split(","),t=/data:([^;]+)/.exec(e[0]);if(!t)return h.none();for(var t=t[1],e=e[1],n=atob(e),r=n.length,o=Math.ceil(r/1024),i=new Array(o),u=0;u<o;++u){for(var a=1024*u,c=Math.min(1024+a,r),s=new Array(c-a),l=a,f=0;l<c;++f,++l)s[f]=n[l].charCodeAt(0);i[u]=new Uint8Array(s)}return h.some(new Blob(i,{type:t}))},S=function(n){return new y(function(e,t){G(n).fold(function(){t("uri is not base64: "+n)},e)})},k=function(e,r,o){return r=r||"image/png",F(HTMLCanvasElement.prototype.toBlob)?new y(function(t,n){e.toBlob(function(e){e?t(e):n()},r,o)}):S(e.toDataURL(r,o))},K=function(e,t,n){return e.toDataURL(t=t||"image/png",n)},X=function(e){return C(e).then(function(e){J(e);var t=w(U(e),W(e));return x(t).drawImage(e,0,0),t})},Y=function(n){return new y(function(e){var t=new FileReader;t.onloadend=function(){e(t.result)},t.readAsDataURL(n)})},J=function(e){URL.revokeObjectURL(e.src)},Z=function(e){return C(e)},Q=function(e){return $(e)},ee=Array.prototype.indexOf,te=function(e,t){return ee.call(e,t)},T=function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)},ne=function(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r)&&n.push(i)}return n},re=function(e,n,r){return T(e,function(e,t){r=n(r,e,t)}),r},oe=function(e,t,n){for(var r=0,o=e.length;r<o;r++){var i=e[r];if(t(i,r))return h.some(i);if(n(i,r))break}return h.none()},O=function(e,t){return oe(e,t,i)},E=Object.keys,ie=function(e,t){for(var n=E(e),r=0,o=n.length;r<o;r++){var i=n[r];t(e[i],i)}},_=(function(u){if(!c(u))throw new Error("cases must be an array");if(0===u.length)throw new Error("there must be at least one case");var a=[],n={};return T(u,function(e,r){var t=E(e);if(1!==t.length)throw new Error("one and only one name per case");var o=t[0],i=e[o];if(void 0!==n[o])throw new Error("duplicate key detected:"+o);if("cata"===o)throw new Error("cannot have a case named cata (sorry)");if(!c(i))throw new Error("case arguments must be an array");a.push(o),n[o]=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=n.length;if(t!==i.length)throw new Error("Wrong number of arguments to case "+o+". Expected "+i.length+" ("+i+"), got "+t);return{fold:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(e.length!==u.length)throw new Error("Wrong number of arguments to fold. Expected "+u.length+", got "+e.length);return e[r].apply(null,n)},match:function(e){var t=E(e);if(a.length!==t.length)throw new Error("Wrong number of arguments to match. Expected: "+a.join(",")+"\nActual: "+t.join(","));if(function(e,t){for(var n=0,r=e.length;n<r;++n)if(!0!==t(e[n],n))return!1;return!0}(a,function(e){return-1<te(t,e)}))return e[o].apply(null,n);throw new Error("Not all branches were specified when using match. Specified: "+t.join(", ")+"\nRequired: "+a.join(", "))},log:function(e){console.log(e,{constructors:a,constructor:o,params:n})}}}}),n}([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]),function(e,t,n){function r(t,n){return e.then(function(e){return K(e,t,n)})}var o=t.type,o=u(o),i=u(n);return{getType:o,toBlob:function(){return y.resolve(t)},toDataURL:i,toBase64:function(){return n.split(",")[1]},toAdjustedBlob:function(t,n){return e.then(function(e){return k(e,t,n)})},toAdjustedDataURL:r,toAdjustedBase64:function(e,t){return r(e,t).then(function(e){return e.split(",")[1]})},toCanvas:function(){return e.then(V)}}}),ue=function(t){return Y(t).then(function(e){return _(X(t),t,e)})},A=function(t,e){return k(t,e).then(function(e){return _(y.resolve(t),e,t.toDataURL())})},D=function(e,t){void 0===t&&(t=2);t=Math.pow(10,t),e=Math.round(e*t);return Math.ceil(e/t)},ae=function(t,n){return t.toCanvas().then(function(e){return ce(e,t.getType(),n)})},ce=function(e,t,n){var n=(n<0?360+n:n)*Math.PI/180,r=e.width,o=e.height,i=Math.sin(n),u=Math.cos(n),a=D(Math.abs(r*u)+Math.abs(o*i)),i=D(Math.abs(r*i)+Math.abs(o*u)),u=w(a,i),c=x(u);return c.translate(a/2,i/2),c.rotate(n),c.drawImage(e,-r/2,-o/2),A(u,t)},se=function(t,n){return t.toCanvas().then(function(e){return le(e,t.getType(),n)})},le=function(e,t,n){var r=w(e.width,e.height),o=x(r);return"v"===n?(o.scale(1,-1),o.drawImage(e,0,-r.height)):(o.scale(-1,1),o.drawImage(e,-r.width,0)),A(r,t)},fe=function(e,t){return se(e,t)},de=function(e,t){return ae(e,t)},M=function(t,r,o){return void 0===o&&(o=!1),new y(function(e){var n=new XMLHttpRequest;n.onreadystatechange=function(){4===n.readyState&&e({status:n.status,blob:n.response})},n.open("GET",t,!0),n.withCredentials=o,ie(r,function(e,t){n.setRequestHeader(t,e)}),n.responseType="blob",n.send()})},me=function(r){return new y(function(e,t){var n=new FileReader;n.onload=function(){e(n.result)},n.onerror=function(e){t(e)},n.readAsText(r)})},ge=function(e){try{return h.some(JSON.parse(e))}catch(e){return h.none()}},pe=[{code:404,message:"Could not find Image Proxy"},{code:403,message:"Rejected request"},{code:0,message:"Incorrect Image Proxy URL"}],he=[{type:"not_found",message:"Failed to load image."},{type:"key_missing",message:"The request did not include an api key."},{type:"key_not_found",message:"The provided api key could not be found."},{type:"domain_not_trusted",message:"The api key is not valid for the request origins."}],ve=function(e,t){t=re(t,function(e,t){return g(e)?e[t]:void 0},e);return h.from(t)},be=function(e,t){return"application/json"===(null==t?void 0:t.type)&&(400===e||403===e||404===e||500===e)},ye=function(t){return"ImageProxy HTTP error: "+O(pe,function(e){return t===e.code}).fold(u("Unknown ImageProxy error"),function(e){return e.message})},we=function(e){e=ye(e);return y.reject(e)},xe=function(t){return O(he,function(e){return e.type===t}).fold(u("Unknown service error"),function(e){return e.message})},Ce=function(e){return"ImageProxy Service error: "+ge(e).bind(function(e){return ve(e,["error","type"]).map(xe)}).getOr("Invalid JSON in service error message")},Se=function(e){return me(e).then(function(e){e=Ce(e);return y.reject(e)})},ke=function(e,t){return be(e,t)?Se(t):we(e)},Te=function(e,t){var n=-1===e.indexOf("?")?"?":"&";return/[?&]apiKey=/.test(e)?e:e+n+"apiKey="+encodeURIComponent(t)},Oe=function(e){return e<200||300<=e},Ee=function(e,t){var n={"Content-Type":"application/json;charset=UTF-8","tiny-api-key":t};return M(Te(e,t),n).then(function(e){return Oe(e.status)?ke(e.status,e.blob):y.resolve(e.blob)})},_e=function(e,t){return M(e,{},t).then(function(e){return Oe(e.status)?we(e.status):y.resolve(e.blob)})},Ae=function(e,t,n){return void 0===n&&(n=!1),t?Ee(e,t):_e(e,n)},De=function(e){return ue(e)},Me=1,N={fromHtml:function(e,t){t=(t||document).createElement("div");if(t.innerHTML=e,!t.hasChildNodes()||1<t.childNodes.length)throw console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node");return p(t.childNodes[0])},fromTag:function(e,t){t=(t||document).createElement(e);return p(t)},fromText:function(e,t){t=(t||document).createTextNode(e);return p(t)},fromDom:p,fromPoint:function(e,t,n){return h.from(e.dom.elementFromPoint(t,n)).map(p)}},Ne=function(e,t){e=e.dom;if(e.nodeType!==Me)return!1;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},Re=("undefined"!=typeof window||Function("return this;")(),function(e,t){return O(e.dom.childNodes,function(e){return t(N.fromDom(e))}).map(N.fromDom)}),ze=function(e,t){return Re(e,function(e){return Ne(e,t)})},Be=tinymce.util.Tools.resolve("tinymce.util.Delay"),Pe=tinymce.util.Tools.resolve("tinymce.util.Promise"),R=tinymce.util.Tools.resolve("tinymce.util.URI"),Ie=function(e){return e.getParam("imagetools_toolbar","rotateleft rotateright flipv fliph editimage imageoptions")},Le=function(e){return e.getParam("imagetools_proxy")},Fe=function(e){return e.getParam("imagetools_cors_hosts",[],"string[]")},He=function(e){return e.getParam("imagetools_credentials_hosts",[],"string[]")},Ve=function(e){return h.from(e.getParam("imagetools_fetch_image",null,"function"))},je=function(e){return e.getParam("api_key",e.getParam("imagetools_api_key","","string"),"string")},Ue=function(e){return e.getParam("images_upload_timeout",3e4,"number")},We=function(e){return e.getParam("images_reuse_filename",!1,"boolean")},$e=function(e){function t(e){return/^[0-9\.]+px$/.test(e)}var n=e.style.width,r=e.style.height;return n||r?t(n)&&t(r)?{w:parseInt(n,10),h:parseInt(r,10)}:null:(n=e.width,r=e.height,n&&r?{w:parseInt(n,10),h:parseInt(r,10)}:null)},qe=function(e,t){var n,r;t&&(n=e.style.width,r=e.style.height,(n||r)&&(e.style.width=t.w+"px",e.style.height=t.h+"px",e.removeAttribute("data-mce-style")),n=e.width,r=e.height,n||r)&&(e.setAttribute("width",String(t.w)),e.setAttribute("height",String(t.h)))},Ge=function(e){return{w:e.naturalWidth,h:e.naturalHeight}},Ke=0,Xe=function(e){return ze(N.fromDom(e),"img")},Ye=function(e,t){return e.dom.is(t,"figure")},Je=function(e,t){return e.dom.is(t,"img:not([data-mce-object],[data-mce-placeholder])")},z=function(t,e){function n(e){return Je(t,e)&&(tt(t,e)||nt(t,e)||g(Le(t)))}return Ye(t,e)?Xe(e).bind(function(e){return n(e.dom)?h.some(e.dom):h.none()}):n(e)?h.some(e):h.none()},Ze=function(e,t){e.notificationManager.open({text:t,type:"error"})},B=function(e){var t=e.selection.getNode(),n=e.dom.getParent(t,"figure.image");return null!==n&&Ye(e,n)?Xe(n):Je(e,t)?h.some(N.fromDom(t)):h.none()},Qe=function(e,t,n){t=t.match(/(?:\/|^)(([^\/\?]+)\.(?:[a-z0-9.]+))(?:\?|$)/i);return g(t)?e.dom.encode(t[n]):null},et=function(){return"imagetools"+Ke++},tt=function(e,t){t=t.src;return 0===t.indexOf("data:")||0===t.indexOf("blob:")||new R(t).host===e.documentBaseURI.host},nt=function(e,t){return-1!==l.inArray(Fe(e),new R(t.src).host)},rt=function(e,t){return-1!==l.inArray(He(e),new R(t.src).host)},ot=function(e,t){var n;return nt(e,t)?Ae(t.src,null,rt(e,t)):tt(e,t)?Q(t):(n=(n=Le(e))+(-1===n.indexOf("?")?"?":"&")+"url="+encodeURIComponent(t.src),t=je(e),Ae(n,t,!1))},it=function(e,t){return Ve(e).fold(function(){return ot(e,t)},function(e){return e(t)})},ut=function(e,t){var n=e.editorUpload.blobCache.getByUri(t.src);return n?Pe.resolve(n.blob()):it(e,t)},at=function(e,t){var n=Be.setEditorTimeout(e,function(){e.editorUpload.uploadImagesAuto()},Ue(e));t.set(n)},ct=function(e){Be.clearTimeout(e.get())},st=function(a,c,s,l,f,d,m){return s.toBlob().then(function(e){var t,n,r,o=a.editorUpload.blobCache,i=d.src,u=c.type===e.type;return We(a)&&(r=o.getByUri(i),n=g(r)?(i=r.uri(),t=r.name(),r.filename()):(t=Qe(a,i,2),Qe(a,i,1))),r=o.create({id:et(),blob:e,base64:s.toBase64(),uri:i,name:t,filename:u?n:void 0}),o.add(r),a.undoManager.transact(function(){var e=function(){a.$(d).off("load",e),a.nodeChanged(),l?a.editorUpload.uploadImagesAuto():(ct(f),at(a,f))};a.$(d).on("load",e),m&&a.$(d).attr({width:m.w,height:m.h}),a.$(d).attr({src:r.blobUri()}).removeAttr("data-mce-src")}),r})},lt=function(r,o,e,i){return function(){return B(r).fold(function(){Ze(r,"Could not find selected image")},function(n){return r._scanForImages().then(function(){return ut(r,n.dom)}).then(function(t){return De(t).then(e).then(function(e){return st(r,t,e,!1,o,n.dom,i)})}).catch(function(e){Ze(r,e)})})}},ft=function(t,n,r){return function(){var e=B(t).map(function(e){e=$e(e.dom);return e?{w:e.h,h:e.w}:null}).getOrNull();return lt(t,n,function(e){return de(e,r)},e)()}},dt=function(e,t,n){return function(){return lt(e,t,function(e){return fe(e,n)})()}},mt=function(t,n,r,o,i){return Z(i).then(function(e){var t=Ge(e);return o.w===t.w&&o.h===t.h||$e(r)&&qe(r,t),URL.revokeObjectURL(e.src),i}).then(De).then(function(e){return st(t,i,e,!0,n,r)})},gt="save-state",pt="disable",ht="enable",vt=function(e){return{blob:e,url:URL.createObjectURL(e)}},bt=function(i,u){return function(){var r=B(i),o=r.map(function(e){return Ge(e.dom)});r.each(function(t){z(i,t.dom).each(function(e){ut(i,t.dom).then(function(e){e=vt(e);i.windowManager.open({title:"Edit Image",size:"large",body:{type:"panel",items:[{type:"imagetools",name:"imagetools",label:"Edit Image",currentState:e}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0,disabled:!0}],onSubmit:function(e){var n=e.getData().imagetools.blob;r.each(function(t){o.each(function(e){mt(i,u,t.dom,e,n)})}),e.close()},onCancel:a,onAction:function(e,t){switch(t.name){case gt:t.value?e.enable("save"):e.disable("save");break;case pt:e.disable("save"),e.disable("cancel");break;case ht:e.enable("cancel")}}})})})})}};I.add("imagetools",function(e){var n,t,r,o,i,u,a=s(0),c=s(null);n=e,t=a,l.each({mceImageRotateLeft:ft(n,t,-90),mceImageRotateRight:ft(n,t,90),mceImageFlipVertical:dt(n,t,"v"),mceImageFlipHorizontal:dt(n,t,"h"),mceEditImage:bt(n,t)},function(e,t){n.addCommand(t,e)}),H(e),(r=e).ui.registry.addContextToolbar("imagetools",{items:Ie(r),predicate:function(e){return z(r,e).isSome()},position:"node",scope:"node"}),i=a,u=c,(o=e).on("NodeChange",function(e){var t=u.get(),e=z(o,e.element);t&&!e.exists(function(e){return t.src===e.src})&&(ct(i),o.editorUpload.uploadImagesAuto(),u.set(null)),e.each(u.set)})})}(),function(){function e(n){return function(e){return t=typeof(e=e),(null===e?"null":"object"==t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"==t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t)===n;var t}}function n(u){u.on("init",function(){function r(e,t){if(z(u,e,t,n)){B(u,e,t,n);e=P(u,u.plugins.importcss,e,t);if(e)return t=e.name||a.DOM.uniqueId(),u.formatter.register(t,e),{title:e.title,format:t}}return null}var o=C(),n={},t=O(d(u)),i=N(m(u)),e=(c.each(A(u,u.getDoc(),O(p(u))),function(n){var e;S.test(n)||t&&!t(n)||(0<(e=M(i,n)).length?c.each(e,function(e){var t=r(n,e);t&&o.addItemToGroup(e.title,t)}):(e=r(n,null))&&o.addItem(e))}),o.toFormats());u.fire("addStyleModifications",{items:e,replace:!g(u)})})}var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),r=e("string"),o=e("array"),a=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),i=tinymce.util.Tools.resolve("tinymce.EditorManager"),u=tinymce.util.Tools.resolve("tinymce.Env"),c=tinymce.util.Tools.resolve("tinymce.util.Tools"),s=function(e){return e.getParam("importcss_merge_classes")},l=function(e){return e.getParam("importcss_exclusive")},f=function(e){return e.getParam("importcss_selector_converter")},d=function(e){return e.getParam("importcss_selector_filter")},m=function(e){return e.getParam("importcss_groups")},g=function(e){return e.getParam("importcss_append")},p=function(e){return e.getParam("importcss_file_filter")},h=function(e){e=e.getParam("skin");return!1!==e&&(e||"oxide")},v=function(e){return e.getParam("skin_url")},b=Array.prototype.push,y=function(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o)}return r},w=function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!o(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);b.apply(t,e[n])}return t},x=function(e,t){return w(y(e,t))},C=function(){var t=[],n=[],r={};return{addItemToGroup:function(e,t){r[e]?r[e].push(t):(n.push(e),r[e]=[t])},addItem:function(e){t.push(e)},toFormats:function(){return x(n,function(e){var t=r[e];return 0===t.length?[]:[{title:e,items:t}]}).concat(t)}}},S=/^\.(?:ephox|tiny-pageembed|mce)(?:[.-]+\w+)+$/,k=function(e){var t=u.cacheSuffix;return e=r(e)?e.replace("?"+t,"").replace("&"+t,""):e},T=function(e,t){var n,r=h(e);return!!r&&(n=(n=v(e))?e.documentBaseURI.toAbsolute(n):i.baseURL+"/skins/ui/"+r,r=i.baseURL+"/skins/content/",t===n+"/content"+(e.inline?".inline":"")+".min.css"||-1!==t.indexOf(r))},O=function(t){return r(t)?function(e){return-1!==e.indexOf(t)}:t instanceof RegExp?function(e){return t.test(e)}:t},E=function(e){return e.styleSheet},_=function(e){return e.selectorText},A=function(o,e,i){function u(e,t){var n,r=e.href;if((r=k(r))&&i(r,t)&&!T(o,r)){c.each(e.imports,function(e){u(e,!0)});try{n=e.cssRules||e.rules}catch(e){}c.each(n,function(e){E(e)?u(e.styleSheet,!0):_(e)&&c.each(e.selectorText.split(","),function(e){a.push(c.trim(e))})})}}var a=[],n={};c.each(o.contentCSS,function(e){n[e]=!0}),i=i||function(e,t){return t||n[e]};try{c.each(e.styleSheets,function(e){u(e)})}catch(e){}return a},D=function(e,t){var n,r,o,i,u=/^(?:([a-z0-9\-_]+))?(\.[a-z0-9_\-\.]+)$/i.exec(t);if(u)return r=u[1],o=u[2].substr(1).split(".").join(" "),i=c.makeMap("a,img"),u[1]?(n={title:t},e.schema.getTextBlockElements()[r]?n.block=r:e.schema.getBlockElements()[r]||i[r.toLowerCase()]?n.selector=r:n.inline=r):u[2]&&(n={inline:"span",title:t.substr(1),classes:o}),!1!==s(e)?n.classes=o:n.attributes={class:o},n},M=function(e,t){return c.grep(e,function(e){return!e.filter||e.filter(t)})},N=function(e){return c.map(e,function(e){return c.extend({},e,{original:e,selectors:{},filter:O(e.filter)})})},R=function(e,t){return null===t||!1!==l(e)},z=function(e,t,n,r){return!(R(e,n)?t in r:t in n.selectors)},B=function(e,t,n,r){R(e,n)?r[t]=!0:n.selectors[t]=!0},P=function(e,t,n,r){var o=r&&r.selector_converter?r.selector_converter:f(e)?f(e):function(){return D(e,n)};return o.call(t,n,r)};t.add("importcss",function(e){return n(e),t=e,{convertSelectorToFormat:function(e){return D(t,e)}};var t})}(),function(){function t(n){function r(e){n.execCommand("mceInsertDate",!1,e)}var t=i(n),o=h(u(n));n.ui.registry.addSplitButton("insertdatetime",{icon:"insert-time",tooltip:"Insert date/time",select:function(e){return e===o.get()},fetch:function(e){e(v.map(t,function(e){return{type:"choiceitem",text:m(n,e),value:e}}))},onAction:function(e){r(o.get())},onItemAction:function(e,t){o.set(t),r(t)}}),n.ui.registry.addNestedMenuItem("insertdatetime",{icon:"insert-time",text:"Date/time",getSubmenuItems:function(){return v.map(t,function(e){return{type:"menuitem",text:m(n,e),onAction:(t=e,function(){o.set(t),r(t)})};var t})}})}var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),r=function(e){return e.getParam("insertdatetime_dateformat",e.translate("%Y-%m-%d"))},o=function(e){return e.getParam("insertdatetime_timeformat",e.translate("%H:%M:%S"))},i=function(e){return e.getParam("insertdatetime_formats",["%H:%M:%S","%Y-%m-%d","%I:%M:%S %p","%D"])},u=function(e){var t=i(e);return 0<t.length?t[0]:o(e)},a=function(e){return e.getParam("insertdatetime_element",!1)},c="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),s="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),l="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),f="January February March April May June July August September October November December".split(" "),d=function(e,t){if((e=""+e).length<t)for(var n=0;n<t-e.length;n++)e="0"+e;return e},m=function(e,t,n){return void 0===n&&(n=new Date),t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace("%D","%m/%d/%Y")).replace("%r","%I:%M:%S %p")).replace("%Y",""+n.getFullYear())).replace("%y",""+n.getYear())).replace("%m",d(n.getMonth()+1,2))).replace("%d",d(n.getDate(),2))).replace("%H",""+d(n.getHours(),2))).replace("%M",""+d(n.getMinutes(),2))).replace("%S",""+d(n.getSeconds(),2))).replace("%I",""+((n.getHours()+11)%12+1))).replace("%p",n.getHours()<12?"AM":"PM")).replace("%B",""+e.translate(f[n.getMonth()]))).replace("%b",""+e.translate(l[n.getMonth()]))).replace("%A",""+e.translate(s[n.getDay()]))).replace("%a",""+e.translate(c[n.getDay()]))).replace("%%","%")},g=function(e,t,n,r){n=e.dom.create("time",{datetime:n},r);t.parentNode.insertBefore(n,t),e.dom.remove(t),e.selection.select(n,!0),e.selection.collapse(!1)},p=function(e,t){var n,r,o;a(e)?(n=m(e,t),r=void 0,r=/%[HMSIp]/.test(t)?m(e,"%Y-%m-%dT%H:%M"):m(e,"%Y-%m-%d"),(o=e.dom.getParent(e.selection.getStart(),"time"))?g(e,o,r,n):e.insertContent('<time datetime="'+r+'">'+n+"</time>")):e.insertContent(m(e,t))},h=function(e){var t=e;return{get:function(){return t},set:function(e){t=e}}},v=tinymce.util.Tools.resolve("tinymce.util.Tools");e.add("insertdatetime",function(e){var n;(n=e).addCommand("mceInsertDate",function(e,t){p(n,null!=t?t:r(n))}),n.addCommand("mceInsertTime",function(e,t){p(n,null!=t?t:o(n))}),t(e)})}(),function(){var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),o=tinymce.util.Tools.resolve("tinymce.util.Tools"),t=function(e){return e.getParam("fontsize_formats")},n=function(e,t){e.settings.fontsize_formats=t},r=function(e){return e.getParam("font_formats")},i=function(e,t){e.settings.font_formats=t},u=function(e){return e.getParam("font_size_style_values","xx-small,x-small,small,medium,large,x-large,xx-large")},a=function(e,t){e.settings.inline_styles=t},c=function(e){var t="p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table",n=o.explode(u(e)),r=e.schema;e.formatter.register({alignleft:{selector:t,attributes:{align:"left"}},aligncenter:{selector:t,attributes:{align:"center"}},alignright:{selector:t,attributes:{align:"right"}},alignjustify:{selector:t,attributes:{align:"justify"}},bold:[{inline:"b",remove:"all",preserve_attributes:["class","style"]},{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}}],italic:[{inline:"i",remove:"all",preserve_attributes:["class","style"]},{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}}],underline:[{inline:"u",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{textDecoration:"underline"},exact:!0}],strikethrough:[{inline:"strike",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{textDecoration:"line-through"},exact:!0}],fontname:{inline:"font",toggle:!1,attributes:{face:"%value"}},fontsize:{inline:"font",toggle:!1,attributes:{size:function(e){return String(o.inArray(n,e.value)+1)}}},forecolor:{inline:"font",attributes:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"font",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0}}),o.each("b,i,u,strike".split(","),function(e){r.addValidElements(e+"[*]")}),r.getElementRule("font")||r.addValidElements("font[face|size|color|style]"),o.each(t.split(","),function(e){e=r.getElementRule(e);e&&!e.attributes.align&&(e.attributes.align={},e.attributesOrder.push("align"))})},s=function(e){a(e,!1),t(e)||n(e,"8pt=1 10pt=2 12pt=3 14pt=4 18pt=5 24pt=6 36pt=7"),r(e)||i(e,"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats")};e.add("legacyoutput",function(e){var t;s(t=e),t.on("PreInit",function(){return c(t)})})}(),function(){function P(n){return function(e){return t=typeof(e=e),(null===e?"null":"object"==t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"==t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t)===n;var t}}function I(t){return function(e){return typeof e===t}}function L(e){return e}function F(){return a}var H=tinymce.util.Tools.resolve("tinymce.PluginManager"),V=P("string"),i=P("object"),j=P("array"),U=I("boolean"),W=I("function"),$=I("number"),q=function(){},m=function(e){return function(){return e}},G=function(e,t){return e===t},K=function(t){return function(e){return!t(e)}},u=m(!1),X=m(!0),a={fold:function(e,t){return e()},isSome:u,isNone:X,getOr:h=L,getOrThunk:Y,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:m(null),getOrUndefined:m(void 0),or:h,orThunk:Y,map:F,each:q,bind:F,exists:u,forall:X,filter:function(){return a},toArray:function(){return[]},toString:m("none()")};function Y(e){return e()}function J(n){function e(){return o}function t(e){return e(n)}var r=m(n),o={fold:function(e,t){return t(n)},isSome:X,isNone:u,getOr:r,getOrThunk:r,getOrDie:r,getOrNull:r,getOrUndefined:r,or:e,orThunk:e,map:function(e){return J(e(n))},each:function(e){e(n)},bind:t,exists:t,forall:t,filter:function(e){return e(n)?o:a},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return o}var c={some:J,none:F,from:function(e){return null==e?a:J(e)}},Z=Array.prototype.slice,Q=Array.prototype.push,s=function(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o)}return r},l=function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)},n=function(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r)&&n.push(i)}return n},ee=function(e,t){if(0===e.length)return[];for(var n=t(e[0]),r=[],o=[],i=0,u=e.length;i<u;i++){var a=e[i],c=t(a);c!==n&&(r.push(o),o=[]),n=c,o.push(a)}return 0!==o.length&&r.push(o),r},te=function(e,n,r){return l(e,function(e,t){r=n(r,e,t)}),r},f=function(e,t,n){for(var r=0,o=e.length;r<o;r++){var i=e[r];if(t(i,r))return c.some(i);if(n(i,r))break}return c.none()},g=function(e,t){return f(e,t,u)},ne=function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!j(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);Q.apply(t,e[n])}return t},re=function(e,t){return ne(s(e,t))},oe=function(e){e=Z.call(e,0);return e.reverse(),e},ie=function(e,t){return 0<=t&&t<e.length?c.some(e[t]):c.none()},ue=function(e){return ie(e,0)},o=function(e){return ie(e,e.length-1)},ae=function(e,t){for(var n=0;n<e.length;n++){var r=t(e[n],n);if(r.isSome())return r}return c.none()},ce=function(){return(ce=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function se(){return Ce(0,0)}function r(e,t){return-1!==e.indexOf(t)}function e(t){return function(e){return r(e,t)}}function le(e){function t(e){return function(){return n===e}}var n=e.current,e=e.version;return{current:n,version:e,isEdge:t(Ae),isChrome:t(De),isIE:t(Me),isOpera:t(Ne),isFirefox:t(Re),isSafari:t(ze)}}function fe(e){function t(e){return function(){return n===e}}var n=e.current,e=e.version;return{current:n,version:e,isWindows:t(Ie),isiOS:t(Le),isAndroid:t(Fe),isOSX:t(Ve),isLinux:t(He),isSolaris:t(je),isFreeBSD:t(Ue),isChromeOS:t(We)}}function de(e){return window.matchMedia(e).matches}function d(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}}function me(t){return function(e){return ft(e)&&lt(e)===t}}function ge(t){return function(e){return e&&e.nodeName.toLowerCase()===t}}function t(t){return function(e){return e&&t.test(e.nodeName)}}function pe(t){function e(e){return function(){return t.execCommand(e)}}t.hasPlugin("advlist")||(t.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:e("InsertOrderedList"),onSetup:function(e){return Jn(t,"OL",e.setActive)}}),t.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:e("InsertUnorderedList"),onSetup:function(e){return Jn(t,"UL",e.setActive)}}))}var he,ve,be,ye,we,xe=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t))return r}},Ce=function(e,t){return{major:e,minor:t}},p={nu:Ce,detect:function(e,t){var n,r,t=String(t).toLowerCase();return 0===e.length?se():(r=xe(e=e,n=t))?Ce((e=function(e){return Number(n.replace(r,"$"+e))})(1),e(2)):{major:0,minor:0}},unknown:se},Se=function(e,t){var n=String(t).toLowerCase();return g(e,function(e){return e.search(n)})},ke=(he=/^\s+|\s+$/g,function(e){return e.replace(he,"")}),Te=function(e){return 0<e.length},Oe=function(e){return!Te(e)},h=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,h=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return r(e,"edge/")&&r(e,"chrome")&&r(e,"safari")&&r(e,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,h],search:function(e){return r(e,"chrome")&&!r(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return r(e,"msie")||r(e,"trident")}},{name:"Opera",versionRegexes:[h,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:e("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:e("firefox")},{name:"Safari",versionRegexes:[h,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(r(e,"safari")||r(e,"mobile/"))&&r(e,"applewebkit")}}],Ee=[{name:"Windows",search:e("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return r(e,"iphone")||r(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:e("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:e("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:e("linux"),versionRegexes:[]},{name:"Solaris",search:e("sunos"),versionRegexes:[]},{name:"FreeBSD",search:e("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:e("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],_e={browsers:m(h),oses:m(Ee)},Ae="Edge",De="Chrome",Me="IE",Ne="Opera",Re="Firefox",ze="Safari",Be=function(){return le({current:void 0,version:p.unknown()})},Pe=le,Ie=(m(Ae),m(De),m(Me),m(Ne),m(Re),m(ze),"Windows"),Le="iOS",Fe="Android",He="Linux",Ve="OSX",je="Solaris",Ue="FreeBSD",We="ChromeOS",$e=function(){return fe({current:void 0,version:p.unknown()})},qe=fe,Ge=(m(Ie),m(Le),m(Fe),m(He),m(Ve),m(je),m(Ue),m(We),function(e,t,n){var r,o,i,u,a,c,s,l=_e.browsers(),f=_e.oses(),t=t.bind(function(e){return r=l,ae(e.brands,function(t){var n=t.brand.toLowerCase();return g(r,function(e){return n===(null==(e=e.brand)?void 0:e.toLowerCase())}).map(function(e){return{current:e.name,version:p.nu(parseInt(t.version,10),0)}})});var r}).orThunk(function(){return Se(l,n=e).map(function(e){var t=p.detect(e.versionRegexes,n);return{current:e.name,version:t}});var n}).fold(Be,Pe),f=Se(f,r=e).map(function(e){var t=p.detect(e.versionRegexes,r);return{current:e.name,version:t}}).fold($e,qe),d=(i=t,u=e,n=n,d=(o=f).isiOS()&&!0===/ipad/i.test(u),a=o.isiOS()&&!d,c=o.isiOS()||o.isAndroid(),s=c||n("(pointer:coarse)"),n=d||!a&&c&&n("(min-device-width:768px)"),c=a||c&&!n,i=i.isSafari()&&o.isiOS()&&!1===/safari/i.test(u),u=!c&&!n&&!i,{isiPad:m(d),isiPhone:m(a),isTablet:m(n),isPhone:m(c),isTouch:m(s),isAndroid:o.isAndroid,isiOS:o.isiOS,isWebView:m(i),isDesktop:m(u)});return{browser:t,os:f,deviceType:d}}),Ke=(ye=!(ve=function(){return Ge(navigator.userAgent,c.from(navigator.userAgentData),de)}),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return ye||(ye=!0,be=ve.apply(null,e)),be}),Xe=function(){return Ke()},Ye=function(e,t,n){return 0!=(e.compareDocumentPosition(t)&n)},Je=function(e,t){return Ye(e,t,Node.DOCUMENT_POSITION_CONTAINED_BY)},v={fromHtml:function(e,t){t=(t||document).createElement("div");if(t.innerHTML=e,!t.hasChildNodes()||1<t.childNodes.length)throw console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node");return d(t.childNodes[0])},fromTag:function(e,t){t=(t||document).createElement(e);return d(t)},fromText:function(e,t){t=(t||document).createTextNode(e);return d(t)},fromDom:d,fromPoint:function(e,t,n){return c.from(e.dom.elementFromPoint(t,n)).map(d)}},Ze=function(e,t){return e.dom===t.dom},Qe=function(e,t){e=e.dom,t=t.dom;return e!==t&&e.contains(t)},et=function(e,t){return Je(e.dom,t.dom)},tt=function(e,t){return(Xe().browser.isIE()?et:Qe)(e,t)},nt=function(e,t){e=e.dom;if(1!==e.nodeType)return!1;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},rt=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),ot=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),b=tinymce.util.Tools.resolve("tinymce.util.VK"),it=Object.keys,ut=function(e,t){for(var n=it(e),r=0,o=n.length;r<o;r++){var i=n[r];t(e[i],i)}},at=function(n){return function(e,t){n[t]=e}},ct=function(e,n,r,o){return ut(e,function(e,t){(n(e,t)?r:o)(e,t)}),{}},st=function(e,t){var n={};return ct(e,t,at(n),q),n},lt=("undefined"!=typeof window||Function("return this;")(),function(e){return e.dom.nodeName.toLowerCase()}),ft=(we=1,function(e){return e.dom.nodeType===we}),dt=function(e,t,n){if(!(V(n)||U(n)||$(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},y=function(e,t){var n=e.dom;ut(t,function(e,t){dt(n,t,e)})},mt=function(e){return te(e.dom.attributes,function(e,t){return e[t.name]=t.value,e},{})},gt=function(e){return c.from(e.dom.parentNode).map(v.fromDom)},pt=function(e){return s(e.dom.childNodes,v.fromDom)},ht=function(e,t){e=e.dom.childNodes;return c.from(e[t]).map(v.fromDom)},vt=function(e){return ht(e,0)},bt=function(e){return ht(e,e.dom.childNodes.length-1)},yt=function(t,n){gt(t).each(function(e){e.dom.insertBefore(n.dom,t.dom)})},w=function(e,t){e.dom.appendChild(t.dom)},wt=function(t,e){l(e,function(e){yt(t,e)})},xt=function(t,e){l(e,function(e){w(t,e)})},Ct=function(e){e=e.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},St=function(e,t){return v.fromDom(e.dom.cloneNode(t))},kt=function(e){return St(e,!0)},Tt=function(e,t){t=v.fromTag(t),e=mt(e);return y(t,e),t},Ot=function(e,t){var t=Tt(e,t),n=(yt(e,t),pt(e));return xt(t,n),Ct(e),t},h=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),x=tinymce.util.Tools.resolve("tinymce.util.Tools"),C=function(e){return e&&3===e.nodeType},S=t(/^(OL|UL|DL)$/),Et=t(/^(OL|UL)$/),_t=ge("ol"),At=t(/^(LI|DT|DD)$/),Dt=t(/^(DT|DD)$/),Mt=t(/^(TH|TD)$/),k=ge("br"),Nt=function(e){return e.parentNode.firstChild===e},Rt=function(e,t){return t&&!!e.schema.getTextBlockElements()[t.nodeName]},zt=function(e,t){return e&&e.nodeName in t},Bt=function(e,t){return!!k(t)&&e.isBlock(t.nextSibling)&&!k(t.previousSibling)},T=function(e,t,n){var r=e.isEmpty(t);return!(n&&0<e.select("span[data-mce-type=bookmark]",t).length)&&r},Pt=function(e,t){return e.isChildOf(t,e.getRoot())},It=function(e){return e.getParam("lists_indent_on_tab",!0)},Lt=function(e){e=e.getParam("forced_root_block","p");return!1===e?"":!0===e?"p":e},Ft=function(e){return e.getParam("forced_root_block_attrs",{})},Ht=function(e,t){var n,r,o,i=e.dom,u=e.schema.getBlockElements(),a=i.createFragment(),c=Lt(e);if(c&&((r=i.create(c)).tagName===c.toUpperCase()&&i.setAttribs(r,Ft(e)),zt(t.firstChild,u)||a.appendChild(r)),t)for(;n=t.firstChild;){var s=n.nodeName;o||"SPAN"===s&&"bookmark"===n.getAttribute("data-mce-type")||(o=!0),zt(n,u)?(a.appendChild(n),r=null):(c?(r||(r=i.create(c),a.appendChild(r)),r):a).appendChild(n)}return c?o||r.appendChild(i.create("br",{"data-mce-bogus":"1"})):a.appendChild(i.create("br")),a},O=h.DOM,Vt=function(e,t,n){for(var r,o=O.select('span[data-mce-type="bookmark"]',t),i=Ht(e,n),u=O.createRng(),u=(u.setStartAfter(n),u.setEndAfter(t),u.extractContents()),a=u.firstChild;a;a=a.firstChild)if("LI"===a.nodeName&&e.dom.isEmpty(a)){O.remove(a);break}e.dom.isEmpty(u)||O.insertAfter(u,t),O.insertAfter(i,t),T(e.dom,n.parentNode)&&(r=n.parentNode,x.each(o,function(e){r.parentNode.insertBefore(e,n.parentNode)}),O.remove(r)),O.remove(n),T(e.dom,t)&&O.remove(t)},jt=me("dd"),Ut=me("dt"),Wt=function(t,n){jt(n)?Ot(n,"dt"):Ut(n)&&gt(n).each(function(e){return Vt(t,e.dom,n.dom)})},$t=function(e){Ut(e)&&Ot(e,"dd")},qt=function(t,e,n){l(n,"Indent"===e?$t:function(e){return Wt(t,e)})},Gt=function(e,t){var n;return C(e)?{container:e,offset:t}:(n=rt.getNode(e,t),C(n)?{container:n,offset:t>=e.childNodes.length?n.data.length:0}:n.previousSibling&&C(n.previousSibling)?{container:n.previousSibling,offset:n.previousSibling.data.length}:n.nextSibling&&C(n.nextSibling)?{container:n.nextSibling,offset:0}:{container:e,offset:t})},E=function(e){var t=e.cloneRange(),n=Gt(e.startContainer,e.startOffset),n=(t.setStart(n.container,n.offset),Gt(e.endContainer,e.endOffset));return t.setEnd(n.container,n.offset),t},Kt=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),_=function(e,t){t=t||e.selection.getStart(!0);return e.dom.getParent(t,"OL,UL,DL",A(e,t))},Xt=function(e,t){return e&&1===t.length&&t[0]===e},Yt=function(e){return n(e.querySelectorAll("ol,ul,dl"),S)},Jt=function(e){var t=_(e),e=e.selection.getSelectedBlocks();return Xt(t,e)?Yt(t):n(e,function(e){return S(e)&&t!==e})},Zt=function(n,e){e=x.map(e,function(e){var t=n.dom.getParent(e,"li,dd,dt",A(n,e));return t||e});return Kt.unique(e)},Qt=function(e){var t=e.selection.getSelectedBlocks();return n(Zt(e,t),At)},en=function(e){return n(Qt(e),Dt)},A=function(e,t){t=e.dom.getParents(t,"TD,TH");return 0<t.length?t[0]:e.getBody()},tn=function(e,t){e=e.dom.getParents(t,"ol,ul",A(e,t));return o(e)},nn=function(e){var t=tn(e,e.selection.getStart()),e=n(e.selection.getSelectedBlocks(),Et);return t.toArray().concat(e)},rn=function(e){var t=nn(e);return on(e,t)},on=function(t,e){e=s(e,function(e){return tn(t,e).getOr(e)});return Kt.unique(e)},un=function(e,t,n){return void 0===n&&(n=G),e.exists(function(e){return n(e,t)})},an=function(e,t,n){return e.isSome()&&t.isSome()?c.some(n(e.getOrDie(),t.getOrDie())):c.none()},cn=function(e,t){var n=(t||document).createDocumentFragment();return l(e,function(e){n.appendChild(e.dom)}),v.fromDom(n)},D=function(e,t,n){return e.fire("ListMutation",{action:t,element:n})},sn=function(e){return void 0!==e.style&&W(e.style.getPropertyValue)},ln=function(e,t,n){if(!V(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);sn(e)&&e.style.setProperty(t,n)},fn=function(e,t,n){e=e.dom;ln(e,t,n)},dn=function(e,t){w(e.item,t.list)},mn=function(e){for(var t=1;t<e.length;t++)dn(e[t-1],e[t])},gn=function(e,t){an(o(e),ue(t),dn)},pn=function(e,t){t={list:v.fromTag(t,e),item:v.fromTag("li",e)};return w(t.list,t.item),t},hn=function(e,t,n){for(var r=[],o=0;o<n;o++)r.push(pn(e,t.listType));return r},vn=function(e,t){for(var n=0;n<e.length-1;n++)fn(e[n].item,"list-style-type","none");o(e).each(function(e){y(e.list,t.listAttributes),y(e.item,t.itemAttributes),xt(e.item,t.content)})},bn=function(e,t){lt(e.list)!==t.listType&&(e.list=Ot(e.list,t.listType)),y(e.list,t.listAttributes)},yn=function(e,t,n){e=v.fromTag("li",e);return y(e,t),xt(e,n),e},wn=function(e,t){w(e.list,t),e.item=t},xn=function(n,e,r){e=e.slice(0,r.depth);return o(e).each(function(e){var t=yn(n,r.itemAttributes,r.content);wn(e,t),bn(e,r)}),e},Cn=function(e,t,n){e=hn(e,n,n.depth-t.length);return mn(e),vn(e,n),gn(t,e),t.concat(e)},Sn=function(n,e){e=te(e,function(e,t){return(t.depth>e.length?Cn:xn)(n,e,t)},[]);return ue(e).map(function(e){return e.list})},M=function(e){return nt(e,"OL,UL")},kn=function(e){return vt(e).exists(M)},Tn=function(e){return bt(e).exists(M)},On=function(e){return 0<e.depth},En=function(e){return e.isSelected},_n=function(e){var t=pt(e),e=Tn(e)?t.slice(0,-1):t;return s(e,kt)},An=function(t,n,r){return gt(t).filter(ft).map(function(e){return{depth:n,dirty:!1,isSelected:r,content:_n(t),itemAttributes:mt(t),listAttributes:mt(e),listType:lt(e)}})},Dn=function(e,t){switch(e){case"Indent":t.depth++;break;case"Outdent":t.depth--;break;case"Flatten":t.depth=0}t.dirty=!0},Mn=function(e,t){e.listType=t.listType,e.listAttributes=ce({},t.listAttributes)},Nn=function(e){e.listAttributes=st(e.listAttributes,function(e,t){return"start"!==t})},Rn=function(e,t){function n(e){return e.depth===o&&!e.dirty}function r(e){return e.depth<o}var o=e[t].depth;return f(oe(e.slice(0,t)),n,r).orThunk(function(){return f(e.slice(t+1),n,r)})},zn=function(n){return l(n,function(t,e){Rn(n,e).fold(function(){t.dirty&&Nn(t)},function(e){return Mn(t,e)})}),n},Bn=function(e){var t=e;return{get:function(){return t},set:function(e){t=e}}},Pn=function(n,r,o,i){return vt(i).filter(M).fold(function(){r.each(function(e){Ze(e.start,i)&&o.set(!0)});var e=An(i,n,o.get()),t=(r.each(function(e){Ze(e.end,i)&&o.set(!1)}),bt(i).filter(M).map(function(e){return N(n,r,o,e)}).getOr([]));return e.toArray().concat(t)},function(e){return N(n,r,o,e)})},N=function(t,n,r,e){return re(pt(e),function(e){return(M(e)?N:Pn)(t+1,n,r,e)})},In=function(e,t){var n=Bn(!1);return s(e,function(e){return{sourceList:e,entries:N(0,t,n,e)}})},Ln=function(t,e){e=zn(e);return s(e,function(e){e=cn(e.content);return v.fromDom(Ht(t,e.dom))})},Fn=function(e,t){t=zn(t);return Sn(e.contentDocument,t).toArray()},Hn=function(t,e){return re(ee(e,On),function(e){return(ue(e).exists(On)?Fn:Ln)(t,e)})},Vn=function(e,t){l(n(e,En),function(e){return Dn(t,e)})},jn=function(e){e=s(Qt(e),v.fromDom);return an(g(e,K(kn)),g(oe(e),K(kn)),function(e,t){return{start:e,end:t}})},Un=function(n,e,r){e=In(e,jn(n));l(e,function(e){Vn(e.entries,r);var t=Hn(n,e.entries);l(t,function(e){D(n,"Indent"===r?"IndentList":"OutdentList",e.dom)}),wt(e.sourceList,t),Ct(e.sourceList)})},Wn=function(e,t){var n,r=s(rn(e),v.fromDom),o=s(en(e),v.fromDom),i=!1;return(r.length||o.length)&&(n=e.selection.getBookmark(),Un(e,r,t),qt(e,t,o),e.selection.moveToBookmark(n),e.selection.setRng(E(e.selection.getRng())),e.nodeChanged(),i=!0),i},$n=function(e){return Wn(e,"Indent")},qn=function(e){return Wn(e,"Outdent")},Gn=function(e){return Wn(e,"Flatten")},Kn=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager"),R=h.DOM,z=function(o){function e(e){var t,n=o[e?"startContainer":"endContainer"],r=o[e?"startOffset":"endOffset"];1===n.nodeType&&(t=R.create("span",{"data-mce-type":"bookmark"}),n.hasChildNodes()?(r=Math.min(r,n.childNodes.length-1),e?n.insertBefore(t,n.childNodes[r]):R.insertAfter(t,n.childNodes[r])):n.appendChild(t),n=t,r=0),i[e?"startContainer":"endContainer"]=n,i[e?"startOffset":"endOffset"]=r}var i={};return e(!0),o.collapsed||e(),i},B=function(o){function e(e){var t,n=t=o[e?"startContainer":"endContainer"],r=o[e?"startOffset":"endOffset"];n&&(1===n.nodeType&&(r=function(e){for(var t=e.parentNode.firstChild,n=0;t;){if(t===e)return n;1===t.nodeType&&"bookmark"===t.getAttribute("data-mce-type")||n++,t=t.nextSibling}return-1}(n),n=n.parentNode,R.remove(t),!n.hasChildNodes())&&R.isBlock(n)&&n.appendChild(R.create("br")),o[e?"startContainer":"endContainer"]=n,o[e?"startOffset":"endOffset"]=r)}e(!0),e();var t=R.createRng();return t.setStart(o.startContainer,o.startOffset),o.endContainer&&t.setEnd(o.endContainer,o.endOffset),E(t)},Xn=function(e){switch(e){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},Yn=function(e){return/\btox\-/.test(e.className)},Jn=function(e,t,n){function r(e){e=f(e.parents,S,Mt).filter(function(e){return e.nodeName===t&&!Yn(e)}).isSome(),n(e)}var o=e.dom.getParents(e.selection.getNode());return r({parents:o}),e.on("NodeChange",r),function(){return e.off("NodeChange",r)}},Zn=function(e,t,n){n=n["list-style-type"]||null;e.setStyle(t,"list-style-type",n)},Qn=function(n,e){x.each(e,function(e,t){n.setAttribute(t,e)})},er=function(e,t,n){Qn(t,n["list-attributes"]),x.each(e.select("li",t),function(e){Qn(e,n["list-item-attributes"])})},tr=function(e,t,n){Zn(e,t,n),er(e,t,n)},nr=function(n,r,e){x.each(e,function(e){var t;return n.setStyle(r,((t={})[e]="",t))})},rr=function(e,t,n,r){var o=t[n?"startContainer":"endContainer"],t=t[n?"startOffset":"endOffset"];for(1===o.nodeType&&(o=o.childNodes[Math.min(t,o.childNodes.length-1)]||o),!n&&k(o.nextSibling)&&(o=o.nextSibling);o.parentNode!==r;){if(Rt(e,o))return o;if(/^(TD|TH)$/.test(o.parentNode.nodeName))return o;o=o.parentNode}return o},or=function(n,e,r){for(var o,i=[],u=n.dom,t=rr(n,e,!0,r),a=rr(n,e,!1,r),c=[],s=t;s&&(c.push(s),s!==a);s=s.nextSibling);return x.each(c,function(e){var t;Rt(n,e)?(i.push(e),o=null):u.isBlock(e)||k(e)?(k(e)&&u.remove(e),o=null):(t=e.nextSibling,Kn.isBookmarkNode(e)&&(S(t)||Rt(n,t)||!t&&e.parentNode===r)?o=null:(o||(o=u.create("p"),e.parentNode.insertBefore(o,e),i.push(o)),o.appendChild(e)))}),i},ir=function(e,t,n){e=e.getStyle(t,"list-style-type"),t=n?n["list-style-type"]:"";return e===(null===t?"":t)},ur=function(o,i,u){var e,t=o.selection.getRng(),a="LI",n=A(o,o.selection.getStart(!0)),c=o.dom;"false"!==c.getContentEditable(o.selection.getNode())&&("DL"===(i=i.toUpperCase())&&(a="DT"),e=z(t),t=or(o,t,n),x.each(t,function(e){var t,n=e.previousSibling,r=e.parentNode;At(r)||(n&&S(n)&&n.nodeName===i&&ir(c,n,u)?(t=n,e=c.rename(e,a),n.appendChild(e)):(t=c.create(i),e.parentNode.insertBefore(t,e),t.appendChild(e),e=c.rename(e,a)),nr(c,e,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),tr(c,t,u),fr(o.dom,t))}),o.selection.setRng(B(e)))},ar=function(e,t){return e&&t&&S(e)&&e.nodeName===t.nodeName},cr=function(e,t,n){return e.getStyle(t,"list-style-type",!0)===e.getStyle(n,"list-style-type",!0)},sr=function(e,t){return e.className===t.className},lr=function(e,t,n){return ar(t,n)&&cr(e,t,n)&&sr(t,n)},fr=function(e,t){var n,r=t.nextSibling;if(lr(e,t,r)){for(;n=r.firstChild;)t.appendChild(n);e.remove(r)}if(r=t.previousSibling,lr(e,t,r)){for(;n=r.lastChild;)t.insertBefore(n,t.firstChild);e.remove(r)}},dr=function(e,t,n,r){var o;t.nodeName!==n?(o=e.dom.rename(t,n),tr(e.dom,o,r),D(e,Xn(n),o)):(tr(e.dom,t,r),D(e,Xn(n),t))},mr=function(t,e,n,r,o){var i,u=S(e);u&&e.nodeName===r&&!gr(o)?Gn(t):(ur(t,r,o),i=z(t.selection.getRng()),u=u?function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||((r=r||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}([e],n,!0):n,x.each(u,function(e){dr(t,e,r,o)}),t.selection.setRng(B(i)))},gr=function(e){return"list-style-type"in e},pr=function(e,t,n,r){var o,i;t!==e.getBody()&&(t?t.nodeName!==n||gr(r)||Yn(t)?(o=z(e.selection.getRng()),tr(e.dom,t,r),i=e.dom.rename(t,n),fr(e.dom,i),e.selection.setRng(B(o)),ur(e,n,r),D(e,Xn(n),i)):Gn(e):(ur(e,n,r),D(e,Xn(n),t)))},hr=function(e,t,n){var r=_(e),o=Jt(e),n=i(n)?n:{};0<o.length?mr(e,r,o,t,n):pr(e,r,t,n)},vr=h.DOM,br=function(e,t){var n,r=t.parentNode;"LI"===r.nodeName&&r.firstChild===t&&((n=r.previousSibling)&&"LI"===n.nodeName?(n.appendChild(t),T(e,r)&&vr.remove(r)):vr.setStyle(r,"listStyleType","none")),S(r)&&(n=r.previousSibling)&&"LI"===n.nodeName&&n.appendChild(t)},yr=function(t,e){e=x.grep(t.select("ol,ul",e));x.each(e,function(e){br(t,e)})},wr=function(e,t,n,r){var o=t.startContainer,t=t.startOffset;if(C(o)&&(n?t<o.data.length:0<t))return o;var i=e.schema.getNonEmptyElements(),u=(1===o.nodeType&&(o=rt.getNode(o,t)),new ot(o,r));for(n&&Bt(e.dom,o)&&u.next();o=u[n?"next":"prev2"]();){if("LI"===o.nodeName&&!o.hasChildNodes())return o;if(i[o.nodeName])return o;if(C(o)&&0<o.data.length)return o}},xr=function(e,t){t=t.childNodes;return 1===t.length&&!S(t[0])&&e.isBlock(t[0])},Cr=function(e,t){xr(e,t)&&e.remove(t.firstChild,!0)},Sr=function(e,t,n){var r,o=xr(e,n)?n.firstChild:n;if(Cr(e,t),!T(e,t,!0))for(;r=t.firstChild;)o.appendChild(r)},kr=function(t,e,n){var r,o=e.parentNode;Pt(t,e)&&Pt(t,n)&&(S(n.lastChild)&&(r=n.lastChild),o===n.lastChild&&k(o.previousSibling)&&t.remove(o.previousSibling),(o=n.lastChild)&&k(o)&&e.hasChildNodes()&&t.remove(o),T(t,n,!0)&&t.$(n).empty(),Sr(t,e,n),r&&n.appendChild(r),o=tt(v.fromDom(n),v.fromDom(e))?t.getParents(e,S,n):[],t.remove(e),l(o,function(e){T(t,e)&&e!==t.getRoot()&&t.remove(e)}))},Tr=function(e,t,n){e.dom.$(n).empty(),kr(e.dom,t,n),e.selection.setCursorLocation(n,0)},Or=function(e,t,n,r){var o=e.dom;o.isEmpty(r)?Tr(e,n,r):(t=z(t),kr(o,n,r),e.selection.setRng(B(t)))},Er=function(e,t,n,r){t=z(t),kr(e.dom,n,r),n=B(t);e.selection.setRng(n)},_r=function(e,t){var n=e.dom,r=e.selection,o=r.getStart(),o=A(e,o),i=n.getParent(r.getStart(),"LI",o);if(i){var u=i.parentNode;if(u===e.getBody()&&T(n,u))return!0;var a=E(r.getRng()),c=n.getParent(wr(e,a,t,o),"LI",o);if(c&&c!==i)return e.undoManager.transact(function(){t?Or(e,a,c,i):Nt(i)?qn(e):Er(e,a,i,c)}),!0;if(!c&&!t&&0===a.startOffset&&0===a.endOffset)return e.undoManager.transact(function(){Gn(e)}),!0}return!1},Ar=function(e,t,n){n=e.getParent(t.parentNode,e.isBlock,n);e.remove(t),n&&e.isEmpty(n)&&e.remove(n)},Dr=function(e,t){var n=e.dom,r=e.selection.getStart(),o=A(e,r),i=n.getParent(r,n.isBlock,o);if(i&&n.isEmpty(i)){var r=E(e.selection.getRng()),u=n.getParent(wr(e,r,t,o),"LI",o);if(u)return e.undoManager.transact(function(){Ar(n,i,o),fr(n,u.parentNode),e.selection.select(u,!0),e.selection.collapse(t)}),!0}return!1},Mr=function(e,t){return _r(e,t)||Dr(e,t)},Nr=function(e){var t=e.selection.getStart(),n=A(e,t);return!!(e.dom.getParent(t,"LI,DT,DD",n)||0<Qt(e).length)&&(e.undoManager.transact(function(){e.execCommand("Delete"),yr(e.dom,e.getBody())}),!0)},Rr=function(e,t){return e.selection.isCollapsed()?Mr(e,t):Nr(e)},zr=function(t){t.on("keydown",function(e){e.keyCode===b.BACKSPACE?Rr(t,!1)&&e.preventDefault():e.keyCode===b.DELETE&&Rr(t,!0)&&e.preventDefault()})},Br=function(n,e){var r=_(n);n.undoManager.transact(function(){i(e.styles)&&n.dom.setStyles(r,e.styles),i(e.attrs)&&ut(e.attrs,function(e,t){return n.dom.setAttrib(r,t,e)})})},Pr=function(e){e=oe(ke(e).split("")),e=s(e,function(e,t){e=e.toUpperCase().charCodeAt(0)-"A".charCodeAt(0)+1;return Math.pow(26,t)*e});return te(e,function(e,t){return e+t},0)},Ir=function(e){var t;return--e<0?"":(t=e%26,e=Math.floor(e/26),Ir(e)+String.fromCharCode("A".charCodeAt(0)+t))},Lr=function(e){return/^[A-Z]+$/.test(e)},Fr=function(e){return/^[a-z]+$/.test(e)},Hr=function(e){return/^[0-9]+$/.test(e)},Vr=function(e){return Hr(e)?2:Lr(e)?0:Fr(e)?1:Oe(e)?3:4},jr=function(e){switch(Vr(e)){case 2:return c.some({listStyleType:c.none(),start:e});case 0:return c.some({listStyleType:c.some("upper-alpha"),start:Pr(e).toString()});case 1:return c.some({listStyleType:c.some("lower-alpha"),start:Pr(e).toString()});case 3:return c.some({listStyleType:c.none(),start:""});case 4:return c.none()}},Ur=function(e){var t=parseInt(e.start,10);return un(e.listStyleType,"upper-alpha")?Ir(t):un(e.listStyleType,"lower-alpha")?Ir(t).toLowerCase():e.start},Wr=function(n){var e=_(n);_t(e)&&n.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:Ur({start:n.dom.getAttrib(e,"start","1"),listStyleType:c.some(n.dom.getStyle(e,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:function(e){var t=e.getData();jr(t.start).each(function(e){n.execCommand("mceListUpdate",!1,{attrs:{start:"1"===e.start?"":e.start},styles:{"list-style-type":e.listStyleType.getOr("")}})}),e.close()}})},$r=function(t,n){return function(){var e=_(t);return e&&e.nodeName===n}},qr=function(e){e.addCommand("mceListProps",function(){Wr(e)})},Gr=function(t){t.on("keydown",function(e){e.keyCode!==b.TAB||b.metaKeyPressed(e)||t.undoManager.transact(function(){(e.shiftKey?qn:$n)(t)&&e.preventDefault()})})};H.add("lists",function(e){var n,t,r,o;return!1===e.hasPlugin("rtc",!0)?(It(t=e)&&Gr(t),zr(t),(n=e).on("BeforeExecCommand",function(e){e=e.command.toLowerCase();"indent"===e?$n(n):"outdent"===e&&qn(n)}),n.addCommand("InsertUnorderedList",function(e,t){hr(n,"UL",t)}),n.addCommand("InsertOrderedList",function(e,t){hr(n,"OL",t)}),n.addCommand("InsertDefinitionList",function(e,t){hr(n,"DL",t)}),n.addCommand("RemoveList",function(){Gn(n)}),qr(n),n.addCommand("mceListUpdate",function(e,t){i(t)&&Br(n,t)}),n.addQueryStateHandler("InsertUnorderedList",$r(n,"UL")),n.addQueryStateHandler("InsertOrderedList",$r(n,"OL")),n.addQueryStateHandler("InsertDefinitionList",$r(n,"DL"))):qr(e),pe(e),(r=e).ui.registry.addMenuItem("listprops",{text:"List properties...",icon:"ordered-list",onAction:function(){return r.execCommand("mceListProps")},onSetup:function(t){return Jn(r,"OL",function(e){return t.setDisabled(!e)})}}),r.ui.registry.addContextMenu("lists",{update:function(e){e=_(r,e);return _t(e)?["listprops"]:[]}}),o=e,{backspaceDelete:function(e){Rr(o,e)}}})}(),function(){function e(n){return function(e){return t=typeof(e=e),(null===e?"null":"object"==t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"==t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t)===n;var t}}function i(e){return function(){return e}}function t(e){return e}function n(){return f}var P=tinymce.util.Tools.resolve("tinymce.PluginManager"),l=function(){return(l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},I=e("string"),c=e("object"),L=e("array"),F=function(e){return null==e},u=function(e){return!F(e)},a=i(!1),s=i(!0),f={fold:function(e,t){return e()},isSome:a,isNone:s,getOr:t,getOrThunk:r,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:i(null),getOrUndefined:i(void 0),or:t,orThunk:r,map:n,each:function(){},bind:n,exists:a,forall:s,filter:function(){return f},toArray:function(){return[]},toString:i("none()")};function r(e){return e()}function d(n){function e(){return o}function t(e){return e(n)}var r=i(n),o={fold:function(e,t){return t(n)},isSome:s,isNone:a,getOr:r,getOrThunk:r,getOrDie:r,getOrNull:r,getOrUndefined:r,or:e,orThunk:e,map:function(e){return d(e(n))},each:function(e){e(n)},bind:t,exists:t,forall:t,filter:function(e){return e(n)?o:f},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return o}var m={some:d,none:n,from:function(e){return null==e?f:d(e)}},H=Array.prototype.push,g=function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)},V=function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!L(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);H.apply(t,e[n])}return t},p=function(e){var t=e;return{get:function(){return t},set:function(e){t=e}}},j=Object.keys,U=Object.hasOwnProperty,W=function(e,t){for(var n=j(e),r=0,o=n.length;r<o;r++){var i=n[r];t(e[i],i)}},h=function(e,t){return v(e,t)?m.from(e[t]):m.none()},v=function(e,t){return U.call(e,t)},b=function(e){return e.getParam("media_scripts")},$=function(e){return e.getParam("audio_template_callback")},q=function(e){return e.getParam("video_template_callback")},G=function(e){return e.getParam("media_live_embeds",!0)},K=function(e){return e.getParam("media_filter_html",!0)},X=function(e){return e.getParam("media_url_resolver")},Y=function(e){return e.getParam("media_alt_source",!0)},J=function(e){return e.getParam("media_poster",!0)},Z=function(e){return e.getParam("media_dimensions",!0)},y=tinymce.util.Tools.resolve("tinymce.util.Tools"),o=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),w=tinymce.util.Tools.resolve("tinymce.html.SaxParser"),x=function(e,t){if(e)for(var n=0;n<e.length;n++)if(-1!==t.indexOf(e[n].filter))return e[n]},Q=o.DOM,C=function(e){return e.replace(/px$/,"")},ee=function(e){var t=e.map.style,t=t?Q.parseStyle(t):{};return{type:"ephox-embed-iri",source:e.map["data-ephox-embed-iri"],altsource:"",poster:"",width:h(t,"max-width").map(C).getOr(""),height:h(t,"max-height").map(C).getOr("")}},S=function(r,e){var o=p(!1),i={};return w({validate:!1,allow_conditional_comments:!0,start:function(e,t){if(!o.get())if(v(t.map,"data-ephox-embed-iri"))o.set(!0),i=ee(t);else{if(i.source||"param"!==e||(i.source=t.map.movie),"iframe"!==e&&"object"!==e&&"embed"!==e&&"video"!==e&&"audio"!==e||(i.type||(i.type=e),i=y.extend(t.map,i)),"script"===e){var n=x(r,t.map.src);if(!n)return;i={type:"script",source:t.map.src,width:String(n.width),height:String(n.height)}}"source"===e&&(i.source?i.altsource||(i.altsource=t.map.src):i.source=t.map.src),"img"!==e||i.poster||(i.poster=t.map.src)}}}).parse(e),i.source=i.source||i.src||i.data,i.altsource=i.altsource||"",i.poster=i.poster||"",i},k=function(e){e={mp3:"audio/mpeg",m4a:"audio/x-m4a",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"}[e.toLowerCase().split(".").pop()];return e||""},T=tinymce.util.Tools.resolve("tinymce.html.Schema"),O=tinymce.util.Tools.resolve("tinymce.html.Writer"),E=o.DOM,_=function(e){return/^[0-9.]+$/.test(e)?e+"px":e},A=function(i,e){W(e,function(e,t){var n=""+e;if(i.map[t])for(var r=i.length;r--;){var o=i[r];o.name===t&&(n?(i.map[t]=n,o.value=n):(delete i.map[t],i.splice(r,1)))}else n&&(i.push({name:t,value:n}),i.map[t]=n)})},te=function(e,t){var n=t.map.style,n=n?E.parseStyle(n):{};n["max-width"]=_(e.width),n["max-height"]=_(e.height),A(t,{style:E.serializeStyle(n)})},D=["source","altsource"],M=function(e,o,i){var u,a=O(),c=p(!1),s=0;return w({validate:!1,allow_conditional_comments:!0,comment:function(e){a.comment(e)},cdata:function(e){a.cdata(e)},text:function(e,t){a.text(e,t)},start:function(e,t,n){if(!c.get())if(v(t.map,"data-ephox-embed-iri"))c.set(!0),te(o,t);else{switch(e){case"video":case"object":case"embed":case"img":case"iframe":void 0!==o.height&&void 0!==o.width&&A(t,{width:o.width,height:o.height})}if(i)switch(e){case"video":A(t,{poster:o.poster,src:""}),o.altsource&&A(t,{src:""});break;case"iframe":A(t,{src:o.source});break;case"source":if(s<2&&(A(t,{src:o[D[s]],type:o[D[s]+"mime"]}),!o[D[s]]))return;s++;break;case"img":if(!o.poster)return;u=!0}}a.start(e,t,n)},end:function(e){if(!c.get()){if("video"===e&&i)for(var t,n=0;n<2;n++)o[D[n]]&&((t=[]).map={},s<=n)&&(A(t,{src:o[D[n]],type:o[D[n]+"mime"]}),a.start("source",t,!0));var r;o.poster&&"object"===e&&i&&!u&&((r=[]).map={},A(r,{src:o.poster,width:o.width,height:o.height}),a.start("img",r,!0))}a.end(e)}},T({})).parse(e),a.getContent()},ne=[{regex:/youtu\.be\/([\w\-_\?&=.]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)(&([a-z0-9&=\-_]+))?/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$2?$4",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\?&=\-_]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?title=0&amp;byline=0",allowFullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0},{regex:/dai\.ly\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0}],re=function(e){e=e.match(/^(https?:\/\/|www\.)(.+)$/i);return!(e&&1<e.length)||"www."===e[1]?"https://":e[1]},oe=function(e,t){for(var n=re(t),r=e.regex.exec(t),o=n+e.url,i=0;i<r.length;i++)!function(e){o=o.replace("$"+e,function(){return r[e]||""})}(i);return o.replace(/\?$/,"")},ie=function(t){var e=ne.filter(function(e){return e.regex.test(t)});return 0<e.length?y.extend({},e[0],{url:oe(e[0],t)}):null},ue=function(e){var t=e.allowfullscreen?' allowFullscreen="1"':"";return'<iframe src="'+e.source+'" width="'+e.width+'" height="'+e.height+'"'+t+"></iframe>"},ae=function(e){var t='<object data="'+e.source+'" width="'+e.width+'" height="'+e.height+'" type="application/x-shockwave-flash">';return e.poster&&(t+='<img src="'+e.poster+'" width="'+e.width+'" height="'+e.height+'" />'),t+="</object>"},ce=function(e,t){return t?t(e):'<audio controls="controls" src="'+e.source+'">'+(e.altsource?'\n<source src="'+e.altsource+'"'+(e.altsourcemime?' type="'+e.altsourcemime+'"':"")+" />\n":"")+"</audio>"},se=function(e,t){return t?t(e):'<video width="'+e.width+'" height="'+e.height+'"'+(e.poster?' poster="'+e.poster+'"':"")+' controls="controls">\n<source src="'+e.source+'"'+(e.sourcemime?' type="'+e.sourcemime+'"':"")+" />\n"+(e.altsource?'<source src="'+e.altsource+'"'+(e.altsourcemime?' type="'+e.altsourcemime+'"':"")+" />\n":"")+"</video>"},le=function(e){return'<script src="'+e.source+'"><\/script>'},fe=function(n,e){var r=y.extend({},e);if(!r.source&&(y.extend(r,S(b(n),r.embed)),!r.source))return"";r.altsource||(r.altsource=""),r.poster||(r.poster=""),r.source=n.convertURL(r.source,"source"),r.altsource=n.convertURL(r.altsource,"source"),r.sourcemime=k(r.source),r.altsourcemime=k(r.altsource),r.poster=n.convertURL(r.poster,"poster");var t,e=ie(r.source);return e&&(r.source=e.url,r.type=e.type,r.allowfullscreen=e.allowFullscreen,r.width=r.width||String(e.w),r.height=r.height||String(e.h)),r.embed?M(r.embed,r,!0):((e=x(b(n),r.source))&&(r.type="script",r.width=String(e.width),r.height=String(e.height)),e=$(n),t=q(n),r.width=r.width||"300",r.height=r.height||"150",y.each(r,function(e,t){r[t]=n.dom.encode(""+e)}),"iframe"===r.type?ue(r):"application/x-shockwave-flash"===r.sourcemime?ae(r):-1!==r.sourcemime.indexOf("audio")?ce(r,e):"script"===r.type?le(r):se(r,t))},de=function(e){return e.hasAttribute("data-mce-object")||e.hasAttribute("data-ephox-embed-iri")},me=tinymce.util.Tools.resolve("tinymce.util.Promise"),N={},ge=function(r,o,i){return new me(function(t,e){function n(e){return e.html&&(N[r.source]=e),t({url:r.source,html:e.html||o(r)})}N[r.source]?n(N[r.source]):i({url:r.source},n,e)})},pe=function(e,t){return me.resolve({html:t(e),url:e.source})},he=function(t){return function(e){return fe(t,e)}},ve=function(e,t){var n=X(e);return n?ge(t,he(e),n):pe(t,he(e))},be=function(e){return v(N,e)},ye=function(e,t){return h(t,e).bind(function(e){return h(e,"meta")})},we=function(i,u,a){return function(e){var t=function(){return h(i,e)},n=function(){return h(u,e)},r=function(e){return h(e,"value").bind(function(e){return 0<e.length?m.some(e):m.none()})},o={};return o[e]=(e===a?t().bind(function(e){return c(e)?r(e).orThunk(n):n().orThunk(function(){return m.from(e)})}):n().orThunk(function(){return t().bind(function(e){return c(e)?r(e):m.from(e)})})).getOr(""),o}},xe=function(e,n){var r={};return h(e,"dimensions").each(function(e){g(["width","height"],function(t){h(n,t).orThunk(function(){return h(e,t)}).each(function(e){return r[t]=e})})}),r},R=function(e,t){var n=t?ye(t,e).getOr({}):{},t=we(e,n,t);return l(l(l(l(l({},t("source")),t("altsource")),t("poster")),t("embed")),xe(e,n))},z=function(e){var r=l(l({},e),{source:{value:h(e,"source").getOr("")},altsource:{value:h(e,"altsource").getOr("")},poster:{value:h(e,"poster").getOr("")}});return g(["width","height"],function(n){h(e,n).each(function(e){var t=r.dimensions||{};t[n]=e,r.dimensions=t})}),r},Ce=function(t){return function(e){e=e&&e.msg?"Media embed handler error: "+e.msg:"Media embed handler threw unknown error.";t.notificationManager.open({type:"error",text:e})}},Se=function(e,t){return S(b(e),t)},ke=function(e){var t=e.selection.getNode(),t=de(t)?e.serializer.serialize(t,{selection:!0}):"";return l({embed:t},S(b(e),t))},Te=function(r,o){return function(e){var t,n;I(e.url)&&0<e.url.trim().length&&(t=e.html,n=Se(o,t),n=l(l({},n),{source:e.url,embed:t}),r.setData(z(n)))}},Oe=function(e,t){for(var n=e.dom.select("*[data-mce-object]"),r=0;r<t.length;r++)for(var o=n.length-1;0<=o;o--)t[r]===n[o]&&n.splice(o,1);e.selection.select(n[0])},Ee=function(e,t){var n=e.dom.select("*[data-mce-object]");e.insertContent(t),Oe(e,n),e.nodeChanged()},_e=function(e,t,n){t.embed=M(t.embed,t),t.embed&&(e.source===t.source||be(t.source))?Ee(n,t.embed):ve(n,t).then(function(e){Ee(n,e.html)}).catch(Ce(n))},Ae=function(a){var e=ke(a),c=p(e),e=z(e),t=Z(a)?[{type:"sizeinput",name:"dimensions",label:"Constrain proportions",constrain:!0}]:[],t={title:"General",name:"general",items:V([[{name:"source",type:"urlinput",filetype:"media",label:"Source"}],t])},n={title:"Embed",items:[{type:"textarea",name:"embed",label:"Paste your embed code below:"}]},r=[],o=(Y(a)&&r.push({name:"altsource",type:"urlinput",filetype:"media",label:"Alternative source URL"}),J(a)&&r.push({name:"poster",type:"urlinput",filetype:"image",label:"Media poster (Image URL)"}),{title:"Advanced",name:"advanced",items:r}),t=[t,n];0<r.length&&t.push(o);var s=a.windowManager.open({title:"Insert/Edit Media",size:"normal",body:{type:"tabpanel",tabs:t},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:function(e){var t=R(e.getData());_e(c.get(),t,a),e.close()},onChange:function(e,t){switch(t.name){case"source":var n=c.get(),r=e;r=R(r.getData(),"source"),n.source!==r.source&&(Te(s,a)({url:r.source,html:""}),ve(a,r).then(Te(s,a)).catch(Ce(a)));break;case"embed":r=R((n=e).getData()),r=Se(a,r.embed),n.setData(z(r));break;case"dimensions":case"altsource":case"poster":o=e,i=t.name,i=R(o.getData(),i),u=fe(a,i),o.setData(z(l(l({},i),{embed:u})))}var o,i,u;c.set(R(e.getData()))},initialData:e})},B=tinymce.util.Tools.resolve("tinymce.html.Node"),De=tinymce.util.Tools.resolve("tinymce.Env"),Me=tinymce.util.Tools.resolve("tinymce.html.DomParser"),Ne=function(i,e){var u,a;return!1===K(i)?e:(u=O(),w({validate:!1,allow_conditional_comments:!1,comment:function(e){a||u.comment(e)},cdata:function(e){a||u.cdata(e)},text:function(e,t){a||u.text(e,t)},start:function(e,t,n){if(a=!0,"script"!==e&&"noscript"!==e&&"svg"!==e){for(var r=t.length-1;0<=r;r--){var o=t[r].name;0===o.indexOf("on")&&(delete t.map[o],t.splice(r,1)),"style"===o&&(t[r].value=i.dom.serializeStyle(i.dom.parseStyle(t[r].value),e))}u.start(e,t,n),a=!1}},end:function(e){a||u.end(e)}},T({})).parse(e),u.getContent())},Re=function(e){e=e.name;return"iframe"===e||"video"===e||"audio"===e},ze=function(e,t,n,r){void 0===r&&(r=null);e=e.attr(n);return u(e)?e:v(t,n)?null:r},Be=function(e,t,n){var r="img"===t.name||"video"===e.name,o="audio"===e.name?"30":"150",o=r?o:null;t.attr({width:ze(e,n,"width",r?"300":null),height:ze(e,n,"height",o)})},Pe=function(e,t,n,r){for(var o=Me({forced_root_block:!1,validate:!1},e.schema).parse(r,{context:t});o.firstChild;)n.append(o.firstChild)},Ie=function(e,t){var n=t.name,r=new B("img",1);return r.shortEnded=!0,Fe(e,t,r),Be(t,r,{}),r.attr({style:t.attr("style"),src:De.transparentSrc,"data-mce-object":n,class:"mce-object mce-object-"+n}),r},Le=function(e,t){var n=t.name,r=new B("span",1),o=(r.attr({contentEditable:"false",style:t.attr("style"),"data-mce-object":n,class:"mce-preview-object mce-object-"+n}),Fe(e,t,r),e.dom.parseStyle(t.attr("style"))),i=new B(n,1),e=(Be(t,i,o),i.attr({src:t.attr("src"),style:t.attr("style"),class:t.attr("class")}),"iframe"===n?i.attr({allowfullscreen:t.attr("allowfullscreen"),frameborder:"0"}):(g(["controls","crossorigin","currentTime","loop","muted","poster","preload"],function(e){i.attr(e,t.attr(e))}),o=r.attr("data-mce-html"),u(o)&&Pe(e,n,i,unescape(o))),new B("span",1));return e.attr("class","mce-shim"),r.append(i),r.append(e),r},Fe=function(e,t,n){for(var r=t.attributes,o=r.length;o--;){var i=r[o].name,u=r[o].value;"width"!==i&&"height"!==i&&"style"!==i&&("data"!==i&&"src"!==i||(u=e.convertURL(u,i)),n.attr("data-mce-p-"+i,u))}t=t.firstChild&&t.firstChild.value;t&&(n.attr("data-mce-html",escape(Ne(e,t))),n.firstChild=null)},He=function(e){e=e.attr("class");return e&&/\btiny-pageembed\b/.test(e)},Ve=function(e){for(;e=e.parent;)if(e.attr("data-ephox-embed-iri")||He(e))return!0;return!1},je=function(o){return function(e){for(var t,n,r=e.length;r--;)!(t=e[r]).parent||t.parent.attr("data-mce-object")||"script"===t.name&&!(n=x(b(o),t.attr("src")))||(n&&(n.width&&t.attr("width",n.width.toString()),n.height)&&t.attr("height",n.height.toString()),Re(t)&&G(o)&&De.ceFalse?Ve(t)||t.replace(Le(o,t)):Ve(t)||t.replace(Ie(o,t)))}};P.add("media",function(e){var t,n,l,r,o;function i(){return n.execCommand("mceMedia")}return(t=e).addCommand("mceMedia",function(){Ae(t)}),(n=e).ui.registry.addToggleButton("media",{tooltip:"Insert/edit media",icon:"embed",onAction:i,onSetup:function(e){var t=n.selection;return e.setActive(de(t.getNode())),t.selectorChangedWithUnbind("img[data-mce-object],span[data-mce-object],div[data-ephox-embed-iri]",e.setActive).unbind}}),n.ui.registry.addMenuItem("media",{icon:"embed",text:"Media...",onAction:i}),e.on("ResolveName",function(e){var t;1===e.target.nodeType&&(t=e.target.getAttribute("data-mce-object"))&&(e.name=t)}),(l=e).on("preInit",function(){var t=l.schema.getSpecialElements(),n=(y.each("video audio iframe object".split(" "),function(e){t[e]=new RegExp("</"+e+"[^>]*>","gi")}),l.schema.getBoolAttrs());y.each("webkitallowfullscreen mozallowfullscreen allowfullscreen".split(" "),function(e){n[e]={}}),l.parser.addNodeFilter("iframe,video,audio,object,embed,script",je(l)),l.serializer.addAttributeFilter("data-mce-object",function(e,t){for(var n,r,o,i,u,a,c=e.length;c--;)if((n=e[c]).parent){for(u=n.attr(t),r=new B(u,1),"audio"!==u&&"script"!==u&&((a=n.attr("class"))&&-1!==a.indexOf("mce-preview-object")?r.attr({width:n.firstChild.attr("width"),height:n.firstChild.attr("height")}):r.attr({width:n.attr("width"),height:n.attr("height")})),r.attr({style:n.attr("style")}),o=(i=n.attributes).length;o--;){var s=i[o].name;0===s.indexOf("data-mce-p-")&&r.attr(s.substr(11),i[o].value)}"script"===u&&r.attr("type","text/javascript"),(a=n.attr("data-mce-html"))&&((u=new B("#text",3)).raw=!0,u.value=Ne(l,unescape(a)),r.append(u)),n.replace(r)}})}),l.on("SetContent",function(){l.$("span.mce-preview-object").each(function(e,t){t=l.$(t);0===t.find("span.mce-shim").length&&t.append('<span class="mce-shim"></span>')})}),(r=e).on("click keyup touchend",function(){var e=r.selection.getNode();e&&r.dom.hasClass(e,"mce-preview-object")&&r.dom.getAttrib(e,"data-mce-selected")&&e.setAttribute("data-mce-selected","2")}),r.on("ObjectSelected",function(e){"script"===e.target.getAttribute("data-mce-object")&&e.preventDefault()}),r.on("ObjectResized",function(e){var t,n=e.target;n.getAttribute("data-mce-object")&&(t=n.getAttribute("data-mce-html"))&&(t=unescape(t),n.setAttribute("data-mce-html",escape(M(t,{width:String(e.width),height:String(e.height)}))))}),o=e,{showDialog:function(){Ae(o)}}})}(),function(){function e(n){return function(e){return t=typeof(e=e),(null===e?"null":"object"==t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"==t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t)===n;var t}}function t(t){return function(e){return typeof e===t}}function i(e){return function(){return e}}function n(e){return e}function r(){return f}var o,P=tinymce.util.Tools.resolve("tinymce.PluginManager"),I=tinymce.util.Tools.resolve("tinymce.util.VK"),u=e("string"),a=e("array"),L=function(e){return o===e},F=t("boolean"),H=t("function"),c=function(){},V=function(e,t){return e===t},s=i(!1),l=i(!(o=null)),f={fold:function(e,t){return e()},isSome:s,isNone:l,getOr:n,getOrThunk:d,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:i(null),getOrUndefined:i(void 0),or:n,orThunk:d,map:r,each:c,bind:r,exists:s,forall:l,filter:function(){return f},toArray:function(){return[]},toString:i("none()")};function d(e){return e()}function m(n){function e(){return o}function t(e){return e(n)}var r=i(n),o={fold:function(e,t){return t(n)},isSome:l,isNone:s,getOr:r,getOrThunk:r,getOrDie:r,getOrNull:r,getOrUndefined:r,or:e,orThunk:e,map:function(e){return m(e(n))},each:function(e){e(n)},bind:t,exists:t,forall:t,filter:function(e){return e(n)?o:f},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return o}function g(t){return void 0===t&&(t=x),function(e){return h.from(e).map(function(e){return ue(e,t)})}}function p(t,e,n,r){var r=r[e],o=0<t.length;return void 0!==r?He(r,n).map(function(e){return{url:{value:e.value,meta:{text:o?t:e.text,attach:c}},text:o?t:e.text}}):h.none()}function j(e){var t=e.href;return 0<t.indexOf("@")&&-1===t.indexOf("/")&&-1===t.indexOf("mailto:")?h.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:function(e){return S(S({},e),{href:"mailto:"+t})}}):h.none()}function U(i){function e(e){var t=i.selection.getNode();return e.setDisabled(!O(i,t)),c}i.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:B(i)},label:"Link",predicate:function(e){return!!O(i,e)&&Q(i)},initValue:function(){var e=O(i);return e?T(e):""},commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:function(e){var t=i.selection.getNode();return e.setActive(!!O(i,t)),B(i)(e)},onAction:function(e){var t,n,r=e.getValue(),o=(t=r,o=O(i),n=Te(i),!o&&n?(n=Ce(i.selection,o),h.some(0<n.length?n:t)):h.none());Pe(i,{href:r,attach:c},{href:r,text:o,title:h.none(),rel:h.none(),target:h.none(),class:h.none()}),i.selection.collapse(!1),e.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:e,onAction:function(e){_(i),e.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:e,onAction:function(e){R(i)(),e.hide()}}]})}var h={some:m,none:r,from:function(e){return null==e?f:m(e)}},W=Array.prototype.indexOf,$=Array.prototype.push,q=function(e,t){return W.call(e,t)},G=function(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o)}return r},K=function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)},X=function(e,n,r){return K(e,function(e,t){r=n(r,e,t)}),r},v=function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!a(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);$.apply(t,e[n])}return t},b=function(e,t){for(var n=0;n<e.length;n++){var r=t(e[n],n);if(r.isSome())return r}return h.none()},Y=function(e,t,n){return void 0===n&&(n=V),e.exists(function(e){return n(e,t)})},J=function(e){for(var t=[],n=function(e){t.push(e)},r=0;r<e.length;r++)e[r].each(n);return t},y=function(e,t){return e?h.some(t):h.none()},Z=function(e){e=e.getParam("link_assume_external_targets",!1);return F(e)&&e?1:!u(e)||"http"!==e&&"https"!==e?0:e},Q=function(e){return e.getParam("link_context_toolbar",!1,"boolean")},ee=function(e){return e.getParam("default_link_target")},te=function(e){return e.getParam("target_list",!0)},ne=function(e){return e.getParam("rel_list",[],"array")},re=function(e){return e.getParam("allow_unsafe_link_target",!1,"boolean")},oe=function(e){return e.getParam("link_quicklink",!1,"boolean")},w=tinymce.util.Tools.resolve("tinymce.util.Tools"),x=function(e){return u(e.value)?e.value:""},ie=function(e){return u(e.text)?e.text:u(e.title)?e.title:""},ue=function(e,r){var o=[];return w.each(e,function(e){var t,n=ie(e);void 0!==e.menu?(t=ue(e.menu,r),o.push({text:n,items:t})):(t=r(e),o.push({text:n,value:t}))}),o},C={sanitize:function(e){return g(x)(e)},sanitizeWith:g,createUi:function(t,n){return function(e){return{name:t,type:"listbox",label:n,items:e}}},getValue:x},S=function(){return(S=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},ae=Object.keys,ce=Object.hasOwnProperty,se=function(e,t){for(var n=ae(e),r=0,o=n.length;r<o;r++){var i=n[r];t(e[i],i)}},le=function(n){return function(e,t){n[t]=e}},fe=function(e,n,r,o){return se(e,function(e,t){(n(e,t)?r:o)(e,t)}),{}},de=function(e,t){var n={};return fe(e,t,le(n),c),n},k=function(e,t){return ce.call(e,t)},me=function(e,t){return k(e,t)&&void 0!==e[t]&&null!==e[t]},ge=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),pe=tinymce.util.Tools.resolve("tinymce.util.URI"),he=function(e){return e&&"a"===e.nodeName.toLowerCase()},ve=function(e){return he(e)&&!!T(e)},be=function(e,t){if(e.collapsed)return[];for(var e=e.cloneContents(),n=new ge(e.firstChild,e),r=[],o=e.firstChild;t(o)&&r.push(o),o=n.next(););return r},ye=function(e){return/^\w+:/i.test(e)},T=function(e){var t=e.getAttribute("data-mce-href");return t||e.getAttribute("href")},we=function(e,t){function n(e){return e.filter(function(e){return-1===w.inArray(r,e)})}var r=["noopener"],e=e?e.split(/\s+/):[],t=t?0<(t=n(t=e)).length?t.concat(r):r:n(e);return 0<t.length?w.trim(t.sort().join(" ")):""},xe=function(e){return e.replace(/\uFEFF/g,"")},O=function(e,t){return t=t||e.selection.getNode(),E(t)?e.dom.select("a[href]",t)[0]:e.dom.getParent(t,"a[href]")},Ce=function(e,t){t=t?t.innerText||t.textContent:e.getContent({format:"text"});return xe(t)},Se=function(e){return 0<w.grep(e,ve).length},ke=function(e){return 0<be(e,ve).length},Te=function(e){var t=e.schema.getTextInlineElements();return 0===be(e.selection.getRng(),function(e){return 1===e.nodeType&&!he(e)&&!k(t,e.nodeName.toLowerCase())}).length},E=function(e){return e&&"FIGURE"===e.nodeName&&/\bimage\b/i.test(e.className)},Oe=function(e){return X(["title","rel","class","target"],function(t,n){return e[n].each(function(e){t[n]=0<e.length?e:null}),t},{href:e.href})},Ee=function(e,t){return"http"!==t&&"https"!==t||ye(e)?e:t+"://"+e},_e=function(e,t){var n,t=S({},t);return 0<ne(e).length||!1!==re(e)||(n=we(t.rel,"_blank"===t.target),t.rel=n||null),h.from(t.target).isNone()&&!1===te(e)&&(t.target=ee(e)),t.href=Ee(t.href,Z(e)),t},Ae=function(e,t,n,r){n.each(function(e){k(t,"innerText")?t.innerText=e:t.textContent=e}),e.dom.setAttribs(t,r),e.selection.select(t)},De=function(t,e,n,r){E(e)?Le(t,e,r):n.fold(function(){t.execCommand("mceInsertLink",!1,r)},function(e){t.insertContent(t.dom.createHTML("a",r,t.dom.encode(e)))})},Me=function(e,t,n){var r=e.selection.getNode(),o=O(e,r),i=_e(e,Oe(n));e.undoManager.transact(function(){n.href===t.href&&t.attach(),o?(e.focus(),Ae(e,o,n.text,i)):De(e,r,n.text,i)})},Ne=function(e){var t=e.dom,n=e.selection,r=n.getBookmark(),o=n.getRng().cloneRange(),i=t.getParent(o.startContainer,"a[href]",e.getBody()),t=t.getParent(o.endContainer,"a[href]",e.getBody());i&&o.setStartBefore(i),t&&o.setEndAfter(t),n.setRng(o),e.execCommand("unlink"),n.moveToBookmark(r)},Re=function(t){t.undoManager.transact(function(){var e=t.selection.getNode();E(e)?Ie(t,e):Ne(t),t.focus()})},ze=function(e){var t=e.class,n=e.href,r=e.rel,o=e.target,i=e.text,e=e.title;return de({class:t.getOrNull(),href:n,rel:r.getOrNull(),target:o.getOrNull(),text:i.getOrNull(),title:e.getOrNull()},function(e,t){return!1===L(e)})},Be=function(e,t){var n=t.href;return S(S({},t),{href:pe.isDomSafe(n,"a",e.settings)?n:""})},Pe=function(e,t,n){n=Be(e,n);e.hasPlugin("rtc",!0)?e.execCommand("createlink",!1,ze(n)):Me(e,t,n)},_=function(e){e.hasPlugin("rtc",!0)?e.execCommand("unlink"):Re(e)},Ie=function(e,t){var n=e.dom.select("img",t)[0];n&&(t=e.dom.getParents(n,"a[href]",t)[0])&&(t.parentNode.insertBefore(n,t),e.dom.remove(t))},Le=function(e,t,n){t=e.dom.select("img",t)[0];t&&(e=e.dom.create("a",n),t.parentNode.insertBefore(e,t),e.appendChild(t))},Fe=function(e){return me(e,"items")},He=function(t,e){return b(e,function(e){return Fe(e)?He(t,e.items):y(e.value===t,e)})},Ve={init:function(e,o){function i(e,t){n=o;var n,r=("link"===(r=t.name)?n.link:"anchor"===r?n.anchor:h.none()).getOr([]);return p(u.text,t.name,r,e)}var u={text:e.text,title:e.title},a=function(e){return y(u.title.length<=0,h.from(e.meta.title).getOr(""))},c=function(e){return y(u.text.length<=0,h.from(e.meta.text).getOr(e.value))};return{onChange:function(e,t){var n,r,o=t.name;return"url"===o?(n=e(),r=c(n.url),n=a(n.url),r.isSome()||n.isSome()?h.some(S(S({},r.map(function(e){return{text:e}}).getOr({})),n.map(function(e){return{title:e}}).getOr({}))):h.none()):-1<q(["anchor","link"],o)?i(e(),t):(("text"===o||"title"===o)&&(u[o]=e()[o]),h.none())}}},getDelta:p},je=tinymce.util.Tools.resolve("tinymce.util.Delay"),A=tinymce.util.Tools.resolve("tinymce.util.Promise"),Ue={preprocess:function(u,a){return b([j,(n=Z(u),r=u.getParam("link_default_protocol","http","string"),function(e){var t=e.href;return 1===n&&!ye(t)||0===n&&/^\s*www(\.|\d\.)/i.test(t)?h.some({message:"The URL you entered seems to be an external link. Do you want to add the required "+r+":// prefix?",preprocess:function(e){return S(S({},e),{href:r+"://"+t})}}):h.none()})],function(e){return e(a)}).fold(function(){return A.resolve(a)},function(i){return new A(function(t){var n,e,r,o;n=u,e=i.message,r=function(e){t(e?i.preprocess(a):a)},o=n.selection.getRng(),je.setEditorTimeout(n,function(){n.windowManager.confirm(e,function(e){n.selection.setRng(o),r(e)})})})});var n,r}},We=function(e){e=e.dom.select("a:not([href])"),e=v(G(e,function(e){e=e.name||e.id;return e?[{text:e,value:"#"+e}]:[]}));return 0<e.length?h.some([{text:"None",value:""}].concat(e)):h.none()},$e=function(e){e=e.getParam("link_class_list",[],"array");return 0<e.length?C.sanitize(e):h.none()},qe=tinymce.util.Tools.resolve("tinymce.util.XHR"),Ge=function(t){function n(e){return t.convertURL(e.value||e.url,"href")}var e=t.getParam("link_list");return new A(function(t){u(e)?qe.send({url:e,success:function(e){return t(function(e){try{return h.some(JSON.parse(e))}catch(e){return h.none()}}(e))},error:function(e){return t(h.none())}}):H(e)?e(function(e){return t(h.some(e))}):t(h.from(e))}).then(function(e){return e.bind(C.sanitizeWith(n)).map(function(e){return 0<e.length?[{text:"None",value:""}].concat(e):e})})},Ke=function(e,t){var n,r=ne(e);return 0<r.length?(n=Y(t,"_blank"),(!1===re(e)?C.sanitizeWith(function(e){return we(C.getValue(e),n)}):C.sanitize)(r)):h.none()},Xe=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],Ye=function(e){e=te(e);return a(e)?C.sanitize(e).orThunk(function(){return h.some(Xe)}):!1===e?h.none():h.some(Xe)},D=function(e,t,n){e=e.getAttrib(t,n);return null!==e&&0<e.length?h.some(e):h.none()},Je={collect:function(c,s){return Ge(c).then(function(e){n=s,r=(t=c).dom,t=Te(t)?h.some(Ce(t.selection,n)):h.none(),a=n?h.some(r.getAttrib(n,"href")):h.none(),o=n?h.from(r.getAttrib(n,"target")):h.none(),i=D(r,n,"rel"),u=D(r,n,"class");var t,n,r,o,i,u,a={url:a,text:t,title:D(r,n,"title"),target:o,rel:i,linkClass:u};return{anchor:a,catalogs:{targets:Ye(c),rels:Ke(c,a.target),classes:$e(c),anchor:We(c),link:e},optNode:h.from(s),flags:{titleEnabled:c.getParam("link_title",!0,"boolean")}}})}},Ze=function(o,i){return function(e){var t,n,r=e.getData();r.url.value?(t={href:r.url.value,text:(t=function(t){return h.from(r[t]).filter(function(e){return!Y(i.anchor[t],e)})})("text"),target:t("target"),rel:t("rel"),class:t("linkClass"),title:t("title")},n={href:r.url.value,attach:void 0!==r.url.meta&&r.url.meta.attach?r.url.meta.attach:c},Ue.preprocess(o,t).then(function(e){Pe(o,n,e)})):_(o),e.close()}},Qe=function(e){var t=O(e);return Je.collect(e,t)},et=function(e,t){var e=e.anchor,n=e.url.getOr("");return{url:{value:n,meta:{original:{value:n}}},text:e.text.getOr(""),title:e.title.getOr(""),anchor:n,link:n,rel:e.rel.getOr(""),target:e.target.or(t).getOr(""),linkClass:e.linkClass.getOr("")}},tt=function(e,t,n){var r=e.anchor.text.map(function(){return{name:"text",type:"input",label:"Text to display"}}).toArray(),o=e.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],n=h.from(ee(n)),n=et(e,n),e=e.catalogs,i=Ve.init(n,e);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:v([[{name:"url",type:"urlinput",filetype:"file",label:"URL"}],r,o,J([e.anchor.map(C.createUi("anchor","Anchors")),e.rels.map(C.createUi("rel","Rel")),e.targets.map(C.createUi("target","Open link in...")),e.link.map(C.createUi("link","Link list")),e.classes.map(C.createUi("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:n,onChange:function(t,e){e=e.name;i.onChange(t.getData,{name:e}).each(function(e){t.setData(e)})},onSubmit:t}},nt=function(n){Qe(n).then(function(e){var t=Ze(n,e);return tt(e,t,n)}).then(function(e){n.windowManager.open(e)})},rt=function(e,t){document.body.appendChild(e),e.dispatchEvent(t),document.body.removeChild(e)},ot=function(e){var t=document.createElement("a"),e=(t.target="_blank",t.href=e,t.rel="noreferrer noopener",document.createEvent("MouseEvents"));e.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),rt(t,e)},it=function(e,t){return e.dom.getParent(t,"a[href]")},ut=function(e){return it(e,e.selection.getStart())},at=function(e){return!0===e.altKey&&!1===e.shiftKey&&!1===e.ctrlKey&&!1===e.metaKey},M=function(e,t){var n;t&&(n=T(t),/^#/.test(n)?(n=e.$(n)).length&&e.selection.scrollIntoView(n[0],!0):ot(t.href))},N=function(e){return function(){nt(e)}},R=function(e){return function(){M(e,ut(e))}},z=function(e,t){return e.on("NodeChange",t),function(){return e.off("NodeChange",t)}},B=function(n){return function(e){function t(){return e.setActive(!n.mode.isReadOnly()&&null!==O(n,n.selection.getNode()))}return t(),z(n,t)}},ct=function(n){return function(e){function t(){return e.setDisabled(null===O(n,n.selection.getNode()))}return t(),z(n,t)}},st=function(r){return function(t){function n(e){return Se(e)||ke(r.selection.getRng())}var e=r.dom.getParents(r.selection.getStart());return t.setDisabled(!n(e)),z(r,function(e){return t.setDisabled(!n(e.parents))})}};P.add("link",function(e){var t,n,r,o,i,u;(t=e).ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",onAction:N(t),onSetup:B(t)}),t.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:R(t),onSetup:ct(t)}),t.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:function(){return _(t)},onSetup:st(t)}),(n=e).ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:R(n),onSetup:ct(n)}),n.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:N(n)}),n.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:function(){return _(n)},onSetup:st(n)}),(r=e).ui.registry.addContextMenu("link",{update:function(e){return Se(r.dom.getParents(e,"a"))?"link unlink openlink":"link"}}),U(e),(o=e).on("click",function(e){var t=it(o,e.target);t&&I.metaKeyPressed(e)&&(e.preventDefault(),M(o,t))}),o.on("keydown",function(e){var t=ut(o);t&&13===e.keyCode&&at(e)&&(e.preventDefault(),M(o,t))}),(i=e).addCommand("mceLink",function(){oe(i)?i.fire("contexttoolbar-show",{toolbarKey:"quicklink"}):N(i)()}),(u=e).addShortcut("Meta+K","",function(){u.execCommand("mceLink")})})}(),function(){var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),u=function(e){e=e.getParam("nonbreaking_force_tab",0);return"boolean"==typeof e?!0===e?3:0:e},r=function(e){return e.getParam("nonbreaking_wrap",!0,"boolean")},o=function(e,t){for(var n="",r=0;r<t;r++)n+=e;return n},i=function(e){return!!e.plugins.visualchars&&e.plugins.visualchars.isEnabled()},a=function(e,t){var n=r(e)||e.plugins.visualchars?'<span class="'+(i(e)?"mce-nbsp-wrap mce-nbsp":"mce-nbsp-wrap")+'" contenteditable="false">'+o("&nbsp;",t)+"</span>":o("&nbsp;",t);e.undoManager.transact(function(){return e.insertContent(n)})},c=tinymce.util.Tools.resolve("tinymce.util.VK");e.add("nonbreaking",function(e){var t,n,r,o;function i(){return n.execCommand("mceNonBreaking")}(t=e).addCommand("mceNonBreaking",function(){a(t,1)}),(n=e).ui.registry.addButton("nonbreaking",{icon:"non-breaking",tooltip:"Nonbreaking space",onAction:i}),n.ui.registry.addMenuItem("nonbreaking",{icon:"non-breaking",text:"Nonbreaking space",onAction:i}),0<(o=u(r=e))&&r.on("keydown",function(e){e.keyCode!==c.TAB||e.isDefaultPrevented()||e.shiftKey||(e.preventDefault(),e.stopImmediatePropagation(),a(r,o))})})}(),function(){var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),a=tinymce.util.Tools.resolve("tinymce.util.Tools"),c=function(e){return e.getParam("noneditable_noneditable_class","mceNonEditable")},s=function(e){return e.getParam("noneditable_editable_class","mceEditable")},l=function(e){e=e.getParam("noneditable_regexp",[]);return e&&e.constructor===RegExp?[e]:e},f=function(t){return function(e){return-1!==(" "+e.attr("class")+" ").indexOf(t)}},i=function(o,i,u){return function(e){var t=arguments,n=t[t.length-2],r=0<n?i.charAt(n-1):"";if('"'===r)return e;if(">"===r){r=i.lastIndexOf("<",n);if(-1!==r)if(-1!==i.substring(r,n).indexOf('contenteditable="false"'))return e}return'<span class="'+u+'" data-mce-content="'+o.dom.encode(t[0])+'">'+o.dom.encode("string"==typeof t[1]?t[1]:t[0])+"</span>"}},d=function(e,t,n){var r=t.length,o=n.content;if("raw"!==n.format){for(;r--;)o=o.replace(t[r],i(e,o,c(e)));n.content=o}};e.add("noneditable",function(e){var t,r,n,o,i,u;t=e,r="contenteditable",e=" "+a.trim(s(t))+" ",n=" "+a.trim(c(t))+" ",o=f(e),i=f(n),u=l(t),t.on("PreInit",function(){0<u.length&&t.on("BeforeSetContent",function(e){d(t,u,e)}),t.parser.addAttributeFilter("class",function(e){for(var t,n=e.length;n--;)t=e[n],o(t)?t.attr(r,"true"):i(t)&&t.attr(r,"false")}),t.serializer.addAttributeFilter(r,function(e){for(var t,n=e.length;n--;)t=e[n],(o(t)||i(t))&&(0<u.length&&t.attr("data-mce-content")?(t.name="#text",t.type=3,t.raw=!0,t.value=t.attr("data-mce-content")):t.attr(r,null))})})})}(),function(){var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.Env"),s=function(e){return e.getParam("pagebreak_separator","\x3c!-- pagebreak --\x3e")},l=function(e){return e.getParam("pagebreak_split_block",!1)},f="mce-pagebreak",d=function(e){var t='<img src="'+n.transparentSrc+'" class="'+f+'" data-mce-resize="false" data-mce-placeholder />';return e?"<p>"+t+"</p>":t};e.add("pagebreak",function(e){var t,n,o,i,r,u;function a(){return n.execCommand("mcePageBreak")}function c(){return l(o)}(t=e).addCommand("mcePageBreak",function(){t.insertContent(d(l(t)))}),(n=e).ui.registry.addButton("pagebreak",{icon:"page-break",tooltip:"Page break",onAction:a}),n.ui.registry.addMenuItem("pagebreak",{text:"Page break",icon:"page-break",onAction:a}),i=s(o=e),r=new RegExp(i.replace(/[\?\.\*\[\]\(\)\{\}\+\^\$\:]/g,function(e){return"\\"+e}),"gi"),o.on("BeforeSetContent",function(e){e.content=e.content.replace(r,d(c()))}),o.on("PreInit",function(){o.serializer.addNodeFilter("img",function(e){for(var t,n,r=e.length;r--;)(n=(t=e[r]).attr("class"))&&-1!==n.indexOf(f)&&(n=t.parent,o.schema.getBlockElements()[n.name]&&c()?(n.type=3,n.value=i,n.raw=!0,t.remove()):(t.type=3,t.value=i,t.raw=!0))})}),(u=e).on("ResolveName",function(e){"IMG"===e.target.nodeName&&u.dom.hasClass(e.target,f)&&(e.name="pagebreak")})})}(),function(){function i(e){return function(){return e}}function e(e){return e}function t(){return l}var n,r,v=function(e){var t=e;return{get:function(){return t},set:function(e){t=e}}},P=tinymce.util.Tools.resolve("tinymce.PluginManager"),I=(n="array",function(e){return t=typeof(e=e),(null===e?"null":"object"==t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"==t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t)===n;var t}),L=function(e){return null==e},s=function(e){return!L(e)},o=function(e){return typeof e===r},u=function(){},a=i(!(r="function")),c=i(!0),l={fold:function(e,t){return e()},isSome:a,isNone:c,getOr:e,getOrThunk:f,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:i(null),getOrUndefined:i(void 0),or:e,orThunk:f,map:t,each:u,bind:t,exists:a,forall:c,filter:function(){return l},toArray:function(){return[]},toString:i("none()")};function f(e){return e()}function d(n){function e(){return o}function t(e){return e(n)}var r=i(n),o={fold:function(e,t){return t(n)},isSome:c,isNone:a,getOr:r,getOrThunk:r,getOrDie:r,getOrNull:r,getOrUndefined:r,or:e,orThunk:e,map:function(e){return d(e(n))},each:function(e){e(n)},bind:t,exists:t,forall:t,filter:function(e){return e(n)?o:l},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return o}var m,g,p={some:d,none:t,from:function(e){return null==e?l:d(e)}},F=Array.prototype.slice,H=Array.prototype.push,h=function(e,t){for(var n=0,r=e.length;n<r;n++)if(t(e[n],n))return!0;return!1},b=function(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o)}return r},V=function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)},j=function(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r)&&n.push(i)}return n},U=function(e,n,r){return V(e,function(e,t){r=n(r,e,t)}),r},W=function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!I(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);H.apply(t,e[n])}return t},$=function(e,t){return W(b(e,t))},q=o(Array.from)?Array.from:function(e){return F.call(e)},y=function(){return(y=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},G=function(e){function t(){n.get().each(e)}var n=v(p.none());return{clear:function(){t(),n.set(p.none())},isSet:function(){return n.get().isSome()},get:function(){return n.get()},set:function(e){t(),n.set(p.some(e))}}},K=function(){var t=G(u);return y(y({},t),{on:function(e){return t.get().each(e)}})},X=function(e,t,n){return""===t||e.length>=t.length&&e.substr(n,n+t.length)===t},Y=function(e,t){return X(e,t,0)},J=function(e,t){return X(e,t,e.length-t.length)},Z=function(e,t){return t<=0?"":new Array(t+1).join(e)},w=tinymce.util.Tools.resolve("tinymce.Env"),x=tinymce.util.Tools.resolve("tinymce.util.Delay"),Q=tinymce.util.Tools.resolve("tinymce.util.Promise"),ee=tinymce.util.Tools.resolve("tinymce.util.VK"),te=function(e,t,n,r){return e.fire("PastePreProcess",{content:t,internal:n,wordContent:r})},ne=function(e,t,n,r){return e.fire("PastePostProcess",{node:t,internal:n,wordContent:r})},re=function(e,t){return e.fire("PastePlainTextToggle",{state:t})},oe=function(e,t){return e.fire("paste",{ieFake:t})},C=tinymce.util.Tools.resolve("tinymce.util.Tools"),ie=function(e){return e.getParam("paste_block_drop",!1)},ue=function(e){return e.getParam("paste_data_images",!1)},ae=function(e){return e.getParam("paste_filter_drop",!0)},ce=function(e){return e.getParam("paste_preprocess")},se=function(e){return e.getParam("paste_postprocess")},le=function(e){return e.getParam("paste_webkit_styles")},fe=function(e){return e.getParam("paste_remove_styles_if_webkit",!0)},de=function(e){return e.getParam("paste_merge_formats",!0)},me=function(e){return e.getParam("smart_paste",!0)},ge=function(e){return e.getParam("paste_retain_style_properties")},pe=function(e){return e.getParam("paste_word_valid_elements","-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody")},he=function(e){return e.getParam("paste_convert_word_fake_lists",!0)},ve=function(e){return e.getParam("paste_enable_default_filters",!0)},be=function(e){return e.getParam("validate")},ye=function(e){return e.getParam("allow_html_data_urls",!1,"boolean")},we=function(e){return e.getParam("paste_data_images",!1,"boolean")},xe=function(e){return e.getParam("images_dataimg_filter")},Ce=function(e){return e.getParam("images_reuse_filename")},Se=function(e){return e.getParam("forced_root_block")},ke=function(e){return e.getParam("forced_root_block_attrs")},Te=function(e){return e.getParam("paste_tab_spaces",4,"number")},Oe=function(e){return C.explode(e.getParam("images_file_types","jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp","string"))},o="x-tinymce/html",S="\x3c!-- "+o+" --\x3e",Ee=function(e){return S+e},_e=function(e){return e.replace(S,"")},k=function(e){return-1!==e.indexOf(S)},T=i(o),Ae=Object.hasOwnProperty,De=function(e,t){return Ae.call(e,t)},Me=tinymce.util.Tools.resolve("tinymce.html.Entities"),Ne=function(e){return!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e)},Re=function(e){return e.replace(/\r?\n/g,"<br>")},ze=function(e,t){var n=[],e="<"+e;if("object"==typeof t){for(var r in t)De(t,r)&&n.push(r+'="'+Me.encodeAllRaw(t[r])+'"');n.length&&(e+=" "+n.join(" "))}return e+">"},Be=function(e,t,n){var e=e.split(/\n\n/),r=ze(t,n),o="</"+t+">",n=C.map(e,function(e){return e.split(/\n/).join("<br />")});return 1===n.length?n[0]:C.map(n,function(e){return r+e+o}).join("")},Pe=function(e,t,n){return t?Be(e,!0===t?"p":t,n):Re(e)},O=tinymce.util.Tools.resolve("tinymce.html.DomParser"),Ie=tinymce.util.Tools.resolve("tinymce.html.Serializer"),E="",_=tinymce.util.Tools.resolve("tinymce.html.Node"),Le=tinymce.util.Tools.resolve("tinymce.html.Schema"),Fe=function(e){return e.constructor===RegExp},A=function(t,e){return C.each(e,function(e){t=Fe(e)?t.replace(e,""):t.replace(e[0],e[1])}),t},He=function(e){function r(e){var t=e.name,n=e;if("br"===t)o+="\n";else if("wbr"!==t)if(i[t]&&(o+=" "),u[t])o+=" ";else{if(3===e.type&&(o+=e.value),!e.shortEnded&&(e=e.firstChild))for(;r(e),e=e.next;);a[t]&&n.next&&(o+="\n","p"===t)&&(o+="\n")}}var t=Le(),n=O({},t),o="",i=t.getShortEndedElements(),u=C.makeMap("script noscript style textarea video audio iframe object"," "),a=t.getBlockElements();return e=A(e,[/<!\[[^\]]+\]>/g]),r(n.parse(e)),o},Ve=function(e){return e=A(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,function(e,t,n){return t||n?E:" "}],/<br class="Apple-interchange-newline">/g,/<br>$/i])},je=function(e){var e=e.toLowerCase(),t={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return C.hasOwn(t,e)?"image/"+t[e]:"image/"+e},Ue=function(e){return/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^']*\bmso-|w:WordDocument/i.test(e)||/class="OutlineElement/.test(e)||/id="?docs\-internal\-guid\-/.test(e)},We=function(t){var n=!1;return t=t.replace(/^[\u00a0 ]+/,""),C.each([/^[IVXLMCD]+\.[ \u00a0]/,/^[ivxlmcd]+\.[ \u00a0]/,/^[a-z]{1,2}[\.\)][ \u00a0]/,/^[A-Z]{1,2}[\.\)][ \u00a0]/,/^[0-9]+\.[ \u00a0]/,/^[\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]+\.[ \u00a0]/,/^[\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d\u62fe]+\.[ \u00a0]/],function(e){if(e.test(t))return!(n=!0)}),n},$e=function(e){return/^[\s\u00a0]*[\u2022\u00b7\u00a7\u25CF]\s*/.test(e)},qe=function(e){for(var o,i,u=1,n=function(e){var t="";if(3===e.type)return e.value;if(e=e.firstChild)for(;t+=n(e),e=e.next;);return t},a=function(e,t){if(3===e.type&&t.test(e.value))return e.value=e.value.replace(t,""),!1;if(e=e.firstChild)do{if(!a(e,t))return!1}while(e=e.next);return!0},c=function(e){if(e._listIgnore)e.remove();else if(e=e.firstChild)for(;c(e),e=e.next;);},t=function(e,t,n){var r=e._listLevel||u;(o=r!==u?r<u?o&&o.parent.parent:(i=o,null):o)&&o.name===t?o.append(e):(i=i||o,o=new _(t,1),1<n&&o.attr("start",""+n),e.wrap(o)),e.name="li",u<r&&i&&i.lastChild.append(o),u=r,c(e),a(e,/^\u00a0+/),a(e,/^\s*([\u2022\u00b7\u00a7\u25CF]|\w+\.)/),a(e,/^\u00a0+/)},r=[],s=e.firstChild;null!=s;)if(r.push(s),null!==(s=s.walk()))for(;void 0!==s&&s.parent!==e;)s=s.walk();for(var l,f,d=0;d<r.length;d++)"p"===(e=r[d]).name&&e.firstChild?(l=n(e),$e(l)?t(e,"ul"):We(l)?(f=1,t(e,"ol",f=(l=/([0-9]+)\./.exec(l))?parseInt(l[1],10):f)):e._listLevel?t(e,"ul",1):o=null):(i=o,o=null)},Ge=function(r,o,i,u){var a={},e=r.dom.parseStyle(u),e=(C.each(e,function(e,t){switch(t){case"mso-list":var n=/\w+ \w+([0-9]+)/i.exec(u);n&&(i._listLevel=parseInt(n[1],10)),/Ignore/i.test(e)&&i.firstChild&&(i._listIgnore=!0,i.firstChild._listIgnore=!0);break;case"horiz-align":t="text-align";break;case"vert-align":t="vertical-align";break;case"font-color":case"mso-foreground":t="color";break;case"mso-background":case"mso-highlight":t="background";break;case"font-weight":case"font-style":return void("normal"!==e&&(a[t]=e));case"mso-element":if(/^(comment|comment-list)$/i.test(e))return void i.remove()}0===t.indexOf("mso-comment")?i.remove():0!==t.indexOf("mso-")&&("all"===ge(r)||o&&o[t])&&(a[t]=e)}),/(bold)/i.test(a["font-weight"])&&(delete a["font-weight"],i.wrap(new _("b",1))),/(italic)/i.test(a["font-style"])&&(delete a["font-style"],i.wrap(new _("i",1))),r.dom.serializeStyle(a,i.name));return e||null},Ke=function(r,e){var o,t=ge(r),t=(t&&(o=C.makeMap(t.split(/[, ]/))),e=A(e,[/<br class="?Apple-interchange-newline"?>/gi,/<b[^>]+id="?docs-internal-[^>]*>/gi,/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi,E],[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(e,t){return 0<t.length?t.replace(/./," ").slice(Math.floor(t.length/2)).split("").join(E):""}]]),pe(r)),t=Le({valid_elements:t,valid_children:"-li[p]"}),n=(C.each(t.elements,function(e){e.attributes.class||(e.attributes.class={},e.attributesOrder.push("class")),e.attributes.style||(e.attributes.style={},e.attributesOrder.push("style"))}),O({},t)),n=(n.addAttributeFilter("style",function(e){for(var t,n=e.length;n--;)(t=e[n]).attr("style",Ge(r,o,t,t.attr("style"))),"span"===t.name&&t.parent&&!t.attributes.length&&t.unwrap()}),n.addAttributeFilter("class",function(e){for(var t,n,r=e.length;r--;)n=(t=e[r]).attr("class"),/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test(n)&&t.remove(),t.attr("class",null)}),n.addNodeFilter("del",function(e){for(var t=e.length;t--;)e[t].remove()}),n.addNodeFilter("a",function(e){for(var t,n,r,o=e.length;o--;)n=(t=e[o]).attr("href"),r=t.attr("name"),n&&-1!==n.indexOf("#_msocom_")?t.remove():!(n=n&&0===n.indexOf("file://")?(n=n.split("#")[1])&&"#"+n:n)&&!r||r&&!/^_?(?:toc|edn|ftn)/i.test(r)?t.unwrap():t.attr({href:n,name:r})}),n.parse(e));return he(r)&&qe(n),e=Ie({validate:be(r)},t).serialize(n)},Xe=function(e,t){return ve(e)?Ke(e,t):t},Ye=function(e,t){var n=O({},e.schema),n=(n.addNodeFilter("meta",function(e){C.each(e,function(e){e.remove()})}),n.parse(t,{forced_root_block:!1,isRootContent:!0}));return Ie({validate:be(e)},e.schema).serialize(n)},Je=function(e,t){return{content:e,cancelled:t}},Ze=function(e,t,n,r){t=e.dom.create("div",{style:"display:none"},t),e=ne(e,t,n,r);return Je(e.node.innerHTML,e.isDefaultPrevented())},Qe=function(e,t,n,r){var t=te(e,t,n,r),o=Ye(e,t.content);return e.hasEventListeners("PastePostProcess")&&!t.isDefaultPrevented()?Ze(e,o,n,r):Je(o,t.isDefaultPrevented())},et=function(e,t,n){var r=Ue(t),t=r?Xe(e,t):t;return Qe(e,t,n,r)},D=function(e,t){return e.insertContent(t,{merge:de(e),paste:!0}),!0},M=function(e){return/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e)},tt=function(e,t){return M(t)&&h(Oe(e),function(e){return J(t.toLowerCase(),"."+e.toLowerCase())})},nt=function(e,t,n){return e.undoManager.extra(function(){n(e,t)},function(){e.insertContent('<img src="'+t+'">')}),!0},rt=function(e,t,n){return e.undoManager.extra(function(){n(e,t)},function(){e.execCommand("mceInsertLink",!1,t)}),!0},ot=function(e,t,n){return!(!1!==e.selection.isCollapsed()||!M(t))&&rt(e,t,n)},it=function(e,t,n){return!!tt(e,t)&&nt(e,t,n)},ut=function(t,n){C.each([ot,it,D],function(e){return!0!==e(t,n,D)})},at=function(e,t,n){(n||!1===me(e)?D:ut)(e,t)},ct=function(e){return-1!==" \f\t\v".indexOf(e)},st=function(e){return"\n"===e||"\r"===e},lt=function(e,t){return t<e.length&&0<=t&&st(e[t])},ft=function(e,t){var e=Z(" ",Te(e)),n=t.replace(/\t/g,e);return U(n,function(e,t){return ct(t)||t===E?e.pcIsSpace||""===e.str||e.str.length===n.length-1||lt(n,e.str.length+1)?{pcIsSpace:!1,str:e.str+E}:{pcIsSpace:!0,str:e.str+" "}:{pcIsSpace:st(t),str:e.str+t}},{pcIsSpace:!1,str:""}).str},dt=function(e,t,n,r){t=et(e,t,n);!1===t.cancelled&&at(e,t.content,r)},N=function(e,t,n){n=n||k(t);dt(e,_e(t),n,!1)},mt=function(e,t){t=e.dom.encode(t).replace(/\r\n/g,"\n"),t=ft(e,t),t=Pe(t,Se(e),ke(e));dt(e,t,!1,!0)},gt=function(e){var t,n={};if(e&&(e.getData&&(t=e.getData("Text"))&&0<t.length&&-1===t.indexOf("data:text/mce-internal,")&&(n["text/plain"]=t),e.types))for(var r=0;r<e.types.length;r++){var o=e.types[r];try{n[o]=e.getData(o)}catch(e){n[o]=""}}return n},pt=function(e,t){return gt(t.clipboardData||e.getDoc().dataTransfer)},R=function(e,t){return t in e&&0<e[t].length},ht=function(e){return R(e,"text/html")||R(e,"text/plain")},vt=function(e){e=/data:([^;]+);base64,([a-z0-9\+\/=]+)/i.exec(e);return e?{type:e[1],data:decodeURIComponent(e[2])}:{type:null,data:null}},bt=function(e,t){e=xe(e);return!e||e(t)},yt=function(e,t){t=t.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return s(t)?e.dom.encode(t[1]):null},wt=(m="mceclip",g=0,function(){return m+g++}),xt=function(e,t){var n,r,o=vt(t.uri),i=o.data,o=o.type,u=wt(),a=t.blob,c=new Image;c.src=t.uri,bt(e,c)?(c=void 0,(o=(n=e.editorUpload.blobCache).getByData(i,o))?c=o:(r=(o=Ce(e)&&s(a.name))?yt(e,a.name):u,o=o?a.name:void 0,c=n.create(u,a,i,r,o),n.add(c)),N(e,'<img src="'+c.blobUri()+'">',!1)):N(e,'<img src="'+t.uri+'">',!1)},Ct=function(e){return"paste"===e.type},St=function(e){return s(e.getAsFile)},kt=function(e){return Q.all(b(e,function(r){return new Q(function(e){var t=St(r)?r.getAsFile():r,n=new window.FileReader;n.onload=function(){e({blob:t,uri:n.result})},n.readAsDataURL(t)})}))},Tt=function(e){var n=Oe(e);return function(t){return Y(t.type,"image/")&&h(n,function(e){return je(e)===t.type})}},Ot=function(e,t){var n=t.items?$(q(t.items),function(e){return"file"===e.kind?[e.getAsFile()]:[]}):[],t=t.files?q(t.files):[];return j(0<n.length?n:t,Tt(e))},Et=function(t,e,n){var r=Ct(e)?e.clipboardData:e.dataTransfer;if(we(t)&&r){r=Ot(t,r);if(0<r.length)return e.preventDefault(),kt(r).then(function(e){n&&t.selection.setRng(n),V(e,function(e){xt(t,e)})}),!0}return!1},_t=function(e){e=e.clipboardData;return-1!==navigator.userAgent.indexOf("Android")&&e&&e.items&&0===e.items.length},At=function(e){return ee.metaKeyPressed(e)&&86===e.keyCode||e.shiftKey&&45===e.keyCode},Dt=function(i,c,u){function a(e,t,n,r,o){R(t,"text/html")?i=t["text/html"]:(i=c.getHtml(),o=o||k(i),c.isDefaultContent(i)&&(r=!0)),i=Ve(i),c.remove();var i,u=!1===o&&Ne(i),a=M(i);((r=i.length&&(!u||a)?r:!0)||a)&&(i=R(t,"text/plain")&&u?t["text/plain"]:He(i)),c.isDefaultContent(i)?n||e.windowManager.alert("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents."):r?mt(e,i):N(e,i,o)}var s,l=K(),f=K();i.on("keyup",f.clear),i.on("keydown",function(e){function t(e){At(e)&&!e.isDefaultPrevented()&&c.remove()}!At(e)||e.isDefaultPrevented()||(s=e.shiftKey&&86===e.keyCode)&&w.webkit&&-1!==navigator.userAgent.indexOf("Version/")||(e.stopImmediatePropagation(),l.set(e),f.set(!0),w.ie&&s?(e.preventDefault(),oe(i,!0)):(c.remove(),c.create(),i.once("keyup",t),i.once("paste",function(){i.off("keyup",t)})))});i.on("paste",function(e){var t=l.isSet()||f.isSet(),n=(t&&l.clear(),pt(i,e)),r="text"===u.get()||s,o=R(n,T());s=!1,e.isDefaultPrevented()||_t(e)||!ht(n)&&Et(i,e,c.getLastRng()||i.selection.getRng())?c.remove():(t||e.preventDefault(),!w.ie||t&&!e.ieFake||R(n,"text/html")||(c.create(),i.dom.bind(c.getEl(),"paste",function(e){e.stopPropagation()}),i.getDoc().execCommand("Paste",!1,null),n["text/html"]=c.getHtml()),R(n,"text/html")?(e.preventDefault(),o=o||k(n["text/html"]),a(i,n,t,r,o)):x.setEditorTimeout(i,function(){a(i,n,t,r,o)},0))})},Mt=function(i,e,t){var u;Dt(i,e,t),i.parser.addNodeFilter("img",function(e,t,n){function r(e){e.attr("data-mce-object")||u===w.transparentSrc||e.remove()}if(!we(i)&&(n=n).data&&!0===n.data.paste)for(var o=e.length;o--;)!(u=e[o].attr("src"))||0!==u.indexOf("webkit-fake-url")&&(ye(i)||0!==u.indexOf("data:"))||r(e[o])})},z=function(e){return w.ie&&e.inline?document.body:e.getBody()},Nt=function(e){return z(e)!==e.getBody()},Rt=function(t,e,n){Nt(t)&&t.dom.bind(e,"paste keyup",function(e){Ft(t,n)||t.fire("paste")})},zt=function(e,t,n){var r=e.dom,o=e.getBody(),t=(t.set(e.selection.getRng()),e.dom.add(z(e),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},n));(w.ie||w.gecko)&&r.setStyle(t,"left","rtl"===r.getStyle(o,"direction",!0)?65535:-65535),r.bind(t,"beforedeactivate focusin focusout",function(e){e.stopPropagation()}),Rt(e,t,n),t.focus(),e.selection.select(t,!0)},Bt=function(e,t){if(B(e)){for(var n,r=t.get();n=e.dom.get("mcepastebin");)e.dom.remove(n),e.dom.unbind(n);r&&e.selection.setRng(r)}t.set(null)},B=function(e){return e.dom.get("mcepastebin")},Pt=function(n){for(var t=function(e,t){e.appendChild(t),n.dom.remove(t,!0)},e=C.grep(z(n).childNodes,function(e){return"mcepastebin"===e.id}),r=e.shift(),o=(C.each(e,function(e){t(r,e)}),n.dom.select("div[id=mcepastebin]",r)),i=o.length-1;0<=i;i--){var u=n.dom.create("div");r.insertBefore(u,o[i]),t(u,o[i])}return r?r.innerHTML:""},It=function(e,t){return t===e},Lt=function(e){return e&&"mcepastebin"===e.id},Ft=function(e,t){e=B(e);return Lt(e)&&It(t,e.innerHTML)},Ht=function(e){var t=v(null),n="%MCEPASTEBIN%";return{create:function(){return zt(e,t,n)},remove:function(){return Bt(e,t)},getEl:function(){return B(e)},getHtml:function(){return Pt(e)},getLastRng:t.get,isDefault:function(){return Ft(e,n)},isDefaultContent:function(e){return It(n,e)}}},Vt=function(e,t){"text"===t.pasteFormat.get()?(t.pasteFormat.set("html"),re(e,!1)):(t.pasteFormat.set("text"),re(e,!0)),e.focus()},jt=function(e){return!1===w.iOS&&"function"==typeof(null==e?void 0:e.setData)},Ut=function(e,t,n){if(!jt(e))return!1;try{return e.clearData(),e.setData("text/html",t),e.setData("text/plain",n),e.setData(T(),t),!0}catch(e){return!1}},Wt=function(e,t,n,r){Ut(e.clipboardData,t.html,t.text)?(e.preventDefault(),r()):n(t.html,r)},$t=function(i){return function(e,t){var e=Ee(e),n=i.dom.create("div",{contenteditable:"false","data-mce-bogus":"all"}),e=i.dom.create("div",{contenteditable:"true"},e),r=(i.dom.setStyles(n,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),n.appendChild(e),i.dom.add(i.getBody(),n),i.selection.getRng()),o=(e.focus(),i.dom.createRng());o.selectNodeContents(e),i.selection.setRng(o),x.setTimeout(function(){i.selection.setRng(r),n.parentNode.removeChild(n),t()},0)}},qt=function(e){return{html:e.selection.getContent({contextual:!0}),text:e.selection.getContent({format:"text"})}},Gt=function(e){return!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody())},Kt=function(e){return!e.selection.isCollapsed()||Gt(e)},Xt=function(t){return function(e){Kt(t)&&Wt(e,qt(t),$t(t),function(){var e;w.browser.isChrome()||w.browser.isFirefox()?(e=t.selection.getRng(),x.setEditorTimeout(t,function(){t.selection.setRng(e),t.execCommand("Delete")},0)):t.execCommand("Delete")})}},Yt=function(t){return function(e){Kt(t)&&Wt(e,qt(t),$t(t),u)}},Jt=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),Zt=function(e,t){return Jt.getCaretRangeFromPoint(t.clientX,t.clientY,e.getDoc())},Qt=function(e){e=e["text/plain"];return!!e&&0===e.indexOf("file://")},en=function(e,t){e.focus(),e.selection.setRng(t)},tn=function(t,n){t.on("PastePreProcess",function(e){e.content=n(t,e.content,e.internal,e.wordContent)})},nn=function(t,n){t.on("PastePostProcess",function(e){n(t,e.node)})},rn=function(e,t){var n;return Ue(t)&&(n=[],C.each(e.schema.getBlockElements(),function(e,t){n.push(t)}),e=new RegExp("(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?("+n.join("|")+")[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*","g"),t=A(t,[[e,"$1"]]),t=A(t,[[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]])),t},on=function(e,t,n,r){var s,l,f;return r||n||(r=le(e),!1!==fe(e)&&"all"!==r&&(t=(t=(s=r?r.split(/[, ]/):s)?(l=e.dom,f=e.selection.getNode(),t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,function(e,t,n,r){var o=l.parseStyle(l.decode(n)),i={};if("none"===s)return t+r;for(var u=0;u<s.length;u++){var a=o[s[u]],c=l.getStyle(f,s[u],!0);/color/.test(s[u])&&(a=l.toHex(a),c=l.toHex(c)),c!==a&&(i[s[u]]=a)}n=l.serializeStyle(i,"span");return n?t+' style="'+n+'"'+r:t+r})):t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3")).replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,function(e,t,n,r){return t+' style="'+n+'"'+r}))),t},un=function(n,e){n.$("a",e).find("font,u").each(function(e,t){n.dom.remove(t,!0)})},an=function(n,r){return function(t){t.setActive("text"===r.pasteFormat.get());function e(e){return t.setActive(e.state)}return n.on("PastePlainTextToggle",e),function(){return n.off("PastePlainTextToggle",e)}}};P.add("paste",function(e){var t,n,i,u,a,r,o,c,s,l,f,d,m,g,p;if(!1==(!!e.hasPlugin("powerpaste",!0)&&(void 0!==window.console&&window.console.log&&window.console.log("PowerPaste is incompatible with Paste plugin! Remove 'paste' from the 'plugins' option."),!0)))return t=v(!1),n=v(e.getParam("paste_as_text",!1)?"text":"html"),g=n,p=Ht(m=e),m.on("PreInit",function(){return Mt(m,p,g)}),n={pasteFormat:g,pasteHtml:function(e,t){return N(m,e,t)},pasteText:function(e){return mt(m,e)},pasteImageData:function(e,t){return Et(m,e,t)},getDataTransferItems:gt,hasHtmlOrText:ht,hasContentType:R},d=e,w.webkit&&tn(d,on),w.ie&&(tn(d,rn),nn(d,un)),d=n,(f=e).ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:h,onSetup:an(f,d)}),f.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:h,onSetup:an(f,d)}),l=n,(s=e).addCommand("mceTogglePlainTextPaste",function(){Vt(s,l)}),s.addCommand("mceInsertClipboardContent",function(e,t){t.content&&l.pasteHtml(t.content,t.internal),t.text&&l.pasteText(t.text)}),r=(d=e).plugins.paste,(o=ce(d))&&d.on("PastePreProcess",function(e){o.call(r,r,e)}),(c=se(d))&&d.on("PastePostProcess",function(e){c.call(r,r,e)}),(d=e).on("cut",Xt(d)),d.on("copy",Yt(d)),u=n,a=t,ie(i=e)&&i.on("dragend dragover draggesture dragdrop drop drag",function(e){e.preventDefault(),e.stopPropagation()}),ue(i)||i.on("drop",function(e){var t=e.dataTransfer;t&&t.files&&0<t.files.length&&e.preventDefault()}),i.on("drop",function(e){var t,n,r,o=Zt(i,e);e.isDefaultPrevented()||a.get()||(t=u.getDataTransferItems(e.dataTransfer),n=u.hasContentType(t,T()),(u.hasHtmlOrText(t)&&!Qt(t)||!u.pasteImageData(e,o))&&o&&ae(i)&&(r=t["mce-internal"]||t["text/html"]||t["text/plain"])&&(e.preventDefault(),x.setEditorTimeout(i,function(){i.undoManager.transact(function(){t["mce-internal"]&&i.execCommand("Delete"),en(i,o),r=Ve(r),t["text/html"]?u.pasteHtml(r,n):u.pasteText(r)})})))}),i.on("dragstart",function(e){a.set(!0)}),i.on("dragover dragend",function(e){ue(i)&&!1===a.get()&&(e.preventDefault(),en(i,Zt(i,e))),"dragend"===e.type&&a.set(!1)}),{clipboard:n};function h(){return f.execCommand("mceTogglePlainTextPaste")}})}(),function(){var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),c=tinymce.util.Tools.resolve("tinymce.Env"),s=tinymce.util.Tools.resolve("tinymce.util.Tools"),l=function(e){return e.getParam("content_style","","string")},f=function(e){return e.getParam("content_css_cors",!1,"boolean")},n=function(e){return e.getParam("body_class","","hash")[e.id]||""},d=function(e){var t=e.getParam("body_class","","string");return-1===t.indexOf("=")?t:n(e)},r=function(e){var t=e.getParam("body_id","","hash");return t[e.id]||t},m=function(e){var t=e.getParam("body_id","tinymce","string");return-1===t.indexOf("=")?t:r(e)},o=function(t){var n="",r=t.dom.encode,e=l(t),o=(n+='<base href="'+r(t.documentBaseURI.getURI())+'">',f(t)?' crossorigin="anonymous"':""),e=(s.each(t.contentCSS,function(e){n+='<link type="text/css" rel="stylesheet" href="'+r(t.documentBaseURI.toAbsolute(e))+'"'+o+">"}),e&&(n+='<style type="text/css">'+e+"</style>"),m(t)),i=d(t),u='<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A" && !('+(c.mac?"e.metaKey":"e.ctrlKey && !e.altKey")+")) {e.preventDefault();}}}, false);<\/script> ",a=t.getBody().dir,a=a?' dir="'+r(a)+'"':"";return"<!DOCTYPE html><html><head>"+n+'</head><body id="'+r(e)+'" class="mce-content-body '+r(i)+'"'+a+">"+t.getContent()+u+"</body></html>"},i=function(e){var t=o(e);e.windowManager.open({title:"Preview",size:"large",body:{type:"panel",items:[{name:"preview",type:"iframe",sandboxed:!0}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:{preview:t}}).focus("close")};e.add("preview",function(e){var t,n;function r(){return n.execCommand("mcePreview")}(t=e).addCommand("mcePreview",function(){i(t)}),(n=e).ui.registry.addButton("preview",{icon:"preview",tooltip:"Preview",onAction:r}),n.ui.registry.addMenuItem("preview",{icon:"preview",text:"Preview",onAction:r})})}(),function(){var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),o=tinymce.util.Tools.resolve("tinymce.Env");e.add("print",function(e){var t,n;function r(){return n.execCommand("mcePrint")}(t=e).addCommand("mcePrint",function(){o.browser.isIE()?t.getDoc().execCommand("print",!1,null):t.getWin().print()}),(n=e).ui.registry.addButton("print",{icon:"print",tooltip:"Print",onAction:r}),n.ui.registry.addMenuItem("print",{text:"Print...",icon:"print",onAction:r}),e.addShortcut("Meta+P","","mcePrint")})}(),function(){function e(n){return function(e){return t=typeof(e=e),(null===e?"null":"object"==t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"==t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t)===n;var t}}function t(t){return function(e){return typeof e===t}}function i(e){return function(){return e}}function n(e){return e}function r(){return T}var o,u=tinymce.util.Tools.resolve("tinymce.PluginManager"),a=0,c=function(e){var t=(new Date).getTime();return e+"_"+Math.floor(1e9*Math.random())+ ++a+String(t)},s=function(e,t){var n='<table data-mce-id="mce" style="width: 100%">';n+="<tbody>";for(var r=0;r<t;r++){n+="<tr>";for(var o=0;o<e;o++)n+="<td><br></td>";n+="</tr>"}return n=n+"</tbody>"+"</table>"},l=function(e){return e.dom.select("*[data-mce-id]")[0]},f=function(t,n,r){t.undoManager.transact(function(){t.insertContent(s(n,r));var e=l(t),e=(e.removeAttribute("data-mce-id"),t.dom.select("td,th",e));t.selection.setCursorLocation(e[0],0)})},d=function(e,t,n){e.plugins.table?e.plugins.table.insertTable(t,n):f(e,t,n)},m=function(e,t,n){var r=e.editorUpload.blobCache,n=r.create(c("mceu"),n,t);r.add(n),e.insertContent(e.dom.createHTML("img",{src:n.blobUri()}))},g=tinymce.util.Tools.resolve("tinymce.util.Promise"),p=function(n){return new g(function(e){var t=new FileReader;t.onloadend=function(){e(t.result.split(",")[1])},t.readAsDataURL(n)})},h=tinymce.util.Tools.resolve("tinymce.Env"),v=tinymce.util.Tools.resolve("tinymce.util.Delay"),b=function(i){return new g(function(n){var r=document.createElement("input"),o=(r.type="file",r.accept="image/*",r.style.position="fixed",r.style.left="0",r.style.top="0",r.style.opacity="0.001",document.body.appendChild(r),r.addEventListener("change",function(e){n(Array.prototype.slice.call(e.target.files))}),function(e){function t(){n([]),r.parentNode.removeChild(r)}h.os.isAndroid()&&"remove"!==e.type?v.setEditorTimeout(i,t,0):t(),i.off("focusin remove",o)});i.on("focusin remove",o),r.click()})},y=e("string"),w=e("object"),x=e("array"),P=t("boolean"),I=function(e){return o===e},C=t("function"),S=i(!1),k=i(!(o=void 0)),T={fold:function(e,t){return e()},isSome:S,isNone:k,getOr:n,getOrThunk:O,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:i(null),getOrUndefined:i(void 0),or:n,orThunk:O,map:r,each:function(){},bind:r,exists:S,forall:k,filter:function(){return T},toArray:function(){return[]},toString:i("none()")};function O(e){return e()}function E(n){function e(){return o}function t(e){return e(n)}var r=i(n),o={fold:function(e,t){return t(n)},isSome:k,isNone:S,getOr:r,getOrThunk:r,getOrDie:r,getOrNull:r,getOrUndefined:r,or:e,orThunk:e,map:function(e){return E(e(n))},each:function(e){e(n)},bind:t,exists:t,forall:t,filter:function(e){return e(n)?o:T},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return o}var _={some:E,none:r,from:function(e){return null==e?T:E(e)}};function A(e,t,n,r,o){return e(n,r)?_.some(n):C(o)&&o(n)?_.none():t(n,r,o)}function D(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}}function L(o){var e=q(o);0<e.trim().length&&o.ui.registry.addContextToolbar("quickblock",{predicate:function(e){function t(e){return e.dom===o.getBody()}var n=N.fromDom(e),r=o.schema.getTextBlockElements();return W(n,"table",t).fold(function(){return j(n,function(e){return V(e)in r&&o.dom.isEmpty(e.dom)},t).isSome()},S)},items:e,position:"line",scope:"editor"})}function F(t){function n(e){return"IMG"===e.nodeName||"FIGURE"===e.nodeName&&/image/i.test(e.className)}var e=G(t);0<e.trim().length&&t.ui.registry.addContextToolbar("imageselection",{predicate:n,items:e,position:"node"}),0<(e=$(t)).trim().length&&t.ui.registry.addContextToolbar("textselection",{predicate:function(e){return!n(e)&&!t.selection.isCollapsed()&&"false"!==t.dom.getContentEditableParent(e)},items:e,position:"selection",scope:"editor"})}var M,H=1,N={fromHtml:function(e,t){t=(t||document).createElement("div");if(t.innerHTML=e,!t.hasChildNodes()||1<t.childNodes.length)throw console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node");return D(t.childNodes[0])},fromTag:function(e,t){t=(t||document).createElement(e);return D(t)},fromText:function(e,t){t=(t||document).createTextNode(e);return D(t)},fromDom:D,fromPoint:function(e,t,n){return _.from(e.dom.elementFromPoint(t,n)).map(D)}},R=function(e,t){e=e.dom;if(e.nodeType!==H)return!1;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},V=("undefined"!=typeof window||Function("return this;")(),function(e){return e.dom.nodeName.toLowerCase()}),z=function(e,t,n){for(var r=e.dom,o=C(n)?n:S;r.parentNode;){var r=r.parentNode,i=N.fromDom(r);if(t(i))return _.some(i);if(o(i))break}return _.none()},j=function(e,t,n){return A(function(e,t){return t(e)},z,e,t,n)},U=function(e,t,n){return z(e,function(e){return R(e,t)},n)},W=function(e,t,n){return A(function(e,t){return R(e,t)},U,e,t,n)},B=(M=y,function(e,t,n){!function(e,t){if(t(e))return;throw new Error("Default value doesn't match requested type.")}(n,M);e=e.getParam(t,n),t=n;if(x(e)||w(e))throw new Error("expected a string but found: "+e);return I(e)?t:P(e)?!1===e?"":t:e}),$=function(e){return B(e,"quickbars_selection_toolbar","bold italic | quicklink h2 h3 blockquote")},q=function(e){return B(e,"quickbars_insert_toolbar","quickimage quicktable")},G=function(e){return B(e,"quickbars_image_toolbar","alignleft aligncenter alignright")};u.add("quickbars",function(e){var n;(n=e).ui.registry.addButton("quickimage",{icon:"image",tooltip:"Insert image",onAction:function(){b(n).then(function(e){var t;0<e.length&&(t=e[0],p(t).then(function(e){m(n,e,t)}))})}}),n.ui.registry.addButton("quicktable",{icon:"table",tooltip:"Insert table",onAction:function(){d(n,2,2)}}),L(e),F(e)})}(),function(){var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),r=tinymce.util.Tools.resolve("tinymce.util.Tools"),o=function(e){return e.getParam("save_enablewhendirty",!0)},i=function(e){return!!e.getParam("save_onsavecallback")},u=function(e){return!!e.getParam("save_oncancelcallback")},a=function(e,t){e.notificationManager.open({text:t,type:"error"})},c=function(e){var t=n.DOM.getParent(e.id,"form");o(e)&&!e.isDirty()||(e.save(),i(e)?(e.execCallback("save_onsavecallback",e),e.nodeChanged()):t?(e.setDirty(!1),t.onsubmit&&!t.onsubmit()||("function"==typeof t.submit?t.submit():a(e,"Error: Form submit field collision.")),e.nodeChanged()):a(e,"Error: No form element found."))},s=function(e){var t=r.trim(e.startContent);u(e)?e.execCallback("save_oncancelcallback",e):e.resetContent(t)},l=function(n){return function(e){function t(){e.setDisabled(o(n)&&!n.isDirty())}return t(),n.on("NodeChange dirty",t),function(){return n.off("NodeChange dirty",t)}}};e.add("save",function(e){var t,n;(t=e).ui.registry.addButton("save",{icon:"save",tooltip:"Save",disabled:!0,onAction:function(){return t.execCommand("mceSave")},onSetup:l(t)}),t.ui.registry.addButton("cancel",{icon:"cancel",tooltip:"Cancel",disabled:!0,onAction:function(){return t.execCommand("mceCancel")},onSetup:l(t)}),t.addShortcut("Meta+S","","mceSave"),(n=e).addCommand("mceSave",function(){c(n)}),n.addCommand("mceCancel",function(){s(n)})})}(),function(){function e(n){return function(e){return t=typeof(e=e),(null===e?"null":"object"==t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"==t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t)===n;var t}}function t(t){return function(e){return typeof e===t}}function i(e){return function(){return e}}function n(e){return e}function r(){return s}var c=function(e){var t=e;return{get:function(){return t},set:function(e){t=e}}},P=tinymce.util.Tools.resolve("tinymce.PluginManager"),g=function(){return(g=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},I=e("string"),L=e("array"),F=t("boolean"),H=t("number"),o=function(){},u=i(!1),a=i(!0),V=i("[!-#%-*,-\\/:;?@\\[-\\]_{};----------------------------------------------]"),s={fold:function(e,t){return e()},isSome:u,isNone:a,getOr:n,getOrThunk:l,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:i(null),getOrUndefined:i(void 0),or:n,orThunk:l,map:r,each:o,bind:r,exists:u,forall:a,filter:function(){return s},toArray:function(){return[]},toString:i("none()")};function l(e){return e()}function f(n){function e(){return o}function t(e){return e(n)}var r=i(n),o={fold:function(e,t){return t(n)},isSome:a,isNone:u,getOr:r,getOrThunk:r,getOrDie:r,getOrNull:r,getOrUndefined:r,or:e,orThunk:e,map:function(e){return f(e(n))},each:function(e){e(n)},bind:t,exists:t,forall:t,filter:function(e){return e(n)?o:s},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return o}var d={some:f,none:r,from:function(e){return null==e?s:f(e)}},m=V,p=tinymce.util.Tools.resolve("tinymce.Env"),h=tinymce.util.Tools.resolve("tinymce.util.Tools"),j=Array.prototype.slice,U=Array.prototype.push,v=function(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o)}return r},b=function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)},y=function(e,t){for(var n=e.length-1;0<=n;n--)t(e[n],n)},W=function(e,t){if(0===e.length)return[];for(var n=t(e[0]),r=[],o=[],i=0,u=e.length;i<u;i++){var a=e[i],c=t(a);c!==n&&(r.push(o),o=[]),n=c,o.push(a)}return 0!==o.length&&r.push(o),r},$=function(e,n,r){return b(e,function(e,t){r=n(r,e,t)}),r},q=function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!L(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);U.apply(t,e[n])}return t},w=function(e,t){return q(v(e,t))},G=function(e,t){e=j.call(e,0);return e.sort(t),e},K=Object.hasOwnProperty,x=function(e,t){return K.call(e,t)},X=("undefined"!=typeof window||Function("return this;")(),9),Y=11,J=1;S=3;function C(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}}var S,k,T,Z=function(e,t,n){if(!(I(n)||F(n)||H(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},Q=function(e,t,n){Z(e.dom,t,n)},ee=function(e,t,n){return 0!=(e.compareDocumentPosition(t)&n)},te=function(e,t){return ee(e,t,Node.DOCUMENT_POSITION_PRECEDING)},O={fromHtml:function(e,t){t=(t||document).createElement("div");if(t.innerHTML=e,!t.hasChildNodes()||1<t.childNodes.length)throw console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node");return C(t.childNodes[0])},fromTag:function(e,t){t=(t||document).createElement(e);return C(t)},fromText:function(e,t){t=(t||document).createTextNode(e);return C(t)},fromDom:C,fromPoint:function(e,t,n){return d.from(e.dom.elementFromPoint(t,n)).map(C)}},ne=function(e){return e.nodeType!==J&&e.nodeType!==X&&e.nodeType!==Y||0===e.childElementCount},re=function(e,t){t=void 0===t?document:t.dom;return ne(t)?[]:v(t.querySelectorAll(e),O.fromDom)},oe=function(e){return d.from(e.dom.parentNode).map(O.fromDom)},ie=function(e){return v(e.dom.childNodes,O.fromDom)},E=function(e,t){return{element:e,offset:t}},ue=function(e,t){var n=ie(e);return 0<n.length&&t<n.length?E(n[t],0):E(e,t)},ae=function(t,n){oe(t).each(function(e){e.dom.insertBefore(n.dom,t.dom)})},ce=function(e,t){e.dom.appendChild(t.dom)},se=function(e,t){ae(e,t),ce(t,e)},le=(k=function(e){return e.dom.nodeType===S},T="text",{get:function(e){if(k(e))return fe(e).getOr("");throw new Error("Can only get "+T+" value of a "+T+" node")},getOption:fe,set:function(e,t){if(!k(e))throw new Error("Can only set raw "+T+" value of a "+T+" node");e.dom.nodeValue=t}});function fe(e){return k(e)?d.from(e.dom.nodeValue):d.none()}var de=function(e){return le.get(e)},me=function(e,t){return re(t,e)},ge=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),pe=function(e,t){return e.isBlock(t)||x(e.schema.getShortEndedElements(),t.nodeName)},he=function(e,t){return"false"===e.getContentEditable(t)},ve=function(e,t){return"true"===e.getContentEditable(t)&&"false"===e.getContentEditableParent(t.parentNode)},be=function(e,t){return!e.isBlock(t)&&x(e.schema.getWhiteSpaceElements(),t.nodeName)},ye=function(e,t){return pe(e,t)||he(e,t)||be(e,t)||ve(e,t)},we=function(e){return 3===e.nodeType},xe=function(){return{sOffset:0,fOffset:0,elements:[]}},Ce=function(e,t){return ue(O.fromDom(e),t)},Se=function(e,t,n,r,o,i){for(var u=(i=void 0===i?!0:i)?t(!1):n;u;){var a=he(e,u);if(a||be(e,u)){if(a?r.cef(u):r.boundary(u))break;u=t(!0)}else{if(pe(e,u)){if(r.boundary(u))break}else we(u)&&r.text(u);if(u===o)break;u=t(!1)}}},ke=function(e,t,n,r,o){ye(e,n)||(r=e.getParent(r,e.isBlock),r=new ge(n,r),r=(o?r.next:r.prev).bind(r),Se(e,r,n,{boundary:a,cef:a,text:function(e){o?t.fOffset+=e.length:t.sOffset+=e.length,t.elements.push(O.fromDom(e))}}))},Te=function(e,t,n,r,o,i){void 0===i&&(i=!0);function u(){return 0<s.elements.length&&(c.push(s),s=xe()),!1}var a=new ge(n,t),c=[],s=xe();ke(e,s,n,t,!1);return Se(e,a.next.bind(a),n,{boundary:u,cef:function(e){return u(),o&&c.push.apply(c,o.cef(e)),!1},text:function(e){s.elements.push(O.fromDom(e)),o&&o.text(e,s)}},r,i),r&&ke(e,s,r,t,!0),u(),c},Oe=function(t,e){var n=Ce(e.startContainer,e.startOffset),r=n.element.dom,o=Ce(e.endContainer,e.endOffset),i=o.element.dom;return Te(t,e.commonAncestorContainer,r,i,{text:function(e,t){e===i?t.fOffset+=e.length-o.offset:e===r&&(t.sOffset+=n.offset)},cef:function(e){e=w(me(O.fromDom(e),"*[contenteditable=true]"),function(e){e=e.dom;return Te(t,e,e)});return G(e,function(e,t){return te(e.elements[0].dom,t.elements[0].dom)?1:-1})}},!1)},Ee=function(e,t){return t.collapsed?[]:Oe(e,t)},_e=function(e,t){var n=e.createRng();return n.selectNode(t),Ee(e,n)},Ae=function(t,e){return w(e,function(e){return _e(t,e)})},De=function(e,t,n,r){void 0===r&&(r=e.length);for(var o=t.regex,i=(o.lastIndex=n=void 0===n?0:n,[]);a=o.exec(e);){var u=a[t.matchIndex],a=a.index+a[0].indexOf(u),u=a+u.length;if(r<u)break;i.push({start:a,finish:u}),o.lastIndex=u}return i},Me=function(e,i){e=$(e,function(e,n){var t=de(n),r=e.last,o=r+t.length,t=w(i,function(e,t){return e.start<o&&e.finish>r?[{element:n,start:Math.max(r,e.start)-r,finish:Math.min(o,e.finish)-r,matchId:t}]:[]});return{results:e.results.concat(t),last:o}},{results:[],last:0}).results;return W(e,function(e){return e.matchId})},Ne=function(r,e){return w(e,function(e){var t=e.elements,n=v(t,de).join(""),n=De(n,r,e.sOffset,n.length-e.fOffset);return Me(t,n)})},Re=function(e,o){y(e,function(e,r){y(e,function(e){var t=O.fromDom(o.cloneNode(!1)),n=(Q(t,"data-mce-index",r),e.element.dom);n.length===e.finish&&0===e.start?se(e.element,t):(n.length!==e.finish&&n.splitText(e.finish),n=n.splitText(e.start),se(O.fromDom(n),t))})})},ze=function(e,t,n,r){e=_e(e,n),n=Ne(t,e);return Re(n,r),n.length},Be=function(e,t,n,r){var o=n.getBookmark(),i=e.select("td[data-mce-selected],th[data-mce-selected]"),i=0<i.length?Ae(e,i):Ee(e,n.getRng()),e=Ne(t,i);return Re(e,r),n.moveToBookmark(o),e.length},_=function(e){e=e.getAttribute("data-mce-index");return"number"==typeof e?""+e:e},Pe=function(e,t,n,r){var o=e.dom.create("span",{"data-mce-bogus":1}),i=(o.className="mce-match-marker",e.getBody());return z(e,t,!1),r?Be(e.dom,n,e.selection,o):ze(e.dom,n,i,o)},Ie=function(e){var t=e.parentNode;e.firstChild&&t.insertBefore(e.firstChild,e),e.parentNode.removeChild(e)},A=function(e,t){var n=[],r=h.toArray(e.getBody().getElementsByTagName("span"));if(r.length)for(var o=0;o<r.length;o++){var i=_(r[o]);null!==i&&i.length&&i===t.toString()&&n.push(r[o])}return n},D=function(e,t,n){var t=t.get(),r=t.index,o=e.dom,n=((n=!1!==n)?r+1===t.count?r=0:r++:r-1==-1?r=t.count-1:r--,o.removeClass(A(e,t.index),"mce-match-marker-selected"),A(e,r));return n.length?(o.addClass(A(e,r),"mce-match-marker-selected"),e.selection.scrollIntoView(n[0]),r):-1},Le=function(e,t){var n=t.parentNode;e.remove(t),e.isEmpty(n)&&e.remove(n)},Fe=function(e,t){e="("+e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&").replace(/\s/g,"[^\\S\\r\\n\\uFEFF]")+")";return t?"(?:^|\\s|"+m()+")"+e+"(?=$|\\s|"+m()+")":e},He=function(e,t,n,r,o,i){var u=e.selection,a=Fe(n,o),c=u.isForward(),a={regex:new RegExp(a,r?"g":"gi"),matchIndex:1},a=Pe(e,t,a,i);return p.browser.isSafari()&&u.setRng(u.getRng(),c),a&&(u=D(e,t,!0),t.set({index:u,count:a,text:n,matchCase:r,wholeWord:o,inSelection:i})),a},M=function(e,t){e=D(e,t,!0);t.set(g(g({},t.get()),{index:e}))},N=function(e,t){e=D(e,t,!1);t.set(g(g({},t.get()),{index:e}))},Ve=function(e){e=_(e);return null!==e&&0<e.length},R=function(e,t,n,r,o){for(var i,u=t.get(),a=u.index,c=a,s=(r=!1!==r,e.getBody()),l=h.grep(h.toArray(s.getElementsByTagName("span")),Ve),f=0;f<l.length;f++){var d=_(l[f]),m=i=parseInt(d,10);if(o||m===u.index){for(n.length?(l[f].firstChild.nodeValue=n,Ie(l[f])):Le(e.dom,l[f]);l[++f];){if((m=parseInt(_(l[f]),10))!==i){f--;break}Le(e.dom,l[f])}r&&c--}else a<i&&l[f].setAttribute("data-mce-index",String(i-1))}return t.set(g(g({},u),{count:o?0:u.count-1,index:c})),(r?M:N)(e,t),!o&&0<t.get().count},z=function(e,t,n){for(var r,o,i=t.get(),u=h.toArray(e.getBody().getElementsByTagName("span")),a=0;a<u.length;a++){var c=_(u[a]);null!==c&&c.length&&(c===i.index.toString()&&(r=r||u[a].firstChild,o=u[a].firstChild),Ie(u[a]))}if(t.set(g(g({},i),{index:-1,count:0,text:""})),r&&o)return(t=e.dom.createRng()).setStart(r,0),t.setEnd(o,o.data.length),!1!==n&&e.selection.setRng(t),t},je=function(e,t){return 1<t.get().count},Ue=function(e,t){return 1<t.get().count},We=function(e){function t(){n.get().each(e)}var n=c(d.none());return{clear:function(){t(),n.set(d.none())},isSet:function(){return n.get().isSome()},get:function(){return n.get()},set:function(e){t(),n.set(d.some(e))}}},$e=function(){var t=We(o);return g(g({},t),{on:function(e){return t.get().each(e)}})},qe=function(i,u){function a(e){(je(i,u)?e.enable:e.disable)("next"),(Ue(i,u)?e.enable:e.disable)("prev")}function o(e,t){t=t?e.disable:e.enable,b(["replace","replaceall","prev","next"],t)}function c(e,t){p.browser.isSafari()&&p.deviceType.isTouch()&&("find"===t||"replace"===t||"replaceall"===t)&&e.focus(t)}function s(e){z(i,u,!1),o(e,!0),a(e)}function l(e){var t,n=e.getData(),r=u.get();(n.findtext.length?(r.text===n.findtext&&r.matchCase===n.matchcase&&r.wholeWord===n.wholewords?M(i,u):((r=He(i,u,n.findtext,n.matchcase,n.wholewords,n.inselection))<=0&&(t=e,i.windowManager.alert("Could not find the specified string.",function(){t.focus("findtext")})),o(e,0===r)),a):s)(e)}var e=$e(),t=(i.undoManager.add(),h.trim(i.selection.getContent({format:"text"}))),n=u.get(),t={findtext:t,replacetext:"",wholewords:n.wholeWord,matchcase:n.matchCase,inselection:n.inSelection};e.set(i.windowManager.open({title:"Find and Replace",size:"normal",body:{type:"panel",items:[{type:"bar",items:[{type:"input",name:"findtext",placeholder:"Find",maximized:!0,inputMode:"search"},{type:"button",name:"prev",text:"Previous",icon:"action-prev",disabled:!0,borderless:!0},{type:"button",name:"next",text:"Next",icon:"action-next",disabled:!0,borderless:!0}]},{type:"input",name:"replacetext",placeholder:"Replace with",inputMode:"search"}]},buttons:[{type:"menu",name:"options",icon:"preferences",tooltip:"Preferences",align:"start",items:[{type:"togglemenuitem",name:"matchcase",text:"Match case"},{type:"togglemenuitem",name:"wholewords",text:"Find whole words only"},{type:"togglemenuitem",name:"inselection",text:"Find in selection"}]},{type:"custom",name:"find",text:"Find",primary:!0},{type:"custom",name:"replace",text:"Replace",disabled:!0},{type:"custom",name:"replaceall",text:"Replace all",disabled:!0}],initialData:t,onChange:function(e,t){"findtext"===t.name&&0<u.get().count&&s(e)},onAction:function(e,t){var n,r,o=e.getData();switch(t.name){case"find":l(e);break;case"replace":(R(i,u,o.replacetext)?a:s)(e);break;case"replaceall":R(i,u,o.replacetext,!0,!0),s(e);break;case"prev":N(i,u),a(e);break;case"next":M(i,u),a(e);break;case"matchcase":case"wholewords":case"inselection":n=(n=e).getData(),r=u.get(),u.set(g(g({},r),{matchCase:n.matchcase,wholeWord:n.wholewords,inSelection:n.inselection})),s(e)}c(e,t.name)},onSubmit:function(e){l(e),c(e,"find")},onClose:function(){i.focus(),z(i,u),i.undoManager.add()}},{inline:"toolbar"}))},B=function(e,t){return function(){qe(e,t)}};P.add("searchreplace",function(e){var t,n,r,o,i,u,a=c({index:-1,count:0,text:"",matchCase:!1,wholeWord:!1,inSelection:!1});return n=a,(t=e).addCommand("SearchReplace",function(){qe(t,n)}),o=a,(r=e).ui.registry.addMenuItem("searchreplace",{text:"Find and replace...",shortcut:"Meta+F",onAction:B(r,o),icon:"search"}),r.ui.registry.addButton("searchreplace",{tooltip:"Find and replace",onAction:B(r,o),icon:"search"}),r.shortcuts.add("Meta+F","",B(r,o)),i=e,u=a,{done:function(e){return z(i,u,e)},find:function(e,t,n,r){return He(i,u,e,t,n,r=void 0===r?!1:r)},next:function(){return M(i,u)},prev:function(){return N(i,u)},replace:function(e,t,n){return R(i,u,e,t,n)}}})}(),function(){function N(e){var t=e;return{get:function(){return t},set:function(e){t=e}}}var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=Object.hasOwnProperty,a=function(e){for(var t in e)if(n.call(e,t))return!1;return!0},R=tinymce.util.Tools.resolve("tinymce.util.Tools"),s=tinymce.util.Tools.resolve("tinymce.util.URI"),l=tinymce.util.Tools.resolve("tinymce.util.XHR"),c=function(e){return e.fire("SpellcheckStart")},o=function(e){return e.fire("SpellcheckEnd")},t=function(e){return e.getParam("spellchecker_languages","English=en,Danish=da,Dutch=nl,Finnish=fi,French=fr_FR,German=de,Italian=it,Polish=pl,Portuguese=pt_BR,Spanish=es,Swedish=sv")},f=function(e){return e.getParam("spellchecker_rpc_url")},d=function(e){return e.getParam("spellchecker_callback")},z=function(e){var t=new RegExp('[^\\s!"#$%&()*+,-./:;<=>?@[\\]^_{|}`]+',"g");return e.getParam("spellchecker_wordchar_pattern",t)},w=function(e){return e&&1===e.nodeType&&"false"===e.contentEditable},r=function(m,n){function r(e){if(3===e.nodeType)return e.data;if(b[e.nodeName]&&!v[e.nodeName])return"";if(w(e))return"\n";var t="";if((v[e.nodeName]||y[e.nodeName])&&(t+="\n"),e=e.firstChild)for(;t+=r(e),e=e.nextSibling;);return t}function g(r){function g(e,t){var n=p[t];return n.stencil||(n.stencil=r(n)),(n=n.stencil.cloneNode(!1)).setAttribute("data-mce-index",""+t),e&&n.appendChild(h.doc.createTextNode(e)),n}return function(e){var t,n=e.startNode,r=e.endNode,o=e.matchIndex,i=h.doc;if(n===r)return t=(c=n).parentNode,0<e.startNodeIndex&&(u=i.createTextNode(c.data.substring(0,e.startNodeIndex)),t.insertBefore(u,c)),m=g(e.match,o),t.insertBefore(m,c),e.endNodeIndex<c.length&&(a=i.createTextNode(c.data.substring(e.endNodeIndex)),t.insertBefore(a,c)),c.parentNode.removeChild(c),m;for(var u=i.createTextNode(n.data.substring(0,e.startNodeIndex)),a=i.createTextNode(r.data.substring(e.endNodeIndex)),c=g(n.data.substring(e.startNodeIndex),o),s=0,l=e.innerNodes.length;s<l;++s){var f=e.innerNodes[s],d=g(f.data,o);f.parentNode.replaceChild(d,f)}var m=g(r.data.substring(0,e.endNodeIndex),o);return(t=n.parentNode).insertBefore(u,n),t.insertBefore(c,n),t.removeChild(n),(t=r.parentNode).insertBefore(m,r),t.insertBefore(a,r),t.removeChild(r),m}}var o,p=[],h=n.dom,v=n.schema.getBlockElements(),b=n.schema.getWhiteSpaceElements(),y=n.schema.getShortEndedElements(),i=function(e){for(var t=e.parentNode;0<e.childNodes.length;)t.insertBefore(e.childNodes[0],e);t.removeChild(e)},u=function(e){return-1!==e.className.indexOf("mce-spellchecker-word")},a=function(e){var t=m.getElementsByTagName("*"),n=[];e="number"==typeof e?""+e:null;for(var r=0;r<t.length;r++){var o=t[r],i=o.getAttribute("data-mce-index");null!==i&&i.length&&u(o)&&(i!==e&&null!==e||n.push(o))}return n},c=function(e){for(var t=p.length;t--;)if(p[t]===e)return t;return-1};function e(e){for(var t=0,n=p.length;t<n&&!1!==e(p[t],t);t++);return this}function t(e){for(var t=a(e?c(e):null),n=t.length;n--;)i(t[n]);return this}function s(e){var e=a(c(e)),t=n.dom.createRng();return t.setStartBefore(e[0]),t.setEndAfter(e[e.length-1]),t}var l=r(m);return{text:l,matches:p,each:e,filter:function(n){var r=[];return e(function(e,t){n(e,t)&&r.push(e)}),p=r,this},reset:function(){return p.splice(0,p.length),t(),this},matchFromElement:function(e){return p[e.getAttribute("data-mce-index")]},elementFromMatch:function(e){return a(c(e))[0]},find:function(e,t){if(l&&e.global)for(;o=e.exec(l);)p.push(function(e,t){if(e[0])return{start:e.index,end:e.index+e[0].length,text:e[0],data:t};throw new Error("findAndReplaceDOMText cannot handle zero-length matches")}(o,t));return this},add:function(e,t,n){return p.push({start:e,end:e+t,text:l.substr(e,t),data:n}),this},wrap:function(e){if(p.length){var t,n,r,o,i,u=m,a=p,c=g(e),s=[],l=0,f=u,d=0;(a=a.slice(0)).sort(function(e,t){return e.start-t.start}),i=a.shift();e:for(;;){if((v[f.nodeName]||y[f.nodeName]||w(f))&&l++,3===f.nodeType&&(!n&&f.length+l>=i.end?(n=f,o=i.end-l):t&&s.push(f),!t&&f.length+l>i.start&&(t=f,r=i.start-l),l+=f.length),t&&n){if(f=c({startNode:t,startNodeIndex:r,endNode:n,endNodeIndex:o,innerNodes:s,match:i.text,matchIndex:d}),l-=n.length-o,n=t=null,s=[],d++,!(i=a.shift()))break}else if(b[f.nodeName]&&!v[f.nodeName]||!f.firstChild){if(f.nextSibling){f=f.nextSibling;continue}}else if(!w(f)){f=f.firstChild;continue}for(;;){if(f.nextSibling){f=f.nextSibling;break}if(f.parentNode===u)break e;f=f.parentNode}}}return this},unwrap:t,replace:function(e,t){e=s(e);return e.deleteContents(),0<t.length&&e.insertNode(n.dom.doc.createTextNode(t)),e},rangeFromMatch:s,indexOf:c}},m=function(e,t){return t.get()||(e=r(e.getBody(),e),t.set(e)),t.get()},g=function(u,a,c){return function(e,t,n,r){var o={method:e,lang:c.get()},i="";o["addToDictionary"===e?"word":"text"]=t,R.each(o,function(e,t){i&&(i+="&"),i+=t+"="+encodeURIComponent(e)}),l.send({url:new s(a).toAbsolute(f(u)),type:"post",content_type:"application/x-www-form-urlencoded",data:i,success:function(e){var e=JSON.parse(e);e?e.error?r(e.error):n(e):(e=u.translate("Server response wasn't proper JSON."),r(e))},error:function(){var e=u.translate("The spelling service was not found: (")+f(u)+u.translate(")");r(e)}})}},p=function(e,t,n,r,o,i,u){var a=d(e);(a||g(e,t,n)).call(e.plugins.spellchecker,r,o,i,u)},B=function(t,e,n,r,o,i){u(t,n,r)||(t.setProgressState(!0),p(t,e,i,"spellcheck",m(t,r).text,function(e){L(t,n,r,o,e)},function(e){t.notificationManager.open({text:e,type:"error"}),t.setProgressState(!1),u(t,n,r)}),t.focus())},h=function(e,t,n){e.dom.select("span.mce-spellchecker-word").length||u(e,t,n)},v=function(t,e,n,r,o,i,u){t.setProgressState(!0),p(t,e,o,"addToDictionary",i,function(){t.setProgressState(!1),t.dom.remove(u,!0),h(t,n,r)},function(e){t.notificationManager.open({text:e,type:"error"}),t.setProgressState(!1)})},b=function(t,e,n,r,o,i){t.selection.collapse(),i?R.each(t.dom.select("span.mce-spellchecker-word"),function(e){e.getAttribute("data-mce-word")===r&&t.dom.remove(e,!0)}):t.dom.remove(o,!0),h(t,e,n)},u=function(e,t,n){var r=e.selection.getBookmark();if(m(e,n).reset(),e.selection.moveToBookmark(r),n.set(null),t.get())return t.set(!1),o(e),!0},P=function(e){e=e.getAttribute("data-mce-index");return"number"==typeof e?""+e:e},I=function(e,t){var n=[],r=R.toArray(e.getBody().getElementsByTagName("span"));if(r.length)for(var o=0;o<r.length;o++){var i=P(r[o]);null!==i&&i.length&&i===t.toString()&&n.push(r[o])}return n},L=function(t,e,n,r,o){var i=!!o.dictionary,u=o.words;t.setProgressState(!1),a(u)?(o=t.translate("No misspellings found."),t.notificationManager.open({text:o,type:"info"}),e.set(!1)):(r.set({suggestions:u,hasDictionarySupport:i}),o=t.selection.getBookmark(),m(t,n).find(z(t)).filter(function(e){return!!u[e.text]}).wrap(function(e){return t.dom.create("span",{class:"mce-spellchecker-word","aria-invalid":"spelling","data-mce-bogus":1,"data-mce-word":e.text})}),t.selection.moveToBookmark(o),e.set(!0),c(t))},F=function(){return(F=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},H="SpellcheckStart SpellcheckEnd",V=function(e,t){var n=[];return R.each(t,function(e){n.push({selectable:!0,text:e.name,data:e.value})}),n},j=function(e){return R.map(t(e).split(","),function(e){e=e.split("=");return{name:e[0],value:e[1]}})},y=!0,U=function(t,e,n,r,o,i,u,a){var c=[],s=n.get().suggestions[u];return R.each(s,function(e){c.push({text:e,onAction:function(){t.insertContent(t.dom.encode(e)),t.dom.remove(a),h(t,r,o)}})}),n.get().hasDictionarySupport&&(c.push({type:"separator"}),c.push({text:"Add to dictionary",onAction:function(){v(t,e,r,o,i,u,a)}})),c.push.apply(c,[{type:"separator"},{text:"Ignore",onAction:function(){b(t,r,o,u,a)}},{text:"Ignore all",onAction:function(){b(t,r,o,u,a,y)}}]),c};e.add("spellchecker",function(e,t){var n,r,o,i,u,a,c,s,l,f,d,m,g,p,h,v,b,y,w,x,C,S,k,T,O,E,_,A,D;if(!1==(!!e.hasPlugin("tinymcespellchecker",!0)&&(void 0!==window.console&&window.console.log&&window.console.log("Spell Checker Pro is incompatible with Spell Checker plugin! Remove 'spellchecker' from the 'plugins' option."),!0)))return n=N(!1),A=N((D=(A=e).getParam("language","en"),A.getParam("spellchecker_language",D))),D=N(null),r=N(null),x=t,C=n,S=D,k=A,T=r,O=V("Language",j(w=e)),_=F(F({},E={tooltip:"Spellcheck",onAction:M,icon:"spell-check",onSetup:function(e){function t(){e.setActive(C.get())}return w.on(H,t),function(){w.off(H,t)}}}),{type:"splitbutton",select:function(e){return e===k.get()},fetch:function(e){e(R.map(O,function(e){return{type:"choiceitem",value:e.data,text:e.text}}))},onItemAction:function(e,t){k.set(t)}}),1<O.length?w.ui.registry.addSplitButton("spellchecker",_):w.ui.registry.addToggleButton("spellchecker",E),w.ui.registry.addToggleMenuItem("spellchecker",{text:"Spellcheck",icon:"spell-check",onSetup:function(e){e.setActive(C.get());function t(){e.setActive(C.get())}return w.on(H,t),function(){w.off(H,t)}},onAction:M}),p=t,h=r,v=n,b=D,y=A,(g=e).ui.registry.addContextMenu("spellchecker",{update:function(e){var t,n;return"mce-spellchecker-word"!==e.className?[]:0<(t=I(g,P(e))).length?((n=g.dom.createRng()).setStartBefore(t[0]),n.setEndAfter(t[t.length-1]),g.selection.setRng(n),U(g,p,h,v,b,y,e.getAttribute("data-mce-word"),t)):void 0}}),s=t,l=n,f=D,d=r,m=A,(c=e).addCommand("mceSpellCheck",function(){B(c,s,l,f,d,m)}),o=e,i=n,u=r,{getTextMatcher:(a=D).get,getWordCharPattern:function(){return z(o)},markErrors:function(e){L(o,i,a,u,e)},getLanguage:A.get};function M(){B(w,x,C,S,T,k)}})}(),function(){function t(a){function e(i){var u,e,t,n;i.keyCode!==l.TAB||i.ctrlKey||i.altKey||i.metaKey||i.isDefaultPrevented()||(n=function(e){function t(e){return/INPUT|TEXTAREA|BUTTON/.test(e.tagName)&&c.get(i.id)&&-1!==e.tabIndex&&r(e)}var n=d.select(":input:enabled,*[tabindex]:not(iframe)"),r=function(e){return"BODY"===e.nodeName||"hidden"!==e.type&&"none"!==e.style.display&&"hidden"!==e.style.visibility&&r(e.parentNode)};if(s.each(n,function(e,t){if(e.id===a.id)return u=t,!1}),0<e){for(var o=u+1;o<n.length;o++)if(t(n[o]))return n[o]}else for(o=u-1;0<=o;o--)if(t(n[o]))return n[o];return null},1===(e=s.explode(f(a))).length&&(e[1]=e[0],e[0]=":prev"),(t=i.shiftKey?":prev"===e[0]?n(-1):d.get(e[0]):":next"===e[1]?n(1):d.get(e[1]))&&(n=c.get(t.id||t.name),t.id&&n?n.focus():o.setTimeout(function(){r.webkit||window.focus(),t.focus()},10),i.preventDefault()))}a.on("init",function(){a.inline&&d.setAttrib(a.getBody(),"tabIndex",null),a.on("keyup",u),r.gecko?a.on("keypress keydown",e):a.on("keydown",e)})}var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),c=tinymce.util.Tools.resolve("tinymce.EditorManager"),r=tinymce.util.Tools.resolve("tinymce.Env"),o=tinymce.util.Tools.resolve("tinymce.util.Delay"),s=tinymce.util.Tools.resolve("tinymce.util.Tools"),l=tinymce.util.Tools.resolve("tinymce.util.VK"),i=function(e){return e.getParam("tabfocus_elements",":prev,:next")},f=function(e){return e.getParam("tab_focus",i(e))},d=n.DOM,u=function(e){e.keyCode!==l.TAB||e.ctrlKey||e.altKey||e.metaKey||e.preventDefault()};e.add("tabfocus",function(e){t(e)})}(),function(){function r(n){return function(e){return t=typeof(e=e),(null===e?"null":"object"==t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"==t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t)===n;var t}}function o(t){return function(e){return typeof e===t}}function i(t){return function(e){return t===e}}function u(n,r){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n(r.apply(null,e))}}function s(t,n){return function(e){return t(n(e))}}var V=r("string"),j=r("object"),U=r("array"),W=i(null),$=o("boolean"),q=i(void 0),G=function(e){return null==e},K=function(e){return!G(e)},X=o("function"),Y=o("number"),h=function(){},m=function(e){return function(){return e}},a=function(e){return e},J=function(e,t){return e===t};function g(r){for(var o=[],e=1;e<arguments.length;e++)o[e-1]=arguments[e];return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=o.concat(e);return r.apply(null,n)}}function Z(){return ee}var Q=function(t){return function(e){return!t(e)}},y=m(!1),v=m(!0),ee={fold:function(e,t){return e()},isSome:y,isNone:v,getOr:Qe=a,getOrThunk:te,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:m(null),getOrUndefined:m(void 0),or:Qe,orThunk:te,map:Z,each:h,bind:Z,exists:y,forall:v,filter:function(){return ee},toArray:function(){return[]},toString:m("none()")};function te(e){return e()}function ne(n){function e(){return o}function t(e){return e(n)}var r=m(n),o={fold:function(e,t){return t(n)},isSome:v,isNone:y,getOr:r,getOrThunk:r,getOrDie:r,getOrNull:r,getOrUndefined:r,or:e,orThunk:e,map:function(e){return ne(e(n))},each:function(e){e(n)},bind:t,exists:t,forall:t,filter:function(e){return e(n)?o:ee},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return o}var w={some:ne,none:Z,from:function(e){return null==e?ee:ne(e)}},re=Array.prototype.slice,oe=Array.prototype.indexOf,ie=Array.prototype.push,ue=function(e,t){return oe.call(e,t)},c=function(e,t){return-1<ue(e,t)},f=function(e,t){for(var n=0,r=e.length;n<r;n++)if(t(e[n],n))return!0;return!1},ae=function(e,t){for(var n=[],r=0;r<e;r++)n.push(t(r));return n},p=function(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o)}return r},x=function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)},ce=function(e,t){for(var n=e.length-1;0<=n;n--)t(e[n],n)},se=function(e,t){for(var n=[],r=[],o=0,i=e.length;o<i;o++){var u=e[o];(t(u,o)?n:r).push(u)}return{pass:n,fail:r}},C=function(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r)&&n.push(i)}return n},le=function(e,n,r){return ce(e,function(e,t){r=n(r,e,t)}),r},fe=function(e,n,r){return x(e,function(e,t){r=n(r,e,t)}),r},de=function(e,t,n){for(var r=0,o=e.length;r<o;r++){var i=e[r];if(t(i,r))return w.some(i);if(n(i,r))break}return w.none()},me=function(e,t){return de(e,t,y)},ge=function(e,t){for(var n=0,r=e.length;n<r;n++)if(t(e[n],n))return w.some(n);return w.none()},pe=function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!U(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);ie.apply(t,e[n])}return t},b=function(e,t){return pe(p(e,t))},he=function(e,t){for(var n=0,r=e.length;n<r;++n)if(!0!==t(e[n],n))return!1;return!0},ve=function(e){e=re.call(e,0);return e.reverse(),e},be=function(e,t){for(var n={},r=0,o=e.length;r<o;r++){var i=e[r];n[String(i)]=t(i,r)}return n},ye=function(e){return[e]},we=function(e,t){e=re.call(e,0);return e.sort(t),e},xe=function(e,t){return 0<=t&&t<e.length?w.some(e[t]):w.none()},Ce=function(e){return xe(e,0)},Se=function(e){return xe(e,e.length-1)},ke=function(e,t){for(var n=0;n<e.length;n++){var r=t(e[n],n);if(r.isSome())return r}return w.none()},d=function(){return(d=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function Te(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||((r=r||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}function Oe(){return Ve(0,0)}function n(e,t){return-1!==e.indexOf(t)}function Ee(t){return function(e){return n(e,t)}}function _e(e){function t(e){return function(){return n===e}}var n=e.current,e=e.version;return{current:n,version:e,isEdge:t(nt),isChrome:t(rt),isIE:t(ot),isOpera:t(it),isFirefox:t(ut),isSafari:t(at)}}function Ae(e){function t(e){return function(){return n===e}}var n=e.current,e=e.version;return{current:n,version:e,isWindows:t(lt),isiOS:t(ft),isAndroid:t(dt),isOSX:t(gt),isLinux:t(mt),isSolaris:t(pt),isFreeBSD:t(ht),isChromeOS:t(vt)}}function De(e){return window.matchMedia(e).matches}function Me(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}}function Ne(t){return function(e){return ln(e)===t}}function Re(e){return ln(e)===Tt||"#comment"===E(e)}function ze(e){return w.from(e.dom.previousSibling).map(S.fromDom)}function Be(e){return e=On(e),kn(e)?w.some(e):w.none()}function Pe(e){return S.fromDom(e.dom.host)}function Ie(e){if(Tn()&&K(e.target)){var t=S.fromDom(e.target);if(fn(t)&&En(t)&&e.composed&&e.composedPath){t=e.composedPath();if(t)return Ce(t)}}return w.from(e.target)}var Le,Fe=function(n){var r,o=!1;return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o||(o=!0,r=n.apply(null,e)),r}},He=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t))return r}},Ve=function(e,t){return{major:e,minor:t}},je={nu:Ve,detect:function(e,t){var n,r,t=String(t).toLowerCase();return 0===e.length?Oe():(r=He(e=e,n=t))?Ve((e=function(e){return Number(n.replace(r,"$"+e))})(1),e(2)):{major:0,minor:0}},unknown:Oe},Ue=function(e,t){var n=String(t).toLowerCase();return me(e,function(e){return e.search(n)})},We=function(e,t){return e.substring(t)},$e=function(e,t,n){return""===t||e.length>=t.length&&e.substr(n,n+t.length)===t},qe=function(e,t){return Ge(e,t)?We(e,t.length):e},Ge=function(e,t){return $e(e,t,0)},Ke=function(e,t){return $e(e,t,e.length-t.length)},Xe=(Le=/^\s+|\s+$/g,function(e){return e.replace(Le,"")}),Ye=function(e){return 0<e.length},Je=function(e){return!Ye(e)},Ze=function(e){e=parseFloat(e);return isNaN(e)?w.none():w.some(e)},Qe=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Qe=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return n(e,"edge/")&&n(e,"chrome")&&n(e,"safari")&&n(e,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Qe],search:function(e){return n(e,"chrome")&&!n(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return n(e,"msie")||n(e,"trident")}},{name:"Opera",versionRegexes:[Qe,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Ee("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Ee("firefox")},{name:"Safari",versionRegexes:[Qe,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(n(e,"safari")||n(e,"mobile/"))&&n(e,"applewebkit")}}],et=[{name:"Windows",search:Ee("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return n(e,"iphone")||n(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Ee("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Ee("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Ee("linux"),versionRegexes:[]},{name:"Solaris",search:Ee("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Ee("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Ee("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],tt={browsers:m(Qe),oses:m(et)},nt="Edge",rt="Chrome",ot="IE",it="Opera",ut="Firefox",at="Safari",ct=function(){return _e({current:void 0,version:je.unknown()})},st=_e,lt=(m(nt),m(rt),m(ot),m(it),m(ut),m(at),"Windows"),ft="iOS",dt="Android",mt="Linux",gt="OSX",pt="Solaris",ht="FreeBSD",vt="ChromeOS",bt=function(){return Ae({current:void 0,version:je.unknown()})},yt=Ae,wt=(m(lt),m(ft),m(dt),m(mt),m(gt),m(pt),m(ht),m(vt),function(e,t,n){var r,o,i,u,a,c,s,l=tt.browsers(),f=tt.oses(),t=t.bind(function(e){return r=l,ke(e.brands,function(t){var n=t.brand.toLowerCase();return me(r,function(e){return n===(null==(e=e.brand)?void 0:e.toLowerCase())}).map(function(e){return{current:e.name,version:je.nu(parseInt(t.version,10),0)}})});var r}).orThunk(function(){return Ue(l,n=e).map(function(e){var t=je.detect(e.versionRegexes,n);return{current:e.name,version:t}});var n}).fold(ct,st),f=Ue(f,r=e).map(function(e){var t=je.detect(e.versionRegexes,r);return{current:e.name,version:t}}).fold(bt,yt),d=(i=t,u=e,n=n,d=(o=f).isiOS()&&!0===/ipad/i.test(u),a=o.isiOS()&&!d,c=o.isiOS()||o.isAndroid(),s=c||n("(pointer:coarse)"),n=d||!a&&c&&n("(min-device-width:768px)"),c=a||c&&!n,i=i.isSafari()&&o.isiOS()&&!1===/safari/i.test(u),u=!c&&!n&&!i,{isiPad:m(d),isiPhone:m(a),isTablet:m(n),isPhone:m(c),isTouch:m(s),isAndroid:o.isAndroid,isiOS:o.isiOS,isWebView:m(i),isDesktop:m(u)});return{browser:t,os:f,deviceType:d}}),xt=Fe(function(){return wt(navigator.userAgent,w.from(navigator.userAgentData),De)}),Ct=function(){return xt()},St=function(e,t,n){return 0!=(e.compareDocumentPosition(t)&n)},kt=function(e,t){return St(e,t,Node.DOCUMENT_POSITION_CONTAINED_BY)},Tt=8,Ot=9,Et=11,_t=1,S={fromHtml:function(e,t){t=(t||document).createElement("div");if(t.innerHTML=e,!t.hasChildNodes()||1<t.childNodes.length)throw console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node");return Me(t.childNodes[0])},fromTag:function(e,t){t=(t||document).createElement(e);return Me(t)},fromText:function(e,t){t=(t||document).createTextNode(e);return Me(t)},fromDom:Me,fromPoint:function(e,t,n){return w.from(e.dom.elementFromPoint(t,n)).map(Me)}},At=function(e,t){e=e.dom;if(e.nodeType!==_t)return!1;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},Dt=function(e){return e.nodeType!==_t&&e.nodeType!==Ot&&e.nodeType!==Et||0===e.childElementCount},Mt=function(e,t){t=void 0===t?document:t.dom;return Dt(t)?[]:p(t.querySelectorAll(e),S.fromDom)},Nt=function(e,t){t=void 0===t?document:t.dom;return Dt(t)?w.none():w.from(t.querySelector(e)).map(S.fromDom)},k=function(e,t){return e.dom===t.dom},Rt=function(e,t){e=e.dom,t=t.dom;return e!==t&&e.contains(t)},zt=function(e,t){return kt(e.dom,t.dom)},Bt=function(e,t){return(Ct().browser.isIE()?zt:Rt)(e,t)},Pt=At,It=Object.keys,Lt=Object.hasOwnProperty,T=function(e,t){for(var n=It(e),r=0,o=n.length;r<o;r++){var i=n[r];t(e[i],i)}},Ft=function(e,n){return Ht(e,function(e,t){return{k:t,v:n(e,t)}})},Ht=function(e,n){var r={};return T(e,function(e,t){e=n(e,t);r[e.k]=e.v}),r},Vt=function(n){return function(e,t){n[t]=e}},jt=function(e,n,r,o){return T(e,function(e,t){(n(e,t)?r:o)(e,t)}),{}},Ut=function(e,t){var n={};return jt(e,t,Vt(n),h),n},Wt=function(e,n){var r=[];return T(e,function(e,t){r.push(n(e,t))}),r},$t=function(e){return Wt(e,a)},qt=function(e){return It(e).length},Gt=function(e,t){return Kt(e,t)?w.from(e[t]):w.none()},Kt=function(e,t){return Lt.call(e,t)},Xt=function(e,t){return Kt(e,t)&&void 0!==e[t]&&null!==e[t]},Yt=function(e){for(var t in e)if(Lt.call(e,t))return!1;return!0},Jt=["tfoot","thead","tbody","colgroup"],Zt=function(e){return c(Jt,e)},Qt=function(e,t){return{rows:e,columns:t}},en=function(e,t,n){return{element:e,rowspan:t,colspan:n}},tn=function(e,t,n,r){return{element:e,rowspan:t,colspan:n,isNew:r}},nn=function(e,t,n,r,o,i){return{element:e,rowspan:t,colspan:n,row:r,column:o,isLocked:i}},rn=function(e,t,n){return{element:e,cells:t,section:n}},on=function(e,t,n,r){return{element:e,cells:t,section:n,isNew:r}},O=function(e,t,n){return{element:e,isNew:t,isLocked:n}},un=function(e,t,n,r){return{element:e,cells:t,section:n,isNew:r}},an=function(e,t,n,r){return{startRow:e,startCol:t,finishRow:n,finishCol:r}},cn=function(e,t,n){return{element:e,colspan:t,column:n}},sn=function(e,t){return{element:e,columns:t}},E=("undefined"!=typeof window||Function("return this;")(),function(e){return e.dom.nodeName.toLowerCase()}),ln=function(e){return e.dom.nodeType},fn=Ne(_t),dn=Ne(3),mn=Ne(Ot),gn=Ne(Et),pn=function(t){return function(e){return fn(e)&&E(e)===t}},hn=function(e){return S.fromDom(e.dom.ownerDocument)},vn=function(e){return mn(e)?e:hn(e)},bn=function(e){return w.from(e.dom.parentNode).map(S.fromDom)},yn=function(e){return w.from(e.dom.parentElement).map(S.fromDom)},wn=function(e,t){for(var n=X(t)?t:y,r=e.dom,o=[];null!==r.parentNode&&void 0!==r.parentNode;){var i=r.parentNode,u=S.fromDom(i);if(o.push(u),!0===n(u))break;r=i}return o},xn=function(e){return w.from(e.dom.nextSibling).map(S.fromDom)},l=function(e){return p(e.dom.childNodes,S.fromDom)},Cn=function(e,t){e=e.dom.childNodes;return w.from(e[t]).map(S.fromDom)},Sn=function(e){return Cn(e,0)},kn=function(e){return gn(e)&&K(e.dom.host)},Qe=X(Element.prototype.attachShadow)&&X(Node.prototype.getRootNode),Tn=m(Qe),On=Qe?function(e){return S.fromDom(e.dom.getRootNode())}:vn,En=function(e){return K(e.dom.shadowRoot)},_n=function(e){var t,n=dn(e)?e.dom.parentNode:e.dom;return null!=n&&null!==n.ownerDocument&&(t=n.ownerDocument,Be(S.fromDom(n)).fold(function(){return t.body.contains(n)},s(_n,Pe)))},An=function(){return Dn(S.fromDom(document))},Dn=function(e){e=e.dom.body;if(null==e)throw new Error("Body is not available yet");return S.fromDom(e)},Mn=function(e,t,n){return C(wn(e,n),t)},Nn=function(e,t){return C(l(e),t)},Rn=function(e,t){var n=[];return x(l(e),function(e){n=(n=t(e)?n.concat([e]):n).concat(Rn(e,t))}),n},zn=function(e,t,n){return Mn(e,function(e){return At(e,t)},n)},Bn=function(e,t){return Nn(e,function(e){return At(e,t)})},Pn=function(e,t){return Mt(t,e)};function In(e,t,n,r,o){return e(n,r)?w.some(n):X(o)&&o(n)?w.none():t(n,r,o)}function Ln(e,t){return e=b(e.all,function(e){return e.cells}),C(e,t)}function Fn(e){var s={},t=[],l=Ce(e).map(function(e){return e.element}).bind(N).bind(Gr).getOr({}),n=0,f=0,d=0,r=(e=se(e,function(e){return"colgroup"===e.section})).pass,e=e.fail;x(e,function(e){var c=[];x(e.cells,function(e){for(var t=0;void 0!==s[Xr(d,t)];)t++;for(var n=Xt(l,t.toString()),r=nn(e.element,e.rowspan,e.colspan,d,t,n),o=0;o<e.colspan;o++)for(var i=0;i<e.rowspan;i++){var u=t+o,a=Xr(d+i,u);s[a]=r,f=Math.max(f,u+1)}c.push(r)}),n++,t.push(rn(e.element,c,e.section)),d++});r=(e=Se(r).map(function(e){var t=Yr(e);return{colgroups:[sn(e.element,$t(t))],columns:t}}).getOrThunk(function(){return{colgroups:[],columns:{}}})).columns,e=e.colgroups;return{grid:Qt(n,f),access:s,all:t,columns:r,colgroups:e}}function Hn(e,t){fo(e,t),P(t,e)}function Vn(n,r){x(r,function(e,t){t=0===t?n:r[t-1];mo(t,e)})}function jn(e){var t=l(e);0<t.length&&ho(e,t),I(e)}var Un,Wn,$n=function(e,t,n){for(var r=e.dom,o=X(n)?n:y;r.parentNode;){var r=r.parentNode,i=S.fromDom(r);if(t(i))return w.some(i);if(o(i))break}return w.none()},qn=function(e,t,n){return In(function(e,t){return t(e)},$n,e,t,n)},Gn=function(e,t){return me(e.dom.childNodes,function(e){return t(S.fromDom(e))}).map(S.fromDom)},Kn=function(e,r){function o(e){for(var t=0;t<e.childNodes.length;t++){var n=S.fromDom(e.childNodes[t]);if(r(n))return w.some(n);n=o(e.childNodes[t]);if(n.isSome())return n}return w.none()}return o(e.dom)},Xn=function(e,t,n){return $n(e,function(e){return At(e,t)},n)},Yn=function(e,t){return Gn(e,function(e){return At(e,t)})},Jn=function(e,t){return Nt(t,e)},_=function(e,t,n){return In(function(e,t){return At(e,t)},Xn,e,t,n)},Zn=function(e,t,n){if(!(V(n)||$(n)||Y(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},A=function(e,t,n){Zn(e.dom,t,n)},Qn=function(e,t){var n=e.dom;T(t,function(e,t){Zn(n,t,e)})},er=function(n,e){T(e,function(e,t){e.fold(function(){D(n,t)},function(e){Zn(n.dom,t,e)})})},tr=function(e,t){e=e.dom.getAttribute(t);return null===e?void 0:e},nr=function(e,t){return w.from(tr(e,t))},D=function(e,t){e.dom.removeAttribute(t)},rr=function(e){return fe(e.dom.attributes,function(e,t){return e[t.name]=t.value,e},{})},or=function(e,t,n){return void 0===n&&(n=J),e.exists(function(e){return n(e,t)})},ir=function(e){for(var t=[],n=function(e){t.push(e)},r=0;r<e.length;r++)e[r].each(n);return t},ur=function(e,t,n){return e.isSome()&&t.isSome()?w.some(n(e.getOrDie(),t.getOrDie())):w.none()},ar=function(e,t){return null!=e?t(e):w.none()},cr=function(e){return e.bind(a)},sr=function(e,t){return e?w.some(t):w.none()},lr=function(e){return void 0!==e.style&&X(e.style.getPropertyValue)},fr=function(e,t,n){if(!V(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);lr(e)&&e.style.setProperty(t,n)},dr=function(e,t){lr(e)&&e.style.removeProperty(t)},M=function(e,t,n){e=e.dom;fr(e,t,n)},mr=function(e,t){var n=e.dom;T(t,function(e,t){fr(n,t,e)})},gr=function(e,t){var n=e.dom,r=window.getComputedStyle(n).getPropertyValue(t);return""!==r||_n(e)?r:pr(n,t)},pr=function(e,t){return lr(e)?e.style.getPropertyValue(t):""},hr=function(e,t){e=e.dom,e=pr(e,t);return w.from(e).filter(function(e){return 0<e.length})},vr=function(e,t){var n=e.dom;dr(n,t),or(nr(e,"style").map(Xe),"")&&D(e,"style")},br=function(e,t){e=e.dom,t=t.dom;lr(e)&&lr(t)&&(t.style.cssText=e.style.cssText)},yr=function(e,t,n){return void 0===n&&(n=0),nr(e,t).map(function(e){return parseInt(e,10)}).getOr(n)},wr=function(e,t){return yr(e,t,1)},xr=function(e){return pn("col")(e)?1<yr(e,"span",1):1<wr(e,"colspan")},Cr=function(e){return 1<wr(e,"rowspan")},Sr=function(e,t){return parseInt(gr(e,t),10)},kr=m(10),Tr=m(10),Or=function(e,t){return Er(e,t,v)},Er=function(e,t,n){return b(l(e),function(e){return At(e,t)?n(e)?[e]:[]:Er(e,t,n)})},_r=function(e,t,n){return(n=void 0===n?y:n)(t)?w.none():c(e,E(t))?w.some(t):Xn(t,e.join(","),function(e){return At(e,"table")||n(e)})},Ar=function(e,t){return _r(["td","th"],e,t)},Dr=function(e){return Or(e,"th,td")},Mr=function(e){return At(e,"colgroup")?Bn(e,"col"):b(Rr(e),function(e){return Bn(e,"col")})},N=function(e,t){return _(e,"table",t)},Nr=function(e){return Or(e,"tr")},Rr=function(e){return N(e).fold(m([]),function(e){return Bn(e,"colgroup")})},zr=function(e,n){return p(e,function(e){var t;return"colgroup"===E(e)?(t=p(Mr(e),function(e){var t=yr(e,"span",1);return en(e,1,t)}),rn(e,t,"colgroup")):(t=p(Dr(e),function(e){var t=yr(e,"rowspan",1),n=yr(e,"colspan",1);return en(e,t,n)}),rn(e,t,n(e)))})},Br=function(e){return bn(e).map(function(e){e=E(e);return Zt(e)?e:"tbody"}).getOr("tbody")},Pr=function(e){var t=Nr(e),e=Te(Te([],Rr(e),!0),t,!0);return zr(e,Br)},Ir=function(e,t){return zr(e,function(){return t})},Lr=function(e,t,n){var r=e.cells,o=r.slice(0,t),r=r.slice(t),t=o.concat(n).concat(r);return Vr(e,t)},Fr=function(e,t,n){return Lr(e,t,[n])},Hr=function(e,t,n){e.cells[t]=n},Vr=function(e,t){return un(e.element,t,e.section,e.isNew)},jr=function(e,t){var n=e.cells,n=p(n,t);return un(e.element,n,e.section,e.isNew)},Ur=function(e,t){return e.cells[t]},R=function(e,t){return Ur(e,t).element},Wr=function(e){return e.cells.length},z=function(e){e=se(e,function(e){return"colgroup"===e.section});return{rows:e.fail,cols:e.pass}},$r=function(e,t,n){n=p(e.cells,n);return un(t(e.element),n,e.section,!0)},qr="data-snooker-locked-cols",Gr=function(e){return nr(e,qr).bind(function(e){return w.from(e.match(/\d+/g))}).map(function(e){return be(e,v)})},Kr=function(e){e=fe(z(e).rows,function(n,e){return x(e.cells,function(e,t){e.isLocked&&(n[t]=!0)}),n},{}),e=Wt(e,function(e,t){return parseInt(t,10)});return we(e)},Xr=function(e,t){return e+","+t},Yr=function(e){var r={},o=0;return x(e.cells,function(t){var n=t.colspan;ae(n,function(e){e=o+e;r[e]=cn(t.element,n,e)}),o+=n}),r},B={fromTable:function(e){e=Pr(e);return Fn(e)},generate:Fn,getAt:function(e,t,n){return w.from(e.access[Xr(t,n)])},findItem:function(e,t,n){e=Ln(e,function(e){return n(t,e.element)});return 0<e.length?w.some(e[0]):w.none()},filterItems:Ln,justCells:function(e){return b(e.all,function(e){return e.cells})},justColumns:function(e){return $t(e.columns)},hasColumns:function(e){return 0<It(e.columns).length},getColumnAt:function(e,t){return w.from(e.columns[t])}},Jr=function(e,t){var n=t.column,r=t.column+t.colspan-1,o=t.row,t=t.row+t.rowspan-1;return n<=e.finishCol&&r>=e.startCol&&o<=e.finishRow&&t>=e.startRow},Zr=function(e,t){return t.column>=e.startCol&&t.column+t.colspan-1<=e.finishCol&&t.row>=e.startRow&&t.row+t.rowspan-1<=e.finishRow},Qr=function(e,t){for(var n=!0,r=g(Zr,t),o=t.startRow;o<=t.finishRow;o++)for(var i=t.startCol;i<=t.finishCol;i++)n=n&&B.getAt(e,o,i).exists(r);return n?w.some(t):w.none()},eo=function(e,t){return an(Math.min(e.row,t.row),Math.min(e.column,t.column),Math.max(e.row+e.rowspan-1,t.row+t.rowspan-1),Math.max(e.column+e.colspan-1,t.column+t.colspan-1))},to=function(e,t,n){var t=B.findItem(e,t,k),r=B.findItem(e,n,k);return t.bind(function(t){return r.map(function(e){return eo(t,e)})})},no=function(t,e,n){return to(t,e,n).bind(function(e){return Qr(t,e)})},ro=function(n,e,r,o){return B.findItem(n,e,k).bind(function(e){var t=0<r?e.row+e.rowspan-1:e.row,e=0<o?e.column+e.colspan-1:e.column;return B.getAt(n,t+r,e+o).map(function(e){return e.element})})},oo=function(t,e,n){return to(t,e,n).map(function(e){e=B.filterItems(t,g(Jr,e));return p(e,function(e){return e.element})})},io=function(e,t){return B.findItem(e,t,function(e,t){return Bt(t,e)}).map(function(e){return e.element})},uo=function(t,n,r){return N(t).bind(function(e){e=lo(e);return ro(e,t,n,r)})},ao=function(e,t,n){e=lo(e);return oo(e,t,n)},co=function(e,t,n,r,o){var i=lo(e),n=k(e,n)?w.some(t):io(i,t),u=k(e,o)?w.some(r):io(i,r);return n.bind(function(t){return u.bind(function(e){return oo(i,t,e)})})},so=function(e,t,n){e=lo(e);return no(e,t,n)},lo=B.fromTable,fo=function(t,n){bn(t).each(function(e){e.dom.insertBefore(n.dom,t.dom)})},mo=function(e,t){xn(e).fold(function(){bn(e).each(function(e){P(e,t)})},function(e){fo(e,t)})},go=function(t,n){Sn(t).fold(function(){P(t,n)},function(e){t.dom.insertBefore(n.dom,e.dom)})},P=function(e,t){e.dom.appendChild(t.dom)},po=function(e,t,n){Cn(e,n).fold(function(){P(e,t)},function(e){fo(e,t)})},ho=function(t,e){x(e,function(e){fo(t,e)})},vo=function(t,e){x(e,function(e){P(t,e)})},bo=function(e){e.dom.textContent="",x(l(e),function(e){I(e)})},I=function(e){e=e.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},yo=(Un=dn,Wn="text",{get:function(e){if(Un(e))return wo(e).getOr("");throw new Error("Can only get "+Wn+" value of a "+Wn+" node")},getOption:wo,set:function(e,t){if(!Un(e))throw new Error("Can only set raw "+Wn+" value of a "+Wn+" node");e.dom.nodeValue=t}});function wo(e){return Un(e)?w.from(e.dom.nodeValue):w.none()}function xo(e,t){return yo.set(e,t)}var Co=function(e){return yo.get(e)},So=function(e){return yo.getOption(e)},ko=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];function To(){return{up:m({selector:Xn,closest:_,predicate:$n,all:wn}),down:m({selector:Pn,predicate:Rn}),styles:m({get:gr,getRaw:hr,set:M,remove:vr}),attrs:m({get:tr,set:A,remove:D,copyTo:function(e,t){e=rr(e);Qn(t,e)}}),insert:m({before:fo,after:mo,afterAll:Vn,append:P,appendAll:vo,prepend:go,wrap:Hn}),remove:m({unwrap:jn,remove:I}),create:m({nu:S.fromTag,clone:function(e){return S.fromDom(e.dom.cloneNode(!1))},text:S.fromText}),query:m({comparePosition:function(e,t){return e.dom.compareDocumentPosition(t.dom)},prevSibling:ze,nextSibling:xn}),property:m({children:l,name:E,parent:bn,document:function(e){return vn(e).dom},isText:dn,isComment:Re,isElement:fn,isSpecial:function(e){e=E(e);return c(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],e)},getLanguage:function(e){return fn(e)?nr(e,"lang"):w.none()},getText:Co,setText:xo,isBoundary:function(e){return!!fn(e)&&("body"===E(e)||c(ko,E(e)))},isEmptyTag:function(e){return!!fn(e)&&c(["br","img","hr","input"],E(e))},isNonEditable:function(e){return fn(e)&&"false"===tr(e,"contenteditable")}}),eq:k,is:Pt}}function Oo(n,r,e,t){return e=r(n,e),le(t,function(e,t){t=r(n,t);return Uo(n,e,t)},e)}function Eo(n,r){function e(e){var t=r(e);return t<=0||null===t?(e=gr(e,n),parseFloat(e)||0):t}function o(n,e){return fe(e,function(e,t){t=gr(n,t),t=void 0===t?0:parseInt(t,10);return isNaN(t)?e:e+t},0)}return{set:function(e,t){if(!Y(t)&&!t.match(/^[0-9]+$/))throw new Error(n+".set accepts only positive integer values. Value was "+t);e=e.dom;lr(e)&&(e.style[n]=t+"px")},get:e,getOuter:e,aggregate:o,max:function(e,t,n){e=o(e,n);return e<t?t-e:0}}}function _o(){var e=Ct().browser;return e.isIE()||e.isEdge()}function Ao(e){return gr(e,"box-sizing")}function Do(e,t){var n=(n=e.dom).getBoundingClientRect().width||n.offsetWidth;return"border-box"===t?n:vi(e,n,"left","right")}function Mo(e){return"rtl"===gr(e,"direction")?"rtl":"ltr"}function No(n,r){return{left:n,top:r,translate:function(e,t){return No(n+e,r+t)}}}function Ro(e,t){return{row:e,y:t}}function zo(e,t){return{col:e,x:t}}function Bo(e){return Bi(e).left+wi(e)}function Po(e){return Bi(e).left}function Io(e,t){return zo(e,Po(t))}function Lo(e,t){return zo(e,Bo(t))}function Fo(e){return Bi(e).top}function Ho(e,t){return Ro(e,Fo(t))}function Vo(e,t){return Ro(e,Fo(t)+Di(t))}function jo(n,t,r){var e,o;return 0===r.length?[]:(e=p(r.slice(1),function(e,t){return e.map(function(e){return n(t,e)})}),o=r[r.length-1].map(function(e){return t(r.length-1,e)}),e.concat([o]))}var Uo=function(t,e,n){return e.bind(function(e){return n.filter(g(t.eq,e))})},Wo=function(e,t,n){return 0<n.length?Oo(e,t,n[0],n.slice(1)):w.none()},$o=function(t,e,n,r){void 0===r&&(r=y);function o(t){return ge(t,r).fold(function(){return t},function(e){return t.slice(0,e+1)})}var e=[e].concat(t.up().all(e)),n=[n].concat(t.up().all(n)),e=o(e),i=o(n),n=me(e,function(e){return f(i,g(t.eq,e))});return{firstpath:e,secondpath:i,shared:n}},qo=To(),Go=function(n,e){return Wo(qo,function(e,t){return n(t)},e)},Ko=function(e,t,n){return $o(qo,e,t,n)},Xo=function(e){return Xn(e,"table")},Yo=function(i,u,n){function a(t){return function(e){return void 0!==n&&n(e)||k(e,t)}}return k(i,u)?w.some({boxes:w.some([i]),start:i,finish:u}):Xo(i).bind(function(o){return Xo(u).bind(function(r){var e,t;return k(o,r)?w.some({boxes:ao(o,i,u),start:i,finish:u}):Bt(o,r)?(t=0<(e=zn(u,"td,th",a(o))).length?e[e.length-1]:u,w.some({boxes:co(o,i,o,u,r),start:i,finish:t})):Bt(r,o)?(t=0<(e=zn(i,"td,th",a(r))).length?e[e.length-1]:i,w.some({boxes:co(r,i,o,u,r),start:i,finish:t})):Ko(i,u).shared.bind(function(e){return _(e,"table",n).bind(function(e){var t=zn(u,"td,th",a(e)),t=0<t.length?t[t.length-1]:u,n=zn(i,"td,th",a(e)),n=0<n.length?n[n.length-1]:i;return w.some({boxes:co(e,i,o,u,r),start:n,finish:t})})})})})},Jo=function(e,t){e=Pn(e,t);return 0<e.length?w.some(e):w.none()},Zo=function(e,t){return me(e,function(e){return At(e,t)})},Qo=function(e,t,r){return Jn(e,t).bind(function(n){return Jn(e,r).bind(function(t){return Go(Xo,[n,t]).map(function(e){return{first:n,last:t,table:e}})})})},ei=function(t,n){return Xn(t,"table").bind(function(e){return Jn(e,n).bind(function(e){return Yo(e,t).bind(function(t){return t.boxes.map(function(e){return{boxes:e,start:t.start,finish:t.finish}})})})})},ti=function(e,t,n,r,o){return Zo(e,o).bind(function(e){return uo(e,t,n).bind(function(e){return ei(e,r)})})},ni=function(e,t){return Jo(e,t)},ri=function(i,e,t){return Qo(i,e,t).bind(function(n){function e(e){return k(i,e)}var t="thead,tfoot,tbody,table",r=Xn(n.first,t,e),o=Xn(n.last,t,e);return r.bind(function(t){return o.bind(function(e){return k(t,e)?so(n.table,n.first,n.last):w.none()})})})},et=function(u){if(!U(u))throw new Error("cases must be an array");if(0===u.length)throw new Error("there must be at least one case");var a=[],n={};return x(u,function(e,r){var t=It(e);if(1!==t.length)throw new Error("one and only one name per case");var o=t[0],i=e[o];if(void 0!==n[o])throw new Error("duplicate key detected:"+o);if("cata"===o)throw new Error("cannot have a case named cata (sorry)");if(!U(i))throw new Error("case arguments must be an array");a.push(o),n[o]=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=n.length;if(t!==i.length)throw new Error("Wrong number of arguments to case "+o+". Expected "+i.length+" ("+i+"), got "+t);return{fold:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(e.length!==u.length)throw new Error("Wrong number of arguments to fold. Expected "+u.length+", got "+e.length);return e[r].apply(null,n)},match:function(e){var t=It(e);if(a.length!==t.length)throw new Error("Wrong number of arguments to match. Expected: "+a.join(",")+"\nActual: "+t.join(","));if(he(a,function(e){return c(t,e)}))return e[o].apply(null,n);throw new Error("Not all branches were specified when using match. Specified: "+t.join(", ")+"\nRequired: "+a.join(", "))},log:function(e){console.log(e,{constructors:a,constructor:o,params:n})}}}}),n},Qe=et([{none:[]},{multiple:["elements"]},{single:["element"]}]),oi=function(e,t,n,r){return e.fold(t,n,r)},ii=Qe.none,ui=Qe.multiple,ai=Qe.single,ci=function(e,t,n){return{get:function(){return ni(e(),n).fold(function(){return t().fold(ii,ai)},function(e){return ui(e)})}}},Qe=tinymce.util.Tools.resolve("tinymce.PluginManager"),si=function(e,t){return S.fromDom(e.dom.cloneNode(t))},li=function(e){return si(e,!1)},fi=function(e){return si(e,!0)},di=function(e,t){t=S.fromTag(t),e=rr(e);return Qn(t,e),t},mi=function(e,t){t=di(e,t),e=l(fi(e));return vo(t,e),t},gi=function(e,t){var t=di(e,t),n=(fo(e,t),l(e));return vo(t,n),I(e),t},pi=function(e,t){return Ze(e).getOr(t)},hi=function(e,t,n){return pi(gr(e,t),n)},vi=function(e,t,n,r){return t-hi(e,"padding-"+n,0)-hi(e,"padding-"+r,0)-hi(e,"border-"+n+"-width",0)-hi(e,"border-"+r+"-width",0)},bi=Eo("width",function(e){return e.dom.offsetWidth}),yi=function(e){return bi.get(e)},wi=function(e){return bi.getOuter(e)},xi=function(e){return Do(e,"content-box")},Ci=function(e){return _o()?Do(e,Ao(e)):hi(e,"width",e.dom.offsetWidth)},Si=function(n,r){void 0===r&&(r=v);var e=n.grid,t=ae(e.columns,a),o=ae(e.rows,a);return p(t,function(t){return ki(function(){return b(o,function(e){return B.getAt(n,e,t).filter(function(e){return e.column===t}).toArray()})},function(e){return 1===e.colspan&&r(e.element)},function(){return B.getAt(n,0,t)})})},ki=function(e,t,n){var r=e();return me(r,t).orThunk(function(){return w.from(r[0]).orThunk(n)}).map(function(e){return e.element})},Ti=function(n){var e=n.grid,t=ae(e.rows,a),r=ae(e.columns,a);return p(t,function(t){return ki(function(){return b(r,function(e){return B.getAt(n,t,e).filter(function(e){return e.row===t}).fold(m([]),function(e){return[e]})})},function(e){return 1===e.rowspan},function(){return B.getAt(n,t,0)})})},Oi=function(t,n){var e,r;return n<0||n>=t.length-1?w.none():(e=t[n].fold(function(){var e=ve(t.slice(0,n));return ke(e,function(e,t){return e.map(function(e){return{value:e,delta:t+1}})})},function(e){return w.some({value:e,delta:0})}),r=t[n+1].fold(function(){var e=t.slice(n+1);return ke(e,function(e,t){return e.map(function(e){return{value:e,delta:t+1}})})},function(e){return w.some({value:e,delta:1})}),e.bind(function(n){return r.map(function(e){var t=e.delta+n.delta;return Math.abs(e.value-n.value)/t})}))},Ei=function(t,n){return function(e){return"rtl"===Mo(e)?n:t}},_i=Eo("height",function(e){var t=e.dom;return _n(e)?t.getBoundingClientRect().height:t.offsetHeight}),Ai=function(e){return _i.get(e)},Di=function(e){return _i.getOuter(e)},Mi=function(e){return _o()?(n=Ao(t=e),r=(r=t.dom).getBoundingClientRect().height||r.offsetHeight,"border-box"===n?r:vi(t,r,"top","bottom")):hi(e,"height",e.dom.offsetHeight);var t,n,r},Ni=No,Ri=function(e){e=e.getBoundingClientRect();return Ni(e.left,e.top)},zi=function(e,t){return void 0!==e?e:void 0!==t?t:0},Bi=function(e){var t,n,r=e.dom.ownerDocument,o=r.body,i=r.defaultView,r=r.documentElement;return o===e.dom?Ni(o.offsetLeft,o.offsetTop):(t=zi(null==i?void 0:i.pageYOffset,r.scrollTop),i=zi(null==i?void 0:i.pageXOffset,r.scrollLeft),n=zi(r.clientTop,o.clientTop),r=zi(r.clientLeft,o.clientLeft),Pi(e).translate(i-r,t-n))},Pi=function(e){var t=e.dom,n=t.ownerDocument.body;return n===t?Ni(n.offsetLeft,n.offsetTop):_n(e)?Ri(t):Ni(0,0)},Ii={delta:a,positions:function(e){return jo(Ho,Vo,e)},edge:Fo},Li=Ei({delta:a,edge:Po,positions:function(e){return jo(Io,Lo,e)}},{delta:function(e){return-e},edge:Bo,positions:function(e){return jo(Lo,Io,e)}}),Fi={delta:function(e,t){return Li(t).delta(e,t)},positions:function(e,t){return Li(t).positions(e,t)},edge:function(e){return Li(e).edge(e)}},Hi={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},Vi=(Cc=["Infinity",(Cc="[0-9]+")+"\\."+ji(Cc)+ji(t="[eE][+-]?[0-9]+"),"\\."+Cc+ji(t),Cc+ji(t)].join("|"),new RegExp("^("+("[+-]?(?:"+Cc+")")+")(.*)$"));function ji(e){return"(?:"+e+")?"}function Ui(e,t){M(e,"width",t+"px")}function Wi(e,t){M(e,"width",t+"%")}function $i(e){return Qu(e,yi,xi)+"%"}function qi(e,t,n){return xa(e,t,sa,function(e){return e.fold(function(){return n.minCellWidth()},function(e){return e/n.pixelWidth()*100})})}function Gi(n){var e=_a(n,yi),t=m(0);return{width:e,pixelWidth:e,getWidths:function(e,t){return ka(e,n,t)},getCellDelta:t,singleColumnWidth:m([0]),minCellWidth:t,setElementWidth:h,adjustTableWidth:h,isRelative:!0,label:"none"}}function Ki(r){return function(e,t){var n=E(e),n="col"===n||"colgroup"===n?N(n=e).bind(function(e){return ni(e,Tc.firstSelectedSelector)}).fold(m(n),function(e){return e[0]}):e;return _(n,r,t)}}function Xi(o){return function(e,t,n,r){return o(n)?(r=Math.max(r,e[t]-Math.abs(n)),r=Math.abs(r-e[t]),0<=n?r:-r):n}}function Yi(e,t,n){var e=n.substring(0,n.length-e.length),r=parseFloat(e);return e===r.toString()?t(r):rs.invalid(n)}function Ji(o,e,t){var i=B.fromTable(o),u=i.all,a=B.justCells(i),c=B.justColumns(i);e.each(function(e){var t=bs(e),n=yi(o),r=Sa(i,o),r=ss(r,n,e);B.hasColumns(i)?hs(r,c,t):ps(r,a,t),M(o,"width",e)}),t.each(function(e){var t=bs(e),n=Ai(o),r=Ea(i,o,Ii),r=ss(r,n,e);vs(r,u,a,t),M(o,"height",e)})}function Zi(t,e){0<(e=C(e,function(e){return!c(t,e)})).length&&_s(e)}function Qi(e){return Ns(Zi,e,{validate:X,label:"function"})}function eu(e,t,n,r,o,i,u){return{target:e,x:t,y:n,stop:r,prevent:o,kill:i,raw:u}}function tu(e){var t=e.replace(/\./g,"-");return{resolve:function(e){return t+"-"+e}}}function nu(o){function e(e,t){return w.from(tr(e,t))}function i(e,t){return Sr(e,t)-yr(e,"data-initial-"+t,0)}function t(e,t){l.trigger.startAdjust(),r.assign(e),A(e,"data-initial-"+t,Sr(e,t)),el(e,Ml),M(e,"opacity","0.2"),u.go(o.parent())}function n(e){return k(e,o.view())}var r=fl(),u=ul(r,{}),a=w.none(),c=(r.events.drag.bind(function(n){e(n.target,"data-row").each(function(e){var t=Sr(n.target,"top");M(n.target,"top",t+n.yDelta+"px")}),e(n.target,"data-column").each(function(e){var t=Sr(n.target,"left");M(n.target,"left",t+n.xDelta+"px")})}),u.events.stop.bind(function(){r.get().each(function(r){a.each(function(n){e(r,"data-row").each(function(e){var t=i(r,"top");D(r,"data-initial-top"),l.trigger.adjustHeight(n,t,parseInt(e,10))}),e(r,"data-column").each(function(e){var t=i(r,"left");D(r,"data-initial-left"),l.trigger.adjustWidth(n,t,parseInt(e,10))}),Tl(o,n)})})}),$s(o.parent(),"mousedown",function(e){Al(e.target)&&t(e.target,"top"),Dl(e.target)&&t(e.target,"left")})),s=$s(o.view(),"mouseover",function(e){var t;t=e.target,_(t,"table",n).filter(cl).fold(function(){_n(e.target)&&wl(o)},function(e){a=w.some(e),Tl(o,e)})}),l=ks({adjustHeight:Ss(["table","delta","row"]),adjustWidth:Ss(["table","delta","column"]),startAdjust:Ss([])});return{destroy:function(){c.unbind(),s.unbind(),u.destroy(),wl(o)},refresh:function(e){Tl(o,e)},on:u.on,off:u.off,hideBars:g(El,o),showBars:g(_l,o),events:l.registry}}function ru(e){D(e,"width")}function ou(e,t){return(e.property().isText(t)?e.property().getText(t):e.property().children(t)).length}function iu(e,t){var n,t=Lf(e,t,e.query().prevSibling).getOr(t);return!e.property().isText(t)&&0<(n=e.property().children(t)).length?iu(e,n[n.length-1]):If(t,ou(e,t))}function uu(){return{transformRow:Xf,transformCell:function(e,t,n){n=n(e.element,t),t="td"!==E(n)?gi(n,"td"):n;return O(t,e.isNew,e.isLocked)}}}function au(){return{transformRow:Xf,transformCell:Kf}}function cu(){return{transformRow:function(e,t){return Xf(e,"thead"===t?"tbody":t)},transformCell:Kf}}function su(o,e){function t(e,t){var n,r;0<e.length?(e=e,r=Qf(o,n=t),n=("colgroup"===n?u:i)(e),vo(r,n)):Yn(o,t).each(I)}var n=[],r=[],i=function(e){return p(e,function(e){e.isNew&&n.push(e.element);var t=e.element;return bo(t),x(e.cells,function(e){e.isNew&&r.push(e.element),Jf(e.element,"colspan",e.colspan,1),Jf(e.element,"rowspan",e.rowspan,1),P(t,e.element)}),t})},u=function(e){return b(e,function(e){return p(e.cells,function(e){return Jf(e.element,"span",e.colspan,1),e.element})})},a=[],c=[],s=[],l=[];return x(e,function(e){switch(e.section){case"thead":a.push(e);break;case"tbody":c.push(e);break;case"tfoot":s.push(e);break;case"colgroup":l.push(e)}}),t(l,"colgroup"),t(a,"thead"),t(c,"tbody"),t(s,"tfoot"),{newRows:n,newCells:r}}function e(s,t,l,f,d){return function(o,i,e,r,u){var a=B.fromTable(i),c=w.from(null==u?void 0:u.section).getOrThunk(Yf.fallback);return t(a,e).map(function(e){var t=ud(a,r,!1),t=s(t,e,k,d(r),c),n=Kr(t.grid);return{info:e,grid:ad(t.grid),cursor:t.cursor,lockedColumns:n}}).bind(function(e){var t=su(i,e.grid),n=w.from(null==u?void 0:u.sizing).getOrThunk(function(){return Ma.getTableSize(i)}),r=w.from(null==u?void 0:u.resize).getOrThunk(ts);return l(i,e.grid,e.info,{sizing:n,resize:r,section:c}),f(i),Tl(o,i),D(i,qr),0<e.lockedColumns.length&&A(i,qr,e.lockedColumns.join(",")),w.some({cursor:e.cursor,newRows:t.newRows,newCells:t.newCells})})}}function lu(e,t){return sd(e,t,v).map(function(e){return{cells:e,generators:t.generators,clipboard:t.clipboard}})}function fu(e,t){return t.mergable}function du(e,t){return t.unmergable}function mu(t,e){return he(e,function(e){return dd(t,e)})}function gu(n){return{isValue:v,isError:y,getOr:m(n),getOrThunk:m(n),getOrDie:m(n),or:function(e){return gu(n)},orThunk:function(e){return gu(n)},fold:function(e,t){return t(n)},map:function(e){return gu(e(n))},mapError:function(e){return gu(n)},each:function(e){e(n)},bind:function(e){return e(n)},exists:function(e){return e(n)},forall:function(e){return e(n)},toOptional:function(){return w.some(n)}}}function pu(n){return{isValue:y,isError:v,getOr:a,getOrThunk:function(e){return e()},getOrDie:function(){throw e=String(n),new Error(e);var e},or:a,orThunk:function(e){return e()},fold:function(e,t){return e(n)},map:function(e){return pu(n)},mapError:function(e){return pu(e(n))},each:h,bind:function(e){return pu(n)},exists:y,forall:v,toOptional:w.none}}function hu(n,e,t,r,o){vd(e,n,o,r.cell);var o=Cd(t,e),i=Ed(t,o,r),t=Cd(e,i),o=Ed(e,t,r);return p(o,function(e,t){return Lr(e,n,i[t].cells)})}function vu(e,t,n,r,o){bd(t,e,o,r.cell);var o=Kr(t),i=xd(t,n),i=d(d({},i),{colDelta:i.colDelta-o.length}),o=Ed(t,i,r),u=(i=z(o)).cols,i=i.rows,o=Kr(o),t=xd(n,t),t=d(d({},t),{colDelta:t.colDelta+o.length}),n=Od(n,r,o),o=Ed(n,t,r);return u.concat(i.slice(0,e)).concat(o).concat(i.slice(e,i.length))}function bu(e,n,t,r,o){var i=(e=z(e)).rows,e=e.cols,u=i.slice(0,n),a=i.slice(n),t=Nd(i[t],function(e,t){return 0<n&&n<i.length&&r(R(i[n-1],t),R(i[n],t))?Ur(i[n],t):O(o(e.element,r),!0,e.isLocked)},r,o);return e.concat(u).concat([t]).concat(a)}function yu(e,n,r,o,i){return p(e,function(e){var t=0<n&&n<Wr(e)&&o(R(e,n-1),R(e,n)),t=Rd(e,n,e.section,t,r,o,i);return Fr(e,n,t)})}function wu(e,t,n,r,o){var i=z(e).rows,t=b(t,function(e){return Wd(i,e,r)}),u=p(e,function(e){return Wf(e.cells)}),a=Ld(t,u),n=Vd(n,u);return Ud(e,t,r,o,jd,n,a)}function xu(e,t,n,r){var o=z(e).rows,t=p(t,function(e){return Ur(o[e.row],e.column)});return Ud(e,t,n,r,jd,w.none,v)}function Cu(e){return"tr"===E(e)||Kd(e)}function Su(e){return{element:e,colspan:yr(e,"colspan",1),rowspan:yr(e,"rowspan",1)}}function ku(e){return nr(e,"scope").map(function(e){return e.substr(0,3)})}function Tu(e){var o=function(e){return"br"===E(e)},i=function(e){return"li"===E(e)||$n(e,tm).isSome()},u=function(e){return xn(e).map(function(e){return!!em(e)||!!nm(e)&&"img"!==E(e)}).getOr(!1)},t=0===(t=b(e,function(e){var r,t=l(e);return he(t,function(e){return o(e)||dn(e)&&0===Co(e).trim().length})?[]:t.concat($a(r=e).bind(function(t){var n=u(t);return bn(t).map(function(e){return!0===n||i(e)||o(t)||em(e)&&!k(r,e)?[]:[S.fromTag("br")]})}).getOr([]))})).length?[S.fromTag("br")]:t;bo(e[0]),vo(e[0],t)}function Ou(e){0===Dr(e).length&&I(e)}function L(e,t,n){return t=um(e,t,n),om(e,t)}function Eu(e){return fe(e,function(e,t){return f(e,function(e){return e.row===t.row})?e:e.concat([t])},[]).sort(function(e,t){return e.row-t.row})}function _u(m,g){return function(e,t,n,r,o){var i,u,a,c,s,l,f=Eu(t),f=p(f,function(e){return e.row}),d=(e=e,f=f,i=m,d=g,u=n,n=r.replaceOrInit,a=o,e=z(e),r=e.cols,c=e.rows,e=c[f[0]],o=b(f,function(e){return $d(c,e,u)}),s=p(e.cells,function(e,t){return Wf(Wd(c,t,u))}),l=Te([],c,!0),x(f,function(e){l[e]=a.transformRow(c[e],i)}),f=r.concat(l),r=Id(e,s),e=Hd(d,s),Ud(f,o,u,n,a.transformCell,e,r));return L(d,t[0].row,t[0].column)}}function Au(e,t,n){return e=Ir(e,n.section),n=B.generate(e),ud(n,t,!0)}function Du(e,t,n,r){var o;t=t,r=r.sizing,t=B.generate(t),o=r.getWidths(t,r),Kc(t,o,r)}function Mu(e,t,n,r){return t=t,n=n,o=r.sizing,r=r.resize,t=B.generate(t),i=o.getWidths(t,o),u=o.pixelWidth(),r=r.calcRedestributedWidths(i,u,n.pixelDelta,o.isRelative),i=r.newSizes,u=r.delta,Kc(t,i,o),void o.adjustTableWidth(u);var o,i,u}function Nu(e,t){return f(t,function(e){return 0===e.column&&e.isLocked})}function Ru(t,e){return f(e,function(e){return e.column+e.colspan>=t.grid.columns&&e.isLocked})}function zu(e,t){var n=Si(e),e=qd(t);return fe(e,function(e,t){return e+n[t.column].map(wi).getOr(0)},0)}function Bu(n){return function(t,e){return ld(t,e).filter(function(e){return!(n?Nu:Ru)(t,e)}).map(function(e){return{details:e,pixelDelta:zu(t,e)}})}}function Pu(n){return function(t,e){return lu(t,e).filter(function(e){return!(n?Nu:Ru)(t,e.cells)})}}function Iu(i){return function(n,r){var o=n.dom;return{setAttrib:function(e,t){i&&!t||o.setAttrib(r,e,t)},setStyle:function(e,t){i&&!t||o.setStyle(r,e,t)},setFormat:function(e,t){i&&!t||(""===t?n.formatter.remove(e,{value:null},r,!0):n.formatter.apply(e,{value:t},r))}}}}function Lu(e,t,n,r){return me(e,function(e){return!q(n.formatter.matchNode(r,t+e))}).getOr("")}function Fu(e,t,n,r){return void 0===r&&(r=Hu),e.property().parent(t).map(function(e){return ev(e,r)})}function Hu(e,t,n,r){return void 0===r&&(r=tv),n.sibling(e,t).map(function(e){return ev(e,r)})}function Vu(e,t){return t=t,cv(lv,e,av(lv),t)}function ju(e,t){return t=t,sv(lv,e,av(lv),t)}function Uu(e){return _(e,"tr")}function Wu(e,t,n){return{left:e.left+t,top:e.top+n,right:e.right+t,bottom:e.bottom+n}}function $u(t,e,n){return qn(e,em).fold(y,function(e){return Nv(t,e).exists(function(e){return Bv(n,e)})})}function qu(t,n,e){var r,o=t.move(e,Rv),i=Lv(n,t,e,o,100).getOr(o);return e=i,o=n,((r=t).point(e)>o.getInnerHeight()?w.some(r.point(e)-o.getInnerHeight()):r.point(e)<0?w.some(-r.point(e)):w.none()).fold(function(){return n.situsFromPoint(i.left,t.point(i))},function(e){return n.scrollBy(0,e),n.situsFromPoint(i.left,t.point(i)-e)})}function Gu(t){return function(e){return e===t}}var Ku=function(t,e){return f(e,function(e){return f(Hi[e],function(e){return t===e})})},Xu=function(e,n){return w.from(Vi.exec(e)).bind(function(e){var t=Number(e[1]),e=e[2];return Ku(e,n)?w.some({value:t,unit:e}):w.none()})},Yu=/(\d+(\.\d+)?)%/,Ju=/(\d+(\.\d+)?)px|em/,Zu=pn("col"),Qu=function(e,t,n){var r=yn(e).getOrThunk(function(){return Dn(hn(e))});return t(e)/n(r)*100},ea=function(e,t){M(e,"height",t+"px")},ta=function(e){return Mi(e)+"px"},na=function(e,t,n,r){var o=N(e).map(function(e){e=n(e);return Math.floor(t/100*e)}).getOr(t);return r(e,o),o},ra=function(e,t,n,r){var o=parseFloat(e);return Ke(e,"%")&&"table"!==E(t)?na(t,o,n,r):o},oa=function(e){var t=ta(e);return t?ra(t,e,Ai,ea):Ai(e)},ia=function(e,t,n){return n(e)/wr(e,t)},ua=function(e,t){return hr(e,t).orThunk(function(){return nr(e,t).map(function(e){return e+"px"})})},aa=function(e){return ua(e,"width")},ca=function(e){return ua(e,"height")},sa=function(e){return Qu(e,yi,xi)},la=function(e){return(Zu(e)?yi:Ci)(e)},fa=function(e){return ia(e,"rowspan",oa)},da=function(e){return aa(e).bind(function(e){return Xu(e,["fixed","relative","empty"])})},ma=function(e,t,n){M(e,"width",t+n)},ga=m(Yu),pa=pn("col"),ha=function(e){return aa(e).getOrThunk(function(){return la(e)+"px"})},va=function(e){return ca(e).getOrThunk(function(){return fa(e)+"px"})},ba=function(e){return p(B.justColumns(e),function(e){return w.from(e.element)})},ya=function(e){var t=Ct().browser,t=t.isChrome()||t.isFirefox();return!pa(e)||t},wa=function(e,t,n,r,o,i){return e.filter(r).fold(function(){return i(Oi(n,t))},function(e){return o(e)})},xa=function(e,t,n,r){var o=Si(e),e=B.hasColumns(e)?ba(e):o,i=[w.some(Fi.edge(t))].concat(p(Fi.positions(o,t),function(e){return e.map(function(e){return e.x})})),u=Q(xr);return p(e,function(e,t){return wa(e,t,i,u,function(e){return ya(e)?n(e):(e=ar(o[t],a),wa(e,t,i,u,function(e){return r(w.some(yi(e)))},r))},r)})},Ca=function(e){return e.map(function(e){return e+"px"}).getOr("")},Sa=function(e,t){return xa(e,t,ha,Ca)},ka=function(e,t,n){return xa(e,t,la,function(e){return e.getOrThunk(n.minCellWidth)})},Ta=function(e,t,n,r,o){var e=Ti(e),i=[w.some(n.edge(t))].concat(p(n.positions(e,t),function(e){return e.map(function(e){return e.y})}));return p(e,function(e,t){return wa(e,t,i,Q(Cr),r,o)})},Oa=function(e,t,n){return Ta(e,t,n,fa,function(e){return e.getOrThunk(Tr)})},Ea=function(e,t,n){return Ta(e,t,n,va,Ca)},_a=function(e,t){return function(){return _n(e)?t(e):parseFloat(hr(e,"width").getOr("0"))}},Aa=function(n){var r=_a(n,function(e){return parseFloat($i(e))}),t=_a(n,yi);return{width:r,pixelWidth:t,getWidths:function(e,t){return qi(e,n,t)},getCellDelta:function(e){return e/t()*100},singleColumnWidth:function(e,t){return[100-e]},minCellWidth:function(){return kr()/t()*100},setElementWidth:Wi,adjustTableWidth:function(e){var t=r();Wi(n,t+e/100*t)},isRelative:!0,label:"percent"}},Da=function(n){var t=_a(n,yi);return{width:t,pixelWidth:t,getWidths:function(e,t){return ka(e,n,t)},getCellDelta:a,singleColumnWidth:function(e,t){return[Math.max(kr(),e+t)-e]},minCellWidth:kr,setElementWidth:Ui,adjustTableWidth:function(e){e=t()+e;Ui(n,e)},isRelative:!1,label:"pixel"}},Ma={getTableSize:function(n){return aa(n).fold(function(){return Gi(n)},function(e){return t=n,e=e,(null!==ga().exec(e)?Aa:Da)(t);var t})},pixelSize:Da,percentageSize:Aa,noneSize:Gi},Na=function(e,t,n,r,o,i){return{minRow:e,minCol:t,maxRow:n,maxCol:r,allCells:o,selectedCells:i}},Ra=function(e,o){var t=e.grid.columns,i=e.grid.rows,u=t,a=0,c=0,s=[],l=[];return T(e.access,function(e){var t,n,r;s.push(e),o(e)&&(l.push(e),n=(t=e.row)+e.rowspan-1,e=(r=e.column)+e.colspan-1,t<i?i=t:a<n&&(a=n),r<u?u=r:c<e&&(c=e))}),Na(i,u,a,c,s,l)},za=function(e,t,n){e=e[n].element,n=S.fromTag("td");P(n,S.fromTag("br")),(t?P:go)(e,n)},Ba=function(e,t,n,r){for(var o=t.grid.columns,i=t.grid.rows,u=0;u<i;u++)for(var a=!1,c=0;c<o;c++)u<n.minRow||u>n.maxRow||c<n.minCol||c>n.maxCol||(B.getAt(t,u,c).filter(r).isNone()?za(e,a,u):a=!0)},Pa=function(e,t,n,r){T(n.columns,function(e){(e.column<t.minCol||e.column>t.maxCol)&&I(e.element)});n=C(Or(e,"tr"),function(e){return 0===e.dom.childElementCount});x(n,I),t.minCol!==t.maxCol&&t.minRow!==t.maxRow||x(Or(e,"th,td"),function(e){D(e,"rowspan"),D(e,"colspan")}),D(e,qr),D(e,"data-snooker-col-series"),Ma.getTableSize(e).adjustTableWidth(r)},Ia=function(e,t,n,r){return 0===r.minCol&&t.grid.columns===r.maxCol+1?0:(t=ka(t,e,n),e=fe(t,function(e,t){return e+t},0),t=fe(t.slice(r.minCol,r.maxCol+1),function(e,t){return e+t},0)/e*n.pixelWidth()-n.pixelWidth(),n.getCellDelta(t))},La=function(e,t){function n(e){return At(e.element,t)}var r=fi(e),o=Pr(r),i=Ma.getTableSize(e),u=B.generate(o),a=Ra(u,n),c="th:not("+t+"),td:not("+t+")",s=Er(r,"th,td",function(e){return At(e,c)}),s=(x(s,I),Ba(o,u,a,n),B.fromTable(e)),o=Ia(e,s,i,a);return Pa(r,a,u,o),r},Fa="",Ha=function(e){return"img"===E(e)?1:So(e).fold(function(){return l(e).length},function(e){return e.length})},Va=function(e){return So(e).filter(function(e){return 0!==e.trim().length||-1<e.indexOf(Fa)}).isSome()},ja=["img","br"],Ua=function(e){return Va(e)||c(ja,E(e))},Wa=function(e){return Kn(e,Ua)},$a=function(e){return qa(e,Ua)},qa=function(e,o){function i(e){for(var t=l(e),n=t.length-1;0<=n;n--){var r=t[n];if(o(r))return w.some(r);r=i(r);if(r.isSome())return r}return w.none()}return i(e)},Ga={scope:["row","col"]},Ka=function(t){return function(){var e=S.fromTag("td",t.dom);return P(e,S.fromTag("br",t.dom)),e}},Xa=function(e){return function(){return S.fromTag("col",e.dom)}},Ya=function(e){return function(){return S.fromTag("colgroup",e.dom)}},Ja=function(e){return function(){return S.fromTag("tr",e.dom)}},Za=function(e,t,n){var r=mi(e,t);return T(n,function(e,t){null===e?D(r,t):A(r,t,e)}),r},Qa=function(e){return e},ec=function(n,r,o){return Wa(n).map(function(e){var t=o.join(","),e=zn(e,t,function(e){return k(e,n)});return le(e,function(e,t){t=li(t);return D(t,"contenteditable"),P(e,t),t},r)}).getOr(r)},tc=function(e,r){T(Ga,function(t,n){return nr(e,n).filter(function(e){return c(t,e)}).each(function(e){return A(r,n,e)})})},nc=function(r,o,i){function u(e,t){br(e.element,t),vr(t,"height"),1!==e.colspan&&vr(t,"width")}return{col:function(e){var t=S.fromTag(E(e.element),o.dom);return u(e,t),r(e.element,t),t},colgroup:Ya(o),row:Ja(o),cell:function(e){var t=S.fromTag(E(e.element),o.dom),n=i.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),n=0<n.length?ec(e.element,t,n):t;return P(n,S.fromTag("br")),u(e,t),tc(e.element,t),r(e.element,t),t},replace:Za,colGap:Xa(o),gap:Ka(o)}},rc=function(e){return{col:Xa(e),colgroup:Ya(e),row:Ja(e),cell:Ka(e),replace:Qa,colGap:Xa(e),gap:Ka(e)}},oc=function(e,t){t=(t||document).createElement("div");return t.innerHTML=e,l(S.fromDom(t))},ic=function(e){return p(e,S.fromDom)},uc=function(e){return e.nodeName.toLowerCase()},ac=function(e){return S.fromDom(e.getBody())},cc=function(e){return e.getBoundingClientRect().width},sc=function(e){return e.getBoundingClientRect().height},lc=function(t){return function(e){return k(e,ac(t))}},fc=function(e){return e?e.replace(/px$/,""):""},dc=function(e){return/^\d+(\.\d+)?$/.test(e)?e+"px":e},mc=function(e){D(e,"data-mce-style");function t(e){return D(e,"data-mce-style")}x(Dr(e),t),x(Mr(e),t),x(Nr(e),t)},gc=function(e,t){e=e.dom.getStyle(t,"width")||e.dom.getAttrib(t,"width");return w.from(e).filter(Ye)},pc=function(e){return/^(\d+(\.\d+)?)%$/.test(e)},hc=function(e){return/^(\d+(\.\d+)?)px$/.test(e)},vc=function(e){return S.fromDom(e.selection.getStart())},bc=function(e){return S.fromDom(e.selection.getEnd())},yc=function(e){return oi(e.get(),m([]),a,ye)},wc=function(e){function t(e,t){return nr(e,t).exists(function(e){return 1<parseInt(e,10)})}e=yc(e);return 0<e.length&&he(e,function(e){return t(e,"rowspan")||t(e,"colspan")})?w.some(e):w.none()},xc=function(e,t,n){return oi(t.get(),w.none,function(t){return t.length<=1?w.none():ri(e,n.firstSelectedSelector,n.lastSelectedSelector).map(function(e){return{bounds:e,cells:t}})},w.none)},t="data-mce-selected",Cc="data-mce-first-selected",Sc="data-mce-last-selected",kc="[data-mce-selected]",Tc={selected:t,selectedSelector:"td[data-mce-selected],th[data-mce-selected]",firstSelected:Cc,firstSelectedSelector:"td[data-mce-first-selected],th[data-mce-first-selected]",lastSelected:Sc,lastSelectedSelector:"td[data-mce-last-selected],th[data-mce-last-selected]"},Oc=function(e){return{element:e,mergable:w.none(),unmergable:w.none(),selection:[e]}},Ec=function(e,t,n){return{element:n,mergable:xc(t,e,Tc),unmergable:wc(e),selection:yc(e)}},_c=function(e,t,n){return{element:e,clipboard:t,generators:n}},Ac=function(e,t,n,r){return{selection:yc(e),clipboard:n,generators:r}},Dc=Ki("th,td,caption"),Mc=Ki("th,td"),Nc=function(e){return yc(e)},Rc=function(e,n){var e=Mc(e),t=e.bind(function(e){return N(e)}).map(function(e){return Nr(e)});return ur(e,t,function(t,e){return C(e,function(e){return f(ic(e.dom.cells),function(e){return"1"===tr(e,n)||k(e,t)})})}).getOr([])},zc=function(e){return N(e[0]).map(function(e){e=La(e,kc);return mc(e),[e]})},Bc=function(t,e){return p(e,function(e){return t.selection.serializer.serialize(e.dom,{})}).join("")},Pc=function(e){return p(e,function(e){return e.dom.innerText}).join("")},Ic=function(i,n,u){i.on("BeforeGetContent",function(t){!0===t.selection&&oi(n.get(),h,function(e){t.preventDefault(),zc(e).each(function(e){t.content="text"===t.format?Pc(e):Bc(i,e)})},h)}),i.on("BeforeSetContent",function(o){var e;!0===o.selection&&!0===o.paste&&(e=Nc(n),Ce(e).each(function(r){N(r).each(function(e){var t=C(oc(o.content),function(e){return"meta"!==E(e)}),n=pn("table");1===t.length&&n(t[0])&&(o.preventDefault(),n=S.fromDom(i.getDoc()),n=rc(n),t=_c(r,t[0],n),u.pasteCells(e,t).each(function(){i.focus()}))})}))})},t=et([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]),Lc=d({},t),Fc=function(e,t){return 0===e.length?Lc.none():1===e.length?Lc.only(0):0===t?Lc.left(0,1):t===e.length-1?Lc.right(t-1,t):0<t&&t<e.length-1?Lc.middle(t-1,t,t+1):Lc.none()},Hc=function(e,t,r,o,i){var u=e.slice(0),e=Fc(e,t),t=m(p(u,m(0)));return e.fold(t,function(e){return o.singleColumnWidth(u[e],r)},function(e,t){return i.calcLeftEdgeDeltas(u,e,t,r,o.minCellWidth(),o.isRelative)},function(e,t,n){return i.calcMiddleDeltas(u,e,t,n,r,o.minCellWidth(),o.isRelative)},function(e,t){return i.calcRightEdgeDeltas(u,e,t,r,o.minCellWidth(),o.isRelative)})},Vc=function(e,t,n){for(var r=0,o=e;o<t;o++)r+=void 0!==n[o]?n[o]:0;return r},jc=function(e,n){e=B.justCells(e);return p(e,function(e){var t=Vc(e.column,e.column+e.colspan,n);return{element:e.element,width:t,colspan:e.colspan}})},Uc=function(e,n){e=B.justColumns(e);return p(e,function(e,t){return{element:e.element,width:n[t],colspan:e.colspan}})},Wc=function(e,n){e=B.justCells(e);return p(e,function(e){var t=Vc(e.row,e.row+e.rowspan,n);return{element:e.element,height:t,rowspan:e.rowspan}})},$c=function(e,n){return p(e.all,function(e,t){return{element:e.element,height:n[t]}})},qc=function(e){return le(e,function(e,t){return e+t},0)},Gc=function(e,t){return(B.hasColumns(e)?Uc:jc)(e,t)},Kc=function(e,t,n){e=Gc(e,t);x(e,function(e){n.setElementWidth(e.element,e.width)})},Xc=function(e,t,n,r,o){var e=B.fromTable(e),t=o.getCellDelta(t),i=o.getWidths(e,o),u=n===e.grid.columns-1,t=r.clampTableDelta(i,n,t,o.minCellWidth(),u),n=Hc(i,n,t,o,r),n=p(n,function(e,t){return e+i[t]});Kc(e,n,o),r.resizeTable(o.adjustTableWidth,t,u)},Yc=function(e){return p(e,m(0))},Jc=function(e,t,n,r,o){return o(e.slice(0,t)).concat(r).concat(o(e.slice(n)))},Zc=Xi(function(e){return e<0}),Qc=Xi(v),es=function(){function u(e,n,t,r){var o=(100+t)/100,i=Math.max(r,(e[n]+t)/o);return p(e,function(e,t){return(t===n?i:e/o)-e})}function a(e,t,n,r,o,i){return i?u(e,t,r,o):(i=n,t=Zc(n=e,e=t,t=r,o),Jc(n,e,i+1,[t,0],Yc))}return{resizeTable:function(e,t){return e(t)},clampTableDelta:Zc,calcLeftEdgeDeltas:a,calcMiddleDeltas:function(e,t,n,r,o,i,u){return a(e,n,r,o,i,u)},calcRightEdgeDeltas:function(e,t,n,r,o,i){return i?u(e,n,r,o):(i=Zc(e,n,r,o),Yc(e.slice(0,n)).concat([i]))},calcRedestributedWidths:function(e,t,n,r){var o;return r?(o=(t+n)/t,r=p(e,function(e){return e/o}),{delta:100*o-100,newSizes:r}):{delta:n,newSizes:e}}}},ts=function(){function u(e,t,n,r,o){return r=Qc(e,0<=r?n:t,r,o),Jc(e,t,n+1,[r,-r],Yc)}return{resizeTable:function(e,t,n){n&&e(t)},clampTableDelta:function(e,t,n,r,o){return o?0<=n?n:(o=fe(e,function(e,t){return e+t-r},0),Math.max(-o,n)):Zc(e,t,n,r)},calcLeftEdgeDeltas:u,calcMiddleDeltas:function(e,t,n,r,o,i){return u(e,n,r,o,i)},calcRightEdgeDeltas:function(e,t,n,r,o,i){return i?Yc(e):(i=r/e.length,p(e,m(i)))},calcRedestributedWidths:function(e,t,n,r){return{delta:0,newSizes:e}}}},ns={only:function(e,t){var n=w.from(e.dom.documentElement).map(S.fromDom).getOr(e);return{parent:m(n),view:m(e),origin:m(Ni(0,0)),isResizable:t}},detached:function(e,t,n){return{parent:m(t),view:m(e),origin:function(){return Bi(t)},isResizable:n}},body:function(e,t,n){return{parent:m(t),view:m(e),origin:m(Ni(0,0)),isResizable:n}}},rs=et([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),os=d(d({},rs),{from:function(e){return Ke(e,"%")?Yi("%",rs.percent,e):Ke(e,"px")?Yi("px",rs.pixels,e):rs.invalid(e)}}),is=function(e,t){return p(e,function(e){return os.from(e).fold(function(){return e},function(e){return e/t*100+"%"},function(e){return e+"%"})})},us=function(e,t,n){var r=n/t;return p(e,function(e){return os.from(e).fold(function(){return e},function(e){return e*r+"px"},function(e){return e/100*n+"px"})})},as=function(e,t){e=e.fold(function(){return m("")},function(e){return m(e/t+"px")},function(){return m(100/t+"%")});return ae(t,e)},cs=function(e,t,n){return e.fold(function(){return t},function(e){return us(t,n,e)},function(e){return is(t,n)})},ss=function(e,t,n){n=os.from(n),n=he(e,function(e){return"0px"===e})?as(n,e.length):cs(n,e,t);return ms(n)},ls=function(e,t){return 0===e.length?t:le(e,function(e,t){return os.from(t).fold(m(0),a,a)+e},0)},fs=function(e,t){var n=Math.floor(e);return{value:n+t,remainder:e-n}},ds=function(e,t){return os.from(e).fold(m(e),function(e){return e+t+"px"},function(e){return e+t+"%"})},ms=function(e){var t;return 0===e.length?e:(t=(e=le(e,function(e,t){var n=os.from(t).fold(function(){return{value:t,remainder:0}},function(e){return fs(e,"px")},function(e){return{value:e+"%",remainder:0}});return{output:[n.value].concat(e.output),remainder:e.remainder+n.remainder}},{output:[],remainder:0})).output).slice(0,t.length-1).concat([ds(t[t.length-1],Math.round(e.remainder))])},gs=os.from,ps=function(n,e,r){x(e,function(e){var t=n.slice(e.column,e.colspan+e.column),t=ls(t,kr());M(e.element,"width",t+r)})},hs=function(n,e,r){x(e,function(e,t){t=ls([n[t]],kr());M(e.element,"width",t+r)})},vs=function(n,e,t,r){x(t,function(e){var t=n.slice(e.row,e.rowspan+e.row),t=ls(t,Tr());M(e.element,"height",t+r)}),x(e,function(e,t){M(e.element,"height",n[t])})},bs=function(e){return gs(e).fold(m("px"),m("px"),m("%"))},ys=function(e){return aa(e).exists(function(e){return Yu.test(e)})},ws=function(e){return aa(e).exists(function(e){return Ju.test(e)})},xs=function(e){return aa(e).isNone()},Cs=function(e){return B.fromTable(e).grid},Ss=function(t){var o=[];return{bind:function(e){if(void 0===e)throw new Error("Event bind error: undefined handler");o.push(e)},unbind:function(t){o=C(o,function(e){return e!==t})},trigger:function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var r={};x(t,function(e,t){r[e]=n[t]}),x(o,function(e){e(r)})}}},ks=function(e){return{registry:Ft(e,function(e){return{bind:e.bind,unbind:e.unbind}}),trigger:Ft(e,function(e){return e.trigger})}},Ts=function(n,r){function o(){W(i)||(clearTimeout(i),i=null)}var i=null;return{cancel:o,throttle:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];o(),i=setTimeout(function(){i=null,n.apply(null,e)},r)}}},Os=function(e){return e.slice(0).sort()},Es=function(e,t){throw new Error("All required keys ("+Os(e).join(", ")+") were not specified. Specified keys were: "+Os(t).join(", ")+".")},_s=function(e){throw new Error("Unsupported keys for object: "+Os(e).join(", "))},As=function(t,e){if(!U(e))throw new Error("The "+t+" fields must be an array. Was: "+e+".");x(e,function(e){if(!V(e))throw new Error("The value "+e+" in the "+t+" fields was not a string.")})},Ds=function(e,t){throw new Error("All values need to be of type: "+t+". Keys ("+Os(e).join(", ")+") were not.")},Ms=function(e){var n=Os(e);me(n,function(e,t){return t<n.length-1&&e===n[t+1]}).each(function(e){throw new Error("The field: "+e+" occurs more than once in the combined fields: ["+n.join(", ")+"].")})},Ns=function(r,o,i){if(0===o.length)throw new Error("You must specify at least one required field.");return As("required",o),Ms(o),function(t){var n=It(t),e=(he(o,function(e){return c(n,e)})||Es(o,n),r(o,n),C(o,function(e){return!i.validate(t[e],e)}));return 0<e.length&&Ds(e,i.label),t}},Cc=Qi(["compare","extract","mutate","sink"]),Rs=Qi(["element","start","stop","destroy"]),zs=Qi(["forceDrop","drop","move","delayDrop"]),Bs=function(){var o=w.none(),i=ks({move:Ss(["info"])});return{onEvent:function(e,r){r.extract(e).each(function(e){var t,n;t=r,n=e,e=o.map(function(e){return t.compare(e,n)}),o=w.some(n),e.each(function(e){i.trigger.move(e)})})},reset:function(){o=w.none()},events:i.registry}},Ps=function(){var e=ks({move:Ss(["info"])});return{onEvent:h,reset:h,events:e.registry}},Is=function(){var e=Ps(),t=Bs(),n=e;return{on:function(){n.reset(),n=t},off:function(){n.reset(),n=e},isOn:function(){return n===t},onEvent:function(e,t){n.onEvent(e,t)},events:t.events}},Ls=function(t,n,e){function r(){s.stop(),a.isOn()&&(a.off(),u.trigger.stop())}function o(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];i&&n.apply(null,e)}}var i=!1,u=ks({start:Ss([]),stop:Ss([])}),a=Is(),c=Ts(r,200),s=(a.events.move.bind(function(e){n.mutate(t,e.info)}),n.sink(zs({forceDrop:r,drop:o(r),move:o(function(e){c.cancel(),a.onEvent(e,n)}),delayDrop:o(c.throttle)}),e));return{element:s.element,go:function(e){s.start(e),a.on(),u.trigger.start()},on:function(){i=!0},off:function(){i=!1},destroy:function(){s.destroy()},events:u.registry}},Fs=function(e){function t(){return e.stopPropagation()}function n(){return e.preventDefault()}var r=S.fromDom(Ie(e).getOr(e.target)),o=u(n,t);return eu(r,e.clientX,e.clientY,t,n,o,e)},Hs=function(t,n){return function(e){t(e)&&n(Fs(e))}},Vs=function(e,t,n,r,o){n=Hs(n,r);return e.dom.addEventListener(t,n,o),{unbind:g(Us,e,t,n,o)}},js=function(e,t,n,r){return Vs(e,t,n,r,!1)},Us=function(e,t,n,r){e.dom.removeEventListener(t,n,r)},Ws=v,$s=function(e,t,n){return js(e,t,Ws,n)},qs=Fs,Gs=function(e,t){e=tr(e,t);return void 0===e||""===e?[]:e.split(" ")},Ks=function(e,t,n){n=Gs(e,t).concat([n]);return A(e,t,n.join(" ")),!0},Xs=function(e,t,n){var r=C(Gs(e,t),function(e){return e!==n});return 0<r.length?A(e,t,r.join(" ")):D(e,t),!1},Ys=function(e){return void 0!==e.dom.classList},Js=function(e){return Gs(e,"class")},Zs=function(e,t){return Ks(e,"class",t)},Qs=function(e,t){return Xs(e,"class",t)},el=function(e,t){Ys(e)?e.dom.classList.add(t):Zs(e,t)},tl=function(e){0===(Ys(e)?e.dom.classList:Js(e)).length&&D(e,"class")},nl=function(e,t){Ys(e)?e.dom.classList.remove(t):Qs(e,t),tl(e)},rl=function(e,t){return Ys(e)&&e.dom.classList.contains(t)},ol=tu("ephox-dragster").resolve,il=Cc({compare:function(e,t){return Ni(t.left-e.left,t.top-e.top)},extract:function(e){return w.some(Ni(e.x,e.y))},sink:function(e,t){var n=function(e){var e=d({layerClass:ol("blocker")},e),t=S.fromTag("div");A(t,"role","presentation"),mr(t,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),el(t,ol("blocker")),el(t,e.layerClass);return{element:m(t),destroy:function(){I(t)}}}(t),r=$s(n.element(),"mousedown",e.forceDrop),o=$s(n.element(),"mouseup",e.drop),i=$s(n.element(),"mousemove",e.move),u=$s(n.element(),"mouseout",e.delayDrop);return Rs({element:n.element,start:function(e){P(e,n.element())},stop:function(){I(n.element())},destroy:function(){n.destroy(),o.unbind(),i.unbind(),u.unbind(),r.unbind()}})},mutate:function(e,t){e.mutate(t.left,t.top)}}),ul=function(e,t){var n=void 0!==(t=void 0===t?{}:t).mode?t.mode:il;return Ls(e,n,t)},al=function(e){return _(e,"[contenteditable]")},cl=function(e,t){return void 0===t&&(t=!1),!Ct().browser.isIE()&&_n(e)?e.dom.isContentEditable:al(e).fold(m(t),function(e){return"true"===sl(e)})},sl=function(e){return e.dom.contentEditable},Sc=tu("ephox-snooker").resolve,ll=function(){var n=ks({drag:Ss(["xDelta","yDelta"])});return{mutate:function(e,t){n.trigger.drag(e,t)},events:n.registry}},fl=function(){var n=ks({drag:Ss(["xDelta","yDelta","target"])}),r=w.none(),e=ll();e.events.drag.bind(function(t){r.each(function(e){n.trigger.drag(t.xDelta,t.yDelta,e)})});return{assign:function(e){r=w.some(e)},get:function(){return r},mutate:e.mutate,events:n.registry}},dl=function(e,t,n,r,o){var i=S.fromTag("div");return mr(i,{position:"absolute",left:t-r/2+"px",top:n+"px",height:o+"px",width:r+"px"}),Qn(i,{"data-column":e,role:"presentation"}),i},ml=function(e,t,n,r,o){var i=S.fromTag("div");return mr(i,{position:"absolute",left:t+"px",top:n-o/2+"px",height:o+"px",width:r+"px"}),Qn(i,{"data-row":e,role:"presentation"}),i},gl=Sc("resizer-bar"),pl=Sc("resizer-rows"),hl=Sc("resizer-cols"),vl=7,bl=function(e,n){return b(e.all,function(e,t){return n(e.element)?[t]:[]})},yl=function(n,r){var t=[];return ae(n.grid.columns,function(e){B.getColumnAt(n,e).map(function(e){return e.element}).forall(r)&&t.push(e)}),C(t,function(t){var e=B.filterItems(n,function(e){return e.column===t});return he(e,function(e){return r(e.element)})})},wl=function(e){e=Pn(e.parent(),"."+gl);x(e,I)},xl=function(t,e,n){var r=t.origin();x(e,function(e){e.each(function(e){e=n(r,e);el(e,gl),P(t.parent(),e)})})},Cl=function(e,t,n,r){xl(e,t,function(e,t){t=dl(t.col,t.x-e.left,n.top-e.top,vl,r);return el(t,hl),t})},Sl=function(e,t,n,r){xl(e,t,function(e,t){t=ml(t.row,n.left-e.left,t.y-e.top,r,vl);return el(t,pl),t})},kl=function(e,t,n,r,o){var i=Bi(n),u=t.isResizable,r=0<r.length?Ii.positions(r,n):[],a=0<r.length?bl(e,u):[],r=C(r,function(e,t){return f(a,function(e){return t===e})}),r=(Sl(t,r,i,wi(n)),0<o.length?Fi.positions(o,n):[]),c=0<r.length?yl(e,u):[],o=C(r,function(e,t){return f(c,function(e){return t===e})});Cl(t,o,i,Di(n))},Tl=function(e,t){var n,r,o;wl(e),e.isResizable(t)&&(n=B.fromTable(t),r=Ti(n),o=Si(n),kl(n,e,t,r,o))},Ol=function(e,t){e=Pn(e.parent(),"."+gl);x(e,t)},El=function(e){Ol(e,function(e){M(e,"display","none")})},_l=function(e){Ol(e,function(e){M(e,"display","block")})},Al=function(e){return rl(e,pl)},Dl=function(e){return rl(e,hl)},Ml=Sc("resizer-bar-dragging"),Nl={create:function(e,o,i){var a=Ii,u=Fi,e=nu(e),c=ks({beforeResize:Ss(["table","type"]),afterResize:Ss(["table","type"]),startDrag:Ss([])});return e.events.adjustHeight.bind(function(e){var t,n,r,o,i=e.table,u=(c.trigger.beforeResize(i,"row"),a.delta(e.delta,i));t=i,n=u,r=e.row,u=a,e=B.fromTable(t),u=Oa(e,t,u),u=p(u,function(e,t){return r===t?Math.max(n+e,Tr()):e}),o=Wc(e,u),e=$c(e,u),x(e,function(e){ea(e.element,e.height)}),x(o,function(e){ea(e.element,e.height)}),e=qc(u),ea(t,e),c.trigger.afterResize(i,"row")}),e.events.startAdjust.bind(function(e){c.trigger.startDrag()}),e.events.adjustWidth.bind(function(e){var t=e.table,n=(c.trigger.beforeResize(t,"col"),u.delta(e.delta,t)),r=i(t);Xc(t,n,e.column,o,r),c.trigger.afterResize(t,"col")}),{on:e.on,off:e.off,hideBars:e.hideBars,showBars:e.showBars,destroy:e.destroy,events:c.registry}}},Rl=function(e,t){return e.fire("newrow",{node:t})},zl=function(e,t){return e.fire("newcell",{node:t})},Bl=function(e,t,n,r,o){e.fire("ObjectResizeStart",{target:t,width:n,height:r,origin:o})},Pl=function(e,t,n,r,o){e.fire("ObjectResized",{target:t,width:n,height:r,origin:o})},Il=function(e,t,n,r,o){e.fire("TableSelectionChange",{cells:t,start:n,finish:r,otherCells:o})},Ll=function(e){e.fire("TableSelectionClear")},Fl=function(e,t,n){e.fire("TableModified",d(d({},n),{table:t}))},Hl={structure:!1,style:!0},F={structure:!0,style:!1},Vl={structure:!0,style:!0},jl="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol",Ul={"border-collapse":"collapse",width:"100%"},Wl=ae(5,function(e){e=e+1+"px";return{title:e,value:e}}),$l=p(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],function(e){return{title:e,value:e.toLowerCase()}}),ql=function(e){var t;return gf(e)?(t=null!=(t=(t=e.dom).getParent(e.selection.getStart(),t.isBlock))?t:e.getBody(),t=xi(S.fromDom(t)),d(d({},Ul),{width:t+"px"})):pf(e)?Ut(Ul,function(e,t){return"width"!==t}):Ul},Gl={border:"1"},Kl="preservetable",Xl=function(e){return e.getParam("table_sizing_mode","auto")},Yl=function(e){return e.getParam("table_responsive_width")},Jl=function(e){return e.getParam("table_border_widths",Wl,"array")},Zl=function(e){return e.getParam("table_border_styles",$l,"array")},Ql=function(e){return e.getParam("table_default_attributes",Gl,"object")},ef=function(e){return e.getParam("table_default_styles",ql(e),"object")},tf=function(e){return e.getParam("table_resize_bars",!0,"boolean")},nf=function(e){return e.getParam("table_tab_navigation",!0,"boolean")},rf=function(e){return e.getParam("table_cell_advtab",!0,"boolean")},of=function(e){return e.getParam("table_row_advtab",!0,"boolean")},uf=function(e){return e.getParam("table_advtab",!0,"boolean")},af=function(e){return e.getParam("table_appearance_options",!0,"boolean")},cf=function(e){return e.getParam("table_grid",!0,"boolean")},sf=function(e){return e.getParam("table_style_by_css",!1,"boolean")},lf=function(e){return e.getParam("table_cell_class_list",[],"array")},ff=function(e){return e.getParam("table_row_class_list",[],"array")},df=function(e){return e.getParam("table_class_list",[],"array")},mf=function(e){return"relative"===Xl(e)||!0===Yl(e)},gf=function(e){return"fixed"===Xl(e)||!1===Yl(e)},pf=function(e){return"responsive"===Xl(e)},hf=function(e){return e.getParam("table_toolbar",jl)},vf=function(e){return e.getParam("table_use_colgroups",!1,"boolean")},bf=function(e){e=e.getParam("table_header_type","section","string");return c(["section","cells","sectionCells","auto"],e)?e:"section"},yf=function(e){var t=e.getParam("table_column_resizing",Kl,"string");return me(["preservetable","resizetable"],function(e){return e===t}).getOr(Kl)},wf=function(e){return"preservetable"===yf(e)},xf=function(e){return"resizetable"===yf(e)},Cf=function(e){e=e.getParam("table_clone_elements");return V(e)?w.some(e.split(/[ ,]/)):Array.isArray(e)?w.some(e):w.none()},Sf=function(e){e=e.getParam("object_resizing",!0);return V(e)?"table"===e:e},kf=function(e){return e.getParam("table_background_color_map",[],"array")},Tf=function(e){return e.getParam("table_border_color_map",[],"array")},Of=function(e,t){return mf(e)?Ma.percentageSize(t):gf(e)?Ma.pixelSize(t):Ma.getTableSize(t)},Ef=function(e){var t=$i(e);Ji(e,w.some(t),w.none()),ru(e)},_f=function(e){var t=yi(e)+"px";Ji(e,w.some(t),w.none()),ru(e)},Af=function(e){vr(e,"width");var t=Mr(e),t=0<t.length?t:Dr(e);x(t,function(e){vr(e,"width"),ru(e)}),ru(e)},Df=function(e){var t=B.fromTable(e);B.hasColumns(t)||x(Dr(e),function(e){var t=gr(e,"width");M(e,"width",t),D(e,"width")})},Mf=function(){var e=S.fromTag("div");return mr(e,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),P(An(),e),e},Nf=function(e,t){return e.inline?ns.body(ac(e),Mf(),t):ns.only(S.fromDom(e.getDoc()),t)},Rf=function(e,t){e.inline&&I(t.parent())},zf="bar-",Bf=function(e){return"false"!==tr(e,"data-mce-resize")},Pf=function(i){function r(e){return"TABLE"===e.nodeName}function e(){return n}function u(e){return Of(i,e)}function a(){return(wf(i)?ts:es)()}function o(e,t,n){var r,o,t=Ke(t,"e");""===s&&Ef(e),n!==c&&""!==s?(M(e,"width",s),r=a(),o=u(e),t=wf(i)||t?Cs(e).columns-1:0,Xc(e,n-c,t,r,o)):pc(s)&&(t=parseFloat(s.replace("%","")),M(e,"width",n*t/c+"%")),hc(s)&&Df(e)}var c,s,l=w.none(),n=w.none(),f=w.none();return i.on("init",function(){var e,t=Nf(i,Bf);f=w.some(t),Sf(i)&&tf(i)&&(e=a(),(t=Nl.create(t,e,u)).on(),t.events.startDrag.bind(function(e){l=w.some(i.selection.getRng())}),t.events.beforeResize.bind(function(e){var t=e.table.dom;Bl(i,t,cc(t),sc(t),zf+e.type)}),t.events.afterResize.bind(function(e){var t=e.table,n=t.dom;mc(t),l.each(function(e){i.selection.setRng(e),i.focus()}),Pl(i,n,cc(n),sc(n),zf+e.type),i.undoManager.add()}),n=w.some(t))}),i.on("ObjectResizeStart",function(e){var t,n=e.target;r(n)&&(t=S.fromDom(n),x(i.dom.select(".mce-clonedresizable"),function(e){i.dom.addClass(e,"mce-"+yf(i)+"-columns")}),!ws(t)&&gf(i)?_f(t):!ys(t)&&mf(i)&&Ef(t),xs(t)&&Ge(e.origin,zf)&&Ef(t),c=e.width,s=pf(i)?"":gc(i,n).getOr(""))}),i.on("ObjectResized",function(e){var t,n=e.target;r(n)&&(n=S.fromDom(n),t=e.origin,Ge(t,"corner-")&&o(n,t,e.width),mc(n),Fl(i,n.dom,Hl))}),i.on("SwitchMode",function(){n.each(function(e){i.mode.isReadOnly()?e.hideBars():e.showBars()})}),{lazyResize:e,lazyWire:function(){return f.getOr(ns.only(S.fromDom(i.getBody()),Bf))},destroy:function(){n.each(function(e){e.destroy()}),f.each(function(e){Rf(i,e)})}}},If=function(e,t){return{element:e,offset:t}},Lf=function(t,e,n){return t.property().isText(e)&&0===t.property().getText(e).trim().length||t.property().isComment(e)?n(e).bind(function(e){return Lf(t,e,n).orThunk(function(){return w.some(e)})}):w.none()},Ff=iu,Hf=To(),Vf=function(e){return Ff(Hf,e)},jf=function(n,r){1===wr(n,"colspan")&&da(n).each(function(e){var t=e.value/2;ma(n,t,e.unit),ma(r,t,e.unit)})},Uf=pn("th"),Wf=function(e){return he(e,function(e){return Uf(e.element)})},$f=function(e,t){return e&&t?"sectionCells":e?"section":"cells"},qf=function(e){var t="thead"===e.section,n=or(Gf(e.cells),"th");return t||n?{type:"header",subType:$f(t,n)}:"tfoot"===e.section?{type:"footer"}:{type:"body"}},Gf=function(e){var t=C(e,function(e){return Uf(e.element)});return 0===t.length?w.some("td"):t.length===e.length?w.some("th"):w.none()},Kf=function(e,t,n){return O(n(e.element,t),!0,e.isLocked)},Xf=function(e,t){return e.section!==t?un(e.element,e.cells,t,e.isNew):e},Yf={getTableSectionType:function(e,t){e=B.fromTable(e);switch(ke(e.all,function(e){e=qf(e);return"header"===e.type?w.from(e.subType):w.none()}).getOr(t)){case"section":return uu();case"sectionCells":return au();case"cells":return cu()}},section:uu,sectionCells:au,cells:cu,fallback:function(){return{transformRow:a,transformCell:Kf}}},Jf=function(e,t,n,r){n===r?D(e,t):A(e,t,n)},Zf=function(e,t,n){Se(Bn(e,t)).fold(function(){return go(e,n)},function(e){return mo(e,n)})},Qf=function(t,n){var e=Yn(t,n).getOrThunk(function(){var e=S.fromTag(n,hn(t).dom);return"thead"===n?Zf(t,"caption,colgroup",e):"colgroup"===n?Zf(t,"caption",e):P(t,e),e});return bo(e),e},ed=function(e){return p(e,function(e){var n=li(e.element);return x(e.cells,function(e){var t=fi(e.element);Jf(t,"colspan",e.colspan,1),Jf(t,"rowspan",e.rowspan,1),P(n,t)}),n})},td=function(e,t){return p(e,function(e){return Ur(e,t)})},nd=function(e,t){return e[t]},rd=function(e,t){var n;return 0===e.length?0:(n=e[0],ge(e,function(e){return!t(n.element,e.element)}).getOr(e.length))},od=function(e,t,n,r){var o=nd(e,t),i="colgroup"===o.section;return{colspan:rd(o.cells.slice(n),r),rowspan:i?1:rd(td(e.slice(t),n),r)}},id=function(l,f){var d=p(l,function(e){return p(e.cells,y)});return p(l,function(e,s){var t=b(e.cells,function(e,t){if(!1!==d[s][t])return[];for(var n=od(l,s,t,f),r=s,o=t,i=n.rowspan,u=n.colspan,a=r;a<r+i;a++)for(var c=o;c<o+u;c++)d[a][c]=!0;return[tn(e.element,n.rowspan,n.colspan,e.isNew)]});return on(e.element,t,e.section,e.isNew)})},ud=function(o,i,u){var a=[];x(o.colgroups,function(e){for(var t=[],n=0;n<o.grid.columns;n++){var r=B.getColumnAt(o,n).map(function(e){return O(e.element,u,!1)}).getOrThunk(function(){return O(i.colGap(),!0,!1)});t.push(r)}a.push(un(e.element,t,"colgroup",u))});for(var e=0;e<o.grid.rows;e++){for(var t=[],n=0;n<o.grid.columns;n++){var r=B.getAt(o,e,n).map(function(e){return O(e.element,u,e.isLocked)}).getOrThunk(function(){return O(i.gap(),!0,!1)});t.push(r)}var c=o.all[e],c=un(c.element,t,c.section,u);a.push(c)}return a},ad=function(e){return id(e,k)},cd=function(e,t){return ke(e.all,function(e){return me(e.cells,function(e){return k(t,e.element)})})},sd=function(t,e,n){e=p(e.selection,function(e){return Ar(e).bind(function(e){return cd(t,e)}).filter(n)}),e=ir(e);return sr(0<e.length,e)},ld=function(e,t){return sd(e,t,v)},fd=function(e,t){return sd(e,t,function(e){return!e.isLocked})},dd=function(e,t){return cd(e,t).exists(function(e){return!e.isLocked})},md=function(t,e){return fu(0,e).filter(function(e){return mu(t,e.cells)})},gd=function(t,e){return du(0,e).filter(function(e){return mu(t,e)})},pd=function(e,t,n,r){for(var o=z(e).rows,i=!0,u=0;u<o.length;u++)for(var a=0;a<Wr(o[0]);a++){var c=o[u],s=Ur(c,a),l=n(s.element,t);!0===l&&!1===i?Hr(c,a,O(r(),!0,s.isLocked)):!0===l&&(i=!1)}return e},hd=function(e,n){return fe(e,function(e,t){return f(e,function(e){return n(e.element,t.element)})?e:e.concat([t])},[])},vd=function(e,r,o,i){return 0<r&&r<e[0].cells.length&&x(e,function(e){var t=e.cells[r-1],n=e.cells[r];o(n.element,t.element)&&Hr(e,r,O(i(),!0,n.isLocked))}),e},bd=function(e,n,u,a){var t,c=z(e).rows;return 0<n&&n<c.length&&(t=c[n-1].cells,t=hd(t,u),x(t,function(e){for(var o=w.none(),i=n;i<c.length;i++)for(var t=0;t<Wr(c[0]);t++)!function(t){var n=c[i],r=Ur(n,t);u(r.element,e.element)&&(o=o.isNone()?w.some(a()):o).each(function(e){Hr(n,t,O(e,!0,r.isLocked))})}(t)})),e},yd={value:gu,error:pu,fromOption:function(e,t){return e.fold(function(){return pu(t)},gu)}},wd=function(e,t,n){var r;return e.row>=t.length||e.column>Wr(t[0])?yd.error("invalid start address out of table bounds, row: "+e.row+", column: "+e.column):(e=(t=t.slice(e.row))[0].cells.slice(e.column),r=Wr(n[0]),n=n.length,yd.value({rowDelta:t.length-n,colDelta:e.length-r}))},xd=function(e,t){return{rowDelta:0,colDelta:Wr(e[0])-Wr(t[0])}},Cd=function(e,t){return{rowDelta:e.length-t.length,colDelta:0}},Sd=function(e,t,n,r){var o="colgroup"===t.section?n.col:n.cell;return ae(e,function(e){return O(o(),!0,r(e))})},kd=function(e,t,n,r){var o=e[e.length-1];return e.concat(ae(t,function(){var e="colgroup"===o.section?n.colgroup:n.row,e=$r(o,e,a),t=Sd(e.cells.length,e,n,function(e){return Kt(r,e.toString())});return Vr(e,t)}))},Td=function(e,n,r,o){return p(e,function(e){var t=Sd(n,e,r,y);return Lr(e,o,t)})},Od=function(e,o,t){return p(e,function(r){return fe(t,function(e,t){var n=Sd(1,r,o,v)[0];return Fr(e,t,n)},r)})},Ed=function(e,t,n){var r=t.colDelta<0?Td:a,o=t.rowDelta<0?kd:a,i=Kr(e),u=Wr(e[0]),i=f(i,function(e){return e===u-1}),r=r(e,Math.abs(t.colDelta),n,i?u-1:u),e=Kr(r);return o(r,Math.abs(t.rowDelta),n,be(e,v))},_d=function(e,t,n,r){var r=g(r,Ur(e[t],n).element),o=e[t];return 1<e.length&&1<Wr(o)&&(0<n&&r(R(o,n-1))||n<o.cells.length-1&&r(R(o,n+1))||0<t&&r(R(e[t-1],n))||t<e.length-1&&r(R(e[t+1],n)))},Ad=function(e,t,n,r,o,i){for(var u=e.row,a=e.column,c=u+n.length,s=a+Wr(n[0])+i.length,l=be(i,v),f=u;f<c;f++)for(var d,m,g=0,p=a;p<s;p++)l[p]?g++:(_d(t,f,p,o)&&pd(t,R(t[f],p),o,r.cell),m=(d=Ur(n[f-u],p-a-g)).element,m=r.replace(m),Hr(t[f],p,O(m,!0,d.isLocked)));return t},Dd=function(t,e,n){var r=Wr(e[0]),e=z(e).cols.length+t.row,o=ae(r-t.column,function(e){return e+t.column});return{row:e,column:me(o,function(t){return he(n,function(e){return e!==t})}).getOr(r-1)}},Md=function(t,n,e){return C(e,function(e){return e>=t.column&&e<=Wr(n[0])+t.column})},Nd=function(e,t,n,r){return $r(e,function(e){return r(e,n)},t)},Rd=function(e,t,n,r,o,i,u){return"colgroup"!==n&&r?Ur(e,t):(n=Ur(e,o),O(u(n.element,i),!0,!1))},zd=function(e,t,n,r){return void 0!==R(e[t],n)&&0<t&&r(R(e[t-1],n),R(e[t],n))},Bd=function(e,t,n){return 0<t&&n(R(e,t-1),R(e,t))},Pd=function(e,t,n,r){return zd(e,t,n,r)||Bd(e[t],n,r)},Id=function(e,r){return he(r,a)&&Wf(e.cells)?v:function(e,t,n){return!("th"===E(e.element)&&r[n])}},Ld=function(e,r){return he(r,a)&&Wf(e)?v:function(e,t,n){return!("th"===E(e.element)&&r[t])}},Fd=function(e,t,n,r){function o(e){return("row"===e?Cr:xr)(t)?e+"group":e}return e?Uf(t)?o(n):null:r&&Uf(t)?o("row"===n?"col":"row"):null},Hd=function(r,o){return function(e,t,n){return w.some(Fd(r,e.element,"col",o[n]))}},Vd=function(n,r){return function(e,t){return w.some(Fd(n,e.element,"row",r[t]))}},jd=function(e,t,n){return O(n(e.element,t),!0,e.isLocked)},Ud=function(e,i,u,a,c,s,l){return p(e,function(e,o){return jr(e,function(e,t){var n,r;return r=e,f(i,function(e){return u(r.element,e.element)})?(n=l(e,o,t)?c(e,u,a):e,s(n,o,t).each(function(e){er(n.element,{scope:w.from(e)})}),n):e})})},Wd=function(n,r,o){return b(n,function(e,t){return Pd(n,t,r,o)?[]:[Ur(e,r)]})},$d=function(n,r,o){var e=n[r];return b(e.cells,function(e,t){return Pd(n,r,t,o)?[]:[e]})},qd=function(e){return fe(e,function(e,t){return f(e,function(e){return e.column===t.column})?e:e.concat([t])},[]).sort(function(e,t){return e.column-t.column})},Gd=pn("col"),Kd=pn("colgroup"),t=function(t,n){void 0===n&&(n=Su);function r(e){var t;return Cu(e)?i({element:e}):(t=o(n(e)),u=w.some({item:e,replacement:t}),t)}var o=function(e){return Gd(e.element)?t.col(e):t.cell(e)},i=function(e){return Kd(e.element)?t.colgroup(e):t.row(e)},u=w.none();return{getOrInit:function(t,n){return u.fold(function(){return r(t)},function(e){return n(t,e.item)?e.replacement:r(t)})}}},Cc=function(i){return function(n){var r=[],e=function(t,n){return me(r,function(e){return n(e.item,t)})},o=function(e){var t=n.replace(e,i,"td"===i?{scope:null}:{});return r.push({item:e,sub:t}),t};return{replaceOrInit:function(t,n){return Cu(t)||Gd(t)?t:e(t,n).fold(function(){return o(t)},function(e){return n(t,e.item)?e.sub:o(t)})}}}},Sc=function(r){return{unmerge:function(n){var e=ku(n);return e.each(function(e){return A(n,"scope",e)}),function(){var t=r.cell({element:n,colspan:1,rowspan:1});return vr(t,"width"),vr(n,"width"),e.each(function(e){return A(t,"scope",e)}),t}},merge:function(t){var n,r,e;return vr(t[0],"width"),(0===(e=ir(p(t,ku))).length||(n=e[0],r=["row","col"],f(e,function(e){return e!==n&&c(r,e)}))?w.none():w.from(n)).fold(function(){return D(t[0],"scope")},function(e){return A(t[0],"scope",e+"group")}),m(t[0])}}},Xd=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Yd=function(e,t){e=e.property().name(t);return c(["ol","ul"],e)},Jd=function(e,t){e=e.property().name(t);return c(Xd,e)},Zd=function(e,t){return c(["br","img","hr","input"],e.property().name(t))},Qd=To(),em=function(e){return Jd(Qd,e)},tm=function(e){return Yd(Qd,e)},nm=function(e){return Zd(Qd,e)},rm=function(e){return cl(e,!0)},om=function(e,t){return{grid:e,cursor:t}},im=function(e){return ke(e,function(e){return ke(e.cells,function(e){e=e.element;return sr(rm(e),e)})})},um=function(e,t,n){var r=z(e).rows;return w.from(null==(t=null==(e=r[t])?void 0:e.cells[n])?void 0:t.element).filter(rm).orThunk(function(){return im(r)})},am=_u("thead",!0),cm=_u("tbody",!1),sm=_u("tfoot",!1),lm=Cc("th"),Cc=Cc("td"),fm=e(function(e,t,n,r){var o=t[0].row,i=Eu(t),i=le(i,function(e,t){return{grid:bu(e.grid,o,t.row+e.delta,n,r.getOrInit),delta:e.delta+1}},{grid:e,delta:0}).grid;return L(i,o,t[0].column)},ld,h,h,t),dm=e(function(e,t,n,r){var o=Eu(t),i=o[o.length-1],u=i.row+i.rowspan,i=le(o,function(e,t){return bu(e,u,t.row,n,r.getOrInit)},e);return L(i,u,t[0].column)},ld,h,h,t),mm=e(function(e,t,n,r){var t=t.details,o=qd(t),i=o[0].column,o=le(o,function(e,t){return{grid:yu(e.grid,i,t.column+e.delta,n,r.getOrInit),delta:e.delta+1}},{grid:e,delta:0}).grid;return L(o,t[0].row,i)},Bu(!0),Mu,h,t),gm=e(function(e,t,n,r){var t=t.details,o=t[t.length-1],i=o.column+o.colspan,o=qd(t),o=le(o,function(e,t){return yu(e,i,t.column,n,r.getOrInit)},e);return L(o,t[0].row,i)},Bu(!1),Mu,h,t),pm=e(function(e,t,n,r){var o,t=qd(t.details),e=(e=e,o=p(t,function(e){return e.column}),b(e,function(e){var t=e.cells,t=le(o,function(e,t){return 0<=t&&t<e.length?e.slice(0,t).concat(e.slice(t+1)):e},t);return 0<t.length?[un(e.element,t,e.section,e.isNew)]:[]})),i=0<e.length?e[0].cells.length-1:0;return L(e,t[0].row,Math.min(t[0].column,i))},function(t,e){return fd(t,e).map(function(e){return{details:e,pixelDelta:-zu(t,e)}})},Mu,Ou,t),hm=e(function(e,t,n,r){var o,i=Eu(t),e=(e=e,u=i[0].row,i=i[i.length-1].row,e=z(e),o=e.rows,e.cols.concat(o.slice(0,u)).concat(o.slice(i+1))),u=0<e.length?e.length-1:0;return L(e,Math.min(t[0].row,u),t[0].column)},ld,h,Ou,t),vm=e(function(e,t,n,r){var o=qd(t),o=p(o,function(e){return e.column}),e=wu(e,o,!0,n,r.replaceOrInit);return L(e,t[0].row,t[0].column)},fd,h,h,lm),bm=e(function(e,t,n,r){var o=qd(t),o=p(o,function(e){return e.column}),e=wu(e,o,!1,n,r.replaceOrInit);return L(e,t[0].row,t[0].column)},fd,h,h,Cc),ym=e(am,fd,h,h,lm),wm=e(cm,fd,h,h,Cc),xm=e(sm,fd,h,h,Cc),Cm=e(function(e,t,n,r){e=xu(e,t,n,r.replaceOrInit);return L(e,t[0].row,t[0].column)},fd,h,h,lm),Sm=e(function(e,t,n,r){e=xu(e,t,n,r.replaceOrInit);return L(e,t[0].row,t[0].column)},fd,h,h,Cc),km=e(function(e,t,n,r){var o=t.cells,e=(Tu(o),function(e,t,n){var r=z(e).rows;if(0!==r.length)for(var o=t.startRow;o<=t.finishRow;o++)for(var i=t.startCol;i<=t.finishCol;i++){var u=r[o],a=Ur(u,i).isLocked;Hr(u,i,O(n(),!1,a))}return e}(e,t.bounds,r.merge(o)));return om(e,w.from(o[0]))},md,Du,h,Sc),Tm=e(function(e,t,n,r){e=le(t,function(e,t){return pd(e,t,n,r.unmerge(t))},e);return om(e,w.from(t[0]))},gd,Du,h,Sc),Om=e(function(e,t,n,r){var o,i,u,a,c,s,l=function(e,t){e=B.fromTable(e);return ud(e,t,!0)}(t.clipboard,t.generators),f={row:t.row,column:t.column};return f=f,o=e,l=l,i=t.generators,u=n,n=Kr(o),a=Dd(f,o,n),c=z(l).rows,s=Md(a,c,n),wd(a,o,c).map(function(e){var e=d(d({},e),{colDelta:e.colDelta-s.length}),e=Ed(o,e,i),t=Kr(e),t=Md(a,c,t);return Ad(a,e,c,i,u,t)}).fold(function(){return om(e,w.some(t.element))},function(e){return L(e,t.row,t.column)})},function(t,n){return Ar(n.element).bind(function(e){return cd(t,e).map(function(e){return d(d({},e),{generators:n.generators,clipboard:n.clipboard})})})},Du,h,t),Em=e(function(e,t,n,r){var o=z(e).rows,i=t.cells[0].column,o=o[t.cells[0].row],o=Au(t.clipboard,t.generators,o),i=hu(i,e,o,t.generators,n);return L(i,t.cells[0].row,t.cells[0].column)},Pu(!0),h,h,t),_m=e(function(e,t,n,r){var o=z(e).rows,i=t.cells[t.cells.length-1].column+t.cells[t.cells.length-1].colspan,o=o[t.cells[0].row],o=Au(t.clipboard,t.generators,o),i=hu(i,e,o,t.generators,n);return L(i,t.cells[0].row,t.cells[0].column)},Pu(!1),h,h,t),Am=e(function(e,t,n,r){var o=z(e).rows,i=t.cells[0].row,o=o[i],o=Au(t.clipboard,t.generators,o),i=vu(i,e,o,t.generators,n);return L(i,t.cells[0].row,t.cells[0].column)},lu,h,h,t),Dm=e(function(e,t,n,r){var o=z(e).rows,i=t.cells[t.cells.length-1].row+t.cells[t.cells.length-1].rowspan,o=o[t.cells[0].row],o=Au(t.clipboard,t.generators,o),i=vu(i,e,o,t.generators,n);return L(i,t.cells[0].row,t.cells[0].column)},lu,h,h,t),Mm=function(e,t){var o=B.fromTable(e);return ld(o,t).bind(function(e){var t=e[e.length-1],n=e[0].column,r=t.column+t.colspan,e=pe(p(o.all,function(e){return C(e.cells,function(e){return e.column>=n&&e.column<r})}));return Gf(e)}).getOr("")},Nm=function(e,t){e=B.fromTable(e);return ld(e,t).bind(Gf).getOr("")},Rm=function(e,t){var r=B.fromTable(e);return ld(r,t).bind(function(e){var t,n=e[e.length-1],e=e[0].row,n=n.row+n.rowspan,e=r.all.slice(e,n);return n=p(n=e,function(e){return qf(e).type}),e=c(n,"header"),t=c(n,"footer"),e||t?(n=c(n,"body"),!e||n||t?e||n||!t?w.none():w.some("footer"):w.some("header")):w.some("body")}).getOr("")},zm=function(f,d,e){function t(e){return"table"===E(ac(e))}function n(u,a,c,s,l){return function(t,e,r){void 0===r&&(r=!1),mc(t);var n=s(),o=S.fromDom(f.getDoc()),o=nc(c,o,m),i={sizing:Of(f,t),resize:(xf(f)?es:ts)(),section:function(e){switch(bf(f)){case"section":return Yf.section();case"sectionCells":return Yf.sectionCells();case"cells":return Yf.cells();default:return Yf.getTableSectionType(e,"section")}}(t)};return a(t)?u(n,t,e,o,i).bind(function(e){x(e.newRows,function(e){Rl(f,e.dom)}),x(e.newCells,function(e){zl(f,e.dom)});n=t;var n,e=e.cursor.fold(function(){var e=Dr(n);return Ce(e).filter(_n).map(function(e){d.clear(n);var t=f.dom.createRng();return t.selectNode(e.dom),f.selection.setRng(t),A(e,"data-mce-selected","1"),t})},function(e){var e=Vf(e),t=f.dom.createRng();return t.setStart(e.element.dom,e.offset),t.setEnd(e.element.dom,e.offset),f.selection.setRng(t),d.clear(n),w.some(t)});return _n(t)&&(mc(t),r||Fl(f,t.dom,l)),e.map(function(e){return{rng:e,effect:l}})}):w.none()}}var m=Cf(f),r=xf(f)?h:jf;return{deleteRow:n(hm,function(e){return!1===t(f)||1<Cs(e).rows},h,e,F),deleteColumn:n(pm,function(e){return!1===t(f)||1<Cs(e).columns},h,e,F),insertRowsBefore:n(fm,v,h,e,F),insertRowsAfter:n(dm,v,h,e,F),insertColumnsBefore:n(mm,v,r,e,F),insertColumnsAfter:n(gm,v,r,e,F),mergeCells:n(km,v,h,e,F),unmergeCells:n(Tm,v,h,e,F),pasteColsBefore:n(Em,v,h,e,F),pasteColsAfter:n(_m,v,h,e,F),pasteRowsBefore:n(Am,v,h,e,F),pasteRowsAfter:n(Dm,v,h,e,F),pasteCells:n(Om,v,h,e,Vl),makeCellsHeader:n(Cm,v,h,e,F),unmakeCellsHeader:n(Sm,v,h,e,F),makeColumnsHeader:n(vm,v,h,e,F),unmakeColumnsHeader:n(bm,v,h,e,F),makeRowsHeader:n(ym,v,h,e,F),makeRowsBody:n(wm,v,h,e,F),makeRowsFooter:n(xm,v,h,e,F),getTableRowType:Rm,getTableCellType:Nm,getTableColType:Mm}},Bm={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},Pm=function(){return S.fromTag("th")},Im=function(){return S.fromTag("td")},Lm=function(){return S.fromTag("col")},Fm=function(e,t,n,r){for(var o=S.fromTag("tr"),i=0;i<e;i++){var u=(r<t||i<n?Pm:Im)();i<n&&A(u,"scope","row"),r<t&&A(u,"scope","col"),P(u,S.fromTag("br")),P(o,u)}return o},Hm=function(e){var t=S.fromTag("colgroup");return ae(e,function(){return P(t,Lm())}),t},Vm=function(e,t,n,r){return ae(e,function(e){return Fm(t,n,r,e)})},jm=function(e,t,n,r,o,i){void 0===i&&(i=Bm);var u=S.fromTag("table"),a="cells"!==o,i=(mr(u,i.styles),Qn(u,i.attributes),i.colGroups&&P(u,Hm(t)),Math.min(e,n)),c=(a&&0<n&&(c=S.fromTag("thead"),P(u,c),o=Vm(n,t,"sectionCells"===o?i:0,r),vo(c,o)),S.fromTag("tbody"));P(u,c);o=Vm(a?e-i:e,t,a?0:n,r);return vo(c,o),u},Um=function(e){return e.dom.innerHTML},Wm=function(e){var t=S.fromTag("div"),e=S.fromDom(e.dom.cloneNode(!0));return P(t,e),Um(t)},$m=function(e,t){e.selection.select(t.dom,!0),e.selection.collapse(!0)},qm=function(e,t){Jn(t,"td,th").each(g($m,e))},Gm=function(t,e){x(Pn(e,"tr"),function(e){Rl(t,e.dom),x(Pn(e,"th,td"),function(e){zl(t,e.dom)})})},Km=function(e){return V(e)&&-1!==e.indexOf("%")},Xm=function(t,n,r,o,i){var u=ef(t),a={styles:u,attributes:Ql(t),colGroups:vf(t)};return t.undoManager.ignore(function(){var e=jm(r,n,i,o,bf(t),a),e=(A(e,"data-mce-id","__mce"),Wm(e));t.insertContent(e),t.addVisual()}),Jn(ac(t),'table[data-mce-id="__mce"]').map(function(e){return gf(t)?_f(e):pf(t)?Af(e):(mf(t)||Km(u.width))&&Ef(e),mc(e),D(e,"data-mce-id"),Gm(t,e),qm(t,e),e.dom}).getOr(null)},Ym=function(e,t,n,r,o){void 0===r&&(r={});function i(e){return Y(e)&&0<e}var u;return i(t)&&i(n)?(u=r.headerRows||0,r=r.headerColumns||0,Xm(e,n,t,r,u)):(console.error(o),null)},Jm=function(e){return function(){return e().fold(function(){return[]},function(e){return p(e,function(e){return e.dom})})}},Zm=function(t){return function(e){e=0<e.length?w.some(ic(e)):w.none();t(e)}},Qm=function(r){return function(e,t,n){t=Ym(r,t,e,n=void 0===n?{}:n,"Invalid values for insertTable - rows and columns values are required to insert a table.");return r.undoManager.add(),t}},eg=function(e,t,n,r){return{insertTable:Qm(e),setClipboardRows:Zm(t.setRows),getClipboardRows:Jm(t.getRows),setClipboardCols:Zm(t.setColumns),getClipboardCols:Jm(t.getColumns),resizeHandler:n,selectionTargets:r}},tg=function(e,t,n){var r=yr(e,t,1);1===n||r<=1?D(e,t):A(e,t,Math.min(n,r))},ng=function(e,t,n){var r;return B.hasColumns(e)?(e=C(B.justColumns(e),function(e){return e.column>=t&&e.column<n}),e=p(e,function(e){e=fi(e.element);return tg(e,"span",n-t),e}),r=S.fromTag("colgroup"),vo(r,e),[r]):[]},rg=function(e,n,r){return p(e.all,function(e){var e=C(e.cells,function(e){return e.column>=n&&e.column<r}),e=p(e,function(e){e=fi(e.element);return tg(e,"colspan",r-n),e}),t=S.fromTag("tr");return vo(t,e),t})},og=function(e,t){var r=B.fromTable(e);return fd(r,t).map(function(e){var t=e[e.length-1],e=e[0].column,t=t.column+t.colspan,n=ng(r,e,t),e=rg(r,e,t);return Te(Te([],n,!0),e,!0)})},ig=function(e,t,n){var r=B.fromTable(e);return ld(r,t).bind(function(e){var t=ud(r,n,!1),t=z(t).rows.slice(e[0].row,e[e.length-1].row+e[e.length-1].rowspan),e=b(t,function(e){var t=C(e.cells,function(e){return!e.isLocked});return 0<t.length?[d(d({},e),{cells:t})]:[]}),t=ad(e);return sr(0<t.length,t)}).map(function(e){return ed(e)})},ug=tinymce.util.Tools.resolve("tinymce.util.Tools"),ag=function(e,t,n){for(var t=e.select("td,th",t),r=void 0,o=t,i=0;i<o.length;i++){var u=e.getStyle(o[i],n);if((r=void 0===r?u:r)!==u)return""}return r},cg=function(e,t,n){n&&e.formatter.apply("align"+n,{},t)},sg=function(e,t,n){n&&e.formatter.apply("valign"+n,{},t)},lg=function(t,n){ug.each("left center right".split(" "),function(e){t.formatter.remove("align"+e,{},n)})},fg=function(t,n){ug.each("top middle bottom".split(" "),function(e){t.formatter.remove("valign"+e,{},n)})},dg=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],mg=function(e){return{value:e}},gg=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,pg=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,hg=function(e){return gg.test(e)||pg.test(e)},vg=function(e){return qe(e,"#").toUpperCase()},bg=function(e){return hg(e)?w.some({value:vg(e)}):w.none()},yg=function(e){e=e.toString(16);return(1===e.length?"0"+e:e).toUpperCase()},wg=function(e){e=yg(e.red)+yg(e.green)+yg(e.blue);return mg(e)},xg=/^rgb\((\d+),\s*(\d+),\s*(\d+)\)/,Cg=/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d?(?:\.\d+)?)\)/,Sg=function(e,t,n,r){return{red:e,green:t,blue:n,alpha:r}},kg=function(e,t,n,r){e=parseInt(e,10),t=parseInt(t,10),n=parseInt(n,10),r=parseFloat(r);return Sg(e,t,n,r)},Tg=function(e){var t;return"transparent"===e?w.some(Sg(0,0,0,0)):null!==(t=xg.exec(e))?w.some(kg(t[1],t[2],t[3],"1")):null!==(t=Cg.exec(e))?w.some(kg(t[1],t[2],t[3],t[4])):w.none()},Og=function(o){return bg(o).orThunk(function(){return Tg(o).map(wg)}).getOrThunk(function(){var e=document.createElement("canvas"),t=(e.height=1,e.width=1,e.getContext("2d")),e=(t.clearRect(0,0,e.width,e.height),t.fillStyle="#FFFFFF",t.fillStyle=o,t.fillRect(0,0,1,1),t.getImageData(0,0,1,1).data),t=e[0],n=e[1],r=e[2],e=e[3];return wg(Sg(t,n,r,e))})},Eg=function(e){var t=e;return{get:function(){return t},set:function(e){t=e}}},_g=function(e){function t(){n.get().each(e)}var n=Eg(w.none());return{clear:function(){t(),n.set(w.none())},isSet:function(){return n.get().isSome()},get:function(){return n.get()},set:function(e){t(),n.set(w.some(e))}}},Ag=function(){return _g(function(e){return e.unbind()})},Dg=function(){var t=_g(h);return d(d({},t),{on:function(e){return t.get().each(e)}})},Mg=function(i,u,a,c){return function(n){function e(){function e(e){return i.formatter.match(a,{value:c},e.dom,o)}var t=Nc(u);o?(n.setActive(!f(t,e)),r.set(i.formatter.formatChanged(a,function(e){return n.setActive(!e)},!0))):(n.setActive(he(t,e)),r.set(i.formatter.formatChanged(a,n.setActive,!1,{value:c})))}var r=Ag(),o=Je(c);return i.initialized?e():i.on("init",e),r.clear}},Ng=function(e){return Xt(e,"menu")},Rg=function(e){return p(e,function(e){var t=e.text||e.title;return Ng(e)?{text:t,items:Rg(e.menu)}:{text:t,value:e.value}})},zg=function(n,r,e,o,i){return p(e,function(e){var t=e.text||e.title;return Ng(e)?{type:"nestedmenuitem",text:t,getSubmenuItems:function(){return zg(n,r,e.menu,o,i)}}:{text:t,type:"togglemenuitem",onAction:function(){return i(e.value)},onSetup:Mg(n,r,o,e.value)}})},Bg=function(n,r){return function(e){var t;n.execCommand("mceTableApplyCellStyle",!1,((t={})[r]=e,t))}},Pg=function(e){return b(e,function(e){return Ng(e)?[d(d({},e),{menu:Pg(e.menu)})]:Ye(e.value)?[e]:[]})},Ig=function(t,n,r,o,i){return function(e){return e(zg(t,n,r,o,i))}},Lg=function(n,e,r){e=p(e,function(e){return{text:e.title,value:"#"+Og(e.value).value,type:"choiceitem"}});return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:0<e.length?e:void 0,allowCustomColors:!1},onAction:function(e){var t,e="remove"===e.value?"":e.value;n.execCommand("mceTableApplyCellStyle",!1,((t={})[r]=e,t))}}]},Fg=function(t){return function(){var e=t.queryCommandValue("mceTableRowType");t.execCommand("mceTableRowType",!1,{type:"header"===e?"body":"header"})}},Hg=function(t){return function(){var e=t.queryCommandValue("mceTableColType");t.execCommand("mceTableColType",!1,{type:"th"===e?"td":"th"})}},Vg=function(e){e=Rg(lf(e));return 0<e.length?w.some({name:"class",type:"listbox",label:"Class",items:e}):w.none()},jg=[{name:"width",type:"input",label:"Width"},{name:"height",type:"input",label:"Height"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:dg}],Ug=function(e){return jg.concat(Vg(e).toArray())},Wg=function(e,t){e=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""}].concat(Rg(Zl(e)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:"cell"===t?[{name:"borderwidth",type:"input",label:"Border width"}].concat(e):e}},$g={normal:Iu(!1),ifTruthy:Iu(!0)},qg=function(t){return function(e){return Ge(e,"rgb")?t.toHex(e):e}},Gg=function(e,t){t=S.fromDom(t);return{borderwidth:hr(t,"border-width").getOr(""),borderstyle:hr(t,"border-style").getOr(""),bordercolor:hr(t,"border-color").map(qg(e)).getOr(""),backgroundcolor:hr(t,"background-color").map(qg(e)).getOr("")}},Kg=function(e){var o=e[0],e=e.slice(1);return x(e,function(e){x(It(o),function(r){T(e,function(e,t){var n=o[r];""!==n&&r===t&&n!==e&&(o[r]="")})})}),o},Xg=g(Lu,["left","center","right"],"align"),Yg=g(Lu,["top","middle","bottom"],"valign"),Jg=function(e,t){var n=ef(e),r=Ql(e),t=t?(t=e.dom,{borderstyle:Gt(n,"border-style").getOr(""),bordercolor:qg(t)(Gt(n,"border-color").getOr("")),backgroundcolor:qg(t)(Gt(n,"background-color").getOr(""))}):{};return d(d(d(d(d(d({},{height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""}),n),r),t),(t=n["border-width"],sf(e)&&t?{border:t}:Gt(r,"border").fold(function(){return{}},function(e){return{border:e}}))),(e=Gt(n,"border-spacing").or(Gt(r,"cellspacing")).fold(function(){return{}},function(e){return{cellspacing:e}}),t=Gt(n,"border-padding").or(Gt(r,"cellpadding")).fold(function(){return{}},function(e){return{cellpadding:e}}),d(d({},e),t)))},Zg=function(n){return N(S.fromDom(n)).map(function(e){var t={selection:ic(n.cells)};return Rm(e,t)}).getOr("")},Qg=function(e,t,n){var r,o=e.dom,i=sf(e)?o.getStyle(t,"border-spacing")||o.getAttrib(t,"cellspacing"):o.getAttrib(t,"cellspacing")||o.getStyle(t,"border-spacing"),u=sf(e)?ag(o,t,"padding")||o.getAttrib(t,"cellpadding"):o.getAttrib(t,"cellpadding")||ag(o,t,"padding");return d({width:o.getStyle(t,"width")||o.getAttrib(t,"width"),height:o.getStyle(t,"height")||o.getAttrib(t,"height"),cellspacing:i,cellpadding:u,border:(i=o,u=t,r=hr(S.fromDom(u),"border-width"),sf(e)&&r.isSome()?r.getOr(""):i.getAttrib(u,"border")||ag(e.dom,u,"border-width")||ag(e.dom,u,"border")),caption:!!o.select("caption",t)[0],class:o.getAttrib(t,"class",""),align:Xg(e,t)},n?Gg(o,t):{})},ep=function(e,t,n){var r=e.dom;return d({height:r.getStyle(t,"height")||r.getAttrib(t,"height"),class:r.getAttrib(t,"class",""),type:Zg(t),align:Xg(e,t)},n?Gg(r,t):{})},tp=function(e,t,n,r){function o(e,t){return i.getStyle(e,t)||i.getAttrib(e,t)}var i=e.dom,r=r.getOr(t);return d({width:o(r,"width"),height:o(t,"height"),scope:i.getAttrib(t,"scope"),celltype:uc(t),class:i.getAttrib(t,"class",""),halign:Xg(e,t),valign:Yg(e,t)},n?Gg(i,t):{})},np=function(e,n){var t=B.fromTable(e),e=B.justCells(t),e=C(e,function(t){return f(n,function(e){return k(t.element,e)})});return p(e,function(e){return{element:e.element.dom,column:B.getColumnAt(t,e.column).map(function(e){return e.element.dom})}})},rp=function(e,t,n){e.setAttrib("scope",n.scope),e.setAttrib("class",n.class),e.setStyle("height",dc(n.height)),t.setStyle("width",dc(n.width))},op=function(e,t){e.setFormat("tablecellbackgroundcolor",t.backgroundcolor),e.setFormat("tablecellbordercolor",t.bordercolor),e.setFormat("tablecellborderstyle",t.borderstyle),e.setFormat("tablecellborderwidth",dc(t.borderwidth))},ip=function(r,e,o){var i=1===e.length;x(e,function(e){var t=e.element,n=i?$g.normal(r,t):$g.ifTruthy(r,t),e=e.column.map(function(e){return i?$g.normal(r,e):$g.ifTruthy(r,e)}).getOr(n);rp(n,e,o),rf(r)&&op(n,o),i&&(lg(r,t),fg(r,t)),o.halign&&cg(r,t,o.halign),o.valign&&sg(r,t,o.valign)})},up=function(e,t){e.execCommand("mceTableCellType",!1,{type:t.celltype,no_events:!0})},ap=function(o,i,n,u){var a=Ut(u,function(e,t){return n[t]!==e});0<qt(a)&&1<=i.length&&N(i[0]).each(function(e){var t=np(e,i),n=0<qt(Ut(a,function(e,t){return"scope"!==t&&"celltype"!==t})),r=Kt(a,"celltype");(n||Kt(a,"scope"))&&ip(o,t,u),r&&up(o,u),Fl(o,e.dom,{structure:r,style:n})})},cp=function(e,t,n,r){var o=r.getData();r.close(),e.undoManager.transact(function(){ap(e,t,n,o),e.focus()})},sp=function(t,n){var e=N(n[0]).map(function(e){return p(np(e,n),function(e){return tp(t,e.element,rf(t),e.column)})});return Kg(e.getOrDie())},lp=function(e,t){var n,r,o,t=Nc(t);0!==t.length&&(n=sp(e,t),r={type:"tabpanel",tabs:[{title:"General",name:"general",items:Ug(e)},Wg(e,"cell")]},o={type:"panel",items:[{type:"grid",columns:2,items:Ug(e)}]},e.windowManager.open({title:"Cell Properties",size:"normal",body:rf(e)?r:o,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:n,onSubmit:g(cp,e,t,n)}))},fp=function(e){e=Rg(ff(e));return 0<e.length?w.some({name:"class",type:"listbox",label:"Class",items:e}):w.none()},dp=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],mp=function(e){return dp.concat(fp(e).toArray())},gp=function(e,t){e.setAttrib("class",t.class),e.setStyle("height",dc(t.height))},pp=function(e,t){e.setStyle("background-color",t.backgroundcolor),e.setStyle("border-color",t.bordercolor),e.setStyle("border-style",t.borderstyle)},hp=function(n,e,r,o){var i=1===e.length;x(e,function(e){var t=i?$g.normal(n,e):$g.ifTruthy(n,e);gp(t,r),of(n)&&pp(t,r),r.align!==o.align&&(lg(n,e),cg(n,e,r.align))})},vp=function(e,t){e.execCommand("mceTableRowType",!1,{type:t.type,no_events:!0})},bp=function(t,e,n,r){var o,i,u=Ut(r,function(e,t){return n[t]!==e});0<qt(u)&&(o=Kt(u,"type"),(i=!o||1<qt(u))&&hp(t,e,r,n),o&&vp(t,r),N(S.fromDom(e[0])).each(function(e){return Fl(t,e.dom,{structure:o,style:i})}))},yp=function(e,t,n,r){var o=r.getData();r.close(),e.undoManager.transact(function(){bp(e,t,n,o),e.focus()})},wp=function(t){var e,n,r,o=Rc(vc(t),Tc.selected);0!==o.length&&(e=p(o,function(e){return ep(t,e.dom,of(t))}),e=Kg(e),n={type:"tabpanel",tabs:[{title:"General",name:"general",items:mp(t)},Wg(t,"row")]},r={type:"panel",items:[{type:"grid",columns:2,items:mp(t)}]},t.windowManager.open({title:"Row Properties",size:"normal",body:of(t)?n:r,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:e,onSubmit:g(yp,t,p(o,function(e){return e.dom}),e)}))},xp=function(e,t,n){n=n?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],e=af(e)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],t=0<t.length?[{type:"listbox",name:"class",label:"Class",items:t}]:[];return n.concat([{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}]).concat(e).concat([{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}]).concat(t)},Cp=function(e,t,n,r){if("TD"===t.tagName||"TH"===t.tagName)V(n)?e.setStyle(t,n,r):e.setStyle(t,n);else if(t.children)for(var o=0;o<t.children.length;o++)Cp(e,t.children[o],n,r)},Sp=function(e,t,n){var r=e.dom,o={},i={};if(o.class=n.class,i.height=dc(n.height),r.getAttrib(t,"width")&&!sf(e)?o.width=fc(n.width):i.width=dc(n.width),sf(e)?(i["border-width"]=dc(n.border),i["border-spacing"]=dc(n.cellspacing)):(o.border=n.border,o.cellpadding=n.cellpadding,o.cellspacing=n.cellspacing),sf(e)&&t.children)for(var u=0;u<t.children.length;u++)Cp(r,t.children[u],{"border-width":dc(n.border),padding:dc(n.cellpadding)}),uf(e)&&Cp(r,t.children[u],{"border-color":n.bordercolor});uf(e)&&(i["background-color"]=n.backgroundcolor,i["border-color"]=n.bordercolor,i["border-style"]=n.borderstyle),o.style=r.serializeStyle(d(d({},ef(e)),i)),r.setAttribs(t,d(d({},Ql(e)),o))},kp=function(n,r,o,e){var i=n.dom,u=e.getData(),a=Ut(u,function(e,t){return o[t]!==e});e.close(),""===u.class&&delete u.class,n.undoManager.transact(function(){var e,t;r||(t=parseInt(u.cols,10)||1,e=parseInt(u.rows,10)||1,r=Xm(n,t,e,0,0)),0<qt(a)&&(Sp(n,r,u),((t=i.select("caption",r)[0])&&!u.caption||!t&&u.caption)&&n.execCommand("mceTableToggleCaption"),""===u.align?lg(n,r):cg(n,r,u.align)),n.focus(),n.addVisual(),0<qt(a)&&(t=!(e=Kt(a,"caption"))||1<qt(a),Fl(n,r,{structure:e,style:t}))})},Tp=function(e,t){var n,r=e.dom,o=Jg(e,uf(e)),r=(!1===t?(n=r.getParent(e.selection.getStart(),"table",e.getBody()))?o=Qg(e,n,uf(e)):uf(e)&&(o.borderstyle="",o.bordercolor="",o.backgroundcolor=""):(o.cols="1",o.rows="1",uf(e)&&(o.borderstyle="",o.bordercolor="",o.backgroundcolor="")),Rg(df(e))),r=(0<r.length&&o.class&&(o.class=o.class.replace(/\s*mce\-item\-table\s*/g,"")),{type:"grid",columns:2,items:xp(e,r,t)}),t=uf(e)?{type:"tabpanel",tabs:[{title:"General",name:"general",items:[r]},Wg(e,"table")]}:{type:"panel",items:[r]};e.windowManager.open({title:"Table Properties",size:"normal",body:t,onSubmit:g(kp,e,n,o),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:o})},Op=function(e){return Dc(vc(e),lc(e))},Ep=function(e){return Mc(vc(e),lc(e))},_p=function(i,t,e,u,n){function a(n){return Ep(i).bind(function(t){return m(t).map(function(e){return n(e,t)})})}function c(e){i.focus()}function r(n,r){return void 0===r&&(r=!1),a(function(e,t){t=Ec(u,e,t);n(e,t,r).each(c)})}function o(){return a(function(e,t){var t=Ec(u,e,t),n=nc(h,S.fromDom(i.getDoc()),w.none());return ig(e,t,n)})}function s(){return a(function(e,t){t=Ec(u,e,t);return og(e,t)})}function l(o,e){return e().each(function(e){var r=p(e,function(e){return fi(e)});a(function(e,t){var n=rc(S.fromDom(i.getDoc())),t=Ac(u,t,r,n);o(e,t).each(c)})})}function f(n){return function(e,t){return Gt(t,"type").each(function(e){r(n(e),t.no_events)})}}var d=lc(i),m=function(e){return N(e,d)};T({mceTableSplitCells:function(){return r(t.unmergeCells)},mceTableMergeCells:function(){return r(t.mergeCells)},mceTableInsertRowBefore:function(){return r(t.insertRowsBefore)},mceTableInsertRowAfter:function(){return r(t.insertRowsAfter)},mceTableInsertColBefore:function(){return r(t.insertColumnsBefore)},mceTableInsertColAfter:function(){return r(t.insertColumnsAfter)},mceTableDeleteCol:function(){return r(t.deleteColumn)},mceTableDeleteRow:function(){return r(t.deleteRow)},mceTableCutCol:function(){return s().each(function(e){n.setColumns(e),r(t.deleteColumn)})},mceTableCutRow:function(){return o().each(function(e){n.setRows(e),r(t.deleteRow)})},mceTableCopyCol:function(){return s().each(function(e){return n.setColumns(e)})},mceTableCopyRow:function(){return o().each(function(e){return n.setRows(e)})},mceTablePasteColBefore:function(){return l(t.pasteColsBefore,n.getColumns)},mceTablePasteColAfter:function(){return l(t.pasteColsAfter,n.getColumns)},mceTablePasteRowBefore:function(){return l(t.pasteRowsBefore,n.getRows)},mceTablePasteRowAfter:function(){return l(t.pasteRowsAfter,n.getRows)},mceTableDelete:function(){return Op(i).each(function(e){N(e,d).filter(Q(d)).each(function(e){var t=S.fromText("");mo(e,t),I(e),i.dom.isEmpty(i.getBody())?(i.setContent(""),i.selection.setCursorLocation()):((e=i.dom.createRng()).setStart(t.dom,0),e.setEnd(t.dom,0),i.selection.setRng(e),i.nodeChanged())})})},mceTableCellToggleClass:function(e,r){a(function(e){var t=Nc(u),n=he(t,function(e){return i.formatter.match("tablecellclass",{value:r},e.dom)})?i.formatter.remove:i.formatter.apply;x(t,function(e){return n("tablecellclass",{value:r},e.dom)}),Fl(i,e.dom,Hl)})},mceTableToggleClass:function(e,t){a(function(e){i.formatter.toggle("tableclass",{value:t},e.dom),Fl(i,e.dom,Hl)})},mceTableToggleCaption:function(){Op(i).each(function(n){N(n,d).each(function(t){Yn(t,"caption").fold(function(){var e=S.fromTag("caption");P(e,S.fromText("Caption")),po(t,e,0),i.selection.setCursorLocation(e.dom,0)},function(e){pn("caption")(n)&&Nt("td",t).each(function(e){return i.selection.setCursorLocation(e.dom,0)}),I(e)}),Fl(i,t.dom,F)})})},mceTableSizingMode:function(e,t){return n=t,Op(i).each(function(e){pf(i)||gf(i)||mf(i)||N(e,d).each(function(e){"relative"!==n||ys(e)?"fixed"!==n||ws(e)?"responsive"!==n||xs(e)||Af(e):_f(e):Ef(e),mc(e),Fl(i,e.dom,F)})});var n},mceTableCellType:f(function(e){return"th"===e?t.makeCellsHeader:t.unmakeCellsHeader}),mceTableColType:f(function(e){return"th"===e?t.makeColumnsHeader:t.unmakeColumnsHeader}),mceTableRowType:f(function(e){switch(e){case"header":return t.makeRowsHeader;case"footer":return t.makeRowsFooter;default:return t.makeRowsBody}})},function(e,t){return i.addCommand(t,e)}),T({mceTableProps:g(Tp,i,!1),mceTableRowProps:g(wp,i),mceTableCellProps:g(lp,i,u)},function(e,t){return i.addCommand(t,function(){return e()})}),i.addCommand("mceInsertTable",function(e,t){j(t)&&0<It(t).length?Ym(i,t.rows,t.columns,t.options,"Invalid values for mceInsertTable - rows and columns values are required to insert a table."):Tp(i,!0)}),i.addCommand("mceTableApplyCellStyle",function(e,t){function r(e){return"tablecell"+e.toLowerCase().replace("-","")}var o;!j(t)||0===(o=Nc(u)).length||(t=Ut(t,function(e,t){return i.formatter.has(r(t))&&V(e)}),Yt(t))||(T(t,function(t,n){x(o,function(e){$g.normal(i,e.dom).setFormat(r(n),t)})}),m(o[0]).each(function(e){return Fl(i,e.dom,Hl)}))})},Ap=function(n,e,o){function t(r){return Mc(vc(n)).bind(function(n){return N(n,i).map(function(e){var t=Ec(o,e,n);return r(e,t)})}).getOr("")}var i=lc(n);T({mceTableRowType:function(){return t(e.getTableRowType)},mceTableCellType:function(){return t(e.getTableCellType)},mceTableColType:function(){return t(e.getTableColType)}},function(e,t){return n.addQueryValueHandler(t,e)})},Dp=function(){var t=Dg(),n=Dg();return{getRows:t.get,setRows:function(e){e.fold(t.clear,t.set),n.clear()},clearRows:t.clear,getColumns:n.get,setColumns:function(e){e.fold(n.clear,n.set),t.clear()},clearColumns:n.clear}},am={remove_similar:!0,inherit:!1},cm=d({selector:"td,th"},am),Mp={tablecellbackgroundcolor:d({styles:{backgroundColor:"%value"}},cm),tablecellverticalalign:d({styles:{"vertical-align":"%value"}},cm),tablecellbordercolor:d({styles:{borderColor:"%value"}},cm),tablecellclass:d({classes:["%value"]},cm),tableclass:d({selector:"table",classes:["%value"]},am),tablecellborderstyle:d({styles:{borderStyle:"%value"}},cm),tablecellborderwidth:d({styles:{borderWidth:"%value"}},cm)},Np=function(e){e.formatter.register(Mp)},Rp=et([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),zp=d(d({},Rp),{none:function(e){return Rp.none(e=void 0===e?void 0:e)}}),Bp=function(e,t,n,r,o){void 0===o&&(o=v);var i=1===r;return!i&&n<=0?zp.first(e[0]):i&&n>=e.length-1?zp.last(e[e.length-1]):o(n=e[i=n+r])?zp.middle(t,n):Bp(e,t,i,r,o)},Pp=function(n,e){return N(n,e).bind(function(e){var t=Dr(e);return ge(t,function(e){return k(n,e)}).map(function(e){return{index:e,all:t}})})},Ip=function(t,n,e){return Pp(t,e).fold(function(){return zp.none(t)},function(e){return Bp(e.all,t,e.index,1,n)})},Lp=function(t,n,e){return Pp(t,e).fold(function(){return zp.none()},function(e){return Bp(e.all,t,e.index,-1,n)})},Fp={create:function(e,t,n,r){return{start:e,soffset:t,finish:n,foffset:r}}},sm=et([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),H={before:sm.before,on:sm.on,after:sm.after,cata:function(e,t,n,r){return e.fold(t,n,r)},getStart:function(e){return e.fold(a,a,a)}},Hp=et([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Vp={domRange:Hp.domRange,relative:Hp.relative,exact:Hp.exact,exactFromRange:function(e){return Hp.exact(e.start,e.soffset,e.finish,e.foffset)},getWin:function(e){e=e.match({domRange:function(e){return S.fromDom(e.startContainer)},relative:function(e,t){return H.getStart(e)},exact:function(e,t,n,r){return e}});return S.fromDom(vn(e).dom.defaultView)},range:Fp.create},jp=function(e,t){e=e.document.createRange();return e.selectNode(t.dom),e},Up=function(e,t){e=e.document.createRange();return Wp(e,t),e},Wp=function(e,t){return e.selectNodeContents(t.dom)},$p=function(n,e){e.fold(function(e){n.setStartBefore(e.dom)},function(e,t){n.setStart(e.dom,t)},function(e){n.setStartAfter(e.dom)})},qp=function(n,e){e.fold(function(e){n.setEndBefore(e.dom)},function(e,t){n.setEnd(e.dom,t)},function(e){n.setEndAfter(e.dom)})},Gp=function(e,t,n){e=e.document.createRange();return $p(e,t),qp(e,n),e},Kp=function(e,t,n,r,o){e=e.document.createRange();return e.setStart(t.dom,n),e.setEnd(r.dom,o),e},Xp=function(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom,width:e.width,height:e.height}},Yp=function(e){var t=e.getClientRects(),t=0<t.length?t[0]:e.getBoundingClientRect();return 0<t.width||0<t.height?w.some(t).map(Xp):w.none()},Jp=et([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Zp=function(e,t,n){return t(S.fromDom(n.startContainer),n.startOffset,S.fromDom(n.endContainer),n.endOffset)},Qp=function(o,e){return e.match({domRange:function(e){return{ltr:m(e),rtl:w.none}},relative:function(e,t){return{ltr:Fe(function(){return Gp(o,e,t)}),rtl:Fe(function(){return w.some(Gp(o,t,e))})}},exact:function(e,t,n,r){return{ltr:Fe(function(){return Kp(o,e,t,n,r)}),rtl:Fe(function(){return w.some(Kp(o,n,r,e,t))})}}})},eh=function(e,t){var n=t.ltr();return n.collapsed?t.rtl().filter(function(e){return!1===e.collapsed}).map(function(e){return Jp.rtl(S.fromDom(e.endContainer),e.endOffset,S.fromDom(e.startContainer),e.startOffset)}).getOrThunk(function(){return Zp(e,Jp.ltr,n)}):Zp(e,Jp.ltr,n)},th=function(e,t){t=Qp(e,t);return eh(e,t)},nh=function(i,e){return th(i,e).match({ltr:function(e,t,n,r){var o=i.document.createRange();return o.setStart(e.dom,t),o.setEnd(n.dom,r),o},rtl:function(e,t,n,r){var o=i.document.createRange();return o.setStart(n.dom,r),o.setEnd(e.dom,t),o}})},rh=(Jp.ltr,Jp.rtl,function(e,t,n,r,o){if(0!==o){if(t===r)return o-1;for(var i=r,u=1;u<o;u++){var a=e(u),c=Math.abs(t-a.left);if(n<=a.bottom){if(n<a.top||i<c)return u-1;i=c}}}return 0}),oh=function(e,t,n){return t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom},ih=function(n,r,e,t,o){function i(e){var t=n.dom.createRange();return t.setStart(r.dom,e),t.collapse(!0),t}var u=Co(r).length,e=rh(function(e){return i(e).getBoundingClientRect()},e,t,o.right,u);return i(e)},uh=function(t,n,r,o){var e=t.dom.createRange(),e=(e.selectNode(n.dom),e.getClientRects());return ke(e,function(e){return oh(e,r,o)?w.some(e):w.none()}).map(function(e){return ih(t,n,r,o,e)})},ah=function(t,e,n,r){var o=t.dom.createRange(),e=l(e);return ke(e,function(e){return o.selectNode(e.dom),oh(o.getBoundingClientRect(),n,r)?ch(t,e,n,r):w.none()})},ch=function(e,t,n,r){return(dn(t)?uh:ah)(e,t,n,r)},sh=function(e,t,n,r){var o=e.dom.createRange(),o=(o.selectNode(t.dom),o.getBoundingClientRect()),n=Math.max(o.left,Math.min(o.right,n)),o=Math.max(o.top,Math.min(o.bottom,r));return ch(e,t,n,o)},lh=!0,fh=!1,dh=function(e,t){return t-e.left<e.right-t?lh:fh},mh=function(e,t,n){e=e.dom.createRange();return e.selectNode(t.dom),e.collapse(n),e},gh=function(t,e,n){var r=t.dom.createRange(),r=(r.selectNode(e.dom),r.getBoundingClientRect()),o=dh(r,n);return(o===lh?Wa:$a)(e).map(function(e){return mh(t,e,o)})},ph=function(e,t,n){var r=t.dom.getBoundingClientRect(),r=dh(r,n);return w.some(mh(e,t,r))},hh=document.caretPositionFromPoint?function(n,e,t){var r,o;return w.from(null==(o=(r=n.dom).caretPositionFromPoint)?void 0:o.call(r,e,t)).bind(function(e){var t;return null===e.offsetNode?w.none():((t=n.dom.createRange()).setStart(e.offsetNode,e.offset),t.collapse(),w.some(t))})}:document.caretRangeFromPoint?function(e,t,n){var r;return w.from(null==(r=(e=e.dom).caretRangeFromPoint)?void 0:r.call(e,t,n))}:function(a,c,s){return S.fromPoint(a,c,s).bind(function(r){function e(){return e=a,n=c,(0===l(t=r).length?ph:gh)(e,t,n);var e,t,n}var t,n,o,i,u;return 0===l(r).length?e():(n=r,o=c,i=s,(u=(t=a).dom.createRange()).selectNode(n.dom),u=u.getBoundingClientRect(),o=Math.max(u.left,Math.min(u.right,o)),u=Math.max(u.top,Math.min(u.bottom,i)),sh(t,n,o,u).orThunk(e))})},vh=function(e,t,n){e=S.fromDom(e.document);return hh(e,t,n).map(function(e){return Fp.create(S.fromDom(e.startContainer),e.startOffset,S.fromDom(e.endContainer),e.endOffset)})},bh=function(e,t){var n=E(e);return"input"===n?H.after(e):c(["br","img"],n)?0===t?H.before(e):H.after(e):H.on(e,t)},yh=function(e,t){e=e.fold(H.before,bh,H.after),t=t.fold(H.before,bh,H.after);return Vp.relative(e,t)},wh=function(e,t,n,r){e=bh(e,t),t=bh(n,r);return Vp.relative(e,t)},xh=function(e){return e.match({domRange:function(e){var t=S.fromDom(e.startContainer),n=S.fromDom(e.endContainer);return wh(t,e.startOffset,n,e.endOffset)},relative:yh,exact:wh})},Ch=function(e,t,n,r){var o=hn(e).dom.createRange();return o.setStart(e.dom,t),o.setEnd(n.dom,r),o},Sh=function(e,t,n,r){var o=Ch(e,t,n,r),e=k(e,n)&&t===r;return o.collapsed&&!e},kh=function(e){return w.from(e.getSelection())},Th=function(e,t){kh(e).each(function(e){e.removeAllRanges(),e.addRange(t)})},Oh=function(e,t,n,r,o){t=Kp(e,t,n,r,o);Th(e,t)},Eh=function(e,t,n,r,o,i){t.collapse(n.dom,r),t.extend(o.dom,i)},_h=function(i,e){return th(i,e).match({ltr:function(e,t,n,r){Oh(i,e,t,n,r)},rtl:function(t,n,r,o){kh(i).each(function(e){if(e.setBaseAndExtent)e.setBaseAndExtent(t.dom,n,r.dom,o);else if(e.extend)try{Eh(i,e,t,n,r,o)}catch(e){Oh(i,r,o,t,n)}else Oh(i,r,o,t,n)})}})},Ah=function(e,t,n,r,o){t=wh(t,n,r,o);_h(e,t)},Dh=function(e,t,n){t=yh(t,n);_h(e,t)},Mh=function(e){function t(e,t,n,r){return Kp(o,e,t,n,r)}var o=Vp.getWin(e).dom,e=xh(e);return th(o,e).match({ltr:t,rtl:t})},Nh=function(e){var t;return 0<e.rangeCount?(t=e.getRangeAt(0),e=e.getRangeAt(e.rangeCount-1),w.some(Fp.create(S.fromDom(t.startContainer),t.startOffset,S.fromDom(e.endContainer),e.endOffset))):w.none()},Rh=function(e){var t,n;return null!==e.anchorNode&&null!==e.focusNode&&(t=S.fromDom(e.anchorNode),n=S.fromDom(e.focusNode),Sh(t,e.anchorOffset,n,e.focusOffset))?w.some(Fp.create(t,e.anchorOffset,n,e.focusOffset)):Nh(e)},zh=function(e,t,n){n=((n=void 0===n?!0:n)?Up:jp)(e,t);Th(e,n)},Bh=function(e){return kh(e).filter(function(e){return 0<e.rangeCount}).bind(Rh)},Ph=function(e){return Bh(e).map(function(e){return Vp.exact(e.start,e.soffset,e.finish,e.foffset)})},Ih=function(e,t){e=nh(e,t);return Yp(e)},Lh=function(e,t,n){return vh(e,t,n)},Fh=function(e){kh(e).each(function(e){return e.removeAllRanges()})},Hh=tinymce.util.Tools.resolve("tinymce.util.VK"),Vh=function(e,t,n){return Wh(e,t,Ip(n,cl))},jh=function(e,t,n){return Wh(e,t,Lp(n,cl))},Uh=function(e,t){t=Vp.exact(t,0,t,0);return Mh(t)},Wh=function(n,t,e){return e.fold(w.none,w.none,function(e,t){return Wa(t).map(function(e){return Uh(n,e)})},function(e){return n.execCommand("mceTableInsertRowAfter"),Vh(n,t,e)})},$h=["table","li","dl"],qh=function(t,n,r){var o,i,e;t.keyCode===Hh.TAB&&(o=ac(n),i=function(e){var t=E(e);return k(e,o)||c($h,t)},e=n.selection.getRng(),e=S.fromDom(t.shiftKey?e.startContainer:e.endContainer),Ar(e,i).each(function(e){t.preventDefault(),N(e,i).each(r.clear),n.selection.collapse(t.shiftKey),(t.shiftKey?jh:Vh)(n,i,e).each(function(e){n.selection.setRng(e)})}))},Gh={create:function(e,t){return{selection:e,kill:t}}},Kh={create:function(e,t,n,r){return{start:H.on(e,t),finish:H.on(n,r)}}},Xh=function(e,t){e=nh(e,t);return Fp.create(S.fromDom(e.startContainer),e.startOffset,S.fromDom(e.endContainer),e.endOffset)},Yh=Kh.create,Jh=function(n,r,e,t,o,i,u){return k(e,o)&&t===i?w.none():_(e,"td,th",r).bind(function(t){return _(o,"td,th",r).bind(function(e){return Zh(n,r,t,e,u)})})},Zh=function(n,e,r,t,o){return k(r,t)?w.none():Yo(r,t,e).bind(function(e){var t=e.boxes.getOr([]);return 1<t.length?(o(n,t,e.start,e.finish),w.some(Gh.create(w.some(Yh(r,0,r,Ha(r))),!0))):w.none()})},Qh=function(e,t,n,r,o){return ti(r,e,t,o.firstSelectedSelector,o.lastSelectedSelector).map(function(e){return o.clearBeforeUpdate(n),o.selectRange(n,e.boxes,e.start,e.finish),e.boxes})},ev=function(e,t){return{item:e,mode:t}},tv=function(e,t,n,r){void 0===r&&(r=tv);e=e.property().children(t);return n.first(e).map(function(e){return ev(e,r)})},nv=[{current:Fu,next:Hu,fallback:w.none()},{current:Hu,next:tv,fallback:w.some(Fu)},{current:tv,next:tv,fallback:w.some(Hu)}],rv=function(t,n,r,o,e){return me(e=void 0===e?nv:e,function(e){return e.current===r}).bind(function(e){return e.current(t,n,o,e.next).orThunk(function(){return e.fallback.bind(function(e){return rv(t,n,e,o)})})})},ov=function(){return{sibling:function(e,t){return e.query().prevSibling(t)},first:function(e){return 0<e.length?w.some(e[e.length-1]):w.none()}}},iv=function(){return{sibling:function(e,t){return e.query().nextSibling(t)},first:function(e){return 0<e.length?w.some(e[0]):w.none()}}},uv=function(t,e,n,r,o,i){return rv(t,e,r,o).bind(function(e){return i(e.item)?w.none():n(e.item)?w.some(e.item):uv(t,e.item,n,e.mode,o,i)})},av=function(t){return function(e){return 0===t.property().children(e).length}},cv=function(e,t,n,r){return uv(e,t,n,Hu,ov(),r)},sv=function(e,t,n,r){return uv(e,t,n,Hu,iv(),r)},lv=To(),fv=function(e,t,n){return cv(lv,e,t,n)},dv=function(e,t,n){return sv(lv,e,t,n)},mv=function(e,t,n){return $n(e,t,n).isSome()},gv=et([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),pv=d(d({},gv),{verify:function(n,t,e,r,o,i,u){return _(r,"td,th",u).bind(function(e){return _(t,"td,th",u).map(function(t){return k(e,t)?k(r,e)&&Ha(e)===o?i(t):gv.none("in same cell"):Go(Uu,[e,t]).fold(function(){return function(e,t,n){t=e.getRect(t),e=e.getRect(n);return e.right>t.left&&e.left<t.right}(n,t,e)?gv.success():i(t)},function(e){return i(t)})})}).getOr(gv.none("default"))},cata:function(e,t,n,r,o){return e.fold(t,n,r,o)}}),hv=function(e,t,n,r){return{parent:e,children:t,element:n,index:r}},vv=function(r){return bn(r).bind(function(t){var n=l(t);return bv(n,r).map(function(e){return hv(t,n,r,e)})})},bv=function(e,t){return ge(e,g(k,t))},yv=function(e){return"br"===E(e)},wv=function(e,t,n){return t(e,n).bind(function(e){return dn(e)&&0===Co(e).trim().length?wv(e,t,n):w.some(e)})},xv=function(e,t,n){return n.traverse(t).orThunk(function(){return wv(t,n.gather,e)}).map(n.relative)},Cv=function(e,t){return Cn(e,t).filter(yv).orThunk(function(){return Cn(e,t-1).filter(yv)})},Sv=function(t,e,n,r){return Cv(e,n).bind(function(e){return r.traverse(e).fold(function(){return wv(e,r.gather,t).map(r.relative)},function(e){return vv(e).map(function(e){return H.on(e.parent,e.index)})})})},kv=function(e,t,n,r){return(yv(t)?xv(e,t,r):Sv(e,t,n,r)).map(function(e){return{start:e,finish:e}})},Tv=function(e){return pv.cata(e,function(e){return w.none()},function(){return w.none()},function(e){return w.some(If(e,0))},function(e){return w.some(If(e,Ha(e)))})},Ov=function(e,t){return{left:e.left,top:e.top+t,right:e.right,bottom:e.bottom+t}},Ev=function(e,t){return{left:e.left,top:e.top-t,right:e.right,bottom:e.bottom-t}},_v=function(e,t,n){return 0<=n&&n<Ha(t)?e.getRangedRect(t,n,t,n+1):0<n?e.getRangedRect(t,n-1,t,n):w.none()},Av=function(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}},Dv=function(e,t){return w.some(e.getRect(t))},Mv=function(e,t,n){return fn(t)?Dv(e,t).map(Av):dn(t)?_v(e,t,n).map(Av):w.none()},Nv=function(e,t){return fn(t)?Dv(e,t).map(Av):dn(t)?e.getRangedRect(t,0,t,Ha(t)).map(Av):w.none()},Rv=5,zv=et([{none:[]},{retry:["caret"]}]),Bv=function(e,t){return e.left<t.left||Math.abs(t.right-e.left)<1||e.left>t.right},lm={point:function(e){return e.bottom},adjuster:function(e,t,n,r,o){var i=Ov(o,Rv);return Math.abs(n.bottom-r.bottom)<1||n.top>o.bottom?zv.retry(i):n.top===o.bottom?zv.retry(Ov(o,1)):$u(e,t,o)?zv.retry(Wu(i,Rv,0)):zv.none()},move:Ov,gather:ju},Pv=function(e,t,n){return e.elementFromPoint(t,n).filter(function(e){return"table"===E(e)}).isSome()},Iv=function(e,t,n,r,o){return Lv(e,t,n,t.move(r,Rv),o)},Lv=function(n,r,o,i,u){return 0===u?w.some(i):Pv(n,i.left,r.point(i))?Iv(n,r,o,i,u-1):n.situsFromPoint(i.left,r.point(i)).bind(function(e){return e.start.fold(w.none,function(t){return Nv(n,t).bind(function(e){return r.adjuster(n,t,e,o,i).fold(w.none,function(e){return Lv(n,r,o,e,u-1)})}).orThunk(function(){return w.some(i)})},w.none)})},Fv={tryUp:g(qu,{point:function(e){return e.top},adjuster:function(e,t,n,r,o){var i=Ev(o,Rv);return Math.abs(n.top-r.top)<1||n.bottom<o.top?zv.retry(i):n.bottom===o.top?zv.retry(Ev(o,1)):$u(e,t,o)?zv.retry(Wu(i,Rv,0)):zv.none()},move:Ev,gather:Vu}),tryDown:g(qu,lm),ieTryUp:function(e,t){return e.situsFromPoint(t.left,t.top-Rv)},ieTryDown:function(e,t){return e.situsFromPoint(t.left,t.bottom+Rv)},getJumpSize:m(Rv)},Hv=20,Vv=function(n,r,o){return n.getSelection().bind(function(t){return kv(r,t.finish,t.foffset,o).fold(function(){return w.some(If(t.finish,t.foffset))},function(e){e=n.fromSitus(e),e=pv.verify(n,t.finish,t.foffset,e.finish,e.foffset,o.failure,r);return Tv(e)})})},jv=function(n,r,o,i,u,a){return 0===a?w.none():$v(n,r,o,i,u).bind(function(e){var t=n.fromSitus(e),t=pv.verify(n,o,i,t.finish,t.foffset,u.failure,r);return pv.cata(t,function(){return w.none()},function(){return w.some(e)},function(e){return k(o,e)&&0===i?Uv(n,o,i,Ev,u):jv(n,r,e,0,u,a-1)},function(e){return k(o,e)&&i===Ha(e)?Uv(n,o,i,Ov,u):jv(n,r,e,Ha(e),u,a-1)})})},Uv=function(t,e,n,r,o){return Mv(t,e,n).bind(function(e){return Wv(t,o,r(e,Fv.getJumpSize()))})},Wv=function(e,t,n){var r=Ct().browser;return r.isChrome()||r.isSafari()||r.isFirefox()||r.isEdge()?t.otherRetry(e,n):r.isIE()?t.ieRetry(e,n):w.none()},$v=function(t,e,n,r,o){return Mv(t,n,r).bind(function(e){return Wv(t,o,e)})},qv=function(t,n,r){return Vv(t,n,r).bind(function(e){return jv(t,n,e.element,e.offset,r,Hv).map(t.fromSitus)})},Gv=function(e,t){return mv(e,function(e){return bn(e).exists(function(e){return k(e,t)})})},Kv=function(t,r,o,e,i){return _(e,"td,th",r).bind(function(n){return _(n,"table",r).bind(function(e){return Gv(i,e)?qv(t,r,o).bind(function(t){return _(t.finish,"td,th",r).map(function(e){return{start:n,finish:e,range:t}})}):w.none()})})},Xv=function(e,t,n,r,o,i){return Ct().browser.isIE()?w.none():i(r,t).orThunk(function(){return Kv(e,t,n,r,o).map(function(e){e=e.range;return Gh.create(w.some(Yh(e.start,e.soffset,e.finish,e.foffset)),!0)})})},Yv=function(e,r){return _(e,"tr",r).bind(function(n){return _(n,"table",r).bind(function(e){var t=Pn(e,"tr");return k(n,t[0])?fv(e,function(e){return $a(e).isSome()},r).map(function(e){var t=Ha(e);return Gh.create(w.some(Yh(e,t,e,t)),!0)}):w.none()})})},Jv=function(e,r){return _(e,"tr",r).bind(function(n){return _(n,"table",r).bind(function(e){var t=Pn(e,"tr");return k(n,t[t.length-1])?dv(e,function(e){return Wa(e).isSome()},r).map(function(e){return Gh.create(w.some(Yh(e,0,e,0)),!0)}):w.none()})})},Zv=function(e,t,n,r,o,i,u){return Kv(e,n,r,o,i).bind(function(e){return Zh(t,n,e.start,e.finish,u)})},Qv=function(e,t){return _(e,"td,th",t)},e1=function(a,c,t,s){function n(u){r.on(function(e){s.clearBeforeUpdate(c),Qv(u.target,t).each(function(i){Yo(e,i,t).each(function(e){var t,n,r,o=e.boxes.getOr([]);1===o.length?(t=o[0],n="false"===sl(t),r=or(al(u.target),t,k),n&&r&&(s.selectRange(c,o,t,t),a.selectContents(t))):1<o.length&&(s.selectRange(c,o,e.start,e.finish),a.selectContents(i))})})})}var r=Dg(),o=r.clear;return{clearstate:o,mousedown:function(e){s.clear(c),Qv(e.target,t).each(r.set)},mouseover:function(e){n(e)},mouseup:function(e){n(e),o()}}},t1={traverse:xn,gather:ju,relative:H.before,otherRetry:Fv.tryDown,ieRetry:Fv.ieTryDown,failure:pv.failedDown},n1={traverse:ze,gather:Vu,relative:H.before,otherRetry:Fv.tryUp,ieRetry:Fv.ieTryUp,failure:pv.failedUp},r1=Gu(38),o1=Gu(40),i1=function(e){return 37<=e&&e<=40},u1={isBackward:Gu(37),isForward:Gu(39)},a1={isBackward:Gu(39),isForward:Gu(37)},c1=function(e){var e=void 0!==e?e.dom:document,t=e.body.scrollLeft||e.documentElement.scrollLeft,e=e.body.scrollTop||e.documentElement.scrollTop;return Ni(t,e)},s1=function(e,t,n){n=(void 0!==n?n.dom:document).defaultView;n&&n.scrollBy(e,t)},l1=function(i){return{elementFromPoint:function(e,t){return S.fromPoint(S.fromDom(i.document),e,t)},getRect:function(e){return e.dom.getBoundingClientRect()},getRangedRect:function(e,t,n,r){e=Vp.exact(e,t,n,r);return Ih(i,e)},getSelection:function(){return Ph(i).map(function(e){return Xh(i,e)})},fromSitus:function(e){e=Vp.relative(e.start,e.finish);return Xh(i,e)},situsFromPoint:function(e,t){return Lh(i,e,t).map(function(e){return Kh.create(e.start,e.soffset,e.finish,e.foffset)})},clearSelection:function(){Fh(i)},collapseSelection:function(o){void 0===o&&(o=!1),Ph(i).each(function(e){return e.fold(function(e){return e.collapse(o)},function(e,t){e=o?e:t;Dh(i,e,e)},function(e,t,n,r){e=o?e:n,n=o?t:r;Ah(i,e,n,e,n)})})},setSelection:function(e){Ah(i,e.start,e.soffset,e.finish,e.foffset)},setRelativeSelection:function(e,t){Dh(i,e,t)},selectNode:function(e){zh(i,e,!1)},selectContents:function(e){zh(i,e)},getInnerHeight:function(){return i.innerHeight},getScrollY:function(){return c1(S.fromDom(i.document)).top},scrollBy:function(e,t){s1(e,t,S.fromDom(i.document))}}},f1=function(e,t){return{rows:e,cols:t}},d1=function(e,t,n,r){e=l1(e),e=e1(e,t,n,r);return{clearstate:e.clearstate,mousedown:e.mousedown,mouseover:e.mouseover,mouseup:e.mouseup}},m1=function(e,c,s,l){function f(){return l.clear(c),w.none()}var d=l1(e);return{keydown:function(e,t,n,r,o,i){var e=e.raw,u=e.which,a=!0===e.shiftKey;return Jo(c,l.selectedSelector).fold(function(){return i1(u)&&!a&&l.clearBeforeUpdate(c),o1(u)&&a?g(Zv,d,c,s,t1,r,t,l.selectRange):r1(u)&&a?g(Zv,d,c,s,n1,r,t,l.selectRange):o1(u)?g(Xv,d,s,t1,r,t,Jv):r1(u)?g(Xv,d,s,n1,r,t,Yv):w.none},function(t){function e(e){return function(){return ke(e,function(e){return Qh(e.rows,e.cols,c,t,l)}).fold(function(){return Qo(c,l.firstSelectedSelector,l.lastSelectedSelector).map(function(e){var t=o1(u)||i.isForward(u)?H.after:H.before;return d.setRelativeSelection(H.on(e.first,0),t(e.table)),l.clear(c),Gh.create(w.none(),!0)})},function(e){return w.some(Gh.create(w.none(),!0))})}}return o1(u)&&a?e([f1(1,0)]):r1(u)&&a?e([f1(-1,0)]):i.isBackward(u)&&a?e([f1(0,-1),f1(-1,0)]):i.isForward(u)&&a?e([f1(0,1),f1(1,0)]):i1(u)&&!a?f:w.none})()},keyup:function(n,r,o,i,u){return Jo(c,l.selectedSelector).fold(function(){var e=n.raw,t=e.which;return!0===e.shiftKey&&i1(t)?Jh(c,s,r,o,i,u,l.selectRange):w.none()},w.none)}}},g1=function(e,r,t,o){var i=l1(e);return function(e,n){o.clearBeforeUpdate(r),Yo(e,n,t).each(function(e){var t=e.boxes.getOr([]);o.selectRange(r,t,e.start,e.finish),i.selectContents(n),i.collapseSelection()})}},p1=function(t,e){x(e,function(e){nl(t,e)})},h1={byClass:function(o){function i(e){el(e,n)}function t(e){p1(e,r)}function u(e){e=Pn(e,o.selectedSelector),x(e,t)}var n,r;n=o.selected,r=[o.selected,o.lastSelected,o.firstSelected];return{clearBeforeUpdate:u,clear:u,selectRange:function(e,t,n,r){u(e),x(t,i),el(n,o.firstSelected),el(r,o.lastSelected)},selectedSelector:o.selectedSelector,firstSelectedSelector:o.firstSelectedSelector,lastSelectedSelector:o.lastSelectedSelector}},byAttr:function(o,i,t){function n(e){D(e,o.selected),D(e,o.firstSelected),D(e,o.lastSelected)}function u(e){A(e,o.selected,"1")}function a(e){r(e),t()}function r(e){e=Pn(e,o.selectedSelector+","+o.firstSelectedSelector+","+o.lastSelectedSelector),x(e,n)}return{clearBeforeUpdate:r,clear:a,selectRange:function(e,t,n,r){a(e),x(t,u),A(n,o.firstSelected,"1"),A(r,o.lastSelected,"1"),i(t,n,r)},selectedSelector:o.selectedSelector,firstSelectedSelector:o.firstSelectedSelector,lastSelectedSelector:o.lastSelectedSelector}}},v1=function(e,t){e=e.slice(0,t[t.length-1].row+1),e=ad(e);return b(e,function(e){e=e.cells.slice(0,t[t.length-1].column+1);return p(e,function(e){return e.element})})},b1=function(e,t){e=e.slice(t[0].row+t[0].rowspan-1,e.length),e=ad(e);return b(e,function(e){e=e.cells.slice(t[0].column+t[0].colspan-1,e.cells.length);return p(e,function(e){return e.element})})},y1=function(e,t,n){var r=B.fromTable(e);return ld(r,t).map(function(e){var t=ud(r,n,!1);return{upOrLeftCells:v1(t,e),downOrRightCells:b1(t,e)}})},w1=tinymce.util.Tools.resolve("tinymce.Env"),x1=function(e){return!1===rl(S.fromDom(e.target),"ephox-snooker-resizer-bar")};function C1(m,g,e){var p=h1.byAttr(Tc,function(r,o,i){e.targets().each(function(n){N(o).each(function(e){var t=Cf(m),t=nc(h,S.fromDom(m.getDoc()),t),e=y1(e,n,t);Il(m,r,o,i,e)})})},function(){return Ll(m)});return m.on("init",function(e){var o,i,n=m.getWin(),r=ac(m),t=lc(m),u=d1(n,r,t,p),a=m1(n,r,t,p),c=g1(n,r,t,p),s=function(e){return!0===e.raw.shiftKey},l=(m.on("TableSelectorChange",function(e){return c(e.start,e.finish)}),function(e,t){s(e)&&(t.kill&&e.kill(),t.selection.each(function(e){e=Vp.relative(e.start,e.finish),e=nh(n,e);m.selection.setRng(e)}))}),f=function(e){return 0===e.button},d=function(e){return void 0===e.buttons||!(!w1.browser.isEdge()||0!==e.buttons)||0!=(1&e.buttons)},t=(o=Eg(S.fromDom(r)),i=Eg(0),{touchEnd:function(e){var t,n,r=S.fromDom(e.target);"td"!==E(r)&&"th"!==E(r)||(t=o.get(),n=i.get(),k(t,r)&&e.timeStamp-n<300&&(e.preventDefault(),c(r,r))),o.set(r),i.set(e.timeStamp)}});m.on("dragstart",function(e){u.clearstate()}),m.on("mousedown",function(e){f(e)&&x1(e)&&u.mousedown(qs(e))}),m.on("mouseover",function(e){d(e)&&x1(e)&&u.mouseover(qs(e))}),m.on("mouseup",function(e){f(e)&&x1(e)&&u.mouseup(qs(e))}),m.on("touchend",t.touchEnd),m.on("keyup",function(e){var t,n,r=qs(e);r.raw.shiftKey&&i1(r.raw.which)&&(e=m.selection.getRng(),t=S.fromDom(e.startContainer),n=S.fromDom(e.endContainer),a.keyup(r,t,e.startOffset,n,e.endOffset).each(function(e){l(r,e)}))}),m.on("keydown",function(e){var t=qs(e),e=(g().each(function(e){return e.hideBars()}),m.selection.getRng()),n=S.fromDom(e.startContainer),r=S.fromDom(e.endContainer),o=Ei(u1,a1)(S.fromDom(m.selection.getStart()));a.keydown(t,n,e.startOffset,r,e.endOffset,o).each(function(e){l(t,e)}),g().each(function(e){return e.showBars()})}),m.on("NodeChange",function(){var e=m.selection,t=S.fromDom(e.getStart()),e=S.fromDom(e.getEnd());Go(N,[t,e]).fold(function(){return p.clear(r)},h)})}),{clear:p.clear}}var S1=function(e,t){return Yn(e,t).isSome()},k1=function(r,o){function t(t){return d.forall(function(e){return!e[t]})}function e(){return g().bind(function(n){return cr(ur(N(n),p().bind(N),function(e,t){return k(e,t)?m(n)?w.some(Oc(n)):w.some(Ec(o,e,n)):w.none()}))})}function n(t){return N(t.element).map(function(e){var n=B.fromTable(e),e=ld(n,t).getOr([]),e=fe(e,function(e,t){return t.isLocked&&(e.onAny=!0,0===t.column?e.onFirst=!0:t.column+t.colspan>=n.grid.columns&&(e.onLast=!0)),e},{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:md(n,t).isSome(),unmergeable:gd(n,t).isSome(),locked:e}})}function i(){l.set(Fe(e)()),d=l.get().bind(n),x(f.get(),function(e){return e()})}function u(t,n){return h(function(){return l.get().fold(function(){t.setDisabled(!0)},function(e){t.setDisabled(n(e))})})}function a(t,n,r){return h(function(){return l.get().fold(function(){t.setDisabled(!0),t.setActive(!1)},function(e){t.setDisabled(n(e)),t.setActive(r(e))})})}function c(t){return d.exists(function(e){return e.locked[t]})}function s(t,n){return function(e){return a(e,function(e){return m(e.element)},function(){return r.queryCommandValue(t)===n})}}var l=Eg(w.none()),f=Eg([]),d=w.none(),m=pn("caption"),g=function(){return Dc(vc(r),lc(r))},p=function(){return Dc(bc(r),lc(r))},h=function(t){return t(),f.set(f.get().concat([t])),function(){f.set(C(f.get(),function(e){return e!==t}))}},v=s("mceTableRowType","header"),b=s("mceTableColType","th");return r.on("NodeChange ExecCommand TableSelectorChange",i),{onSetupTable:function(e){return u(e,function(e){return!1})},onSetupCellOrRow:function(e){return u(e,function(e){return m(e.element)})},onSetupColumn:function(t){return function(e){return u(e,function(e){return m(e.element)||c(t)})}},onSetupPasteable:function(t){return function(e){return u(e,function(e){return m(e.element)||t().isNone()})}},onSetupPasteableColumn:function(t,n){return function(e){return u(e,function(e){return m(e.element)||t().isNone()||c(n)})}},onSetupMergeable:function(e){return u(e,function(e){return t("mergeable")})},onSetupUnmergeable:function(e){return u(e,function(e){return t("unmergeable")})},resetTargets:i,onSetupTableWithCaption:function(e){return a(e,y,function(e){return N(e.element,lc(r)).exists(function(e){return S1(e,"caption")})})},onSetupTableRowHeaders:v,onSetupTableColumnHeaders:b,targets:l.get}},T1=function(t,e,n,r){t.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",fetch:function(e){return e("inserttable | cell row column | advtablesort | tableprops deletetable")}});function o(e){return function(){return t.execCommand(e)}}t.ui.registry.addButton("tableprops",{tooltip:"Table properties",onAction:o("mceTableProps"),icon:"table",onSetup:n.onSetupTable}),t.ui.registry.addButton("tabledelete",{tooltip:"Delete table",onAction:o("mceTableDelete"),icon:"table-delete-table",onSetup:n.onSetupTable}),t.ui.registry.addButton("tablecellprops",{tooltip:"Cell properties",onAction:o("mceTableCellProps"),icon:"table-cell-properties",onSetup:n.onSetupCellOrRow}),t.ui.registry.addButton("tablemergecells",{tooltip:"Merge cells",onAction:o("mceTableMergeCells"),icon:"table-merge-cells",onSetup:n.onSetupMergeable}),t.ui.registry.addButton("tablesplitcells",{tooltip:"Split cell",onAction:o("mceTableSplitCells"),icon:"table-split-cells",onSetup:n.onSetupUnmergeable}),t.ui.registry.addButton("tableinsertrowbefore",{tooltip:"Insert row before",onAction:o("mceTableInsertRowBefore"),icon:"table-insert-row-above",onSetup:n.onSetupCellOrRow}),t.ui.registry.addButton("tableinsertrowafter",{tooltip:"Insert row after",onAction:o("mceTableInsertRowAfter"),icon:"table-insert-row-after",onSetup:n.onSetupCellOrRow}),t.ui.registry.addButton("tabledeleterow",{tooltip:"Delete row",onAction:o("mceTableDeleteRow"),icon:"table-delete-row",onSetup:n.onSetupCellOrRow}),t.ui.registry.addButton("tablerowprops",{tooltip:"Row properties",onAction:o("mceTableRowProps"),icon:"table-row-properties",onSetup:n.onSetupCellOrRow}),t.ui.registry.addButton("tableinsertcolbefore",{tooltip:"Insert column before",onAction:o("mceTableInsertColBefore"),icon:"table-insert-column-before",onSetup:n.onSetupColumn("onFirst")}),t.ui.registry.addButton("tableinsertcolafter",{tooltip:"Insert column after",onAction:o("mceTableInsertColAfter"),icon:"table-insert-column-after",onSetup:n.onSetupColumn("onLast")}),t.ui.registry.addButton("tabledeletecol",{tooltip:"Delete column",onAction:o("mceTableDeleteCol"),icon:"table-delete-column",onSetup:n.onSetupColumn("onAny")}),t.ui.registry.addButton("tablecutrow",{tooltip:"Cut row",icon:"cut-row",onAction:o("mceTableCutRow"),onSetup:n.onSetupCellOrRow}),t.ui.registry.addButton("tablecopyrow",{tooltip:"Copy row",icon:"duplicate-row",onAction:o("mceTableCopyRow"),onSetup:n.onSetupCellOrRow}),t.ui.registry.addButton("tablepasterowbefore",{tooltip:"Paste row before",icon:"paste-row-before",onAction:o("mceTablePasteRowBefore"),onSetup:n.onSetupPasteable(r.getRows)}),t.ui.registry.addButton("tablepasterowafter",{tooltip:"Paste row after",icon:"paste-row-after",onAction:o("mceTablePasteRowAfter"),onSetup:n.onSetupPasteable(r.getRows)}),t.ui.registry.addButton("tablecutcol",{tooltip:"Cut column",icon:"cut-column",onAction:o("mceTableCutCol"),onSetup:n.onSetupColumn("onAny")}),t.ui.registry.addButton("tablecopycol",{tooltip:"Copy column",icon:"duplicate-column",onAction:o("mceTableCopyCol"),onSetup:n.onSetupColumn("onAny")}),t.ui.registry.addButton("tablepastecolbefore",{tooltip:"Paste column before",icon:"paste-column-before",onAction:o("mceTablePasteColBefore"),onSetup:n.onSetupPasteableColumn(r.getColumns,"onFirst")}),t.ui.registry.addButton("tablepastecolafter",{tooltip:"Paste column after",icon:"paste-column-after",onAction:o("mceTablePasteColAfter"),onSetup:n.onSetupPasteableColumn(r.getColumns,"onLast")}),t.ui.registry.addButton("tableinsertdialog",{tooltip:"Insert table",onAction:o("mceInsertTable"),icon:"table"});r=Pg(df(t)),0!==r.length&&t.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:Ig(t,e,r,"tableclass",function(e){return t.execCommand("mceTableToggleClass",!1,e)}),onSetup:n.onSetupTable}),r=Pg(lf(t));0!==r.length&&t.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:Ig(t,e,r,"tablecellclass",function(e){return t.execCommand("mceTableCellToggleClass",!1,e)}),onSetup:n.onSetupCellOrRow}),t.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:Ig(t,e,dg,"tablecellverticalalign",Bg(t,"vertical-align")),onSetup:n.onSetupCellOrRow}),t.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:Ig(t,e,Jl(t),"tablecellborderwidth",Bg(t,"border-width")),onSetup:n.onSetupCellOrRow}),t.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:Ig(t,e,Zl(t),"tablecellborderstyle",Bg(t,"border-style")),onSetup:n.onSetupCellOrRow}),t.ui.registry.addToggleButton("tablecaption",{tooltip:"Table caption",onAction:o("mceTableToggleCaption"),icon:"table-caption",onSetup:n.onSetupTableWithCaption}),t.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:function(e){return e(Lg(t,kf(t),"background-color"))},onSetup:n.onSetupCellOrRow}),t.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:function(e){return e(Lg(t,Tf(t),"border-color"))},onSetup:n.onSetupCellOrRow}),t.ui.registry.addToggleButton("tablerowheader",{tooltip:"Row header",icon:"table-top-header",onAction:Fg(t),onSetup:n.onSetupTableRowHeaders}),t.ui.registry.addToggleButton("tablecolheader",{tooltip:"Column header",icon:"table-left-header",onAction:Hg(t),onSetup:n.onSetupTableColumnHeaders})},O1=function(t){var e=hf(t);0<e.length&&t.ui.registry.addContextToolbar("table",{predicate:function(e){return t.dom.is(e,"table")&&t.getBody().contains(e)},items:e,scope:"node",position:"node"})},E1=function(t,e,n,r){function o(e){return function(){return t.execCommand(e)}}function i(e){t.execCommand("mceInsertTable",!1,{rows:e.numRows,columns:e.numColumns})}var u={text:"Table properties",onSetup:n.onSetupTable,onAction:o("mceTableProps")},a={text:"Delete table",icon:"table-delete-table",onSetup:n.onSetupTable,onAction:o("mceTableDelete")},c=(t.ui.registry.addMenuItem("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",onAction:o("mceTableInsertRowBefore"),onSetup:n.onSetupCellOrRow}),t.ui.registry.addMenuItem("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",onAction:o("mceTableInsertRowAfter"),onSetup:n.onSetupCellOrRow}),t.ui.registry.addMenuItem("tabledeleterow",{text:"Delete row",icon:"table-delete-row",onAction:o("mceTableDeleteRow"),onSetup:n.onSetupCellOrRow}),t.ui.registry.addMenuItem("tablerowprops",{text:"Row properties",icon:"table-row-properties",onAction:o("mceTableRowProps"),onSetup:n.onSetupCellOrRow}),t.ui.registry.addMenuItem("tablecutrow",{text:"Cut row",icon:"cut-row",onAction:o("mceTableCutRow"),onSetup:n.onSetupCellOrRow}),t.ui.registry.addMenuItem("tablecopyrow",{text:"Copy row",icon:"duplicate-row",onAction:o("mceTableCopyRow"),onSetup:n.onSetupCellOrRow}),t.ui.registry.addMenuItem("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",onAction:o("mceTablePasteRowBefore"),onSetup:n.onSetupPasteable(r.getRows)}),t.ui.registry.addMenuItem("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",onAction:o("mceTablePasteRowAfter"),onSetup:n.onSetupPasteable(r.getRows)}),{type:"nestedmenuitem",text:"Row",getSubmenuItems:m("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")}),r=(t.ui.registry.addMenuItem("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",onAction:o("mceTableInsertColBefore"),onSetup:n.onSetupColumn("onFirst")}),t.ui.registry.addMenuItem("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",onAction:o("mceTableInsertColAfter"),onSetup:n.onSetupColumn("onLast")}),t.ui.registry.addMenuItem("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",onAction:o("mceTableDeleteCol"),onSetup:n.onSetupColumn("onAny")}),t.ui.registry.addMenuItem("tablecutcolumn",{text:"Cut column",icon:"cut-column",onAction:o("mceTableCutCol"),onSetup:n.onSetupColumn("onAny")}),t.ui.registry.addMenuItem("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",onAction:o("mceTableCopyCol"),onSetup:n.onSetupColumn("onAny")}),t.ui.registry.addMenuItem("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",onAction:o("mceTablePasteColBefore"),onSetup:n.onSetupPasteableColumn(r.getColumns,"onFirst")}),t.ui.registry.addMenuItem("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",onAction:o("mceTablePasteColAfter"),onSetup:n.onSetupPasteableColumn(r.getColumns,"onLast")}),{type:"nestedmenuitem",text:"Column",getSubmenuItems:m("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")}),s=(t.ui.registry.addMenuItem("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",onAction:o("mceTableCellProps"),onSetup:n.onSetupCellOrRow}),t.ui.registry.addMenuItem("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",onAction:o("mceTableMergeCells"),onSetup:n.onSetupMergeable}),t.ui.registry.addMenuItem("tablesplitcells",{text:"Split cell",icon:"table-split-cells",onAction:o("mceTableSplitCells"),onSetup:n.onSetupUnmergeable}),{type:"nestedmenuitem",text:"Cell",getSubmenuItems:m("tablecellprops tablemergecells tablesplitcells")}),l=(!1===cf(t)?t.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:o("mceInsertTable")}):t.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:function(){return[{type:"fancymenuitem",fancytype:"inserttable",onAction:i}]}}),t.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:o("mceInsertTable")}),t.ui.registry.addMenuItem("tableprops",u),t.ui.registry.addMenuItem("deletetable",a),t.ui.registry.addNestedMenuItem("row",c),t.ui.registry.addNestedMenuItem("column",r),t.ui.registry.addNestedMenuItem("cell",s),t.ui.registry.addContextMenu("table",{update:function(){return n.resetTargets(),n.targets().fold(m(""),function(e){return"caption"===E(e.element)?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"})}}),Pg(df(t))),f=(0!==l.length&&t.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:function(){return zg(t,e,l,"tableclass",function(e){return t.execCommand("mceTableToggleClass",!1,e)})},onSetup:n.onSetupTable}),Pg(lf(t)));0!==f.length&&t.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:function(){return zg(t,e,f,"tablecellclass",function(e){return t.execCommand("mceTableCellToggleClass",!1,e)})},onSetup:n.onSetupCellOrRow}),t.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:function(){return zg(t,e,dg,"tablecellverticalalign",Bg(t,"vertical-align"))},onSetup:n.onSetupCellOrRow}),t.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:function(){return zg(t,e,Jl(t),"tablecellborderwidth",Bg(t,"border-width"))},onSetup:n.onSetupCellOrRow}),t.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:function(){return zg(t,e,Zl(t),"tablecellborderstyle",Bg(t,"border-style"))},onSetup:n.onSetupCellOrRow}),t.ui.registry.addToggleMenuItem("tablecaption",{icon:"table-caption",text:"Table caption",onAction:o("mceTableToggleCaption"),onSetup:n.onSetupTableWithCaption}),t.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:function(){return Lg(t,kf(t),"background-color")},onSetup:n.onSetupCellOrRow}),t.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:function(){return Lg(t,Tf(t),"border-color")},onSetup:n.onSetupCellOrRow}),t.ui.registry.addToggleMenuItem("tablerowheader",{text:"Row header",icon:"table-top-header",onAction:Fg(t),onSetup:n.onSetupTableRowHeaders}),t.ui.registry.addToggleMenuItem("tablecolheader",{text:"Column header",icon:"table-left-header",onAction:Hg(t),onSetup:n.onSetupTableColumnHeaders})};Qe.add("table",function(t){var e=ci(function(){return ac(t)},function(){return Mc(vc(t),lc(t))},Tc.selectedSelector),n=k1(t,e),r=Pf(t),o=C1(t,r.lazyResize,n),i=zm(t,o,r.lazyWire),u=Dp();return _p(t,i,o,e,u),Ap(t,i,e),Ic(t,e,i),E1(t,e,n,u),T1(t,e,n,u),O1(t),t.on("PreInit",function(){t.serializer.addTempAttr(Tc.firstSelected),t.serializer.addTempAttr(Tc.lastSelected),Np(t)}),nf(t)&&t.on("keydown",function(e){qh(e,t,o)}),t.on("remove",function(){r.destroy()}),eg(t,u,r,n)})}(),function(){function e(){}function i(e){return function(){return e}}function t(e){return e}var n,r,o=tinymce.util.Tools.resolve("tinymce.PluginManager"),u=(n="string",function(e){return t=typeof(e=e),(null===e?"null":"object"==t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"==t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t)===n;var t}),a=function(e){return typeof e===r};function c(){return N}var s=i(!(r="function")),l=i(!0),d=tinymce.util.Tools.resolve("tinymce.util.Tools"),m=tinymce.util.Tools.resolve("tinymce.util.XHR"),f=function(e){return e.getParam("template_cdate_classes","cdate")},g=function(e){return e.getParam("template_mdate_classes","mdate")},p=function(e){return e.getParam("template_selected_content_classes","selcontent")},h=function(e){return e.getParam("template_preview_replace_values")},v=function(e){return e.getParam("content_style","","string")},b=function(e){return e.getParam("content_css_cors",!1,"boolean")},y=function(e){return e.getParam("template_replace_values")},w=function(e){return e.getParam("templates")},x=function(e){return e.getParam("template_cdate_format",e.translate("%Y-%m-%d"))},C=function(e){return e.getParam("template_mdate_format",e.translate("%Y-%m-%d"))},S=function(e){return e.getParam("body_class","","hash")[e.id]||""},k=function(e){var t=e.getParam("body_class","","string");return-1===t.indexOf("=")?t:S(e)},T=function(e,t){if((e=""+e).length<t)for(var n=0;n<t-e.length;n++)e="0"+e;return e},O=function(e,t,n){void 0===n&&(n=new Date);var r="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),o="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),i="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),u="January February March April May June July August September October November December".split(" ");return t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace("%D","%m/%d/%Y")).replace("%r","%I:%M:%S %p")).replace("%Y",""+n.getFullYear())).replace("%y",""+n.getYear())).replace("%m",T(n.getMonth()+1,2))).replace("%d",T(n.getDate(),2))).replace("%H",""+T(n.getHours(),2))).replace("%M",""+T(n.getMinutes(),2))).replace("%S",""+T(n.getSeconds(),2))).replace("%I",""+((n.getHours()+11)%12+1))).replace("%p",n.getHours()<12?"AM":"PM")).replace("%B",""+e.translate(u[n.getMonth()]))).replace("%b",""+e.translate(i[n.getMonth()]))).replace("%A",""+e.translate(o[n.getDay()]))).replace("%a",""+e.translate(r[n.getDay()]))).replace("%%","%")},E=function(t,n){return function(){var e=w(t);a(e)?e(n):u(e)?m.send({url:e,success:function(e){n(JSON.parse(e))}}):n(e)}},_=function(n,e){return d.each(e,function(e,t){a(e)&&(e=e(t)),n=n.replace(new RegExp("\\{\\$"+t+"\\}","g"),e)}),n},A=function(e,t){var r=e.dom,o=y(e);d.each(r.select("*",t),function(n){d.each(o,function(e,t){r.hasClass(n,t)&&a(e)&&e(n)})})},D=function(e,t){return new RegExp("\\b"+t+"\\b","g").test(e.className)},M=function(t,e,n){var r=t.dom,o=t.selection.getContent(),n=(n=_(n,y(t)),r.create("div",null,n)),i=r.select(".mceTmpl",n);i&&0<i.length&&(n=r.create("div",null)).appendChild(i[0].cloneNode(!0)),d.each(r.select("*",n),function(e){D(e,f(t).replace(/\s+/g,"|"))&&(e.innerHTML=O(t,x(t))),D(e,g(t).replace(/\s+/g,"|"))&&(e.innerHTML=O(t,C(t))),D(e,p(t).replace(/\s+/g,"|"))&&(e.innerHTML=o)}),A(t,n),t.execCommand("mceInsertContent",!1,n.innerHTML),t.addVisual()},N={fold:function(e,t){return e()},isSome:s,isNone:l,getOr:t,getOrThunk:R,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:i(null),getOrUndefined:i(void 0),or:t,orThunk:R,map:c,each:e,bind:c,exists:s,forall:l,filter:function(){return N},toArray:function(){return[]},toString:i("none()")};function R(e){return e()}function z(n){function e(){return o}function t(e){return e(n)}var r=i(n),o={fold:function(e,t){return t(n)},isSome:l,isNone:s,getOr:r,getOrThunk:r,getOrDie:r,getOrNull:r,getOrUndefined:r,or:e,orThunk:e,map:function(e){return z(e(n))},each:function(e){e(n)},bind:t,exists:t,forall:t,filter:function(e){return e(n)?o:N},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return o}function P(e){e.addCommand("mceInsertTemplate",function(r){for(var o=[],e=1;e<arguments.length;e++)o[e-1]=arguments[e];return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=o.concat(e);return r.apply(null,n)}}(M,e)),e.addCommand("mceTemplate",E(e,X(e)))}var B={some:z,none:c,from:function(e){return null==e?N:z(e)}},I=function(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o)}return r},L=function(e,t,n){for(var r=0,o=e.length;r<o;r++){var i=e[r];if(t(i,r))return B.some(i);if(n(i,r))break}return B.none()},F=function(e,t){return L(e,t,s)},H=tinymce.util.Tools.resolve("tinymce.Env"),V=tinymce.util.Tools.resolve("tinymce.util.Promise"),j=Object.hasOwnProperty,U=function(e,t){return W(e,t)?B.from(e[t]):B.none()},W=function(e,t){return j.call(e,t)},$={'"':"&quot;","<":"&lt;",">":"&gt;","&":"&amp;","'":"&#039;"},q=function(e){return e.replace(/["'<>&]/g,function(e){return U($,e).getOr(e)})},G=function(t,e){var n,r,o,i,u,a;return-1===e.indexOf("<html>")&&(n="",o=v(t),r=b(t)?' crossorigin="anonymous"':"",d.each(t.contentCSS,function(e){n+='<link type="text/css" rel="stylesheet" href="'+t.documentBaseURI.toAbsolute(e)+'"'+r+">"}),o&&(n+='<style type="text/css">'+o+"</style>"),o=k(t),i=t.dom.encode,u='<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A" && !('+(H.mac?"e.metaKey":"e.ctrlKey && !e.altKey")+")) {e.preventDefault();}}}, false);<\/script> ",a=(a=t.getBody().dir)?' dir="'+i(a)+'"':"",e='<!DOCTYPE html><html><head><base href="'+i(t.documentBaseURI.getURI())+'">'+n+u+'</head><body class="'+i(o)+'"'+a+">"+e+"</body></html>"),_(e,h(t))},K=function(c,e){var s=function(e,t){return F(e,function(e){return e.text===t})},l=function(e){c.windowManager.alert("Could not load the specified template.",function(){return e.focus("template")})},f=function(e){return new V(function(t,n){e.value.url.fold(function(){return t(e.value.content.getOr(""))},function(e){return m.send({url:e,success:function(e){t(e)},error:function(e){n(e)}})})})};(e&&0!==e.length?B.from(d.map(e,function(e,t){function n(e){return void 0!==e.url}return{selected:0===t,text:e.title,value:{url:n(e)?B.from(e.url):B.none(),content:n(e)?B.none():B.from(e.content),description:e.description}}})):(e=c.translate("No templates defined."),c.notificationManager.open({text:e,type:"info"}),B.none())).each(function(i){function u(e,t,n){var n=G(c,n),r=[{type:"selectbox",name:"template",label:"Templates",items:o},{type:"htmlpanel",html:'<p aria-live="polite">'+q(t.value.description)+"</p>"},{label:"Preview",type:"iframe",name:"preview",sandboxed:!1}],t={template:t.text,preview:n};e.unblock(),e.redial(a(r,t)),e.focus("template")}var o=I(i,function(e){return{text:e.text,value:e.text}}),a=function(e,t){return{title:"Insert Template",size:"large",body:{type:"panel",items:e},initialData:t,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:function(t){var e=t.getData();s(n,e.template).each(function(e){f(e).then(function(e){c.execCommand("mceInsertTemplate",!1,e),t.close()}).catch(function(){t.disable("save"),l(t)})})},onChange:(r=n=i,o=u,function(n,e){"template"===e.name&&(e=n.getData().template,s(r,e).each(function(t){n.block("Loading..."),f(t).then(function(e){o(n,t,e)}).catch(function(){o(n,t,""),n.disable("save"),l(n)})}))})};var r,o,n},t=c.windowManager.open(a([],{template:"",preview:""}));t.block("Loading..."),f(i[0]).then(function(e){u(t,i[0],e)}).catch(function(){u(t,i[0],""),t.disable("save"),l(t)})})},X=function(t){return function(e){K(t,e)}};o.add("template",function(e){function t(){return n.execCommand("mceTemplate")}var n,r;(n=e).ui.registry.addButton("template",{icon:"template",tooltip:"Insert template",onAction:t}),n.ui.registry.addMenuItem("template",{icon:"template",text:"Insert template...",onAction:t}),P(e),(r=e).on("PreProcess",function(e){var t=r.dom,n=C(r);d.each(t.select("div",e.node),function(e){t.hasClass(e,"mceTmpl")&&(d.each(t.select("*",e),function(e){t.hasClass(e,g(r).replace(/\s+/g,"|"))&&(e.innerHTML=O(r,n))}),A(r,e))})})})}(),tinymce.util.Tools.resolve("tinymce.PluginManager").add("textcolor",function(){}),function(){var P=tinymce.util.Tools.resolve("tinymce.PluginManager"),u=function(){return(u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function c(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||((r=r||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}function e(n){return function(e){return t=typeof(e=e),(null===e?"null":"object"==t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"==t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t)===n;var t}}function t(){}function i(e){return function(){return e}}function r(e){return e}function n(){return d}var a=e("string"),I=e("object"),s=e("array"),l=i(!1),f=i(!0),d={fold:function(e,t){return e()},isSome:l,isNone:f,getOr:r,getOrThunk:o,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:i(null),getOrUndefined:i(void 0),or:r,orThunk:o,map:n,each:t,bind:n,exists:l,forall:f,filter:function(){return d},toArray:function(){return[]},toString:i("none()")};function o(e){return e()}function m(n){function e(){return o}function t(e){return e(n)}var r=i(n),o={fold:function(e,t){return t(n)},isSome:f,isNone:l,getOr:r,getOrThunk:r,getOrDie:r,getOrNull:r,getOrUndefined:r,or:e,orThunk:e,map:function(e){return m(e(n))},each:function(e){e(n)},bind:t,exists:t,forall:t,filter:function(e){return e(n)?o:d},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return o}function g(n){return{isValue:f,isError:l,getOr:i(n),getOrThunk:i(n),getOrDie:i(n),or:function(e){return g(n)},orThunk:function(e){return g(n)},fold:function(e,t){return t(n)},map:function(e){return g(e(n))},mapError:function(e){return g(n)},each:function(e){e(n)},bind:function(e){return e(n)},exists:function(e){return e(n)},forall:function(e){return e(n)},toOptional:function(){return h.some(n)}}}function p(n){return{isValue:l,isError:f,getOr:r,getOrThunk:function(e){return e()},getOrDie:function(){throw e=String(n),new Error(e);var e},or:r,orThunk:function(e){return e()},fold:function(e,t){return e(n)},map:function(e){return p(n)},mapError:function(e){return p(e(n))},each:t,bind:function(e){return p(n)},exists:l,forall:f,toOptional:h.none}}var h={some:m,none:n,from:function(e){return null==e?d:m(e)}},L=Array.prototype.slice,F=Array.prototype.indexOf,H=function(e,t){return F.call(e,t)},v=function(e,t){return-1<H(e,t)},b=function(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o)}return r},y=function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)},V=function(e,t){for(var n=e.length-1;0<=n;n--)t(e[n],n)},w=function(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r)&&n.push(i)}return n},x=function(e,n,r){return V(e,function(e,t){r=n(r,e,t)}),r},j=function(e,n,r){return y(e,function(e,t){r=n(r,e,t)}),r},U=function(e,t,n){for(var r=0,o=e.length;r<o;r++){var i=e[r];if(t(i,r))return h.some(i);if(n(i,r))break}return h.none()},W=function(e,t){return U(e,t,l)},$=function(e,t){for(var n=0,r=e.length;n<r;++n)if(!0!==t(e[n],n))return!1;return!0},q=function(e,t){e=L.call(e,0);return e.sort(t),e},G=function(e,t){return 0<=t&&t<e.length?h.some(e[t]):h.none()},K=function(e){return G(e,0)},X=Object.keys,Y=Object.hasOwnProperty,J=function(e,t){return Y.call(e,t)},Z=(function(u){if(!s(u))throw new Error("cases must be an array");if(0===u.length)throw new Error("there must be at least one case");var a=[],n={};return y(u,function(e,r){var t=X(e);if(1!==t.length)throw new Error("one and only one name per case");var o=t[0],i=e[o];if(void 0!==n[o])throw new Error("duplicate key detected:"+o);if("cata"===o)throw new Error("cannot have a case named cata (sorry)");if(!s(i))throw new Error("case arguments must be an array");a.push(o),n[o]=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=n.length;if(t!==i.length)throw new Error("Wrong number of arguments to case "+o+". Expected "+i.length+" ("+i+"), got "+t);return{fold:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(e.length!==u.length)throw new Error("Wrong number of arguments to fold. Expected "+u.length+", got "+e.length);return e[r].apply(null,n)},match:function(e){var t=X(e);if(a.length!==t.length)throw new Error("Wrong number of arguments to match. Expected: "+a.join(",")+"\nActual: "+t.join(","));if($(a,function(e){return v(t,e)}))return e[o].apply(null,n);throw new Error("Not all branches were specified when using match. Specified: "+t.join(", ")+"\nRequired: "+a.join(", "))},log:function(e){console.log(e,{constructors:a,constructor:o,params:n})}}}}),n}([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]),function(e){var t=[],n=[];return y(e,function(e){e.fold(function(e){t.push(e)},function(e){n.push(e)})}),{errors:t,values:n}}),C={value:g,error:p,fromOption:function(e,t){return e.fold(function(){return p(t)},g)}},Q=function(e){return"inline-command"===e.type||"inline-format"===e.type},ee=function(e){return"block-command"===e.type||"block-format"===e.type},te=function(e){return q(e,function(e,t){return e.start.length===t.start.length?0:e.start.length>t.start.length?-1:1})},ne=function(r){function o(e){return C.error({message:e,pattern:r})}function e(e,t,n){if(void 0===r.format)return void 0!==r.cmd?a(r.cmd)?C.value(n(r.cmd,r.value)):o(e+" pattern has non-string `cmd` parameter"):o(e+" pattern is missing both `format` and `cmd` parameters");if(n=void 0,s(r.format)){if(!$(r.format,a))return o(e+" pattern has non-string items in the `format` array");n=r.format}else{if(!a(r.format))return o(e+" pattern has non-string `format` parameter");n=[r.format]}return C.value(t(n))}var n,i;return I(r)?a(r.start)?void 0!==r.end?a(r.end)?0===r.start.length&&0===r.end.length?o("Inline pattern has empty `start` and `end` parameters"):(n=r.start,0===(i=r.end).length&&(i=n,n=""),e("Inline",function(e){return{type:"inline-format",start:n,end:i,format:e}},function(e,t){return{type:"inline-command",start:n,end:i,cmd:e,value:t}})):o("Inline pattern has non-string `end` parameter"):void 0!==r.replacement?a(r.replacement)?0===r.start.length?o("Replacement pattern has empty `start` parameter"):C.value({type:"inline-command",start:"",end:r.start,cmd:"mceInsertContent",value:r.replacement}):o("Replacement pattern has non-string `replacement` parameter"):0===r.start.length?o("Block pattern has empty `start` parameter"):e("Block",function(e){return{type:"block-format",start:r.start,format:e[0]}},function(e,t){return{type:"block-command",start:r.start,cmd:e,value:t}}):o("Raw pattern is missing `start` parameter"):o("Raw pattern is not an object")},re=function(e){return"block-command"===e.type?{start:e.start,cmd:e.cmd,value:e.value}:"block-format"===e.type?{start:e.start,format:e.format}:"inline-command"===e.type?"mceInsertContent"===e.cmd&&""===e.start?{start:e.end,replacement:e.value}:{start:e.start,end:e.end,cmd:e.cmd,value:e.value}:"inline-format"===e.type?{start:e.start,end:e.end,format:1===e.format.length?e.format[0]:e.format}:void 0},oe=function(e){return{inlinePatterns:w(e,Q),blockPatterns:te(w(e,ee))}},ie="undefined"!=typeof window?window:Function("return this;")(),ue=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=ie.console;n&&(n.error||n.log).apply(n,e)},ae=[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}],ce=function(e){e=e.getParam("forced_root_block","p");return!1===e?"":!0===e?"p":e},se=tinymce.util.Tools.resolve("tinymce.util.Delay"),le=tinymce.util.Tools.resolve("tinymce.util.VK"),fe="\ufeff",de="",me=tinymce.util.Tools.resolve("tinymce.util.Tools"),ge=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),S=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker"),k=function(e,t){return{container:e,offset:t}},T=function(e){return e.nodeType===Node.TEXT_NODE},O=function(e,t,n){var r;t&&e.isEmpty(t)&&!n(t)&&(r=t.parentNode,e.remove(t),O(e,r,n))},E=function(e,t,n,r){void 0===r&&(r=!0);var o=t.startContainer.parentNode,i=t.endContainer.parentNode;t.deleteContents(),r&&!n(t.startContainer)&&(T(t.startContainer)&&0===t.startContainer.data.length&&e.remove(t.startContainer),T(t.endContainer)&&0===t.endContainer.data.length&&e.remove(t.endContainer),O(e,o,n),o!==i)&&O(e,i,n)},pe=function(e,t){t=t.get(e);return s(t)&&K(t).exists(function(e){return J(e,"block")})},_=function(e){return 0===e.start.length},A=function(e,t){t=h.from(e.dom.getParent(t.startContainer,e.dom.isBlock));return""===ce(e)?t.orThunk(function(){return h.some(e.getBody())}):t},D=ge.DOM,M=function(t){return function(e){return t===e?-1:0}},he=function(t){return function(e){return t.isBlock(e)||v(["BR","IMG","HR","INPUT"],e.nodeName)||"false"===t.getContentEditable(e)}},N=function(e,t,n){var r;return T(e)&&0<=t?h.some(k(e,t)):(r=S(D),h.from(r.backwards(e,t,M(e),n)).map(function(e){return k(e.container,e.container.data.length)}))},ve=function(e,t,n){var r;return T(e)&&t>=e.length?h.some(k(e,t)):(r=S(D),h.from(r.forwards(e,t,M(e),n)).map(function(e){return k(e.container,0)}))},R=function(e,n,r){var t;return T(e)?(t=e.textContent,0<=n&&n<=t.length?h.some(k(e,n)):(t=S(D),h.from(t.backwards(e,n,M(e),r)).bind(function(e){var t=e.container.data;return R(e.container,n+t.length,r)}))):h.none()},be=function(e,t,n){var r,o;return T(e)?(r=e.textContent,t<=r.length?h.some(k(e,t)):(o=S(D),h.from(o.forwards(e,t,M(e),n)).bind(function(e){return be(e.container,t-r.length,n)}))):h.none()},ye=function(e,t,n,r,o){e=S(e,he(e));return h.from(e.backwards(t,n,r,o))},we=function(e,t,n){if(T(t)&&(n<0||n>t.data.length))return[];for(var r=[n],o=t;o!==e&&o.parentNode;){for(var i=o.parentNode,u=0;u<i.childNodes.length;u++)if(i.childNodes[u]===o){r.push(u);break}o=i}return o===e?r.reverse():[]},z=function(e,t,n,r,o){return{start:we(e,t,n),end:we(e,r,o)}},xe=function(e,t){var t=t.slice(),n=t.pop();return j(t,function(e,t){return e.bind(function(e){return h.from(e.childNodes[t])})},h.some(e)).bind(function(e){return T(e)&&(n<0||n>e.data.length)?h.none():h.some({node:e,offset:n})})},Ce=function(t,n){return xe(t,n.start).bind(function(e){var r=e.node,o=e.offset;return xe(t,n.end).map(function(e){var t=e.node,e=e.offset,n=document.createRange();return n.setStart(r,o),n.setEnd(t,e),n})})},Se=function(e,t){return z(e,t.startContainer,t.startOffset,t.endContainer,t.endOffset)},ke=function(r,o,t){ve(o,0,o).each(function(e){var n=e.container;be(n,t.start.length,o).each(function(e){var t=r.createRng();t.setStart(n,0),t.setEnd(e.container,e.offset),E(r,t,function(e){return e===o})})})},Te=function(t,e){var n=t.dom,r=e.pattern,n=Ce(n.getRoot(),e.range).getOrDie("Unable to resolve path range");return A(t,n).each(function(e){"block-format"===r.type?pe(r.format,t.formatter)&&t.undoManager.transact(function(){ke(t.dom,e,r),t.formatter.apply(r.format)}):"block-command"===r.type&&t.undoManager.transact(function(){ke(t.dom,e,r),t.execCommand(r.cmd,!1,r.value)})}),!0},Oe=function(e,t){var n=t.replace(de," ");return W(e,function(e){return 0===t.indexOf(e.start)||0===n.indexOf(e.start)})},Ee=function(n,e){var r=n.dom,t=n.selection.getRng();return A(n,t).filter(function(e){var t=ce(n),t=""===t&&r.is(e,"body")||r.is(e,t);return null!==e&&t}).bind(function(t){var n=t.textContent;return Oe(e,n).map(function(e){return me.trim(n).length===e.start.length?[]:[{pattern:e,range:z(r.getRoot(),t,0,t,0)}]})}).getOr([])},_e=function(t,e){var n;0!==e.length&&(n=t.selection.getBookmark(),y(e,function(e){return Te(t,e)}),t.selection.moveToBookmark(n))},Ae=0,De=function(e){var t=(new Date).getTime();return e+"_"+Math.floor(1e9*Math.random())+ ++Ae+String(t)},Me=function(e,t,n){return""===t||e.length>=t.length&&e.substr(n,n+t.length)===t},Ne=function(e,t){return Me(e,t,e.length-t.length)},Re=function(e,t){return e.create("span",{"data-mce-type":"bookmark",id:t})},B=function(e,t){e=e.createRng();return e.setStartAfter(t.start),e.setEndBefore(t.end),e},ze=function(e,t,n){var n=Ce(e.getRoot(),n).getOrDie("Unable to resolve path range"),r=n.startContainer,o=n.endContainer,o=0===n.endOffset?o:o.splitText(n.endOffset),r=0===n.startOffset?r:r.splitText(n.startOffset);return{prefix:t,end:o.parentNode.insertBefore(Re(e,t+"-end"),o),start:r.parentNode.insertBefore(Re(e,t+"-start"),r)}},Be=function(e,t,n){O(e,e.get(t.prefix+"-end"),n),O(e,e.get(t.prefix+"-start"),n)},Pe=function(e,t,n){return function(e,t){e=e.data.substring(0,t),t=e.lastIndexOf(n.charAt(n.length-1)),e=e.lastIndexOf(n);return-1!==e?e+n.length:-1!==t?t+1:-1}},Ie=function(r,t,o,e){var i=t.start;return ye(r,e.container,e.offset,Pe(r,o,i),o).bind(function(n){var e;return n.offset>=i.length?((e=r.createRng()).setStart(n.container,n.offset-i.length),e.setEnd(n.container,n.offset),h.some(e)):(e=n.offset-i.length,R(n.container,e,o).map(function(e){var t=r.createRng();return t.setStart(e.container,e.offset),t.setEnd(n.container,n.offset),t}).filter(function(e){return e.toString()===i}).orThunk(function(){return Ie(r,t,o,k(n.container,0))}))})},Le=function(e,n,t,r,o,i){var u;return void 0===i&&(i=!1),0!==n.start.length||i?N(t,r,o).bind(function(t){return Ie(e,n,o,t).bind(function(e){if(i){if(e.endContainer===t.container&&e.endOffset===t.offset)return h.none();if(0===t.offset&&e.endContainer.textContent.length===e.endOffset)return h.none()}return h.some(e)})}):((u=e.createRng()).setStart(t,r),u.setEnd(t,r),h.some(u))},Fe=function(o,i,u){var a=o.dom,c=a.getRoot(),s=u.pattern,l=u.position.container,f=u.position.offset;return R(l,f-u.pattern.end.length,i).bind(function(e){var t,n,r=z(c,e.container,e.offset,l,f);return _(s)?h.some({matches:[{pattern:s,startRng:r,endRng:r}],position:e}):(t=He(o,u.remainingPatterns,e.container,e.offset,i),e=(n=t.getOr({matches:[],position:e})).position,Le(a,s,e.container,e.offset,i,t.isNone()).map(function(e){var t=Se(c,e);return{matches:n.matches.concat([{pattern:s,startRng:t,endRng:r}]),position:k(e.startContainer,e.startOffset)}}))})},He=function(u,a,c,s,l){var f=u.dom;return N(c,s,f.getRoot()).bind(function(e){for(var t=f.createRng(),n=(t.setStart(l,0),t.setEnd(c,s),t.toString()),r=0;r<a.length;r++){var o=a[r];if(Ne(n,o.end)){var i=a.slice(),o=(i.splice(r,1),Fe(u,l,{pattern:o,remainingPatterns:i,position:e}));if(o.isSome())return o}}return h.none()})},Ve=function(t,e,n){t.selection.setRng(n),"inline-format"===e.type?y(e.format,function(e){t.formatter.apply(e)}):t.execCommand(e.cmd,!1,e.value)},je=function(e,t,n,r){n=B(e.dom,n);E(e.dom,n,r),Ve(e,t,n)},Ue=function(e,t,n,r,o){var i=e.dom,u=B(i,r),a=B(i,n),a=(E(i,a,o),E(i,u,o),{prefix:n.prefix,start:n.end,end:r.start}),u=B(i,a);Ve(e,t,u)},We=function(r,e){var o=De("mce_textpattern"),i=x(e,function(e,t){var n=ze(r,o+("_end"+e.length),t.endRng);return e.concat([u(u({},t),{endMarker:n})])},[]);return x(i,function(e,t){var n=i.length-e.length-1,n=_(t.pattern)?t.endMarker:ze(r,o+"_start"+n,t.startRng);return e.concat([u(u({},t),{startMarker:n})])},[])},$e=function(n,r,o){var i=n.selection.getRng();return!1===i.collapsed?[]:A(n,i).bind(function(e){var t=i.startOffset-(o?1:0);return He(n,r,i.startContainer,t,e)}).fold(function(){return[]},function(e){return e.matches})},qe=function(r,e){var o,t;0!==e.length&&(o=r.dom,t=r.selection.getBookmark(),e=We(o,e),y(e,function(e){function t(e){return e===n}var n=o.getParent(e.startMarker.start,o.isBlock);_(e.pattern)?je(r,e.pattern,e.endMarker,t):Ue(r,e.pattern,e.startMarker,e.endMarker,t),Be(o,e.endMarker,t),Be(o,e.startMarker,t)}),r.selection.moveToBookmark(t))},Ge=function(n,e){var t,r;return!!n.selection.isCollapsed()&&(t=$e(n,e.inlinePatterns,!1),0<(r=Ee(n,e.blockPatterns)).length||0<t.length)&&(n.undoManager.add(),n.undoManager.extra(function(){n.execCommand("mceInsertNewLine")},function(){n.insertContent(fe,{preserve_zwsp:!0}),qe(n,t),_e(n,r);var e=n.selection.getRng(),e=N(e.startContainer,e.startOffset,n.dom.getRoot());n.execCommand("mceInsertNewLine"),e.each(function(e){var t=e.container;t.data.charAt(e.offset-1)===fe&&(t.deleteData(e.offset-1,1),O(n.dom,t.parentNode,function(e){return e===n.dom.getRoot()}))})}),!0)},Ke=function(e,t){var n=$e(e,t.inlinePatterns,!0);0<n.length&&e.undoManager.transact(function(){qe(e,n)})},Xe=function(e,t,n){for(var r=0;r<e.length;r++)if(n(e[r],t))return!0;return!1},Ye=function(e,t){return Xe(e,t,function(e,t){return e===t.keyCode&&!1===le.modifierPressed(t)})},Je=function(e,t){return Xe(e,t,function(e,t){return e.charCodeAt(0)===t.charCode})};P.add("textpattern",function(e){a=(a=e).getParam("textpattern_patterns",ae,"array"),a=s(a)?(a=Z(b(a,ne)),y(a.errors,function(e){return ue(e.message,e.pattern)}),oe(a.values)):(ue("The setting textpattern_patterns should be an array"),{inlinePatterns:[],blockPatterns:[]}),t=a;var t,n,r,o,i,u,a={get:function(){return t},set:function(e){t=e}};return r=a,o=[",",".",";",":","!","?"],i=[32],(n=e).on("keydown",function(e){13!==e.keyCode||le.modifierPressed(e)||Ge(n,r.get())&&e.preventDefault()},!0),n.on("keyup",function(e){Ye(i,e)&&Ke(n,r.get())}),n.on("keypress",function(e){Je(o,e)&&se.setEditorTimeout(n,function(){Ke(n,r.get())})}),u=a,{setPatterns:function(e){var t,e=Z(b(e,ne));if(0<e.errors.length)throw t=e.errors[0],new Error(t.message+":\n"+JSON.stringify(t.pattern,null,2));u.set(oe(e.values))},getPatterns:function(){return c(c([],b(u.get().inlinePatterns,re),!0),b(u.get().blockPatterns,re),!0)}}})}(),function(){var t,n,e=tinymce.util.Tools.resolve("tinymce.PluginManager"),r=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),c=tinymce.util.Tools.resolve("tinymce.util.I18n"),o=tinymce.util.Tools.resolve("tinymce.util.Tools"),u=function(e){return e.getParam("toc_class","mce-toc")},s=function(e){e=e.getParam("toc_header","h2");return/^h[1-6]$/.test(e)?e:"h2"},i=function(e){e=parseInt(e.getParam("toc_depth","3"),10);return 1<=e&&e<=9?e:3},a=(t="mcetoc_",n=0,function(){var e=(new Date).getTime().toString(32);return t+e+(n++).toString(32)}),l=function(e){for(var t=[],n=1;n<=e;n++)t.push("h"+n);return t.join(",")},f=function(e){return 0<d(e).length},d=function(n){var r=u(n),e=s(n),t=l(i(n)),t=n.$(t);return t.length&&/^h[1-9]$/i.test(e)&&(t=t.filter(function(e,t){return!n.dom.hasClass(t.parentNode,r)})),o.map(t,function(e){var t=e.id;return{id:t||a(),level:parseInt(e.nodeName.replace(/^H/i,""),10),title:n.$.text(e),element:e}})},m=function(e){for(var t=9,n=0;n<e.length;n++)if(1===(t=e[n].level<t?e[n].level:t))return t;return t},g=function(e,t){var n="</"+e+">";return"<"+e+' contenteditable="true">'+r.DOM.encode(t)+n},p=function(e){var t=h(e);return'<div class="'+e.dom.encode(u(e))+'" contenteditable="false">'+t+"</div>"},h=function(e){var t="",n=d(e),r=m(n)-1;if(!n.length)return"";t+=g(s(e),c.translate("Table of Contents"));for(var o=0;o<n.length;o++){var i=n[o],u=(i.element.id=i.id,n[o+1]&&n[o+1].level);if(r===i.level)t+="<li>";else for(var a=r;a<i.level;a++)t+="<ul><li>";if(t+='<a href="#'+i.id+'">'+i.title+"</a>",u!==i.level&&u)for(a=i.level;u<a;a--)t+=a===u+1?"</li></ul><li>":"</li></ul>";else t+="</li>",u||(t+="</ul>");r=i.level}return t},v=function(e,t){return!t.length||0<e.dom.getParents(t[0],".mce-offscreen-selection").length},b=function(e){var t=u(e),t=e.$("."+t);v(e,t)?e.insertContent(p(e)):y(e)},y=function(e){var t=u(e),n=e.$("."+t);n.length&&e.undoManager.transact(function(){n.html(h(e))})},w=function(n){return function(e){function t(){return e.setDisabled(n.mode.isReadOnly()||!f(n))}return t(),n.on("LoadContent SetContent change",t),function(){return n.on("LoadContent SetContent change",t)}}},x=function(t){return function(e){return e&&t.dom.is(e,"."+u(t))&&t.getBody().contains(e)}};e.add("toc",function(e){var t,n,r,o;function i(){return n.execCommand("mceInsertToc")}(t=e).addCommand("mceInsertToc",function(){b(t)}),t.addCommand("mceUpdateToc",function(){y(t)}),(n=e).ui.registry.addButton("toc",{icon:"toc",tooltip:"Table of contents",onAction:i,onSetup:w(n)}),n.ui.registry.addButton("tocupdate",{icon:"reload",tooltip:"Update",onAction:function(){return n.execCommand("mceUpdateToc")}}),n.ui.registry.addMenuItem("toc",{icon:"toc",text:"Table of contents",onAction:i,onSetup:w(n)}),n.ui.registry.addContextToolbar("toc",{items:"tocupdate",predicate:x(n),scope:"node",position:"node"}),r=(e=e).$,o=u(e),e.on("PreProcess",function(e){e=r("."+o,e.node);e.length&&(e.removeAttr("contentEditable"),e.find("[contenteditable]").removeAttr("contentEditable"))}),e.on("SetContent",function(){var e=r("."+o);e.length&&(e.attr("contentEditable",!1),e.children(":first-child").attr("contentEditable",!0))})})}(),function(){var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),r=function(e,t){e.fire("VisualBlocks",{state:t})},m=function(e,t,n){e.dom.toggleClass(e.getBody(),"mce-visualblocks"),n.set(!n.get()),r(e,n.get())},g=function(e){return e.getParam("visualblocks_default_state",!1,"boolean")},p=function(n,r){return function(t){t.setActive(r.get());function e(e){return t.setActive(e.state)}return n.on("VisualBlocks",e),function(){return n.off("VisualBlocks",e)}}};e.add("visualblocks",function(e,t){n=!1;var n,r,o,i,u,a,c,s,l,f={get:function(){return n},set:function(e){n=e}};function d(){return u.execCommand("mceVisualBlocks")}o=t,i=f,(r=e).addCommand("mceVisualBlocks",function(){m(r,o,i)}),a=f,(u=e).ui.registry.addToggleButton("visualblocks",{icon:"visualblocks",tooltip:"Show blocks",onAction:d,onSetup:p(u,a)}),u.ui.registry.addToggleMenuItem("visualblocks",{text:"Show blocks",icon:"visualblocks",onAction:d,onSetup:p(u,a)}),s=t,l=f,(c=e).on("PreviewFormats AfterPreviewFormats",function(e){l.get()&&c.dom.toggleClass(c.getBody(),"mce-visualblocks","afterpreviewformats"===e.type)}),c.on("init",function(){g(c)&&m(c,s,l)})})}(),function(){function e(t){return function(e){return typeof e===t}}function i(e){return function(){return e}}function t(e){return e}function n(){return d}var r,o=tinymce.util.Tools.resolve("tinymce.PluginManager"),u=function(e,t){return e.fire("VisualChars",{state:t})},a=function(e){return t=typeof(e=e),(null===e?"null":"object"==t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"==t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t)===r;var t},c=e("boolean"),s=e("number"),l=i(!(r="string")),f=i(!0),d={fold:function(e,t){return e()},isSome:l,isNone:f,getOr:t,getOrThunk:m,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:i(null),getOrUndefined:i(void 0),or:t,orThunk:m,map:n,each:function(){},bind:n,exists:l,forall:f,filter:function(){return d},toArray:function(){return[]},toString:i("none()")};function m(e){return e()}function g(n){function e(){return o}function t(e){return e(n)}var r=i(n),o={fold:function(e,t){return t(n)},isSome:f,isNone:l,getOr:r,getOrThunk:r,getOrDie:r,getOrNull:r,getOrUndefined:r,or:e,orThunk:e,map:function(e){return g(e(n))},each:function(e){e(n)},bind:t,exists:t,forall:t,filter:function(e){return e(n)?o:d},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return o}function p(e,t){for(var n=F(e),r=0,o=n.length;r<o;r++){var i=n[r];t(e[i],i)}}function h(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}}function v(e,t){var n="";return p(e,function(e,t){n+=t}),new RegExp("["+n+"]",t?"g":"")}var b,y,P=function(e){return null==e?d:g(e)},I=function(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o)}return r},w=function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)},L=function(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r)&&n.push(i)}return n},F=Object.keys,x=("undefined"==typeof window&&Function("return this;")(),function(e){return e.dom.nodeValue}),H=(b=3,function(e){return e.dom.nodeType===b}),V=function(e,t,n){if(!(a(n)||c(n)||s(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},C=function(e,t,n){V(e.dom,t,n)},j=function(e,t){e=e.dom.getAttribute(t);return null===e?void 0:e},S=function(e,t){e.dom.removeAttribute(t)},k=function(e,t){e=j(e,t);return void 0===e||""===e?[]:e.split(" ")},U=function(e,t,n){n=k(e,t).concat([n]);return C(e,t,n.join(" ")),!0},W=function(e,t,n){var r=L(k(e,t),function(e){return e!==n});return 0<r.length?C(e,t,r.join(" ")):S(e,t),!1},T=function(e){return void 0!==e.dom.classList},$=function(e){return k(e,"class")},q=function(e,t){return U(e,"class",t)},G=function(e,t){return W(e,"class",t)},K=function(e,t){T(e)?e.dom.classList.add(t):q(e,t)},X=function(e){0===(T(e)?e.dom.classList:$(e)).length&&S(e,"class")},Y=function(e,t){T(e)?e.dom.classList.remove(t):G(e,t),X(e)},O={fromHtml:function(e,t){t=(t||document).createElement("div");if(t.innerHTML=e,!t.hasChildNodes()||1<t.childNodes.length)throw console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node");return h(t.childNodes[0])},fromTag:function(e,t){t=(t||document).createElement(e);return h(t)},fromText:function(e,t){t=(t||document).createTextNode(e);return h(t)},fromDom:h,fromPoint:function(e,t,n){return P(e.dom.elementFromPoint(t,n)).map(h)}},E={"":"nbsp","":"shy"},J=v(E),Z=v(E,!0),Q=(y="",p(E,function(e){y&&(y+=","),y+="span.mce-"+e}),y),_="mce-nbsp",ee=function(e){return'<span data-mce-bogus="1" class="mce-'+E[e]+'">'+e+"</span>"},te=function(e){var t=x(e);return H(e)&&void 0!==t&&J.test(t)},A=function(e,t){var n=[],e=e.dom,e=I(e.childNodes,O.fromDom);return w(e,function(e){n=(n=t(e)?n.concat([e]):n).concat(A(e,t))}),n},ne=function(e,t){for(;e.parentNode;){if(e.parentNode===t)return e;e=e.parentNode}},re=function(e){return e.replace(Z,ee)},D=function(e){return"span"===e.nodeName.toLowerCase()&&e.classList.contains("mce-nbsp-wrap")},M=function(o,e){e=A(O.fromDom(e),te);w(e,function(e){var t=e.dom.parentNode;if(D(t))K(O.fromDom(t),_);else{for(var n,t=re(o.dom.encode(x(e))),r=o.dom.create("div",null,t);n=r.lastChild;)o.dom.insertAfter(n,e.dom);o.dom.remove(e.dom)}})},N=function(t,e){e=t.dom.select(Q,e);w(e,function(e){D(e)?Y(O.fromDom(e),_):t.dom.remove(e,!0)})},R=function(e){var t=e.getBody(),n=e.selection.getBookmark(),r=ne(e.selection.getNode(),t);N(e,r=void 0!==r?r:t),M(e,r),e.selection.moveToBookmark(n)},z=function(e,t){u(e,t.get());var n=e.getBody();(!0===t.get()?M:N)(e,n)},oe=function(e,t){t.set(!t.get());var n=e.selection.getBookmark();z(e,t),e.selection.moveToBookmark(n)},ie=function(e){return!1!==e.getParam("forced_root_block")},ue=tinymce.util.Tools.resolve("tinymce.util.Delay"),B=function(n,r){return function(t){t.setActive(r.get());function e(e){return t.setActive(e.state)}return n.on("VisualChars",e),function(){return n.off("VisualChars",e)}}};o.add("visualchars",function(e){d=e.getParam("visualchars_default_state",!1),t=d;var t,n,r,o,i,u,a,c,s,l,f,d={get:function(){return t},set:function(e){t=e}};function m(){return o.execCommand("mceVisualChars")}return r=d,(n=e).addCommand("mceVisualChars",function(){oe(n,r)}),i=d,(o=e).ui.registry.addToggleButton("visualchars",{tooltip:"Show invisible characters",icon:"visualchars",onAction:m,onSetup:B(o,i)}),o.ui.registry.addToggleMenuItem("visualchars",{text:"Show invisible characters",icon:"visualchars",onAction:m,onSetup:B(o,i)}),u=e,a=d,c=ue.debounce(function(){R(u)},300),ie(u)&&u.on("keydown",function(e){!0===a.get()&&(13===e.keyCode?R(u):c())}),u.on("remove",c.stop),l=d,(s=e).on("init",function(){z(s,l)}),f=d,{isEnabled:function(){return f.get()}}})}(),function(){var s,e=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=function(e){return e},b=function(){return(b=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},c=function(e){return e.replace(/\uFEFF/g,"")},y=function(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o)}return r},t="[-'\\.]",r="[:]",o="[+*/,;;]",i="[0-9---------------------------------]",u="\\r",a="\\n",l="[\v\f\u2028\u2029]",f="[------------------------------------------------------------------------------------------------------]",d="[----\ufeff-]",m="[-------]",g="[=_--<>]",p="[!-#%-*,-\\/:;?@\\[-\\]_{};----------------------------------------------]",h={ALETTER:0,MIDNUMLET:1,MIDLETTER:2,MIDNUM:3,NUMERIC:4,CR:5,LF:6,NEWLINE:7,EXTEND:8,FORMAT:9,KATAKANA:10,EXTENDNUMLET:11,AT:12,OTHER:13},t=[new RegExp("[A-Za-z---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]"),new RegExp(t),new RegExp(r),new RegExp(o),new RegExp(i),new RegExp(u),new RegExp(a),new RegExp(l),new RegExp(f),new RegExp(d),new RegExp(m),new RegExp(g),new RegExp("@")],r=new RegExp("^"+p+"$"),v=t,w=h.OTHER,x=function(e){for(var t=w,n=v.length,r=0;r<n;++r){var o=v[r];if(o&&o.test(e)){t=r;break}}return t},C=function(n){var r={};return function(e){var t;return r[e]||(t=n(e),r[e]=t)}},S=function(e,t){var n,r=e[t],o=e[t+1];return!(t<0||t>e.length-1&&0!==t)&&(r!==h.ALETTER||o!==h.ALETTER)&&(n=e[t+2],r!==h.ALETTER||o!==h.MIDLETTER&&o!==h.MIDNUMLET&&o!==h.AT||n!==h.ALETTER)&&(e=e[t-1],r!==h.MIDLETTER&&r!==h.MIDNUMLET&&o!==h.AT||o!==h.ALETTER||e!==h.ALETTER)&&(r!==h.NUMERIC&&r!==h.ALETTER||o!==h.NUMERIC&&o!==h.ALETTER)&&(r!==h.MIDNUM&&r!==h.MIDNUMLET||o!==h.NUMERIC||e!==h.NUMERIC)&&(r!==h.NUMERIC||o!==h.MIDNUM&&o!==h.MIDNUMLET||n!==h.NUMERIC)&&r!==h.EXTEND&&r!==h.FORMAT&&e!==h.EXTEND&&e!==h.FORMAT&&o!==h.EXTEND&&o!==h.FORMAT&&!(r===h.CR&&o===h.LF||r!==h.NEWLINE&&r!==h.CR&&r!==h.LF&&o!==h.NEWLINE&&o!==h.CR&&o!==h.LF&&(r===h.KATAKANA&&o===h.KATAKANA||o===h.EXTENDNUMLET&&(r===h.ALETTER||r===h.NUMERIC||r===h.KATAKANA||r===h.EXTENDNUMLET)||r===h.EXTENDNUMLET&&(o===h.ALETTER||o===h.NUMERIC||o===h.KATAKANA)||r===h.AT))},k="",T=/^\s+$/,P=r,I=function(e){return"http"===e||"https"===e},L=function(e,t){for(var n=t;n<e.length&&!T.test(e[n]);n++);return n},F=function(e,t){var n=L(e,t+1);return"://"===e.slice(t+1,n).join(k).substr(0,3)?n:t},H=function(e,t,n){n=b(b({},{includeWhitespace:!1,includePunctuation:!1}),n);for(var r=[],o=[],i=0;i<e.length;i++){var u=t(e[i]);"\ufeff"!==u&&(r.push(e[i]),o.push(u))}l=o,a=C(x);for(var a,c,s,l=y(l,a),f=r,d=o,m=l,g=n,p=[],h=[],v=0;v<m.length;++v)h.push(f[v]),S(m,v)&&(s=d[v],!g.includeWhitespace&&T.test(s)||!g.includePunctuation&&P.test(s)||(s=v-h.length+1,c=d.slice(s,s=v+1).join(k),I(c)&&(c=F(d,v),s=f.slice(s,c),Array.prototype.push.apply(h,s),v=c),p.push(h)),h=[]);return p},V=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),O=function(e,t){for(var n,r=t.getBlockElements(),o=t.getShortEndedElements(),i=[],u="",a=new V(e,e);e=a.next();)3===e.nodeType?u+=c(e.data):(r[(n=e).nodeName]||o[n.nodeName])&&u.length&&(i.push(u),u="");return u.length&&i.push(u),i},j=function(e){return e.replace(/\u200B/g,"")},E=function(e){return e.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length},_=function(e,t){e=j(O(e,t).join("\n"));return H(e.split(""),n).length},A=function(e,t){e=O(e,t).join("");return E(e)},D=function(e,t){e=O(e,t).join("").replace(/\s/g,"");return E(e)},M=function(e,t){return function(){return t(e.getBody(),e.schema)}},N=function(e,t){return function(){return t(e.selection.getRng().cloneContents(),e.schema)}},R=function(e){return M(e,_)},U=function(e,t){e.windowManager.open({title:"Word Count",body:{type:"panel",items:[{type:"table",header:["Count","Document","Selection"],cells:[["Words",String(t.body.getWordCount()),String(t.selection.getWordCount())],["Characters (no spaces)",String(t.body.getCharacterCountWithoutSpaces()),String(t.selection.getCharacterCountWithoutSpaces())],["Characters",String(t.body.getCharacterCount()),String(t.selection.getCharacterCount())]]}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}]})},z=tinymce.util.Tools.resolve("tinymce.util.Delay"),W=function(e,t){e.fire("wordCountUpdate",{wordCount:{words:t.body.getWordCount(),characters:t.body.getCharacterCount(),charactersWithoutSpaces:t.body.getCharacterCountWithoutSpaces()}})},B=function(e,t){W(e,t)};void 0===s&&(s=300),e.add("wordcount",function(e){var t,n,r,o,i,u,a={body:{getWordCount:R(a=e),getCharacterCount:M(a,A),getCharacterCountWithoutSpaces:M(a,D)},selection:{getWordCount:N(a,_),getCharacterCount:N(a,A),getCharacterCountWithoutSpaces:N(a,D)},getCount:R(a)};function c(){return r.execCommand("mceWordCount")}return n=a,(t=e).addCommand("mceWordCount",function(){return U(t,n)}),(r=e).ui.registry.addButton("wordcount",{tooltip:"Word count",icon:"character-count",onAction:c}),r.ui.registry.addMenuItem("wordcount",{text:"Word count",icon:"character-count",onAction:c}),o=e,i=a,e=s,u=z.debounce(function(){return B(o,i)},e),o.on("init",function(){B(o,i),z.setEditorTimeout(o,function(){o.on("SetContent BeforeAddUndo Undo Redo ViewUpdate keyup",u)},0)}),a})}();