extends ../../layouts/master.pug

block csslib
	link(href='/cms-static/admin/assets/plugins/custom/datatables/datatables.bundle.css' rel='stylesheet' type='text/css')
	//- link(href="/cms-static/admin/assets/plugins/custom/jstree/jstree.bundle.css" rel="stylesheet" type="text/css")


block jslib
	// begin::Vendors Javascript(used by this page)
	script(src='/cms-static/admin/assets/plugins/custom/datatables/datatables.bundle.js')
	//- script(src='/cms-static/admin/assets/plugins/custom/jstree/jstree.bundle.js')
	// end::Vendors Javascript
	// begin::Custom Javascript(used by this page)
	//- script(src='/cms-static/admin/assets/js/custom/apps/subscriptions/list/export.js')
	//- script(src='/cms-static/admin/assets/js/custom/cms/subscriptions/list/list.js')
	//- script(src='/cms-static/admin/assets/js/custom/cms/banner-list.js')
	//- script(src='/cms-static/admin/assets/js/widgets.bundle.js')
	//- script(src='/cms-static/admin/assets/js/custom/widgets.js')


	//- script(src='/cms-static/admin/assets/js/custom/utilities/modals/create-app.js')
	//- script(src='/cms-static/admin/assets/js/custom/utilities/modals/users-search.js')
	// end::Custom Javascript

	//- custom functions 
	script(src='/cms-static/common/js/form-data-json.min.js')
	script(src='/cms-static/common/js/es-form.js')
	script(src='/cms-static/common/js/custom-functions.js')


block customScript
	script.
		$('#kt_modal_nav_item_form').on('show.bs.modal', function (e) {
			var dataValue = $(e.relatedTarget).data('section');
			$('#kt_modal_nav_item_form input[name="section"]').val(dataValue);
		});
		$('#kt_modal_nav_child_form').on('show.bs.modal', function (e) {
			var dataSection = $(e.relatedTarget).data('section');
			var dataItem = $(e.relatedTarget).data('item');
			$('#kt_modal_nav_child_form input[name="section"]').val(dataSection);
			$('#kt_modal_nav_child_form input[name="item"]').val(dataItem);
		});
		

block content
	.d-flex.flex-column.flex-column-fluid
		#kt_app_toolbar.app-toolbar.py-3.py-lg-6
			#kt_app_toolbar_container.app-container.container-xxl.d-flex.flex-stack
				.page-title.d-flex.flex-column.justify-content-center.flex-wrap.me-3
					h1.page-heading.d-flex.text-dark.fw-bold.fs-3.flex-column.justify-content-center.my-0 Admin Nav List
					//- ul.breadcrumb.breadcrumb-separatorless.fw-semibold.fs-7.my-0.pt-1
					//- 	li.breadcrumb-item.text-muted
					//- 		a.text-muted.text-hover-primary(href='/admin/dashboard') Home
					//- 	li.breadcrumb-item
					//- 		span.bullet.bg-gray-400.w-5px.h-2px
					//- 	li.breadcrumb-item.text-muted Subscription
				.d-flex.align-items-center.gap-2.gap-lg-3
					a.btn.btn-sm.fw-bold.btn-primary(href=`#` data-bs-toggle='modal' data-bs-target='#kt_modal_nav_section_form') Add Nav Section
		#kt_app_content.app-content.flex-column-fluid
			#kt_app_content_container.app-container.container-xxl
				.card
					.card-header.border-0.pt-6
						.card-title
							.d-flex.align-items-center.position-relative.my-1
								//- span.svg-icon.svg-icon-1.position-absolute.ms-6
								//- 	svg(width='24' height='24' viewbox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg')
								//- 		rect(opacity='0.5' x='17.0365' y='15.1223' width='8.15546' height='2' rx='1' transform='rotate(45 17.0365 15.1223)' fill='currentColor')
								//- 		path(d='M11 19C6.55556 19 3 15.4444 3 11C3 6.55556 6.55556 3 11 3C15.4444 3 19 6.55556 19 11C19 15.4444 15.4444 19 11 19ZM11 5C7.53333 5 5 7.53333 5 11C5 14.4667 7.53333 17 11 17C14.4667 17 17 14.4667 17 11C17 7.53333 14.4667 5 11 5Z' fill='currentColor')
								//- input.form-control.form-control-solid.w-250px.ps-14(type='text' data-kt-subscription-table-filter='search' placeholder=`Search Store`)
					.card-body.pt-0
						ul
							each admin_nav, i in admin_navs
								li.my-10
									h1 #{admin_nav.section} | 
										a.btn.btn-success.btn-sm(href="#" data-bs-toggle='modal' data-bs-target='#kt_modal_nav_item_form' data-section=admin_nav.section)
											i.fa.fa-plus
										a.btn.btn-danger.btn-sm(href=`/admin/config/admin-nav/section/delete/${admin_nav._id}`)
											i.fa.fa-trash
									ul
										each item, item_index in admin_nav.items
											li.border-gray-300.border-dotted.my-5
												div.px-10
													h2 Label : #{item.label} | 
														a.btn.btn-info.btn-sm(href="#" data-bs-toggle='modal' data-bs-target='#kt_modal_nav_child_form' data-section=admin_nav._id data-item=item._id)
															i.fa.fa-plus
														a.btn.btn-danger.btn-sm(href=`/admin/config/admin-nav/item/delete/${admin_nav.section}/${item._id}`)
															i.fa.fa-trash
													p expandable : #{item.expandable}
													p icon : !{item.icon}
													p path : #{item.path}
													ul
														each child, child_index in item.child
															li.border-gray-300.border-dotted.my-5
																div.px-10
																	h2 Label : #{child.label} | 
																		a.btn.btn-danger.btn-sm(href=`/admin/config/admin-nav/child/delete/${admin_nav._id}/${item._id}/${child._id}`)
																			i.fa.fa-trash
																	p path : #{child.path}
													

block widgets
	#kt_modal_nav_section_form.modal.fade(tabindex='-1' aria-hidden='true')
		.modal-dialog.modal-dialog-centered.mw-400px
			.modal-content
				.modal-header
					h2 Add Nav Section
					.btn.btn-sm.btn-icon.btn-active-color-primary(data-bs-dismiss='modal' )
						h3 X						
				.modal-body.py-lg-5.px-lg-5
					form#kt_modal_create_app_form.form.es-form(action=`/admin/config/admin-nav/section/save` data-kt-redirect-url=`/admin/config/admin-nav/section/save`  method='post')
						.card.card-flush
							.card-body.pt-0
								.col-md-12
									label.d-flex.align-items-center.fs-6.fw-semibold.mb-2
										span  Section Name
										i.fas.fa-exclamation-circle.ms-2.fs-7(data-bs-toggle='tooltip' aria-label='path' data-kt-initialized='1')
									.form-check.form-check-custom.form-check-solid.my-5
										input#flexCheckChecked.form-control(type='text' name="section" placeholder="Nav Section Name")
									.form-check.form-check-custom.form-check-solid.my-5
										input#flexCheckChecked.form-control(type='number' name="position" placeholder="Section Position")
									.card-toolbar.mt-8.d-flex.justify-content-end
										button.btn.btn-sm.btn-success.form-submit-btn(type='submit')
											span.label Save
											span.preloader.d-none Saving...
	#kt_modal_nav_item_form.modal.fade(tabindex='-1' aria-hidden='true')
		.modal-dialog.modal-dialog-centered.mw-400px
			.modal-content
				.modal-header
					h2 Add Nav Item
					.btn.btn-sm.btn-icon.btn-active-color-primary(data-bs-dismiss='modal' )
						h3 X						
				.modal-body.py-lg-5.px-lg-5
					form#kt_modal_create_item_form.form.es-form(action=`/admin/config/admin-nav/item/save` data-kt-redirect-url=`/admin/config/admin-nav/item/save` method='post')
						input(type="hidden" name='section')
						.card.card-flush
							.card-body.pt-0
								.col-md-12
									label.d-flex.align-items-center.fs-6.fw-semibold.mb-2
										span  Nav Item
										i.fas.fa-exclamation-circle.ms-2.fs-7(data-bs-toggle='tooltip' aria-label='path' data-kt-initialized='1')
									.form-check.form-check-custom.form-check-solid.my-1
										input.form-control(type='text' name="label" placeholder="Item Label")
									.form-check.form-check-custom.form-check-solid.my-1
										input.form-checkbox(type='checkbox' name="expandable" value="true")
										label Expandable
									.form-check.form-check-custom.form-check-solid.my-1
										textarea.form-control(name="icon" placeholder="Icon")
									a(href="https://preview.keenthemes.com/html/metronic/docs/icons/duotune" target="_blank")
										small
											| Sample Icons
									.form-check.form-check-custom.form-check-solid.my-1
										input.form-control(type='text' name="path" placeholder="URL")
									.card-toolbar.mt-8.d-flex.justify-content-end
										button.btn.btn-sm.btn-success.form-submit-btn(type='submit')
											span.label Save
											span.preloader.d-none Saving...
	#kt_modal_nav_child_form.modal.fade(tabindex='-1' aria-hidden='true')
		.modal-dialog.modal-dialog-centered.mw-400px
			.modal-content
				.modal-header
					h2 Add Child Item
					.btn.btn-sm.btn-icon.btn-active-color-primary(data-bs-dismiss='modal' )
						h3 X						
				.modal-body.py-lg-5.px-lg-5
					form#kt_modal_create_child_form.form.es-form(action=`/admin/config/admin-nav/child/save` data-kt-redirect-url=`/admin/config/admin-nav/child/save` method='post')
						input(type="hidden" name='section')
						input(type="hidden" name='item')
						.card.card-flush
							.card-body.pt-0
								.col-md-12
									label.d-flex.align-items-center.fs-6.fw-semibold.mb-2
										span  Child Item
										i.fas.fa-exclamation-circle.ms-2.fs-7(data-bs-toggle='tooltip' aria-label='path' data-kt-initialized='1')
									.form-check.form-check-custom.form-check-solid.my-1
										input.form-control(type='text' name="label" placeholder="Child Label")
									.form-check.form-check-custom.form-check-solid.my-1
										input.form-control(type='text' name="path" placeholder="URL")
									.card-toolbar.mt-8.d-flex.justify-content-end
										button.btn.btn-sm.btn-success.form-submit-btn(type='submit')
											span.label Save
											span.preloader.d-none Saving...