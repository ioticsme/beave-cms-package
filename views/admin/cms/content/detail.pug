extends ../../layouts/master.pug

block csslib
	link(href='/cms-static/admin/assets/plugins/custom/datatables/datatables.bundle.css' rel='stylesheet' type='text/css')

block jslib
	// begin::Vendors Javascript(used by this page)
	script(src='/cms-static/admin/assets/plugins/custom/datatables/datatables.bundle.js')
	// end::Vendors Javascript
	// begin::Custom Javascript(used by this page)
	script(src='/cms-static/admin/assets/js/custom/apps/subscriptions/add/advanced.js')
	//- script(src='/cms-static/admin/assets/js/custom/apps/subscriptions/add/customer-select.js')
	//- script(src='/cms-static/admin/assets/js/custom/apps/subscriptions/add/products.js')
	//- script(src='/cms-static/admin/assets/js/widgets.bundle.js')
	//- script(src='/cms-static/admin/assets/js/custom/widgets.js')
	//- 
	//- 
	script(src='/cms-static/admin/assets/js/custom/utilities/modals/create-app.js')
	script(src='/cms-static/admin/assets/js/custom/utilities/modals/new-card.js')
	//- script(src='/cms-static/admin/assets/js/custom/utilities/modals/users-search.js')
	// end::Custom Javascript

block content
	.d-flex.flex-column.flex-column-fluid
		#kt_app_toolbar.app-toolbar.py-3.py-lg-6
			#kt_app_toolbar_container.app-container.container-xxl.d-flex.flex-stack
				.page-title.d-flex.flex-column.justify-content-center.flex-wrap.me-3
					h1.page-heading.d-flex.text-dark.fw-bold.fs-3.flex-column.justify-content-center.my-0 #{reqContentType.title} Detail
					ul.breadcrumb.breadcrumb-separatorless.fw-semibold.fs-7.my-0.pt-1
						li.breadcrumb-item.text-muted
							a.text-muted.text-hover-primary(href=`../${reqContentType.slug}`) #{reqContentType.title}
						li.breadcrumb-item
							span.bullet.bg-gray-400.w-5px.h-2px
						li.breadcrumb-item.text-muted #{`${contentDetail.content[default_lang.prefix][reqContentType.field_groups[0].row_label][reqContentType.field_groups[0].fields[0].field_name]}`}
				.d-flex.align-items-center.gap-2.gap-lg-3
					if reqContentType.single_type == false
						a.btn.btn-sm.fw-bold.btn-success(href=`/admin/cms/${reqContentType.slug}/add`) Add New #{reqContentType.title}
					a.btn.btn-sm.fw-bold.btn-primary(href=`/admin/cms/${reqContentType.slug}/edit/${contentDetail._id}`) Edit #{reqContentType.title}
		#kt_app_content.app-content.flex-column-fluid
			#kt_app_content_container.app-container.container-xxl
				.row
					.col-12.col-sm-8
						.d-flex.flex-column.flex-lg-row
							.flex-lg-row-fluid.me-lg-15.order-2.order-lg-1.mb-10.mb-lg-0
								.card.card-flush.pt-3.mb-5.mb-lg-10                                
									.card-body.pt-0
										ul.nav.nav-tabs.nav-line-tabs.mb-5.fs-6
											each brandLanguage, i in authUser.brand.languages
												li.nav-item
													a.nav-link(class= (i== 0 ? 'active' : '') data-bs-toggle='tab' href=`#kt_tab_pane_${brandLanguage.prefix}`) #{brandLanguage.name}
										#myTabContent.tab-content.tab-content-fields
											each brandLanguage, i in authUser.brand.languages
												.tab-pane.fade(class= (i== 0 ? 'active show' : '') role='tabpanel' id=`kt_tab_pane_${brandLanguage.prefix}`)
													.card-title
														//- BEGIN::Custom group Fields with Multi language
														each cfg, cfg_i in reqContentType.field_groups
															if cfg.localisation == true
																h1.mt-5.mb-2 #{cfg.row_label.toUpperCase()}
																if cfg.repeater_group
																	- for (var i = 0; i < contentDetail.content[brandLanguage.prefix][cfg.row_name][cfg.fields[0].field_name].length; i++)
																		.row
																			each eachVal, vIndex in cfg.fields
																				.col-12.col-sm-6
																					span.badge.badge-light #{eachVal.field_label.toUpperCase()} :
																					- var content = contentDetail.content[brandLanguage.prefix][cfg.row_name][eachVal.field_name]
																					if content
																						if eachVal.field_type == 'media'
																							img(src=`${contentDetail.content[brandLanguage.prefix][cfg.row_name][eachVal.field_name][i]}` style="max-width: 100px;")
																						else
																							span.badge.badge-light-info #{contentDetail.content[brandLanguage.prefix][cfg.row_name][eachVal.field_name][i]}
																						br
																else
																	each cf in cfg.fields
																		span.badge.badge-light-success.mt-5 #{cf.field_label}
																		br
																		.card
																			if cf.field_type == 'media'
																				img(src=`${contentDetail.content[brandLanguage.prefix][cfg.row_name][cf.field_name]}` style="max-width: 200px;")
																			else
																				| !{contentDetail.content[brandLanguage.prefix][cfg.row_name][cf.field_name]}
															else
																h1.mt-5.mb-2 #{cfg.row_label.toUpperCase()}
																if cfg.repeater_group
																	.row
																		- var content = contentDetail.content['common'][cfg.row_name]
																		if content
																			- for (var i = 0; i < contentDetail.content['common'][cfg.row_name][cfg.fields[0].field_name].length; i++)
																				each eachVal, vIndex in cfg.fields
																					.col-12.col-sm-6
																						- var content = contentDetail.content['common'][cfg.row_name]
																						if content
																							span.badge.badge-light #{eachVal.field_label.toUpperCase()} :
																							if eachVal.field_type == 'media'
																								img(src=`${content[eachVal.field_name][i]}` style="max-width: 100px;")
																							else
																								span.badge.badge-light-info #{content[eachVal.field_name][i]}
																							br
																else
																	each cf in cfg.fields
																		span.badge.badge-light-success.mt-5 #{cf.field_label}
																		br
																		.card
																			- var content = contentDetail.content['common'] && contentDetail.content['common'][cfg.row_name]
																			if content
																				if cf.field_type == 'media'
																					img(src=`${contentDetail.content['common'][cfg.row_name][cf.field_name]}` style="max-width: 200px;")
																				else
																					| !{contentDetail.content['common'][cfg.row_name][cf.field_name]}

					.col-12.col-sm-4
						.card.card-flush.pt-3.mb-5.mb-lg-10                                
							.card-body
								| Status : 
								span(class=`badge badge-light-${contentDetail.published ? 'success' : 'danger'}`)
									| #{contentDetail.published ? 'Published' : 'Unpublished'}
								p
									small
										if reqContentType.single_type
											| API Endpoint : 
											br
											code
												a(href=`${baseURL}/api/cms/${reqContentType.slug}` target="_blank") #{baseURL}/api/cms/#{reqContentType.slug}
										else
											| API Endpoint (Collection) :
											br
											code
												a(href=`${baseURL}/api/cms/${reqContentType.slug}` target="_blank") #{baseURL}/api/cms/#{reqContentType.slug}
											br
											| API Endpoint (Detail) :
											br
											code
												a(href=`${baseURL}/api/cms/${reqContentType.slug}/${contentDetail.slug}` target="_blank") #{baseURL}/api/cms/#{reqContentType.slug}/#{contentDetail.slug}