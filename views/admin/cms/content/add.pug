extends ../../layouts/master.pug

block csslib
	link(href='/cms-static/admin/assets/plugins/custom/fullcalendar/fullcalendar.bundle.css' rel='stylesheet' type='text/css')
	link(href='/cms-static/admin/assets/plugins/custom/datatables/datatables.bundle.css' rel='stylesheet' type='text/css')
	link(href='/cms-static/admin/assets/plugins/global/plugins.bundle.css' rel='stylesheet' type='text/css')
	link(href='/cms-static/admin/assets/css/style.bundle.css' rel='stylesheet' type='text/css')

block jslib
	// begin::Vendors Javascript(used by this page)
	//- script(src='/cms-static/admin/assets/plugins/custom/datatables/datatables.bundle.js')
	// end::Vendors Javascript
	// begin::Custom Javascript(used by this page)
	script(src='/cms-static/admin/assets/js/widgets.bundle.js')
	script(src='/cms-static/admin/assets/js/custom/widgets.js')
	script(src='/cms-static/admin/assets/js/custom/utilities/modals/new-card.js')
	//- script(src='/cms-static/admin/assets/js/custom/utilities/modals/users-search.js')
	script(src='/cms-static/admin/assets/plugins/custom/formrepeater/formrepeater.bundle.js')
	// end::Custom Javascript

	// CKEditor Build Bundles
	script(src='/cms-static/admin/assets/plugins/custom/ckeditor/ckeditor-classic.bundle.js')

	script(src='/cms-static/admin/assets/js/scripts.bundle.js')

	// Form Submission Script
	script(src='/cms-static/common/js/form-data-json.min.js')
	script(src='/cms-static/common/js/es-form.js')

block customScript
	script.
		document.querySelectorAll('.content_wysiwyg').forEach(function(e) {
			ClassicEditor
			.create(document.querySelector(`#${e.getAttribute('id')}`))
			.then(editor => {
			})
			.catch(error => {
			console.error(error);
			});
		})

		document.querySelectorAll('.kt_daterangepicker input').forEach((picker)=>{
			$(`#${picker.id}`).flatpickr({
				altInput: !0,
				altFormat: 'd F, Y',
				dateFormat: 'Y-m-dTH:i:00.000\\Z',
			})
		})

		var childIndex = 0
		function cloneChild(event) {
			childIndex++
			let targetElement = event.target
			let parentId = targetElement.getAttribute('target-id')
			let parentLang = targetElement.getAttribute('target-lang')
			let langPrefix = targetElement.getAttribute('target-lang-prefix')
			let p = document.querySelector(`.form-repeater-group-${parentLang}-${langPrefix}`)
			let p_prime = p.cloneNode(true)
			let newElement = document.getElementById(`${parentId}`).appendChild(p_prime)
			newElement.setAttribute("id", `form_repeater_child_${parentLang}-${childIndex*10000}`) //setting ID for newly created card
			document
				.querySelectorAll(`#form_repeater_child_${parentLang}-${childIndex*10000} .form-control`)
				.forEach(function (element) {
					element.value = null
				})
		}

		function deleteChild(event){
			let targetElement = event.target
			let parentDiv = targetElement.parentElement.parentElement.parentElement
			let childDiv = targetElement.parentElement.parentElement
			let parentId = parentDiv.getAttribute('id')
			let childId = childDiv.getAttribute('id')
			console.log(Number(childId.split('-')?.[1]))
			if(Number(childId.split('-')?.[1])>1000){
				const parentElement = document.getElementById(parentId)
				const childElement = document.getElementById(childId)
				parentElement.removeChild(childElement)
			}
		}

block content
	.d-flex.flex-column.flex-column-fluid
		#kt_app_toolbar.app-toolbar.py-3.py-lg-6
			#kt_app_toolbar_container.app-container.container-xxl.d-flex.flex-stack
				.page-title.d-flex.flex-column.justify-content-center.flex-wrap.me-3
					h1.page-heading.d-flex.text-dark.fw-bold.fs-3.flex-column.justify-content-center.my-0 Add #{reqContentType.title}
					ul.breadcrumb.breadcrumb-separatorless.fw-semibold.fs-7.my-0.pt-1
						li.breadcrumb-item.text-muted
							a.text-muted.text-hover-primary(href=`/admin/cms/${reqContentType.slug}`) #{reqContentType.title}
						li.breadcrumb-item
							span.bullet.bg-gray-400.w-5px.h-2px
						li.breadcrumb-item.text-muted Add New
				//- .d-flex.align-items-center.gap-2.gap-lg-3
				//- 	a.btn.btn-sm.fw-bold.btn-primary(href='#' data-bs-toggle='modal' data-bs-target='#kt_modal_create_app') Create
		#kt_app_content.app-content.flex-column-fluid
			#kt_app_content_container.app-container.container-xxl
				form#kt_subscriptions_create_new.form.es-form.d-flex.flex-column.flex-lg-row(action=`/admin/cms/${reqContentType.slug}/save` data-kt-redirect-url=`/admin/cms/${reqContentType.slug}` enctype='multipart/form-data' method='post')

					.d-flex.flex-column.flex-row-fluid.gap-7.gap-lg-10
						//- .card.card-flush.pt-3.mb-5.mb-lg-10
						.card.card-flush.py-4
							.card-header
								.card-title
									h2.fw-bold #{reqContentType.title}
								.card-toolbar
									button.btn.btn-sm.btn-success.form-submit-btn(type='submit')
										span.label Save
										span.preloader.d-none Saving...
							.card-body.pt-0
								ul.nav.nav-tabs.nav-line-tabs.mb-5.fs-6
									each brandLanguage, i in authUser.selected_brand.languages
										li.nav-item
											a.nav-link(class= (i== 0 ? 'active' : '') data-bs-toggle='tab' href=`#kt_tab_pane_${brandLanguage.prefix}`) #{brandLanguage.name}
								#myTabContent.tab-content.tab-content-fields
									each brandLanguage, i in authUser.selected_brand.languages
										.tab-pane.fade(class= (i== 0 ? 'active show' : '') role='tabpanel' id=`kt_tab_pane_${brandLanguage.prefix}`)
											//- BEGIN::Custom Fields with Bilingual
											each cfg, cfg_i in reqContentType.custom_field_groups
												if cfg.repeater_group == true && cfg.bilingual
													hr
													h4 #{cfg.row_label}
													//- if cfg.bilingual
													.group_repeater(id=`kt_docs_repeater_${brandLanguage.prefix}_${cfg._id}_${cfg_i}`)
														.row(id=`form_repeater_child_${brandLanguage.prefix}_${cfg._id}-${cfg_i}` class=`form-repeater-group-${cfg._id}-${brandLanguage.prefix}`)
															each cf,cf_idx in cfg.fields
																.d-flex.flex-column.mb-8.fv-row.fv-plugins-icon-container
																	//- if cf.field_type !='file'
																	label.d-flex.align-items-center.fs-6.fw-semibold.mb-2
																		span.required #{cf.field_label} (#{brandLanguage.prefix})
																	if cf.field_type === 'text'
																		input.form-control.form-control-solid(type='text' placeholder=`Enter ${cf.field_label}` name=`${cf.field_name}[${brandLanguage.prefix}][]`)
																		
																	else if cf.field_type === 'wysiwyg'
																		textarea.content_wysiwyg(name=`${cf.field_name}[${brandLanguage.prefix}][]` id=`wysiwyg-cf-${brandLanguage.prefix}-${cf_i}`)
																		
																	else if cf.field_type === 'textarea'
																		textarea.form-control.form-control-solid(rows='6' name=`${cf.field_name}[${brandLanguage.prefix}][]` placeholder='' spellcheck='false')
																		
																	else if cf.field_type === 'file'
																		if cf.info && cf.info.length
																			.alert.bg-warning.d-flex.align-items-center.p-5
																				span.svg-icon.svg-icon-2hx.svg-icon-primary.me-3
																				.d-flex.flex-column
																					each i in cf.info 
																						span #{i}
																		.col-md-6.col-lg-6
																			if(contentDetail && contentDetail.group_content[brandLanguage.prefix] && contentDetail.group_content[brandLanguage.prefix][cf.field_name] && contentDetail.group_content[brandLanguage.prefix][cf.field_name].media_url) 
																				input(name=`${cf.field_name}-url[${brandLanguage.prefix}]` value=JSON.stringify(contentDetail.content[brandLanguage.prefix][cf.field_name])   hidden)
																			else 
																			input(type='file' class='form-control form-control-solid' name=`${cf.field_name}.${brandLanguage.prefix}` id=`image-input.${brandLanguage.prefix}` )
																		
																	else if cf.field_type === 'date'
																		.kt_daterangepicker
																			input.form-control.mb-2(id=`kt_daterangepicker_${brandLanguage.prefix}-${cf_i}` name=`${cf.field_name}[${brandLanguage.prefix}][]` placeholder=`${cf.placeholder}` value='')
																			
																	else if cf.field_type === 'radio'
																		.row.row-cols-1.row-cols-md-3.row-cols-lg-1.row-cols-xl-3.g-9(data-kt-buttons='true' data-kt-buttons-target="[data-kt-button='true']")
																			each option,i in cf.options 
																				.col.d-flex.text-start.p-6
																					span.form-check.form-check-custom.form-check-solid.form-check-sm.align-items-start(data-kt-button='true')
																						input.form-check-input(type='radio' name=`${cf.field_name}[${brandLanguage.prefix}][]` id=`${option.value}-${i}` value=`${option.value}` checked=i==0)
																					span.ms-5
																						label.form-label(for=`${option.value}-${i}`) #{option.label}
																			else 
																				.col.d-flex.text-start.p-6
																					span.form-check.form-check-custom.form-check-solid.form-check-sm.align-items-start(data-kt-button='true')
																						input.form-check-input(type='radio' name=`${cf.field_name}[${brandLanguage.prefix}][]` id="percentage" value=`true` )
																					span.ms-5
																						label.form-label(for="percentage") 
																			
																	else if cf.field_type === 'dropdown'
																		select.form-select(data-control='select2' name=`${cf.field_name}[${brandLanguage.prefix}][]` data-placeholder='Select an option')
																			option
																			each dropdown, dd_i in cf.options
																				option(value=`${dropdown.value}`) #{dropdown.label}
																	.fv-plugins-message-container.invalid-feedback(id=`field-error-${cf.field_name}_${brandLanguage.prefix}`)
															.text-center
																//- a.btn.btn-sm.btn-light-danger.mt-3.mt-md-8(href='javascript:;' data-repeater-delete='')
																a.btn.btn-sm.btn-light-danger.mt-3.mt-md-8(onClick='deleteChild(event)' child-id=`form-repeater-child-${brandLanguage.prefix}_${cfg._id}-${cfg_i}` target-id=`kt_docs_repeater_${brandLanguage.prefix}_${cfg._id}_${cfg_i}`)
																	i.la.la-trash-o
																	| Delete
													.form-group.mt-5.text-center
														//- a.btn.btn-light-primary(href='javascript:;' data-repeater-create='')
														a.btn.btn-light-primary.mb-10(onClick='cloneChild(event)' target-lang=`${cfg._id}` target-lang-prefix=`${brandLanguage.prefix}` target-id=`kt_docs_repeater_${brandLanguage.prefix}_${cfg._id}_${cfg_i}` data-repeater-create='')
															i.la.la-plus
															| Add
															
												else
													if cfg.bilingual
														each cf in cfg.fields
															.d-flex.flex-column.mb-8.fv-row.fv-plugins-icon-container
																// begin::Label
																label.d-flex.align-items-center.fs-6.fw-semibold.mb-2
																	span.required #{cf.field_label} (#{brandLanguage.prefix})
																	i.fas.fa-exclamation-circle.ms-2.fs-7(data-bs-toggle='tooltip' aria-label='Specify a target name for future usage and reference' data-kt-initialized='1')
																// end::Label
																if cf.field_type === 'text'
																	input.form-control.form-control-solid(type='text' placeholder=`Enter ${cf.field_label}` name=`${cf.field_name}[${brandLanguage.prefix}]`)
																	.fv-plugins-message-container.invalid-feedback(id=`field-error-${cf.field_name}_${brandLanguage.prefix}`)
																else if cf.field_type === 'wysiwyg'
																	textarea.content_wysiwyg(name=`${cf.field_name}[${brandLanguage.prefix}]` id=`wysiwyg-cf-${brandLanguage.prefix}-${cf_i}`)
																	.fv-plugins-message-container.invalid-feedback(id=`field-error-${cf.field_name}_${brandLanguage.prefix}`)
																else if cf.field_type === 'textarea'
																	textarea.form-control.form-control-solid(rows='6' name=`${cf.field_name}[${brandLanguage.prefix}]` placeholder='' spellcheck='false')
																	.fv-plugins-message-container.invalid-feedback(id=`field-error-${cf.field_name}_${brandLanguage.prefix}`)
																else if cf.field_type === 'file'
																	if cf.info && cf.info.length
																		.alert.bg-warning.d-flex.align-items-center.p-5
																			span.svg-icon.svg-icon-2hx.svg-icon-primary.me-3
																			.d-flex.flex-column
																				each i in cf.info 
																					span #{i}
																	.col-md-6.col-lg-6
																		if(contentDetail && contentDetail.group_content[brandLanguage.prefix] && contentDetail.group_content[brandLanguage.prefix][cf.field_name] && contentDetail.group_content[brandLanguage.prefix][cf.field_name].media_url) 
																			input(name=`${cf.field_name}-url]` value=JSON.stringify(contentDetail.content[brandLanguage.prefix][cf.field_name])   hidden)
																		else 
																		input(type='file' class='form-control form-control-solid' name=`${cf.field_name}.${brandLanguage.prefix}` id=`image-input` )
																	.fv-plugins-message-container.invalid-feedback(id=`field-error-${cf.field_name}_${brandLanguage.prefix}`)
																else if cf.field_type === 'date'
																	.kt_daterangepicker
																		input.form-control.mb-2(id=`kt_daterangepicker_${brandLanguage.prefix}-${cf_i}` name=`${cf.field_name}[${brandLanguage.prefix}]` placeholder=`${cf.placeholder}` value='')
																		.fv-plugins-message-container.invalid-feedback(id=`field-error-${cf.field_name}_${brandLanguage.prefix}`)
																else if cf.field_type === 'radio'
																	.row.row-cols-1.row-cols-md-3.row-cols-lg-1.row-cols-xl-3.g-9(data-kt-buttons='true' data-kt-buttons-target="[data-kt-button='true']")
																		each option,i in cf.options 
																			.col.d-flex.text-start.p-6
																				span.form-check.form-check-custom.form-check-solid.form-check-sm.align-items-start(data-kt-button='true')
																					input.form-check-input(type='radio' name=`${cf.field_name}[${brandLanguage.prefix}]` id=`${option.value}-${i}` value=`${option.value}` checked=i==0)
																				span.ms-5
																					label.form-label(for=`${option.value}-${i}`) #{option.label}
																		else 
																			.col.d-flex.text-start.p-6
																				span.form-check.form-check-custom.form-check-solid.form-check-sm.align-items-start(data-kt-button='true')
																					input.form-check-input(type='radio' name=`${cf.field_name}[${brandLanguage.prefix}]` id="percentage" value=`true` )
																				span.ms-5
																					label.form-label(for="percentage") 
																		.fv-plugins-message-container.invalid-feedback(id=`field-error-${cf.field_name}_${brandLanguage.prefix}`)
																else if cf.field_type === 'dropdown'
																	select.form-select(data-control='select2' name=`${cf.field_name}[${brandLanguage.prefix}]` data-placeholder='Select an option')
																		option
																		each dropdown, dd_i in cf.options
																			option(value=`${dropdown.value}`) #{dropdown.label}
																	.fv-plugins-message-container.invalid-feedback(id=`field-error-${cf.field_name}_${brandLanguage.prefix}`)

								if has_common_field_groups
									.ribbon.ribbon-start.ribbon-clip
										.ribbon-label
											| General Fields (No Bilingual)
											span.ribbon-inner.bg-success
								//- BEGIN::Custom Fields without Bilingual
								.row.mt-5.pt-5
									.col-12.mt-5
										each cfg, cfg_i in reqContentType.custom_field_groups
											if cfg.bilingual == false 
												if cfg.repeater_group == true
													h4 #{cfg.row_label}
													.group_repeater(id=`kt_docs_repeater_${cfg._id}_${cfg_i}`)
														.form-group.row(id=`form_repeater_child_${cfg._id}-${cfg_i}` class=`form-repeater-group-${cfg._id}-en`)
															each cf in cfg.fields
																.d-flex.flex-column.mb-8.fv-row.fv-plugins-icon-container
																	label.d-flex.align-items-center.fs-6.fw-semibold.mb-2
																		span.required #{cf.field_label}
																		i.fas.fa-exclamation-circle.ms-2.fs-7(data-bs-toggle='tooltip' aria-label='Specify a target name for future usage and reference' data-kt-initialized='1')
																	if cf.field_type === 'text'
																		input.form-control.form-control-solid(type='text' placeholder=`Enter ${cf.field_label}` name=`${cf.field_name}[]`)
																		.fv-plugins-message-container.invalid-feedback(id=`field-error-${cf.field_name}`)
																	else if cf.field_type === 'wysiwyg'
																		textarea.content_wysiwyg(name=`${cf.field_name}` id=`wysiwyg-cf-${cf_i}`)
																		.fv-plugins-message-container.invalid-feedback(id=`field-error-${cf.field_name}`)
																	else if cf.field_type === 'textarea'
																		textarea.form-control.form-control-solid(rows='6' name=`${cf.field_name}[]` placeholder='' spellcheck='false')
																		.fv-plugins-message-container.invalid-feedback(id=`field-error-${cf.field_name}`)
																	else if cf.field_type === 'file'
																		if cf.info && cf.info.length 
																			.alert.bg-warning.d-flex.align-items-center.p-5
																				span.svg-icon.svg-icon-2hx.svg-icon-primary.me-3
																				.d-flex.flex-column
																					each i in cf.info 
																						span #{i}
																		.col-md-6.col-lg-6
																			if(contentDetail && contentDetail.group_content[brandLanguage.prefix] && contentDetail.group_content[brandLanguage.prefix][cf.field_name] && contentDetail.group_content[brandLanguage.prefix][cf.field_name].media_url) 
																				input(name=`${cf.field_name}-url[${brandLanguage.prefix}]` value=JSON.stringify(contentDetail.content[brandLanguage.prefix][cf.field_name])   hidden)
																			else 
																			input(type='file' class='form-control form-control-solid' name=`${cf.field_name}` id=`image-input.${brandLanguage.prefix}` )
																		.fv-plugins-message-container.invalid-feedback(id=`field-error-${cf.field_name}`)
																	else if cf.field_type === 'date'
																		.kt_daterangepicker
																			input.form-control.mb-2(id=`kt_daterangepicker_${cf_i}` name=`${cf.field_name}[]` placeholder=`${cf.placeholder}` value='')
																			.fv-plugins-message-container.invalid-feedback(id=`field-error-${cf.field_name}`)
																	else if cf.field_type === 'radio'
																		.row.row-cols-1.row-cols-md-3.row-cols-lg-1.row-cols-xl-3.g-9(data-kt-buttons='true' data-kt-buttons-target="[data-kt-button='true']")
																			each option,i in cf.options 
																				.col.d-flex.text-start.p-6
																					span.form-check.form-check-custom.form-check-solid.form-check-sm.align-items-start(data-kt-button='true')
																						input.form-check-input(type='radio' name=`${cf.field_name}[]` id=`${option.value}-${i}` value=`${option.value}` checked=i==0)
																					span.ms-5
																						label.form-label(for=`${option.value}-${i}`) #{option.label}
																			else 
																				.col.d-flex.text-start.p-6
																					span.form-check.form-check-custom.form-check-solid.form-check-sm.align-items-start(data-kt-button='true')
																						input.form-check-input(type='radio' name=`${cf.field_name}[]` id="percentage" value=`true` )
																					span.ms-5
																						label.form-label(for="percentage") 
																			.fv-plugins-message-container.invalid-feedback(id=`field-error-${cf.field_name}`)
																	else if cf.field_type === 'dropdown'
																		select.form-select(data-control='select' name=`${cf.field_name}[]` data-placeholder='Select an option')
																			option(value='') Select an option
																			each dropdown, dd_i in cf.options
																				option(value=`${dropdown.value}`) #{dropdown.label}
																		.fv-plugins-message-container.invalid-feedback(id=`field-error-${cf.field_name}`)
															.text-center
																//- a.btn.btn-sm.btn-light-danger.mt-3.mt-md-8(href='javascript:;' data-repeater-delete='')
																a.btn.btn-sm.btn-light-danger.mt-3.mt-md-8(onClick='deleteChild(event)' child-id=`form-repeater-child-${cfg._id}-${cfg_i}` target-id=`kt_docs_repeater_${cfg._id}_${cfg_i}`)
																	i.la.la-trash-o
																	| Delete
													.form-group.mt-5.text-center
														//- a.btn.btn-light-primary(href='javascript:;' data-repeater-create='')
														a.btn.btn-light-primary(onClick='cloneChild(event)' target-lang=`${cfg._id}` target-lang-prefix='en'  target-id=`kt_docs_repeater_${cfg._id}_${cfg_i}`)
															i.la.la-plus
															| Add
												else 
													each cf in cfg.fields
														.d-flex.flex-column.mb-8.fv-row.fv-plugins-icon-container
															label.d-flex.align-items-center.fs-6.fw-semibold.mb-2
																span.required #{cf.field_label}
																i.fas.fa-exclamation-circle.ms-2.fs-7(data-bs-toggle='tooltip' aria-label='Specify a target name for future usage and reference' data-kt-initialized='1')
															if cf.field_type === 'text'
																input.form-control.form-control-solid(type='text' placeholder=`Enter  ${cf.field_label}` name=`${cf.field_name}`)
																.fv-plugins-message-container.invalid-feedback(id=`field-error-${cf.field_name}`)
															else if cf.field_type === 'wysiwyg'
																textarea.content_wysiwyg(name=`${cf.field_name}` id=`wysiwyg-cf-${cf_i}`)
																.fv-plugins-message-container.invalid-feedback(id=`field-error-${cf.field_name}`)
															else if cf.field_type === 'textarea'
																textarea.form-control.form-control-solid(rows='6' name=`${cf.field_name}` placeholder='' spellcheck='false')
																.fv-plugins-message-container.invalid-feedback(id=`field-error-${cf.field_name}`)
															else if cf.field_type === 'file'
																if cf.info && cf.info.length 
																	.alert.bg-warning.d-flex.align-items-center.p-5
																		span.svg-icon.svg-icon-2hx.svg-icon-primary.me-3
																		.d-flex.flex-column
																			each i in cf.info 
																				span #{i}
																.col-md-6.col-lg-6
																	if(contentDetail && contentDetail.group_content && contentDetail.group_content['common'] && contentDetail.group_content['common'][cf.field_name] && contentDetail.group_content['common'][cf.field_name].media_url) 
																		input(name=`${cf.field_name}-url` value=JSON.stringify(contentDetail.content['common'][cf.field_name])   hidden)
																	else 
																	input(type='file' class='form-control form-control-solid' name=`${cf.field_name}` id=`image-input` )
																.fv-plugins-message-container.invalid-feedback(id=`field-error-${cf.field_name}`)
															else if cf.field_type === 'date'
																.kt_daterangepicker
																	input.form-control.mb-2(id=`kt_daterangepicker_${cf_i}` name=`${cf.field_name}` placeholder=`${cf.placeholder}` value='')
																	.fv-plugins-message-container.invalid-feedback(id=`field-error-${cf.field_name}`)
															else if cf.field_type === 'radio'
																.row.row-cols-1.row-cols-md-3.row-cols-lg-1.row-cols-xl-3.g-9(data-kt-buttons='true' data-kt-buttons-target="[data-kt-button='true']")
																	each option,i in cf.options 
																		.col.d-flex.text-start.p-6
																			span.form-check.form-check-custom.form-check-solid.form-check-sm.align-items-start(data-kt-button='true')
																				input.form-check-input(type='radio' name=`${cf.field_name}` id=`${option.value}-${i}` value=`${option.value}` checked=i==0)
																			span.ms-5
																				label.form-label(for=`${option.value}-${i}`) #{option.label}
																	else 
																		.col.d-flex.text-start.p-6
																			span.form-check.form-check-custom.form-check-solid.form-check-sm.align-items-start(data-kt-button='true')
																				input.form-check-input(type='radio' name=`${cf.field_name}` id="percentage" value=`true` )
																			span.ms-5
																				label.form-label(for="percentage") 
																	.fv-plugins-message-container.invalid-feedback(id=`field-error-${cf.field_name}`)
															else if cf.field_type === 'dropdown'
																select.form-select(data-control='select2' name=`${cf.field_name}` data-placeholder='Select an option')
																	option
																	each dropdown, dd_i in cf.options
																		option(value=`${dropdown.value}`) #{dropdown.label}
																.fv-plugins-message-container.invalid-feedback(id=`field-error-${cf.field_name}`)

								//- END::Custom Fields without Bilingual
					.d-flex.flex-column.gap-7.gap-lg-10.w-100.w-lg-300px.mb-7.ms-lg-10
						if reqContentType.has_banner == true	
							.card.card-flush.py-4
								.card-header
									.card-title
										h3 Select Banner
								.card-body.pt-0
									label.d-flex.align-items-center.fs-6.fw-semibold.mb-2
										span.required Banner
										i.fas.fa-exclamation-circle.ms-2.fs-7(data-bs-toggle='tooltip' aria-label='Specify a target name for future usage and reference' data-kt-initialized='1')
									select#kt_ecommerce_add_category_status_select.form-select.mb-2(data-control='select2' data-allow-clear="true" data-hide-search='true' data-placeholder='Select an option' name=`banner`)
										option(value="")
											| - SELECT A BANNER -
										each banner in banners
											option(value=`${banner._id}`) #{banner.title}
									.text-muted.fs-7 Select the banner group
									.fv-plugins-message-container.invalid-feedback(id=`field-error-banner`)
						if reqContentType.has_gallery == true	
							.card.card-flush.py-4
								.card-header
									.card-title
										h3 Select Gallery
								.card-body.pt-0
									label.d-flex.align-items-center.fs-6.fw-semibold.mb-2
										span.required Gallery
										i.fas.fa-exclamation-circle.ms-2.fs-7(data-bs-toggle='tooltip' aria-label='Specify a target name for future usage and reference' data-kt-initialized='1')
									select#kt_ecommerce_add_gallery_status_select.form-select.mb-2(data-control='select2' data-allow-clear="true" data-hide-search='true' data-placeholder='Select an option' name=`gallery`)
										option(value="")
											| - SELECT A GALLERY -
										each item in gallery
											option(value=`${item._id}`) #{item.title}
									.text-muted.fs-7 Select the gallery group
									.fv-plugins-message-container.invalid-feedback(id=`field-error-gallery`)
						.card.card-flush.py-4
							.card-header
								.card-title
									h3 Status
							.card-body.pt-0
								select#kt_ecommerce_add_product_status_select.form-select.mb-2(data-control='select2' name="published" data-hide-search='true' data-placeholder='Select an option')
									option
									option(value='false' selected='selected') Un-Published
									option(value='true' ) Published
								.text-muted.fs-7 Set the product status

						if reqContentType.allowed_type && reqContentType.allowed_type.length
							.card.card-flush.py-4
								.card-header
									.card-title
										h3 Attach Content Type
								.card-body.pt-0.text-center
									a.btn.btn-primary.btn-sm(href='#' data-bs-toggle='modal' data-bs-target='#kt_modal_create_app') Attach

						.card.card-flush.py-4
							.card-header
								.card-title
									h3 Add To Home
							.card-body.pt-0
								.row.row-cols-12(data-kt-buttons='true' data-kt-buttons-target="[data-kt-button='true']")
									.col.d-flex.text-start
										span.form-check.form-check-custom.form-check-solid.form-check-sm.align-items-start(data-kt-button='true')
											input.form-check-input(type='radio' name='in_home' id="false" value='false' checked='checked')
										span.ms-5
											label.form-label(for="false") No
									.col.d-flex.text-start
										span.form-check.form-check-custom.form-check-solid.form-check-sm.align-items-start(data-kt-button='true')
											input.form-check-input(type='radio' id="true" name='in_home' value='true')
										span.ms-5
											label.form-label(for="true") Yes
								.text-muted.fs-7 Add to the home page API
						.card.card-flush.py-4
							.card-header
								.card-title
									h3 Position
							.card-body.pt-0
								input.form-control(type='number' placeholder='Enter position'  name=`position` value="0")
								.fv-plugins-message-container.invalid-feedback(id=`field-error-position`)
					#kt_modal_create_app.modal.fade(tabindex='-1' aria-hidden='true')
						// begin::Modal dialog
						.modal-dialog.modal-dialog-centered.mw-900px
							.modal-content
								.modal-header
									h2 Attach Type
									.btn.btn-sm.btn-icon.btn-active-color-primary(data-bs-dismiss='modal' )
										h3 X						
								.modal-body.py-lg-10.px-lg-10
									.card.card-flush
										.card-body.pt-0
											.accordion(id='kt_accordion_1')
												each item,i in Object.keys(allowed_content)
													.accordion-item
														h2.accordion-header(id=`kt_accordion_1_header_${i}`)
															//class=`${i==0 ? '' : 'collapsed'}`
															button.accordion-button.fs-4.fw-semibold.collapsed( type='button' data-bs-toggle='collapse' data-bs-target=`#kt_accordion_1_body_${i}` aria-expanded=i==0 aria-controls=`kt_accordion_1_body_${i}`)
																| #{item.toUpperCase()}
																//class=`${i==0 ? 'show' : 'collapse'}`
														.accordion-collapse.collapse( id=`kt_accordion_1_body_${i}` aria-labelledby=`kt_accordion_1_header_${i}` data-bs-parent=`#kt_accordion_1`)
															.accordion-body
																//- p #{JSON.stringify(allowed_content[item])}
																select.form-select.mb-2(id=`kt_ecommerce_add_product_status_select2-${i}` data-control='select2' name=`attached_type[${item}]` data-hide-search='true' data-placeholder='Select a content' multiple='multiple')
																	option
																	each content in allowed_content[item] 
																		option(value=content._id  ) #{content.content.en ? content.content.en.title : `${item} title`}
																.text-muted.fs-7 Set the content Types

